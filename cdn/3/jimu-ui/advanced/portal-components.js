System.register(["arcgis-portal-components","jimu-core","jimu-theme","jimu-ui"],(function(e,t){var a={},s={},o={},n={};return{setters:[function(e){a.ArcgisPortalClassificationBanner=e.ArcgisPortalClassificationBanner,a.ArcgisPortalClassificationConfig=e.ArcgisPortalClassificationConfig},function(e){s.React=e.React,s.classNames=e.classNames,s.getAppStore=e.getAppStore,s.hooks=e.hooks,s.jsx=e.jsx,s.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){o.styled=e.styled},function(e){n.Loading=e.Loading,n.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{"use strict";var e={1888:e=>{e.exports=o},14321:e=>{e.exports=n},61274:e=>{e.exports=a},79244:e=>{e.exports=s}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};r.r(c),r.d(c,{ClassificationBanner:()=>u,ClassificationConfig:()=>h,ClassificationConfigModalContent:()=>y});var i=r(79244);const l=(e,t)=>{const[a,s]=i.React.useState(null);return i.React.useEffect((()=>{(0,i.loadArcGISJSAPIModules)(["esri/portal/PortalItem"]).then((a=>{const[o]=a,n=new o({portal:{url:(0,i.getAppStore)().getState().portalUrl},id:e});n.load().then((()=>{t&&(n.classification=t),s(n)}))}))}),[]),a};var f=r(61274);const u=e=>{const{className:t,portalItemId:a,classification:s,position:o,needSticky:n=!0,onReady:r}=e,c=l(a,s);i.hooks.useUpdateEffect((()=>{c&&(c.classification=s,p.current.portalItem=c.clone())}),[s]);const[u,d]=i.React.useState(!1);i.React.useEffect((()=>{customElements.whenDefined("arcgis-portal-classification-banner").then((()=>{d(!0)}))}),[]);const p=i.React.useRef(null),[m,g]=i.React.useState(!1);i.React.useEffect((()=>{if(m){const e=new ResizeObserver((t=>{for(const a of t)if(a.target===p.current){a.contentRect.height&&(null==r||r(),e.disconnect())}}));e.observe(p.current)}}),[m]);return c&&u?(0,i.jsx)(f.ArcgisPortalClassificationBanner,{class:(0,i.classNames)("w-100",t),style:n?{position:"sticky",[o]:0,zIndex:2}:void 0,ref:e=>{e&&!p.current&&(e.portalItem=c,e.variant="full",e.componentOnReady().then((()=>{g(!0)})),p.current=e)}}):null};var d=r(1888),p=r(14321),m=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(a[s[o]]=e[s[o]])}return a};const g=d.styled.div`
  position: relative;
  overflow-y: auto;
  --calcite-loader-progress-color: transparent;
  --calcite-loader-track-color: transparent;
`,h=i.React.forwardRef(((e,t)=>{const{className:a,portalItemId:s,values:o,onChange:n}=e,r=l(s,o),c=i.React.useRef(null),u=i.hooks.useForkRef(c,t),[d,m]=i.React.useState(!1);i.React.useEffect((()=>{customElements.whenDefined("arcgis-portal-classification-config").then((()=>{m(!0)}))}),[]);const[h,v]=i.React.useState(!0),[y,R]=i.React.useState(),[S,x]=i.React.useState(!1);i.React.useEffect((()=>{n(h,y)}),[h,y]);return(0,i.jsx)(g,{className:(0,i.classNames)("w-100",a)},!S&&(0,i.jsx)(p.Loading,null),r&&d&&(0,i.jsx)(f.ArcgisPortalClassificationConfig,{ref:e=>{!c.current&&e&&(e.portalItem=r,e.addEventListener("arcgisPropertyChange",(({detail:e,target:t})=>{"valid"===e.name?v(t.valid):"values"===e.name&&R(t.values)})),e.componentOnReady().then((()=>{x(!0)})),u(e))}}))})),v=d.styled.div((({theme:e})=>`\n    height: 425px;\n    .header {\n      font-size: ${e.sys.typography.h5.fontSize};\n      font-weight: 600;\n      color: #C5C5C5;\n    }\n    .config-content {\n      flex: 1;\n    }\n  `)),y=i.React.forwardRef(((e,t)=>{const{className:a,showHeader:s=!0}=e,o=m(e,["className","showHeader"]),n=i.hooks.useTranslation(p.defaultMessages),r=i.React.useCallback((e=>{const t=new PointerEvent("click",e);t.composedPath=()=>e.composedPath(),document.dispatchEvent(t)}),[]);return(0,i.jsx)(v,{className:"d-flex flex-column",ref:e=>{const t=null==e?void 0:e.closest(".jimu-modal");t&&t.addEventListener("click",r)}},s&&(0,i.jsx)("div",{className:(0,i.classNames)("header mb-2 px-2",a)},n("classification")),(0,i.jsx)(h,Object.assign({className:"config-content"},o,{ref:t})))}));return c})())}}}));