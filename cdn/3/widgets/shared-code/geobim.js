/*! For license information please see geobim.js.LICENSE.txt */
System.register(["jimu-core","widgets/shared-code/geobim","jimu-arcgis","jimu-ui","jimu-core/react"],(function(e,t){var r={},n={},s={},i={},o={};return Object.defineProperty(o,"__esModule",{value:!0}),{setters:[function(e){r.DataSourceComponent=e.DataSourceComponent,r.Immutable=e.Immutable,r.React=e.React,r.ReactRedux=e.ReactRedux,r.ServiceManager=e.ServiceManager,r.SessionManager=e.SessionManager,r.createIntl=e.createIntl,r.createIntlCache=e.createIntlCache,r.css=e.css,r.getAppStore=e.getAppStore,r.i18n=e.i18n,r.jsx=e.jsx,r.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules,r.lodash=e.lodash},function(e){n.GeoBimFeatureServiceError=e.GeoBimFeatureServiceError,n.MapSelection=e.MapSelection,n.apsAuthenticatedSelector=e.apsAuthenticatedSelector,n.areRecordArraysEqual=e.areRecordArraysEqual,n.getAllFeatureServiceIds=e.getAllFeatureServiceIds,n.getGeoBIMFeatureServiceError=e.getGeoBIMFeatureServiceError,n.getMapViewName=e.getMapViewName,n.inWidgetMessageContainerStyle=e.inWidgetMessageContainerStyle,n.inWidgetMessageLinkStyle=e.inWidgetMessageLinkStyle,n.useApsAuth=e.useApsAuth,n.useGeoBIM=e.useGeoBIM,n.useSessionManager=e.useSessionManager},function(e){s.JimuMapViewComponent=e.JimuMapViewComponent,s.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){i.Alert=e.Alert},function(e){Object.keys(e).forEach((function(t){o[t]=e[t]}))}],execute:function(){e((()=>{var e,t,a={4146:(e,t,r)=>{"use strict";var n=r(44363),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?o:a[e.$$typeof]||s}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var s=p(r);s&&s!==f&&e(t,s,n)}var o=u(r);d&&(o=o.concat(d(r)));for(var a=l(t),g=l(r),m=0;m<o.length;++m){var v=o[m];if(!(i[v]||n&&n[v]||g&&g[v]||a&&a[v])){var y=h(r,v);try{c(t,v,y)}catch(e){}}}}return t}},14321:e=>{"use strict";e.exports=i},22738:(e,t,r)=>{"use strict";r.d(t,{$:()=>Zr,A:()=>LI,B:()=>Pb,C:()=>bf,D:()=>Cf,E:()=>tS,F:()=>jb,G:()=>zp,H:()=>VI,I:()=>PS,J:()=>wn,K:()=>lf,L:()=>xf,M:()=>AS,N:()=>Df,O:()=>vf,P:()=>kf,Q:()=>CS,R:()=>un,S:()=>oI,T:()=>ts,U:()=>If,V:()=>SS,W:()=>OS,X:()=>cf,Y:()=>uf,Z:()=>bS,_:()=>Fp,a:()=>Ls,a$:()=>yy,a0:()=>mA,a1:()=>JE,a2:()=>eI,a3:()=>xA,a4:()=>bb,a5:()=>oE,a6:()=>ZA,a7:()=>RE,a8:()=>pA,a9:()=>cE,aA:()=>Lk,aB:()=>Ck,aC:()=>Yk,aD:()=>Qk,aE:()=>eO,aF:()=>Eb,aG:()=>TS,aH:()=>xS,aI:()=>yA,aJ:()=>ob,aK:()=>$_,aL:()=>hb,aM:()=>lb,aN:()=>xw,aO:()=>ub,aP:()=>H_,aQ:()=>Pw,aR:()=>Rw,aS:()=>L_,aT:()=>sb,aU:()=>db,aV:()=>cb,aW:()=>Zw,aX:()=>Xw,aY:()=>Yw,aZ:()=>jw,a_:()=>F_,aa:()=>ES,ab:()=>ab,ac:()=>Dk,ad:()=>BO,ae:()=>jS,af:()=>hE,ag:()=>PA,ah:()=>kS,ai:()=>wS,aj:()=>Bb,ak:()=>BS,al:()=>mS,am:()=>yS,an:()=>rk,ao:()=>Sk,ap:()=>wb,aq:()=>IS,ar:()=>Rk,as:()=>mk,at:()=>mO,au:()=>Ak,av:()=>qk,aw:()=>Ek,ax:()=>nk,ay:()=>sk,az:()=>oS,b:()=>Ns,b0:()=>jr,b1:()=>_y,b2:()=>Sy,b3:()=>We,c:()=>qs,d:()=>Gs,e:()=>wc,f:()=>wf,g:()=>np,h:()=>Ef,i:()=>Gh,j:()=>Af,k:()=>Sf,l:()=>Yh,m:()=>Ms,n:()=>Uf,o:()=>dS,p:()=>Jh,q:()=>iS,r:()=>cS,s:()=>fS,t:()=>Ib,u:()=>_f,v:()=>VS,w:()=>Bp,x:()=>js,y:()=>jf,z:()=>qp});var n=r(68972);var s=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,o=String.fromCharCode,a=Object.assign;function l(e){return e.trim()}function c(e,t,r){return e.replace(t,r)}function u(e,t){return e.indexOf(t)}function d(e,t){return 0|e.charCodeAt(t)}function h(e,t,r){return e.slice(t,r)}function p(e){return e.length}function f(e){return e.length}function g(e,t){return t.push(e),e}var m=1,v=1,y=0,_=0,w=0,b="";function S(e,t,r,n,s,i,o){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:m,column:v,length:o,return:""}}function A(e,t){return a(S("",null,null,"",null,null,0),e,{length:-e.length},t)}function E(){return w=_>0?d(b,--_):0,v--,10===w&&(v=1,m--),w}function I(){return w=_<y?d(b,_++):0,v++,10===w&&(v=1,m++),w}function k(){return d(b,_)}function O(){return _}function T(e,t){return h(b,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x(e){return m=v=1,y=p(b=e),_=0,[]}function R(e){return b="",e}function j(e){return l(T(_-1,U(91===e?e+2:40===e?e+1:e)))}function P(e){for(;(w=k())&&w<33;)I();return C(e)>2||C(w)>3?"":" "}function D(e,t){for(;--t&&I()&&!(w<48||w>102||w>57&&w<65||w>70&&w<97););return T(e,O()+(t<6&&32==k()&&32==I()))}function U(e){for(;I();)switch(w){case e:return _;case 34:case 39:34!==e&&39!==e&&U(w);break;case 40:41===e&&U(e);break;case 92:I()}return _}function L(e,t){for(;I()&&e+w!==57&&(e+w!==84||47!==k()););return"/*"+T(t,_-1)+"*"+o(47===e?e:I())}function N(e){for(;!C(k());)I();return T(e,_)}var $="-ms-",M="-moz-",F="-webkit-",B="comm",q="rule",z="decl",V="@keyframes";function W(e,t){for(var r="",n=f(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function G(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case z:return e.return=e.return||e.value;case B:return"";case V:return e.return=e.value+"{"+W(e.children,n)+"}";case q:e.value=e.props.join(",")}return p(r=W(e.children,n))?e.return=e.value+"{"+r+"}":""}function H(e){return R(J("",null,null,null,[""],e=x(e),0,[0],e))}function J(e,t,r,n,s,i,a,l,h){for(var f=0,m=0,v=a,y=0,_=0,w=0,b=1,S=1,A=1,T=0,C="",x=s,R=i,U=n,$=C;S;)switch(w=T,T=I()){case 40:if(108!=w&&58==d($,v-1)){-1!=u($+=c(j(T),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:$+=j(T);break;case 9:case 10:case 13:case 32:$+=P(w);break;case 92:$+=D(O()-1,7);continue;case 47:switch(k()){case 42:case 47:g(Y(L(I(),O()),t,r),h);break;default:$+="/"}break;case 123*b:l[f++]=p($)*A;case 125*b:case 59:case 0:switch(T){case 0:case 125:S=0;case 59+m:-1==A&&($=c($,/\f/g,"")),_>0&&p($)-v&&g(_>32?Z($+";",n,r,v-1):Z(c($," ","")+";",n,r,v-2),h);break;case 59:$+=";";default:if(g(U=K($,t,r,f,m,s,l,C,x=[],R=[],v),i),123===T)if(0===m)J($,t,U,U,x,i,v,l,R);else switch(99===y&&110===d($,3)?100:y){case 100:case 108:case 109:case 115:J(e,U,U,n&&g(K(e,U,U,0,0,s,l,C,s,x=[],v),R),s,R,v,l,n?x:R);break;default:J($,U,U,U,[""],R,0,l,R)}}f=m=_=0,b=A=1,C=$="",v=a;break;case 58:v=1+p($),_=w;default:if(b<1)if(123==T)--b;else if(125==T&&0==b++&&125==E())continue;switch($+=o(T),T*b){case 38:A=m>0?1:($+="\f",-1);break;case 44:l[f++]=(p($)-1)*A,A=1;break;case 64:45===k()&&($+=j(I())),y=k(),m=v=p(C=$+=N(O())),T++;break;case 45:45===w&&2==p($)&&(b=0)}}return i}function K(e,t,r,n,s,o,a,u,d,p,g){for(var m=s-1,v=0===s?o:[""],y=f(v),_=0,w=0,b=0;_<n;++_)for(var A=0,E=h(e,m+1,m=i(w=a[_])),I=e;A<y;++A)(I=l(w>0?v[A]+" "+E:c(E,/&\f/g,v[A])))&&(d[b++]=I);return S(e,t,r,0===s?q:u,d,p,g)}function Y(e,t,r){return S(e,t,r,B,o(w),h(e,2,-2),0)}function Z(e,t,r,n){return S(e,t,r,z,h(e,0,n),h(e,n+1,-1),n)}var X=function(e,t,r){for(var n=0,s=0;n=s,s=k(),38===n&&12===s&&(t[r]=1),!C(s);)I();return T(e,_)},Q=function(e,t){return R(function(e,t){var r=-1,n=44;do{switch(C(n)){case 0:38===n&&12===k()&&(t[r]=1),e[r]+=X(_-1,t,r);break;case 2:e[r]+=j(n);break;case 4:if(44===n){e[++r]=58===k()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=o(n)}}while(n=I());return e}(x(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(r))&&!n){ee.set(e,!0);for(var s=[],i=Q(t,s),o=r.props,a=0,l=0;a<i.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=s[a]?i[a].replace(/&\f/g,o[c]):o[c]+" "+i[a]}}},re=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ne(e,t){switch(function(e,t){return 45^d(e,0)?(((t<<2^d(e,0))<<2^d(e,1))<<2^d(e,2))<<2^d(e,3):0}(e,t)){case 5103:return F+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return F+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return F+e+M+e+$+e+e;case 6828:case 4268:return F+e+$+e+e;case 6165:return F+e+$+"flex-"+e+e;case 5187:return F+e+c(e,/(\w+).+(:[^]+)/,F+"box-$1$2"+$+"flex-$1$2")+e;case 5443:return F+e+$+"flex-item-"+c(e,/flex-|-self/,"")+e;case 4675:return F+e+$+"flex-line-pack"+c(e,/align-content|flex-|-self/,"")+e;case 5548:return F+e+$+c(e,"shrink","negative")+e;case 5292:return F+e+$+c(e,"basis","preferred-size")+e;case 6060:return F+"box-"+c(e,"-grow","")+F+e+$+c(e,"grow","positive")+e;case 4554:return F+c(e,/([^-])(transform)/g,"$1"+F+"$2")+e;case 6187:return c(c(c(e,/(zoom-|grab)/,F+"$1"),/(image-set)/,F+"$1"),e,"")+e;case 5495:case 3959:return c(e,/(image-set\([^]*)/,F+"$1$`$1");case 4968:return c(c(e,/(.+:)(flex-)?(.*)/,F+"box-pack:$3"+$+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+F+e+e;case 4095:case 3583:case 4068:case 2532:return c(e,/(.+)-inline(.+)/,F+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(d(e,t+1)){case 109:if(45!==d(e,t+4))break;case 102:return c(e,/(.+:)(.+)-([^]+)/,"$1"+F+"$2-$3$1"+M+(108==d(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?ne(c(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==d(e,t+1))break;case 6444:switch(d(e,p(e)-3-(~u(e,"!important")&&10))){case 107:return c(e,":",":"+F)+e;case 101:return c(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+F+(45===d(e,14)?"inline-":"")+"box$3$1"+F+"$2$3$1"+$+"$2box$3")+e}break;case 5936:switch(d(e,t+11)){case 114:return F+e+$+c(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return F+e+$+c(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return F+e+$+c(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return F+e+$+e+e}return e}var se=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case z:e.return=ne(e.value,e.length);break;case V:return W([A(e,{value:c(e.value,"@","@"+F)})],n);case q:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return W([A(e,{props:[c(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return W([A(e,{props:[c(t,/:(plac\w+)/,":"+F+"input-$1")]}),A(e,{props:[c(t,/:(plac\w+)/,":-moz-$1")]}),A(e,{props:[c(t,/:(plac\w+)/,$+"input-$1")]})],n)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,i,o=e.stylisPlugins||se,a={},l=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;l.push(e)}));var c,u,d,h,p=[G,(h=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&h(e)})],g=(u=[te,re].concat(o,p),d=f(u),function(e,t,r,n){for(var s="",i=0;i<d;i++)s+=u[i](e,t,r,n)||"";return s});i=function(e,t,r,n){c=r,W(H(e?e+"{"+t.styles+"}":t.styles),g),n&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new s({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return m.sheet.hydrate(l),m};var oe=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)};var ae={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function le(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var ce=/[A-Z]|^ms/g,ue=/_EMO_([^_]+?)_([^]*?)_EMO_/g,de=function(e){return 45===e.charCodeAt(1)},he=function(e){return null!=e&&"boolean"!=typeof e},pe=le((function(e){return de(e)?e:e.replace(ce,"-$&").toLowerCase()})),fe=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(ue,(function(e,t,r){return me={name:t,styles:r,next:me},t}))}return 1===ae[e]||de(e)||"number"!=typeof t||0===t?t:t+"px"};function ge(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var s=r;if(1===s.anim)return me={name:s.name,styles:s.styles,next:me},s.name;var i=r;if(void 0!==i.styles){var o=i.next;if(void 0!==o)for(;void 0!==o;)me={name:o.name,styles:o.styles,next:me},o=o.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=ge(e,t,r[s])+";";else for(var i in r){var o=r[i];if("object"!=typeof o){var a=o;null!=t&&void 0!==t[a]?n+=i+"{"+t[a]+"}":he(a)&&(n+=pe(i)+":"+fe(i,a)+";")}else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=ge(e,t,o);switch(i){case"animation":case"animationName":n+=pe(i)+":"+l+";";break;default:n+=i+"{"+l+"}"}}else for(var c=0;c<o.length;c++)he(o[c])&&(n+=pe(i)+":"+fe(i,o[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var a=me,l=r(e);return me=a,ge(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var me,ve=/label:\s*([^\s;{]+)\s*(;|$)/g;function ye(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,s="";me=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,s+=ge(r,t,i)):s+=i[0];for(var o=1;o<e.length;o++){if(s+=ge(r,t,e[o]),n)s+=i[o]}ve.lastIndex=0;for(var a,l="";null!==(a=ve.exec(s));)l+="-"+a[1];var c=function(e){for(var t,r=0,n=0,s=e.length;s>=4;++n,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(s){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(s)+l;return{name:c,styles:s,next:me}}var _e=!!n.useInsertionEffect&&n.useInsertionEffect,we=_e||function(e){return e()},be=(_e||n.useLayoutEffect,n.createContext("undefined"!=typeof HTMLElement?ie({key:"css"}):null)),Se=(be.Provider,function(e){return(0,n.forwardRef)((function(t,r){var s=(0,n.useContext)(be);return e(t,s,r)}))}),Ae=n.createContext({});var Ee,Ie,ke={}.hasOwnProperty,Oe="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Te=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return oe(t,r,n),we((function(){return function(e,t,r){oe(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+n:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}}(t,r,n)})),null},Ce=Se((function(e,t,r){var s=e.css;"string"==typeof s&&void 0!==t.registered[s]&&(s=t.registered[s]);var i=e[Oe],o=[s],a="";"string"==typeof e.className?a=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(n+=r+" ")})),n}(t.registered,o,e.className):null!=e.className&&(a=e.className+" ");var l=ye(o,void 0,n.useContext(Ae));a+=t.key+"-"+l.name;var c={};for(var u in e)ke.call(e,u)&&"css"!==u&&u!==Oe&&(c[u]=e[u]);return c.className=a,r&&(c.ref=r),n.createElement(n.Fragment,null,n.createElement(Te,{cache:t,serialized:l,isStringTag:"string"==typeof i}),n.createElement(i,c))})),xe=(r(4146),function(e,t){var r=arguments;if(null==t||!ke.call(t,"css"))return n.createElement.apply(void 0,r);var s=r.length,i=new Array(s);i[0]=Ce,i[1]=function(e,t){var r={};for(var n in t)ke.call(t,n)&&(r[n]=t[n]);return r[Oe]=e,r}(e,t);for(var o=2;o<s;o++)i[o]=r[o];return n.createElement.apply(null,i)});Ee=xe||(xe={}),Ie||(Ie=Ee.JSX||(Ee.JSX={}));function Re(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ye(t)}var je,Pe,De,Ue,Le,Ne,$e,Me,Fe,Be,qe,ze=Object.defineProperty,Ve=(e,t,r)=>((e,t,r)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const We="7.101.0";var Ge=(e=>(e[e.OK=0]="OK",e))(Ge||{});class He extends Error{constructor(e,t,r){super(t),Ve(this,"name"),Ve(this,"originalMessage"),Ve(this,"errorCode"),this.name=e,this.originalMessage=t,this.errorCode=r,Object.setPrototypeOf(this,He.prototype)}}var Je,Ke={exports:{}},Ye={};var Ze;var Xe=(Ze||(Ze=1,Ke.exports=function(){if(Je)return Ye;Je=1;var e=n.default,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(e,r,n){var a,l={},c=null,u=null;for(a in void 0!==n&&(c=""+n),void 0!==r.key&&(c=""+r.key),void 0!==r.ref&&(u=r.ref),r)s.call(r,a)&&!o.hasOwnProperty(a)&&(l[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===l[a]&&(l[a]=r[a]);return{$$typeof:t,type:e,key:c,ref:u,props:l,_owner:i.current}}return Ye.Fragment=r,Ye.jsx=a,Ye.jsxs=a,Ye}()),Ke.exports);var Qe=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),et="-ms-",tt="-moz-",rt="-webkit-",nt="comm",st="rule",it="decl",ot="@keyframes",at=Math.abs,lt=String.fromCharCode,ct=Object.assign;function ut(e){return e.trim()}function dt(e,t,r){return e.replace(t,r)}function ht(e,t){return e.indexOf(t)}function pt(e,t){return 0|e.charCodeAt(t)}function ft(e,t,r){return e.slice(t,r)}function gt(e){return e.length}function mt(e){return e.length}function vt(e,t){return t.push(e),e}var yt=1,_t=1,wt=0,bt=0,St=0,At="";function Et(e,t,r,n,s,i,o){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:yt,column:_t,length:o,return:""}}function It(e,t){return ct(Et("",null,null,"",null,null,0),e,{length:-e.length},t)}function kt(){return St=bt<wt?pt(At,bt++):0,_t++,10===St&&(_t=1,yt++),St}function Ot(){return pt(At,bt)}function Tt(){return bt}function Ct(e,t){return ft(At,e,t)}function xt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rt(e){return yt=_t=1,wt=gt(At=e),bt=0,[]}function jt(e){return At="",e}function Pt(e){return ut(Ct(bt-1,Lt(91===e?e+2:40===e?e+1:e)))}function Dt(e){for(;(St=Ot())&&St<33;)kt();return xt(e)>2||xt(St)>3?"":" "}function Ut(e,t){for(;--t&&kt()&&!(St<48||St>102||St>57&&St<65||St>70&&St<97););return Ct(e,Tt()+(t<6&&32==Ot()&&32==kt()))}function Lt(e){for(;kt();)switch(St){case e:return bt;case 34:case 39:34!==e&&39!==e&&Lt(St);break;case 40:41===e&&Lt(e);break;case 92:kt()}return bt}function Nt(e,t){for(;kt()&&e+St!==57&&(e+St!==84||47!==Ot()););return"/*"+Ct(t,bt-1)+"*"+lt(47===e?e:kt())}function $t(e){for(;!xt(Ot());)kt();return Ct(e,bt)}function Mt(e){return jt(Ft("",null,null,null,[""],e=Rt(e),0,[0],e))}function Ft(e,t,r,n,s,i,o,a,l){for(var c=0,u=0,d=o,h=0,p=0,f=0,g=1,m=1,v=1,y=0,_="",w=s,b=i,S=n,A=_;m;)switch(f=y,y=kt()){case 40:if(108!=f&&58==pt(A,d-1)){-1!=ht(A+=dt(Pt(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:A+=Pt(y);break;case 9:case 10:case 13:case 32:A+=Dt(f);break;case 92:A+=Ut(Tt()-1,7);continue;case 47:switch(Ot()){case 42:case 47:vt(qt(Nt(kt(),Tt()),t,r),l);break;default:A+="/"}break;case 123*g:a[c++]=gt(A)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+u:-1==v&&(A=dt(A,/\f/g,"")),p>0&&gt(A)-d&&vt(p>32?zt(A+";",n,r,d-1):zt(dt(A," ","")+";",n,r,d-2),l);break;case 59:A+=";";default:if(vt(S=Bt(A,t,r,c,u,s,a,_,w=[],b=[],d),i),123===y)if(0===u)Ft(A,t,S,S,w,i,d,a,b);else switch(99===h&&110===pt(A,3)?100:h){case 100:case 108:case 109:case 115:Ft(e,S,S,n&&vt(Bt(e,S,S,0,0,s,a,_,s,w=[],d),b),s,b,d,a,n?w:b);break;default:Ft(A,S,S,S,[""],b,0,a,b)}}c=u=p=0,g=v=1,_=A="",d=o;break;case 58:d=1+gt(A),p=f;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==(St=bt>0?pt(At,--bt):0,_t--,10===St&&(_t=1,yt--),St))continue;switch(A+=lt(y),y*g){case 38:v=u>0?1:(A+="\f",-1);break;case 44:a[c++]=(gt(A)-1)*v,v=1;break;case 64:45===Ot()&&(A+=Pt(kt())),h=Ot(),u=d=gt(_=A+=$t(Tt())),y++;break;case 45:45===f&&2==gt(A)&&(g=0)}}return i}function Bt(e,t,r,n,s,i,o,a,l,c,u){for(var d=s-1,h=0===s?i:[""],p=mt(h),f=0,g=0,m=0;f<n;++f)for(var v=0,y=ft(e,d+1,d=at(g=o[f])),_=e;v<p;++v)(_=ut(g>0?h[v]+" "+y:dt(y,/&\f/g,h[v])))&&(l[m++]=_);return Et(e,t,r,0===s?st:a,l,c,u)}function qt(e,t,r){return Et(e,t,r,nt,lt(St),ft(e,2,-2),0)}function zt(e,t,r,n){return Et(e,t,r,it,ft(e,0,n),ft(e,n+1,-1),n)}function Vt(e,t){for(var r="",n=mt(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function Wt(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case it:return e.return=e.return||e.value;case nt:return"";case ot:return e.return=e.value+"{"+Vt(e.children,n)+"}";case st:e.value=e.props.join(",")}return gt(r=Vt(e.children,n))?e.return=e.value+"{"+r+"}":""}function Gt(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var Ht=function(e,t,r){for(var n=0,s=0;n=s,s=Ot(),38===n&&12===s&&(t[r]=1),!xt(s);)kt();return Ct(e,bt)},Jt=function(e,t){return jt(function(e,t){var r=-1,n=44;do{switch(xt(n)){case 0:38===n&&12===Ot()&&(t[r]=1),e[r]+=Ht(bt-1,t,r);break;case 2:e[r]+=Pt(n);break;case 4:if(44===n){e[++r]=58===Ot()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=lt(n)}}while(n=kt());return e}(Rt(e),t))},Kt=new WeakMap,Yt=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Kt.get(r))&&!n){Kt.set(e,!0);for(var s=[],i=Jt(t,s),o=r.props,a=0,l=0;a<i.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=s[a]?i[a].replace(/&\f/g,o[c]):o[c]+" "+i[a]}}},Zt=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Xt(e,t){switch(function(e,t){return 45^pt(e,0)?(((t<<2^pt(e,0))<<2^pt(e,1))<<2^pt(e,2))<<2^pt(e,3):0}(e,t)){case 5103:return rt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return rt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return rt+e+tt+e+et+e+e;case 6828:case 4268:return rt+e+et+e+e;case 6165:return rt+e+et+"flex-"+e+e;case 5187:return rt+e+dt(e,/(\w+).+(:[^]+)/,rt+"box-$1$2"+et+"flex-$1$2")+e;case 5443:return rt+e+et+"flex-item-"+dt(e,/flex-|-self/,"")+e;case 4675:return rt+e+et+"flex-line-pack"+dt(e,/align-content|flex-|-self/,"")+e;case 5548:return rt+e+et+dt(e,"shrink","negative")+e;case 5292:return rt+e+et+dt(e,"basis","preferred-size")+e;case 6060:return rt+"box-"+dt(e,"-grow","")+rt+e+et+dt(e,"grow","positive")+e;case 4554:return rt+dt(e,/([^-])(transform)/g,"$1"+rt+"$2")+e;case 6187:return dt(dt(dt(e,/(zoom-|grab)/,rt+"$1"),/(image-set)/,rt+"$1"),e,"")+e;case 5495:case 3959:return dt(e,/(image-set\([^]*)/,rt+"$1$`$1");case 4968:return dt(dt(e,/(.+:)(flex-)?(.*)/,rt+"box-pack:$3"+et+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+rt+e+e;case 4095:case 3583:case 4068:case 2532:return dt(e,/(.+)-inline(.+)/,rt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(gt(e)-1-t>6)switch(pt(e,t+1)){case 109:if(45!==pt(e,t+4))break;case 102:return dt(e,/(.+:)(.+)-([^]+)/,"$1"+rt+"$2-$3$1"+tt+(108==pt(e,t+3)?"$3":"$2-$3"))+e;case 115:return~ht(e,"stretch")?Xt(dt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==pt(e,t+1))break;case 6444:switch(pt(e,gt(e)-3-(~ht(e,"!important")&&10))){case 107:return dt(e,":",":"+rt)+e;case 101:return dt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+rt+(45===pt(e,14)?"inline-":"")+"box$3$1"+rt+"$2$3$1"+et+"$2box$3")+e}break;case 5936:switch(pt(e,t+11)){case 114:return rt+e+et+dt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return rt+e+et+dt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return rt+e+et+dt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return rt+e+et+e+e}return e}var Qt,er=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case it:e.return=Xt(e.value,e.length);break;case ot:return Vt([It(e,{value:dt(e.value,"@","@"+rt)})],n);case st:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Vt([It(e,{props:[dt(t,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return Vt([It(e,{props:[dt(t,/:(plac\w+)/,":"+rt+"input-$1")]}),It(e,{props:[dt(t,/:(plac\w+)/,":-moz-$1")]}),It(e,{props:[dt(t,/:(plac\w+)/,et+"input-$1")]})],n)}return""}))}}],tr=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var n,s,i=e.stylisPlugins||er,o={},a=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)o[t[r]]=!0;a.push(e)}));var l,c,u,d,h=[Wt,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],p=(c=[Yt,Zt].concat(i,h),u=mt(c),function(e,t,r,n){for(var s="",i=0;i<u;i++)s+=c[i](e,t,r,n)||"";return s});s=function(e,t,r,n){l=r,Vt(Mt(e?e+"{"+t.styles+"}":t.styles),p),n&&(f.inserted[t.name]=!0)};var f={key:t,sheet:new Qe({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return f.sheet.hydrate(a),f},rr={exports:{}},nr={};var sr,ir,or;function ar(){return sr||(sr=1,rr.exports=function(){if(Qt)return nr;Qt=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,f=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,m=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,y=e?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var h=e.$$typeof;switch(h){case t:switch(e=e.type){case l:case c:case n:case i:case s:case d:return e;default:switch(e=e&&e.$$typeof){case a:case u:case f:case p:case o:return e;default:return h}}case r:return h}}}function w(e){return _(e)===c}return nr.AsyncMode=l,nr.ConcurrentMode=c,nr.ContextConsumer=a,nr.ContextProvider=o,nr.Element=t,nr.ForwardRef=u,nr.Fragment=n,nr.Lazy=f,nr.Memo=p,nr.Portal=r,nr.Profiler=i,nr.StrictMode=s,nr.Suspense=d,nr.isAsyncMode=function(e){return w(e)||_(e)===l},nr.isConcurrentMode=w,nr.isContextConsumer=function(e){return _(e)===a},nr.isContextProvider=function(e){return _(e)===o},nr.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},nr.isForwardRef=function(e){return _(e)===u},nr.isFragment=function(e){return _(e)===n},nr.isLazy=function(e){return _(e)===f},nr.isMemo=function(e){return _(e)===p},nr.isPortal=function(e){return _(e)===r},nr.isProfiler=function(e){return _(e)===i},nr.isStrictMode=function(e){return _(e)===s},nr.isSuspense=function(e){return _(e)===d},nr.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===c||e===i||e===s||e===d||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===o||e.$$typeof===a||e.$$typeof===u||e.$$typeof===m||e.$$typeof===v||e.$$typeof===y||e.$$typeof===g)},nr.typeOf=_,nr}()),rr.exports}!function(){if(or)return ir;or=1;var e=ar(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function i(r){return e.isMemo(r)?n:s[r.$$typeof]||t}s[e.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[e.Memo]=n;var o=Object.defineProperty,a=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,d=Object.prototype;ir=function e(t,n,s){if("string"!=typeof n){if(d){var h=u(n);h&&h!==d&&e(t,h,s)}var p=a(n);l&&(p=p.concat(l(n)));for(var f=i(t),g=i(n),m=0;m<p.length;++m){var v=p[m];if(!(r[v]||s&&s[v]||g&&g[v]||f&&f[v])){var y=c(n,v);try{o(t,v,y)}catch(e){}}}}return t}}();var lr=function(e,t,r){var n=e.key+"-"+t.name;!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles)};var cr={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ur=/[A-Z]|^ms/g,dr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,hr=function(e){return 45===e.charCodeAt(1)},pr=function(e){return null!=e&&"boolean"!=typeof e},fr=Gt((function(e){return hr(e)?e:e.replace(ur,"-$&").toLowerCase()})),gr=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(dr,(function(e,t,r){return vr={name:t,styles:r,next:vr},t}))}return 1===cr[e]||hr(e)||"number"!=typeof t||0===t?t:t+"px"};function mr(e,t,r){if(null==r)return"";var n=r;if(void 0!==n.__emotion_styles)return n;switch(typeof r){case"boolean":return"";case"object":var s=r;if(1===s.anim)return vr={name:s.name,styles:s.styles,next:vr},s.name;var i=r;if(void 0!==i.styles){var o=i.next;if(void 0!==o)for(;void 0!==o;)vr={name:o.name,styles:o.styles,next:vr},o=o.next;return i.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=mr(e,t,r[s])+";";else for(var i in r){var o=r[i];if("object"!=typeof o){var a=o;pr(a)&&(n+=fr(i)+":"+gr(i,a)+";")}else if(Array.isArray(o)&&"string"==typeof o[0]&&null==t)for(var l=0;l<o.length;l++)pr(o[l])&&(n+=fr(i)+":"+gr(i,o[l])+";");else{var c=mr(e,t,o);switch(i){case"animation":case"animationName":n+=fr(i)+":"+c+";";break;default:n+=i+"{"+c+"}"}}}return n}(e,t,r);case"function":if(void 0!==e){var a=vr,l=r(e);return vr=a,mr(e,t,l)}}return r}var vr,yr=/label:\s*([^\s;{]+)\s*(;|$)/g;var _r=!!n.useInsertionEffect&&n.useInsertionEffect||function(e){return e()},wr=n.createContext("undefined"!=typeof HTMLElement?tr({key:"css"}):null);wr.Provider;var br=function(e){return(0,n.forwardRef)((function(t,r){var s=(0,n.useContext)(wr);return e(t,s,r)}))},Sr=n.createContext({}),Ar={}.hasOwnProperty,Er="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ir=function(e,t){var r={};for(var n in t)Ar.call(t,n)&&(r[n]=t[n]);return r[Er]=e,r},kr=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;return lr(t,r,n),_r((function(){return function(e,t,r){lr(e,t,r);var n=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s=t;do{e.insert(t===s?"."+n:"",s,e.sheet,!0),s=s.next}while(void 0!==s)}}(t,r,n)})),null},Or=br((function(e,t,r){var s=e.css;"string"==typeof s&&void 0!==t.registered[s]&&(s=t.registered[s]);var i=e[Er],o=[s],a="";"string"==typeof e.className?a=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(n+=r+" ")})),n}(t.registered,o,e.className):null!=e.className&&(a=e.className+" ");var l=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,s="";vr=void 0;var i=e[0];null==i||void 0===i.raw?(n=!1,s+=mr(r,t,i)):s+=i[0];for(var o=1;o<e.length;o++)s+=mr(r,t,e[o]),n&&(s+=i[o]);yr.lastIndex=0;for(var a,l="";null!==(a=yr.exec(s));)l+="-"+a[1];return{name:function(e){for(var t,r=0,n=0,s=e.length;s>=4;++n,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(s){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}(s)+l,styles:s,next:vr}}(o,void 0,n.useContext(Sr));a+=t.key+"-"+l.name;var c={};for(var u in e)Ar.call(e,u)&&"css"!==u&&u!==Er&&(c[u]=e[u]);return c.className=a,r&&(c.ref=r),n.createElement(n.Fragment,null,n.createElement(kr,{cache:t,serialized:l,isStringTag:"string"==typeof i}),n.createElement(i,c))})),Tr=Or,Cr=function(e,t,r){return Ar.call(t,"css")?Xe.jsx(Tr,Ir(e,t),r):Xe.jsx(e,t,r)};const xr="GeoBIM.Issues",Rr=class e{constructor(t,r){Ve(this,"viewer",null),Ve(this,"domContainer"),Ve(this,"resizeObserver"),Ve(this,"options"),Ve(this,"isResizing",!1),Ve(this,"selectedIds"),Ve(this,"currentUrn"),Ve(this,"currentDoc"),Ve(this,"currentViewableId",null),Ve(this,"currentModel"),Ve(this,"dbProps",[]),Ve(this,"onModelViewerResize",(()=>{null!==this.viewer?this.isResizing||(this.viewer.resize(),this.isResizing=!0,setTimeout((()=>{this.isResizing=!1}),100)):this.isResizing=!1})),Ve(this,"handleModelRootLoaded",(async()=>{const e=await Promise.all([this.onModelViewerEvent(Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT),this.onModelViewerEvent(Autodesk.Viewing.GEOMETRY_LOADED_EVENT)]);if(null!=this.selectedIds){const t=null!=e[0].model?e[0].model:e[1].model;null!=t&&await this.selectBIMComponents(this.selectedIds,t)}})),Ve(this,"findDbId",((e,t)=>{for(const r of t){const t=e.find((e=>e.properties.some((e=>r===e.displayValue.toString()))));if(null!=t)return t.dbId}})),this.domContainer=t,this.resizeObserver=new ResizeObserver(this.onModelViewerResize),this.resizeObserver.observe(this.domContainer),this.options={...e.defaultOptions,...r}}async loadViewerLib(e){return await new Promise((t=>{const r="aps-viewer-lib";if(null===document.getElementById(r)){const n=document.createElement("link");n.rel="stylesheet",n.href=`https://developer.api.autodesk.com/modelderivative/v2/viewers/${e}/style.min.css`,document.body.appendChild(n);const s=document.createElement("script");return s.onerror=()=>{console.error("Model Viewer: Cannot load viewer library script"),t(!1)},s.onload=()=>{s.id=r,t(!0)},s.src=`https://developer.api.autodesk.com/modelderivative/v2/viewers/${e}/viewer3D.min.js`,void document.body.appendChild(s)}t(!0)}))}async initializeEnv(){const e=null!=this.options.version?this.options.version:We;await this.loadViewerLib(e),await this.registerIssuesExtension();const t=await this.options.getAccessToken()??"";await new Promise((e=>{Autodesk.Viewing.Initializer({env:"AutodeskProduction",api:"derivativeV2",accessToken:t},(()=>{e()}))}))}async registerIssuesExtension(){const{GeoBIMIssuesExtension:e}=await r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_GeoBimIssuesExtension-C-07c35f").then(r.bind(r,18674));Autodesk.Viewing.theExtensionManager.registerExtension(xr,e)}parseLinkUrl(e){const t=e.split("/versions/");return t.length<2?"":window.btoa(decodeURIComponent(t[t.length-1]))}async loadDocument(e){return await new Promise(((t,r)=>{var n;const s=null==(n=this.viewer)?void 0:n.getVisibleModels();null==s||s.forEach((e=>{var t;null==(t=this.viewer)||t.unloadModel(e)})),Autodesk.Viewing.Document.load(e,(e=>{t(e)}),((e,t,n)=>{r(new He(t,n.toLocaleString(),e))}))}))}async initializeViewer(){var e;null==(e=this.viewer)||e.finish(),this.viewer=new Autodesk.Viewing.GuiViewer3D(this.domContainer);const t=this.viewer.start();return this.onModelViewerEvent(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT,this.handleModelRootLoaded,!1),t}async start(){return await this.initializeEnv(),await this.initializeViewer()}async loadModel(e,t,r){this.selectedIds=r;const n=e.startsWith("http")?this.parseLinkUrl(e):window.btoa(decodeURIComponent(e));try{let e;this.currentUrn===n?e=this.currentDoc:(await this.initializeViewer(),e=await this.loadDocument(`urn:${n}`),this.currentUrn=n,this.currentDoc=e);const s=this.viewer;if(null===s||void 0===e)return;const i=void 0!==t?e.getRoot().findByGuid(t):e.getRoot().getDefaultGeometry(),o=null==i?void 0:i.id;if(this.currentViewableId!==o&&(this.currentViewableId=o,null!==s)){const t=Promise.all([this.addEventListener(s,Autodesk.Viewing.OBJECT_TREE_CREATED_EVENT),this.addEventListener(s,Autodesk.Viewing.GEOMETRY_LOADED_EVENT)]),r=await s.loadDocumentNode(e,i,{keepCurrentModels:!1,preserveView:!1});return await this.loadExtensions(),await t,r}if(void 0!==r){const e=s.getAllModels();if(e.length>0){const t=e[0];return await this.selectBIMComponents(r,t),t}}}catch(e){throw new He("GeoBIM APS Model Viewer Error",e)}}async addEventListener(e,t,r,n=!0){return await new Promise((s=>{const i=o=>{n&&e.removeEventListener(t,i),void 0!==r&&r(o),s(o)};e.addEventListener(t,i)}))}async showIssues(e){const t=this.viewer;if(null!==t){const r=t.getExtension(xr)??null;null!==r&&await r.showBIMIssues(e)}}async loadExtension(e,t){var r;return await(null==(r=this.viewer)?void 0:r.loadExtension(e,t))??null}async onModelViewerEvent(e,t,r=!0){return await new Promise((n=>{var s;const i=s=>{var o;r&&(null==(o=this.viewer)||o.removeEventListener(e,i)),null!=t&&t(s),n(s)};null==(s=this.viewer)||s.addEventListener(e,i)}))}async selectBIMComponents(e,t){const r=this.viewer;if(null===r)return;r.clearSelection();const n=t;if((null==e?void 0:e.length)>0&&null!=n){let t;this.currentModel===n?t=this.dbProps:(t=await n.getPropertyDb().executeUserFunction((function userFunction(e){const t=[];return e.enumObjects((r=>{const n=e.getObjectProperties(r);t.push(n)})),t})),this.dbProps=t,this.currentModel=n);const s=this.findDbId(t,e);if(void 0!==s)return r.fitToView([s],n),void r.select([s],n)}r.fitToView([],n),r.select([],n)}async loadExtensions(){if(null!=this.options.extensions){const e=this.options.extensions.map((async e=>"string"!=typeof e?await this.loadExtension(e.extensionId,e.options):await this.loadExtension(e)));await Promise.all(e)}}resize(){var e;null==(e=this.viewer)||e.resize()}dispose(){var e;null==(e=this.viewer)||e.tearDown()}};Ve(Rr,"defaultOptions",{extensions:["Autodesk.DocumentBrowser",xr],version:We});let jr=Rr;var Pr=Object.defineProperty,Dr=(e,t,r)=>((e,t,r)=>t in e?Pr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r),Ur=Object.defineProperty,Lr=(e,t,r)=>((e,t,r)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);Lr(class{constructor(){Lr(this,"globalId"),Lr(this,"objectId"),Lr(this,"creationDate"),Lr(this,"creator"),Lr(this,"editDate"),Lr(this,"editor")}},"fields",["globalId","objectId","creationDate","creator","editDate","editor"]);var Nr=(e=>(e.ViewerUrl="ViewerUrl",e.BIMDocument="BIMDocument",e.DocumentName="DocumentName",e.ScheduleFeature="ScheduleFeature",e.Custom="Custom",e))(Nr||{});let $r;function Mr(e){return"function"==typeof $r[e]?$r[e]=$r[e](globalThis):$r[e]}var Fr,Br,qr,zr,Vr;function Wr(e,t,r){if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Gr(e,t){return null!=e}function Hr(e,t){let r;for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function Jr(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=function(e){if(function(e){var t;return"Int8Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint8Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint8ClampedArray"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Int16Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint16Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Int32Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint32Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Float32Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Float64Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,n]of e)t.set(r,Jr(n));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(Jr(r));return t}return null}(e);if(null!=t)return t;if(function(e){return"function"==typeof e.clone}(e))return e.clone();if(function(e){return"function"==typeof e.map&&"function"==typeof e.forEach}(e))return e.map(Jr);if(function(e){return"function"==typeof e.notifyChange&&"function"==typeof e.watch}(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=Jr(e[t]);return r}function Kr(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Yr(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(null==e?void 0:e.getTime)&&"function"==typeof(null==t?void 0:t.getTime)&&e.getTime()===t.getTime()||!1}function Zr(e,t){return e===t||(null==e||"string"==typeof e?e===t:"number"==typeof e?e===t||"number"==typeof t&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&Wr(e,t):e instanceof Set?t instanceof Set&&function(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}(e,t):e instanceof Map?t instanceof Map&&function(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e){const e=t.get(r);if(e!==n||void 0===e&&!t.has(r))return!1}return!0}(e,t):!!Kr(e)&&Kr(t)&&function(e,t){if(null===e||null===t)return!1;const r=Object.keys(e);if(null===t||Object.keys(t).length!==r.length)return!1;for(const n of r)if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}(e,t))}function Xr(e,t){if(null!=t)return t[e]||en(e.split("."),!1,t)}function Qr(e,t,r){const n=e.split("."),s=n.pop(),i=en(n,!0,r);i&&s&&(i[s]=t)}function en(e,t,r){let n=r;for(const r of e){if(null==n)return;if(!(r in n)){if(!t)return;n[r]={}}n=n[r]}return n}function tn(e,t,r){return t?Object.keys(t).reduce(((e,n)=>{let s=e[n],i=t[n];return s===i?e:void 0===s?(e[n]=Jr(i),e):(Array.isArray(i)||Array.isArray(e)?(s=s?Array.isArray(s)?e[n]=s.slice():e[n]=[s]:e[n]=[],i&&(Array.isArray(i)||(i=[i]),r?i.forEach((e=>{s.includes(e)||s.push(e)})):e[n]=i.slice())):i&&"object"==typeof i?e[n]=tn(s,i,r):e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[n]=i),e)}),e||{}):e}$r=null!=(Fr=globalThis.dojoConfig)&&Fr.has||null!=(Br=globalThis.esriConfig)&&Br.has?{...null==(qr=globalThis.dojoConfig)?void 0:qr.has,...null==(zr=globalThis.esriConfig)?void 0:zr.has}:{},Mr.add=(e,t,r,n)=>{(n||void 0===$r[e])&&($r[e]=t),r&&Mr(e)},Mr.cache=$r,Mr.add("big-integer-warning-enabled",!0),Mr.add("esri-deprecation-warnings",!0),Mr.add("esri-tests-disable-screenshots",!1),Mr.add("esri-tests-use-full-window",!1),Mr.add("esri-tests-post-to-influx",!0),Mr.add("esri-cim-animations-enable-status","enabled"),Mr.add("esri-cim-animations-spotlight",!1),Mr.add("esri-cim-animations-freeze-time",!1),Mr.add("enable-feature:multiple-highlights",!0),(()=>{var e;Mr.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(Mr.add("host-browser",t),Mr.add("host-node","object"==typeof globalThis.process&&(null==(e=globalThis.process.versions)?void 0:e.node)&&globalThis.process.versions.v8),Mr.add("dom",t),Mr("host-browser")){const e=navigator,t=e.userAgent,r=e.appVersion,n=parseFloat(r);if(Mr.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),Mr.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),Mr.add("khtml",r.includes("Konqueror")?n:void 0),Mr.add("edge",parseFloat(t.split("Edge/")[1])||void 0),Mr.add("opr",parseFloat(t.split("OPR/")[1])||void 0),Mr.add("webkit",!Mr("wp")&&!Mr("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),Mr.add("chrome",!Mr("edge")&&!Mr("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),Mr.add("android",!Mr("wp")&&parseFloat(t.split("Android ")[1])||void 0),Mr.add("safari",!r.includes("Safari")||Mr("wp")||Mr("chrome")||Mr("android")||Mr("edge")||Mr("opr")?void 0:parseFloat(r.split("Version/")[1])),Mr.add("mac",r.includes("Macintosh")),!Mr("wp")&&/(iPhone|iPod|iPad)/.test(t)){const e=RegExp.$1.replace(/P/,"p"),r=/OS ([\d_]+)/.test(t)?RegExp.$1:"1",n=parseFloat(r.replace(/_/,".").replaceAll("_",""));Mr.add(e,n),Mr.add("ios",n)}Mr("webkit")||(!t.includes("Gecko")||Mr("wp")||Mr("khtml")||Mr("edge")||Mr.add("mozilla",n),Mr("mozilla")&&Mr.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&Mr.add("esri-mobile",t),r&&Mr.add("esri-iPhone",r),Mr.add("esri-geolocation",!!navigator.geolocation)}Mr.add("esri-wasm","WebAssembly"in globalThis),Mr.add("esri-performance-mode-frames-between-render",20),Mr.add("esri-force-performance-mode",!1),Mr.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=!1===globalThis.crossOriginIsolated;return e&&!t})),Mr.add("wasm-simd",(()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))),Mr.add("esri-atomics","Atomics"in globalThis),Mr.add("esri-workers","Worker"in globalThis),Mr.add("web-feat:cache","caches"in globalThis),Mr.add("esri-workers-arraybuffer-transfer",!Mr("safari")||Number(Mr("safari"))>=12),Mr.add("workers-pool-size",8),Mr.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Mr.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Mr.add("featurelayer-fast-triangulation-enabled",!0),Mr.add("featurelayer-animation-enabled",!0),Mr.add("featurelayer-snapshot-enabled",!0),Mr.add("featurelayer-snapshot-point-min-threshold",8e4),Mr.add("featurelayer-snapshot-point-max-threshold",4e5),Mr.add("featurelayer-snapshot-point-coverage",.1),Mr.add("featurelayer-query-max-depth",4),Mr.add("featurelayer-query-pausing-enabled",!1),Mr.add("featurelayer-advanced-symbols",!1),Mr.add("featurelayer-pbf",!0),Mr.add("featurelayer-pbf-statistics",!1),Mr.add("feature-layers-workers",!0),Mr.add("feature-polyline-generalization-factor",1),Mr.add("mapview-transitions-duration",200),Mr.add("mapview-essential-goto-duration",200),Mr.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Mr.add("mapserver-pbf-version-support",10.81),Mr.add("mapservice-popup-identify-max-tolerance",20),Mr.add("request-queue-concurrency-hosted",16),Mr.add("request-queue-concurrency-non-hosted",4),Mr.add("curve-densification-coarse-segments",128),Mr.add("curve-densification-max-segments",2e3),Mr.add("curve-densification-min-segments",3),Mr.add("curve-densification-pixels-per-segment",16),Mr.add("view-readyState-waiting-delay",1e3),Mr.add("gradient-depth-bias",.01),Mr.add("gradient-depth-epsilon",1e-8),Mr("host-webworker")||Mr("host-browser")&&(Mr.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),Mr.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{Mr.add("esri-image-decode",!0,!0,!0)})).catch((()=>{Mr.add("esri-image-decode",!1,!0,!0)}))}return!1})),Mr.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();const rn={apiKey:void 0,applicationName:"",applicationUrl:null==(Vr=globalThis.location)?void 0:Vr.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(function(e,t,r=!1){tn(e,t,r)}(rn,globalThis.esriConfig,!0),delete rn.has),!rn.assetsPath){{const e="4.32";rn.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}rn.defaultAssetsPath=rn.assetsPath}const nn=/\{([^}]+)\}/g;function sn(e){return e??""}const on={info:0,warn:1,error:2,none:3};let an=class e{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=t.level&&(this.level=t.level),null!=t.writer&&(this.writer=t.writer),this._module=t.module,e._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");-1!==r&&(this._parent=e.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(t){return t="string"!=typeof t?t.declaredClass:t,e._loggers.get(t)||new e({module:t})}_log(t,r,...n){if(this._matchLevel(t)){if("always"!==r&&!e._throttlingDisabled){const s=function(...e){return function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}(n),i=this._loggedMessages[t].get(s);if("once"===r&&null!=i||"oncePerTick"===r&&i&&i>=e._tickCounter)return;this._loggedMessages[t].set(s,e._tickCounter),e._scheduleTickCounterIncrement()}for(const e of rn.log.interceptors)if(e(t,this.module,...n))return;this._inheritedWriter()(t,this.module,...n)}}_parentWithMember(e,t){let r=this;for(;null!=r;){const t=r[e];if(null!=t)return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",ln)}_matchLevel(e){const t=rn.log.level||"warn";return on[this._parentWithMember("level",t)]<=on[e]}static _scheduleTickCounterIncrement(){e._tickCounterScheduled||(e._tickCounterScheduled=!0,Promise.resolve().then((()=>{e._tickCounter++,e._tickCounterScheduled=!1})))}};function ln(e,t,...r){console[e](`[${t}]`,...r)}an._loggers=new Map,an._tickCounter=0,an._tickCounterScheduled=!1,an._throttlingDisabled=!1;let cn=class{constructor(e,t,r=void 0){this.name=e,this.details=r,this.message=(t&&function(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((e,r)=>""===r?"$":(Xr(r,t)??"").toString()))}(t,r))??""}toString(){return"["+this.name+"]: "+this.message}},un=class e extends cn{constructor(e,t,r){super(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return Jr(t)}catch{return"[object]"}})))}}catch(e){throw an.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new e(t.name,t.message,t.details)}};function dn(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}un.prototype.type="error";const hn=new WeakMap;function pn(e,t,r={}){if(Mr("esri-deprecation-warnings")){const{moduleName:n}=r;!function(e,t,r={}){if(Mr("esri-deprecation-warnings")){const{replacement:n,version:s,see:i,warnOnce:o}=r;let a=t;if(n&&(a+=`\n\t\u{1f6e0}\ufe0f Replacement: ${n}`),s&&(a+=`\n\t\u2699\ufe0f Version: ${s}`),i)if(Array.isArray(i)){a+="\n\t\u{1f517} See for more details:";for(const e of i)a+=`\n\t\t${e}`}else a+=`\n\t\u{1f517} See ${i} for more details.`;!function(e,t,r=!1){const n=`\u{1f6d1} DEPRECATED - ${t}`;if(!r)return void e.warn(n);let s=hn.get(e);s||(s=new Set,hn.set(e,s)),s.has(t)||(s.add(t),e.warn(n))}(e,a,o)}}(e,"Function: "+((n?n+"::":"")+t+"()"),r)}}function fn(e){return null!=e&&"function"==typeof e[Symbol.iterator]}let gn=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(fn(e)){const r=this._getOrCreateGroup(t);for(const t of e)yn(t)&&r.push(t)}else yn(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(mn(e))}remove(e){if("string"!=typeof e&&fn(e)){for(const t of e)this.remove(t);return this}return this.has(e)?(vn(this._getGroup(e)),this._groups.delete(mn(e)),this):this}removeAll(){return this._groups.forEach(vn),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(mn(e),t),t}_getGroup(e){return this._groups.get(mn(e))}};function mn(e){return e||"_default_"}function vn(e){for(const t of e)t instanceof gn?t.removeAll():t.remove()}function yn(e){return null!=e&&(!!e.remove||e instanceof gn)}function _n(e){return null==e||e.destroy(),null}function wn(e){return null==e||e.remove(),null}const bn=Symbol("Accessor-beforeDestroy"),Sn={remove:()=>{}};function An(e){return e?{remove(){e&&(e(),e=void 0)}}:Sn}function En(e){return An((()=>function(e){e.forEach((e=>null==e?void 0:e.remove()))}(e)))}function In(e){return e.__accessor__??null}function kn(e,t,r){return On(e,t,r?{policy:r,path:""}:null)}function On(e,t,r){return t?Object.keys(t).reduce(((e,n)=>{const s=n;let i=null,o="merge";if(r&&(i=r.path?`${r.path}.${n}`:n,o=r.policy(i)),"replace"===o||"replace-arrays"===o&&Array.isArray(e[s]))return e[s]=t[s],e;if(void 0===e[s])return e[s]=Jr(t[s]),e;let a=e[s],l=t[s];if(a===l)return e;if(Array.isArray(l)||Array.isArray(e))a=a?Array.isArray(a)?e[s]=a.slice():e[s]=[a]:e[s]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach((e=>{a.includes(e)||a.push(e)})));else if(l&&"object"==typeof l)if(r){const t=r.path;r.path=i,e[s]=On(a,l,r),r.path=t}else e[s]=On(a,l,null);else e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[s]=l);return e}),e||{}):e}function Tn(e){return Array.isArray(e)?e:e.split(".")}function Cn(e){return e.includes(",")?e.split(",").map((e=>e.trim())):[e.trim()]}function xn(e,t,r,n){const s=function(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...Cn(r));return t}return Cn(e)}(t);if(1!==s.length){return En(s.map((t=>n(e,t,r))))}return n(e,s[0],r)}function Rn(e,t){const r="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(r,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.at(e)}const n=In(t);return function(e,t){var r;return null!=(null==(r=null==e?void 0:e.metadata)?void 0:r[t])}(n,r)?n.get(r):t[r]}function jn(e,t,r){if(null==e)return e;const n=Rn(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:jn(n,t,r+1)}function Pn(e,t,r=0){return"string"!=typeof t||t.includes(".")?jn(e,Tn(t),r):Rn(t,e)}function Dn(e,t){return Pn(e,t)}function Un(e,t){return void 0!==Pn(t,e)}var Ln,Nn;function $n(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const e in t)t[e]=Jr(t[e]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Mn(e,t){const r=$n(e);let n=r[t];return n||(n=r[t]={}),n}(Nn=Ln||(Ln={}))[Nn.INITIALIZING=0]="INITIALIZING",Nn[Nn.CONSTRUCTING=1]="CONSTRUCTING",Nn[Nn.CONSTRUCTED=2]="CONSTRUCTED",Nn[Nn.DESTROYED=3]="DESTROYED";const Fn=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Bn(e){return Fn.test(e)?"replace":"merge"}let qn=class e{constructor(e,t,r,n=1,s=0){this._ctor=e,this._acquireFunction=t,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let e=0;e<s;e++)this._pool[e]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(e.test.disabled)r=new this._ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):function(e){return(null==e?void 0:e.acquire)&&"function"==typeof e.acquire}(r)&&r.acquire(...t),r}release(t){t&&!e.test.disabled&&(this._releaseFunction?this._releaseFunction(t):function(e){return(null==e?void 0:e.release)&&"function"==typeof e.release}(t)&&t.release(),this._pool.push(t))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}};qn.test={disabled:!1};let zn=class{constructor(e,t){this._observers=e,this._observer=t}remove(){!function(e,t){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}(this._observers,this._observer)}},Vn=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Wn;null==this._observers&&(this._observers=[]);const t=this._observers;let r=!1,n=!1;const s=t.length;for(let i=0;i<s;++i){const s=t[i];if(s.destroyed)n=!0;else if(s===e){r=!0;break}}return r||(t.push(e),n&&this._removeDestroyedObservers()),new zn(t,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||0===e.length)return;const t=e.length;let r=0;for(let n=0;n<t;++n){for(;n+r<t&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<t))break;e[n]=e[n+r]}}e.length=t-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(null!=e){for(const t of e)t.onCommitted();this._observers=null}}};const Wn=An();var Gn,Hn;function Jn(e){switch(e){case"defaults":return Gn.DEFAULTS;case"service":return Gn.SERVICE;case"portal-item":return Gn.PORTAL_ITEM;case"web-scene":return Gn.WEB_SCENE;case"web-map":return Gn.WEB_MAP;case"link-chart":return Gn.LINK_CHART;case"user":return Gn.USER;default:return null}}function Kn(e){switch(e){case Gn.DEFAULTS:return"defaults";case Gn.SERVICE:return"service";case Gn.PORTAL_ITEM:return"portal-item";case Gn.WEB_SCENE:return"web-scene";case Gn.WEB_MAP:return"web-map";case Gn.LINK_CHART:return"link-chart";case Gn.USER:return"user"}}function Yn(e){return Kn(e)}!function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"}(Gn||(Gn={})),Gn.USER,function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"}(Hn||(Hn={}));let Zn=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;null==(e=this.accessed)||e.clear(),this.clear()}onAccessed(e){null!=this._observer&&e!==this._observer&&(null==this.accessed&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){null!=this._observer&&(this.clear(),null!=this.accessed&&(null==this._handles&&(this._handles=[]),this.accessed.forEach((e=>{this._handles.push(e.observe(this._observer))})),this.accessed.clear()))}clear(){if(null!=this._handles){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const Xn=new Zn,Qn=[];let es=Xn;function ts(e){es.onAccessed(e)}let rs=!1,ns=!1;function ss(e,t,r){if(rs)return is(e,t,r);let n=null;return os(e),n=t.call(r),as(),n}function is(e,t,r){const n=rs;rs=!0,os(e);let s=null;try{s=t.call(r)}catch(e){ns&&an.getLogger("esri.core.accessorSupport.tracking").error(e)}return as(),rs=n,s}function os(e){es=e,Qn.push(e)}function as(){const e=Qn.length;if(e>1){const t=Qn.pop();es=Qn[e-2],t.onTrackingEnd()}else if(1===e){const e=Qn.pop();es=Xn,e.onTrackingEnd()}else es=Xn}function ls(e,t){if(t.flags&Hn.DepTrackingInitialized)return;t.flags|=Hn.DepTrackingInitialized;const r=ns;ns=!1,t.flags&Hn.AutoTracked?is(t.trackingTarget,t.metadata.get,e):us(e,t),ns=r}const cs=[];function us(e,t){t.flags&Hn.ExplicitlyTracking||(t.flags|=Hn.ExplicitlyTracking,is(t.trackingTarget,(()=>{const r=t.metadata.dependsOn||cs;for(const t of r)if("string"!=typeof t||t.includes(".")){const r=Tn(t);for(let t=0,n=e;t<r.length&&null!=n&&"object"==typeof n;++t)n=ds(n,r[t],t!==r.length-1)}else ds(e,t,!1)})),t.flags&=~Hn.ExplicitlyTracking)}function ds(e,t,r){const n="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(n,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.at(t)}const s=In(e);if(s){const t=s.propertiesByName.get(n);t&&(ts(t),ls(e,t))}return r?e[n]:void 0}let hs=class extends Vn{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this.trackingTarget=new Zn(this),this.flags=0,this.flags=Hn.Dirty|(t.nonNullable?Hn.NonNullable:0)|(t.hasOwnProperty("value")?Hn.HasDefaultValue:0)|(void 0===t.get?Hn.DepTrackingInitialized:0)|(void 0===t.dependsOn?Hn.AutoTracked:0)}destroy(){this.flags&Hn.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&ts(this);const t=e.store,r=this.propertyName,n=this.flags,s=t.get(r);if(n&Hn.Computing||~n&Hn.Dirty&&t.has(r))return s;this.flags|=Hn.Computing;const i=e.host;let o;n&Hn.AutoTracked?o=ss(this.trackingTarget,this.metadata.get,i):(us(i,this),o=this.metadata.get.call(i)),this.flags|=Hn.DepTrackingInitialized,t.set(r,o,Gn.COMPUTED);const a=t.get(r);return a===s?this.flags&=~Hn.Dirty:function(e,t){ss(Xn,e,t)}(this.commit,this),this.flags&=~Hn.Computing,a}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~Hn.Dirty,this.onCommitted()}onInvalidated(){~this.flags&Hn.Overridden&&(this.flags|=Hn.Dirty);const e=this._observers;if(e&&e.length>0)for(const t of e)t.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onCommitted()}}},ps=class e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new e;return this._values.forEach(((e,n)=>{t&&t.has(n)||r.set(n,Jr(e))})),r}get(e){return this._values.get(e)}originOf(){return Gn.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function fs(e,t,r){return void 0!==e}function gs(e,t,r,n){return!(void 0===e||null==r&&e.flags&Hn.NonNullable&&(n.lifecycle,Ln.INITIALIZING,1))}let ms=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=Ln.INITIALIZING,this.store=new ps,this.mutable=!0,this._origin=Gn.USER;const t=this.host.constructor.__accessorMetadata__;for(const e in t){const r=new hs(e,t[e]);this.propertiesByName.set(e,r)}this.metadata=t}initialize(){this.lifecycle=Ln.CONSTRUCTING}constructed(){this.lifecycle=Ln.CONSTRUCTED}destroy(){this.lifecycle=Ln.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==Ln.INITIALIZING}get(e){const t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);this.mutable&&ts(t);const r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.propertiesByName.get(e);if(void 0!==t&&t.flags&Hn.HasDefaultValue)return"defaults"}return Kn(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const t=this.propertiesByName.get(e);if(fs(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const r=this.propertiesByName.get(e);fs(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){const n=this.propertiesByName.get(t);if(!fs(n))return"";const s=new Zn,i=ss(s,(()=>{var t;return null==(t=n.metadata.get)?void 0:t.call(e)}));let o=`${r}${e.declaredClass.split(".").pop()}.${t}: ${i}\n`;const a=s.accessed??new Set;if(0===a.size)return o;r+="  ";for(const e of a)e instanceof hs&&(o+=`${r}${e.propertyName}: undefined\n`);return o}setAtOrigin(e,t,r){const n=this.propertiesByName.get(e);if(fs(n))return this._setAtOrigin(n,t,r)}isOverridden(e){const t=this.propertiesByName.get(e);return void 0!==t&&!!(t.flags&Hn.Overridden)}clearOverride(e){const t=this.propertiesByName.get(e);t&&t.flags&Hn.Overridden&&(t.flags&=~Hn.Overridden,t.notifyChange())}override(e,t){const r=this.propertiesByName.get(e);if(!gs(r,0,t,this))return;const n=r.metadata.cast;if(n){const e=this._cast(n,t),{valid:r,value:s}=e;if(vs.release(e),!r)return;t=s}r.flags|=Hn.Overridden,this._internalSet(r,t)}set(e,t){const r=this.propertiesByName.get(e);if(!gs(r,0,t,this))return;const n=r.metadata.cast;if(n){const e=this._cast(n,t),{valid:r,value:s}=e;if(vs.release(e),!r)return;t=s}const s=r.metadata.set;s?s.call(this.host,t):this._internalSet(r,t)}setDefaultOrigin(e){this._origin=Jn(e)}getDefaultOrigin(){return Kn(this._origin)}notifyChange(e){const t=this.propertiesByName.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.propertiesByName.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.propertiesByName.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const r=this.lifecycle!==Ln.INITIALIZING?this._origin:Gn.DEFAULTS;this._setAtOrigin(e,t,r)}_setAtOrigin(e,t,r){const n=this.store,s=e.propertyName;n.has(s,r)&&Yr(t,n.get(s))&&~e.flags&Hn.Overridden&&r===n.originOf(s)||(e.invalidate(),n.set(s,t,r),e.commit(),ls(this.host,e))}_cast(e,t){const r=vs.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}};const vs=new qn(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});function ys(e,t,r){if(e&&t)if("object"==typeof t)for(const r of Object.getOwnPropertyNames(t))ys(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void ys(Dn(e,n),s,r)}const n=e.__accessor__;null!=n&&function(e,t){if(Mr("esri-unknown-property-errors")&&!function(e,t){return null!=t.metadata[e]}(e,t))throw new un("set:unknown-property",function(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}(e,t))}(t,n),e[t]=r}}var _s;function ws(e){e.length=0}!function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"}(_s||(_s={}));let bs=class{constructor(e=50,t=50){this._pool=new qn(Array,void 0,ws,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Ss.acquire()}static release(e){return Ss.release(e)}static prune(){Ss.prune()}};const Ss=new bs(100);const As=[];function Es(e){As.push(e),1===As.length&&queueMicrotask((()=>{const e=As.slice();As.length=0;for(const t of e)t()}))}let Is=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}push(e){null!=e&&(this._samples[++this._counter%this._samples.length]=e)}set(e){null!=e&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,t)=>e-t))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,t)=>e+t),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var ks;!function(e){const t=(e,t,r,n)=>{let s=t,i=t;const o=r>>>1,a=e[s-1];for(;i<=o;){i=s<<1,i<r&&n(e[i-1],e[i])<0&&++i;const t=e[i-1];if(n(t,a)<=0)break;e[s-1]=t,s=i}e[s-1]=a},r=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,n,s,i){void 0===n&&(n=0),void 0===s&&(s=e.length),void 0===i&&(i=r);for(let r=s>>>1;r>n;r--)t(e,r,s,i);const o=n+1;for(let r=s-1;r>n;r--){const s=e[n];e[n]=e[r],e[r]=s,t(e,o,r,i)}},e.iterableSort=function*(e,n,s,i){void 0===n&&(n=0),void 0===s&&(s=e.length),void 0===i&&(i=r);for(let r=s>>>1;r>n;r--)t(e,r,s,i),yield;const o=n+1;for(let r=s-1;r>n;r--){const s=e[n];e[n]=e[r],e[r]=s,t(e,o,r,i),yield}}}(ks||(ks={}));const Os=function(e){return{setTimeout:(t,r)=>{const n=e.setTimeout(t,r);return An((()=>e.clearTimeout(n)))}}}(globalThis);function Ts(e){return function(e){return null!=e&&"object"==typeof e&&"on"in e&&"function"==typeof e.on}(e)||Cs(e)}function Cs(e){return null!=e&&"object"==typeof e&&"addEventListener"in e&&"function"==typeof e.addEventListener}function xs(e,t,r){if(!Ts(e))throw new TypeError("target is not a Evented or EventTarget object");return Cs(e)?function(e,t,r,n){if(Array.isArray(t)){const s=t.slice();for(const t of s)e.addEventListener(t,r,n);return An((()=>{for(const t of s)e.removeEventListener(t,r,n)}))}return e.addEventListener(t,r,n),An((()=>e.removeEventListener(t,r,n)))}(e,t,r):e.on(t,r)}function Rs(e,t,r){if(!Ts(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const n=xs(e,t,(t=>{n.remove(),r.call(e,t)}));return n}function js(e="Aborted"){return new un("AbortError",e)}function Ps(e){return e instanceof AbortSignal?e:(null==e?void 0:e.signal)??void 0}function Ds(e){const t=Ps(e);return null!=t&&t.aborted}function Us(e){if(!$s(e))throw e}function Ls(e,t){const r=Ps(e);if(null!=r){if(!r.aborted)return Rs(r,"abort",(()=>t()));t()}}function Ns(e,t){const r=Ps(e);if(null!=r)return function(e,t="Aborted"){if(Ds(e))throw js(t)}(r),Rs(r,"abort",(()=>t(js())))}function $s(e){return"AbortError"===(null==e?void 0:e.name)}function Ms(e){return e&&"function"==typeof e.then}function Fs(e){return Ms(e)?e:Promise.resolve(e)}function Bs(e,t=-1){let r,n,s,i,o=null;const a=(...l)=>{if(r){n=l,i&&i.reject(js()),i=qs();const e=i.promise;if(o){const e=o;o=null,e.abort()}return e}if(s=i||qs(),i=null,t>0){const n=new AbortController;r=Fs(e(...l,n.signal));const s=r;(function(e,t,r){const n=new AbortController;return Ls(r,(()=>n.abort())),new Promise(((r,s)=>{let i=setTimeout((()=>{i=0,r(t)}),e);Ls(n,(()=>{i&&(clearTimeout(i),s(js()))}))}))})(t).then((()=>{r===s&&(i?n.abort():o=n)}))}else r=1,r=Fs(e(...l));const c=()=>{const e=n;n=s=r=o=null,null!=e&&a(...e)},u=r,d=s;return u.then(c,c),u.then(d.resolve,d.reject),d.promise};return a}function qs(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n})),n=t=>{e(t)};return n.resolve=t=>e(t),n.reject=e=>t(e),n.timeout=(e,t)=>Os.setTimeout((()=>n.reject(t)),e),n.promise=r,n}let zs=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}};const Vs=[],Ws={willDispatch:!1};function Gs(e){const t=new zs(e);return Vs.push(t),Ws.willDispatch||(Ws.willDispatch=!0,Es(Hs)),t}function Hs(){for(;Vs.length;){const e=Vs.shift();e.isActive&&e.callback()}Ws.willDispatch=!1}function Js(e){return function(e=1,t){const r=qs(),n=()=>{Ds(t)?r.reject(js()):0===e?r():(--e,Es((()=>n())))};return n(),r.promise}(1,e)}["prepare","preRender","render","postRender","update","finish"].map((e=>new Is(e))),new Is("total");let Ks=0;function Ys(){return++Ks}let Zs=class extends Zn{constructor(e){super(new Xs(e)),this._observer&&Qs.register(this,new WeakRef(this._observer),this)}destroy(){var e,t;this._observer&&Qs.unregister(this._observer),null==(e=this.accessed)||e.clear(),this.clear(),null==(t=this._observer)||t.destroy()}},Xs=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=ei}};const Qs=new FinalizationRegistry((e=>{var t;null==(t=e.deref())||t.destroy()}));function ei(){}let ti=!1;const ri=[];function ni(e,t){let r=new Zs((function i(){if(!r||s)return;if(ti)return void function(e){ri.includes(e)||ri.unshift(e)}(i);const o=n;r.clear(),ti=!0,s=!0,n=ss(r,e),s=!1,ti=!1,t(n,o),function(){for(;ri.length;)ri.pop()()}()})),n=null,s=!1;return s=!0,n=ss(r,e),s=!1,An((function(){r&&(r.destroy(),r=null,n=null)}))}function si(e,t){let r=new Zs((function(){t(n,s)})),n=null;function s(){return r?(r.clear(),n=ss(r,e),n):null}return s(),An((function(){r&&(r.destroy(),r=null),n=null}))}var ii;!function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"}(ii||(ii={}));let oi=class{constructor(){this.uid=Ys(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,r,n,s){return this.pool.acquire(ii.Untracked,e,t,r,n,s,Yr)}static acquireTracked(e,t,r,n){return this.pool.acquire(ii.Tracked,e,t,r,null,null,n)}notify(e,t){this.type===ii.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,r,n,s,i,o){this.uid=Ys(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=n,this.target=s,this.path=i,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Ys(),this.removed=!0}};oi.pool=new class extends qn{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}(oi);const ai=new bs,li=new Set;let ci;function ui(e){li.delete(e),li.add(e),ci||(ci=Gs(hi))}function di(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function hi(){let e=10;for(;ci&&e--;){ci=null;const e=pi(),t=ai.acquire();for(const r of e){const e=r.uid;di(r),e===r.uid&&r.removed&&t.push(r)}for(const e of li)e.removed&&(t.push(e),li.delete(e));for(const e of t)oi.pool.release(e);ai.release(t),ai.release(e),fi.forEach((e=>e()))}}function pi(){const e=ai.acquire();e.length=li.size;let t=0;for(const r of li)e[t]=r,++t;return li.clear(),e}const fi=new Set;function gi(e,t,r,n=!1){return e.__accessor__&&e.__accessor__.lifecycle!==Ln.DESTROYED?n?function(e,t,r){const n=xn(e,t,r,((e,t,r)=>{let s=!1;return ni((()=>Pn(e,t)),((i,o)=>{e.__accessor__.lifecycle!==Ln.DESTROYED?s||(s=!0,Yr(o,i)||r.call(e,i,o,t,e),s=!1):n.remove()}))}));return n}(e,t,r):function(e,t,r){let n=xn(e,t,r,((e,t,r)=>{let s,i,o=si((()=>Pn(e,t)),((o,a)=>{var l;(null==(l=e.__accessor__)?void 0:l.lifecycle)===Ln.DESTROYED||s&&s.uid!==i?n.remove():(s||(s=oi.acquireUntracked(o,r,a,e,t),i=s.uid),ui(s))}));return An((()=>{o.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,ui(s)),s=null),n=o=null}))}));return n}(e,t,r):An()}function mi(e,t,r=!1,n=Zr){return r?function(e,t,r){let n=!1;return ni(e,((e,s)=>{n||(n=!0,r(s,e)||t(e,s),n=!1)}))}(e,t,n):function(e,t,r){let n,s,i=si(e,((e,o)=>{n&&n.uid!==s?i.remove():(n||(n=oi.acquireTracked(e,t,o,r),s=n.uid),ui(n))}));return An((()=>{i.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,ui(n)),n=null),i=null}))}(e,t,n)}function vi(e,t,r){const n=e.get(t);if(void 0!==n)return n;const s=r();return e.set(t,s),s}const yi=()=>an.getLogger("esri.core.accessorSupport.ensureTypes");function _i(e){return null==e?e:new Date(e)}function wi(e){return null==e?e:!!e}function bi(e){return null==e?e:e.toString()}function Si(e){return null==e?e:Math.round(parseFloat(e))}function Ai(e){return null}function Ei(e){return(null==e?void 0:e.constructor)&&void 0!==e.constructor.__accessorMetadata__}function Ii(e,t){return null!=t&&e&&!(t instanceof e)}function ki(e){return e&&"isCollection"in e}function Oi(e){return null!=e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function Ti(e,t){return!!Ei(t)&&(yi().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+xi(e)+"'"),!0)}function Ci(e,t){return null==t?t:ki(e)?function(e,t){if(null==t||!t.constructor||!ki(t.constructor))return Ti(e,t)?t:new e(t);const r=Oi(e.prototype.itemType),n=Oi(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(Ti(e,t),t):new e(t):t}(e,t):Ii(e,t)?Ti(e,t)?t:new e(t):t}function xi(e){var t;return(null==(t=null==e?void 0:e.prototype)?void 0:t.declaredClass)||"unknown"}const Ri=new WeakMap;function ji(e){switch(e){case Number:return e=>function(e,t=0){return null==e?e:(e=parseFloat(e),isNaN(e)?t:e)}(e);case Fi:return Si;case Boolean:return wi;case String:return bi;case Date:return _i;case Bi:return Ai;default:return vi(Ri,e,(()=>Ci.bind(null,e)))}}function Pi(e,t){const r=ji(e);return 1===arguments.length?r:r(t)}function Di(e,t,r){return 1===arguments.length?Di.bind(null,e):t&&(Array.isArray(t)?t.map((t=>e(t,r))):[e(t,r)])}function Ui(e,t,r){return 0!==t&&Array.isArray(r)?r.map((r=>Ui(e,t-1,r))):e(r)}function Li(e,t,r){if(2===arguments.length)return r=>Li(e,t,r);if(!r)return r;r=Ui(e,t,r);let n=t,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(void 0!==s)for(let e=0;e<n;e++)r=[r];return r}function Ni(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!("string"===r||"number"===r||"function"===r&&e.length>1)}))}function $i(e,t){if(2===arguments.length)return $i(e).call(null,t);const r=new Set,n=e.filter((e=>"function"!=typeof e)),s=e.filter((e=>"function"==typeof e));for(const t of e)"string"!=typeof t&&"number"!=typeof t||r.add(t);let i=null,o=null;return(e,t)=>{if(null==e)return e;const a=typeof e,l="string"===a||"number"===a;return l&&(r.has(e)||s.some((e=>"string"===a&&e===String||"number"===a&&e===Number)))||"object"===a&&s.some((t=>!Ii(e,t)))?e:(l&&n.length?(i||(i=n.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),yi().error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${i}`)):"object"==typeof e&&s.length?(o||(o=s.map((e=>xi(e))).join(", ")),yi().error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${o}`)):yi().error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function Mi(e,t){if(2===arguments.length)return Mi(e).call(null,t);const r={},n=[],s=[];for(const t in e.typeMap){const i=e.typeMap[t];r[t]=Pi(i),n.push(xi(i)),s.push(t)}const i="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!Ii(e.base,t)||null==t)return t;const o=i(t)||e.defaultKeyValue,a=r[o];if(!a)return yi().error("Accessor#set",`Invalid property value, value needs to be one of '${n.join("', '")}', or a plain object that can autocast (having .type = '${s.join("', '")}')`),null;if(!Ii(e.typeMap[o],t))return t;if("string"==typeof e.key&&!Ei(t)){const r={};for(const n in t)n!==e.key&&(r[n]=t[n]);return a(r)}return a(t)}}let Fi=class{},Bi=class{};function qi(e){switch(e.type){case"native":return Pi(e.value);case"array":return Di(qi(e.value));case"one-of":return function(e){let t=null;return(r,n)=>Vi(r,e)?r:(null==t&&(t=zi(e)),yi().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}(e);default:return null}}function zi(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Fi:return"integer";case Date:return"date";case Bi:return"null";default:return xi(e.value)}case"array":return`array of ${zi(e.value)}`;case"one-of":{const t=e.values.map((e=>zi(e)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function Vi(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case Fi:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e;case Bi:return null===e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!Vi(e,t.value)));case"one-of":return t.values.some((t=>Vi(e,t)))}}function Wi(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(t,r),s=Mn(t,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in e&&an.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=n.value)),null!=e.readOnly&&(s.readOnly=e.readOnly);const i=e.aliasOf;if(i){const e="string"==typeof i?i:i.source,t="string"==typeof i?null:!0===i.overridable;let n;s.dependsOn=[e],s.get=function(){let t=Dn(this,e);if("function"==typeof t){n||(n=e.split(".").slice(0,-1).join("."));const r=Dn(this,n);r&&(t=t.bind(r))}return t},s.readOnly||(s.set=t?function(e){this._override(r,e)}:function(t){ys(this,e,t)})}const o=e.type,a=e.types;if(!s.cast){let t;o?t=function(e){let t=0,r=e;if(function(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}(e))return qi(e);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],t++;const n=r;if(Ni(n))return 0===t?$i(n):Li($i(n),t);if(1===t)return function(e,t){return 1===arguments.length?Di((t=>Pi(e,t))):Di((t=>Pi(e,t)),t)}(n);if(t>1)return function(e,t,r){return 2===arguments.length?Li((t=>Pi(e,t)),t):Li((t=>Pi(e,t)),t,r)}(n,t);const s=e;return s.from?s.from:Pi(s)}(o):a&&(t=Array.isArray(a)?Di(Mi(a[0])):Mi(a)),e.cast=function(e,t){if(e||t)return e?t?(r,n)=>t(e(r,n),n):e:t}(e.cast,t)}(function(e,t){kn(e,t,Bn)})(s,e),e.range&&(s.cast=function(e,t){return r=>{let n=e(r);return null!=t.step&&(n=Math.round(n/t.step)*t.step),null!=t.min&&(n=Math.max(t.min,n)),null!=t.max&&(n=Math.min(t.max,n)),n}}(s.cast,e.range))}}let Gi=class extends cn{constructor(e,t,r){super(e,t,r)}};function Hi(e){var t;return!!e&&(null==(t=e.prototype)?void 0:t.declaredClass)&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}Gi.prototype.type="warning";const Ji=()=>an.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Ki(e,t,r){var n,s;e&&(!r&&!t.read||null!=(n=t.read)&&n.reader||!1===(null==(s=t.read)?void 0:s.enabled)||function(e){return"types"in e?to(e.types):eo(e.type)}(e)&&Qr("read.reader",function(e){var t,r;const n=e.ndimArray??0;if(n>1)return function(e){const t=Yi(e),r=Zi.bind(null,t),n=e.ndimArray??0;return(e,t,s)=>{if(null==e)return e;e=r(e,s,n);let i=n,o=e;for(;i>0&&Array.isArray(o);)i--,o=o[0];if(void 0!==o)for(let t=0;t<i;t++)e=[e];return e}}(e);if(1===n)return Xi(e);if("type"in e&&Qi(e.type)){const n=null==(r=null==(t=e.type.prototype)?void 0:t.itemType)?void 0:r.Type,s=Xi("function"==typeof n?{type:n}:{types:n});return(t,r,n)=>{const i=s(t,r,n);return i&&new e.type(i)}}return Yi(e)}(e),t))}function Yi(e){return"type"in e?function(e){return e.prototype.read?(t,r,n)=>{if(null==t)return t;const s=typeof t;if("object"!==s)return void Ji().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const i=new e;return i.read(t,n),i}:e.fromJSON}(e.type):function(e){let t=null;const r=e.errorContext??"type",n=e.validate;return(s,i,o)=>{if(null==s)return s;const a=typeof s;if("object"!==a)return void Ji().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=function(e){var t,r;const n={};for(const s in e.typeMap){const i=e.typeMap[s],o=$n(i.prototype);if("function"==typeof e.key)continue;const a=o[e.key];if(!a)continue;if(null!=(t=a.json)&&t.type&&Array.isArray(a.json.type)&&1===a.json.type.length&&"string"==typeof a.json.type[0]){n[a.json.type[0]]=i;continue}const l=null==(r=a.json)?void 0:r.write;if(null==l||!l.writer){n[s]=i;continue}const c=l.target,u="string"==typeof c?c:e.key,d={};l.writer(s,d,u),d[u]&&(n[d[u]]=i)}return n}(e));const l=e.key;if("string"!=typeof l)return;const c=s[l],u=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){const e=`Type '${c||"unknown"}' is not supported`;return null!=o&&o.messages&&s&&o.messages.push(new Gi(`${r}:unsupported`,e,{definition:s,context:o})),void Ji().error(e)}const d=new u;return d.read(s,o),n?n(d):d}}(e.types)}function Zi(e,t,r,n){return 0!==n&&Array.isArray(t)?t.map((t=>Zi(e,t,r,n-1))):e(t,void 0,r)}function Xi(e){const t=Yi(e);return(e,r,n)=>{if(null==e)return e;if(Array.isArray(e)){const r=[];for(const s of e){const e=t(s,void 0,n);void 0!==e&&r.push(e)}return r}const s=t(e,void 0,n);return void 0!==s?[s]:void 0}}function Qi(e){if(!Hi(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?eo(t.Type):to(t.Type))}function eo(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||Qi(e))}function to(e){for(const t in e.typeMap)if(!eo(e.typeMap[t]))return!1;return!0}function ro(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function no(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function so(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}function io(e,t){if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const r=(null==e?void 0:e.ndimArray)??0;e&&(1===r||"type"in e&&Hi(e.type))?t.write.writer=co:r>1?t.write.writer=function(e){return(t,r,n,s)=>{let i;if(null===t)i=null;else{i=uo(t,s,e);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(void 0!==n)for(let e=0;e<r;e++)i=[i]}Qr(n,i,r)}}(r):t.types?Array.isArray(t.types)?t.write.writer=function(e){return(t,r,n,s)=>t&&Array.isArray(t)?ao(t.filter((t=>oo(t,e,s))),r,n,s):ao(t,r,n,s)}(t.types[0]):t.write.writer=function(e){return(t,r,n,s)=>t?oo(t,e,s)?ao(t,r,n,s):void 0:ao(t,r,n,s)}(t.types):t.write.writer=ao}function oo(e,t,r){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(null!=r&&r.messages){const n=t.errorContext??"type",s=`Values of type '${("function"!=typeof t.key?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new un(`${n}:unsupported`,s,{definition:e,context:r})),an.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function ao(e,t,r,n){Qr(r,lo(e,n),t)}function lo(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?function(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}(e):e}function co(e,t,r,n){let s;null===e?s=null:e&&"function"==typeof e.map?(s=e.map((e=>lo(e,n))),"function"==typeof s.toArray&&(s=s.toArray())):s=[lo(e,n)],Qr(r,s,t)}function uo(e,t,r){return 0!==r&&Array.isArray(e)?e.map((e=>uo(e,t,r-1))):lo(e,t)}function ho(e,t){return fo(e,"read",null==t?void 0:t.origin)}function po(e,t){return fo(e,"write",null==t?void 0:t.origin)}function fo(e,t,r){let n=null==e?void 0:e.json;if(null!=n&&n.origins&&r){let e;e="link-chart"===r?n.origins[r]&&("any"===t||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],e&&("any"===t||t in e)&&(n=e)}return n}function go(e){var t;const r=function(e){return e.json.types?yo(e.json):e.type?vo(e):yo(e)}(e);if(e.json.origins)for(const n in e.json.origins){const s=e.json.origins[n],i=s.types?mo(s):r;Ki(i,s,!1),s.types&&!s.write&&null!=(t=e.json.write)&&t.enabled&&(s.write={...e.json.write}),io(i,s)}Ki(r,e.json,!0),io(r,e.json)}function mo(e){return e.type?vo(e):yo(e)}function vo(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!Ni(r);)r=r[0],t++;return{type:r,ndimArray:t}}function yo(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function _o(e){(function(e){if(e.json||(e.json={}),no(e.json),so(e.json),ro(e.json),e.json.origins)for(const t in e.json.origins)no(e.json.origins[t]),so(e.json.origins[t]),ro(e.json.origins[t]);return!0})(e)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const e in r)if(t[e]){const n=t[e];r[e].forEach((e=>{t[e]=n})),delete t[e]}}}(e),go(e))}const wo=new Set,bo=new Set;function So(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,function(e){const t=e.prototype,r=$n(t),n={};for(const e of Object.getOwnPropertyNames(r)){const t=r[e];_o(t),n[e]={enumerable:!0,configurable:!0,get:Ao(e,t),set(r){const n=this.__accessor__;if(void 0!==n){if(n.mutable)return n.initialized&&t.readOnly?Eo("read-only",e):n.lifecycle===Ln.CONSTRUCTED&&t.constructOnly?Eo("construct-only",e):void n.set(e,r)}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}}Object.defineProperties(e.prototype,n)}(t);const r=[],n=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!wo.has(s.initialize)&&(wo.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!bo.has(s.destroy)&&(bo.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);wo.clear(),bo.clear();const i=class extends t{constructor(...e){if(super(...e),this.constructor===i&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=r.length-1;e>=0;e--)r[e].call(this)}}),n.length){let e=!1;const t=this[bn];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0,t.call(this);for(let e=0;e<n.length;e++)n[e].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};i.__accessorMetadata__=$n(t.prototype),i.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(i,"name",{value:o,configurable:!0}),i}}function Ao(e,t){return null==t.get?function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0===r)return;t.mutable&&ts(r);const n=t.store;return n.has(e)?n.get(e):r.metadata.value}:function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0!==r)return r.getComputed(t)}}const Eo=(e,t)=>{an.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var Io,ko;function Oo(e){var t;if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return null!=(t=e.constructor)&&t.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const To=Symbol("Accessor-Handles"),Co=Symbol("Accessor-Initialized");let xo=class e{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class i extends s{constructor(...e){super(...e),this.inherited=null,n&&n.apply(this,e)}}$n(i.prototype);for(const t in e){const r=e[t];i.prototype[t]="function"==typeof r?function(...e){const n=this.inherited;let i;this.inherited=function(...e){if(s.prototype[t])return s.prototype[t].apply(this,e)};try{i=r.apply(this,e)}catch(e){throw this.inherited=n,e}return this.inherited=n,i}:e[t]}for(const e in t){Wi(Oo(t[e]))(i.prototype,e)}return So(r)(i)}static freeze(t){return t instanceof e?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof e?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[Io]=null,this[ko]=!1,this.constructor===e)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new ms(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),t.length>0&&(n.ctorArgs=(null==(r=this.normalizeCtorArgs)?void 0:r.apply(this,t))??t[0])}postscript(){const e=this.__accessor__,t=e.ctorArgs;e.initialize(),t&&(this.set(t),e.ctorArgs=null),e.constructed(),this.initialize(),this[Co]=!0}initialize(){}[bn](){this[To]=_n(this[To])}destroy(){var e;this.destroyed||(function(e){for(const t of li.values())t.target===e&&(t.removed=!0)}(this),this.__accessor__.destroy(),null==(e=void 0)||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Co]}get destroyed(){var e;return(null==(e=this.__accessor__)?void 0:e.lifecycle)===Ln.DESTROYED||!1}commitProperty(e){Dn(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return ys(this,e,t),this}watch(e,t,r){return pn(an.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),gi(this,e,t,r)}addHandles(e,t){if(this.destroyed){const t=Array.isArray(e)?e:[e];for(const e of t)e.remove()}else(this[To]??(this[To]=new gn)).add(e,t)}removeHandles(e){var t;null==(t=this[To])||t.remove(e)}removeAllHandles(){var e;null==(e=this[To])||e.removeAll()}removeHandlesReference(e){var t;null==(t=this[To])||t.removeReference(e)}hasHandles(e){var t;return!0===(null==(t=this[To])?void 0:t.has(e))}_override(e,t){void 0===t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){null==t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}};Io=To,ko=Co;let Ro=class e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new e;return this._values.forEach(((e,n)=>{t&&t.has(n)||r.set(n,Jr(e.value),e.origin)})),r}get(e,t){t=this._normalizeOrigin(t);const r=this._values.get(e);return null==t||(null==r?void 0:r.origin)===t?null==r?void 0:r.value:void 0}originOf(e){var t;return(null==(t=this._values.get(e))?void 0:t.origin)??Gn.USER}keys(e){e=this._normalizeOrigin(e);const t=[...this._values.keys()];return null==e?t:t.filter((t=>{var r;return(null==(r=this._values.get(t))?void 0:r.origin)===e}))}set(e,t,r){if((r=this._normalizeOrigin(r))===Gn.DEFAULTS){const t=this._values.get(e);if(null!=(null==t?void 0:t.origin)&&t.origin>r)return}this._values.set(e,new jo(t,r))}delete(e,t){var r;null!=(t=this._normalizeOrigin(t))&&(null==(r=this._values.get(e))?void 0:r.origin)!==t||this._values.delete(e)}has(e,t){var r;return null!=(t=this._normalizeOrigin(t))?(null==(r=this._values.get(e))?void 0:r.origin)===t:this._values.has(e)}forEach(e){this._values.forEach((({value:t},r)=>e(t,r)))}_normalizeOrigin(e){if(null!=e)return e===Gn.DEFAULTS?e:Gn.USER}},jo=class{constructor(e,t){this.value=e,this.origin=t}};function Po(e,t,r){if(null==e||!e.read||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if("string"==typeof n){if(n===t||n.includes(".")&&0===n.indexOf(t)&&Un(n,r))return!0}else for(const e of n)if(e===t||e.includes(".")&&0===e.indexOf(t)&&Un(e,r))return!0;return!1}function Do(e,t,r,n,s){let i=ho(t[r],s);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(i)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))i=ho(t[o],s),Po(i,r,n)&&(e[o]=!0)}function Uo(e,t,r,n){const s=function(e,t){return fo(e,"any",null==t?void 0:t.origin)}(r.metadata[t],n),i=null==s?void 0:s.default;if(void 0===i)return;const o="function"==typeof i?i.call(e,t,n):i;void 0!==o&&r.set(t,o)}const Lo={origin:"service"};function No(e,t,r,n,s){var i,o;const a={};return null==(o=null==(i=t.write)?void 0:i.writer)||o.call(e,n,a,r,s),a}function $o(e,t,r,n,s,i){if(null==n||!n.write)return!1;const o=Dn(e,r);if(!s&&n.write.overridePolicy){const t=n.write.overridePolicy.call(e,o,r,i??void 0);void 0!==t&&(s=t)}if(s||(s=n.write),!s||!1===s.enabled||s.layerContainerTypes&&null!=i&&i.layerContainerType&&!s.layerContainerTypes.includes(i.layerContainerType))return!1;if((null===o&&!s.allowNull&&!s.writerEnsuresNonNull||void 0===o)&&s.isRequired){const t=new un("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return t&&null!=i&&i.messages?i.messages.push(t):t&&!i&&an.getLogger("esri.core.accessorSupport.write").error(t.name,t.message),!1}return!(void 0===o||null===o&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===Gn.DEFAULTS)&&function(e,t,r,n,s){const i=n.default;if(void 0===i)return!1;if(null!=n.defaultEquals)return n.defaultEquals(s);if("function"==typeof i){if(Array.isArray(s)){return Wr(i.call(e,t,r??void 0),s)}return!1}return i===s}(e,r,i,n,o)||!s.ignoreOrigin&&null!=i&&i.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Jn(i.origin))}const Mo=e=>{let t=class extends e{constructor(...e){super(...e);const t=In(this),r=t.store,n=new Ro;t.store=n,function(e,t,r){t.keys().forEach((e=>{r.set(e,t.get(e),Gn.DEFAULTS)}));const n=e.metadata;Object.keys(n).forEach((t=>{e.internalGet(t)&&r.set(t,e.internalGet(t),Gn.DEFAULTS)}))}(t,r,n)}read(e,t){!function(e,t,r=Lo){if(!t||"object"!=typeof t)return;const n=In(e),s=n.metadata,i={};for(const e of Object.getOwnPropertyNames(t))Do(i,s,e,t,r);n.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(i)){const i=ho(s[o],r).read,a=null==i?void 0:i.source;let l;l=a&&"string"==typeof a?Pn(t,a):t[o],null!=i&&i.reader&&(l=i.reader.call(e,l,t,r)),void 0!==l&&n.set(o,l)}if(!r||!r.ignoreDefaults){n.setDefaultOrigin("defaults");for(const t of Object.getOwnPropertyNames(s))i[t]||Uo(e,t,n,r)}n.setDefaultOrigin("user")}(this,e,t)}write(e,t){return function(e,t,r){var n,s;if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return kn(t,e.toJSON(r));const i=In(e),o=i.metadata;for(const a in o){const l=po(o[a],r);if(!$o(e,i,a,l,void 0,r))continue;const c=Dn(e,a),u=No(e,l,l.write&&"string"==typeof l.write.target?l.write.target:a,c,r);Object.keys(u).length>0&&(t=kn(t,u),null!=(s=null==(n=null==r?void 0:r.resources)?void 0:n.pendingOperations)&&s.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then((()=>kn(t,u,(()=>"replace-arrays"))))),null!=r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:Yn(i.store.originOf(a)),newOrigin:r.origin}))}return t}(this,e??{},t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return Fo.call(this,e,t)}};return t=dn([So("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Fo(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let Bo=class extends(Mo(xo)){};Bo=dn([So("esri.core.JSONSupport")],Bo),function(e){e.JSONSupportMixin=Mo,e.isSerializable=function(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}}(Bo||(Bo={}));const qo=Bo;function zo(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Vo(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):n.test(e)&&(e=e.replace(n,"https://qaext.arcgis.com")),e}const Wo=rn.request,Go="esri/config: esriConfig.request.proxyUrl is not set.",Ho=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Jo=/^\s*http:/i,Ko=/^\s*https:/i,Yo=/^\s*file:/i,Zo=/:\d+$/,Xo=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,Qo=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ea=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let ta=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(Qo);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=this.authority.match(ea),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}};const ra={};let na=new ta(rn.applicationUrl);const sa=function(){const e=na.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${na.scheme}://${na.host}${null!=na.port?`:${na.port}`:""}${t}`}();let ia=sa;const oa=()=>na;function aa(e){if(!e)return null;const t={path:null,query:null},r=new ta(e),n=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.slice(0,n),t.query=la(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function la(e){const t=e.split("&"),r={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let n,s;t<0?(n=decodeURIComponent(e),s=""):(n=decodeURIComponent(e.slice(0,t)),s=decodeURIComponent(e.slice(t+1)));let i=r[n];"string"==typeof i&&(i=r[n]=[i]),Array.isArray(i)?i.push(s):r[n]=s}return r}function ca(e,t){return e?Object.keys(e).map((t=>{const r=e[t];if(null==r)return"";const n=encodeURIComponent(t)+"=";return Array.isArray(r)?r.map((e=>qo.isSerializable(e)?n+encodeURIComponent(JSON.stringify(e)):n+encodeURIComponent(e))).join("&"):qo.isSerializable(r)?n+encodeURIComponent(JSON.stringify(r)):n+encodeURIComponent(r)})).filter((e=>e)).join("&"):""}function ua(e=!1){let t,r=Wo.proxyUrl;if("string"==typeof e){t=function(e){return null!=e&&Ko.test(e)||"https"===na.scheme&&Ta(e)}(e);const n=fa(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw an.getLogger("esri.core.urlUtils").warn(Go),new un("urlUtils:proxy-not-set",Go);return t&&Ra()&&(r=xa(r)),aa(r)}const da={path:"",query:""};function ha(e){const t=e.indexOf("?");return-1!==t?(da.path=e.slice(0,t),da.query=e.slice(t+1)):(da.path=e,da.query=null),da}function pa(e){return(e=ja(e=function(e){return e.endsWith("/")?e:`${e}/`}(e=ha(e).path),!0)).toLowerCase()}function fa(e){const t=Wo.proxyRules,r=pa(e);for(let e=0;e<t.length;e++)if(0===r.indexOf(t[e].urlPrefix))return t[e]}function ga(e,t=Wo.interceptors){const r=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t);if(t)for(const e of t)if(Array.isArray(e.urls)){if(e.urls.some(r))return e}else if(r(e.urls))return e;return null}function ma(e,t,r=!1){if(!e||!t)return!1;const n=Da(e),s=Da(t);return!(!r&&n.scheme!==s.scheme)&&null!=n.host&&null!=s.host&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function va(e){if("string"==typeof e){if(!Ea(e))return!0;e=Da(e)}if(ma(e,na))return!0;const t=Wo.trustedServers||[];for(let r=0;r<t.length;r++){const n=ya(t[r]);for(let t=0;t<n.length;t++)if(ma(e,n[t]))return!0}return!1}function ya(e){return ra[e]||(Ca(e)||Ta(e)?ra[e]=[new ta(_a(e))]:ra[e]=[new ta(`http://${e}`),new ta(`https://${e}`)]),ra[e]}function _a(e,t=ia,r){return Ta(e)?null!=r&&r.preserveProtocolRelative?e:"http"===na.scheme&&na.authority===Aa(e).slice(2)?`http:${e}`:`https:${e}`:Ca(e)?e:Sa("/"===e[0]?function(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return-1===r?e:e.slice(0,r)}(t):t,e)}function wa(e,t=ia,r){if(null==e||!Ea(e))return e;const n=ba(e),s=n.toLowerCase(),i=ba(t).toLowerCase().replace(/\/+$/,""),o=r?ba(r).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==i.indexOf(o))return e;const a=(e,t,r)=>-1===(r=e.indexOf(t,r))?e.length:r;let l=a(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==s.length);)l=a(s,"/",l+1);if(-1===c||o&&c<o.length)return e;e=n.slice(c);const u=i.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let t=0;t<u;t++)e=`../${e}`;else e=`./${e}`;return e}function ba(e){return function(e){const t=Wo.httpsDomains;if(!function(e){return null!=e&&Jo.test(e)||"http"===na.scheme&&Ta(e)}(e))return e;const r=e.indexOf("/",7);let n;if(n=-1===r?e:e.slice(0,r),n=n.toLowerCase().slice(7),Zo.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return"http"===na.scheme&&n===na.authority&&!Xo.test(e)||(Ra()&&n===na.authority||t&&t.some((e=>n===e||n.endsWith(`.${e}`)))||Ra()&&!fa(e))&&(e=xa(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=ha(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=_a(e=e.trim()))))}function Sa(...e){const t=e.filter(Gr);if(null==t||!t.length)return;const r=[];if(Ea(t[0])){const e=t[0],n=e.indexOf("//");-1!==n&&(r.push(e.slice(0,n+1)),function(e){return null!=e&&Yo.test(e)}(t[0])&&(r[0]+="/"),t[0]=e.slice(n+2))}else"/"===t[0][0]&&r.push("");const n=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]);for(let e=0;e<n.length;e++){const t=n[e];".."===t&&r.length>0&&".."!==r[r.length-1]?r.pop():(!t&&e===n.length-1||t&&("."!==t||0===r.length))&&r.push(t)}return r.join("/")}function Aa(e,t=!1){if(null==e||Ia(e)||ka(e))return null;let r=e.indexOf("://");if(-1===r&&Ta(e))r=2;else{if(-1===r)return null;r+=3}const n=e.indexOf("/",r);return-1!==n&&(e=e.slice(0,n)),t&&(e=ja(e,!0)),e}function Ea(e){return Ta(e)||Ca(e)}function Ia(e){return null!=e&&"blob:"===e.slice(0,5)}function ka(e){return null!=e&&"data:"===e.slice(0,5)}function Oa(e){return function(e){const t=new Uint8Array(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}function Ta(e){return null!=e&&"/"===e[0]&&"/"===e[1]}function Ca(e){return null!=e&&Ho.test(e)}function xa(e){return Ta(e)?`https:${e}`:e.replace(Jo,"https:")}function Ra(){return"https"===na.scheme}function ja(e,t=!1){return Ta(e)?e.slice(2):(e=e.replace(Ho,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function Pa(e,t,r){if(!(t&&r&&e&&Ea(e)))return e;const n=e.indexOf("//"),s=e.indexOf("/",n+2),i=e.indexOf(":",n+2),o=Math.min(s<0?e.length:s,i<0?e.length:i);return e.slice(n+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(o)}`}function Da(e){return"string"==typeof e?new ta(_a(e)):(e.scheme||(e.scheme=na.scheme),e)}function Ua(e,t){if(!t)return e;const r=aa(e),n=r.query||{};for(const[e,r]of Object.entries(t))null!=r&&(n[e]=r);const s=ca(n);return s?`${r.path}?${s}`:r.path}function La(e){if(null==e)return null;const t=e.match(Na);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}const Na=/([^.]*)\.([^/]*)$/;let $a;function Ma(e,t){var r;const n=null==(r=null==t?void 0:t.url)?void 0:r.path;if(e&&n&&(e=_a(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=wa(e,t.portalItem.itemUrl);null!=r&&qa.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return(e=Va(e,null==t?void 0:t.portal))&&Ba.test(e)?Wa(e):e}function Fa(e,t,r=Ha.YES){var n,s;if(null==(e=e&&Ba.test(e)?Ga(e):e))return e;!Ea(e)&&null!=t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=_a(e);if(t){const r=(null==(n=t.verifyItemRelativeUrls)?void 0:n.rootPath)||(null==(s=t.url)?void 0:s.path);if(r){const n=Va(r,t.portal),s=Va(i,t.portal);i=wa(s,n,n),null!=i&&i!==s&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=za(i,null==t?void 0:t.portal),Ea(i)&&(i=ba(i)),null!=t&&t.resources&&null!=t&&t.portalItem&&!Ea(i)&&!ka(i)&&r===Ha.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose")),Mr("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),Mr("host-webworker");const Ba=/\/items\/([^/]+)\/resources\/(.*)/,qa=/^\.\/resources\//;function za(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Pa(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function Va(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,n=oa();return ma(n,`${n.scheme}://${r}`)?Pa(e,t.portalHostname,r):Pa(e,r,t.portalHostname)}function Wa(e){if(!e)return e||null;let t=e;return t&&$a&&!$a.findCredential(t)&&(t=Vo(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function Ga(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&$a&&!$a.findCredential(t)&&(t=Vo(t)),t}var Ha;!function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"}(Ha||(Ha={})),Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return Ha},ensureMainOnlineDomain:za,fromCDNUrl:Ga,fromJSON:Ma,itemIdFromResourceUrl:function(e){const t=(null==e?void 0:e.match(Ba))??null;return(null==t?void 0:t[1])??null},prefixAndFilenameFromResourceUrl:function(e){const t=(null==e?void 0:e.match(Ba))??null;if(null==t)return null;const r=t[2],n=r.lastIndexOf("/");if(-1===n){const{path:e,extension:t}=La(r);return{prefix:null,filename:e,extension:t}}const{path:s,extension:i}=La(r.slice(n+1));return{prefix:r.slice(0,n),filename:s,extension:i}},read:function(e,t,r){return Ma(e,r)},toCDNUrl:Wa,toJSON:Fa,write:function(e,t,r,n){const s=Fa(e,n);void 0!==s&&(t[r]=s)}},Symbol.toStringTag,{value:"Module"}));const Ja=Object.values({mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"});function Ka(e){let t=Aa(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Ja.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Ja.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");const Ya=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Za(e,t){return!(!rn.apiKey||!function(e){const t=Aa(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Ya.has(t)&&!e.endsWith("/sharing/rest/generateToken")}(e))}function Xa(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function Qa(e,t){var n;e instanceof URL&&(e=e.toString()),(null==t?void 0:t.query)instanceof URLSearchParams&&(t.query=la(t.query.toString().replaceAll("+"," ")));const s=ka(e),i=Ia(e);i||s||(e=ba(e));const o={url:e,requestOptions:{...t}},a=e=>({data:e,getAllHeaders:ol,getHeader:ol,httpStatus:200,requestOptions:o.requestOptions,url:o.url}),l=ga(e,tl.internalInterceptors);if(l){const e=await pl(l,o);if(null!=e)return a(e)}let c=ga(e);if(c){const e=await pl(c,o);if(null!=e)return a(e);c.after||c.error||(c=null)}if(e=o.url,"image"===(t=o.requestOptions).responseType&&(Mr("host-webworker")||Mr("host-node")))throw cl("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),o);if("head"===t.method){if(t.body)throw cl("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),o);if(s||i)throw cl("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),o)}if(await async function(){Mr("host-webworker")&&!el&&(el=await r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_request-DjMIBMX7-BWgirqq__js").then(r.bind(r,74691)))}(),el)return el.execute(e,t);const u=new AbortController,d=Ls(t,(()=>u.abort())),h={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:c,params:o,redoRequest:!1,useIdentity:tl.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=t.useRequestQueue?async function(e){const t=function(e){let t,r;return"string"==typeof e?(t=Aa(e,!0),r=Ka(e)):(t=e.origin,r=Ka(e.toString())),null==t?null:{origin:t,isHosted:r}}(e.params.url);if(!t)return ml(e);const{QueueProcessor:n}=await r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_QueueProcessor-B9xkVLf8-66eabb").then(r.bind(r,92447));return vi(gl,t.origin,(()=>{const e=t.isHosted?Mr("request-queue-concurrency-hosted"):Mr("request-queue-concurrency-non-hosted");return new n({concurrency:e,process:e=>{if(Ds(e.params.requestOptions))throw cl("",js("Request canceled"),e.params);return ml(e)}})})).push(e)}(h):ml(h),f=await p.finally((()=>null==d?void 0:d.remove()));return null==(n=null==c?void 0:c.after)||n.call(c,f),f}let el;const tl=rn.request,rl="FormData"in globalThis,nl=new Set([499,498,403,401]),sl=new Set(["COM_0056","COM_0057","SB_0008"]),il=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],ol=()=>null,al=Symbol();function ll(e){const t=Aa(e);return!t||t.endsWith(".arcgis.com")||Qa._corsServers.includes(t)||va(t)}function cl(e,t,r,n){let s="Error";const i={url:r.url,requestOptions:r.requestOptions,getAllHeaders:ol,getHeader:ol,ssl:!1};if(t instanceof un)return t.details?(t.details=Jr(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=i,t;if(t){const e=n&&(()=>Array.from(n.headers)),r=n&&(e=>n.headers.get(e)),o=null==n?void 0:n.status,a=t.message;a&&(s=a),e&&r&&(i.getAllHeaders=e,i.getHeader=r),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||o||0,i.subCode=t.subcode,i.messageCode=t.messageCode,"string"==typeof t.details?i.messages=[t.details]:i.messages=t.details,i.raw=al in t?t[al]:t}return $s(t)?js():new un(e,s,i)}async function ul(){$a||await Promise.resolve().then((()=>Cg))}function dl(e){return il.some((t=>t.test(e)))}async function hl(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions??{},s=Ia(t)||ka(t),i=r.responseType||"json",o=s?0:null!=r.timeout?r.timeout:tl.timeout;let a=!1;if(!s){e.useSSL&&(t=xa(t));let s={...r.query};e.credentialToken&&(s.token=e.credentialToken);let i=ca(s);Mr("esri-url-encodes-apostrophe")&&(i=i.replaceAll("'","%27"));const o=t.length+1+i.length;let l;a="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||o>tl.maxUrlLength;const c=r.useProxy||!!fa(t);if(c){const e=ua(t);l=e.path,!a&&l.length+1+o>tl.maxUrlLength&&(a=!0),e.query&&(s={...e.query,...s})}if("HEAD"===n.method&&(a||c)){if(a)throw o>tl.maxUrlLength?cl("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):cl("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(c)throw cl("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(n.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=Ua(t,s):(n.body=ca(s),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Ua(t,s),c&&(e.useProxy=!0,t=`${l}?${t}`),s.token&&rl&&n.body instanceof FormData&&!zo(t)&&n.body.set("token",s.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!ma(t,oa()))if(va(t))e.withCredentials=!0;else if($a){const r=$a.findServerInfo(t);null!=r&&r.webTierAuth&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include",function(e){const t=rn.request.crossOriginNoCorsDomains;if(t){let r=Aa(e);if(r)return r=r.toLowerCase(),!ma(r,oa())&&t[r]<Date.now()-36e5}return!1}(t)&&await async function(e){var t;const r=aa(e);e=r.path,"json"===(null==(t=r.query)?void 0:t.f)&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const n=rn.request.crossOriginNoCorsDomains,s=Aa(e);n&&s&&(n[s.toLowerCase()]=Date.now())}(a?Ua(t,s):t))}let l,c,u=0,d=!1;o>0&&(u=setTimeout((()=>{d=!0,e.controller.abort()}),o));try{if("native-request-init"===r.responseType)c=n,c.url=t,r.signal?c.signal=r.signal:delete c.signal;else if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||a||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!s&&!e.useProxy&&tl.proxyUrl&&!ll(t)){if(Qa._beforeFetch&&await Qa._beforeFetch(t,n),l=await fetch(t,n),Qa._afterFetch&&await Qa._afterFetch(l),e.useProxy||function(e){const t=Aa(e);t&&!Qa._corsServers.includes(t)&&Qa._corsServers.push(t)}(t),"native"===r.responseType)c=l;else if("HEAD"!==n.method)if(l.ok){switch(i){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(u&&(clearTimeout(u),u=0),"json"===i||"xml"===i||"document"===i)if(c)switch(i){case"json":c=JSON.parse(c);break;case"xml":c=fl(c,"application/xml");break;case"document":c=fl(c,"text/html")}else c=null;if(c){if("array-buffer"===i||"blob"===i){const e=l.headers.get("Content-Type");if(e&&/application\/json|text\/plain/i.test(e)&&c["blob"===i?"size":"byteLength"]<=750)try{const e=await new Response(c).json();e.error&&(c=e)}catch{}}"image"===i&&c instanceof Blob&&(c=await yl(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await yl(t,e)}catch(n){if("AbortError"===n.name)throw d?new Error("Timeout exceeded"):js("Request canceled");if(!(!l&&n instanceof TypeError&&tl.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||ll(t))throw n;e.redoRequest=!0,function(e){const t={proxyUrl:e.proxyUrl,urlPrefix:pa(e.urlPrefix)},r=Wo.proxyRules,n=t.urlPrefix;let s=r.length;for(let e=0;e<r.length;e++){const t=r[e].urlPrefix;if(0===n.indexOf(t)){if(n.length===t.length)return-1;s=e;break}0===t.indexOf(n)&&(s=e+1)}r.splice(s,0,t)}({proxyUrl:tl.proxyUrl,urlPrefix:Aa(t)??""})}finally{u&&clearTimeout(u)}return[l,c]}async function pl(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(e){r=cl("request:interceptor",e,t)}if((n instanceof Error||n instanceof un)&&(r=cl("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}function fl(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}Qa._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Qa._beforeFetch=void 0,Qa._afterFetch=void 0;const gl=new Map;async function ml(e){var t,r;let n,s;await async function(e){var t;const r=e.params.url,n=e.params.requestOptions,s=e.controller.signal,i=n.body;let o=null,a=null;if(rl&&"HTMLFormElement"in globalThis&&(i instanceof FormData?o=i:i instanceof HTMLFormElement&&(o=new FormData(i))),"string"==typeof i&&(a=i),e.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:"head"===n.method?"HEAD":"GET",mode:"cors",priority:tl.priority,redirect:"follow",signal:s},(o||a)&&(e.fetchOptions.body=o||a),"anonymous"===n.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(r)||null!=(t=n.query)&&t.token||null!=o&&o.get("token")),!e.hasToken&&Za(r)&&(n.query||(n.query={}),n.query.token=rn.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!dl(r)&&!Ds(s)){let t;"immediate"===n.authMode?(await ul(),t=await $a.getCredential(r,{signal:s}),e.credential=t):"no-prompt"===n.authMode?(await ul(),t=await $a.getCredential(r,{prompt:!1,signal:s}).catch((()=>{})),e.credential=t):$a&&(t=$a.findCredential(r)),t&&(e.credentialToken=t.token,e.useSSL=!!t.ssl)}}(e);try{do{[n,s]=await hl(e)}while(!await vl(e,n,s))}catch(r){const s=cl("request:server",r,e.params,n);throw s.details.ssl=e.useSSL,null!=(t=e.interceptor)&&t.error&&e.interceptor.error(s),s}const i=e.params.url;if(s&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&null!=(r=s.user)&&r.username&&!va(i)){const e=Aa(i,!0);e&&tl.trustedServers.push(e)}Array.isArray(s.authorizedCrossOriginNoCorsDomains)&&function(e){rn.request.crossOriginNoCorsDomains||(rn.request.crossOriginNoCorsDomains={});const t=rn.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[Aa(r)??""]=0:(t[Aa("http://"+r)??""]=0,t[Aa("https://"+r)??""]=0)}(s.authorizedCrossOriginNoCorsDomains)}const o=e.credential;if(o&&$a){const e=$a.findServerInfo(o.server);let t=null==e?void 0:e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=$a.findCredential(t,o.userId);e&&-1===$a._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:s,getAllHeaders:n?()=>Array.from(n.headers):ol,getHeader:n?e=>n.headers.get(e):ol,httpStatus:(null==n?void 0:n.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function vl(e,t,r){var n;if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||"native"===s.responseType||"native-request-init"===s.responseType)return!0;let i,o;if(r&&(r.error&&"object"==typeof r.error?i=r.error:"error"===r.status&&Array.isArray(r.messages)&&(i={...r},i[al]=r,i.details=r.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[al]=r,i;let a,l=null;i&&(o=Number(i.code),l=i.hasOwnProperty("subcode")?Number(i.subcode):null,a=i.messageCode,a=null==a?void 0:a.toUpperCase());const c=s.authMode;if(403===o&&(4===l||null!=(n=i.message)&&n.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==c||498===o)&&void 0!==o&&nl.has(o)&&!dl(e.params.url)&&(403!==o||(!a||!sl.has(a))&&(null==l||2===l&&e.credentialToken))){await ul();try{const t=await $a.getCredential(e.params.url,{error:cl("request:server",i,e.params),prompt:"no-prompt"!==c,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===c)return e.credential=void 0,e.credentialToken=void 0,!1;i=t}}if(i)throw i;return!0}function yl(e,t,r=!1){const n=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=tl.priority,s.src=e,function(e,t,r=!1,n){return new Promise(((s,i)=>{if(Ds(n))return void i(Xa());let o=()=>{c(),i(new Error(`Unable to load ${t}`))},a=()=>{const t=e;c(),s(t)},l=()=>{if(!e)return;const t=e;c(),t.src="",i(Xa())};const c=()=>{Mr("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,null!=n&&n.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};null!=n&&n.addEventListener("abort",l),Mr("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))}))}(s,e,r,n)}let _l=class e{constructor(){this._emitter=new e.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};!function(e){class t{constructor(e=null){this._target=e,this._listenersMap=null}clear(){var e;null==(e=this._listenersMap)||e.clear(),this._listenersMap=null}destroy(){this.clear()}emit(e,t){var r;let n=null==(r=this._listenersMap)?void 0:r.get(e);if(!n)return!1;const s=this._target||this;let i=!1;for(const e of n.slice()){const r="deref"in e?e.deref():e;r?null==r||r.call(s,t):i=!0}return i&&(n=n.filter((e=>!("deref"in e)||null!=e.deref())),this._listenersMap.set(e,n)),n.length>0}on(e,t){if(Array.isArray(e)){return En(e.map((e=>this.on(e,t))))}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const r=this._listenersMap.get(e)||[];return r.push(t),this._listenersMap.set(e,r),An((()=>{var r;const n=null==(r=this._listenersMap)?void 0:r.get(e),s=(null==n?void 0:n.indexOf(t))??-1;s>=0&&n.splice(s,1)}))}once(e,t){const r=this.on(e,(e=>{r.remove();const n="deref"in t?t.deref():t;null==n||n.call(null,e)}));return r}hasEventListener(e){var t;const r=null==(t=this._listenersMap)?void 0:t.get(e);return null!=r&&r.length>0}}e.EventEmitter=t,e.EventedMixin=e=>{let r=class extends e{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return r=dn([So("esri.core.Evented")],r),r};let r=class extends xo{constructor(){super(...arguments),this._emitter=new _l.EventEmitter(this)}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};r=dn([So("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r}(_l);let wl,bl=class{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=t,this.apiValues=[],this.jsonValues=[],this._apiToJSON=function(e){const t={};for(const r in e)t[e[r]]=r;return t}(e),this.apiValues=Sl(this._apiToJSON),this.jsonValues=Sl(this._jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,r)=>{const n=this.toJSON(e);void 0!==n&&Qr(r,n,t)},this.write.isJSONMapWriter=!0}toJSON(e){if(null==e)return null;if(this._apiToJSON.hasOwnProperty(e)){const t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?null:e}fromJSON(e){return null!=e&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function Sl(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}var Al,El;const Il=(null==(Al=globalThis.esriConfig)?void 0:Al.locale)??(null==(El=globalThis.dojoConfig)?void 0:El.locale);var kl;const Ol=null==(kl=globalThis.document)?void 0:kl.documentElement;function Tl(){var e;const t=null==Ol?void 0:Ol.getAttribute("lang"),r=null==(e=globalThis.navigator)?void 0:e.language;return Il??t??r??"en"}function Cl(){return void 0===wl&&(wl=Tl()),wl}const xl=[];function Rl(e){return xl.push(e),An((()=>xl.splice(xl.indexOf(e),1)))}const jl=[];function Pl(e){return jl.push(e),An((()=>jl.splice(jl.indexOf(e),1)))}function Dl(){const e=Tl();wl!==e&&([...jl].forEach((t=>t(e))),wl=e,[...xl].forEach((t=>t(e))))}var Ul;null==(Ul=globalThis.addEventListener)||Ul.call(globalThis,"languagechange",Dl),Ol&&new MutationObserver((()=>{Dl()})).observe(Ol,{attributeFilter:["lang"]});const Ll="system",Nl="unknown",$l=Intl.DateTimeFormat().resolvedOptions().timeZone,Ml={"short-date-short-time":{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}};!function(e,t){new bl(e,{ignoreUnknown:!0,...t})}({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});const Fl={ar:"ar-u-nu-latn-ca-gregory"};let Bl=new WeakMap;const ql=Ml["short-date-short-time"];function zl(e){let t=Bl.get(e);if(!t){const r=Cl(),n=Fl[r]||r,s=function(e){switch(e){case Ll:return $l;case Nl:return"UTC";default:return e}}(e.timeZone??Ll),i={...e,timeZone:s};t=new Intl.DateTimeFormat(n,i),Bl.set(e,t)}return t}function Vl(e,t=ql){return zl(t).format(e)}Pl((()=>{Bl=new WeakMap}));const Wl={ar:"ar-u-nu-latn"};let Gl=new WeakMap,Hl={};function Jl(e,t){return Object.is(e,-0)&&(e=0),function(e){const t=e||Hl;if(!Gl.has(t)){const r=Cl(),n=Wl[Cl()]||r;Gl.set(t,new Intl.NumberFormat(n,e))}return Gl.get(t)}(t).format(e)}Pl((()=>{Gl=new WeakMap,Hl={}}));const Kl=()=>an.getLogger("esri.intl.substitute");function Yl(e,t,r={}){const{format:n={}}=r;return function(e,t){return t?e.replaceAll(nn,"object"==typeof t?(e,r)=>sn(Xr(r,t)):(e,r)=>sn(t(r))):e}(e,(e=>function(e,t,r){let n,s;const i=e.indexOf(":");if(-1===i?n=e.trim():(n=e.slice(0,i).trim(),s=e.slice(i+1).trim()),!n)return"";const o=Xr(n,t);if(null==o)return"";const a=(s?null==r?void 0:r[s]:null)??(null==r?void 0:r[n]);return a?function(e,t){switch(t.type){case"date":return Vl(e,t.intlOptions);case"number":return Jl(e,t.intlOptions);default:return Kl().warn("missing format descriptor for key {key}"),Zl(e)}}(o,a):s?function(e,t){switch(t.toLowerCase()){case"dateformat":return Vl(e);case"numberformat":return Jl(e);default:return Kl().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?Vl(e):/^numberformat/i.test(t)?Jl(e):Zl(e)}}(o,s):Zl(o)}(e,t,n)))}function Zl(e){switch(typeof e){case"string":return e;case"number":return Jl(e);case"boolean":return""+e;default:return e instanceof Date?Vl(e):""}}const Xl=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Ql={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function ec(e){if(function(e){return e in Ql}(e)){const t=Ql[e];return!0===t?e:t}return null}const tc=[],rc=new Map;function nc(e){for(const t of rc.keys())ic(e.pattern,t)&&rc.delete(t)}async function sc(e){const t=Cl();rc.has(e)||rc.set(e,async function(e,t){const r=[];for(const n of tc)if(ic(n.pattern,e))try{return await n.fetchMessageBundle(e,t)}catch(e){r.push(e)}throw r.length?new un("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new un("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const r=rc.get(e);return r&&await oc.add(r),r}function ic(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}Pl((()=>{rc.clear()}));const oc=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=qs())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}};async function ac(e,t,r,n){const s=t.exec(r);if(!s)throw new un("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const i=s[1]?`${s[1]}/`:"",o=s[2],a=function(e){if(!Xl.test(e))return null;const t=Xl.exec(e);if(null===t)return null;const[,r,n]=t;return ec(r+(n?"-"+n.toUpperCase():""))??ec(r)}(n),l=`${i}${o}.json`,c=a?`${i}${o}_${a}.json`:l;let u;try{u=await lc(e(c))}catch(t){if(c===l)throw new un("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:t});try{u=await lc(e(l))}catch(e){throw new un("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:e})}}return u}async function lc(e){if(null!=uc.fetchBundleAsset)return uc.fetchBundleAsset(e);const t=await Qa(e,{responseType:"text"});return JSON.parse(t.data)}let cc=class{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let n;n="string"==typeof r?e=>new URL(e,new URL(r,window.location.href)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return ac(this.getAssetUrl,this.matcher,e,t)}};const uc={};function dc(e){if(!rn.assetsPath)throw an.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new un("assets:path-not-set","config.assetsPath is not set");return Sa(rn.assetsPath,e)}var hc;!function(e){tc.includes(e)||(nc(e),tc.unshift(e)),An((()=>{const t=tc.indexOf(e);t>-1&&(tc.splice(t,1),nc(e))}))}(function(e){return new cc(e)}({pattern:"esri/",location:dc})),function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(hc||(hc={}));let pc=class{constructor(){this._resolver=qs(),this._status=hc.PENDING,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=hc.RESOLVED,this._cleanUp()}),(()=>{this._status=hc.REJECTED,this._cleanUp()})),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===hc.RESOLVED}isRejected(){return this._status===hc.REJECTED}isFulfilled(){return this._status!==hc.PENDING}abort(){this._resolver.reject(js())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=qs(),t=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(t);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()}),(e=>{this.isFulfilled()||this._allPromise!==r||$s(e)||this._resolver.reject(e)})),e.resolve()}};const fc=e=>{let t=class extends e{constructor(...e){super(...e),this._promiseProps=new pc,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return this._promiseProps.promise.then((()=>this)).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=dn([So("esri.core.Promise")],t),t};let gc=class extends(fc(xo)){};gc=dn([So("esri.core.Promise")],gc),function(e){e.EsriPromiseMixin=fc}(gc||(gc={}));const mc=gc;let vc=class extends xo{get value(){return function(e){return null!=e&&!0===e.ok?e.value:null}(this._result)}get error(){return function(e){return null!=e&&!1===e.ok?e.error:null}(this._result)}get finished(){return null!=this._result}constructor(e,t){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=function(e){return null==e||e.abort(),null}(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then((e=>{this._result=function(e){return{ok:!0,value:e}}(e),this._cleanup()}),(e=>{this._result=function(e){return{ok:!1,error:e}}(e),this._cleanup()})),this._abortHandle=Ls(t,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=wn(this._abortHandle),this._abortController=null}};var yc;function _c(e){return(t,r)=>{t[r]=e}}dn([Wi()],vc.prototype,"value",null),dn([Wi()],vc.prototype,"error",null),dn([Wi()],vc.prototype,"finished",null),dn([Wi()],vc.prototype,"promise",void 0),dn([Wi()],vc.prototype,"_result",void 0),vc=dn([So("esri.core.asyncUtils.ReactiveTask")],vc),function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"}(yc||(yc={}));let wc=class extends Vn{notify(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onInvalidated(),e.onCommitted()}}};var bc;let Sc=class{constructor(e,t,r,n,s){this.target=e,this.added=t,this.removed=r,this.start=n,this.deleteCount=s}};const Ac=new qn(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}));function Ec(e){e&&"object"==typeof e&&"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}function Ic(e){return e?e instanceof Dc?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function kc(e){if(null!=e&&e.length)return e[0]}function Oc(e,t,r,n){const s=Math.min(e.length-r,t.length-n);let i=0;for(;i<s&&e[r+i]===t[n+i];)i++;return i}function Tc(e,t,r,n){t&&t.forEach(((t,s,i)=>{e.push(t),Tc(e,r.call(n,t,s,i),r,n)}))}const Cc=new Set,xc=new Set,Rc=new Set,jc=new Map;let Pc=0,Dc=bc=class extends _l.EventedAccessor{static isCollection(e){return null!=e&&e instanceof bc}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new wc,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Pc++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof bc?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return ts(this._observable),this._items}set items(e){this._emitBeforeChanges(yc.ADD)||(this._splice(0,this.length,Ic(e)),this._emitAfterChanges(yc.ADD))}hasEventListener(e){return!this.destroyed&&("change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return An();if("change"===e){const e=this._chgListeners,r={removed:!1,callback:t};return e.push(r),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),An((()=>{r.removed=!0,e.splice(e.indexOf(r),1)}))}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,n=this.on(e,(e=>{var t;null==(t=r())||t.call(null,e),n.remove()}));return n}add(e,t){if(ts(this._observable),this._emitBeforeChanges(yc.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(yc.ADD),this}addMany(e,t=this._items.length){if(ts(this._observable),null==e||!e.length)return this;if(this._emitBeforeChanges(yc.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,Ic(e)),this._emitAfterChanges(yc.ADD),this}at(e){if(ts(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ts(this._observable),!this.length||this._emitBeforeChanges(yc.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(yc.REMOVE),e}_removeAllRaw(){return 0===this.length?[]:this._splice(0,this.length)||[]}clone(){return ts(this._observable),this._createNewInstance({items:this._items.map(Jr)})}concat(...e){ts(this._observable);const t=e.map(Ic);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ts(this._observable),!this.length||this._emitBeforeChanges(yc.REMOVE))return;const r=this._splice(0,this.length),n=r.length;for(let s=0;s<n;s++)e.call(t,r[s],s,r);this._emitAfterChanges(yc.REMOVE)}destroyAll(){this.drain(Ec)}destroyMany(e){const t=this.removeMany(e);return t.forEach(Ec),t}every(e,t){return ts(this._observable),this._items.every(e,t)}filter(e,t){ts(this._observable);const r=2===arguments.length?this._items.filter(e,t):this._items.filter(e);return this._createNewInstance({items:r})}find(e,t){return ts(this._observable),this._items.find(e,t)}findIndex(e,t){return ts(this._observable),this._items.findIndex(e,t)}flatten(e,t){ts(this._observable);const r=[];return Tc(r,this,e,t),new bc(r)}forEach(e,t){return ts(this._observable),this._items.forEach(e,t)}getItemAt(e){return ts(this._observable),this._items[e]}getNextIndex(e){ts(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ts(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ts(this._observable),this._items.indexOf(e,t)}join(e=","){return ts(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ts(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ts(this._observable);const r=this._items.map(e,t);return new bc({items:r})}reorder(e,t=this.length-1){ts(this._observable);const r=this.indexOf(e);if(-1!==r){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(yc.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(yc.MOVE)}return e}}pop(){if(ts(this._observable),!this.length||this._emitBeforeChanges(yc.REMOVE))return;const e=kc(this._splice(this.length-1,1));return this._emitAfterChanges(yc.REMOVE),e}push(...e){return ts(this._observable),this._emitBeforeChanges(yc.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(yc.ADD)),this.length}reduce(e,t){ts(this._observable);const r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){ts(this._observable);const r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return ts(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ts(this._observable),e<0||e>=this.length||this._emitBeforeChanges(yc.REMOVE))return;const t=kc(this._splice(e,1));return this._emitAfterChanges(yc.REMOVE),t}removeMany(e){if(ts(this._observable),null==e||!e.length||this._emitBeforeChanges(yc.REMOVE))return[];const t=e instanceof bc?e.toArray():e,r=this._items,n=[],s=t.length;for(let e=0;e<s;e++){const s=t[e],i=r.indexOf(s);if(i>-1){const s=1+Oc(t,r,e+1,i+1),o=this._splice(i,s);o&&o.length>0&&n.push.apply(n,o),e+=s-1}}return this._emitAfterChanges(yc.REMOVE),n}reverse(){if(ts(this._observable),this._emitBeforeChanges(yc.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(yc.MOVE),this}shift(){if(ts(this._observable),!this.length||this._emitBeforeChanges(yc.REMOVE))return;const e=kc(this._splice(0,1));return this._emitAfterChanges(yc.REMOVE),e}slice(e=0,t=this.length){return ts(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ts(this._observable),this._items.some(e,t)}sort(e){if(ts(this._observable),!this.length||this._emitBeforeChanges(yc.MOVE)||!this._requiresSort(e))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(yc.MOVE),this}_requiresSort(e=(e,t)=>e===t?0:e<t?-1:1){const t=this.length-1;for(let r=0;r<t;r++)if(e(this.items[r],this.items[r+1])>0)return!0;return!1}splice(e,t,...r){ts(this._observable);const n=(t?yc.REMOVE:0)|(r.length?yc.ADD:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(n),s}toArray(){return ts(this._observable),this._items.slice()}toJSON(){return ts(this._observable),this.toArray()}toLocaleString(){return ts(this._observable),this._items.toLocaleString()}toString(){return ts(this._observable),this._items.toString()}unshift(...e){return ts(this._observable),!e.length||this._emitBeforeChanges(yc.ADD)||(this._splice(0,0,e),this._emitAfterChanges(yc.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const n=this._items,s=this.itemType;let i,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Gs((()=>this._dispatchChange()))),e<0&&(e+=this.length),t){if(o=n.splice(e,t),this.hasEventListener("before-remove")){const t=Ac.acquire();t.target=this,t.cancellable=!0;for(let r=0,s=o.length;r<s;r++)i=o[r],t.reset(i),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(r,1),n.splice(e,0,i),e+=1,r-=1,s-=1);Ac.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=Ac.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let r=0;r<t;r++)e.reset(o[r]),this.emit("after-remove",e);Ac.release(e)}}if(null!=r&&r.length){if(s){const e=[];for(const t of r){const r=s.ensureType(t);null==r&&null!=t||e.push(r)}r=e}const t=this.hasEventListener("before-add"),i=this.hasEventListener("after-add"),o=e===this.length;if(t||i){const s=Ac.acquire();s.target=this,s.cancellable=!0;const a=Ac.acquire();a.target=this,a.cancellable=!1;for(const l of r)t?(s.reset(l),this.emit("before-add",s),s.defaultPrevented||(o?n.push(l):n.splice(e++,0,l),this._set("length",n.length),i&&(a.reset(l),this.emit("after-add",a)))):(o?n.push(l):n.splice(e++,0,l),this._set("length",n.length),a.reset(l),this.emit("after-add",a));Ac.release(a),Ac.release(s)}else{if(o)for(const e of r)n.push(e);else n.splice(e,0,...r);this._set("length",n.length)}}if((null!=r&&r.length||null!=o&&o.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const n=new Sc(this,r,o,e,t);this.emit("after-splice",n)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Ac.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Ac.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Ac.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Ac.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;Cc.clear(),xc.clear(),Rc.clear();for(const{added:t,removed:r}of e){if(t)if(0===Rc.size&&0===xc.size)for(const e of t)Cc.add(e);else for(const e of t)xc.has(e)?(Rc.add(e),xc.delete(e)):Rc.has(e)||Cc.add(e);if(r)if(0===Rc.size&&0===Cc.size)for(const e of r)xc.add(e);else for(const e of r)Cc.has(e)?Cc.delete(e):(Rc.delete(e),xc.add(e))}const r=bs.acquire();Cc.forEach((e=>{r.push(e)}));const n=bs.acquire();xc.forEach((e=>{n.push(e)}));const s=this._items,i=t.items,o=bs.acquire();if(Rc.forEach((e=>{i.indexOf(e)!==s.indexOf(e)&&o.push(e)})),t.listeners&&(r.length||n.length||o.length)){const e={target:this,added:r,removed:n,moved:o},s=t.listeners.length;for(let r=0;r<s;r++){const n=t.listeners[r];n.removed||n.callback.call(this,e)}}bs.release(r),bs.release(n),bs.release(o)}Cc.clear(),xc.clear(),Rc.clear()}};function Uc(e,t,r={}){return Nc(e,t,r,$c)}function Lc(e,t,r={}){return Nc(e,t,r,Mc)}function Nc(e,t,r={},n){let s=null;const i=r.once?(e,r)=>{n(e)&&(wn(s),t(e,r))}:(e,r)=>{n(e)&&t(e,r)};if(s=mi(e,i,r.sync,r.equals),r.initial){const t=e();i(t,t)}return s}function $c(e){return!0}function Mc(e){return!!e}Dc.ofType=e=>{if(!e)return bc;if(jc.has(e))return jc.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const r in e.typeMap){const n=e.typeMap[r].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends bc{};return dn([_c({Type:e,ensureType:"function"==typeof e?Pi(e):Mi(e)})],r.prototype,"itemType",void 0),r=dn([So(`esri.core.Collection<${t}>`)],r),jc.set(e,r),r},dn([Wi()],Dc.prototype,"_updating",void 0),dn([Wi()],Dc.prototype,"length",void 0),dn([Wi()],Dc.prototype,"items",null),dn([Wi({readOnly:!0})],Dc.prototype,"updating",null),Dc=bc=dn([So("esri.core.Collection")],Dc);const Fc={sync:!0,initial:!0},Bc="randomUUID"in crypto;const qc=Object.prototype.toString;function zc(e){const t="__accessorMetadata__"in e?Pi(e):e;return function(...e){if(e.push(t),"number"==typeof e[2])throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Vc.apply(this,e)}}function Vc(e,t,r,n){Mn(e,t).cast=n}var Wc=function(){return Wc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Wc.apply(this,arguments)},Gc={exports:{}},Hc={},Jc={exports:{}},Kc={};function Yc(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var Zc=/javascript\s*\:/gim;Kc.whiteList=Yc(),Kc.getDefaultWhiteList=Yc,Kc.onAttr=function(e,t,r){},Kc.onIgnoreAttr=function(e,t,r){},Kc.safeAttrValue=function(e,t){return Zc.test(t)?"":t};var Xc={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,s;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,s=e.length;n<s;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Qc=Xc;var eu=function(e,t){";"!==(e=Qc.trimRight(e))[e.length-1]&&(e+=";");var r=e.length,n=!1,s=0,i=0,o="";function a(){if(!n){var r=Qc.trim(e.slice(s,i)),a=r.indexOf(":");if(-1!==a){var l=Qc.trim(r.slice(0,a)),c=Qc.trim(r.slice(a+1));if(l){var u=t(s,o.length,l,c,r);u&&(o+=u+"; ")}}}s=i+1}for(;i<r;i++){var l=e[i];if("/"===l&&"*"===e[i+1]){var c=e.indexOf("*/",i+2);if(-1===c)break;s=(i=c+1)+1,n=!1}else"("===l?n=!0:")"===l?n=!1:";"===l?n||a():"\n"===l&&a()}return Qc.trim(o)},tu=Kc,ru=eu;function nu(e){return null==e}function su(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).whiteList=e.whiteList||tu.whiteList,e.onAttr=e.onAttr||tu.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||tu.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||tu.safeAttrValue,this.options=e}su.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,s=t.onIgnoreAttr,i=t.safeAttrValue;return ru(e,(function(e,t,o,a,l){var c=r[o],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(a):c instanceof RegExp&&(u=c.test(a)),!0!==u&&(u=!1),a=i(o,a)){var d,h={position:t,sourcePosition:e,source:l,isWhite:u};if(u)return nu(d=n(o,a,h))?o+":"+a:d;if(!nu(d=s(o,a,h)))return d}}))};var iu=su;!function(e,t){var r=Kc,n=iu;for(var s in(t=e.exports=function(e,t){return new n(t).process(e)}).FilterCSS=n,r)t[s]=r[s]}(Jc,Jc.exports);var ou=Jc.exports,au={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,s;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,s=e.length;n<s;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},lu=ou.FilterCSS,cu=ou.getDefaultWhiteList,uu=au;function du(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var hu=new lu;function pu(e){return e.replace(fu,"&lt;").replace(gu,"&gt;")}var fu=/</g,gu=/>/g,mu=/"/g,vu=/&quot;/g,yu=/&#([a-zA-Z0-9]*);?/gim,_u=/&colon;?/gim,wu=/&newline;?/gim,bu=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Su=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Au=/u\s*r\s*l\s*\(.*/gi;function Eu(e){return e.replace(mu,"&quot;")}function Iu(e){return e.replace(vu,'"')}function ku(e){return e.replace(yu,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Ou(e){return e.replace(_u,":").replace(wu," ")}function Tu(e){for(var t="",r=0,n=e.length;r<n;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return uu.trim(t)}function Cu(e){return e=Tu(e=Ou(e=ku(e=Iu(e))))}function xu(e){return e=pu(e=Eu(e))}Hc.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},Hc.getDefaultWhiteList=du,Hc.onTag=function(e,t,r){},Hc.onIgnoreTag=function(e,t,r){},Hc.onTagAttr=function(e,t,r){},Hc.onIgnoreTagAttr=function(e,t,r){},Hc.safeAttrValue=function(e,t,r,n){if(r=Cu(r),"href"===t||"src"===t){if("#"===(r=uu.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"data:image/"!==r.substr(0,11)&&"ftp://"!==r.substr(0,6)&&"./"!==r.substr(0,2)&&"../"!==r.substr(0,3)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(bu.lastIndex=0,bu.test(r))return""}else if("style"===t){if(Su.lastIndex=0,Su.test(r)||(Au.lastIndex=0,Au.test(r)&&(bu.lastIndex=0,bu.test(r))))return"";!1!==n&&(r=(n=n||hu).process(r))}return r=xu(r)},Hc.escapeHtml=pu,Hc.escapeQuote=Eu,Hc.unescapeQuote=Iu,Hc.escapeHtmlEntities=ku,Hc.escapeDangerHtml5Entities=Ou,Hc.clearNonPrintableCharacter=Tu,Hc.friendlyAttrValue=Cu,Hc.escapeAttrValue=xu,Hc.onIgnoreTagStripAll=function(){return""},Hc.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],s=!1;return{onIgnoreTag:function(i,o,a){if(function(t){return!!r||-1!==uu.indexOf(e,t)}(i)){if(a.isClosing){var l="[/removed]",c=a.position+10;return n.push([!1!==s?s:a.position,c]),s=!1,l}return s||(s=a.position),"[removed]"}return t(i,o,a)},remove:function(e){var t="",r=0;return uu.forEach(n,(function(n){t+=e.slice(r,n[0]),r=n[1]})),t+=e.slice(r)}}},Hc.stripCommentTag=function(e){for(var t="",r=0;r<e.length;){var n=e.indexOf("\x3c!--",r);if(-1===n){t+=e.slice(r);break}t+=e.slice(r,n);var s=e.indexOf("--\x3e",n);if(-1===s)break;r=s+3}return t},Hc.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},Hc.cssFilter=hu,Hc.getDefaultCSSWhiteList=cu;var Ru={},ju=au;function Pu(e){var t,r=ju.spaceIndex(e);return t=-1===r?e.slice(1,-1):e.slice(1,r+1),"/"===(t=ju.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function Du(e){return"</"===e.slice(0,2)}var Uu=/[^a-zA-Z0-9\\_:.-]/gim;function Lu(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function Nu(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"'"===r||'"'===r?t:-1}}function $u(e,t){for(;t>0;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function Mu(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}Ru.parseTag=function(e,t,r){var n="",s=0,i=!1,o=!1,a=0,l=e.length,c="",u="";e:for(a=0;a<l;a++){var d=e.charAt(a);if(!1===i){if("<"===d){i=a;continue}}else if(!1===o){if("<"===d){n+=r(e.slice(s,a)),i=a,s=a;continue}if(">"===d){n+=r(e.slice(s,i)),c=Pu(u=e.slice(i,a+1)),n+=t(i,n.length,c,u,Du(u)),s=a+1,i=!1;continue}if('"'===d||"'"===d)for(var h=1,p=e.charAt(a-h);""===p.trim()||"="===p;){if("="===p){o=d;continue e}p=e.charAt(a-++h)}}else if(d===o){o=!1;continue}}return s<e.length&&(n+=r(e.substr(s))),n},Ru.parseAttr=function(e,t){var r=0,n=0,s=[],i=!1,o=e.length;function a(e,r){if(!((e=(e=ju.trim(e)).replace(Uu,"").toLowerCase()).length<1)){var n=t(e,r||"");n&&s.push(n)}}for(var l=0;l<o;l++){var c,u=e.charAt(l);if(!1!==i||"="!==u)if(!1===i||l!==n)if(/\s|\n|\t/.test(u)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(c=Lu(e,l))){a(ju.trim(e.slice(r,l))),i=!1,r=l+1;continue}l=c-1;continue}if(-1===(c=$u(e,l-1))){a(i,Mu(ju.trim(e.slice(r,l)))),i=!1,r=l+1;continue}}else;else{if(-1===(c=e.indexOf(u,l+1)))break;a(i,ju.trim(e.slice(n+1,c))),i=!1,r=(l=c)+1}else i=e.slice(r,l),r=l+1,n='"'===e.charAt(r)||"'"===e.charAt(r)?r:Nu(e,l+1)}return r<e.length&&(!1===i?a(e.slice(r)):a(i,Mu(ju.trim(e.slice(r))))),ju.trim(s.join(" "))};var Fu=ou.FilterCSS,Bu=Hc,qu=Ru,zu=qu.parseTag,Vu=qu.parseAttr,Wu=au;function Gu(e){return null==e}function Hu(e){(e=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Bu.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map((function(e){return e.toLowerCase()})):t[r.toLowerCase()]=e[r];return t}(e.whiteList||e.allowList):e.whiteList=Bu.whiteList,e.onTag=e.onTag||Bu.onTag,e.onTagAttr=e.onTagAttr||Bu.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Bu.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Bu.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Bu.safeAttrValue,e.escapeHtml=e.escapeHtml||Bu.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Fu(e.css))}Hu.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,s=t.onIgnoreTag,i=t.onTagAttr,o=t.onIgnoreTagAttr,a=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=Bu.stripBlankChar(e)),t.allowCommentTag||(e=Bu.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(u=Bu.StripTagBody(t.stripIgnoreTagBody,s),s=u.onIgnoreTag);var d=zu(e,(function(e,t,u,d,h){var p={sourcePosition:e,position:t,isClosing:h,isWhite:Object.prototype.hasOwnProperty.call(r,u)},f=n(u,d,p);if(!Gu(f))return f;if(p.isWhite){if(p.isClosing)return"</"+u+">";var g=function(e){var t=Wu.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=Wu.trim(e.slice(t+1,-1)))[e.length-1];return r&&(e=Wu.trim(e.slice(0,-1))),{html:e,closing:r}}(d),m=r[u],v=Vu(g.html,(function(e,t){var r=-1!==Wu.indexOf(m,e),n=i(u,e,t,r);return Gu(n)?r?(t=a(u,e,t,c))?e+'="'+t+'"':e:Gu(n=o(u,e,t,r))?void 0:n:n}));return d="<"+u,v&&(d+=" "+v),g.closing&&(d+=" /"),d+=">"}return Gu(f=s(u,d,p))?l(d):f}),l);return u&&(d=u.remove(d)),d};var Ju=Hu;!function(e,t){var r=Hc,n=Ru,s=Ju;function i(e,t){return new s(t).process(e)}(t=e.exports=i).filterXSS=i,t.FilterXSS=s,function(){for(var e in r)t[e]=r[e];for(var s in n)t[s]=n[s]}(),typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(Gc,Gc.exports);var Ku=Gc.exports,Yu=function(){function e(e,t){var r,n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=Wc(Wc({},Ku.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,s){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?n.sanitizeUrl(r):Ku.safeAttrValue(e,t,r,s)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},e&&!t?r=e:e&&t?((r=Object.create(this.arcgisFilterOptions)).css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach((function(t){if("whiteList"===t)r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]);else if("css"===t){var s=e.css.whiteList;null!=s&&e.css instanceof Object&&Object.keys(s).forEach((function(e){return r.css.whiteList[e]=s[e]}))}else r[t]=e[t]}))):((r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,r.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=r,this._xssFilter=new Ku.FilterXSS(r)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:return t.allowUndefined&&typeof e>"u"?void 0:null}},e.prototype.sanitizeUrl=function(e,t){var r=(t??{}).isProtocolRequired,n=void 0===r||r,s=this._trim(e.substring(0,e.indexOf(":"))),i="/"===e,o=/^#/.test(e),a=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return i||o||a?Ku.escapeAttrValue(e):s||n?"":Ku.escapeAttrValue("https://".concat(e))},e.prototype.sanitizeHTMLAttribute=function(e,t,r,n){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,r,n):Ku.safeAttrValue(e,t,r,n)},e.prototype.validate=function(e,t){void 0===t&&(t={});var r=this.sanitize(e,t);return{isValid:e===r,sanitized:r}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,(function(e){return t._entityMap[e]}))},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,(function(r,n){return t.test(r)?r:"&#x".concat(Number(e.charCodeAt(n)).toString(16),";")}))},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]}))})),t},e.prototype._iterateOverObject=function(e,t){var r=this;void 0===t&&(t={});try{var n=!1,s=void 0;if(Array.isArray(e))s=e.reduce((function(e,s){var i=r.validate(s,t);return i.isValid?e.concat([s]):(n=!0,e.concat([i.sanitized]))}),[]);else{if(!function(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))return t.allowUndefined&&typeof e>"u"?void 0:null;s=Object.keys(e).reduce((function(s,i){var o=e[i],a=r.validate(o,t);return a.isValid?s[i]=o:(n=!0,s[i]=a.sanitized),s}),{})}return n?s:e}catch{return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}();const Zu=new Map;function Xu(){Zu.clear()}function Qu(e){Zu.delete(e)}function ed(...e){const t=bs.acquire();for(let r=0;r<e.length;r++){const n=e[r],s=typeof n;if("string"===s)t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if("object"===s)for(const e in n)n[e]&&t.push(e)}const r=t.join(" ");return bs.release(t),r}(()=>{const e=new Map,t=new ResizeObserver((t=>{var r;Xu();for(const n of t)null==(r=e.get(n.target))||r(n)}))})();const td=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"].reduce(((e,t)=>(e[t]=[],e)),{}),rd=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],nd=new Yu({whiteList:td,onTagAttr:(e,t,r)=>{const n=`${t}="${r}"`;if(rd.includes(t))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);async function sd(e,t){await async function(e){await Js(e),await new Promise((t=>requestAnimationFrame((()=>{null!=e&&e.aborted||t()}))))}(Ps(t));const r="function"==typeof e?e():e;r&&("setFocus"in r&&"function"==typeof r.setFocus?await r.setFocus():r instanceof HTMLElement&&r.focus())}const id="http://www.w3.org/",od=`${id}2000/svg`,ad=`${id}1999/xlink`;let ld=[],cd=(e,t)=>{let r={};return Object.keys(e).forEach((t=>{r[t]=e[t]})),t&&Object.keys(t).forEach((e=>{r[e]=t[e]})),r},ud=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),dd=e=>{if("string"!=typeof e)throw new Error("Style values must be strings")},hd=(e,t,r)=>{if(""!==t.vnodeSelector)for(let n=r;n<e.length;n++)if(ud(e[n],t))return n;return-1},pd=(e,t,r,n)=>{let s=e[t];if(""===s.vnodeSelector)return;let i=s.properties;if(!i||!(void 0===i.key?i.bind:i.key))for(let i=0;i<e.length;i++)if(i!==t){let t=e[i];if(ud(t,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${"added"===n?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}},fd=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},gd=[],md=!1,vd=e=>{(e.children||[]).forEach(vd),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},yd=()=>{md=!1,gd.forEach(vd),gd.length=0},_d=e=>{gd.push(e),md||(md=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(yd,{timeout:16}):setTimeout(yd,16))},wd=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,(()=>{t.parentNode&&(t.parentNode.removeChild(t),_d(e))}),e.properties)}t.parentNode&&(t.parentNode.removeChild(t),_d(e))},bd=(e,t,r)=>{if(!t)return;let n=r.eventHandlerInterceptor,s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){let i=s[o],a=t[i];if("className"===i)throw new Error('Property "className" is not supported, use "class".');if("class"===i)kd(e,a,!0);else if("classes"===i){let t=Object.keys(a),r=t.length;for(let n=0;n<r;n++){let r=t[n];a[r]&&e.classList.add(r)}}else if("styles"===i){let t=Object.keys(a),n=t.length;for(let s=0;s<n;s++){let n=t[s],i=a[n];i&&(dd(i),r.styleApplyer(e,n,i))}}else if("key"!==i&&null!=a){let s=typeof a;"function"===s?(0===i.lastIndexOf("on",0)&&(n&&(a=n(i,a,e,t)),"oninput"===i&&function(){let e=a;a=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}()),e[i]=a):r.namespace===od?"href"===i?e.setAttributeNS(ad,i,a):e.setAttribute(i,a):"string"===s&&"value"!==i?"innerHTML"===i?e[i]=nd.sanitize(a):Sd(e)&&i in e?e[i]=a:e.setAttribute(i,a):e[i]=a}}};function Sd(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let Ad,Ed=(e,t,r)=>{((e,t,r)=>{if(t)for(let n of t)Id(n,e,void 0,r)})(e,t.children,r),t.text&&(e.textContent=t.text),bd(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},Id=(e,t,r,n)=>{let s,i=0,o=e.vnodeSelector,a=t.ownerDocument;if(""===o)s=e.domNode=a.createTextNode(e.text),void 0!==r?t.insertBefore(s,r):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||"."===c||"#"===c){let c=o.charAt(i-1),u=o.slice(i,l);"."===c?s.classList.add(u):"#"===c?s.id=u:("svg"===u&&(n=cd(n,{namespace:od})),void 0!==n.namespace?s=e.domNode=a.createElementNS(n.namespace,u):(s=e.domNode=e.domNode||a.createElement(u),"input"===u&&e.properties&&void 0!==e.properties.type&&s.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),i=l+1}}Ed(s,e,n)}},kd=(e,t,r)=>{t&&t.split(" ").forEach((t=>{t&&e.classList.toggle(t,r)}))};Ad=(e,t,r)=>{let n=e.domNode,s=!1;if(e===t)return!1;let i=!1;if(""===t.vnodeSelector){if(t.text!==e.text){let e=n.ownerDocument.createTextNode(t.text);return n.parentNode.replaceChild(e,n),t.domNode=e,s=!0,s}t.domNode=n}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=cd(r,{namespace:od})),e.text!==t.text&&(i=!0,void 0===t.text?n.removeChild(n.firstChild):n.textContent=t.text),t.domNode=n,i=((e,t,r,n,s)=>{if(r===n)return!1;n=n||ld;let i,o=(r=r||ld).length,a=n.length,l=0,c=0,u=!1;for(;c<a;){let a=l<o?r[l]:void 0,d=n[c];if(void 0!==a&&ud(a,d))u=Ad(a,d,s)||u,l++;else{let a=hd(r,d,l+1);if(a>=0){for(i=l;i<a;i++)wd(r[i]),pd(r,i,e,"removed");u=Ad(r[a],d,s)||u,l=a+1}else Id(d,t,l<o?r[l].domNode:void 0,s),fd(d),pd(n,c,e,"added")}c++}if(o>l)for(i=l;i<o;i++)wd(r[i]),pd(r,i,e,"removed");return u})(t,n,e.children,t.children,r)||i,i=((e,t,r,n)=>{if(!r)return;let s=!1,i=Object.keys(r),o=i.length;for(let a=0;a<o;a++){let o=i[a],l=r[o],c=t[o];if("class"===o)c!==l&&(kd(e,c,!1),kd(e,l,!0));else if("classes"===o){let t=e.classList,r=Object.keys(l),n=r.length;for(let e=0;e<n;e++){let n=r[e],i=!!l[n];i!==!!c[n]&&(s=!0,i?t.add(n):t.remove(n))}}else if("styles"===o){let t=Object.keys(l),r=t.length;for(let i=0;i<r;i++){let r=t[i],o=l[r];o!==c[r]&&(s=!0,o?(dd(o),n.styleApplyer(e,r,o)):n.styleApplyer(e,r,""))}}else if(l||"string"!=typeof c||(l=""),"value"!==o||Sd(e)){if(l!==c){let t=typeof l;"function"===t&&n.eventHandlerInterceptor||(n.namespace===od?"href"===o?e.setAttributeNS(ad,o,l):e.setAttribute(o,l):"string"===t?"innerHTML"===o?e[o]=nd.sanitize(l):"role"===o&&""===l?e.removeAttribute(o):Sd(e)&&o in e?e[o]=l:e.setAttribute(o,l):e[o]!==l&&(e[o]=l),s=!0)}}else{let t=e[o];t!==l&&(e["oninput-value"]?t===e["oninput-value"]:l!==c)&&(e[o]=l,e["oninput-value"]=void 0),l!==c&&(s=!0)}}return s})(n,e.properties,t.properties,r)||i,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[n,r,t.vnodeSelector,t.properties,t.children]);return i&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(n,t.properties,e.properties),s};let Od=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=e;e=r,Ad(n,r,t)},domNode:e.domNode});const Td={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{"-"===t.charAt(0)?e.style.setProperty(t,r):e.style[t]=r}};let Cd=e=>cd(Td,e),xd=(e,t,r)=>(r=Cd(r),Id(t,e,void 0,r),Od(t,r)),Rd=(e,t,r)=>(r=Cd(r),Id(t,e.parentNode,e,r),Od(t,r)),jd=(e,t,r)=>(r=Cd(r),t.domNode=e,Ed(e,t,r),Od(t,r)),Pd=(e,t,r)=>(r=Cd(r),Id(t,e.parentNode,e,r),e.parentNode.removeChild(e),Od(t,r));const Dd={handleInterceptedEvent:(e,t,r,n)=>(e.scheduleRender(),t.properties[`on${n.type}`].apply(t.properties.bind||r,[n]))},Ud={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{"-"===t.charAt(0)?e.style.setProperty(t,r):e.style[t]=r}},Ld=(e,t,r=!1)=>{let n=e;return t.forEach(((e,s)=>{const i=null!=n&&n.children?((e,t)=>e.find(t))(n.children,(t=>t.domNode===e)):void 0;r&&!i&&s!==t.length-1||(n=i)})),n};var Nd=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}};function $d(e,t,r){const{subscribe:n}=function(e){const t=e.join(","),r=Md[t];if(void 0!==r)return r;const n=new Set,s=new MutationObserver((e=>n.forEach((t=>t(e)))));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const i={subscribe:e=>(n.add(e),()=>{n.delete(e),0===n.size&&(s.disconnect(),Md[t]=void 0)})};return Md[t]=i,i}(t);return n((t=>{t.some((t=>function(e,t){let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1}(e,t.target)))&&r()}))}var Md={};function Fd(e,t,r){const n=function(e,t){var r,n;let s=e;for(;s;){const e=null==(r=s.closest)?void 0:r.call(s,t);if(e)return e;const i=null==(n=s.getRootNode)?void 0:n.call(s);if(i===globalThis.document)return null;s=i.host}return null}(e,`[${t}]`);return(null==n?void 0:n.getAttribute(t))??r}function Bd(e,t,...r){try{return null==e?void 0:e.call(t,...r)}catch(t){console.error(t,e)}}async function qd(e,t,...r){try{const n=null==e?void 0:e.call(t,...r);return n instanceof Promise?await n:n}catch(t){console.error(t,e)}}var zd=new Set(["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),Vd="en",Wd={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function Gd(e,t,r=""){const n=`${t}/${r}`,s=`${n}${e}.json`;return Hd[s]??(Hd[s]=Jd(e,n)),await Hd[s]}var Hd={};async function Jd(e,t){const r=`${t}${e}.json`;try{const e=await fetch(r);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===Vd?{}:await Jd(Vd,t)}function Kd(e){var t;const r=Fd(e,"lang",(null==(t=globalThis.navigator)?void 0:t.language)||Vd);return{lang:r,t9nLocale:Yd(r)}}function Yd(e){const[t,r]=e.split("-"),n=t.toLowerCase();let s=n;return r&&(s=`${n}-${r.toUpperCase()}`),s=Wd[s]??s,zd.has(s)?s:r?Yd(n):Vd}function Zd(e,t,r,n){let s;const i=()=>{(async function(e,t,r=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:n,t9nLocale:s}=Kd(e),i=`${t}/${r}/t9n`,o=null===r?{}:await Gd(s,i,"messages.");return{lang:n,t9nLocale:s,t9nStrings:o}})(e,t(),n).then((e=>{((null==s?void 0:s.lang)!==e.lang||s.t9nLocale!==e.t9nLocale||s.t9nStrings!==e.t9nStrings)&&r(e),s=e})).catch(console.error)};return queueMicrotask(i),$d(e,["lang"],i)}var Xd=e=>e.replace(Qd,((e,t)=>`${0===t?"":"-"}${e.toLowerCase()}`)),Qd=/[A-Z]+(?![a-z])|[A-Z]/gu;var eh=4;function th(e){return void 0!==e}function rh(e){var t,r;let n=e;for(;n=n.parentNode??n.host;)if(null!=(t=null==n?void 0:n.constructor)&&t.lumina){const t=n;return null!=(r=t.manager)&&r.loadedCalled||t._offspring.push(e),t._postLoad.promise}return!1}var nh=Object.defineProperty;var sh,ih=globalThis.HTMLElement??function(e){const t=e.split(":");return 1===t.length?[t[0],Xd(t[0])]:t};function oh([e,t]){this[e]=t}sh=class extends ih{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Nd,this._postLoaded=new Nd,this._offspring=[],this._saveInstanceProperties();const e=this.constructor;e._LitConstructor?this._initializeComponent({a:e._LitConstructor}):e._loadPromise.then(this._initializeComponent.bind(this)).catch((e=>{this._postLoaded.reject(e),setTimeout((()=>{throw e}))}))}static _initializePrototype(){var e,t,r;null==(e=this._properties)||e.forEach(this._bindProp,this),null==(t=this._asyncMethods)||t.forEach(this._bindAsync,this),null==(r=this._syncMethods)||r.forEach(this._bindSync,this)}static _bindProp(e){nh(this.prototype,e,{configurable:!0,enumerable:!0,get(){return this._store[e]},set(t){this._store[e]=t}})}static _bindAsync(e){nh(this.prototype,e,{async value(...t){return this._litElement||await this._postLoaded.promise,await this._litElement[e](...t)},configurable:!0})}static _bindSync(e){nh(this.prototype,e,{value(...t){return this._litElement[e](...t)},configurable:!0})}get manager(){var e;return null==(e=this._litElement)?void 0:e.manager}_saveInstanceProperties(){var e;const t=this.constructor,r=this;null==(e=t._properties)||e.forEach((e=>{Object.hasOwn(this,e)&&(this._store[e]=r[e],delete r[e])}))}attributeChangedCallback(e,t,r){var n;null==(n=this._litElement)||n.attributeChangedCallback(e,t,r),this._litElement||this._pendingAttributes.push(e)}connectedCallback(){var e,t;this._litElement?null==(t=(e=this._litElement).connectedCallback)||t.call(e):queueMicrotask((()=>{this._ancestorLoad=rh(this)}))}disconnectedCallback(){var e,t;null==(t=null==(e=this._litElement)?void 0:e.disconnectedCallback)||t.call(e)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(e){var t;const r=this.constructor,n=r._name,s=this._store,i=Object.values(e).find((e=>e.tagName===n));const o=`${n}--lazy`;let a=i;for(;a&&!Object.hasOwn(a,"lumina");)a=Object.getPrototypeOf(a);(function(e){const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(e,t){r.setAttribute.call(this.el,e,t)},t.removeAttribute=function(e){r.removeAttribute.call(this.el,e)},nh(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}))})(a),!r._LitConstructor&&(r._LitConstructor=i,customElements.define(o,i)),i.lazy=this;const l=document.createElement(o);i.lazy=void 0,this._litElement=l,this._store=l,this._pendingAttributes.forEach((e=>{const t=this.getAttribute(e);l.attributeChangedCallback(e,null,t)})),Object.entries(s).forEach(oh,l);const c=this.isConnected;(c||this._ancestorLoad)&&(null==(t=l.connectedCallback)||t.call(l),c||l.disconnectedCallback())}addController(){}requestUpdate(){var e;null==(e=this._litElement)||e.requestUpdate()}},sh.lumina=!0;var ah={};var lh,ch=Symbol.for("controller");function uh(e){lh!==e&&(lh=e,queueMicrotask((()=>{lh===e&&(lh=void 0)})))}function dh(e){return lh}var hh,ph=[];function fh(e){if(void 0===e)return void(ph=[]);const t=ph.indexOf(e);ph=-1===t?[...ph,e]:ph.slice(0,t+1),queueMicrotask((()=>{ph=[]}))}function gh(){return ph}var mh,vh=async(e,t)=>{const r=_h(e);if(void 0===r)return e;if(await r.ready,"function"==typeof t){0;const e=r.watchExports((r=>t(r,e)))}return r.exports},yh=async e=>{const t=_h(e);return await t.ready,t},_h=e=>{const t=dh().manager.internals.resolveExports(e);if(void 0!==t)return t;if((e=>"object"==typeof e&&null!==e&&(ch in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e))(e))return e;const r=function(){const e=hh;return hh=void 0,e}();return void 0!==r?r:void 0},wh={readOnly:!1},bh=new WeakMap;mh=ch;var Sh=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Nd,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[mh]=!0,this.ready=this._ready.promise,this._exports=Ih(this),this._exportWatchers=new Set;const t=e??dh(new.target.name);this.component=t,this.component.addController(this),void 0===this.component.manager||(fh(this),queueMicrotask((()=>this.catchUpLifecycle())))}catchUpLifecycle(){const{manager:e}=this.component;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e._loadCalled&&this.triggerLoad().then((()=>{e.loadedCalled&&this.triggerLoaded()})).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(Bd),this.connectedCalled&&!1!==this.assignedProperty&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?Ih(e):e,this._exportWatchers.forEach(Bd)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>{this._exportWatchers.delete(t)}}get use(){return uh(this.component),vh}get useRef(){return uh(this.component),yh}get useRefSync(){return uh(this.component),_h}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&Bd(e.hostConnected,e),this._callbacks.hostConnected.forEach(Bd),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Bd(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(Bd),this._lifecycleCleanups.forEach(Bd),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await qd(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(qd)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&Bd(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(Bd),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&Bd(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach(Ah,e)}triggerUpdated(e){const t=this;t.hostUpdated&&Bd(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach(Ah,e)}triggerDestroy(){const e=this;e.hostDestroy&&Bd(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(Bd)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle((()=>e.hostLifecycle())),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){uh(this.component);const t=Bd(e);(Array.isArray(t)?t:[t]).forEach((e=>{"function"==typeof e?this._lifecycleCleanups.push(e):"object"==typeof e&&"function"==typeof e.remove&&this._lifecycleCleanups.push(e.remove)}))}};function Ah(e){Bd(e,void 0,this)}var Eh=Sh;function Ih(e){if("object"!=typeof e&&"function"!=typeof e||null===e)return e;const t=new Proxy(e,{get(e,r,n){if(!kh.has(r)||!(r in e)||e[r]!==t){if(r in e||r in Promise.prototype||"symbol"==typeof r)return"function"==typeof e?e[r]:Reflect.get(e,r,n);0}},set:(e,t,r,n)=>Reflect.set(e,t,r,n)});return t}var kh=new Set(["exports","_exports"]);var Oh=void 0;function Th(){Array.from((null==Oh?void 0:Oh.entries())??[]).forEach((([e,{callbacks:t}])=>{const r=Object.keys(e);t.forEach((e=>e(r)))})),Oh=void 0}function Ch(e,t,r){var n;const s=t;const i=e.manager.internals;(n=i.allWatchers)[s]??(n[s]=[]);const o=i.allWatchers[s],a=r,l=(e,t,r)=>Bd(a,null,e,t,r);return o.push(l),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1)}}var xh=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const e=this.component.manager.internals;Object.entries(e.members).forEach((([t,[r]])=>{var n;2048&r&&((n=e.setters)[t]??(n[t]=[]),e.setters[t].push(e.readonlySetter))}))},this.trackedValue=Ph,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(e,t,r)=>{if(wh.readOnly)return e;throw new Error(`Cannot assign to read-only property "${r}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(e)}"`)},this.component=e}firePropTrackers(e,t){const r=this.keyTrackers;this.trackedValue=Ph,this.keyTrackers=[],r.forEach((r=>r(e,t)))}getSetProxy(e){const t=this.component,r=t.constructor.prototype;if(this._getSetProxy(r,e,"class"),t.manager.isLit)return;const n=t.el.constructor.prototype;r!==n&&this._getSetProxy(n,e,"html")}_getSetProxy(e,t,r){const n=((e,t)=>{var r,n;return null==(n=null==(r=e.manager.internals.members)?void 0:r[t])?void 0:n[0]})(this.component,t);let s;do{s=Object.getOwnPropertyDescriptor(e,t)}while(!s&&(e=Object.getPrototypeOf(e)));if(!s)return;const i=s.get,o=s.set,a=jh in i,l=jh in o;if(a&&l)return;const c=!a,u=!l,d=c?function(){let e=i.call(this);const r=bh.get(this);if(void 0===r)return e;const n=r.manager.internals;e=n.accessorGetter[t](e,t);const s=n.getters[t]??Rh;for(let r=0;r<s.length;r++)e=s[r](e,t);return e}:i,h=u?function(e){var r;const s=i.call(this),a=bh.get(this);if(void 0===a)return void o.call(this,e);let l=a.manager.isLit?e??void 0:function(e,t=8){return null==e||"object"==typeof e||"function"==typeof e?e:4&t?"false"!==e&&(""===e||!!e):2&t?Number.parseFloat(e):1&t?String(e):e}(e,n);const c=a.manager.internals;if(l===s)o.call(this,l);else{const e=c.setters[t]??Rh;for(let r=0;r<e.length&&(l=e[r](l,s,t),l!==s);r++);l=c.accessorSetter[t](l,s,t),o.call(this,l),l!==s&&(null==(r=c.enabledWatchers[t])||r.forEach((e=>e(l,s,t))))}c.keyTrackers.length>0&&(null==c||c.firePropTrackers(t,e))}:o;c&&(d[jh]=!0),u&&(h[jh]=!0),Object.defineProperty(e,t,{...s,get:d,set:h})}markExports(e,t){("object"==typeof t&&null!==t||"function"==typeof t)&&this._exports.set(t,e)}resolveExports(e){if("object"==typeof e&&null!==e||"function"==typeof e)return this._exports.get(e)}},Rh=[],jh=Symbol(),Ph=Symbol();function Dh(e=[dh(),...gh()],t,r){const n=Array.isArray(e)?e:[e];let s=n.length+1;const i=e=>{s-=1,void 0!==e&&(s=Math.min(s,0)),0===s&&t(e)};n.forEach((e=>function(e,t,r){const n=Object.keys(e),s=n.length;void 0===Oh&&queueMicrotask(Th),Oh??(Oh=new Map);let i=Oh.get(e);return void 0===i&&(i={callbacks:[],keyCount:s},Oh.set(e,i)),i.keyCount!==s&&(i.callbacks.forEach((e=>e(n))),i.callbacks=[],i.keyCount=s),i.callbacks.push((n=>{const i=e=>Bd(t,null,e),o=n[s];void 0===o?i(void 0):e[o]===r?i(o):i(void 0)})),r}(e,(t=>i(void 0===t?void 0:{key:t,host:e,isReactive:!1})),r)));const o=n.find((e=>"manager"in e&&"object"==typeof e.manager&&e.manager.component===e));return o&&function(e,t,r){const n=e.manager.internals;n.trackedValue!==Ph&&n.trackedValue!==r&&n.firePropTrackers(void 0,void 0),0===n.keyTrackers.length&&queueMicrotask((()=>n.firePropTrackers(void 0,void 0))),n.trackedValue=r,n.keyTrackers.push(((e,n)=>Bd(t,void 0,r===n?e:void 0)))}(o,(e=>i(void 0===e?void 0:{key:e,host:o,isReactive:!0})),r),r}var Uh=class extends Eh{constructor(e,t){const r="addController"in e,n=new Set;const s=e;if(s.addController=function(t){var r;n.add(t),!(ch in t)&&e.renderRoot&&e.el.isConnected&&(null==(r=t.hostConnected)||r.call(t))},s.removeController=function(e){var t;n.delete(e),null==(t=e.controllerRemoved)||t.call(e)},!r){const r=t??e.constructor.__forceUpdate;s.requestUpdate=()=>r(e)}super(e),this.internals=new xh(this.component),this.destroyed=!1,this._updatePromise=new Nd,this._originalLifecycles={},this.isLit=r,this.component.manager=this,function(e,t){var r;if(t){const t=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(t,(([e,t])=>t.noAccessor?void 0:[e,[(t.readOnly?2048:0)|(t.state?32:16)]])).filter(th))}else{const t=e.constructor,n=(null==(r=t.__registerControllers)?void 0:r.call(t,e))??void 0;if(t.__registerControllers=void 0,"object"!=typeof n)throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(n).filter((([e,[t]])=>!!(63&t))))}}(e,r),this._controllers=n,this.exports=void 0,this.hasDestroy=Lh in this.component&&"function"==typeof this.component.destroy,this._bindLifecycleMethods();const i=this.internals;Object.keys(i.members).forEach((e=>{i.accessorGetter[e]=$h,i.accessorSetter[e]=$h,i.getSetProxy(e)})),r?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(i.enableReadonly),uh(e),bh.set(e.el,e),bh.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,r=e.el===e;this._originalLifecycles={_connectedCallback:t||r?void 0:e.connectedCallback,_disconnectedCallback:t||r?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const n=this._connectedCallback.bind(this),s=this._disconnectedCallback.bind(this),i=this._update.bind(this),o=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:n,hostDisconnected:s,hostUpdate:i,hostUpdated:o}):(e.connectedCallback=n,e.disconnectedCallback=s,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=i,e.componentDidUpdate=o),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var e,t;if(this.destroyed){const e=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${e} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${Lh} prop.`)}void 0!==this._autoDestroyTimeout&&clearTimeout(this._autoDestroyTimeout);const r=this.internals;r.enabledWatchers=r.allWatchers,Th(),null==(e=r.enableReadonly)||e.call(r),this._controllers.forEach(Mh),null==(t=this._originalLifecycles._connectedCallback)||t.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(Fh),null==(e=this._originalLifecycles._disconnectedCallback)||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,Bh)),await(null==(e=this._originalLifecycles._load)?void 0:e.call(this.component)),this.hasDestroy&&Ch(this.component,Lh,(()=>this._setAutoDestroyTimeout()))}_loaded(){var e;this._controllers.forEach(qh),null==(e=this._originalLifecycles._loaded)||e.call(this.component)}_update(){var e;const t=this.component;return this._controllers.forEach(zh,t.$changes),null==(e=this._originalLifecycles._willUpdate)?void 0:e.call(this.component)}_updated(){var e;const t=this.component;if(this._controllers.forEach(Vh,t.$changes),null==(e=this._originalLifecycles._updated)||e.call(this.component),this.isLit)t.$changes=new Map;else{const e=this._updatePromise;this._updatePromise=new Nd,e.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(Wh),this._controllers.clear(),await(null==(e=this._originalLifecycles._destroy)?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(void 0!==this._autoDestroyTimeout&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>{this.destroy().catch(console.error)};this._autoDestroyTimeout=function(e,t){const r=t/eh;let n=0;const s=setInterval((()=>{n+=r,n>=t&&(clearInterval(s),e())}),r);return s}(e,Nh)}}},Lh="autoDestroyDisabled",Nh=1e3,$h=e=>e;function Mh(e){"triggerConnected"in e?e.triggerConnected():Bd(e.hostConnected,e)}function Fh(e){"triggerDisconnected"in e?e.triggerDisconnected():Bd(e.hostDisconnected,e)}async function Bh(e){"triggerLoad"in e?await e.triggerLoad():await qd(e.hostLoad,e)}function qh(e){"triggerLoaded"in e?e.triggerLoaded():Bd(e.hostLoaded,e)}function zh(e){"triggerUpdate"in e?e.triggerUpdate(this):Bd(e.hostUpdate,e,this)}function Vh(e){"triggerUpdated"in e?e.triggerUpdated(this):Bd(e.hostUpdated,e,this)}function Wh(e){"triggerDestroy"in e?e.triggerDestroy():Bd(e.hostDestroy,e)}var Gh=e=>t=>Hh(t,e),Hh=(e=>(...t)=>{const r=gh(),n=new e(...t),s=n.exports;fh(r.at(-1));const i=n.component.manager.internals;i.markExports(n,s),n.watchExports((e=>i.markExports(n,e))),function(e){hh!==e&&(hh=e,queueMicrotask((()=>{hh===e&&(hh=void 0)})))}(n);return Dh([n.component,...r].reverse(),(e=>void 0===e?void 0:function(e,{host:t,key:r,isReactive:n},s){const i=t,o=i[r]!==e.exports,a=i[r]!==s,l=s!==e.exports;if(o&&!a&&l&&(i[r]=e.exports),t===e.component){if(n){const t=e.component.manager.internals;a&&t.markExports(e,i[r]),Ch(e.component,r,(r=>{r!==e.exports&&t.markExports(e,r)}))}e.assignedProperty=n?void 0:r}e.watchExports((()=>{var t;if(i[r]===e.exports)return;const n=e.component.manager;(null==(t=n.internals.setters[r])?void 0:t.includes(n.internals.readonlySetter))?function(e){wh.readOnly=!0;try{return e()}finally{wh.readOnly=!1}}((()=>{i[r]=e.exports})):i[r]=e.exports}))}(n,e,s)),s)})(class extends Sh{constructor(e,t){super(e);const r=this.exports;try{uh(this.component);const e=t(this.component,this),n=this.exports!==r;if(e instanceof Promise){n||this.setProvisionalExports(e);const t=e.then((e=>{this.exports=e,super.catchUpLifecycle()})).catch((e=>{this._ready.reject(e),console.error(e)}));this.onLoad((async()=>await t))}else(!n||void 0!==e)&&(this.exports=e),queueMicrotask((()=>super.catchUpLifecycle()))}catch(e){this._ready.reject(e),console.error(e)}}catchUpLifecycle(){}}),Jh=(e,t)=>new Kh(e,t),Kh=class extends Sh{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver((r=>{r.forEach((r=>{e.includes(r.attributeName)&&t.call(this.component,this.component.el.getAttribute(r.attributeName),r.oldValue,r.attributeName)}))}))}hostConnected(){this._attributes.forEach((e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)})),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},Yh=e=>(t={})=>(e=>Hh(void 0,e))(((r,n)=>{const s=Kd(r.el),i={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=r;function a(e){const t=n.exports,r=t._original??t,s=Zh(r,e);e&&(s._original=r),n.exports=s}return n.onLifecycle((()=>Zd(r.el,(()=>e("./assets")),(({t9nLocale:e,t9nStrings:t,lang:s})=>{const i={...t,_lang:s,_t9nLocale:e,_loading:!1};n.exports=i;const l=t.componentLabel;"string"==typeof l&&"label"in r&&null==r.label&&(r.label??(r.label=l)),a(o.messageOverrides)}),t.name))),"messageOverrides"in o&&n.onLifecycle((()=>Ch(o,"messageOverrides",a))),t.blocking?(n.setProvisionalExports(i,!1),n.ready):i}));function Zh(e,t){if(!t)return e;const r={...e};return Object.entries(t).forEach((([t,n])=>{r[t]="object"==typeof n?Zh(e[t],n):n??e[t]})),r}const Xh=globalThis,Qh=Xh.ShadowRoot&&(void 0===Xh.ShadyCSS||Xh.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ep=Symbol(),tp=new WeakMap;let rp=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==ep)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(Qh&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=tp.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&tp.set(t,e))}return e}toString(){return this.cssText}};const np=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[n+1]),e[0]);return new rp(r,e,ep)},sp=Qh?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return(e=>new rp("string"==typeof e?e:e+"",void 0,ep))(t)})(e):e,{is:ip,defineProperty:op,getOwnPropertyDescriptor:ap,getOwnPropertyNames:lp,getOwnPropertySymbols:cp,getPrototypeOf:up}=Object,dp=globalThis,hp=dp.trustedTypes,pp=hp?hp.emptyScript:"",fp=dp.reactiveElementPolyfillSupport,gp=(e,t)=>e,mp={toAttribute(e,t){switch(t){case Boolean:e=e?pp:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch{r=null}}return r}},vp=(e,t)=>!ip(e,t),yp={attribute:!0,type:String,converter:mp,reflect:!1,useDefault:!1,hasChanged:vp};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),dp.litPropertyMetadata??(dp.litPropertyMetadata=new WeakMap);let _p=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=yp){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,t);void 0!==n&&op(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){const{get:n,set:s}=ap(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:n,set(t){const i=null==n?void 0:n.call(this);null==s||s.call(this,t),this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??yp}static _$Ei(){if(this.hasOwnProperty(gp("elementProperties")))return;const e=up(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(gp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(gp("properties"))){const e=this.properties,t=[...lp(e),...cp(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(sp(e))}else void 0!==e&&t.push(sp(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),null==(e=this.constructor.l)||e.forEach((e=>e(this)))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),void 0!==this.renderRoot&&this.isConnected&&(null==(t=e.hostConnected)||t.call(e))}removeController(e){var t;null==(t=this._$EO)||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(Qh)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const r of t){const t=document.createElement("style"),n=Xh.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=r.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null==(e=this._$EO)||e.forEach((e=>{var t;return null==(t=e.hostConnected)?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null==(e=this._$EO)||e.forEach((e=>{var t;return null==(t=e.hostDisconnected)?void 0:t.call(e)}))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){var r;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(void 0!==s&&!0===n.reflect){const i=(void 0!==(null==(r=n.converter)?void 0:r.toAttribute)?n.converter:mp).toAttribute(t,n.type);this._$Em=e,null==i?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,t){var r,n;const s=this.constructor,i=s._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=s.getPropertyOptions(i),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null==(r=e.converter)?void 0:r.fromAttribute)?e.converter:mp;this._$Em=i,this[i]=o.fromAttribute(t,e.type)??(null==(n=this._$Ej)?void 0:n.get(i))??null,this._$Em=null}}requestUpdate(e,t,r){var n;if(void 0!==e){const s=this.constructor,i=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??vp)(i,t)||r.useDefault&&r.reflect&&i===(null==(n=this._$Ej)?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:n,wrapped:s},i){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,i??t??this[e]),!0!==s||void 0!==i)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===n&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e){const{wrapped:e}=r,n=this[t];!0!==e||this._$AL.has(t)||void 0===n||this.C(t,void 0,r,n)}}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),null==(e=this._$EO)||e.forEach((e=>{var t;return null==(t=e.hostUpdate)?void 0:t.call(e)})),this.update(r)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;null==(t=this._$EO)||t.forEach((e=>{var t;return null==(t=e.hostUpdated)?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((e=>this._$ET(e,this[e])))),this._$EM()}updated(e){}firstUpdated(e){}};_p.elementStyles=[],_p.shadowRootOptions={mode:"open"},_p[gp("elementProperties")]=new Map,_p[gp("finalized")]=new Map,null==fp||fp({ReactiveElement:_p}),(dp.reactiveElementVersions??(dp.reactiveElementVersions=[])).push("2.1.0");const wp=globalThis,bp=wp.trustedTypes,Sp=bp?bp.createPolicy("lit-html",{createHTML:e=>e}):void 0,Ap="$lit$",Ep=`lit$${Math.random().toFixed(9).slice(2)}$`,Ip="?"+Ep,kp=`<${Ip}>`,Op=document,Tp=()=>Op.createComment(""),Cp=e=>null===e||"object"!=typeof e&&"function"!=typeof e,xp=Array.isArray,Rp="[ \t\n\f\r]",jp=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Pp=/-->/g,Dp=/>/g,Up=RegExp(`>|${Rp}(?:([^\\s"'>=/]+)(${Rp}*=${Rp}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Lp=/'/g,Np=/"/g,$p=/^(?:script|style|textarea|title)$/i,Mp=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),Fp=Mp(1),Bp=Mp(2),qp=Symbol.for("lit-noChange"),zp=Symbol.for("lit-nothing"),Vp=new WeakMap,Wp=Op.createTreeWalker(Op,129);function Gp(e,t){if(!xp(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Sp?Sp.createHTML(t):t}class Hp{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let s=0,i=0;const o=e.length-1,a=this.parts,[l,c]=((e,t)=>{const r=e.length-1,n=[];let s,i=2===t?"<svg>":3===t?"<math>":"",o=jp;for(let t=0;t<r;t++){const r=e[t];let a,l,c=-1,u=0;for(;u<r.length&&(o.lastIndex=u,l=o.exec(r),null!==l);)u=o.lastIndex,o===jp?"!--"===l[1]?o=Pp:void 0!==l[1]?o=Dp:void 0!==l[2]?($p.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Up):void 0!==l[3]&&(o=Up):o===Up?">"===l[0]?(o=s??jp,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?Up:'"'===l[3]?Np:Lp):o===Np||o===Lp?o=Up:o===Pp||o===Dp?o=jp:(o=Up,s=void 0);const d=o===Up&&e[t+1].startsWith("/>")?" ":"";i+=o===jp?r+kp:c>=0?(n.push(a),r.slice(0,c)+Ap+r.slice(c)+Ep+d):r+Ep+(-2===c?t:d)}return[Gp(e,i+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),n]})(e,t);if(this.el=Hp.createElement(l,r),Wp.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=Wp.nextNode())&&a.length<o;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith(Ap)){const t=c[i++],r=n.getAttribute(e).split(Ep),o=/([.?@])?(.*)/.exec(t);a.push({type:1,index:s,name:o[2],strings:r,ctor:"."===o[1]?Xp:"?"===o[1]?Qp:"@"===o[1]?ef:Zp}),n.removeAttribute(e)}else e.startsWith(Ep)&&(a.push({type:6,index:s}),n.removeAttribute(e));if($p.test(n.tagName)){const e=n.textContent.split(Ep),t=e.length-1;if(t>0){n.textContent=bp?bp.emptyScript:"";for(let r=0;r<t;r++)n.append(e[r],Tp()),Wp.nextNode(),a.push({type:2,index:++s});n.append(e[t],Tp())}}}else if(8===n.nodeType)if(n.data===Ip)a.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(Ep,e+1));)a.push({type:7,index:s}),e+=Ep.length-1}s++}}static createElement(e,t){const r=Op.createElement("template");return r.innerHTML=e,r}}function Jp(e,t,r=e,n){var s,i;if(t===qp)return t;let o=void 0!==n?null==(s=r._$Co)?void 0:s[n]:r._$Cl;const a=Cp(t)?void 0:t._$litDirective$;return(null==o?void 0:o.constructor)!==a&&(null==(i=null==o?void 0:o._$AO)||i.call(o,!1),void 0===a?o=void 0:(o=new a(e),o._$AT(e,r,n)),void 0!==n?(r._$Co??(r._$Co=[]))[n]=o:r._$Cl=o),void 0!==o&&(t=Jp(e,o._$AS(e,t.values),o,n)),t}let Kp=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,n=((null==e?void 0:e.creationScope)??Op).importNode(t,!0);Wp.currentNode=n;let s=Wp.nextNode(),i=0,o=0,a=r[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new Yp(s,s.nextSibling,this,e):1===a.type?t=new a.ctor(s,a.name,a.strings,this,e):6===a.type&&(t=new tf(s,this,e)),this._$AV.push(t),a=r[++o]}i!==(null==a?void 0:a.index)&&(s=Wp.nextNode(),i++)}return Wp.currentNode=Op,n}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}},Yp=class e{get _$AU(){var e;return(null==(e=this._$AM)?void 0:e._$AU)??this._$Cv}constructor(e,t,r,n){this.type=2,this._$AH=zp,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cv=(null==n?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Jp(this,e,t),Cp(e)?e===zp||null==e||""===e?(this._$AH!==zp&&this._$AR(),this._$AH=zp):e!==this._$AH&&e!==qp&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>xp(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==zp&&Cp(this._$AH)?this._$AA.nextSibling.data=e:this.T(Op.createTextNode(e)),this._$AH=e}$(e){var t;const{values:r,_$litType$:n}=e,s="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=Hp.createElement(Gp(n.h,n.h[0]),this.options)),n);if((null==(t=this._$AH)?void 0:t._$AD)===s)this._$AH.p(r);else{const e=new Kp(s,this),t=e.u(this.options);e.p(r),this.T(t),this._$AH=e}}_$AC(e){let t=Vp.get(e.strings);return void 0===t&&Vp.set(e.strings,t=new Hp(e)),t}k(t){xp(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of t)s===r.length?r.push(n=new e(this.O(Tp()),this.O(Tp()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,t){var r;for(null==(r=this._$AP)||r.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cv=e,null==(t=this._$AP)||t.call(this,e))}};class Zp{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,n,s){this.type=1,this._$AH=zp,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=zp}_$AI(e,t=this,r,n){const s=this.strings;let i=!1;if(void 0===s)e=Jp(this,e,t,0),i=!Cp(e)||e!==this._$AH&&e!==qp,i&&(this._$AH=e);else{const n=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=Jp(this,n[r+o],t,o),a===qp&&(a=this._$AH[o]),i||(i=!Cp(a)||a!==this._$AH[o]),a===zp?e=zp:e!==zp&&(e+=(a??"")+s[o+1]),this._$AH[o]=a}i&&!n&&this.j(e)}j(e){e===zp?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}let Xp=class extends Zp{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===zp?void 0:e}},Qp=class extends Zp{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==zp)}};class ef extends Zp{constructor(e,t,r,n,s){super(e,t,r,n,s),this.type=5}_$AI(e,t=this){if((e=Jp(this,e,t,0)??zp)===qp)return;const r=this._$AH,n=e===zp&&r!==zp||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==zp&&(r===zp||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;"function"==typeof this._$AH?this._$AH.call((null==(t=this.options)?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}}let tf=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Jp(this,e)}};const rf=wp.litHtmlPolyfillSupport;null==rf||rf(Hp,Yp),(wp.litHtmlVersions??(wp.litHtmlVersions=[])).push("3.3.0");const nf=globalThis;let sf=class extends _p{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,r)=>{const n=(null==r?void 0:r.renderBefore)??t;let s=n._$litPart$;if(void 0===s){const e=(null==r?void 0:r.renderBefore)??null;n._$litPart$=s=new Yp(t.insertBefore(Tp(),e),e,void 0,r??{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null==(e=this._$Do)||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null==(e=this._$Do)||e.setConnected(!1)}render(){return qp}};var of;sf._$litElement$=!0,sf.finalized=!0,null==(of=nf.litElementHydrateSupport)||of.call(nf,{LitElement:sf});const af=nf.litElementPolyfillSupport;null==af||af({LitElement:sf}),(nf.litElementVersions??(nf.litElementVersions=[])).push("4.2.0");const lf={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},cf=e=>(...t)=>({_$litDirective$:e,values:t});let uf=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};const df=cf(class extends uf{constructor(e){var t;if(super(e),e.type!==lf.ATTRIBUTE||"class"!==e.name||(null==(t=e.strings)?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var r,n;if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&(null==(r=this.nt)||!r.has(e))&&this.st.add(e);return this.render(t)}const s=e.element.classList;for(const e of this.st)e in t||(s.remove(e),this.st.delete(e));for(const e in t){const r=!!t[e];r===this.st.has(e)||null!=(n=this.nt)&&n.has(e)||(r?(s.add(e),this.st.add(e)):(s.remove(e),this.st.delete(e)))}return qp}}),hf="important",pf=" !"+hf,ff=cf(class extends uf{constructor(e){var t;if(super(e),e.type!==lf.ATTRIBUTE||"style"!==e.name||(null==(t=e.strings)?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,r)=>{const n=e[r];return null==n?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(e,[t]){const{style:r}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?r.removeProperty(e):r[e]=null);for(const e in t){const n=t[e];if(null!=n){this.ft.add(e);const t="string"==typeof n&&n.endsWith(pf);e.includes("-")||t?r.setProperty(e,t?n.slice(0,-11):n,t?hf:""):r[e]=n}}return qp}});var gf,mf=(e="",t={},r=dh())=>{const n={emit:n=>{if(""===e&&(Th(),0))throw new Error("Unable to resolve event name from property name");const s=new CustomEvent(e,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(s),s}};return""===e&&Dh(void 0,(t=>{e=t.key}),n),n},vf=mf.bind(null,""),yf=()=>{},_f=(gf=class extends sf{constructor(){var e,t,r;super(),this.el=this.constructor.lazy??this,this.manager=((e,t)=>new Uh(e,t))(this),this._postLoad=(null==(e=this.constructor.lazy)?void 0:e._postLoad)??new Nd,this._offspring=(null==(t=this.constructor.lazy)?void 0:t._offspring)??[],this._postLoaded=(null==(r=this.constructor.lazy)?void 0:r._postLoaded)??new Nd,this._enableUpdating=this.enableUpdating,this.enableUpdating=yf;const n=gf.prototype.shouldUpdate;this.shouldUpdate!==n&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=n)}static finalizeStyles(e){var t;const r=super.finalizeStyles(e),n=this.shadowRootOptions===ah;return void 0===(null==(t=this.runtime)?void 0:t.commonStyles)||n?r:[this.runtime.commonStyles,...r]}static createProperty(e,t){const r="number"==typeof t?t:Array.isArray(t)?t[0]:0,n=Array.isArray(t)?t[1]:void 0;super.createProperty(e,{attribute:!!(1&r&&"string"==typeof e)&&Xd(e),reflect:!!(2&r),type:4&r?Boolean:8&r?Number:void 0,state:!!(16&r),readOnly:!!(32&r),noAccessor:!!(64&r),...n})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const e=!this.manager.connectedCalled;super.connectedCallback(),e&&queueMicrotask((()=>this._load().catch((e=>{this._postLoaded.reject(e),setTimeout((()=>{throw e}))}))))}createRenderRoot(){const e=this.el.shadowRoot,t=this.constructor,r=t.shadowRootOptions,n=e??(r===ah?this.el:this.el.attachShadow(r));if(Object.defineProperty(this,"shadowRoot",{value:n}),e)return sf.prototype.createRenderRoot.call(this),e;if(this.isConnected){const e=n.getRootNode();e.adoptedStyleSheets=[...e.adoptedStyleSheets,...t.elementStyles.map((e=>"styleSheet"in e?e.styleSheet:e))]}return n}async _load(){const e=this.el._ancestorLoad??rh(this.el);e&&await e,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const t=this._offspring.filter((e=>{var t;return!(null!=(t=e.manager)&&t.loadedCalled)}));t.length&&await Promise.allSettled(t.map((async e=>await e.componentOnReady()))),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(e){var t;return this.$changes=e,(null==(t=this._originalShouldUpdate)?void 0:t.call(this,e))??!0}listen(e,t,r){const n=(null==t?void 0:t.bind(this))??t;this.manager.onLifecycle((()=>(this.el.addEventListener(e,n,r),()=>this.el.removeEventListener(e,n,r))))}listenOn(e,t,r,n){const s=(null==r?void 0:r.bind(this))??r;this.manager.onLifecycle((()=>(e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n))))}async componentOnReady(){return await this._postLoaded.promise,this}},gf.lumina=!0,gf);_f.$createEvent=mf;var wf=e=>"object"==typeof e&&null!=e?df(e):e,bf=e=>"object"==typeof e&&null!=e?ff(e):e,Sf=zp;function Af(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}var Ef={toAttribute:e=>!0===e?"":!1===e?null:e};const If={rtl:"calcite--rtl"},kf={reposition:100};function Of(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains("calcite-mode-dark")||e.contains("calcite-mode-auto")&&t?"dark":"light",n=e=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:e}})),s=e=>{i!==e&&n(e),i=e};let i=r();n(i),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>s(e.matches?"dark":"light"))),new MutationObserver((()=>s(r()))).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const Tf=globalThis.calciteConfig,Cf=(null==Tf?void 0:Tf.focusTrapStack)||[],xf=(null==Tf?void 0:Tf.logLevel)||"info",Rf="3.1.0";const jf=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;jf()&&("interactive"===document.readyState?Of():document.addEventListener("DOMContentLoaded",(()=>Of()),{once:!0})),function(){if(Tf&&Tf.version)return;console.info(`Using Calcite Components ${Rf} [Date: 2025-03-26, Revision: d5f75fd64]`);const e=Tf||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:Rf,writable:!1}),globalThis.calciteConfig=e}();const Pf=function(e){let t;const r=e=>{var r;t=new URL(e,(null==(r=globalThis.location)?void 0:r.href)||void 0).href},n={...e,getAssetPath(e){var r;const n=new URL(e,t);return n.origin!==(null==(r=globalThis.location)?void 0:r.origin)?n.href:n.pathname},setAssetPath:r,customElement(e,t){t.runtime=n,t.tagName=e,customElements.get(e)||customElements.define(e,t)}};return r(e.defaultAssetPath),n}({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.1.0/",hydratedAttribute:"calcite-hydrated"}),{customElement:Df,getAssetPath:Uf,setAssetPath:Lf}=Pf;let Nf=!1;let $f;function Mf(){Nf||(e=>{Nf=!0,Lf(e)})(_a(dc($f)))}$f="components/assets";const Ff=Symbol("widget"),Bf=Symbol("widget-test-data"),qf=[],zf={},Vf=new WeakMap;function Wf(e,t){let r=t.children;if(null!=r&&r.length)for(let t=0;t<r.length;++t)r[t]=Wf(e,r[t]);else r=qf;const n=t.vnodeSelector;if(Kf(n)){const s=t.properties||zf,i=s.key||n,o={key:i,afterCreate:Gf,afterUpdate:Hf,afterRemoved:Jf,parentWidget:e,widgetConstructor:n,widgetProperties:{...s,key:i,children:r}};return{vnodeSelector:n.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return t}function Gf(e,t,r,{parentWidget:n,widgetConstructor:s,widgetProperties:i}){var o;const a=new s(i);a.container=e,Vf.set(e,a),null==(o=a.afterCreate)||o.call(a,a,e),n.addHandles(An((()=>Jf(e)))),queueMicrotask((()=>{a[Bf].projector.renderNow()}))}function Hf(e,t,r,{widgetProperties:n}){var s;const i=Vf.get(e);i&&(i.set(n),null==(s=i.afterUpdate)||s.call(i,i,e))}function Jf(e){var t;const r=Vf.get(e);r&&(null==(t=r.afterRemoved)||t.call(r,r,e),r.destroy(),Vf.delete(e))}function Kf(e){return"function"==typeof e&&e[Ff]}const Yf=new Set;var Zf;let Xf=0;function Qf(e,t){const r=Object.prototype.hasOwnProperty;for(const n in t)r.call(t,n)&&r.call(e,n)&&(null!=e[n]&&null!=t[n]&&"object"==typeof e[n]&&"object"==typeof t[n]?Qf(e[n],t[n]):e[n]=t[n]);return e}const eg=(e=>{let t;const r={...Dd,...e},n=(e=>({...Ud,...e}))(r),s=n.performanceLogger;let i,o=!0,a=!1;const l=[],c=[],u=(e,i,o)=>{var a;let u;n.eventHandlerInterceptor=(e,n,i,o)=>function(e){let n;s("domEvent",e);const i=((e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r})(e.currentTarget,u.domNode),o=i.some((e=>{var t;return customElements.get(null==(t=null==e?void 0:e.tagName)?void 0:t.toLowerCase())}));if(e.eventPhase!==Event.CAPTURING_PHASE&&o){const t=e.composedPath(),r=t.slice(t.indexOf(e.currentTarget),t.indexOf(u.domNode)).reverse();n=Ld(u.getLastRender(),r,!0)}else i.reverse(),n=Ld(u.getLastRender(),i);let a;return n&&(a=r.handleInterceptedEvent(t,n,this,e)),s("domEventProcessed",e),a},null==(a=r.postProcessProjectionOptions)||a.call(r,n);const d=o();u=e(i,d,n),n.eventHandlerInterceptor=void 0,l.push(u),c.push(o),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(u,d)};let d=()=>{if(i=void 0,o){o=!1,s("renderStart",void 0);for(let e=0;e<l.length;e++){const t=c[e]();s("rendered",void 0);try{l[e].update(t)}catch(e){console.error(e)}s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(d=r.modifyDoRenderImplementation(d,l,c)),t={renderNow:d,scheduleRender:()=>{i||a||(i=requestAnimationFrame(d))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(e,t)=>{u(xd,e,t)},insertBefore:(e,t)=>{u(Rd,e,t)},merge:(e,t)=>{u(jd,e,t)},replace:(e,t)=>{u(Pd,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),l.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(e,n,s,i)=>{const o=null==t?void 0:t(e,n,s,i),a=r.test(e);if(!((e=e.replace(r,"")).toLowerCase()in s)||a){const t=e[2].toLowerCase()+e.slice(3),r=e=>null==o?void 0:o.call(s,e);s.addEventListener(t,r,a);const n=()=>s.removeEventListener(t,r,a),l=i.afterRemoved;i.afterRemoved=e=>{null==l||l(e),n()}}return o}},handleInterceptedEvent(e,t,r,n){const{eventPhase:s,type:i}=n,o=s===Event.CAPTURING_PHASE;let a=`on${i}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${i[0].toUpperCase()}${i.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Xu(),e.scheduleRender(),l[a].call(l.bind||r,n))}});let tg=!1,rg=class extends(mc.EsriPromiseMixin(_l.EventedAccessor)){constructor(e,t){super(e,t),this._attached=!1,this._projector=eg,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Bs((async()=>{var e;if(null!=(e=this._messageBundleProps)&&e.length){const e=await Promise.allSettled(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{if(this.destroyed)return;let r=await sc(e);this.uiStrings&&Object.keys(this.uiStrings)&&(r=Qf(Jr(r),this.uiStrings)),this[t]=r})));if(this.destroyed)return;for(const t of e)"rejected"===t.status&&an.getLogger(this).error("widget-intl:locale-error",this.declaredClass,t.reason)}await this.loadLocale()})),Mf();const r="esri-widget-uid-"+function(){if(Bc)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}(),n=this.render.bind(this);this._trackingTarget=new Zs((()=>{this.autoRenderingEnabled&&this.scheduleRender()}));const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),i=()=>{var e,t;if(!this._readyForTrueRender||this.destroyed)return null;const i=n()??s(),o=i.properties??(i.properties={});if(o.key??(o.key=r),Kf(i.vnodeSelector)){if(!this.visible)return s()}else this.visible?o.styles||(o.styles={}):(o.class="",o.styles={display:"none"}),(e=o.styles).display??(e.display="");let a=0;return null==(t=i.children)||t.forEach((e=>{var t;Kf(e.vnodeSelector)||(e.properties??(e.properties={}),(t=e.properties).key??(t.key=`${this.id}--${a++}`))})),Wf(this,i)};this.render=()=>{if(tg)return i();let e=function(e){return Zu.get(e)}(this)??null;if(e)return e;this._trackingTarget.clear(),tg=!0;try{e=ss(this._trackingTarget,i)}catch(e){throw an.getLogger(this).error(e),e}finally{tg=!1}return e&&function(e,t){Zu.set(e,t)}(this,e),e};const o=this.beforeFirstRender();o?this._resourcesFetch=o.then((()=>{this._readyForTrueRender=!0,this._postInitialize()})):(this._resourcesFetch=Promise.resolve().then((()=>{this._postInitialize()})),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),function(e){Yf.add(e),e.finally((()=>Yf.delete(e)))}(this._resourcesFetch)}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){var e;const t=this.loadDependencies();return null!=(e=this._messageBundleProps)&&e.length||t?Promise.all([t,this._loadLocale()]).then((()=>{})).catch(Us):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(_n(this._trackingTarget),_n(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,Qu(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return function(e){return"string"==typeof e?document.getElementById(e):e??null}(e)}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){var e;return this._get("id")||(null==(e=this.container)?void 0:e.id)||Date.now().toString(16)+"-widget-"+Xf++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Zf=Ff,Bf)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Qu(this),this._projector.scheduleRender())}classes(...e){return ed.apply(this,e)}renderNow(){Qu(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this.addHandles(Uc((()=>this.viewModel),((e,t)=>{t&&this.removeHandles("delegated-events"),e&&Ts(e)&&this.addHandles(this._delegatedEventNames.map((t=>xs(e,t,(e=>{this.emit(t,e)})))),"delegated-events")}),Fc)),this.postInitialize();const t=async()=>{await this._loadLocale().catch(Us),this.scheduleRender()};this.addHandles([Rl(t),Uc((()=>this.uiStrings),t),Lc((()=>this.container),(e=>{this.destroyed||this._attach(e)}),{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var t;this._attached&&(this._projector.detach(this.render),this._attached=!1),null==(t=null==e?void 0:e.parentNode)||t.removeChild(e)}};rg[Zf]=!0,rg.vnodeSelector="div",dn([Wi()],rg.prototype,"_readyForTrueRender",void 0),dn([Wi({value:null})],rg.prototype,"container",null),dn([function(...e){if(3!==e.length||"string"!=typeof e[1])return 1===e.length&&"[object Function]"===qc.call(e[0])?zc(e[0]):1===e.length&&"string"==typeof e[0]?function(e){return(t,r)=>{Mn(t,e).cast=t[r]}}(e[0]):void 0}("container")],rg.prototype,"castContainer",null),dn([Wi()],rg.prototype,"icon",null),dn([Wi()],rg.prototype,"id",null),dn([Wi()],rg.prototype,"label",null),dn([Wi()],rg.prototype,"renderable",null),dn([Wi()],rg.prototype,"uiStrings",void 0),dn([Wi()],rg.prototype,"viewModel",void 0),dn([Wi({value:!0})],rg.prototype,"visible",null),dn([Wi()],rg.prototype,"key",void 0),dn([Wi()],rg.prototype,"children",void 0),dn([Wi()],rg.prototype,"afterCreate",void 0),dn([Wi()],rg.prototype,"afterUpdate",void 0),dn([Wi()],rg.prototype,"afterRemoved",void 0),rg=dn([So("esri.widgets.Widget")],rg);const ng=rg;function sg(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var ig=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},og=function(e,t){for(var r=0,n=e.length;r<n;r++){var s=e[r];Array.isArray(s)?og(s,t):null!=s&&!1!==s&&(s.hasOwnProperty("vnodeSelector")||(s=ig(s)),t.push(s))}};function ag(e,t,...r){return"function"!=typeof e||Kf(e)?function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(1===r.length&&"string"==typeof r[0])return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return og(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}}(e,t??null,...r):e(t,...r)}function lg(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"").startsWith("dark")}const cg="esri-identity-modal",ug={base:cg,info:`${cg}__info`,notice:`${cg}__notice`};let dg=class extends ng{constructor(e,t){super(e,t),this.container=document.createElement("div"),this.error=null,this.oAuthPrompt=!1,this.open=!1,this.signingIn=!1,this.server=null,this.resource=null,this._usernameInputNode=null,this._passwordInputNode=null,document.body.appendChild(this.container)}loadDependencies(){return function(e){var t;const r=[];for(const n of Object.keys(e))customElements.get(`calcite-${n}`)||r.push(null==(t=e[n])?void 0:t.call(e));return r.length>0?Promise.all(r):null}({button:()=>Promise.all([r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_component-BvRje-187d02"),r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-C51c3Lvs--95d0c5")]).then(r.bind(r,3345)),dialog:()=>Promise.all([r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_component-BvRje-187d02"),r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-B3QBcl-_--ae6afc")]).then(r.bind(r,77124)),input:()=>Promise.all([r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_component-BvRje-187d02"),r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-DOdgU1bk--f35545")]).then(r.bind(r,96071)),label:()=>r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-CzAZhvoY-D9QQeYC__js").then(r.bind(r,47789)),notice:()=>Promise.all([r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_component-BvRje-187d02"),r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-BJk3KwjJ-w4GqNxg-_js")]).then(r.bind(r,41413))})}get title(){var e;return null==(e=this.commonMessages)?void 0:e.auth.signIn}render(){var e;const{open:t,title:r,messages:n,signingIn:s,oAuthPrompt:i,server:o,resource:a,error:l}=this,{info:c,oAuthInfo:u,lblItem:d,invalidUser:h,noAuthService:p,lblUser:f,lblPwd:g,lblCancel:m,lblSigning:v,lblOk:y}=n;return ag("div",{class:this.classes(ug.base,"calcite-mode-"+(lg()?"dark":"light"))},ag("form",{bind:this,onsubmit:this._submit},ag("calcite-dialog",{bind:this,heading:r,modal:!0,open:t,outsideCloseDisabled:!0,scale:"s",widthScale:"s",onCalciteDialogClose:this._cancel,onCalciteDialogOpen:this._focusUsernameInput},ag("div",{class:ug.info},Yl(i?u:c,{server:o&&/\.arcgis\.com/i.test(o)?"ArcGIS Online":o,resource:`(${a||d})`})),l?ag("calcite-notice",{class:ug.notice,icon:"exclamation-mark-triangle",kind:"danger",open:!0},ag("div",{slot:"message"},null!=(e=l.details)&&e.httpStatus?h:p)):null,i?null:[ag("calcite-label",null,f,ag("calcite-input",{afterCreate:e=>this._usernameInputNode=e,autocomplete:"off",bind:this,name:"username",required:!0,spellcheck:!1,type:"text",value:""})),ag("calcite-label",null,g,ag("calcite-input",{afterCreate:e=>this._passwordInputNode=e,bind:this,name:"password",required:!0,type:"password",value:""}))],ag("calcite-button",{appearance:"outline",bind:this,onclick:this._cancel,slot:"footer-end",type:"button"},m),ag("calcite-button",{loading:!!s,slot:"footer-end",type:"submit"},s?v:y))))}_focusUsernameInput(){return sd((()=>this._usernameInputNode))}_cancel(){this._set("signingIn",!1),this.open=!1,this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){var t,r;e.preventDefault(),this._set("signingIn",!0);const n=this.oAuthPrompt?{}:{username:null==(t=this._usernameInputNode)?void 0:t.value,password:null==(r=this._passwordInputNode)?void 0:r.value};this.emit("submit",n)}};dn([Wi({readOnly:!0})],dg.prototype,"container",void 0),dn([Wi(),sg("esri/t9n/common")],dg.prototype,"commonMessages",void 0),dn([Wi()],dg.prototype,"error",void 0),dn([Wi(),sg("esri/identity/t9n/identity")],dg.prototype,"messages",void 0),dn([Wi()],dg.prototype,"oAuthPrompt",void 0),dn([Wi()],dg.prototype,"open",void 0),dn([Wi()],dg.prototype,"signingIn",void 0),dn([Wi()],dg.prototype,"server",void 0),dn([Wi({readOnly:!0})],dg.prototype,"title",null),dn([Wi()],dg.prototype,"resource",void 0),dg=dn([So("esri.identity.IdentityModal")],dg);const hg=dg,pg="esriJSAPIOAuth";class fg{constructor(e,t){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=t,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token))if(null==this.expires&&this.refreshToken)e=!0;else if(this.expires){const t=Date.now();this.expires>t&&(this.expires-t)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}return e}save(){if(!this.storage)return!1;const e=this._load(),t=this.oAuthInfo;if(null!=t&&t.authNamespace&&t.portalUrl){let r=e[t.authNamespace];r||(r=e[t.authNamespace]={}),this.appId||(this.appId=t.appId),r[t.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(pg,JSON.stringify(e))}catch(e){return console.warn(e),!1}return!0}return!1}destroy(){const e=this._load(),t=this.oAuthInfo;if(null!=t&&t.appId&&null!=t&&t.portalUrl&&(null==this.expires||this.expires>Date.now())&&(this.refreshToken||this.token)){const e=t.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",r=new FormData;if(r.append("f","json"),r.append("auth_token",this.refreshToken||this.token),r.append("client_id",t.appId),r.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),"function"==typeof navigator.sendBeacon)navigator.sendBeacon(e,r);else{const t=new XMLHttpRequest;t.open("POST",e),t.send(r)}}if(null!=t&&t.authNamespace&&t.portalUrl&&this.storage){const r=e[t.authNamespace];if(r){delete r[t.portalUrl];try{this.storage.setItem(pg,JSON.stringify(e))}catch(e){console.log(e)}}}t&&(t._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),t=this.oAuthInfo;if(null!=t&&t.authNamespace&&t.portalUrl){let r=e[t.authNamespace];r&&(r=r[t.portalUrl],r&&(this.appId=r.appId,this.codeVerifier=r.codeVerifier,this.expires=r.expires,this.refreshToken=r.refreshToken,this.ssl=r.ssl,this.stateUID=r.stateUID,this.token=r.token,this.userId=r.userId))}}_load(){let e={};if(this.storage){const t=this.storage.getItem(pg);if(t)try{e=JSON.parse(t)}catch(e){console.warn(e)}}return e}}var gg;fg.prototype.declaredClass="esri.identity.OAuthCredential";let mg=gg=class extends qo{constructor(e){super(e),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return gg.fromJSON(this.toJSON())}};dn([Wi({json:{write:!0}})],mg.prototype,"appId",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"authNamespace",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"expiration",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"flowType",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"forceLogin",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"forceUserId",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"locale",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"minTimeUntilExpiration",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"popup",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"popupCallbackUrl",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"popupWindowFeatures",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"portalUrl",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"preserveUrlHash",void 0),dn([Wi({json:{write:!0}})],mg.prototype,"userId",void 0),mg=gg=dn([So("esri.identity.OAuthInfo")],mg);const vg=mg;let yg=class extends qo{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};dn([Wi({json:{write:!0}})],yg.prototype,"adminTokenServiceUrl",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"currentVersion",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"hasPortal",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"hasServer",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"owningSystemUrl",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"owningTenant",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"server",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"shortLivedTokenValidity",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"tokenServiceUrl",void 0),dn([Wi({json:{write:!0}})],yg.prototype,"webTierAuth",void 0),yg=dn([So("esri.identity.ServerInfo")],yg);const _g=yg,wg={},bg=e=>{const t=new ta(e.owningSystemUrl).host,r=new ta(e.server).host,n=/.+\.arcgis\.com$/i;return n.test(t)&&n.test(r)},Sg=(e,t)=>!!(bg(e)&&t&&t.some((t=>t.test(e.server))));let Ag=null,Eg=null;try{Ag=window.localStorage,Eg=window.sessionStorage}catch{}class Ig extends _l{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin="null"!==window.origin?window.origin:window.location.origin,this._appUrlObj=aa(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^/]+\/[^/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^/]+).*/i,this._gwItem=/http.+\/items\/([^/]+).*/i,this._gwGroup=/http.+\/groups\/([^/]+).*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getPlatformSelfError=null,this._getOAuthLocationParams(),window.addEventListener("pageshow",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;if(t){for(const r of e){const e=this.findOAuthInfo(r.portalUrl);e&&t.splice(t.indexOf(e),1)}this.oAuthInfos=t.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),r=this._isServerRsrc(t);let n,s=this.findServerInfo(t),i=!0;s||(s=new _g,s.server=this._getServerInstanceRoot(t),r?s.hasServer=!0:(s.tokenServiceUrl=this._getTokenSvcUrl(t),s.hasPortal=!0),this.registerServers([s])),n=this._findCredential(t),n?(delete e.server,Object.assign(n,e),i=!1):(n=new kg({userId:e.userId,server:s.server??void 0,token:e.token,expires:e.expires,ssl:e.ssl,scope:r?"server":"portal"}),n.resources=[t],this.credentials.push(n)),n.emitTokenChange(!1),i||n.refreshServerTokens()}toJSON(){return Hr({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;"string"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,n=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new _g(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new vg(t))})),e.length&&this.registerOAuthInfos(e)}n&&n.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new kg(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){if(!e)return;let r;e=this._sanitizeUrl(e);const n=this._isServerRsrc(e)?"server":"portal";if(t){for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&t===s.userId&&s.scope===n){r=s;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===n){r=t;break}return r}getCredential(e,t){let r,n,s=!0;t&&(r=!!t.token,n=t.error,s=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const i=new AbortController,o=qs();if(t.signal&&Ls(t.signal,(()=>{i.abort()})),Ls(i,(()=>{o.reject(new un("identity-manager:user-aborted","ABORTED"))})),Ds(i))return o.promise;t.signal=i.signal;const a=this._isAdminResource(e),l=r?this.findCredential(e):null;let c;if(l&&n&&n.details&&498===n.details.httpStatus)l.destroy();else if(l)return c=new un("identity-manager:not-authorized","You are currently signed in as: '"+l.userId+"'. You do not have access to this resource: "+e,{error:n}),o.reject(c),o.promise;const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let d=this.findServerInfo(e);if(d)!d.hasPortal&&d.server&&d.owningSystemUrl&&this._hasSameServerInstance(d.server,d.owningSystemUrl)&&(d.hasPortal=!0),!d.hasServer&&this._isServerRsrc(e)&&(d._restInfoPms=this._getTokenSvcUrl(e),d.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return c=new un("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),o.reject(c),o.promise;d=new _g,d.server=this._getServerInstanceRoot(e),"string"==typeof t?(d.tokenServiceUrl=t,d.hasPortal=!0):(d._restInfoPms=t,d.hasServer=!0),this.registerServers([d])}return d.hasPortal&&void 0===d._selfReq&&(s||ma(d.tokenServiceUrl,this._appOrigin)||this._gwDomains.some((e=>e.tokenServiceUrl===d.tokenServiceUrl)))&&(d._selfReq={owningTenant:null==t?void 0:t.owningTenant,selfDfd:this._getPortalSelf(d.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,d,t,o,a)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,t,r){const n=this._rePortalTokenSvc.test(e.tokenServiceUrl),s=new ta(this._appOrigin),i=e.shortLivedTokenValidity;let o,a,l,c,u,d,h,p;t&&(p=this.tokenValidity||i||this._defaultTokenValidity,p>i&&i>0&&(p=i)),r&&(o=r.isAdmin,a=r.serverUrl,l=r.token,d=r.signal,h=r.ssl,e.customParameters=r.customParameters),o?c=e.adminTokenServiceUrl:(c=e.tokenServiceUrl,u=new ta(c.toLowerCase()),e.webTierAuth&&null!=r&&r.serverUrl&&!h&&"http"===s.scheme&&(ma(s.uri,c,!0)||"https"===u.scheme&&s.host===u.host&&"7080"===s.port&&"7443"===u.port)&&(c=c.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const f={query:{request:"getToken",username:null==t?void 0:t.username,password:null==t?void 0:t.password,serverUrl:a,token:l,expiration:p,referer:o||n?this._appOrigin:null,client:o?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,r),signal:d,...null==r?void 0:r.ioArgs};return n||(f.withCredentials=!1),Qa(c,f).then((r=>{const n=r.data;if(null==n||!n.token)return new un("identity-manager:authentication-failed","Unable to generate token");const s=e.server;return wg[s]||(wg[s]={}),t&&(wg[s][t.username]=t.password),n.validity=p,n}))}isBusy(){return!!this._busy}async checkSignInStatus(e){return(await this.checkAppAccess(e,"")).credential}checkAppAccess(e,t,r){let n=!1;return this.getCredential(e,{prompt:!1}).then((s=>{let i;const o={f:"json"};if("portal"===s.scope)if(t&&(this._doPortalSignIn(e)||null!=r&&r.force))i=s.server+"/sharing/rest/oauth2/validateAppAccess",o.client_id=t;else{if(!s.token)return{credential:s};i=s.server+"/sharing/rest"}else{if(!s.token)return{credential:s};i=s.server+"/rest/services"}return s.token&&(o.token=s.token),Qa(i,{query:o,authMode:"anonymous"}).then((e=>{if(!1===e.data.valid)throw new un("identity-manager:not-authorized",`You are currently signed in as: '${s.userId}'.`,e.data);return n=!!e.data.viewOnlyUserTypeApp,{credential:s}})).catch((e=>{var t;if("identity-manager:not-authorized"===e.name)throw e;const r=null==(t=e.details)?void 0:t.httpStatus;if(498===r)throw s.destroy(),new un("identity-manager:not-authenticated","User is not signed in.");if(400===r)throw new un("identity-manager:invalid-request");return{credential:s}}))})).then((e=>({credential:e.credential,viewOnly:n})))}setOAuthResponseHash(e){e&&("#"===e.charAt(0)&&(e=e.slice(1)),this._processOAuthPopupParams(la(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const n=qs(),s=()=>{var e;null==a||a.remove(),null==l||l.remove(),null==(e=this.dialog)||e.destroy(),this.dialog=a=l=null},i=()=>{s(),this._oAuthDfd=null,n.reject(new un("identity-manager:user-aborted","ABORTED"))};r.signal&&Ls(r.signal,(()=>{i()}));const o=new hg({open:!0,resource:this.getResourceName(e),server:t.server});this.dialog=o,this.emit("dialog-create");let a=o.on("cancel",i),l=o.on("submit",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((i=>{s();const o=new kg({userId:e.username,server:t.server??void 0,token:i.token,expires:null!=i.expires?Number(i.expires):null,ssl:!!i.ssl,isAdmin:r.isAdmin,validity:i.validity});n.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return n.promise}oAuthSignIn(e,t,r,n){this._oAuthDfd=qs();const s=this._oAuthDfd;let i;null!=n&&n.signal&&Ls(n.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&c()})),s.resUrl_=e,s.sinfo_=t,s.oinfo_=r;const o=r._oAuthCred;if(o.storage&&("authorization-code"===r.flowType||"auto"===r.flowType&&t.currentVersion>=8.4)){let e=crypto.getRandomValues(new Uint8Array(32));i=Oa(e),o.codeVerifier=i,e=crypto.getRandomValues(new Uint8Array(32)),o.stateUID=Oa(e),o.save()||(o.codeVerifier=i=null)}else o.codeVerifier=null;let a,l;this._getCodeChallenge(i).then((s=>{const i=!n||!1!==n.oAuthPopupConfirmation;if(!r.popup||!i)return void this._doOAuthSignIn(e,t,r,s);const o=new hg({oAuthPrompt:!0,server:t.server,open:!0});this.dialog=o,this.emit("dialog-create"),a=o.on("cancel",c),l=o.on("submit",(()=>{u(),this._doOAuthSignIn(e,t,r,s)}))}));const c=()=>{u(),this._oAuthDfd=null,s.reject(new un("identity-manager:user-aborted","ABORTED"))},u=()=>{var e;null==a||a.remove(),null==l||l.remove(),null==(e=this.dialog)||e.destroy(),this.dialog=null};return s.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach((e=>{e.destroy()})),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=xs(window,"message",(t=>{var r;if((t.origin===this._appOrigin||t.origin.endsWith(".arcgis.com"))&&"arcgis:auth:requestCredential"===(null==(r=t.data)?void 0:r.type)){const r=t.source;this.getCredential(e).then((e=>{r.postMessage({type:"arcgis:auth:credential",credential:{expires:e.expires,server:e.server,ssl:e.ssl,token:e.token,userId:e.userId}},t.origin)})).catch((e=>{r.postMessage({type:"arcgis:auth:error",error:{name:e.name,message:e.message}},t.origin)}))}}))}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){var e,t;let r=window.location.hash;if(r){"#"===r.charAt(0)&&(r=r.slice(1));const t=la(r);let n=!1;if(t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty("username"))try{t.state=JSON.parse(t.state),t.state.portalUrl&&(this._oAuthLocationParams=t,n=!0)}catch{}else if(t.error&&t.error_description&&(console.log("IdentityManager OAuth Error: ",t.error," - ",t.error_description),"access_denied"===t.error&&(n=!0,t.state)))try{t.state=JSON.parse(t.state)}catch{}n&&(window.location.hash=(null==(e=t.state)?void 0:e.hash)||"")}let n=window.location.search;if(n){"?"===n.charAt(0)&&(n=n.slice(1));const e=la(n);let r=!1;if(e.code&&e.state)try{e.state=JSON.parse(e.state),e.state.portalUrl&&e.state.uid&&(this._oAuthLocationParams=e,r=!0)}catch{}else if(e.error&&e.error_description&&(console.log("IdentityManager OAuth Error: ",e.error," - ",e.error_description),"access_denied"===e.error&&(r=!0,e.state)))try{e.state=JSON.parse(e.state)}catch{}if(r){const r={...e};["code","error","error_description","message_code","persist","state"].forEach((e=>{delete r[e]}));const n=ca(r),s=window.location.pathname+(n?`?${n}`:"")+((null==(t=e.state)?void 0:t.hash)||"");window.history.replaceState(window.history.state,"",s)}}}_getOAuthToken(e,t,r,n,s){return Qa(`${e=e.replace(/^http:/i,"https:")}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:n&&s?{grant_type:"authorization_code",code:t,redirect_uri:n,client_id:r,code_verifier:s}:{grant_type:"refresh_token",refresh_token:t,client_id:r}}).then((e=>e.data))}async _getCodeChallenge(e){if(e&&globalThis.isSecureContext){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t);return Oa(new Uint8Array(r))}return null}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new un("identity-manager:user-aborted","ABORTED");this._errbackFunc(e)}}_findCredential(e,t){let r,n,s,i,o=-1;const a=null==t?void 0:t.token,l=null==t?void 0:t.resource,c=this._isServerRsrc(e)?"server":"portal",u=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===c));if(e=l||e,u.length)if(1===u.length){if(r=u[0],s=this.findServerInfo(r.server),n=null==s?void 0:s.owningSystemUrl,i=n?this.findCredential(n,r.userId):void 0,o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,i),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,i))}else{let t,r;if(u.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,s=this.findServerInfo(t.server),n=null==s?void 0:s.owningSystemUrl,i=n?this.findCredential(n,t.userId):void 0,o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return(null==t?void 0:t.isAdmin)&&!ma(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&"10.1"===String(e.currentVersion)&&!ma(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const t=new ta(e);return t.scheme+"://"+t.host+(null!=t.port?":"+t.port:"")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),-1!==r||zo(t)||(r=t.indexOf("/sharing")),-1===r&&t.endsWith("/")&&(r=t.length-1),r>-1?e.slice(0,r):e}_hasSameServerInstance(e,t){return e.endsWith("/")&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=Vo(e),t=Vo(t),(e=e.slice(Math.max(0,e.indexOf(":"))))===t.slice(Math.max(0,t.indexOf(":")))}_sanitizeUrl(e){const t=(rn.request.proxyUrl||"").toLowerCase(),r=t?e.toLowerCase().indexOf(t+"?"):-1;return-1!==r&&(e=e.slice(r+t.length+1)),aa(e=ba(e)).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r=!1;if(this._isRESTService(e)&&this._isRESTService(t)){const n=this._getSuffix(e).toLowerCase(),s=this._getSuffix(t).toLowerCase();if(r=n===s,!r){const e=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;r=n.replaceAll(e,"$1")===s.replaceAll(e,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new ta(e.toLowerCase()),r=this._portalConfig;let n=this._gwDomains.some((e=>e.regex.test(t.uri)));return!n&&r&&(n=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),n||rn.portalUrl&&(n=ma(t,rn.portalUrl,!0)),n||(n=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),n=n||this._agsPortal.test(t.path),n}_isIdProvider(e,t){let r=-1,n=-1;this._gwDomains.forEach(((s,i)=>{-1===r&&s.regex.test(e)&&(r=i),-1===n&&s.regex.test(t)&&(n=i)}));let s=!1;if(r>-1&&n>-1&&(0===r||4===r?0!==n&&4!==n||(s=!0):1===r?1!==n&&2!==n||(s=!0):2===r?2===n&&(s=!0):3===r&&3===n&&(s=!0)),!s){const r=this.findServerInfo(t),n=null==r?void 0:r.owningSystemUrl;n&&bg(r)&&this._isPortalDomain(n)&&this._isIdProvider(e,n)&&(s=!0)}return s}_getIdenticalSvcIdx(e,t){let r=-1;for(let n=0;n<t.resources.length;n++){const s=t.resources[n];if(this._isIdenticalService(e,s)){r=n;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let t,r,n;if(this._isRESTService(e)||this._isAdminResource(e)){const n=this._getServerInstanceRoot(e);return t=n+"/admin/generateToken",r=Qa(e=n+"/rest/info",{query:{f:"json"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t="";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(n=e.toLowerCase().indexOf("/sharing"),-1!==n&&(t=e.slice(0,n)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new ta(e).port;/^http:\/\//i.test(e)&&"7080"===r&&(t=t.replace(/:7080/i,":7443")),t=t.replace(/http:/i,"https:")}return t}}_processOAuthResponseParams(e,t,r){const n=t._oAuthCred;if(e.code){const s=n.codeVerifier;return n.codeVerifier=null,n.stateUID=null,n.save(),this._getOAuthToken(r.server,e.code,t.appId,this._getRedirectURI(t,!0),s).then((s=>{const i=new kg({userId:s.username,server:r.server??void 0,token:s.access_token,expires:Date.now()+1e3*s.expires_in,ssl:s.ssl,oAuthState:e.state,_oAuthCred:n});return t.userId=i.userId,n.storage=s.persist?Ag:Eg,n.refreshToken=s.refresh_token,n.token=null,n.expires=s.refresh_token_expires_in?Date.now()+1e3*s.refresh_token_expires_in:null,n.userId=i.userId,n.ssl=i.ssl,n.save(),i}))}const s=new kg({userId:e.username,server:r.server??void 0,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:"true"===e.ssl,oAuthState:e.state,_oAuthCred:n});return t.userId=s.userId,n.storage=e.persist?Ag:Eg,n.refreshToken=null,n.token=s.token,n.expires=s.expires,n.userId=s.userId,n.ssl=s.ssl,n.save(),Promise.resolve(s)}_processOAuthPopupParams(e){var t;const r=this._oAuthDfd;if(this._oAuthDfd=null,r)if(clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnPopupHandle)||t.remove(),e.error){const t="access_denied"===e.error,n=new un(t?"identity-manager:user-aborted":"identity-manager:authentication-failed",t?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);r.reject(n)}else this._processOAuthResponseParams(e,r.oinfo_,r.sinfo_).then((e=>{r.resolve(e)})).catch((e=>{r.reject(e)}))}_setOAuthResponseQueryString(e){e&&("?"===e.charAt(0)&&(e=e.slice(1)),this._processOAuthPopupParams(la(e)))}async _exchangeToken(e,t,r){return(await Qa(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:t,token:r}})).data.token}async _getPlatformSelf(e,t){var r;if(this._getPlatformSelfError&&Date.now()-this._getPlatformSelfError[1]<1e3)throw this._getPlatformSelfError[0];e=e.replace(/^http:/i,"https:");try{const r=await Qa(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0});return this._getPlatformSelfError=null,r.data}catch(e){throw"OAUTH_0066"===(null==(r=e.details)?void 0:r.messageCode)&&(this._getPlatformSelfError=[e,Date.now()]),e}}_getPortalSelf(e,t){let r;return this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:r,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),Qa(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then((e=>e.data)))}_doPortalSignIn(e){const t=this._portalConfig,r=window.location.href,n=this.findServerInfo(e);return!(!t&&!this._isPortalDomain(r)||!(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(r,e)||t&&(this._hasSameServerInstance(this._getServerInstanceRoot(t.restBaseUrl),e)||this._isIdProvider(t.restBaseUrl,e))||ma(r,e,!0)))}_checkProtocol(e,t,r,n){let s=!0;const i=n?t.adminTokenServiceUrl:t.tokenServiceUrl;return i.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&fa(i)&&(s=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!s)&&r(new un("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),s}_enqueue(e,t,r,n,s,i){return n||(n=qs()),n.resUrl_=e,n.sinfo_=t,n.options_=r,n.admin_=s,n.refresh_=i,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(n)):this._xoReqs.push(n):this._doSignIn(n),n.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{var r;const n=null==(r=e.options_)?void 0:r.resource,s=e.resUrl_,i=e.refresh_;let o=!1;this.credentials.includes(t)||(i&&this.credentials.includes(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,o=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.includes(n||s)||t.resources.push(n||s),t.scope=this._isServerRsrc(s)?"server":"portal",t.emitTokenChange();const a=this._soReqs,l={};this._soReqs=[],a.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);l[r]||(l[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),a.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,o||this.emit("credential-create",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=(s,i,o,a)=>{var l,c,u;const d=e.sinfo_,h=!e.options_||!1!==e.options_.prompt,p=d.hasPortal&&this._findOAuthInfo(e.resUrl_);let f,g;if(s)t(new kg({userId:s,server:d.server??void 0,token:o??void 0,expires:null!=a?Number(a):null,ssl:!!i}));else if(window!==window.parent&&null!=(l=this._appUrlObj.query)&&l["arcgis-auth-origin"]&&null!=(c=this._appUrlObj.query)&&c["arcgis-auth-portal"]&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const n=xs(window,"message",(e=>{e.source===window.parent&&e.data&&("arcgis:auth:credential"===e.data.type?(n.remove(),e.data.credential.expires<Date.now()?r(new un("identity-manager:credential-request-failed","Parent application's token has expired.")):t(new kg(e.data.credential))):"arcgis:auth:error"===e.data.type&&(n.remove(),"tokenExpiredError"===e.data.error.name?r(new un("identity-manager:credential-request-failed","Parent application's token has expired.")):r(un.fromJSON(e.data.error))))}));Ls(null==(u=e.options_)?void 0:u.signal,(()=>{n.remove()}))}else if(p){let s=p._oAuthCred;if(!s){const e=new fg(p,Ag),t=new fg(p,Eg);e.isValid()&&t.isValid()?e.expires>t.expires?(s=e,t.destroy()):(s=t,e.destroy()):s=e.isValid()?e:t,p._oAuthCred=s}if(s.isValid()){f=new kg({userId:s.userId??void 0,server:d.server??void 0,token:s.token??void 0,expires:s.expires,ssl:s.ssl??void 0,_oAuthCred:s});const i=p.appId!==s.appId&&this._doPortalSignIn(e.resUrl_);i||s.refreshToken?(e._pendingDfd=s.refreshToken?this._getOAuthToken(d.server,s.refreshToken,s.appId).then((e=>(f.expires=Date.now()+1e3*e.expires_in,f.token=e.access_token,f))):Promise.resolve(f),e._pendingDfd.then((e=>i?this._exchangeToken(e.server,p.appId,e.token).then((t=>(e.token=t,e))).catch((()=>e)):e)).then((e=>{t(e)})).catch((e=>{var t;const i=null==(t=e.details)?void 0:t.httpStatus;i>0&&404!==i?(s.destroy(),n()):r(e)}))):t(f)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(p.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===s.stateUID&&s.codeVerifier)){const n=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(n,p,d).then((e=>{t(e)})).catch(r)}else{const n=()=>{h?e._pendingDfd=this.oAuthSignIn(e.resUrl_,d,p,e.options_).then(t,r):(g=new un("identity-manager:not-authenticated","User is not signed in."),r(g))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(d.server,p.appId).then((e=>{ma(e.portalUrl,this._appOrigin,!0)?(f=new kg({userId:e.username,server:d.server??void 0,expires:Date.now()+1e3*e.expires_in,token:e.token}),t(f)):n()})).catch(n):n()}}else if(h){if(this._checkProtocol(e.resUrl_,d,r,e.admin_)){let n=e.options_;e.admin_&&(n=n||{},n.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,d,n).then(t,r)}}else g=new un("identity-manager:not-authenticated","User is not signed in."),r(g)},s=()=>{const n=e.sinfo_,s=n.owningSystemUrl,i=e.options_;let o,a,l,c;if(i&&(o=i.token,a=i.error,l=i.prompt),c=this._findCredential(s,{token:o,resource:e.resUrl_}),!c)for(const e of this.credentials)if(this._isIdProvider(s,e.server)){c=e;break}if(c){const s=this.findCredential(e.resUrl_,c.userId);if(s)t(s);else if(Sg(n,this._legacyFed)){const e=c.toJSON();e.server=n.server,e.resources=null,t(new kg(e))}else(e._pendingDfd=this.generateToken(this.findServerInfo(c.server),null,{serverUrl:e.resUrl_,token:c.token,signal:e.options_.signal,ssl:c.ssl})).then((r=>{t(new kg({userId:null==c?void 0:c.userId,server:n.server??void 0,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}else this._busy=null,o&&(e.options_.token=null),(e._pendingDfd=this.getCredential(s.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:n.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:l})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(t=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(t)}))};this._errbackFunc=r;const i=e.sinfo_.owningSystemUrl,o=this._isServerRsrc(e.resUrl_),a=e.sinfo_._restInfoPms;a?a.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=(Xr("authInfo.tokenServicesUrl",t)||Xr("authInfo.tokenServiceUrl",t)||Xr("tokenServiceUrl",t))??null,r.shortLivedTokenValidity=Xr("authInfo.shortLivedTokenValidity",t)??null,r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}o&&r.owningSystemUrl?s():n()}),(()=>{e.sinfo_._restInfoPms=null;const t=new un("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");r(t)})):o&&i?s():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{var r;const n={};let s,i,o,a;return t&&(s=null==(r=t.user)?void 0:r.username,n.username=s,n.allSSL=t.allSSL,i=t.supportsOAuth,a=parseFloat(t.currentVersion),"multitenant"===t.portalMode&&(o=t.customBaseUrl),e.sinfo_.currentVersion=a),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:n.allSSL}).catch((()=>null)).then((e=>(n.portalToken=null==e?void 0:e.token,n.tokenExpiration=null==e?void 0:e.expires,n))):!s&&i&&a>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>n)):n})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?n(t.username,t.allSSL,t.portalToken,t.tokenExpiration):n()})):n()}_generateOAuthInfo(e){let t,r=null,n=e.portalUrl;const s=e.customBaseUrl,i=e.owningTenant,o=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=window.location.href;let e=r.indexOf("?");e>-1&&(r=r.slice(0,e)),e=r.search(/\/(apps|home)\//),r=e>-1?r.slice(0,e):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,t=Qa(r+"/sharing/rest",{query:{f:"json"}}).then((()=>{this._defaultOAuthInfo=new vg({appId:"arcgisonline",popupCallbackUrl:r+"/home/oauth-callback.html"})}))):t=Promise.resolve(),t.then((()=>{if(this._defaultOAuthInfo)return n=n.replace(/^http:/i,"https:"),Qa(n+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:i,client_id:this._defaultOAuthInfo.appId,redirect_uri:_a(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then((e=>{if(e.data.valid){const t=this._defaultOAuthInfo.clone();e.data.urlKey&&s?t.portalUrl="https://"+e.data.urlKey.toLowerCase()+"."+s:t.portalUrl=n,t.popup=window!==window.top||!(ma(n,this._appOrigin)||this._gwDomains.some((e=>e.regex.test(n)&&e.regex.test(this._appOrigin)))),this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,t,r,n){const s=r._oAuthCred,i={portalUrl:r.portalUrl};!r.popup&&r.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash),s.stateUID&&(i.uid=s.stateUID);const o={client_id:r.appId,response_type:s.codeVerifier?"code":"token",state:JSON.stringify(i),expiration:r.expiration,locale:r.locale,redirect_uri:this._getRedirectURI(r,!!s.codeVerifier)};r.forceLogin&&(o.force_login=!0),r.forceUserId&&r.userId&&(o.prepopulatedusername=r.userId),!r.popup&&this._doPortalSignIn(e)&&(o.redirectToUserOrgUrl=!0),s.codeVerifier&&(o.code_challenge=n||s.codeVerifier,o.code_challenge_method=n?"S256":"plain");const a=r.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",l=a+"?"+ca(o);if(r.popup){const e=window.open(l,"esriJSAPIOAuth",r.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const e=this._oAuthDfd;if(e){const t=new un("identity-manager:user-aborted","ABORTED");e.reject(t)}}}),500),this._oAuthOnPopupHandle=xs(window,["arcgis:auth:hash","arcgis:auth:location:search"],(e=>{"arcgis:auth:hash"===e.type?this.setOAuthResponseHash(e.detail):this._setOAuthResponseQueryString(e.detail)}));else{const e=new un("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:o,authorizeUrl:a,resourceUrl:e,serverInfo:t,oAuthInfo:r}):window.location.href=l}_getRedirectURI(e,t){const r=window.location.href.replace(/#.*$/,"");if(e.popup)return _a(e.popupCallbackUrl);if(t){const e=aa(r);return e.query&&["code","error","error_description","message_code","persist","state"].forEach((t=>{delete e.query[t]})),Ua(e.path,e.query)}return r}}Ig.prototype.declaredClass="esri.identity.IdentityManagerBase";let kg=class extends _l.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,null!=e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=$a,t=e.findServerInfo(this.server),r=null==t?void 0:t.owningSystemUrl,n=!!r&&"server"===this.scope,s=n&&Sg(t,e._legacyFed),i=t.webTierAuth,o=i&&e.normalizeWebTierAuth,a=wg[this.server],l=null==a?void 0:a[this.userId];let c,u=this.resources&&this.resources[0],d=n?e.findServerInfo(r):null,h={username:this.userId,password:l};if(i&&!o)return;n&&!d&&e.serverInfos.some((t=>(e._isIdProvider(r,t.server)&&(d=t),!!d)));const p=d?e.findCredential(d.server,this.userId):null;if(!n||p){if(!s){if(n)c={serverUrl:u,token:null==p?void 0:p.token,ssl:null==p?void 0:p.ssl};else if(o)h=null,c={ssl:this.ssl};else{if(!l){let r;return u&&(u=e._sanitizeUrl(u),this._enqueued=1,r=e._enqueue(u,t,null,null,this.isAdmin,this),r.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),r}this.isAdmin&&(c={isAdmin:!0})}return e.generateToken(n?d:t,n?null:h,c).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}null==p||p.refreshToken()}}refreshServerTokens(){if("portal"===this.scope){const e=$a;e.credentials.forEach((t=>{const r=e.findServerInfo(t.server),n=null==r?void 0:r.owningSystemUrl;t!==this&&t.userId===this.userId&&n&&"server"===t.scope&&(e._hasSameServerInstance(this.server,n)||e._isIdProvider(n,this.server))&&(Sg(r,e._legacyFed)?(t.token=this.token,t.expires=this.expires,t.creationTime=this.creationTime,t.validity=this.validity,t.emitTokenChange()):t.refreshToken())}))}}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=$a,r=this.server?t.findServerInfo(this.server):null,n=null==r?void 0:r.owningSystemUrl,s=n?t.findServerInfo(n):null;!1===e||n&&"portal"!==this.scope&&(!(null!=s&&s.webTierAuth)||t.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=$a,t=e.credentials.indexOf(this);t>-1&&e.credentials.splice(t,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=Hr({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,t=2**31-1;let r=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();r<0?r=0:r>t&&(r=t),this._refreshTimer=setTimeout(this.refreshToken.bind(this),r>e?r-e:r)}};dn([Wi()],kg.prototype,"creationTime",void 0),dn([Wi()],kg.prototype,"expires",void 0),dn([Wi()],kg.prototype,"isAdmin",void 0),dn([Wi()],kg.prototype,"oAuthState",void 0),dn([Wi()],kg.prototype,"resources",void 0),dn([Wi()],kg.prototype,"scope",void 0),dn([Wi()],kg.prototype,"server",void 0),dn([Wi()],kg.prototype,"ssl",void 0),dn([Wi()],kg.prototype,"token",void 0),dn([Wi()],kg.prototype,"tokenRefreshBuffer",void 0),dn([Wi()],kg.prototype,"userId",void 0),dn([Wi()],kg.prototype,"validity",void 0),kg=dn([So("esri.identity.Credential")],kg);class Og extends Ig{}Og.prototype.declaredClass="esri.identity.IdentityManager";const Tg=new Og;!function(e){$a=e}(Tg);const Cg=Object.freeze(Object.defineProperty({__proto__:null,default:Tg},Symbol.toStringTag,{value:"Module"}));function xg(e,t){return function(){return e.apply(t,arguments)}}const{toString:Rg}=Object.prototype,{getPrototypeOf:jg}=Object,{iterator:Pg,toStringTag:Dg}=Symbol,Ug=(e=>t=>{const r=Rg.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Lg=e=>(e=e.toLowerCase(),t=>Ug(t)===e),Ng=e=>t=>typeof t===e,{isArray:$g}=Array,Mg=Ng("undefined");const Fg=Lg("ArrayBuffer");const Bg=Ng("string"),qg=Ng("function"),zg=Ng("number"),Vg=e=>null!==e&&"object"==typeof e,Wg=e=>{if("object"!==Ug(e))return!1;const t=jg(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Dg in e||Pg in e)},Gg=Lg("Date"),Hg=Lg("File"),Jg=Lg("Blob"),Kg=Lg("FileList"),Yg=Lg("URLSearchParams"),[Zg,Xg,Qg,em]=["ReadableStream","Request","Response","Headers"].map(Lg);function tm(e,t,{allOwnKeys:r=!1}={}){if(null===e||typeof e>"u")return;let n,s;if("object"!=typeof e&&(e=[e]),$g(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(n=0;n<i;n++)o=s[n],t.call(null,e[o],o,e)}}function rm(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const nm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sm=e=>!Mg(e)&&e!==nm;const im=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&jg(Uint8Array)),om=Lg("HTMLFormElement"),am=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),lm=Lg("RegExp"),cm=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};tm(r,((r,s)=>{let i;!1!==(i=t(r,s,e))&&(n[s]=i||r)})),Object.defineProperties(e,n)};const um=Lg("AsyncFunction"),dm=((e,t)=>{return e?setImmediate:t?(r=`axios@${Math.random()}`,n=[],nm.addEventListener("message",(({source:e,data:t})=>{e===nm&&t===r&&n.length&&n.shift()()}),!1),e=>{n.push(e),nm.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"==typeof setImmediate,qg(nm.postMessage)),hm=typeof queueMicrotask<"u"?queueMicrotask.bind(nm):typeof process<"u"&&process.nextTick||dm,pm={isArray:$g,isArrayBuffer:Fg,isBuffer:function(e){return null!==e&&!Mg(e)&&null!==e.constructor&&!Mg(e.constructor)&&qg(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||qg(e.append)&&("formdata"===(t=Ug(e))||"object"===t&&qg(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Fg(e.buffer),t},isString:Bg,isNumber:zg,isBoolean:e=>!0===e||!1===e,isObject:Vg,isPlainObject:Wg,isReadableStream:Zg,isRequest:Xg,isResponse:Qg,isHeaders:em,isUndefined:Mg,isDate:Gg,isFile:Hg,isBlob:Jg,isRegExp:lm,isFunction:qg,isStream:e=>Vg(e)&&qg(e.pipe),isURLSearchParams:Yg,isTypedArray:im,isFileList:Kg,forEach:tm,merge:function e(){const{caseless:t}=sm(this)&&this||{},r={},n=(n,s)=>{const i=t&&rm(r,s)||s;Wg(r[i])&&Wg(n)?r[i]=e(r[i],n):Wg(n)?r[i]=e({},n):$g(n)?r[i]=n.slice():r[i]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&tm(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(tm(t,((t,n)=>{r&&qg(t)?e[n]=xg(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,i,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=!1!==r&&jg(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Ug,kindOfTest:Lg,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if($g(e))return e;let t=e.length;if(!zg(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Pg]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:om,hasOwnProperty:am,hasOwnProp:am,reduceDescriptors:cm,freezeMethods:e=>{cm(e,((t,r)=>{if(qg(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];if(qg(n)){if(t.enumerable=!1,"writable"in t)return void(t.writable=!1);t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return $g(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:rm,global:nm,isContextDefined:sm,isSpecCompliantForm:function(e){return!!(e&&qg(e.append)&&"FormData"===e[Dg]&&e[Pg])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Vg(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const s=$g(e)?[]:{};return tm(e,((e,t)=>{const i=r(e,n+1);!Mg(i)&&(s[t]=i)})),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:um,isThenable:e=>e&&(Vg(e)||qg(e))&&qg(e.then)&&qg(e.catch),setImmediate:dm,asap:hm,isIterable:e=>null!=e&&qg(e[Pg])};function fm(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}pm.inherits(fm,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:pm.toJSONObject(this.config),code:this.code,status:this.status}}});const gm=fm.prototype,mm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{mm[e]={value:e}})),Object.defineProperties(fm,mm),Object.defineProperty(gm,"isAxiosError",{value:!0}),fm.from=(e,t,r,n,s,i)=>{const o=Object.create(gm);return pm.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),fm.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};function vm(e){return pm.isPlainObject(e)||pm.isArray(e)}function ym(e){return pm.endsWith(e,"[]")?e.slice(0,-2):e}function _m(e,t,r){return e?e.concat(t).map((function(e,t){return e=ym(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const wm=pm.toFlatObject(pm,{},null,(function(e){return/^is[A-Z]/.test(e)}));function bm(e,t,r){if(!pm.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=pm.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!pm.isUndefined(t[e])}))).metaTokens,s=r.visitor||c,i=r.dots,o=r.indexes,a=(r.Blob||typeof Blob<"u"&&Blob)&&pm.isSpecCompliantForm(t);if(!pm.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(pm.isDate(e))return e.toISOString();if(!a&&pm.isBlob(e))throw new fm("Blob is not supported. Use a Buffer instead.");return pm.isArrayBuffer(e)||pm.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(pm.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(pm.isArray(e)&&function(e){return pm.isArray(e)&&!e.some(vm)}(e)||(pm.isFileList(e)||pm.endsWith(r,"[]"))&&(a=pm.toArray(e)))return r=ym(r),a.forEach((function(e,n){!pm.isUndefined(e)&&null!==e&&t.append(!0===o?_m([r],n,i):null===o?r:r+"[]",l(e))})),!1;return!!vm(e)||(t.append(_m(s,r,i),l(e)),!1)}const u=[],d=Object.assign(wm,{defaultVisitor:c,convertValue:l,isVisitable:vm});if(!pm.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!pm.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),pm.forEach(r,(function(r,i){!0===(!(pm.isUndefined(r)||null===r)&&s.call(t,r,pm.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),u.pop()}}(e),t}function Sm(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Am(e,t){this._pairs=[],e&&bm(e,this,t)}const Em=Am.prototype;function Im(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function km(e,t,r){if(!t)return e;const n=r&&r.encode||Im;pm.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(i=s?s(t,r):pm.isURLSearchParams(t)?t.toString():new Am(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}Em.append=function(e,t){this._pairs.push([e,t])},Em.toString=function(e){const t=e?function(t){return e.call(this,t,Sm)}:Sm;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};let Om=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){pm.forEach(this.handlers,(function(t){null!==t&&e(t)}))}};const Tm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cm={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:Am,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},xm=typeof window<"u"&&typeof document<"u",Rm="object"==typeof navigator&&navigator||void 0,jm=xm&&(!Rm||["ReactNative","NativeScript","NS"].indexOf(Rm.product)<0),Pm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Dm=xm&&window.location.href||"http://localhost",Um={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xm,hasStandardBrowserEnv:jm,hasStandardBrowserWebWorkerEnv:Pm,navigator:Rm,origin:Dm},Symbol.toStringTag,{value:"Module"})),...Cm};function Lm(e){function t(e,r,n,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;return i=!i&&pm.isArray(n)?n.length:i,a?(pm.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o):((!n[i]||!pm.isObject(n[i]))&&(n[i]=[]),t(e,r,n[i],s)&&pm.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o)}if(pm.isFormData(e)&&pm.isFunction(e.entries)){const r={};return pm.forEachEntry(e,((e,n)=>{t(function(e){return pm.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const Nm={transitional:Tm,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=pm.isObject(e);if(s&&pm.isHTMLForm(e)&&(e=new FormData(e)),pm.isFormData(e))return n?JSON.stringify(Lm(e)):e;if(pm.isArrayBuffer(e)||pm.isBuffer(e)||pm.isStream(e)||pm.isFile(e)||pm.isBlob(e)||pm.isReadableStream(e))return e;if(pm.isArrayBufferView(e))return e.buffer;if(pm.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return bm(e,new Um.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Um.isNode&&pm.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=pm.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return bm(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(pm.isString(e))try{return(t||JSON.parse)(e),pm.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Nm.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(pm.isResponse(e)||pm.isReadableStream(e))return e;if(e&&pm.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r)throw"SyntaxError"===e.name?fm.from(e,fm.ERR_BAD_RESPONSE,this,null,this.response):e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Um.classes.FormData,Blob:Um.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};pm.forEach(["delete","get","head","post","put","patch"],(e=>{Nm.headers[e]={}}));const $m=pm.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Mm=Symbol("internals");function Fm(e){return e&&String(e).trim().toLowerCase()}function Bm(e){return!1===e||null==e?e:pm.isArray(e)?e.map(Bm):String(e)}function qm(e,t,r,n,s){if(pm.isFunction(n))return n.call(this,t,r);if(s&&(t=r),pm.isString(t)){if(pm.isString(n))return-1!==t.indexOf(n);if(pm.isRegExp(n))return n.test(t)}}let zm=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=Fm(t);if(!s)throw new Error("header name must be a non-empty string");const i=pm.findKey(n,s);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=Bm(e))}const i=(e,t)=>pm.forEach(e,((e,r)=>s(e,r,t)));if(pm.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(pm.isString(e)&&(e=e.trim())&&!(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))(e))i((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!(!r||t[r]&&$m[r])&&("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(pm.isObject(e)&&pm.isIterable(e)){let r,n,s={};for(const t of e){if(!pm.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?pm.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=Fm(e)){const r=pm.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(pm.isFunction(t))return t.call(this,e,r);if(pm.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Fm(e)){const r=pm.findKey(this,e);return!(!r||void 0===this[r]||t&&!qm(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=Fm(e)){const s=pm.findKey(r,e);s&&(!t||qm(0,r[s],s,t))&&(delete r[s],n=!0)}}return pm.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];(!e||qm(0,this[s],s,e,!0))&&(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return pm.forEach(this,((n,s)=>{const i=pm.findKey(r,s);if(i)return t[i]=Bm(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(s):String(s).trim();o!==s&&delete t[s],t[o]=Bm(n),r[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return pm.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&pm.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[Mm]=this[Mm]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=Fm(e);t[n]||(function(e,t){const r=pm.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})}))}(r,e),t[n]=!0)}return pm.isArray(e)?e.forEach(n):n(e),this}};function Vm(e,t){const r=this||Nm,n=t||r,s=zm.from(n.headers);let i=n.data;return pm.forEach(e,(function(e){i=e.call(r,i,s.normalize(),t?t.status:void 0)})),s.normalize(),i}function Wm(e){return!(!e||!e.__CANCEL__)}function Gm(e,t,r){fm.call(this,e??"canceled",fm.ERR_CANCELED,t,r),this.name="CanceledError"}function Hm(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new fm("Request failed with status code "+r.status,[fm.ERR_BAD_REQUEST,fm.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}zm.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),pm.reduceDescriptors(zm.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),pm.freezeMethods(zm),pm.inherits(Gm,fm,{__CANCEL__:!0});const Jm=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[o];s||(s=l),r[i]=a,n[i]=l;let u=o,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,s=0,i=1e3/t;const o=(t,i=Date.now())=>{s=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-s;a>=i?o(e,t):(r=e,n||(n=setTimeout((()=>{n=null,o(r)}),i-a)))},()=>r&&o(r)]}((r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,a=i-n,l=s(a);n=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),r)},Km=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Ym=e=>(...t)=>pm.asap((()=>e(...t))),Zm=Um.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Um.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Um.origin),Um.navigator&&/(msie|trident)/i.test(Um.navigator.userAgent)):()=>!0,Xm=Um.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];pm.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),pm.isString(n)&&o.push("path="+n),pm.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Qm(e,t,r){let n=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ev=e=>e instanceof zm?{...e}:e;function tv(e,t){t=t||{};const r={};function n(e,t,r,n){return pm.isPlainObject(e)&&pm.isPlainObject(t)?pm.merge.call({caseless:n},e,t):pm.isPlainObject(t)?pm.merge({},t):pm.isArray(t)?t.slice():t}function s(e,t,r,s){return pm.isUndefined(t)?pm.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function i(e,t){if(!pm.isUndefined(t))return n(void 0,t)}function o(e,t){return pm.isUndefined(t)?pm.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,i){return i in t?n(r,s):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>s(ev(e),ev(t),0,!0)};return pm.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=l[n]||s,o=i(e[n],t[n],n);pm.isUndefined(o)&&i!==a||(r[n]=o)})),r}const rv=e=>{const t=tv({},e);let r,{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=zm.from(a),t.url=km(Qm(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),pm.isFormData(n))if(Um.hasStandardBrowserEnv||Um.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(r=a.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Um.hasStandardBrowserEnv&&(s&&pm.isFunction(s)&&(s=s(t)),s||!1!==s&&Zm(t.url))){const e=i&&o&&Xm.read(o);e&&a.set(i,e)}return t},nv=typeof XMLHttpRequest<"u"&&function(e){return new Promise((function(t,r){const n=rv(e);let s=n.data;const i=zm.from(n.headers).normalize();let o,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=zm.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Hm((function(e){t(e),f()}),(function(e){r(e),f()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){!g||4!==g.readyState||0===g.status&&(!g.responseURL||0!==g.responseURL.indexOf("file:"))||setTimeout(m)},g.onabort=function(){g&&(r(new fm("Request aborted",fm.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new fm("Network Error",fm.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||Tm;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new fm(t,s.clarifyTimeoutError?fm.ETIMEDOUT:fm.ECONNABORTED,e,g)),g=null},void 0===s&&i.setContentType(null),"setRequestHeader"in g&&pm.forEach(i.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),pm.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),d&&"json"!==d&&(g.responseType=n.responseType),p&&([l,u]=Jm(p,!0),g.addEventListener("progress",l)),h&&g.upload&&([a,c]=Jm(h),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{g&&(r(!t||t.type?new Gm(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);v&&-1===Um.protocols.indexOf(v)?r(new fm("Unsupported protocol "+v+":",fm.ERR_BAD_REQUEST,e)):g.send(s||null)}))},sv=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof fm?t:new Gm(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,s(new fm(`timeout ${t} of ms exceeded`,fm.ETIMEDOUT))}),t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:a}=n;return a.unsubscribe=()=>pm.asap(o),a}},iv=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},ov=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},av=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of ov(e))yield*iv(r,t)}(e,t);let i,o=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return a(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},lv="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,cv=lv&&"function"==typeof ReadableStream,uv=lv&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),dv=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hv=cv&&dv((()=>{let e=!1;const t=new Request(Um.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),pv=cv&&dv((()=>pm.isReadableStream(new Response("").body))),fv={stream:pv&&(e=>e.body)};lv&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!fv[t]&&(fv[t]=pm.isFunction(e[t])?e=>e[t]():(e,r)=>{throw new fm(`Response type '${t}' is not supported`,fm.ERR_NOT_SUPPORT,r)})}))})(new Response);const gv=async(e,t)=>pm.toFiniteNumber(e.getContentLength())??(async e=>null==e?0:pm.isBlob(e)?e.size:pm.isSpecCompliantForm(e)?(await new Request(Um.origin,{method:"POST",body:e}).arrayBuffer()).byteLength:pm.isArrayBufferView(e)||pm.isArrayBuffer(e)?e.byteLength:(pm.isURLSearchParams(e)&&(e+=""),pm.isString(e)?(await uv(e)).byteLength:void 0))(t),mv=lv&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=rv(e);c=c?(c+"").toLowerCase():"text";let p,f=sv([s,i&&i.toAbortSignal()],o);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&hv&&"get"!==r&&"head"!==r&&0!==(m=await gv(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(pm.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){const[e,t]=Km(m,Jm(Ym(l)));n=av(r.body,65536,e,t)}}pm.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:s?d:void 0});let i=await fetch(p);const o=pv&&("stream"===c||"response"===c);if(pv&&(a||o&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=pm.toFiniteNumber(i.headers.get("content-length")),[r,n]=a&&Km(t,Jm(Ym(a),!0))||[];i=new Response(av(i.body,65536,r,(()=>{n&&n(),g&&g()})),e)}c=c||"text";let v=await fv[pm.findKey(fv,c)||"text"](i,e);return!o&&g&&g(),await new Promise(((t,r)=>{Hm(t,r,{data:v,headers:zm.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(t){throw g&&g(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message)?Object.assign(new fm("Network Error",fm.ERR_NETWORK,e,p),{cause:t.cause||t}):fm.from(t,t&&t.code,e,p)}}),vv={http:null,xhr:nv,fetch:mv};pm.forEach(vv,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}}));const yv=e=>`- ${e}`,_v=e=>pm.isFunction(e)||null===e||!1===e,wv=e=>{e=pm.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!_v(r)&&(n=vv[(t=String(r)).toLowerCase()],void 0===n))throw new fm(`Unknown adapter '${t}'`);if(n)break;s[t||"#"+i]=n}if(!n){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new fm("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(yv).join("\n"):" "+yv(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function bv(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gm(null,e)}function Sv(e){return bv(e),e.headers=zm.from(e.headers),e.data=Vm.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),wv(e.adapter||Nm.adapter)(e).then((function(t){return bv(e),t.data=Vm.call(e,e.transformResponse,t),t.headers=zm.from(t.headers),t}),(function(t){return Wm(t)||(bv(e),t&&t.response&&(t.response.data=Vm.call(e,e.transformResponse,t.response),t.response.headers=zm.from(t.response.headers))),Promise.reject(t)}))}const Av="1.9.0",Ev={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ev[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const Iv={};Ev.transitional=function(e,t,r){function n(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,i)=>{if(!1===e)throw new fm(n(s," has been removed"+(t?" in "+t:"")),fm.ERR_DEPRECATED);return t&&!Iv[s]&&(Iv[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,i)}},Ev.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const kv={assertOptions:function(e,t,r){if("object"!=typeof e)throw new fm("options must be an object",fm.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new fm("option "+i+" must be "+r,fm.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new fm("Unknown option "+i,fm.ERR_BAD_OPTION)}},validators:Ev},Ov=kv.validators;let Tv=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Om,response:new Om}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch{}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=tv(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&kv.assertOptions(r,{silentJSONParsing:Ov.transitional(Ov.boolean),forcedJSONParsing:Ov.transitional(Ov.boolean),clarifyTimeoutError:Ov.transitional(Ov.boolean)},!1),null!=n&&(pm.isFunction(n)?t.paramsSerializer={serialize:n}:kv.assertOptions(n,{encode:Ov.function,serialize:Ov.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),kv.assertOptions(t,{baseUrl:Ov.spelling("baseURL"),withXsrfToken:Ov.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&pm.merge(s.common,s[t.method]);s&&pm.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=zm.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,u,d=0;if(!a){const e=[Sv.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=Sv.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return km(Qm((e=tv(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};pm.forEach(["delete","get","head","options"],(function(e){Tv.prototype[e]=function(t,r){return this.request(tv(r||{},{method:e,url:t,data:(r||{}).data}))}})),pm.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,s){return this.request(tv(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Tv.prototype[e]=t(),Tv.prototype[e+"Form"]=t(!0)}));const Cv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cv).forEach((([e,t])=>{Cv[t]=e}));const xv=function e(t){const r=new Tv(t),n=xg(Tv.prototype.request,r);return pm.extend(n,Tv.prototype,r,{allOwnKeys:!0}),pm.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(tv(t,r))},n}(Nm);xv.Axios=Tv,xv.CanceledError=Gm,xv.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,s){r.reason||(r.reason=new Gm(e,n,s),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},xv.isCancel=Wm,xv.VERSION=Av,xv.toFormData=bm,xv.AxiosError=fm,xv.Cancel=xv.CanceledError,xv.all=function(e){return Promise.all(e)},xv.spread=function(e){return function(t){return e.apply(null,t)}},xv.isAxiosError=function(e){return pm.isObject(e)&&!0===e.isAxiosError},xv.mergeConfig=tv,xv.AxiosHeaders=zm,xv.formToJSON=e=>Lm(pm.isHTMLForm(e)?new FormData(e):e),xv.getAdapter=wv,xv.HttpStatusCode=Cv,xv.default=xv;const{Axios:Rv,AxiosError:jv,CanceledError:Pv,isCancel:Dv,CancelToken:Uv,VERSION:Lv,all:Nv,Cancel:$v,isAxiosError:Mv,spread:Fv,toFormData:Bv,AxiosHeaders:qv,HttpStatusCode:zv,formToJSON:Vv,getAdapter:Wv,mergeConfig:Gv}=xv,Hv=class e{constructor(){return Dr(this,"cache",[]),Dr(this,"set",((e,t,r)=>{this.recordExists(e,r)||this.cache.push({url:e,body:r,result:t})})),Dr(this,"get",((e,t)=>{const r=this.cache.find((r=>null!=t?r.url===e&&r.body===t:r.url===e));return null!=r?r.result:null})),Dr(this,"recordExists",((e,t)=>null!=this.get(e,t))),null!=e.instance?e.instance:(e.instance=this,this)}};Dr(Hv,"instance");let Jv=Hv;class Kv{constructor(e){Dr(this,"getToken"),Dr(this,"cache",new Jv),Dr(this,"getData",(async e=>{if(this.cache.recordExists(e))return this.cache.get(e);try{const t=await this.getToken(),r=await xv.get(e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return this.cache.set(e,r),r}catch(t){return console.error(`API call '${e}' fails with exception:`,t),null}})),this.getToken=e}}const Yv=class e extends Kv{constructor(){super(...arguments),Dr(this,"dataManagementBaseUrl","https://developer.api.autodesk.com/data/v1"),Dr(this,"getUser",(async()=>{try{const e=await this.getData("https://api.userprofile.autodesk.com/userinfo");return null==e?void 0:e.data}catch{return null}})),Dr(this,"getHubs",(async()=>{var e;const t=await this.getData("https://developer.api.autodesk.com/project/v1/hubs");return(null==(e=null==t?void 0:t.data)?void 0:e.data)??[]})),Dr(this,"getHubRegion",(async t=>{var r;const n=(await this.getHubs()).find((e=>e.id===t));return(null==(r=null==n?void 0:n.attributes)?void 0:r.region)??e.DEFAULT_REGION})),Dr(this,"getProjects",(async e=>{var t;const r=`https://developer.api.autodesk.com/project/v1/hubs/${e}/projects`,n=await this.getData(r);return(null==(t=null==n?void 0:n.data)?void 0:t.data)??[]})),Dr(this,"getBIMDocument",(async({projectId:e,itemId:t,versionId:r})=>{if(void 0!==t){const r=await this.getLatestVersion(e,t);if(this.isBIMDocumentDeleted(r))throw new Error("Document is deleted");return r}if(void 0!==r){const t=await this.getVersion(e,r);if(this.isBIMDocumentDeleted(t))throw new Error("Document is deleted");return t}throw new Error("Invalid parameters")})),Dr(this,"getProject",(async(e,t)=>{var r;const n=`https://developer.api.autodesk.com/project/v1/hubs/${e}/projects/${t}`,s=await this.getData(n);return null==(r=null==s?void 0:s.data)?void 0:r.data})),Dr(this,"isBIMDocumentDeleted",(e=>{var t,r;const n=null==(r=null==(t=null==e?void 0:e.attributes)?void 0:t.extension)?void 0:r.type;return(null==n?void 0:n.length)>0&&n.endsWith("Deleted")})),Dr(this,"getItemVersions",(async(e,t)=>{var r;const n=await this.getData(`${this.dataManagementBaseUrl}/projects/${e}/items/${encodeURIComponent(t)}/versions`);return(null==(r=null==n?void 0:n.data)?void 0:r.data)??[]})),Dr(this,"getLatestVersion",(async(e,t)=>{var r,n,s;const i=await this.getItemTipVersion(e,t);if(!1===(null==(s=null==(n=null==(r=null==i?void 0:i.attributes)?void 0:r.extension)?void 0:n.type)?void 0:s.includes("Deleted")))return i;const o=await this.getItemVersions(e,t);return null==o||o.sort(((e,t)=>{var r,n;return(null==(r=null==t?void 0:t.attributes)?void 0:r.versionNumber)-(null==(n=null==e?void 0:e.attributes)?void 0:n.versionNumber)})),null==o?void 0:o.find((e=>{var t,r,n;return!(null!=(n=null==(r=null==(t=null==e?void 0:e.attributes)?void 0:t.extension)?void 0:r.type)&&n.includes("Deleted"))}))})),Dr(this,"getItemTipVersion",(async(e,t)=>{var r;const n=await this.getData(`${this.dataManagementBaseUrl}/projects/${e}/items/${encodeURIComponent(t)}/tip`);return null==(r=null==n?void 0:n.data)?void 0:r.data})),Dr(this,"getItem",(async(e,t)=>{var r,n;const s=`${this.dataManagementBaseUrl}/projects/${e}/items/${encodeURIComponent(t)}`;return null==(n=null==(r=await this.getData(s))?void 0:r.data)?void 0:n.data})),Dr(this,"getVersion",(async(e,t)=>{var r;const n=await this.getData(`${this.dataManagementBaseUrl}/projects/${e}/versions/${encodeURIComponent(t)}`);return null==(r=null==n?void 0:n.data)?void 0:r.data})),Dr(this,"searchFolder",(async(e,t,r)=>{var n,s,i,o,a,l,c,u,d;let h=null,p=[];const f=this.buildFilter(r);if(0===f.length)return[];let g=`${this.dataManagementBaseUrl}/projects/${e}/folders/${t}/search?${f}`;do{null!=(null==(i=null==(s=null==(n=null==h?void 0:h.data)?void 0:n.links)?void 0:s.next)?void 0:i.href)&&(g=h.data.links.next.href),h=await this.getData(g);const e=null==(a=null==(o=null==h?void 0:h.data)?void 0:o.data)?void 0:a.length;void 0!==e&&e>0&&(p=p.concat((null==(l=null==h?void 0:h.data)?void 0:l.data)??[]))}while(null!=(null==(d=null==(u=null==(c=null==h?void 0:h.data)?void 0:c.links)?void 0:u.next)?void 0:d.href));return p})),Dr(this,"buildFilter",(e=>{if(""===e||"function"!=typeof(null==e?void 0:e.toString))return"";const t=e.toString(),r=[t];t.toLocaleLowerCase()!==t&&r.push(t.toLocaleLowerCase()),t.toLocaleUpperCase()!==t&&r.push(t.toLocaleUpperCase()),this.capitalizeFirstLetter(t)!==t&&r.push(this.capitalizeFirstLetter(t));const n=r.reduce(((e,t)=>`${e}filter[attributes.displayName]-contains=${t}&`),"");return n.substring(0,n.length-1)})),Dr(this,"capitalizeFirstLetter",(e=>{if(0===e.length)return"";const t=e.codePointAt(0);if(null==t)return"";const r=t>65535?2:1;return String.fromCodePoint(t).toUpperCase()+e.slice(r)})),Dr(this,"getForgeData",(async e=>{var t,r,n;const s=[];if(e.length>0)for(let i=0;i<e.length;i++)try{let o=e[i];for(;null!=o;){const e=await this.getData(o);o=null==(n=null==(r=null==(t=e.data)?void 0:t.links)?void 0:r.next)?void 0:n.href,s.push(e)}}catch(e){return console.warn(e),null}else try{const e=await this.getData("https://developer.api.autodesk.com/project/v1/hubs");s.push(e)}catch(e){return console.warn(e),null}return s}))}};Dr(Yv,"DEFAULT_REGION","US");let Zv=Yv;var Xv=(e=>(e.HUBS="hubs",e.PROJECTS="projects",e.FOLDERS="folders",e.ITEMS="items",e.MODEL_SETS="model-set",e.VERSIONS="versions",e.MODEL_SET_VERSION="model-set-version",e))(Xv||{});class Qv{constructor(e){Dr(this,"baseUrl","https://developer.api.autodesk.com/modelderivative/v2"),Dr(this,"getToken"),Dr(this,"getFormats",(async()=>{const e=await this.getToken(),t=`${this.baseUrl}/designdata/formats`,r=await xv.get(t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}});return null==r?void 0:r.data})),this.getToken=e}}class ey{constructor(e,t){Dr(this,"_filter",""),Dr(this,"parentAPS"),Dr(this,"dataManagement"),Dr(this,"root",null),Dr(this,"search",(async(e,t)=>{if(0===t.length)return e;if(null!=this.root&&t===this._filter)return this.root;this._filter=t;const r=JSON.parse(JSON.stringify(e)),n=r.item;return n.type===Xv.HUBS?await this.searchHub(r,t):n.type===Xv.PROJECTS?await this.searchProject(r,t):console.warn("Search root item is not a hub or project"),this.pruneNodes(null,r),r})),Dr(this,"searchHub",(async(e,t)=>{null!=e.children&&await Promise.all(e.children.map((async r=>{r.children=null,await this.searchProject(r,t),(null==r.children||0===r.children.length)&&this.removeNode(e,r)})))})),Dr(this,"searchProject",(async(e,t)=>{var r,n,s,i,o,a,l;await this.addProjectTopFolders(e);const c=e.item,u=null==(s=null==(n=null==(r=c.relationships)?void 0:r.rootFolder)?void 0:n.data)?void 0:s.id,d=await this.dataManagement.searchFolder(c.id,u,t);if(null==d||0===(null==d?void 0:d.length))return;const h=await this.filterInvalidSearchItems(d);for(let t=0;t<h.length;t++){const r=h[t],n=await this.createNode(r);if(null!=n&&null!=(null==(o=null==(i=r.links)?void 0:i.webView)?void 0:o.href)&&(null==(l=null==(a=r.links)?void 0:a.webView)?void 0:l.href.length)>0){const t=this.getParentFolderId(r.links.webView.href),s=`https://developer.api.autodesk.com/data/v1/projects/${c.id}/folders/${t}`;await this.buildParentFolders(e,n,s)}}})),Dr(this,"pruneNodes",((e,t)=>{if(null==t.item)return;const r=t.item;if(r.type!==Xv.HUBS&&r.type!==Xv.PROJECTS&&r.type!==Xv.FOLDERS)return;if(null!=t.children)for(let e=t.children.length-1;e>=0;e--)this.pruneNodes(t,t.children[e]);let n=!1;r.type===Xv.FOLDERS&&(n=r.attributes.hidden),(r.type===Xv.PROJECTS||r.type===Xv.FOLDERS)&&(null==t.children||0===t.children.length||n)&&null!=e&&this.removeNode(e,t)})),Dr(this,"filterInvalidSearchItems",(async e=>{const t=await this.parentAPS.getViewerFormats();return e.filter((e=>this.isValidFormat(e,t)))})),Dr(this,"isValidFormat",((e,t)=>{if(e.type!==Xv.ITEMS&&e.type!==Xv.VERSIONS)return!1;const r=e.attributes.displayName.split(".").pop();return t.some((e=>e.toLowerCase()===(null==r?void 0:r.toLowerCase())))})),Dr(this,"removeNode",((e,t)=>{if(null!=e.children)for(let r=0;r<e.children.length;r++)if(e.children[r].id===t.id){e.children.splice(r,1);break}})),Dr(this,"addProjectTopFolders",(async e=>{const t=e.item;if(null==t||null==t.relationships.rootFolder||null==t.relationships.topFolders)return;const r=await this.dataManagement.getForgeData([t.relationships.topFolders.links.related.href]);if(null!=r)for(let t=0;t<r.length;t++){const n=r[t];if(0!==n.data.data.length)for(let t=0;t<n.data.data.length;t++){const r=await this.createNode(n.data.data[t]);null!=r&&this.addChild(e,r)}}})),Dr(this,"buildParentFolders",(async(e,t,r)=>{var n,s,i,o,a,l,c,u,d,h,p,f,g;if(null==r||0===r.length)return;const m=e.item,v=await this.dataManagement.getForgeData([r]);for(let r=0;r<v.length;r++){const y=v[r];if(null==(null==(n=null==y?void 0:y.data)?void 0:n.data)||(null==(o=null==(i=null==(s=m.relationships)?void 0:s.rootFolder)?void 0:i.data)?void 0:o.id)===y.data.data.id)return void this.addChild(e,t);const _=this.findNode(e,y.data.data.id);if(null!=_)return void this.addChild(_,t);const w=await this.createNode(y.data.data);if(null==w)return void this.addChild(e,t);if((null==(c=null==(l=null==(a=m.relationships)?void 0:a.rootFolder)?void 0:l.data)?void 0:c.id)===(null==(h=null==(d=null==(u=y.data.data.relationships)?void 0:u.parent)?void 0:d.data)?void 0:h.id))this.addChild(e,w);else{const t=null==(g=null==(f=null==(p=y.data.data.relationships)?void 0:p.parent)?void 0:f.data)?void 0:g.id,r=`https://developer.api.autodesk.com/data/v1/projects/${m.id}/folders/${t}`;await this.buildParentFolders(e,w,r)}this.addChild(w,t)}})),Dr(this,"findNode",((e,t)=>{if(e.id===t)return e;if(null!=e.children&&e.children.length>0)for(let r=0;r<e.children.length;r++){const n=this.findNode(e.children[r],t);if(null!=n)return n}return null})),Dr(this,"addChild",((e,t)=>{null==e.children?e.children=[t]:e.children.push(t)})),Dr(this,"getParentFolderId",(e=>e.includes("docs.b360")?this.getBIM360ParentFolderId(e):this.getACCParentFolderId(e))),Dr(this,"getBIM360ParentFolderId",(e=>{const t=e.split("/"),r=t.findIndex((e=>"folders"===e));return-1!==r?t[r+1]:""})),Dr(this,"getACCParentFolderId",(e=>{const t=e.split("?");if(t.length<2)return"";const r=t[1].split("&").find((e=>e.toLocaleLowerCase().startsWith("folderurn"))),n=null!=r?r.split("="):[];return n.length>1?n[1]:""})),Dr(this,"createNode",(async e=>await this.parentAPS.mapAPSItemToIRepositoryItem(e))),this.parentAPS=e,this.dataManagement=t}}class ty{constructor(e){Dr(this,"getRegionUrl",(e=>{var t;return null==(t=this.getRegionInfo(e))?void 0:t.regionUrl})),Dr(this,"getDocumentsRoot",((e,t)=>{var r,n;return this.getValidatedUrl(null==(n=null==(r=this.getRegionInfo(e))?void 0:r[t])?void 0:n.documentsRoot)})),Dr(this,"getProjectRoot",((e,t)=>{var r,n;return this.getValidatedUrl(null==(n=null==(r=this.getRegionInfo(e))?void 0:r[t])?void 0:n.projectRoot)})),Dr(this,"getRegionInfo",(e=>{var t;return null==(t=this.regionsInfo)?void 0:t.regions[e]})),Dr(this,"getValidatedUrl",(e=>{var t;return 0===(null==(t=null==e?void 0:e.trim())?void 0:t.length)?void 0:e})),this.regionsInfo=e}}const ry={US:{regionUrl:"",ACC:{documentsRoot:"https://acc.autodesk.com",projectRoot:"https://acc.autodesk.com"},BIM360:{documentsRoot:"https://docs.b360.autodesk.com",projectRoot:"https://insight.b360.autodesk.com"}},EMEA:{regionUrl:"/regions/eu",ACC:{documentsRoot:"https://acc.autodesk.eu",projectRoot:"https://acc.autodesk.eu"},BIM360:{documentsRoot:"https://docs.b360.eu.autodesk.com",projectRoot:"https://insight.b360.eu.autodesk.com"}},APAC:{regionUrl:"/regions/apac",ACC:{documentsRoot:"https://acc.apac.autodesk.com",projectRoot:"https://acc.apac.autodesk.com"},BIM360:{documentsRoot:"",projectRoot:""}},AUS:{regionUrl:"/regions/aus",ACC:{documentsRoot:"https://acc.aus.autodesk.com",projectRoot:"https://acc.aus.autodesk.com"},BIM360:{documentsRoot:"",projectRoot:""}}},ny={regions:ry},sy=Object.freeze(Object.defineProperty({__proto__:null,default:ny,regions:ry},Symbol.toStringTag,{value:"Module"})),iy=class e extends Kv{constructor(){super(...arguments),Dr(this,"getApsIssueJson",(e=>{var t;return{id:e.id,title:e.title,displayId:e.displayId,description:e.description,status:e.status,published:e.published,target_urn:null==(t=e.linkedDocuments[0])?void 0:t.urn,issueSubtypeId:e.issueSubtypeId,issueTypeId:e.issueTypeId,createdAt:e.createdAt,updatedAt:e.updatedAt,locationDetails:e.locationDetails,dueDate:e.dueDate,rootCauseId:e.rootCauseId,ownerId:e.ownerId,linkedDocuments:e.linkedDocuments}}))}async getIssue(t,r){var n;const s=e.baseUrl+`/projects/${t}/issues/${r}`,i=null==(n=await this.getData(s))?void 0:n.data;return null!=i?this.getApsIssueJson(i):null}static async getIssueSourceURL(e,t,r,n){var s,i;const o=null==(s=t.sourceData)?void 0:s.id;if(void 0!==o){let s=`${r}/docs/issues/projects/${e}/issues?issueId=${o}`;if(void 0!==(null==(i=t.sourceData)?void 0:i.target_urn)&&void 0!==n){const t=n.replace(`${r}/docs/files/projects/${e}?`,"").split("&");s=`${r}/docs/files/projects/${e}?folderUrn=${t[0].replace("folderUrn=","")}&entityId=${t[1].replace("entityId=","")}&viewModel=detail&moduleId=folders&issueId=${o}`}return s}}};Dr(iy,"baseUrl","https://developer.api.autodesk.com/construction/issues/v1");let oy=iy;const ay=class e extends Kv{constructor(){super(...arguments),Dr(this,"getApsIssueJson",(e=>{var t;return{id:e.id,title:e.title,displayId:e.displayId,description:e.description,status:e.status,target_urn:null==(t=e.linkedDocuments[0])?void 0:t.urn,issueSubtypeId:e.issueSubtypeId,issueTypeId:e.issueTypeId,createdAt:e.createdAt,updatedAt:e.updatedAt,locationDetails:e.locationDetails,dueDate:e.dueDate,rootCauseId:e.rootCauseId,ownerId:e.ownerId,linkedDocuments:e.linkedDocuments}}))}async getIssue(t,r){var n;const s=e.baseUrl+`/containers/${t}/issues/${r}`,i=null==(n=await this.getData(s))?void 0:n.data;return null!=i?this.getApsIssueJson(i):null}static async getIssueSourceURL(e,t,r,n){var s,i;const o=null==(s=t.sourceData)?void 0:s.id;if(void 0!==o){let s=`${r}/projects/${e}/issues/${o}`;const a=null==(i=t.sourceData)?void 0:i.target_urn;if(void 0!==a&&void 0!==n){s=`${r}/projects/${e}/folders/${n.replace(`${r}/projects/${e}/folders/`,"").split("/")[0]}/detail/viewer/items/${a}/issues/${o}`}return s}}};Dr(ay,"baseUrl","https://developer.api.autodesk.com/issues/v2");let ly=ay;const cy="APS";function uy(e){return e.sourceType===cy}const dy=class e extends Kv{constructor(t){super(t),Dr(this,"issuesACC"),Dr(this,"issuesBIM360"),Dr(this,"getIssue",(async(t,r)=>{var n,s,i;if(null==t)return null;const o=e.getProjectType(t),a=encodeURIComponent(r),l=t.id.replace("b.",""),c=null==(i=null==(s=null==(n=t.relationships)?void 0:n.issues)?void 0:s.data)?void 0:i.id;let u=null;switch(o){case"ACC":u=await this.issuesACC.getIssue(l,a);break;case"BIM360":u=await this.issuesBIM360.getIssue(c,a)}return null!==u?function(e,t){return{projectId:t,sourceType:cy,sourceData:e}}(u,l):null})),this.issuesACC=new oy(t),this.issuesBIM360=new ly(t)}static isAPSIssue(t){return t.sourceType===e.ISSUE_SOURCE_TYPE}async getIssueSourceURL(t,r,n,s){var i;const o=e.getProjectType(t),a=null==(i=t.id)?void 0:i.replace("b.","");switch(o){case"ACC":return await oy.getIssueSourceURL(a,r,n,s);case"BIM360":return await ly.getIssueSourceURL(a,r,n,s)}}};Dr(dy,"ISSUE_SOURCE_TYPE","APS"),Dr(dy,"getProjectType",(e=>{var t,r,n;return null==(n=null==(r=null==(t=null==e?void 0:e.attributes)?void 0:t.extension)?void 0:r.data)?void 0:n.projectType}));let hy=dy;const py=e=>/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/.test(e),fy=e=>{if("string"==typeof e)try{return decodeURIComponent(e)}catch{}return e};class gy{constructor(e,t){Dr(this,"id"),this.urn=e,this.source=t;const r=null==e?void 0:e.trim(),n=py(r)?window.atob(r):r;this.urn=n;const s=null==n?void 0:n.split(/:|\./);this.id=s.length>0?s[s.length-1]:n}static fromUrn(e){return new gy(e,e)}static fromUrl(e){return e.includes("docs.b360")?gy.getItemIdFromB360Url(e):e.includes("acc.autodesk")?gy.getItemIdFromACCUrl(e):e.includes("api.autodesk")?gy.getItemIdFromDataManagementUrl(e):null}static getItemIdFromB360Url(e){return gy.getItemIdFromUrl(e,"/","items")}static getItemIdFromACCUrl(e){return gy.getItemIdFromUrl(e,"=","entityId")}static getItemIdFromDataManagementUrl(e){return gy.getItemIdFromUrl(e,"/","versions")}static getItemIdFromUrl(e,t,r){const n=e.split(t),s=n.findIndex((e=>e.includes(r)));if(s>-1){let t=n[s+1];return t=(null==t?void 0:t.split(/\?|&/))[0],new gy(t,e)}return null}}const my=class e{constructor(e,t){Dr(this,"tokenInfo"),Dr(this,"dataManagement"),Dr(this,"derivatives"),Dr(this,"issues"),Dr(this,"search"),Dr(this,"regions"),Dr(this,"bimAccounts"),Dr(this,"accountFilter"),Dr(this,"supportedViewerFormats"),Dr(this,"getProviderName",(()=>"Autodesk")),Dr(this,"setToken",(e=>{this.tokenInfo=e})),Dr(this,"getToken",(async()=>{const e=this.tokenInfo.access_token??await this.tokenInfo.getToken();if(null===e)throw new Error("Invalid Token: token is null");return e})),Dr(this,"getUser",(async()=>{const e=await this.dataManagement.getUser();return`${null==e?void 0:e.name}`})),Dr(this,"checkPermissions",(async e=>void 0!==e.url&&e.url.length>0)),Dr(this,"setAccountFilter",(e=>{this.accountFilter=e})),Dr(this,"getDocument",(async e=>{const t=e,r=t.projectId,n=t.itemId.replace("urn:","").replace("_","/"),s=py(n)?window.atob(n):t.itemId,i=s.split("?")[0].replace("fs.file:vf.","dm.lineage:"),o=s.length>1?s.split("?")[1]:void 0,a=await this.getDocumentWithAttributes({projectId:r,itemId:i,versionId:o});return null===a?null:await this.validateAndFilterDocument(a)})),Dr(this,"getDocumentItem",(async e=>{const t=this.getProjectIdFromItemUrl(e.links.self.href),r=await this.getAttributes(t,e.attributes),n={displayName:(null==r?void 0:r.displayName)??"",fileName:(null==r?void 0:r.name)??"",url:e.links.self.href,attributes:r};return await this.validateAndFilterDocument(n)})),Dr(this,"validateAndFilterDocument",(async e=>{if(!this.isValidDocument(e))return null;const t=this.accountFilter;if(null==t)return e;const r=await this.filterDocuments([e],t);return null===r||0===r.length?null:r[0]})),Dr(this,"getDocumentByUrl",(async e=>(await this.runViewerUrlRule({viewerUrl:e}))[0])),Dr(this,"getDocumentByRule",(async(e,t)=>{const r=this.accountFilter;let n=[];if(e===Nr.BIMDocument){const e=t;n=await this.runBIMDocumentRule(e)}else if(e===Nr.ViewerUrl){const e=t;n=await this.runViewerUrlRule(e)}else{if(e!==Nr.DocumentName)throw Nr.ScheduleFeature,new Error(`Rule ${e} not supported`);{if(null==r)throw new Error("geobimAccounts is required for DocumentName rule");const e=t,s=await this.getFilteredAccounts(r);null!==s&&(n=await this.runDocumentNameRule(e,s))}}return null==r?n:await this.filterDocuments(n,r)??[]})),Dr(this,"searchRepository",(async(e,t)=>await this.search.search(e,t))),Dr(this,"mapAPSItemToIRepositoryItem",(async e=>{if(e.type===Xv.ITEMS||e.type===Xv.VERSIONS){const t=await this.getDocumentItem(e);return{id:e.id,label:(null==t?void 0:t.displayName)??"",document:t,item:null,children:null}}return{id:e.id,label:e.attributes.name,document:null,item:e,children:null}})),Dr(this,"getIssue",(async(e,t)=>{const r=await this.getBimAccount(e),n=null==r?void 0:r.id;if(void 0!==n){const r=await this.dataManagement.getProject(n,e),s=await this.issues.getIssue(r,t);return null!==s&&(s.sourceUrl=await this.getIssueSourceUrl(r,n,s)),s}return null})),Dr(this,"isDocumentIssue",((e,t)=>{const r=t.url;if(void 0!==r){const t=gy.fromUrl(fy(r)),n=gy.fromUrn(e);if(null!==t)return t.id===n.id}return!1})),Dr(this,"isValidDocument",(e=>{var t,r;if(null===e)return!1;const n=null==(t=e.attributes)?void 0:t.accountName,s=null==(r=e.attributes)?void 0:r.projectName;return null!=n&&(null==n?void 0:n.length)>0&&null!=s&&(null==s?void 0:s.length)>0})),Dr(this,"getAllAccounts",(async()=>{var e;if(void 0!==this.bimAccounts)return this.bimAccounts;const t={},r=(await this.dataManagement.getHubs()).filter((e=>{var t,r;return"hubs:autodesk.bim360:Account"===(null==(r=null==(t=e.attributes)?void 0:t.extension)?void 0:r.type)}));for(const n of r)if(void 0!==n.id){const r=(await this.dataManagement.getProjects(n.id)).map((e=>({id:e.id,name:e.attributes.name})));t[n.id]={id:n.id,projects:r,name:null==(e=n.attributes)?void 0:e.name}}return this.bimAccounts=t,this.bimAccounts})),Dr(this,"checkAccountAccess",(async e=>{const t=await this.getAllAccounts();return Object.keys(t).some((t=>t===e.accountId))})),Dr(this,"getFilteredAccounts",(async e=>{var t;if(null==e)return{};if(!await this.checkAccountAccess(e))return null;const r={},n=await this.getAllAccounts(),s=e;if(null!=s.projectIds&&s.projectIds.length>0){const e=null==(t=Object.values(n[s.accountId].projects))?void 0:t.filter((e=>{var t;return null==(t=s.projectIds)?void 0:t.includes(e.id)}));r[s.accountId]={id:s.accountId,name:n[s.accountId].name,projects:e}}else r[s.accountId]=n[s.accountId];return r})),Dr(this,"filterDocuments",(async(e,t)=>{const r=await this.getFilteredAccounts(t);return null===r?null:e.filter((e=>{var t,n;const s=null==(t=e.attributes)?void 0:t.accountName;if(null==s)return!1;const i=Object.values(r).find((e=>e.name===s));if(null==i)return!1;const o=null==(n=e.attributes)?void 0:n.projectName;return null!=o&&null!=i.projects.find((e=>e.name===o))}))})),Dr(this,"runBIMDocumentRule",(async e=>{const t=[],r=e.projectId,n=e.itemId,s=await this.getDocumentWithAttributes({projectId:r,itemId:n});return null!==s&&this.isValidDocument(s)&&t.push(s),t})),Dr(this,"runViewerUrlRule",(async e=>{const t=this.getProjectIdFromUrl(e.viewerUrl),r=this.getItemIdFromUrl(e.viewerUrl),n=await this.getDocumentWithAttributes({projectId:t,itemId:r});return null===n?[]:this.isValidDocument(n)?[n]:[]})),Dr(this,"getProjectIdFromUrl",(e=>e.includes("docs.b360")?this.getProjectIdFromB360Url(e):e.includes("acc.autodesk")?this.getProjectIdFromACCUrl(e):"")),Dr(this,"getProjectIdFromB360Url",(e=>{const t=e.split("/"),r=t.findIndex((e=>"projects"===e));return r>-1?`b.${t[r+1]}`:""})),Dr(this,"getProjectIdFromACCUrl",(e=>{const t=e.split("/");return t.findIndex((e=>"projects"===e))>-1?"b."+t[6].split("?")[0]:""})),Dr(this,"getItemIdFromUrl",(e=>e.includes("docs.b360")?this.getItemIdFromB360Url(e):e.includes("acc.autodesk")?this.getItemIdFromACCUrl(e):"")),Dr(this,"getItemIdFromB360Url",(e=>{const t=e.split("/"),r=t.findIndex((e=>"items"===e));return r>-1?decodeURIComponent(t[r+1]):""})),Dr(this,"getItemIdFromACCUrl",(e=>{const t=e.split("="),r=t.findIndex((e=>e.includes("entityId")));return r>-1?decodeURIComponent(t[r+1]):""})),Dr(this,"runDocumentNameRule",(async(e,t)=>{const r=[],n=e.documentName;for(const e of Object.values(t))for(const t of e.projects){const s=await this.runDocumentNameRuleOnProject(e.id,t.id,n);r.push(...s)}return r})),Dr(this,"runDocumentNameRuleOnProject",(async(e,t,r)=>{var n,s,i,o;const a=[],l=await this.dataManagement.getProject(e,t),c=null==(i=null==(s=null==(n=null==l?void 0:l.relationships)?void 0:n.rootFolder)?void 0:s.data)?void 0:i.id;if(null==c)return a;const u=await this.dataManagement.searchFolder(t,c,r.trim());for(const e of u){const r=await this.getAttributes(t,e.attributes);a.push({displayName:e.attributes.displayName,fileName:e.attributes.name,url:null==(o=e.links)?void 0:o.self.href,attributes:r})}return a})),Dr(this,"getAttributes",(async(e,t)=>{if(null==t)return;const r=["name","displayName","versionNumber","createUserName"],n={accountName:"",projectName:""};Object.keys(t).forEach((e=>{r.includes(e)&&(n[e]=t[e].toString())}));const s=await this.getAllAccounts(),i=Object.values(s).find((t=>t.projects.some((t=>t.id===e))));null!=(null==i?void 0:i.name)&&(n.accountName=i.name);const o=null==i?void 0:i.projects.find((t=>t.id===e));return null!=(null==o?void 0:o.name)&&(n.projectName=o.name),n})),Dr(this,"getRepositoryItems",(async e=>{if(null===e&&null!==this.accountFilter&&!await this.checkAccountAccess(this.accountFilter))return null;const t=this.getChildUrls(e),r=await this.dataManagement.getForgeData(t);if(null==r)return null;const n=[],s=this.accountFilter;for(let e=0;e<r.length;e++){const t=r[e],i=[...t.data.data,...t.data.included??[]];for(let e=0;e<i.length;e++){const t=i[e];if((null==s||await this.filterResult(t,s))&&t.type!==Xv.ITEMS){const e=await this.mapAPSItemToIRepositoryItem(t);null!=e&&n.push(e)}}}return n})),Dr(this,"getChildUrls",(e=>{const t=null==e?void 0:e.item;switch(null==t?void 0:t.type){case Xv.HUBS:return this.getHubChildUrls(t);case Xv.PROJECTS:return this.getProjectChildUrls(t);case Xv.FOLDERS:return this.getFolderChildUrls(t);default:return[]}})),Dr(this,"getHubChildUrls",(e=>null==e.relationships.projects?[]:[e.relationships.projects.links.related.href])),Dr(this,"getProjectChildUrls",(e=>null==e.relationships.topFolders?[]:[e.relationships.topFolders.links.related.href])),Dr(this,"getFolderChildUrls",(e=>null==e.relationships.contents?[]:[e.relationships.contents.links.related.href])),Dr(this,"getProjectIdFromItemUrl",(e=>{const t=e.split("/"),r=t.findIndex((e=>"projects"===e));return r>-1?t[r+1]:""})),Dr(this,"filterResult",(async(e,t)=>{const r=await this.getFilteredAccounts(t);if(null===r)return!1;if(e.type===Xv.HUBS)return null!=r[e.id];if(e.type===Xv.PROJECTS)return null!=Object.values(r).find((t=>null!=t.projects.find((t=>t.id===e.id))));if(e.type===Xv.ITEMS||e.type===Xv.VERSIONS){const t=await this.getViewerFormats(),r=e.attributes.displayName.split(".").pop();return t.some((e=>e.toLowerCase()===(null==r?void 0:r.toLowerCase())))}return!0})),Dr(this,"getViewerFormats",(async()=>{var e;if(null!=this.supportedViewerFormats)return this.supportedViewerFormats;const t=await this.derivatives.getFormats(),r=(null==(e=null==t?void 0:t.formats)?void 0:e.svf2)??[];return this.supportedViewerFormats=r.concat(this.getForgeViewerAdditionalSupportedFormats().filter((e=>!r.includes(e)))),this.supportedViewerFormats})),Dr(this,"getForgeViewerAdditionalSupportedFormats",(()=>["jpg","jpeg","png"])),Dr(this,"getDocumentWithAttributes",(async e=>{const t=await this.dataManagement.getBIMDocument(e);if(null===(t??null))return null;const r=await this.getAttributes(e.projectId,t.attributes);return{displayName:t.attributes.displayName,fileName:t.attributes.name,url:t.links.self.href,attributes:r}})),this.setToken(e.tokenInfo),this.dataManagement=new Zv(this.getToken),this.derivatives=new Qv(this.getToken),this.issues=new hy(this.getToken),this.search=new ey(this,this.dataManagement),this.regions=new ty(t),this.accountFilter=null}static async create(t){const r=await this.getApsRegionsInfo(t);return new e(t,r)}async getIssueSourceUrl(e,t,r){var n,s,i;const{projectType:o}=e.attributes.extension.data,a=await this.dataManagement.getHubRegion(t),l=this.regions.getDocumentsRoot(a,o);if(void 0===l)return;const c=null==(n=null==r?void 0:r.sourceData)?void 0:n.linkedDocuments;if(void 0!==c&&c.length>0){const t=c[0].urn;if(void 0!==t){const n=await this.dataManagement.getItem(e.id,t),o=null==(i=null==(s=null==n?void 0:n.links)?void 0:s.webView)?void 0:i.href;if(void 0!==o)return await this.issues.getIssueSourceURL(e,r,l,fy(o))}}}async getBimAccount(e){const t=this.accountFilter;if(null!==t){const r=await this.getFilteredAccounts(t);return null===r?void 0:Object.values(r).find((t=>null!=t.projects.find((t=>t.id===e))))}}};Dr(my,"getApsRegionsInfo",(async e=>{const t=e.apsRegionsInfoUrl;if(null!==t){const e=await my.getApsRegionsInfoFromPortal(t);if(null!==e)return e}return sy})),Dr(my,"getApsRegionsInfoFromPortal",(async e=>{try{const t=await fetch(e);if(null!=t&&t.ok)return await t.text()}catch(e){console.error("Unable to fetch APS regions config so using default regions config.",e)}return null}));const vy=(0,n.createContext)(void 0);function yy({options:e,children:t}){const[r,s]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[c,u]=(0,n.useState)(!1),[d,h]=(0,n.useState)(null),[p,f]=(0,n.useState)(null),[g,m]=(0,n.useState)(void 0),[v,y]=(0,n.useState)(void 0),[_,w]=(0,n.useState)(void 0);(0,n.useEffect)((()=>{c&&null!=(null==i?void 0:i.current)&&!a&&l(!0)}),[a,i,c]),(0,n.useEffect)((()=>{(async()=>{if(null!==e&&null!=(null==i?void 0:i.current)&&a){const t=new jr(i.current,e),r=await t.start();if(r===Ge.OK)s(t),h(null);else{const e=new He("GeoBIM APS Model Viewer Provider Error","Initialization Error Code:",r);h(e)}}})()}),[e,a,i]),(0,n.useEffect)((()=>{(async()=>{if(null!==r&&null!==p)try{await r.loadModel(p,g,v??[]),await r.showIssues(_??[]),h(null)}catch(e){const t=new He("GeoBIM APS Model Viewer Provider Error",e.message);h(t)}})()}),[r,p,g,v,_]);const b=(0,n.useCallback)((()=>{u(!1),null!==r&&r.dispose(),s(null),h(null),o(null),l(!1),f(null),w(void 0),m(void 0)}),[r]),S=(0,n.useCallback)((e=>{var t,r;(null==(t=null==i?void 0:i.current)?void 0:t.toString())!==(null==(r=null==e?void 0:e.current)?void 0:r.toString())&&(b(),o(e))}),[b,i]),A=(0,n.useCallback)((e=>{u(e)}),[]),E=(0,n.useCallback)((()=>{null!==r&&r.resize()}),[r]),I=(0,n.useCallback)(((e,t,r,n=[])=>{f(e),m(t),y(r);const s=[];for(const e of n)uy(e)&&s.push(e);w(s)}),[]),k=(0,n.useMemo)((()=>({viewerVisible:c,viewerError:d,setModelViewerContainerRef:S,showModelViewer:A,resizeModelViewer:E,viewDocument:I,unloadModelViewer:b})),[c,d,S,A,E,I,b]);return Cr(vy.Provider,{value:k,children:t})}function _y(){const e=(0,n.useContext)(vy);if(void 0===e)throw new Error("Must call useModelViewer inside of ModelViewerProvider");return e}const wy=Re({label:"viewerContainer",position:"relative",height:"100%",width:"100%"}),by=Re({label:"hiddenViewerContainer",position:"relative",height:"1px",width:"1px",zIndex:-1});function Sy(){const{viewerVisible:e,setModelViewerContainerRef:t,unloadModelViewer:r}=_y(),s=(0,n.useRef)(null),[i,o]=(0,n.useState)(!1),[a,l]=(0,n.useState)(!1);return(0,n.useEffect)((()=>(l(!1),()=>{l(!0)})),[]),(0,n.useEffect)((()=>(null==(null==s?void 0:s.current)||a||i||(t(s),o(!0)),()=>{a&&(r(),o(!1))})),[i,t,r,a]),Cr("div",{css:e?wy:by,ref:s})}const Ay=new Set(["children","localName","ref","style","className"]),Ey=new WeakMap,Iy=(e,t,r,n,s)=>{const i=null==s?void 0:s[t];void 0===i?(e[t]=r,null==r&&t in HTMLElement.prototype&&e.removeAttribute(t)):r!==n&&((e,t,r)=>{let n=Ey.get(e);void 0===n&&Ey.set(e,n=new Map);let s=n.get(t);void 0!==r?void 0===s?(n.set(t,s={handleEvent:r}),e.addEventListener(t,s)):s.handleEvent=r:void 0!==s&&(n.delete(t),e.removeEventListener(t,s))})(e,i,r)},ky=({react:e,tagName:t,elementClass:r,events:n,displayName:s})=>{const i=new Set(Object.keys(n??{})),o=e.forwardRef(((s,o)=>{const a=e.useRef(new Map),l=e.useRef(null),c={},u={};for(const[e,t]of Object.entries(s))Ay.has(e)?c["className"===e?"class":e]=t:i.has(e)||e in r.prototype?u[e]=t:c[e]=t;return e.useLayoutEffect((()=>{if(null===l.current)return;const e=new Map;for(const t in u)Iy(l.current,t,s[t],a.current.get(t),n),a.current.delete(t),e.set(t,s[t]);for(const[e,t]of a.current)Iy(l.current,e,void 0,t,n);a.current=e})),e.useLayoutEffect((()=>{var e;null==(e=l.current)||e.removeAttribute("defer-hydration")}),[]),c.suppressHydrationWarning=!0,e.createElement(t,{...c,ref:e.useCallback((e=>{l.current=e,"function"==typeof o?o(e):null!==o&&(o.current=e)}),[o])})}));return o.displayName=s??r.name,o};var Oy=class{resolve(e){}reject(e){}constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}};function Ty(e,t,r){const{subscribe:n}=function(e){const t=e.join(","),r=Cy[t];if(void 0!==r)return r;const n=new Set,s=new MutationObserver((e=>n.forEach((t=>t(e)))));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const i={subscribe:e=>(n.add(e),()=>{n.delete(e),0===n.size&&(s.disconnect(),Cy[t]=void 0)})};return Cy[t]=i,i}(t);return n((t=>{const n=t.some((t=>function(e,t){let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1}(e,t.target)));n&&r()}))}var Cy={};function xy(e,t,r){const n=function(e,t){var r,n;let s=e;for(;s;){const e=null==(r=s.closest)?void 0:r.call(s,t);if(e)return e;const i=null==(n=s.getRootNode)?void 0:n.call(s);if(i===globalThis.document)return null;s=i.host}return null}(e,`[${t}]`);return(null==n?void 0:n.getAttribute(t))??r}function Ry(e,t,...r){try{return null==e?void 0:e.call(t,...r)}catch(t){console.error(t,e)}}async function jy(e,t,...r){try{const n=null==e?void 0:e.call(t,...r);return n instanceof Promise?await n:n}catch(t){console.error(t,e)}}var Py=new Set(["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"]),Dy="en",Uy={pt:"pt-PT",nb:"no",zh:"zh-CN"};async function Ly(e,t,r=""){const n=`${t}/${r}`,s=`${n}${e}.json`;return Ny[s]??(Ny[s]=$y(e,n)),await Ny[s]}var Ny={};async function $y(e,t){const r=`${t}${e}.json`;try{const e=await fetch(r);if(e.ok)return await e.json()}catch(e){return console.error(e),{}}return e===Dy?{}:await $y(Dy,t)}function My(e){var t;const r=xy(e,"lang",(null==(t=globalThis.navigator)?void 0:t.language)||Dy);return{lang:r,t9nLocale:Fy(r)}}function Fy(e){const[t,r]=e.split("-"),n=t.toLowerCase();let s=n;return r&&(s=`${n}-${r.toUpperCase()}`),s=Uy[s]??s,Py.has(s)?s:r?Fy(n):Dy}function By(e,t,r,n){let s;const i=()=>{(async function(e,t,r=e.tagName.toLowerCase().split("-").slice(1).join("-")){const{lang:n,t9nLocale:s}=My(e),i=`${t}/${r}/t9n`,o="messages.",a=null===r?{}:await Ly(s,i,o);return{lang:n,t9nLocale:s,t9nStrings:a}})(e,t(),n).then((e=>{(null==s?void 0:s.lang)===e.lang&&s.t9nLocale===e.t9nLocale&&s.t9nStrings===e.t9nStrings||r(e),s=e})).catch(console.error)};return queueMicrotask(i),Ty(e,["lang"],i)}var qy=e=>e.replace(zy,((e,t)=>`${0===t?"":"-"}${e.toLowerCase()}`)),zy=/[A-Z]+(?![a-z])|[A-Z]/gu;var Vy=4;function Wy(e){return void 0!==e}function Gy(e){var t,r;let n=e;for(;n=n.parentNode??n.host;)if(null==(t=null==n?void 0:n.constructor)?void 0:t.lumina){const t=n;return(null==(r=t.manager)?void 0:r.loadedCalled)||t._offspring.push(e),t._postLoad.promise}return!1}var Hy=Object.defineProperty;var Jy=globalThis.HTMLElement??function(e){const t=e.split(":");return 1===t.length?[t[0],qy(t[0])]:t};function Ky([e,t]){this[e]=t}(class extends Jy{constructor(){super(),this._store={},this._pendingAttributes=[],this._postLoad=new Oy,this._postLoaded=new Oy,this._offspring=[],this._saveInstanceProperties();const e=this.constructor;e._LitConstructor?this._initializeComponent({a:e._LitConstructor}):e._loadPromise.then(this._initializeComponent.bind(this)).catch((e=>{this._postLoaded.reject(e),setTimeout((()=>{throw e}))}))}static _initializePrototype(){var e,t,r;null==(e=this._properties)||e.forEach(this._bindProp,this),null==(t=this._asyncMethods)||t.forEach(this._bindAsync,this),null==(r=this._syncMethods)||r.forEach(this._bindSync,this)}static _bindProp(e){Hy(this.prototype,e,{configurable:!0,enumerable:!0,get(){return this._store[e]},set(t){this._store[e]=t}})}static _bindAsync(e){Hy(this.prototype,e,{async value(...t){this._litElement||await this._postLoaded.promise;const r=this._litElement;return await r[e](...t)},configurable:!0})}static _bindSync(e){Hy(this.prototype,e,{value(...t){return this._litElement[e](...t)},configurable:!0})}get manager(){var e;return null==(e=this._litElement)?void 0:e.manager}_saveInstanceProperties(){var e;const t=this.constructor,r=this;null==(e=t._properties)||e.forEach((e=>{Object.hasOwn(this,e)&&(this._store[e]=r[e],delete r[e])}))}attributeChangedCallback(e,t,r){var n;null==(n=this._litElement)||n.attributeChangedCallback(e,t,r),this._litElement||this._pendingAttributes.push(e)}connectedCallback(){var e,t;this._litElement?null==(t=(e=this._litElement).connectedCallback)||t.call(e):queueMicrotask((()=>{this._ancestorLoad=Gy(this)}))}disconnectedCallback(){var e,t;null==(t=null==(e=this._litElement)?void 0:e.disconnectedCallback)||t.call(e)}async componentOnReady(){return await this._postLoaded.promise,this}_initializeComponent(e){var t;const r=this.constructor,n=r._name,s=this._store,i=Object.values(e).find((e=>e.tagName===n));const o=`${n}--lazy`;let a=i;for(;a&&!Object.hasOwn(a,"lumina");)a=Object.getPrototypeOf(a);!function(e){const t=e.prototype,r=Element.prototype;Object.hasOwn(t,"isConnected")||(t.setAttribute=function(e,t){r.setAttribute.call(this.el,e,t)},t.removeAttribute=function(e){r.removeAttribute.call(this.el,e)},Hy(t,"isConnected",{get(){return Reflect.get(r,"isConnected",this.el)}}));0}(a);!r._LitConstructor&&(r._LitConstructor=i,customElements.define(o,i)),i.lazy=this;const l=document.createElement(o);i.lazy=void 0,this._litElement=l,this._store=l,this._pendingAttributes.forEach((e=>{const t=this.getAttribute(e);l.attributeChangedCallback(e,null,t)})),Object.entries(s).forEach(Ky,l);const c=this.isConnected;(c||this._ancestorLoad)&&(null==(t=l.connectedCallback)||t.call(l),c||l.disconnectedCallback())}addController(){}requestUpdate(){var e;null==(e=this._litElement)||e.requestUpdate()}}).lumina=!0;var Yy={};var Zy,Xy=Symbol.for("controller");function Qy(e){Zy!==e&&(Zy=e,queueMicrotask((()=>{Zy===e&&(Zy=void 0)})))}function e_(e){return Zy}var t_,r_=[];function n_(e){if(void 0===e)return void(r_=[]);const t=r_.indexOf(e);r_=-1===t?[...r_,e]:r_.slice(0,t+1),queueMicrotask((()=>{r_=[]}))}function s_(){return r_}var i_,o_=async(e,t)=>{const r=l_(e);if(void 0===r)return e;if(await r.ready,"function"==typeof t){0;const e=r.watchExports((r=>t(r,e)))}return r.exports},a_=async e=>{const t=l_(e);return await t.ready,t},l_=e=>{const t=e_().manager.internals.resolveExports(e);if(void 0!==t)return t;if((e=>"object"==typeof e&&null!==e&&(Xy in e||"hostConnected"in e||"hostDisconnected"in e||"hostUpdate"in e||"hostUpdated"in e))(e))return e;const r=function(){const e=t_;return t_=void 0,e}();return void 0!==r?r:void 0},c_={readOnly:!1},u_=new WeakMap;i_=Xy;var d_=class{constructor(e){this._callbacks={hostConnected:[],hostDisconnected:[],hostLoad:[],hostLoaded:[],hostUpdate:[],hostUpdated:[],hostDestroy:[],hostLifecycle:[]},this._ready=new Oy,this._lifecycleCleanups=[],this.connectedCalled=!1,this._loadCalled=!1,this.loadedCalled=!1,this[i_]=!0,this.ready=this._ready.promise,this._exports=f_(this),this._exportWatchers=new Set;const t=e??e_(new.target.name);this.component=t,this.component.addController(this);void 0===this.component.manager||(n_(this),queueMicrotask((()=>this.catchUpLifecycle())))}catchUpLifecycle(){const{manager:e}=this.component;!e.connectedCalled||this.connectedCalled||this.triggerConnected();!e._loadCalled||this.triggerLoad().then((()=>{!e.loadedCalled||this.triggerLoaded()})).catch(console.error)}get exports(){return this._exports}set exports(e){const t=this._exports;t!==e&&(this._exports=e,this._exportWatchers.forEach(Ry),this.connectedCalled&&!1!==this.assignedProperty&&this.component.requestUpdate(this.assignedProperty,t)),this._ready.resolve(e)}setProvisionalExports(e,t=!0){this._exports=t?f_(e):e,this._exportWatchers.forEach(Ry)}watchExports(e){const t=()=>e(this._exports);return this._exportWatchers.add(t),()=>{this._exportWatchers.delete(t)}}get use(){return Qy(this.component),o_}get useRef(){return Qy(this.component),a_}get useRefSync(){return Qy(this.component),l_}controllerRemoved(){this.component.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this._callbacks.hostConnected.push(e)}onDisconnected(e){this._callbacks.hostDisconnected.push(e)}onLoad(e){this._callbacks.hostLoad.push(e)}onLoaded(e){this._callbacks.hostLoaded.push(e)}onUpdate(e){this._callbacks.hostUpdate.push(e)}onUpdated(e){this._callbacks.hostUpdated.push(e)}onDestroy(e){this._callbacks.hostDestroy.push(e)}onLifecycle(e){this._callbacks.hostLifecycle.push(e),this.connectedCalled&&this.component.el.isConnected&&this._callLifecycle(e)}triggerConnected(){const e=this;e.hostConnected&&Ry(e.hostConnected,e),this._callbacks.hostConnected.forEach(Ry),this.triggerLifecycle(),this.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Ry(e.hostDisconnected,e),this._callbacks.hostDisconnected.forEach(Ry),this._lifecycleCleanups.forEach(Ry),this._lifecycleCleanups=[]}async triggerLoad(){if(this._loadCalled)return;this._loadCalled=!0;const e=this;e.hostLoad&&await jy(e.hostLoad,e),this._callbacks.hostLoad.length>0&&await Promise.allSettled(this._callbacks.hostLoad.map(jy)),this._ready.resolve(this._exports)}triggerLoaded(){if(this.loadedCalled)return;const e=this;e.hostLoaded&&Ry(e.hostLoaded,e),this._callbacks.hostLoaded.forEach(Ry),this.loadedCalled=!0}triggerUpdate(e){const t=this;t.hostUpdate&&Ry(t.hostUpdate,t,e),this._callbacks.hostUpdate.forEach(h_,e)}triggerUpdated(e){const t=this;t.hostUpdated&&Ry(t.hostUpdated,t,e),this._callbacks.hostUpdated.forEach(h_,e)}triggerDestroy(){const e=this;e.hostDestroy&&Ry(e.hostDestroy,e),this._callbacks.hostDestroy.forEach(Ry)}triggerLifecycle(){const e=this;e.hostLifecycle&&this._callLifecycle((()=>e.hostLifecycle())),this._callbacks.hostLifecycle.forEach(this._callLifecycle,this)}_callLifecycle(e){Qy(this.component);const t=Ry(e);(Array.isArray(t)?t:[t]).forEach((e=>{"function"==typeof e?this._lifecycleCleanups.push(e):"object"==typeof e&&"function"==typeof e.remove&&this._lifecycleCleanups.push(e.remove)}))}};function h_(e){Ry(e,void 0,this)}var p_=d_;function f_(e){if("object"!=typeof e&&"function"!=typeof e||null===e)return e;const t=new Proxy(e,{get(e,r,n){if(!g_.has(r)||!(r in e)||e[r]!==t)return r in e||r in Promise.prototype||"symbol"==typeof r?"function"==typeof e?e[r]:Reflect.get(e,r,n):void 0},set:(e,t,r,n)=>Reflect.set(e,t,r,n)});return t}var g_=new Set(["exports","_exports"]);var m_=void 0;function v_(){Array.from((null==m_?void 0:m_.entries())??[]).forEach((([e,{callbacks:t}])=>{const r=Object.keys(e);t.forEach((e=>e(r)))})),m_=void 0}function y_(e,t,r){var n;const s=t;const i=e.manager.internals;(n=i.allWatchers)[s]??(n[s]=[]);const o=i.allWatchers[s],a=r,l=(e,t,r)=>Ry(a,null,e,t,r);return o.push(l),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1)}}var __=class{constructor(e){this.enabledWatchers={},this.allWatchers={},this.enableReadonly=()=>{if(this.enableReadonly=void 0,!this.component.manager.isLit)return;const e=this.component.manager.internals;Object.entries(e.members).forEach((([t,[r]])=>{var n;2048&r&&((n=e.setters)[t]??(n[t]=[]),e.setters[t].push(e.readonlySetter))}))},this.trackedValue=S_,this.keyTrackers=[],this.getters={},this.setters={},this.accessorGetter={},this.accessorSetter={},this._exports=new WeakMap,this.readonlySetter=(e,t,r)=>{if(c_.readOnly)return e;throw new Error(`Cannot assign to read-only property "${r}" of ${this.component.el.tagName.toLowerCase()}. Trying to assign "${String(e)}"`)},this.component=e}firePropTrackers(e,t){const r=this.keyTrackers;this.trackedValue=S_,this.keyTrackers=[],r.forEach((r=>r(e,t)))}getSetProxy(e){const t=this.component,r=t.constructor.prototype;if(this._getSetProxy(r,e,"class"),t.manager.isLit)return;const n=t.el.constructor.prototype;r!==n&&this._getSetProxy(n,e,"html")}_getSetProxy(e,t,r){const n=((e,t)=>{var r,n;return null==(n=null==(r=e.manager.internals.members)?void 0:r[t])?void 0:n[0]})(this.component,t);let s;do{s=Object.getOwnPropertyDescriptor(e,t)}while(!s&&(e=Object.getPrototypeOf(e)));if(!s)return;const i=s.get,o=s.set,a=b_ in i,l=b_ in o;if(a&&l)return;const c=!a,u=!l,d=c?function(){let e=i.call(this);const r=u_.get(this);if(void 0===r)return e;const n=r.manager.internals;e=n.accessorGetter[t](e,t);const s=n.getters[t]??w_;for(let r=0;r<s.length;r++)e=s[r](e,t);return e}:i,h=u?function(e){var r;const s=i.call(this),a=u_.get(this);if(void 0===a)return void o.call(this,e);let l=a.manager.isLit?e??void 0:function(e,t=8){return null==e||"object"==typeof e||"function"==typeof e?e:4&t?"false"!==e&&(""===e||!!e):2&t?Number.parseFloat(e):1&t?String(e):e}(e,n);const c=a.manager.internals;if(l===s)o.call(this,l);else{const e=c.setters[t]??w_;for(let r=0;r<e.length&&(l=e[r](l,s,t),l!==s);r++);l=c.accessorSetter[t](l,s,t),o.call(this,l),l!==s&&(null==(r=c.enabledWatchers[t])||r.forEach((e=>e(l,s,t))))}c.keyTrackers.length>0&&(null==c||c.firePropTrackers(t,e))}:o;c&&(d[b_]=!0),u&&(h[b_]=!0),Object.defineProperty(e,t,{...s,get:d,set:h})}markExports(e,t){("object"==typeof t&&null!==t||"function"==typeof t)&&this._exports.set(t,e)}resolveExports(e){return"object"==typeof e&&null!==e||"function"==typeof e?this._exports.get(e):void 0}},w_=[],b_=Symbol(),S_=Symbol();function A_(e=[e_(),...s_()],t,r){const n=Array.isArray(e)?e:[e];let s=n.length+1;const i=e=>{s-=1,void 0!==e&&(s=Math.min(s,0)),0===s&&t(e)};n.forEach((e=>function(e,t,r){const n=Object.keys(e),s=n.length;void 0===m_&&queueMicrotask(v_),m_??(m_=new Map);let i=m_.get(e);return void 0===i&&(i={callbacks:[],keyCount:s},m_.set(e,i)),i.keyCount!==s&&(i.callbacks.forEach((e=>e(n))),i.callbacks=[],i.keyCount=s),i.callbacks.push((n=>{const i=e=>Ry(t,null,e),o=n[s];void 0===o?i(void 0):e[o]===r?i(o):i(void 0)})),r}(e,(t=>i(void 0===t?void 0:{key:t,host:e,isReactive:!1})),r)));const o=n.find((e=>"manager"in e&&"object"==typeof e.manager&&e.manager.component===e));return o&&function(e,t,r){const n=e.manager.internals;n.trackedValue!==S_&&n.trackedValue!==r&&n.firePropTrackers(void 0,void 0),0===n.keyTrackers.length&&queueMicrotask((()=>n.firePropTrackers(void 0,void 0))),n.trackedValue=r,n.keyTrackers.push(((e,n)=>Ry(t,void 0,r===n?e:void 0)))}(o,(e=>i(void 0===e?void 0:{key:e,host:o,isReactive:!0})),r),r}var E_=class extends p_{constructor(e,t){const r="addController"in e;const n=new Set;const s=e;if(s.addController=function(t){var r;n.add(t),!(Xy in t)&&e.renderRoot&&e.el.isConnected&&(null==(r=t.hostConnected)||r.call(t))},s.removeController=function(e){var t;n.delete(e),null==(t=e.controllerRemoved)||t.call(e)},!r){const r=t??e.constructor.__forceUpdate;s.requestUpdate=()=>r(e)}super(e),this.internals=new __(this.component),this.destroyed=!1,this._updatePromise=new Oy,this._originalLifecycles={},this.isLit=r,this.component.manager=this,function(e,t){var r;if(t){const t=e.constructor.elementProperties;e.manager.internals.members=Object.fromEntries(Array.from(t,(([e,t])=>t.noAccessor?void 0:[e,[(t.readOnly?2048:0)|(t.state?32:16)]])).filter(Wy))}else{const t=e.constructor,n=(null==(r=t.__registerControllers)?void 0:r.call(t,e))??void 0;if(t.__registerControllers=void 0,"object"!=typeof n)throw new Error("Failed to retrieve component meta");e.manager.internals.members=Object.fromEntries(Object.entries(n).filter((([e,[t]])=>!!(63&t))))}}(e,r),this._controllers=n,this.exports=void 0,this.hasDestroy=I_ in this.component&&"function"==typeof this.component.destroy,this._bindLifecycleMethods();const i=this.internals;Object.keys(i.members).forEach((e=>{i.accessorGetter[e]=O_,i.accessorSetter[e]=O_,i.getSetProxy(e)})),r?this.internals.enabledWatchers=this.internals.allWatchers:Object.defineProperty(e,"updateComplete",{get:async()=>await this._updatePromise.promise}),queueMicrotask(i.enableReadonly),Qy(e),u_.set(e.el,e),u_.set(e,e)}_bindLifecycleMethods(){const e=this.component,t=this.isLit,r=e.el===e;this._originalLifecycles={_connectedCallback:t||r?void 0:e.connectedCallback,_disconnectedCallback:t||r?void 0:e.disconnectedCallback,_load:t?e.load:e.componentWillLoad,_loaded:t?e.loaded:e.componentDidLoad,_willUpdate:t?void 0:e.componentWillUpdate,_updated:t?void 0:e.componentDidUpdate,_destroy:e.destroy};const n=this._connectedCallback.bind(this),s=this._disconnectedCallback.bind(this),i=this._update.bind(this),o=this._updated.bind(this);t?e.constructor.prototype.addController.call(e,{hostConnected:n,hostDisconnected:s,hostUpdate:i,hostUpdated:o}):(e.connectedCallback=n,e.disconnectedCallback=s,e.componentWillLoad=this._load.bind(this),e.componentDidLoad=this._loaded.bind(this),e.componentWillUpdate=i,e.componentDidUpdate=o),this.hasDestroy&&(e.destroy=this.destroy.bind(this))}_connectedCallback(){var e,t;if(this.destroyed){const e=this.component.el.tagName.toLowerCase();throw this.component.el.remove(),new Error(`The ${e} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${I_} prop.`)}void 0!==this._autoDestroyTimeout&&clearTimeout(this._autoDestroyTimeout);const r=this.internals;r.enabledWatchers=r.allWatchers,v_(),null==(e=r.enableReadonly)||e.call(r),this._controllers.forEach(T_),null==(t=this._originalLifecycles._connectedCallback)||t.call(this.component)}_disconnectedCallback(){var e;this.destroyed||(this._controllers.forEach(C_),null==(e=this._originalLifecycles._disconnectedCallback)||e.call(this.component),this.hasDestroy&&this._setAutoDestroyTimeout())}async _load(){var e;await Promise.allSettled(Array.from(this._controllers,x_)),await(null==(e=this._originalLifecycles._load)?void 0:e.call(this.component)),this.hasDestroy&&y_(this.component,I_,(()=>this._setAutoDestroyTimeout()))}_loaded(){var e;this._controllers.forEach(R_),null==(e=this._originalLifecycles._loaded)||e.call(this.component)}_update(){var e;const t=this.component;return this._controllers.forEach(j_,t.$changes),null==(e=this._originalLifecycles._willUpdate)?void 0:e.call(this.component)}_updated(){var e;const t=this.component;if(this._controllers.forEach(P_,t.$changes),null==(e=this._originalLifecycles._updated)||e.call(this.component),this.isLit)t.$changes=new Map;else{const e=this._updatePromise;this._updatePromise=new Oy,e.resolve(!0)}}async destroy(){var e;if(!this.destroyed){if(this.component.el.isConnected){this.hasDestroy=!1;try{this.component.el.remove()}finally{this.hasDestroy=!0}}this._autoDestroyTimeout=void 0,this.destroyed=!0,this._controllers.forEach(D_),this._controllers.clear(),await(null==(e=this._originalLifecycles._destroy)?void 0:e.call(this.component))}}_setAutoDestroyTimeout(){if(void 0!==this._autoDestroyTimeout&&clearTimeout(this._autoDestroyTimeout),!this.component.el.isConnected&&!this.component.autoDestroyDisabled){const e=()=>{this.destroy().catch(console.error)};this._autoDestroyTimeout=function(e,t){const r=t/Vy;let n=0;const s=setInterval((()=>{n+=r,n>=t&&(clearInterval(s),e())}),r);return s}(e,k_)}}};var I_="autoDestroyDisabled",k_=1e3,O_=e=>e;function T_(e){"triggerConnected"in e?e.triggerConnected():Ry(e.hostConnected,e)}function C_(e){"triggerDisconnected"in e?e.triggerDisconnected():Ry(e.hostDisconnected,e)}async function x_(e){"triggerLoad"in e?await e.triggerLoad():await jy(e.hostLoad,e)}function R_(e){"triggerLoaded"in e?e.triggerLoaded():Ry(e.hostLoaded,e)}function j_(e){"triggerUpdate"in e?e.triggerUpdate(this):Ry(e.hostUpdate,e,this)}function P_(e){"triggerUpdated"in e?e.triggerUpdated(this):Ry(e.hostUpdated,e,this)}function D_(e){"triggerDestroy"in e?e.triggerDestroy():Ry(e.hostDestroy,e)}var U_,L_=e=>t=>N_(t,e),N_=(U_=class extends d_{constructor(e,t){super(e);const r=this.exports;try{Qy(this.component);const e=t(this.component,this),n=this.exports!==r;if(e instanceof Promise){n||this.setProvisionalExports(e);const t=e.then((e=>{this.exports=e,super.catchUpLifecycle()})).catch((e=>{this._ready.reject(e),console.error(e)}));this.onLoad((async()=>await t))}else n&&void 0===e||(this.exports=e),queueMicrotask((()=>super.catchUpLifecycle()))}catch(e){this._ready.reject(e),console.error(e)}}catchUpLifecycle(){}},(...e)=>{const t=s_(),r=new U_(...e),n=r.exports;n_(t.at(-1));const s=r.component.manager.internals;var i;return s.markExports(r,n),r.watchExports((e=>s.markExports(r,e))),t_!==(i=r)&&(t_=i,queueMicrotask((()=>{t_===i&&(t_=void 0)}))),A_([r.component,...t].reverse(),(e=>void 0===e?void 0:function(e,{host:t,key:r,isReactive:n},s){const i=t,o=i[r]!==e.exports,a=i[r]!==s,l=s!==e.exports;o&&!a&&l&&(i[r]=e.exports);const c=t===e.component;if(c){if(n){const t=e.component.manager.internals;a&&t.markExports(e,i[r]),y_(e.component,r,(r=>{r!==e.exports&&t.markExports(e,r)}))}e.assignedProperty=n?void 0:r}e.watchExports((()=>{var t;if(i[r]===e.exports)return;const n=e.component.manager;(null==(t=n.internals.setters[r])?void 0:t.includes(n.internals.readonlySetter))?function(e){c_.readOnly=!0;try{return e()}finally{c_.readOnly=!1}}((()=>{i[r]=e.exports})):i[r]=e.exports}))}(r,e,n)),n)}),$_=(e,t)=>new M_(e,t),M_=class extends d_{constructor(e,t){super(),this._attributes=e,this._callback=t,this._observer=new MutationObserver((r=>{r.forEach((r=>{e.includes(r.attributeName)&&t.call(this.component,this.component.el.getAttribute(r.attributeName),r.oldValue,r.attributeName)}))}))}hostConnected(){this._attributes.forEach((e=>{this.component.el.hasAttribute(e)&&this._callback.call(this.component,null,this.component.el.getAttribute(e),e)})),this._observer.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this._attributes})}hostDisconnected(){this._observer.disconnect()}},F_=e=>(t={})=>N_(void 0,((r,n)=>{const s=My(r.el),i={_lang:s.lang,_t9nLocale:s.t9nLocale,_loading:!0},o=r;function a(e){const t=n.exports,r=t._original??t,s=B_(r,e);e&&(s._original=r),n.exports=s}return n.onLifecycle((()=>By(r.el,(()=>e("./assets")),(({t9nLocale:e,t9nStrings:t,lang:s})=>{const i={...t,_lang:s,_t9nLocale:e,_loading:!1};n.exports=i;const l=t.componentLabel;"string"==typeof l&&"label"in r&&null==r.label&&(r.label??(r.label=l)),a(o.messageOverrides)}),t.name))),"messageOverrides"in o&&n.onLifecycle((()=>y_(o,"messageOverrides",a))),t.blocking?(n.setProvisionalExports(i,!1),n.ready):i}));function B_(e,t){if(!t)return e;const r={...e};return Object.entries(t).forEach((([t,n])=>{r[t]="object"==typeof n?B_(e[t],n):n??e[t]})),r}const q_=globalThis,z_=q_.ShadowRoot&&(void 0===q_.ShadyCSS||q_.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,V_=Symbol(),W_=new WeakMap;let G_=class{constructor(e,t,r){if(this._$cssResult$=!0,r!==V_)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(z_&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=W_.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&W_.set(t,e))}return e}toString(){return this.cssText}};const H_=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[n+1]),e[0]);return new G_(r,e,V_)},J_=z_?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return(e=>new G_("string"==typeof e?e:e+"",void 0,V_))(t)})(e):e,{is:K_,defineProperty:Y_,getOwnPropertyDescriptor:Z_,getOwnPropertyNames:X_,getOwnPropertySymbols:Q_,getPrototypeOf:ew}=Object,tw=globalThis,rw=tw.trustedTypes,nw=rw?rw.emptyScript:"",sw=tw.reactiveElementPolyfillSupport,iw=(e,t)=>e,ow={toAttribute(e,t){switch(t){case Boolean:e=e?nw:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},aw=(e,t)=>!K_(e,t),lw={attribute:!0,type:String,converter:ow,reflect:!1,useDefault:!1,hasChanged:aw};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),tw.litPropertyMetadata??(tw.litPropertyMetadata=new WeakMap);let cw=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=lw){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,t);void 0!==n&&Y_(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){const{get:n,set:s}=Z_(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:n,set(t){const i=null==n?void 0:n.call(this);null==s||s.call(this,t),this.requestUpdate(e,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??lw}static _$Ei(){if(this.hasOwnProperty(iw("elementProperties")))return;const e=ew(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(iw("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(iw("properties"))){const e=this.properties,t=[...X_(e),...Q_(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(J_(e))}else void 0!==e&&t.push(J_(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),null==(e=this.constructor.l)||e.forEach((e=>e(this)))}addController(e){var t;(this._$EO??(this._$EO=new Set)).add(e),void 0!==this.renderRoot&&this.isConnected&&(null==(t=e.hostConnected)||t.call(e))}removeController(e){var t;null==(t=this._$EO)||t.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(z_)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const r of t){const t=document.createElement("style"),n=q_.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=r.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null==(e=this._$EO)||e.forEach((e=>{var t;return null==(t=e.hostConnected)?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null==(e=this._$EO)||e.forEach((e=>{var t;return null==(t=e.hostDisconnected)?void 0:t.call(e)}))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){var r;const n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(void 0!==s&&!0===n.reflect){const i=(void 0!==(null==(r=n.converter)?void 0:r.toAttribute)?n.converter:ow).toAttribute(t,n.type);this._$Em=e,null==i?this.removeAttribute(s):this.setAttribute(s,i),this._$Em=null}}_$AK(e,t){var r,n;const s=this.constructor,i=s._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=s.getPropertyOptions(i),o="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null==(r=e.converter)?void 0:r.fromAttribute)?e.converter:ow;this._$Em=i,this[i]=o.fromAttribute(t,e.type)??(null==(n=this._$Ej)?void 0:n.get(i))??null,this._$Em=null}}requestUpdate(e,t,r){var n;if(void 0!==e){const s=this.constructor,i=this[e];if(r??(r=s.getPropertyOptions(e)),!((r.hasChanged??aw)(i,t)||r.useDefault&&r.reflect&&i===(null==(n=this._$Ej)?void 0:n.get(e))&&!this.hasAttribute(s._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:n,wrapped:s},i){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,i??t??this[e]),!0!==s||void 0!==i)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===n&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e){const{wrapped:e}=r,n=this[t];!0!==e||this._$AL.has(t)||void 0===n||this.C(t,void 0,r,n)}}let t=!1;const r=this._$AL;try{t=this.shouldUpdate(r),t?(this.willUpdate(r),null==(e=this._$EO)||e.forEach((e=>{var t;return null==(t=e.hostUpdate)?void 0:t.call(e)})),this.update(r)):this._$EM()}catch(e){throw t=!1,this._$EM(),e}t&&this._$AE(r)}willUpdate(e){}_$AE(e){var t;null==(t=this._$EO)||t.forEach((e=>{var t;return null==(t=e.hostUpdated)?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach((e=>this._$ET(e,this[e])))),this._$EM()}updated(e){}firstUpdated(e){}};cw.elementStyles=[],cw.shadowRootOptions={mode:"open"},cw[iw("elementProperties")]=new Map,cw[iw("finalized")]=new Map,null==sw||sw({ReactiveElement:cw}),(tw.reactiveElementVersions??(tw.reactiveElementVersions=[])).push("2.1.0");const uw=globalThis,dw=uw.trustedTypes,hw=dw?dw.createPolicy("lit-html",{createHTML:e=>e}):void 0,pw="$lit$",fw=`lit$${Math.random().toFixed(9).slice(2)}$`,gw="?"+fw,mw=`<${gw}>`,vw=document,yw=()=>vw.createComment(""),_w=e=>null===e||"object"!=typeof e&&"function"!=typeof e,ww=Array.isArray,bw="[ \t\n\f\r]",Sw=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Aw=/-->/g,Ew=/>/g,Iw=RegExp(`>|${bw}(?:([^\\s"'>=/]+)(${bw}*=${bw}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),kw=/'/g,Ow=/"/g,Tw=/^(?:script|style|textarea|title)$/i,Cw=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),xw=Cw(1),Rw=Cw(2),jw=Symbol.for("lit-noChange"),Pw=Symbol.for("lit-nothing"),Dw=new WeakMap,Uw=vw.createTreeWalker(vw,129);function Lw(e,t){if(!ww(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==hw?hw.createHTML(t):t}let Nw=class e{constructor({strings:t,_$litType$:r},n){let s;this.parts=[];let i=0,o=0;const a=t.length-1,l=this.parts,[c,u]=((e,t)=>{const r=e.length-1,n=[];let s,i=2===t?"<svg>":3===t?"<math>":"",o=Sw;for(let t=0;t<r;t++){const r=e[t];let a,l,c=-1,u=0;for(;u<r.length&&(o.lastIndex=u,l=o.exec(r),null!==l);)u=o.lastIndex,o===Sw?"!--"===l[1]?o=Aw:void 0!==l[1]?o=Ew:void 0!==l[2]?(Tw.test(l[2])&&(s=RegExp("</"+l[2],"g")),o=Iw):void 0!==l[3]&&(o=Iw):o===Iw?">"===l[0]?(o=s??Sw,c=-1):void 0===l[1]?c=-2:(c=o.lastIndex-l[2].length,a=l[1],o=void 0===l[3]?Iw:'"'===l[3]?Ow:kw):o===Ow||o===kw?o=Iw:o===Aw||o===Ew?o=Sw:(o=Iw,s=void 0);const d=o===Iw&&e[t+1].startsWith("/>")?" ":"";i+=o===Sw?r+mw:c>=0?(n.push(a),r.slice(0,c)+pw+r.slice(c)+fw+d):r+fw+(-2===c?t:d)}return[Lw(e,i+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),n]})(t,r);if(this.el=e.createElement(c,n),Uw.currentNode=this.el.content,2===r||3===r){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(s=Uw.nextNode())&&l.length<a;){if(1===s.nodeType){if(s.hasAttributes())for(const e of s.getAttributeNames())if(e.endsWith(pw)){const t=u[o++],r=s.getAttribute(e).split(fw),n=/([.?@])?(.*)/.exec(t);l.push({type:1,index:i,name:n[2],strings:r,ctor:"."===n[1]?qw:"?"===n[1]?zw:"@"===n[1]?Vw:Bw}),s.removeAttribute(e)}else e.startsWith(fw)&&(l.push({type:6,index:i}),s.removeAttribute(e));if(Tw.test(s.tagName)){const e=s.textContent.split(fw),t=e.length-1;if(t>0){s.textContent=dw?dw.emptyScript:"";for(let r=0;r<t;r++)s.append(e[r],yw()),Uw.nextNode(),l.push({type:2,index:++i});s.append(e[t],yw())}}}else if(8===s.nodeType)if(s.data===gw)l.push({type:2,index:i});else{let e=-1;for(;-1!==(e=s.data.indexOf(fw,e+1));)l.push({type:7,index:i}),e+=fw.length-1}i++}}static createElement(e,t){const r=vw.createElement("template");return r.innerHTML=e,r}};function $w(e,t,r=e,n){var s,i;if(t===jw)return t;let o=void 0!==n?null==(s=r._$Co)?void 0:s[n]:r._$Cl;const a=_w(t)?void 0:t._$litDirective$;return(null==o?void 0:o.constructor)!==a&&(null==(i=null==o?void 0:o._$AO)||i.call(o,!1),void 0===a?o=void 0:(o=new a(e),o._$AT(e,r,n)),void 0!==n?(r._$Co??(r._$Co=[]))[n]=o:r._$Cl=o),void 0!==o&&(t=$w(e,o._$AS(e,t.values),o,n)),t}let Mw=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,n=((null==e?void 0:e.creationScope)??vw).importNode(t,!0);Uw.currentNode=n;let s=Uw.nextNode(),i=0,o=0,a=r[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new Fw(s,s.nextSibling,this,e):1===a.type?t=new a.ctor(s,a.name,a.strings,this,e):6===a.type&&(t=new Ww(s,this,e)),this._$AV.push(t),a=r[++o]}i!==(null==a?void 0:a.index)&&(s=Uw.nextNode(),i++)}return Uw.currentNode=vw,n}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}},Fw=class e{get _$AU(){var e;return(null==(e=this._$AM)?void 0:e._$AU)??this._$Cv}constructor(e,t,r,n){this.type=2,this._$AH=Pw,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cv=(null==n?void 0:n.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=$w(this,e,t),_w(e)?e===Pw||null==e||""===e?(this._$AH!==Pw&&this._$AR(),this._$AH=Pw):e!==this._$AH&&e!==jw&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>ww(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Pw&&_w(this._$AH)?this._$AA.nextSibling.data=e:this.T(vw.createTextNode(e)),this._$AH=e}$(e){var t;const{values:r,_$litType$:n}=e,s="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=Nw.createElement(Lw(n.h,n.h[0]),this.options)),n);if((null==(t=this._$AH)?void 0:t._$AD)===s)this._$AH.p(r);else{const e=new Mw(s,this),t=e.u(this.options);e.p(r),this.T(t),this._$AH=e}}_$AC(e){let t=Dw.get(e.strings);return void 0===t&&Dw.set(e.strings,t=new Nw(e)),t}k(t){ww(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,s=0;for(const i of t)s===r.length?r.push(n=new e(this.O(yw()),this.O(yw()),this,this.options)):n=r[s],n._$AI(i),s++;s<r.length&&(this._$AR(n&&n._$AB.nextSibling,s),r.length=s)}_$AR(e=this._$AA.nextSibling,t){var r;for(null==(r=this._$AP)||r.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cv=e,null==(t=this._$AP)||t.call(this,e))}},Bw=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,n,s){this.type=1,this._$AH=Pw,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=s,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Pw}_$AI(e,t=this,r,n){const s=this.strings;let i=!1;if(void 0===s)e=$w(this,e,t,0),i=!_w(e)||e!==this._$AH&&e!==jw,i&&(this._$AH=e);else{const n=e;let o,a;for(e=s[0],o=0;o<s.length-1;o++)a=$w(this,n[r+o],t,o),a===jw&&(a=this._$AH[o]),i||(i=!_w(a)||a!==this._$AH[o]),a===Pw?e=Pw:e!==Pw&&(e+=(a??"")+s[o+1]),this._$AH[o]=a}i&&!n&&this.j(e)}j(e){e===Pw?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},qw=class extends Bw{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Pw?void 0:e}},zw=class extends Bw{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Pw)}},Vw=class extends Bw{constructor(e,t,r,n,s){super(e,t,r,n,s),this.type=5}_$AI(e,t=this){if((e=$w(this,e,t,0)??Pw)===jw)return;const r=this._$AH,n=e===Pw&&r!==Pw||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==Pw&&(r===Pw||n);n&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t;"function"==typeof this._$AH?this._$AH.call((null==(t=this.options)?void 0:t.host)??this.element,e):this._$AH.handleEvent(e)}},Ww=class{constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){$w(this,e)}};const Gw=uw.litHtmlPolyfillSupport;null==Gw||Gw(Nw,Fw),(uw.litHtmlVersions??(uw.litHtmlVersions=[])).push("3.3.0");const Hw=globalThis;let Jw=class extends cw{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,r)=>{const n=(null==r?void 0:r.renderBefore)??t;let s=n._$litPart$;if(void 0===s){const e=(null==r?void 0:r.renderBefore)??null;n._$litPart$=s=new Fw(t.insertBefore(yw(),e),e,void 0,r??{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null==(e=this._$Do)||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null==(e=this._$Do)||e.setConnected(!1)}render(){return jw}};Jw._$litElement$=!0,Jw.finalized=!0,null==(je=Hw.litElementHydrateSupport)||je.call(Hw,{LitElement:Jw});const Kw=Hw.litElementPolyfillSupport;null==Kw||Kw({LitElement:Jw}),(Hw.litElementVersions??(Hw.litElementVersions=[])).push("4.2.0");const Yw={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},Zw=e=>(...t)=>({_$litDirective$:e,values:t});let Xw=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,r){this._$Ct=e,this._$AM=t,this._$Ci=r}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};const Qw=Zw(class extends Xw{constructor(e){var t;if(super(e),e.type!==Yw.ATTRIBUTE||"class"!==e.name||(null==(t=e.strings)?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var r,n;if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null==(r=this.nt)?void 0:r.has(e))&&this.st.add(e);return this.render(t)}const s=e.element.classList;for(const e of this.st)e in t||(s.remove(e),this.st.delete(e));for(const e in t){const r=!!t[e];r===this.st.has(e)||(null==(n=this.nt)?void 0:n.has(e))||(r?(s.add(e),this.st.add(e)):(s.remove(e),this.st.delete(e)))}return jw}}),eb="important",tb=" !"+eb,rb=Zw(class extends Xw{constructor(e){var t;if(super(e),e.type!==Yw.ATTRIBUTE||"style"!==e.name||(null==(t=e.strings)?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,r)=>{const n=e[r];return null==n?t:t+`${r=r.includes("-")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${n};`}),"")}update(e,[t]){const{style:r}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(t)),this.render(t);for(const e of this.ft)null==t[e]&&(this.ft.delete(e),e.includes("-")?r.removeProperty(e):r[e]=null);for(const e in t){const n=t[e];if(null!=n){this.ft.add(e);const t="string"==typeof n&&n.endsWith(tb);e.includes("-")||t?r.setProperty(e,t?n.slice(0,-11):n,t?eb:""):r[e]=n}}return jw}});var nb=(e="",t={},r=e_())=>{const n={emit:n=>{""===e&&v_();const s=new CustomEvent(e,{detail:n,cancelable:!0,bubbles:!0,composed:!0,...t});return r.el.dispatchEvent(s),s}};return""===e&&A_(void 0,(t=>{e=t.key}),n),n},sb=nb.bind(null,""),ib=()=>{},ob=(Pe=class extends Jw{constructor(){var e,t,r,n;super(),this.el=this.constructor.lazy??this,this.manager=new E_(this,n),this._postLoad=(null==(e=this.constructor.lazy)?void 0:e._postLoad)??new Oy,this._offspring=(null==(t=this.constructor.lazy)?void 0:t._offspring)??[],this._postLoaded=(null==(r=this.constructor.lazy)?void 0:r._postLoaded)??new Oy,this._enableUpdating=this.enableUpdating,this.enableUpdating=ib;const s=Pe.prototype.shouldUpdate;this.shouldUpdate!==s&&(this._originalShouldUpdate=this.shouldUpdate,this.shouldUpdate=s)}static finalizeStyles(e){var t;const r=super.finalizeStyles(e),n=this.shadowRootOptions===Yy;return void 0===(null==(t=this.runtime)?void 0:t.commonStyles)||n?r:[this.runtime.commonStyles,...r]}static createProperty(e,t){const r="number"==typeof t?t:Array.isArray(t)?t[0]:0,n=Array.isArray(t)?t[1]:void 0;super.createProperty(e,{attribute:!!(1&r&&"string"==typeof e)&&qy(e),reflect:!!(2&r),type:4&r?Boolean:8&r?Number:void 0,state:!!(16&r),readOnly:!!(32&r),noAccessor:!!(64&r),...n})}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const e=!this.manager.connectedCalled;super.connectedCallback(),e&&queueMicrotask((()=>this._load().catch((e=>{this._postLoaded.reject(e),setTimeout((()=>{throw e}))}))))}createRenderRoot(){const e=this.el.shadowRoot,t=this.constructor,r=t.shadowRootOptions,n=e??(r===Yy?this.el:this.el.attachShadow(r));if(Object.defineProperty(this,"shadowRoot",{value:n}),e)return Jw.prototype.createRenderRoot.call(this),e;if(this.isConnected){const e=n.getRootNode();0,e.adoptedStyleSheets=[...e.adoptedStyleSheets,...t.elementStyles.map((e=>"styleSheet"in e?e.styleSheet:e))]}return n}async _load(){const e=this.el._ancestorLoad??Gy(this.el);e&&await e,await this.manager._load(),this._enableUpdating(!0),this.performUpdate(),this._postLoad.resolve(),await Promise.resolve();const t=this._offspring.filter((e=>{var t;return!(null==(t=e.manager)?void 0:t.loadedCalled)}));t.length&&await Promise.allSettled(t.map((async e=>await e.componentOnReady()))),this._offspring.length=0,this.el.setAttribute(this.constructor.runtime.hydratedAttribute,""),this.manager._loaded(),this._postLoaded.resolve()}shouldUpdate(e){var t;return this.$changes=e,(null==(t=this._originalShouldUpdate)?void 0:t.call(this,e))??!0}listen(e,t,r){const n=(null==t?void 0:t.bind(this))??t;this.manager.onLifecycle((()=>(this.el.addEventListener(e,n,r),()=>this.el.removeEventListener(e,n,r))))}listenOn(e,t,r,n){const s=(null==r?void 0:r.bind(this))??r;this.manager.onLifecycle((()=>(e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n))))}async componentOnReady(){return await this._postLoaded.promise,this}},Pe.lumina=!0,Pe);function ab(e){let t;const r=e=>{var r;t=new URL(e,(null==(r=globalThis.location)?void 0:r.href)||void 0).href},n={...e,getAssetPath(e){var r;const n=new URL(e,t);return n.origin!==(null==(r=globalThis.location)?void 0:r.origin)?n.href:n.pathname},setAssetPath:r,customElement(e,t){t.runtime=n,t.tagName=e,customElements.get(e)||customElements.define(e,t)}};return r(e.defaultAssetPath),n}ob.$createEvent=nb;var lb=e=>"object"==typeof e&&null!=e?Qw(e):e,cb=e=>"object"==typeof e&&null!=e?rb(e):e,ub=Pw;function db(e,t,r){null==r?e.removeAttribute(t):e.setAttribute(t,r)}var hb={toAttribute:e=>!0===e?"":!1===e?null:e},pb={},fb=(e,t)=>({tagName:e,events:t});const gb=((e,t)=>r=>{const n=r.tagName;let s=pb;const i={name:n,get prototype(){var e;if(void 0===s){if(s=null==(e=customElements.get(n))?void 0:e.prototype,!s)throw new Error(`Custom element "${n}" not found`);Object.defineProperty(i,"prototype",{value:s})}return s}},o=t({...r,react:e,elementClass:i});return s=void 0,o})(n.default,ky);fb("calcite-action",{}),fb("calcite-list",{onCalciteListChange:"calciteListChange",onCalciteListDragEnd:"calciteListDragEnd",onCalciteListDragStart:"calciteListDragStart",onCalciteListFilter:"calciteListFilter",onCalciteListOrderChange:"calciteListOrderChange"}),fb("calcite-list-item",{onCalciteListItemClose:"calciteListItemClose",onCalciteListItemSelect:"calciteListItemSelect",onCalciteListItemSortHandleBeforeClose:"calciteListItemSortHandleBeforeClose",onCalciteListItemSortHandleBeforeOpen:"calciteListItemSortHandleBeforeOpen",onCalciteListItemSortHandleClose:"calciteListItemSortHandleClose",onCalciteListItemSortHandleOpen:"calciteListItemSortHandleOpen",onCalciteListItemToggle:"calciteListItemToggle"}),fb("calcite-loader",{}),fb("calcite-notice",{onCalciteNoticeBeforeClose:"calciteNoticeBeforeClose",onCalciteNoticeBeforeOpen:"calciteNoticeBeforeOpen",onCalciteNoticeClose:"calciteNoticeClose",onCalciteNoticeOpen:"calciteNoticeOpen"}),fb("calcite-panel",{onCalcitePanelClose:"calcitePanelClose",onCalcitePanelScroll:"calcitePanelScroll",onCalcitePanelToggle:"calcitePanelToggle"});let mb;function vb(e){return"function"==typeof mb[e]?mb[e]=mb[e](globalThis):mb[e]}function yb(e,t,r){if(null==e&&null==t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function _b(e,t){return null!=e}function wb(e,t){let r;for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function bb(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=function(e){if(function(e){var t;return"Int8Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint8Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint8ClampedArray"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Int16Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint16Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Int32Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Uint32Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Float32Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e)||function(e){var t;return"Float64Array"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)}(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,n]of e)t.set(r,bb(n));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(bb(r));return t}return null}(e);if(null!=t)return t;if(function(e){return"function"==typeof e.clone}(e))return e.clone();if(function(e){return"function"==typeof e.map&&"function"==typeof e.forEach}(e))return e.map(bb);if(function(e){return"function"==typeof e.notifyChange&&"function"==typeof e.watch}(e))throw new Error("Trying to clone an unclonable Accessor instance");const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=bb(e[t]);return r}function Sb(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Ab(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(null==e?void 0:e.getTime)&&"function"==typeof(null==t?void 0:t.getTime)&&e.getTime()===t.getTime()||!1}function Eb(e,t){return e===t||(null==e||"string"==typeof e?e===t:"number"==typeof e?e===t||"number"==typeof t&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&yb(e,t):e instanceof Set?t instanceof Set&&function(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}(e,t):e instanceof Map?t instanceof Map&&function(e,t){if(e.size!==t.size)return!1;for(const[r,n]of e){const e=t.get(r);if(e!==n||void 0===e&&!t.has(r))return!1}return!0}(e,t):!!Sb(e)&&Sb(t)&&function(e,t){if(null===e||null===t)return!1;const r=Object.keys(e);if(null===t||Object.keys(t).length!==r.length)return!1;for(const n of r)if(e[n]!==t[n]||!Object.prototype.hasOwnProperty.call(t,n))return!1;return!0}(e,t))}function Ib(e,t){if(null!=t)return t[e]||Ob(e.split("."),!1,t)}function kb(e,t,r){const n=e.split("."),s=n.pop(),i=Ob(n,!0,r);i&&s&&(i[s]=t)}function Ob(e,t,r){let n=r;for(const r of e){if(null==n)return;if(!(r in n)){if(!t)return;n[r]={}}n=n[r]}return n}function Tb(e,t,r){return t?Object.keys(t).reduce(((e,n)=>{let s=e[n],i=t[n];return s===i?e:void 0===s?(e[n]=bb(i),e):(Array.isArray(i)||Array.isArray(e)?(s=s?Array.isArray(s)?e[n]=s.slice():e[n]=[s]:e[n]=[],i&&(Array.isArray(i)||(i=[i]),r?i.forEach((e=>{s.includes(e)||s.push(e)})):e[n]=i.slice())):i&&"object"==typeof i?e[n]=Tb(s,i,r):e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[n]=i),e)}),e||{}):e}mb=(null==(De=globalThis.dojoConfig)?void 0:De.has)||(null==(Ue=globalThis.esriConfig)?void 0:Ue.has)?{...null==(Le=globalThis.dojoConfig)?void 0:Le.has,...null==(Ne=globalThis.esriConfig)?void 0:Ne.has}:{},vb.add=(e,t,r,n)=>{(n||void 0===mb[e])&&(mb[e]=t),r&&vb(e)},vb.cache=mb,vb.add("big-integer-warning-enabled",!0),vb.add("esri-deprecation-warnings",!0),vb.add("esri-tests-disable-screenshots",!1),vb.add("esri-tests-use-full-window",!1),vb.add("esri-tests-post-to-influx",!0),vb.add("esri-cim-animations-enable-status","enabled"),vb.add("esri-cim-animations-spotlight",!1),vb.add("esri-cim-animations-freeze-time",!1),vb.add("enable-feature:multiple-highlights",!0),(()=>{var e;vb.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const t="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(vb.add("host-browser",t),vb.add("host-node","object"==typeof globalThis.process&&(null==(e=globalThis.process.versions)?void 0:e.node)&&globalThis.process.versions.v8),vb.add("dom",t),vb("host-browser")){const e=navigator,t=e.userAgent,r=e.appVersion,n=parseFloat(r);if(vb.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),vb.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),vb.add("khtml",r.includes("Konqueror")?n:void 0),vb.add("edge",parseFloat(t.split("Edge/")[1])||void 0),vb.add("opr",parseFloat(t.split("OPR/")[1])||void 0),vb.add("webkit",!vb("wp")&&!vb("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),vb.add("chrome",!vb("edge")&&!vb("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),vb.add("android",!vb("wp")&&parseFloat(t.split("Android ")[1])||void 0),vb.add("safari",!r.includes("Safari")||vb("wp")||vb("chrome")||vb("android")||vb("edge")||vb("opr")?void 0:parseFloat(r.split("Version/")[1])),vb.add("mac",r.includes("Macintosh")),!vb("wp")&&/(iPhone|iPod|iPad)/.test(t)){const e=RegExp.$1.replace(/P/,"p"),r=/OS ([\d_]+)/.test(t)?RegExp.$1:"1",n=parseFloat(r.replace(/_/,".").replaceAll("_",""));vb.add(e,n),vb.add("ios",n)}vb("webkit")||(!t.includes("Gecko")||vb("wp")||vb("khtml")||vb("edge")||vb.add("mozilla",n),vb("mozilla")&&vb.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&vb.add("esri-mobile",t),r&&vb.add("esri-iPhone",r),vb.add("esri-geolocation",!!navigator.geolocation)}vb.add("esri-wasm","WebAssembly"in globalThis),vb.add("esri-performance-mode-frames-between-render",20),vb.add("esri-force-performance-mode",!1),vb.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=!1===globalThis.crossOriginIsolated;return e&&!t})),vb.add("wasm-simd",(()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))),vb.add("esri-atomics","Atomics"in globalThis),vb.add("esri-workers","Worker"in globalThis),vb.add("web-feat:cache","caches"in globalThis),vb.add("esri-workers-arraybuffer-transfer",!vb("safari")||Number(vb("safari"))>=12),vb.add("workers-pool-size",8),vb.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),vb.add("featurelayer-simplify-payload-size-factors",[1,1,4]),vb.add("featurelayer-fast-triangulation-enabled",!0),vb.add("featurelayer-animation-enabled",!0),vb.add("featurelayer-snapshot-enabled",!0),vb.add("featurelayer-snapshot-point-min-threshold",8e4),vb.add("featurelayer-snapshot-point-max-threshold",4e5),vb.add("featurelayer-snapshot-point-coverage",.1),vb.add("featurelayer-query-max-depth",4),vb.add("featurelayer-query-pausing-enabled",!1),vb.add("featurelayer-advanced-symbols",!1),vb.add("featurelayer-pbf",!0),vb.add("featurelayer-pbf-statistics",!1),vb.add("feature-layers-workers",!0),vb.add("feature-polyline-generalization-factor",1),vb.add("mapview-transitions-duration",200),vb.add("mapview-essential-goto-duration",200),vb.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),vb.add("mapserver-pbf-version-support",10.81),vb.add("mapservice-popup-identify-max-tolerance",20),vb.add("request-queue-concurrency-hosted",16),vb.add("request-queue-concurrency-non-hosted",4),vb.add("curve-densification-coarse-segments",128),vb.add("curve-densification-max-segments",2e3),vb.add("curve-densification-min-segments",3),vb.add("curve-densification-pixels-per-segment",16),vb.add("view-readyState-waiting-delay",1e3),vb.add("gradient-depth-bias",.01),vb.add("gradient-depth-epsilon",1e-8),vb("host-webworker")||vb("host-browser")&&(vb.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),vb.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{vb.add("esri-image-decode",!0,!0,!0)})).catch((()=>{vb.add("esri-image-decode",!1,!0,!0)}))}return!1})),vb.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();let Cb=class{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=t,this.apiValues=[],this.jsonValues=[],this._apiToJSON=function(e){const t={};for(const r in e)t[e[r]]=r;return t}(e),this.apiValues=xb(this._apiToJSON),this.jsonValues=xb(this._jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,r)=>{const n=this.toJSON(e);void 0!==n&&kb(r,n,t)},this.write.isJSONMapWriter=!0}toJSON(e){if(null==e)return null;if(this._apiToJSON.hasOwnProperty(e)){const t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?null:e}fromJSON(e){return null!=e&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function xb(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}const Rb={remove:()=>{}};function jb(e){return e?{remove(){e&&(e(),e=void 0)}}:Rb}function Pb(e){return jb((()=>function(e){e.forEach((e=>null==e?void 0:e.remove()))}(e)))}let Db,Ub;const Lb=(null==($e=globalThis.esriConfig)?void 0:$e.locale)??(null==(Me=globalThis.dojoConfig)?void 0:Me.locale),Nb=null==(Fe=globalThis.document)?void 0:Fe.documentElement;function $b(){var e;const t=null==Nb?void 0:Nb.getAttribute("lang"),r=null==(e=globalThis.navigator)?void 0:e.language;return Lb??t??r??"en"}function Mb(){return void 0===Ub&&(Ub=$b()),Ub}const Fb=[];function Bb(e){return Fb.push(e),jb((()=>Fb.splice(Fb.indexOf(e),1)))}const qb=[];function zb(e){return qb.push(e),jb((()=>qb.splice(qb.indexOf(e),1)))}function Vb(){const e=Db??$b();Ub!==e&&([...qb].forEach((t=>t(e))),Ub=e,[...Fb].forEach((t=>t(e))))}null==(Be=globalThis.addEventListener)||Be.call(globalThis,"languagechange",Vb),Nb&&new MutationObserver((()=>{Vb()})).observe(Nb,{attributeFilter:["lang"]});const Wb="system",Gb="unknown",Hb="UTC",Jb=Intl.DateTimeFormat().resolvedOptions().timeZone,Kb={"short-date-short-time":{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}};var Yb;new Cb({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"},{ignoreUnknown:!0,...Yb});const Zb={ar:"ar-u-nu-latn-ca-gregory"};let Xb=new WeakMap;const Qb=Kb["short-date-short-time"];function eS(e){let t=Xb.get(e);if(!t){const r=Mb(),n=Zb[r]||r,s=function(e){switch(e){case Wb:return Jb;case Gb:return Hb;default:return e}}(e.timeZone??Wb),i={...e,timeZone:s};t=new Intl.DateTimeFormat(n,i),Xb.set(e,t)}return t}function tS(e,t=Qb){return eS(t).format(e)}zb((()=>{Xb=new WeakMap}));const rS={ar:"ar-u-nu-latn"};let nS=new WeakMap,sS={};function iS(e,t){return Object.is(e,-0)&&(e=0),function(e){const t=e||sS;if(!nS.has(t)){const r=Mb(),n=rS[Mb()]||r;nS.set(t,new Intl.NumberFormat(n,e))}return nS.get(t)}(t).format(e)}zb((()=>{nS=new WeakMap,sS={}}));const oS={apiKey:void 0,applicationName:"",applicationUrl:null==(qe=globalThis.location)?void 0:qe.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(function(e,t,r=!1){Tb(e,t,r)}(oS,globalThis.esriConfig,!0),delete oS.has),!oS.assetsPath){{const e="4.32";oS.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}oS.defaultAssetsPath=oS.assetsPath}const aS=/\{([^}]+)\}/g;function lS(e){return e??""}function cS(e,t){return t?e.replaceAll(aS,"object"==typeof t?(e,r)=>lS(Ib(r,t)):(e,r)=>lS(t(r))):e}const uS={info:0,warn:1,error:2,none:3};let dS=class e{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=t.level&&(this.level=t.level),null!=t.writer&&(this.writer=t.writer),this._module=t.module,e._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");-1!==r&&(this._parent=e.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(t){return t="string"!=typeof t?t.declaredClass:t,e._loggers.get(t)||new e({module:t})}_log(t,r,...n){if(this._matchLevel(t)){if("always"!==r&&!e._throttlingDisabled){const s=function(...e){const t=(e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]";return function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}(JSON.stringify(e,t))}(n),i=this._loggedMessages[t].get(s);if("once"===r&&null!=i||"oncePerTick"===r&&i&&i>=e._tickCounter)return;this._loggedMessages[t].set(s,e._tickCounter),e._scheduleTickCounterIncrement()}for(const e of oS.log.interceptors)if(e(t,this.module,...n))return;this._inheritedWriter()(t,this.module,...n)}}_parentWithMember(e,t){let r=this;for(;null!=r;){const t=r[e];if(null!=t)return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",hS)}_matchLevel(e){const t=oS.log.level||"warn";return uS[this._parentWithMember("level",t)]<=uS[e]}static _scheduleTickCounterIncrement(){e._tickCounterScheduled||(e._tickCounterScheduled=!0,Promise.resolve().then((()=>{e._tickCounter++,e._tickCounterScheduled=!1})))}};function hS(e,t,...r){console[e](`[${t}]`,...r)}dS._loggers=new Map,dS._tickCounter=0,dS._tickCounterScheduled=!1,dS._throttlingDisabled=!1;let pS=class{constructor(e,t,r=void 0){this.name=e,this.details=r,this.message=(t&&function(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,((e,r)=>""===r?"$":(Ib(r,t)??"").toString()))}(t,r))??""}toString(){return"["+this.name+"]: "+this.message}},fS=class e extends pS{constructor(e,t,r){super(e,t,r)}toJSON(){if(null!=this.details)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,((e,t)=>{if(t&&"object"==typeof t&&"function"==typeof t.toJSON)return t;try{return bb(t)}catch(e){return"[object]"}})))}}catch(e){throw dS.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new e(t.name,t.message,t.details)}};fS.prototype.type="error";const gS=function(e){return{setTimeout:(t,r)=>{const n=e.setTimeout(t,r);return jb((()=>e.clearTimeout(n)))}}}(globalThis);function mS(e){return function(e){return null!=e&&"object"==typeof e&&"on"in e&&"function"==typeof e.on}(e)||vS(e)}function vS(e){return null!=e&&"object"==typeof e&&"addEventListener"in e&&"function"==typeof e.addEventListener}function yS(e,t,r){if(!mS(e))throw new TypeError("target is not a Evented or EventTarget object");return vS(e)?function(e,t,r,n){if(Array.isArray(t)){const s=t.slice();for(const t of s)e.addEventListener(t,r,n);return jb((()=>{for(const t of s)e.removeEventListener(t,r,n)}))}return e.addEventListener(t,r,n),jb((()=>e.removeEventListener(t,r,n)))}(e,t,r):e.on(t,r)}function _S(e,t,r){if(!mS(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const n=yS(e,t,(t=>{n.remove(),r.call(e,t)}));return n}function wS(e){return null==e||e.destroy(),null}function bS(e){return null==e||e.remove(),null}function SS(e){return null==e||e.abort(),null}function AS(e="Aborted"){return new fS("AbortError",e)}function ES(e){return e instanceof AbortSignal?e:(null==e?void 0:e.signal)??void 0}function IS(e){const t=ES(e);return null!=t&&t.aborted}function kS(e){if(!CS(e))throw e}function OS(e,t){const r=ES(e);if(null!=r){if(!r.aborted)return _S(r,"abort",(()=>t()));t()}}function TS(e,t){const r=ES(e);if(null!=r)return function(e,t="Aborted"){if(IS(e))throw AS(t)}(r),_S(r,"abort",(()=>t(AS())))}function CS(e){return"AbortError"===(null==e?void 0:e.name)}function xS(e){return e&&"function"==typeof e.then}function RS(e){return xS(e)?e:Promise.resolve(e)}function jS(e,t=-1){let r,n,s,i,o=null;const a=(...l)=>{if(r){n=l,i&&i.reject(AS()),i=PS();const e=i.promise;if(o){const e=o;o=null,e.abort()}return e}if(s=i||PS(),i=null,t>0){const n=new AbortController;r=RS(e(...l,n.signal));const s=r;(function(e,t,r){const n=new AbortController;return OS(r,(()=>n.abort())),new Promise(((r,s)=>{let i=setTimeout((()=>{i=0,r(t)}),e);OS(n,(()=>{i&&(clearTimeout(i),s(AS()))}))}))})(t).then((()=>{r===s&&(i?n.abort():o=n)}))}else r=1,r=RS(e(...l));const c=()=>{const e=n;n=s=r=o=null,null!=e&&a(...e)},u=r,d=s;return u.then(c,c),u.then(d.resolve,d.reject),d.promise};return a}function PS(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n})),n=t=>{e(t)};return n.resolve=t=>e(t),n.reject=e=>t(e),n.timeout=(e,t)=>gS.setTimeout((()=>n.reject(t)),e),n.promise=r,n}const DS=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,US={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function LS(e){if(function(e){return e in US}(e)){const t=US[e];return!0===t?e:t}return null}const NS=[],$S=new Map;function MS(e){for(const t of $S.keys())qS(e.pattern,t)&&$S.delete(t)}function FS(e){return NS.includes(e)||(MS(e),NS.unshift(e)),jb((()=>{const t=NS.indexOf(e);t>-1&&(NS.splice(t,1),MS(e))}))}async function BS(e){const t=Mb();$S.has(e)||$S.set(e,async function(e,t){const r=[];for(const n of NS)if(qS(n.pattern,e))try{return await n.fetchMessageBundle(e,t)}catch(e){r.push(e)}if(r.length)throw new fS("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r});throw new fS("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}(e,t));const r=$S.get(e);return r&&await zS.add(r),r}function qS(e,t){return"string"==typeof e?t.startsWith(e):e.test(t)}zb((()=>{$S.clear()}));const zS=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then((()=>this._decrease()),(()=>this._decrease())),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=PS())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=null)}};function VS(e,t,r,n){var s,i=arguments.length,o=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,r,o):s(t,r))||o);return i>3&&o&&Object.defineProperty(t,r,o),o}"function"==typeof SuppressedError&&SuppressedError;const WS=new WeakMap;function GS(e,t,r={}){if(vb("esri-deprecation-warnings")){const{moduleName:n}=r;!function(e,t,r={}){if(vb("esri-deprecation-warnings")){const{replacement:n,version:s,see:i,warnOnce:o}=r;let a=t;if(n&&(a+=`\n\t\u{1f6e0}\ufe0f Replacement: ${n}`),s&&(a+=`\n\t\u2699\ufe0f Version: ${s}`),i)if(Array.isArray(i)){a+="\n\t\u{1f517} See for more details:";for(const e of i)a+=`\n\t\t${e}`}else a+=`\n\t\u{1f517} See ${i} for more details.`;!function(e,t,r=!1){const n=`\u{1f6d1} DEPRECATED - ${t}`;if(!r)return void e.warn(n);let s=WS.get(e);s||(s=new Set,WS.set(e,s)),s.has(t)||(s.add(t),e.warn(n))}(e,a,o)}}(e,"Function: "+((n?n+"::":"")+t+"()"),r)}}function HS(e){return null!=e&&"function"==typeof e[Symbol.iterator]}let JS=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(HS(e)){const r=this._getOrCreateGroup(t);for(const t of e)ZS(t)&&r.push(t)}else ZS(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(KS(e))}remove(e){if("string"!=typeof e&&HS(e)){for(const t of e)this.remove(t);return this}return this.has(e)?(YS(this._getGroup(e)),this._groups.delete(KS(e)),this):this}removeAll(){return this._groups.forEach(YS),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(KS(e),t),t}_getGroup(e){return this._groups.get(KS(e))}};function KS(e){return e||"_default_"}function YS(e){for(const t of e)t instanceof JS?t.removeAll():t.remove()}function ZS(e){return null!=e&&(!!e.remove||e instanceof JS)}const XS=Symbol("Accessor-beforeDestroy");function QS(e){return e.__accessor__??null}function eA(e,t,r){return tA(e,t,r?{policy:r,path:""}:null)}function tA(e,t,r){return t?Object.keys(t).reduce(((e,n)=>{const s=n;let i=null,o="merge";if(r&&(i=r.path?`${r.path}.${n}`:n,o=r.policy(i)),"replace"===o)return e[s]=t[s],e;if("replace-arrays"===o&&Array.isArray(e[s]))return e[s]=t[s],e;if(void 0===e[s])return e[s]=bb(t[s]),e;let a=e[s],l=t[s];if(a===l)return e;if(Array.isArray(l)||Array.isArray(e))a=a?Array.isArray(a)?e[s]=a.slice():e[s]=[a]:e[s]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach((e=>{a.includes(e)||a.push(e)})));else if(l&&"object"==typeof l)if(r){const t=r.path;r.path=i,e[s]=tA(a,l,r),r.path=t}else e[s]=tA(a,l,null);else e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[s]=l);return e}),e||{}):e}function rA(e){return Array.isArray(e)?e:e.split(".")}function nA(e){return e.includes(",")?e.split(",").map((e=>e.trim())):[e.trim()]}function sA(e,t,r,n){const s=function(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...nA(r));return t}return nA(e)}(t);if(1!==s.length){return Pb(s.map((t=>n(e,t,r))))}return n(e,s[0],r)}function iA(e,t){const r="?"===e[e.length-1]?e.slice(0,-1):e;if(null!=t.getItemAt||Array.isArray(t)){const e=parseInt(r,10);if(!isNaN(e))return Array.isArray(t)?t[e]:t.at(e)}const n=QS(t);return function(e,t){var r;return null!=(null==(r=null==e?void 0:e.metadata)?void 0:r[t])}(n,r)?n.get(r):t[r]}function oA(e,t,r){if(null==e)return e;const n=iA(t[r],e);return!n&&r<t.length-1?void 0:r===t.length-1?n:oA(n,t,r+1)}function aA(e,t,r=0){return"string"!=typeof t||t.includes(".")?oA(e,rA(t),r):iA(t,e)}function lA(e,t){return aA(e,t)}function cA(e,t){return void 0!==aA(t,e)}var uA,dA;function hA(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const e in t)t[e]=bb(t[e]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function pA(e,t){const r=hA(e);let n=r[t];return n||(n=r[t]={}),n}(dA=uA||(uA={}))[dA.INITIALIZING=0]="INITIALIZING",dA[dA.CONSTRUCTING=1]="CONSTRUCTING",dA[dA.CONSTRUCTED=2]="CONSTRUCTED",dA[dA.DESTROYED=3]="DESTROYED";const fA=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function gA(e){return fA.test(e)?"replace":"merge"}let mA=class e{constructor(e,t,r,n=1,s=0){this._ctor=e,this._acquireFunction=t,this._releaseFunction=r,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s;for(let e=0;e<s;e++)this._pool[e]=new this._ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(e.test.disabled)r=new this._ctor;else{if(0===this._pool.length){const e=this.allocationSize;for(let t=0;t<e;t++)this._pool[t]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):function(e){return(null==e?void 0:e.acquire)&&"function"==typeof e.acquire}(r)&&r.acquire(...t),r}release(t){t&&!e.test.disabled&&(this._releaseFunction?this._releaseFunction(t):function(e){return(null==e?void 0:e.release)&&"function"==typeof e.release}(t)&&t.release(),this._pool.push(t))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let t=e;t<this._pool.length;++t){const e=this._pool[t];this._dispose(e)}this._pool.length=e}}_dispose(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()}};mA.test={disabled:!1};let vA=class{constructor(e,t){this._observers=e,this._observer=t}remove(){!function(e,t){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}(this._observers,this._observer)}},yA=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return _A;null==this._observers&&(this._observers=[]);const t=this._observers;let r=!1,n=!1;const s=t.length;for(let i=0;i<s;++i){const s=t[i];if(s.destroyed)n=!0;else if(s===e){r=!0;break}}return r||(t.push(e),n&&this._removeDestroyedObservers()),new vA(t,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||0===e.length)return;const t=e.length;let r=0;for(let n=0;n<t;++n){for(;n+r<t&&e[n+r].destroyed;)++r;if(r>0){if(!(n+r<t))break;e[n]=e[n+r]}}e.length=t-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(null!=e){for(const t of e)t.onCommitted();this._observers=null}}};const _A=jb();var wA,bA,SA;function AA(e){switch(e){case"defaults":return wA.DEFAULTS;case"service":return wA.SERVICE;case"portal-item":return wA.PORTAL_ITEM;case"web-scene":return wA.WEB_SCENE;case"web-map":return wA.WEB_MAP;case"link-chart":return wA.LINK_CHART;case"user":return wA.USER;default:return null}}function EA(e){switch(e){case wA.DEFAULTS:return"defaults";case wA.SERVICE:return"service";case wA.PORTAL_ITEM:return"portal-item";case wA.WEB_SCENE:return"web-scene";case wA.WEB_MAP:return"web-map";case wA.LINK_CHART:return"link-chart";case wA.USER:return"user"}}function IA(e){return EA(e)}!function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"}(wA||(wA={})),wA.USER,(SA=bA||(bA={}))[SA.Dirty=1]="Dirty",SA[SA.Overridden=2]="Overridden",SA[SA.Computing=4]="Computing",SA[SA.NonNullable=8]="NonNullable",SA[SA.HasDefaultValue=16]="HasDefaultValue",SA[SA.DepTrackingInitialized=32]="DepTrackingInitialized",SA[SA.AutoTracked=64]="AutoTracked",SA[SA.ExplicitlyTracking=128]="ExplicitlyTracking";let kA=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){var e;null==(e=this.accessed)||e.clear(),this.clear()}onAccessed(e){null!=this._observer&&e!==this._observer&&(null==this.accessed&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){null!=this._observer&&(this.clear(),null!=this.accessed&&(null==this._handles&&(this._handles=[]),this.accessed.forEach((e=>{this._handles.push(e.observe(this._observer))})),this.accessed.clear()))}clear(){if(null!=this._handles){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const OA=new kA,TA=[];let CA=OA;function xA(e){CA.onAccessed(e)}let RA=!1,jA=!1;function PA(e,t,r){if(RA)return DA(e,t,r);let n=null;return UA(e),n=t.call(r),LA(),n}function DA(e,t,r){const n=RA;RA=!0,UA(e);let s=null;try{s=t.call(r)}catch(e){jA&&dS.getLogger("esri.core.accessorSupport.tracking").error(e)}return LA(),RA=n,s}function UA(e){CA=e,TA.push(e)}function LA(){const e=TA.length;if(e>1){const t=TA.pop();CA=TA[e-2],t.onTrackingEnd()}else if(1===e){const e=TA.pop();CA=OA,e.onTrackingEnd()}else CA=OA}function NA(e,t){if(t.flags&bA.DepTrackingInitialized)return;t.flags|=bA.DepTrackingInitialized;const r=jA;jA=!1,t.flags&bA.AutoTracked?DA(t.trackingTarget,t.metadata.get,e):MA(e,t),jA=r}const $A=[];function MA(e,t){t.flags&bA.ExplicitlyTracking||(t.flags|=bA.ExplicitlyTracking,DA(t.trackingTarget,(()=>{const r=t.metadata.dependsOn||$A;for(const t of r)if("string"!=typeof t||t.includes(".")){const r=rA(t);for(let t=0,n=e;t<r.length&&null!=n&&"object"==typeof n;++t)n=FA(n,r[t],t!==r.length-1)}else FA(e,t,!1)})),t.flags&=~bA.ExplicitlyTracking)}function FA(e,t,r){const n="?"===t[t.length-1]?t.slice(0,-1):t;if(null!=e.getItemAt||Array.isArray(e)){const t=parseInt(n,10);if(!isNaN(t))return Array.isArray(e)?e[t]:e.at(t)}const s=QS(e);if(s){const t=s.propertiesByName.get(n);t&&(xA(t),NA(e,t))}return r?e[n]:void 0}let BA=class extends yA{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this.trackingTarget=new kA(this),this.flags=0,this.flags=bA.Dirty|(t.nonNullable?bA.NonNullable:0)|(t.hasOwnProperty("value")?bA.HasDefaultValue:0)|(void 0===t.get?bA.DepTrackingInitialized:0)|(void 0===t.dependsOn?bA.AutoTracked:0)}destroy(){this.flags&bA.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&xA(this);const t=e.store,r=this.propertyName,n=this.flags,s=t.get(r);if(n&bA.Computing)return s;if(~n&bA.Dirty&&t.has(r))return s;this.flags|=bA.Computing;const i=e.host;let o;n&bA.AutoTracked?o=PA(this.trackingTarget,this.metadata.get,i):(MA(i,this),o=this.metadata.get.call(i)),this.flags|=bA.DepTrackingInitialized,t.set(r,o,wA.COMPUTED);const a=t.get(r);return a===s?this.flags&=~bA.Dirty:function(e,t){PA(OA,e,t)}(this.commit,this),this.flags&=~bA.Computing,a}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~bA.Dirty,this.onCommitted()}onInvalidated(){~this.flags&bA.Overridden&&(this.flags|=bA.Dirty);const e=this._observers;if(e&&e.length>0)for(const t of e)t.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const t=e.slice();for(const e of t)e.onCommitted()}}},qA=class e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new e;return this._values.forEach(((e,n)=>{t&&t.has(n)||r.set(n,bb(e))})),r}get(e){return this._values.get(e)}originOf(){return wA.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function zA(e,t,r){return void 0!==e}function VA(e,t,r,n){return!(void 0===e||null==r&&e.flags&bA.NonNullable&&(n.lifecycle,uA.INITIALIZING,1))}let WA=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=uA.INITIALIZING,this.store=new qA,this.mutable=!0,this._origin=wA.USER;const t=this.host.constructor.__accessorMetadata__;for(const e in t){const r=new BA(e,t[e]);this.propertiesByName.set(e,r)}this.metadata=t}initialize(){this.lifecycle=uA.CONSTRUCTING}constructed(){this.lifecycle=uA.CONSTRUCTED}destroy(){this.lifecycle=uA.DESTROYED,this.propertiesByName.forEach((e=>e.destroy()))}get initialized(){return this.lifecycle!==uA.INITIALIZING}get(e){const t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);this.mutable&&xA(t);const r=this.store;return r.has(e)?r.get(e):t.metadata.value}originOf(e){const t=this.store.originOf(e);if(void 0===t){const t=this.propertiesByName.get(e);if(void 0!==t&&t.flags&bA.HasDefaultValue)return"defaults"}return EA(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const t=this.propertiesByName.get(e);if(zA(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){const r=this.propertiesByName.get(e);zA(r)&&this._internalSet(r,t)}getDependsInfo(e,t,r){const n=this.propertiesByName.get(t);if(!zA(n))return"";const s=new kA,i=PA(s,(()=>{var t;return null==(t=n.metadata.get)?void 0:t.call(e)}));let o=`${r}${e.declaredClass.split(".").pop()}.${t}: ${i}\n`;const a=s.accessed??new Set;if(0===a.size)return o;r+="  ";for(const e of a)e instanceof BA&&(o+=`${r}${e.propertyName}: undefined\n`);return o}setAtOrigin(e,t,r){const n=this.propertiesByName.get(e);if(zA(n))return this._setAtOrigin(n,t,r)}isOverridden(e){const t=this.propertiesByName.get(e);return void 0!==t&&!!(t.flags&bA.Overridden)}clearOverride(e){const t=this.propertiesByName.get(e);t&&t.flags&bA.Overridden&&(t.flags&=~bA.Overridden,t.notifyChange())}override(e,t){const r=this.propertiesByName.get(e);if(!VA(r,0,t,this))return;const n=r.metadata.cast;if(n){const e=this._cast(n,t),{valid:r,value:s}=e;if(GA.release(e),!r)return;t=s}r.flags|=bA.Overridden,this._internalSet(r,t)}set(e,t){const r=this.propertiesByName.get(e);if(!VA(r,0,t,this))return;const n=r.metadata.cast;if(n){const e=this._cast(n,t),{valid:r,value:s}=e;if(GA.release(e),!r)return;t=s}const s=r.metadata.set;s?s.call(this.host,t):this._internalSet(r,t)}setDefaultOrigin(e){this._origin=AA(e)}getDefaultOrigin(){return EA(this._origin)}notifyChange(e){const t=this.propertiesByName.get(e);void 0!==t&&t.notifyChange()}invalidate(e){const t=this.propertiesByName.get(e);void 0!==t&&t.invalidate()}commit(e){const t=this.propertiesByName.get(e);void 0!==t&&t.commit()}_internalSet(e,t){const r=this.lifecycle!==uA.INITIALIZING?this._origin:wA.DEFAULTS;this._setAtOrigin(e,t,r)}_setAtOrigin(e,t,r){const n=this.store,s=e.propertyName;n.has(s,r)&&Ab(t,n.get(s))&&~e.flags&bA.Overridden&&r===n.originOf(s)||(e.invalidate(),n.set(s,t,r),e.commit(),NA(this.host,e))}_cast(e,t){const r=GA.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r}};const GA=new mA(class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}});function HA(e,t,r){if(e&&t)if("object"==typeof t)for(const r of Object.getOwnPropertyNames(t))HA(e,r,t[r]);else{if(t.includes(".")){const n=t.split("."),s=n.splice(-1,1)[0];return void HA(lA(e,n),s,r)}const n=e.__accessor__;null!=n&&function(e,t){if(vb("esri-unknown-property-errors")&&!function(e,t){return null!=t.metadata[e]}(e,t))throw new fS("set:unknown-property",function(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}(e,t))}(t,n),e[t]=r}}var JA,KA;function YA(e){e.length=0}(KA=JA||(JA={}))[KA.Ignore=0]="Ignore",KA[KA.Destroy=1]="Destroy",KA[KA.ThrowError=2]="ThrowError";let ZA=class{constructor(e=50,t=50){this._pool=new mA(Array,void 0,YA,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return XA.acquire()}static release(e){return XA.release(e)}static prune(){XA.prune()}};const XA=new ZA(100);const QA=[];function eE(e){QA.push(e),1===QA.length&&queueMicrotask((()=>{const e=QA.slice();QA.length=0;for(const t of e)t()}))}let tE=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}push(e){null!=e&&(this._samples[++this._counter%this._samples.length]=e)}set(e){null!=e&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort(((e,t)=>e-t))[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce(((e,t)=>e+t),0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var rE;!function(e){const t=(e,t,r,n)=>{let s=t,i=t;const o=r>>>1,a=e[s-1];for(;i<=o;){i=s<<1,i<r&&n(e[i-1],e[i])<0&&++i;const t=e[i-1];if(n(t,a)<=0)break;e[s-1]=t,s=i}e[s-1]=a},r=(e,t)=>e<t?-1:e>t?1:0;e.sort=function(e,n,s,i){void 0===n&&(n=0),void 0===s&&(s=e.length),void 0===i&&(i=r);for(let r=s>>>1;r>n;r--)t(e,r,s,i);const o=n+1;for(let r=s-1;r>n;r--){const s=e[n];e[n]=e[r],e[r]=s,t(e,o,r,i)}},e.iterableSort=function*(e,n,s,i){void 0===n&&(n=0),void 0===s&&(s=e.length),void 0===i&&(i=r);for(let r=s>>>1;r>n;r--)t(e,r,s,i),yield;const o=n+1;for(let r=s-1;r>n;r--){const s=e[n];e[n]=e[r],e[r]=s,t(e,o,r,i),yield}}}(rE||(rE={}));let nE=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}};const sE=[],iE={willDispatch:!1};function oE(e){const t=new nE(e);return sE.push(t),iE.willDispatch||(iE.willDispatch=!0,eE(aE)),t}function aE(){for(;sE.length;){const e=sE.shift();e.isActive&&e.callback()}iE.willDispatch=!1}function lE(e){return function(e=1,t){const r=PS(),n=()=>{IS(t)?r.reject(AS()):0===e?r():(--e,eE((()=>n())))};return n(),r.promise}(1,e)}async function cE(e){await lE(e),await new Promise((t=>requestAnimationFrame((()=>{(null==e?void 0:e.aborted)||t()}))))}["prepare","preRender","render","postRender","update","finish"].map((e=>new tE(e))),new tE("total");let uE=0;function dE(){return++uE}let hE=class extends kA{constructor(e){super(new pE(e)),this._observer&&fE.register(this,new WeakRef(this._observer),this)}destroy(){var e,t;this._observer&&fE.unregister(this._observer),null==(e=this.accessed)||e.clear(),this.clear(),null==(t=this._observer)||t.destroy()}},pE=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=gE}};const fE=new FinalizationRegistry((e=>{var t;null==(t=e.deref())||t.destroy()}));function gE(){}let mE=!1;const vE=[];function yE(e,t){let r=new hE((function i(){if(!r||s)return;if(mE)return void function(e){vE.includes(e)||vE.unshift(e)}(i);const o=n;r.clear(),mE=!0,s=!0,n=PA(r,e),s=!1,mE=!1,t(n,o),function(){for(;vE.length;)vE.pop()()}()})),n=null,s=!1;return s=!0,n=PA(r,e),s=!1,jb((function(){r&&(r.destroy(),r=null,n=null)}))}function _E(e,t){let r=new hE((function(){t(n,s)})),n=null;function s(){return r?(r.clear(),n=PA(r,e),n):null}return s(),jb((function(){r&&(r.destroy(),r=null),n=null}))}var wE;!function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"}(wE||(wE={}));let bE=class{constructor(){this.uid=dE(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,r,n,s){return this.pool.acquire(wE.Untracked,e,t,r,n,s,Ab)}static acquireTracked(e,t,r,n){return this.pool.acquire(wE.Tracked,e,t,r,null,null,n)}notify(e,t){this.type===wE.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,r,n,s,i,o){this.uid=dE(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=n,this.target=s,this.path=i,this.equals=o}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=dE(),this.removed=!0}};bE.pool=new class extends mA{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}}(bE);const SE=new ZA,AE=new Set;let EE;function IE(e){AE.delete(e),AE.add(e),EE||(EE=oE(OE))}function kE(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function OE(){let e=10;for(;EE&&e--;){EE=null;const e=TE(),t=SE.acquire();for(const r of e){const e=r.uid;kE(r),e===r.uid&&r.removed&&t.push(r)}for(const e of AE)e.removed&&(t.push(e),AE.delete(e));for(const e of t)bE.pool.release(e);SE.release(t),SE.release(e),CE.forEach((e=>e()))}}function TE(){const e=SE.acquire();e.length=AE.size;let t=0;for(const r of AE)e[t]=r,++t;return AE.clear(),e}const CE=new Set;function xE(e,t,r,n=!1){return e.__accessor__&&e.__accessor__.lifecycle!==uA.DESTROYED?n?function(e,t,r){const n=sA(e,t,r,((e,t,r)=>{let s=!1;return yE((()=>aA(e,t)),((i,o)=>{e.__accessor__.lifecycle!==uA.DESTROYED?s||(s=!0,Ab(o,i)||r.call(e,i,o,t,e),s=!1):n.remove()}))}));return n}(e,t,r):function(e,t,r){let n=sA(e,t,r,((e,t,r)=>{let s,i,o=_E((()=>aA(e,t)),((o,a)=>{var l;(null==(l=e.__accessor__)?void 0:l.lifecycle)===uA.DESTROYED||s&&s.uid!==i?n.remove():(s||(s=bE.acquireUntracked(o,r,a,e,t),i=s.uid),IE(s))}));return jb((()=>{o.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,IE(s)),s=null),n=o=null}))}));return n}(e,t,r):jb()}function RE(e,t,r=!1,n=Eb){return r?function(e,t,r){let n=!1;return yE(e,((e,s)=>{n||(n=!0,r(s,e)||t(e,s),n=!1)}))}(e,t,n):function(e,t,r){let n,s,i=_E(e,((e,o)=>{n&&n.uid!==s?i.remove():(n||(n=bE.acquireTracked(e,t,o,r),s=n.uid),IE(n))}));return jb((()=>{i.remove(),n&&(n.uid!==s||n.removed||(n.removed=!0,IE(n)),n=null),i=null}))}(e,t,n)}function jE(e,t,r){const n=e.get(t);if(void 0!==n)return n;const s=r();return e.set(t,s),s}const PE=()=>dS.getLogger("esri.core.accessorSupport.ensureTypes");function DE(e){return null==e?e:new Date(e)}function UE(e){return null==e?e:!!e}function LE(e){return null==e?e:e.toString()}function NE(e){return null==e?e:Math.round(parseFloat(e))}function $E(e){return null}function ME(e){return(null==e?void 0:e.constructor)&&void 0!==e.constructor.__accessorMetadata__}function FE(e,t){return null!=t&&e&&!(t instanceof e)}function BE(e){return e&&"isCollection"in e}function qE(e){return(null==e?void 0:e.Type)?"function"==typeof e.Type?e.Type:e.Type.base:null}function zE(e,t){return!!ME(t)&&(PE().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+WE(e)+"'"),!0)}function VE(e,t){return null==t?t:BE(e)?function(e,t){if(!(null==t?void 0:t.constructor)||!BE(t.constructor))return zE(e,t)?t:new e(t);const r=qE(e.prototype.itemType),n=qE(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(zE(e,t),t):new e(t):t}(e,t):FE(e,t)?zE(e,t)?t:new e(t):t}function WE(e){var t;return(null==(t=null==e?void 0:e.prototype)?void 0:t.declaredClass)||"unknown"}const GE=new WeakMap;function HE(e){switch(e){case Number:return e=>function(e,t=0){return null==e?e:(e=parseFloat(e),isNaN(e)?t:e)}(e);case tI:return NE;case Boolean:return UE;case String:return LE;case Date:return DE;case rI:return $E;default:return jE(GE,e,(()=>VE.bind(null,e)))}}function JE(e,t){const r=HE(e);return 1===arguments.length?r:r(t)}function KE(e,t,r){return 1===arguments.length?KE.bind(null,e):t?Array.isArray(t)?t.map((t=>e(t,r))):[e(t,r)]:t}function YE(e,t,r){return 0!==t&&Array.isArray(r)?r.map((r=>YE(e,t-1,r))):e(r)}function ZE(e,t,r){if(2===arguments.length)return r=>ZE(e,t,r);if(!r)return r;r=YE(e,t,r);let n=t,s=r;for(;n>0&&Array.isArray(s);)n--,s=s[0];if(void 0!==s)for(let e=0;e<n;e++)r=[r];return r}function XE(e){return!!Array.isArray(e)&&!e.some((t=>{const r=typeof t;return!("string"===r||"number"===r||"function"===r&&e.length>1)}))}function QE(e,t){if(2===arguments.length)return QE(e).call(null,t);const r=new Set,n=e.filter((e=>"function"!=typeof e)),s=e.filter((e=>"function"==typeof e));for(const t of e)"string"!=typeof t&&"number"!=typeof t||r.add(t);let i=null,o=null;return(e,t)=>{if(null==e)return e;const a=typeof e,l="string"===a||"number"===a;return l&&(r.has(e)||s.some((e=>"string"===a&&e===String||"number"===a&&e===Number)))||"object"===a&&s.some((t=>!FE(e,t)))?e:(l&&n.length?(i||(i=n.map((e=>"string"==typeof e?`'${e}'`:`${e}`)).join(", ")),PE().error("Accessor#set",`'${e}' is not a valid value for this property, only the following values are valid: ${i}`)):"object"==typeof e&&s.length?(o||(o=s.map((e=>WE(e))).join(", ")),PE().error("Accessor#set",`'${e}' is not a valid value for this property, value must be one of ${o}`)):PE().error("Accessor#set",`'${e}' is not a valid value for this property`),t&&(t.valid=!1),null)}}function eI(e,t){if(2===arguments.length)return eI(e).call(null,t);const r={},n=[],s=[];for(const t in e.typeMap){const i=e.typeMap[t];r[t]=JE(i),n.push(WE(i)),s.push(t)}const i="string"==typeof e.key?t=>t[e.key]:e.key;return t=>{if(e.base&&!FE(e.base,t))return t;if(null==t)return t;const o=i(t)||e.defaultKeyValue,a=r[o];if(!a)return PE().error("Accessor#set",`Invalid property value, value needs to be one of '${n.join("', '")}', or a plain object that can autocast (having .type = '${s.join("', '")}')`),null;if(!FE(e.typeMap[o],t))return t;if("string"==typeof e.key&&!ME(t)){const r={};for(const n in t)n!==e.key&&(r[n]=t[n]);return a(r)}return a(t)}}let tI=class{},rI=class{};function nI(e){switch(e.type){case"native":return JE(e.value);case"array":return KE(nI(e.value));case"one-of":return function(e){let t=null;return(r,n)=>iI(r,e)?r:(null==t&&(t=sI(e)),PE().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}(e);default:return null}}function sI(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case tI:return"integer";case Date:return"date";case rI:return"null";default:return WE(e.value)}case"array":return`array of ${sI(e.value)}`;case"one-of":{const t=e.values.map((e=>sI(e)));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function iI(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case tI:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e;case rI:return null===e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some((e=>!iI(e,t.value)));case"one-of":return t.values.some((t=>iI(e,t)))}}function oI(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(t,r),s=pA(t,r);n&&(n.get||n.set?(s.get=n.get||s.get,s.set=n.set||s.set):"value"in n&&("value"in e&&dS.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=n.value)),null!=e.readOnly&&(s.readOnly=e.readOnly);const i=e.aliasOf;if(i){const e="string"==typeof i?i:i.source,t="string"==typeof i?null:!0===i.overridable;let n;s.dependsOn=[e],s.get=function(){let t=lA(this,e);if("function"==typeof t){n||(n=e.split(".").slice(0,-1).join("."));const r=lA(this,n);r&&(t=t.bind(r))}return t},s.readOnly||(s.set=t?function(e){this._override(r,e)}:function(t){HA(this,e,t)})}const o=e.type,a=e.types;if(!s.cast){let t;o?t=function(e){let t=0,r=e;if(function(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}(e))return nI(e);for(;Array.isArray(r)&&1===r.length&&"string"!=typeof r[0]&&"number"!=typeof r[0];)r=r[0],t++;const n=r;if(XE(n))return 0===t?QE(n):ZE(QE(n),t);if(1===t)return function(e,t){return 1===arguments.length?KE((t=>JE(e,t))):KE((t=>JE(e,t)),t)}(n);if(t>1)return function(e,t,r){return 2===arguments.length?ZE((t=>JE(e,t)),t):ZE((t=>JE(e,t)),t,r)}(n,t);const s=e;return s.from?s.from:JE(s)}(o):a&&(t=Array.isArray(a)?KE(eI(a[0])):eI(a)),e.cast=function(e,t){if(e||t)return e?t?(r,n)=>t(e(r,n),n):e:t}(e.cast,t)}(function(e,t){eA(e,t,gA)})(s,e),e.range&&(s.cast=function(e,t){return r=>{let n=e(r);return null!=t.step&&(n=Math.round(n/t.step)*t.step),null!=t.min&&(n=Math.max(t.min,n)),null!=t.max&&(n=Math.min(t.max,n)),n}}(s.cast,e.range))}}let aI=class extends pS{constructor(e,t,r){super(e,t,r)}};function lI(e){var t;return!!e&&(null==(t=e.prototype)?void 0:t.declaredClass)&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}aI.prototype.type="warning";const cI=()=>dS.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function uI(e,t,r){var n,s;e&&(!r&&!t.read||(null==(n=t.read)?void 0:n.reader)||!1===(null==(s=t.read)?void 0:s.enabled)||function(e){return"types"in e?mI(e.types):gI(e.type)}(e)&&kb("read.reader",function(e){var t,r;const n=e.ndimArray??0;if(n>1)return function(e){const t=dI(e),r=hI.bind(null,t),n=e.ndimArray??0;return(e,t,s)=>{if(null==e)return e;e=r(e,s,n);let i=n,o=e;for(;i>0&&Array.isArray(o);)i--,o=o[0];if(void 0!==o)for(let t=0;t<i;t++)e=[e];return e}}(e);if(1===n)return pI(e);if("type"in e&&fI(e.type)){const n=null==(r=null==(t=e.type.prototype)?void 0:t.itemType)?void 0:r.Type,s=pI("function"==typeof n?{type:n}:{types:n});return(t,r,n)=>{const i=s(t,r,n);return i?new e.type(i):i}}return dI(e)}(e),t))}function dI(e){return"type"in e?function(e){return e.prototype.read?(t,r,n)=>{if(null==t)return t;const s=typeof t;if("object"!==s)return void cI().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const i=new e;return i.read(t,n),i}:e.fromJSON}(e.type):function(e){let t=null;const r=e.errorContext??"type",n=e.validate;return(s,i,o)=>{if(null==s)return s;const a=typeof s;if("object"!==a)return void cI().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=function(e){var t,r;const n={};for(const s in e.typeMap){const i=e.typeMap[s],o=hA(i.prototype);if("function"==typeof e.key)continue;const a=o[e.key];if(!a)continue;if((null==(t=a.json)?void 0:t.type)&&Array.isArray(a.json.type)&&1===a.json.type.length&&"string"==typeof a.json.type[0]){n[a.json.type[0]]=i;continue}const l=null==(r=a.json)?void 0:r.write;if(!(null==l?void 0:l.writer)){n[s]=i;continue}const c=l.target,u="string"==typeof c?c:e.key,d={};l.writer(s,d,u),d[u]&&(n[d[u]]=i)}return n}(e));const l=e.key;if("string"!=typeof l)return;const c=s[l],u=c?t[c]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!u){const e=`Type '${c||"unknown"}' is not supported`;return(null==o?void 0:o.messages)&&s&&o.messages.push(new aI(`${r}:unsupported`,e,{definition:s,context:o})),void cI().error(e)}const d=new u;return d.read(s,o),n?n(d):d}}(e.types)}function hI(e,t,r,n){return 0!==n&&Array.isArray(t)?t.map((t=>hI(e,t,r,n-1))):e(t,void 0,r)}function pI(e){const t=dI(e);return(e,r,n)=>{if(null==e)return e;if(Array.isArray(e)){const r=[];for(const s of e){const e=t(s,void 0,n);void 0!==e&&r.push(e)}return r}const s=t(e,void 0,n);return void 0!==s?[s]:void 0}}function fI(e){if(!lI(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&("function"==typeof t.Type?gI(t.Type):mI(t.Type))}function gI(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||fI(e))}function mI(e){for(const t in e.typeMap)if(!gI(e.typeMap[t]))return!1;return!0}function vI(e){e.name&&(e.read&&"object"==typeof e.read?void 0===e.read.source&&(e.read.source=e.name):e.read={source:e.name},e.write&&"object"==typeof e.write?void 0===e.write.target&&(e.write.target=e.name):e.write={target:e.name})}function yI(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function _I(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}function wI(e,t){if(!t.write||t.write.writer||!1===t.write.enabled&&!t.write.overridePolicy)return;const r=(null==e?void 0:e.ndimArray)??0;e&&(1===r||"type"in e&&lI(e.type))?t.write.writer=EI:r>1?t.write.writer=function(e){return(t,r,n,s)=>{let i;if(null===t)i=null;else{i=II(t,s,e);let r=e,n=i;for(;r>0&&Array.isArray(n);)r--,n=n[0];if(void 0!==n)for(let e=0;e<r;e++)i=[i]}kb(n,i,r)}}(r):t.types?Array.isArray(t.types)?t.write.writer=function(e){return(t,r,n,s)=>t&&Array.isArray(t)?SI(t.filter((t=>bI(t,e,s))),r,n,s):SI(t,r,n,s)}(t.types[0]):t.write.writer=function(e){return(t,r,n,s)=>t?bI(t,e,s)?SI(t,r,n,s):void 0:SI(t,r,n,s)}(t.types):t.write.writer=SI}function bI(e,t,r){for(const r in t.typeMap)if(e instanceof t.typeMap[r])return!0;if(null==r?void 0:r.messages){const n=t.errorContext??"type",s=`Values of type '${("function"!=typeof t.key?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new fS(`${n}:unsupported`,s,{definition:e,context:r})),dS.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function SI(e,t,r,n){kb(r,AI(e,n),t)}function AI(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?function(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}(e):e}function EI(e,t,r,n){let s;null===e?s=null:e&&"function"==typeof e.map?(s=e.map((e=>AI(e,n))),"function"==typeof s.toArray&&(s=s.toArray())):s=[AI(e,n)],kb(r,s,t)}function II(e,t,r){return 0!==r&&Array.isArray(e)?e.map((e=>II(e,t,r-1))):AI(e,t)}function kI(e,t){return TI(e,"read",null==t?void 0:t.origin)}function OI(e,t){return TI(e,"write",null==t?void 0:t.origin)}function TI(e,t,r){let n=null==e?void 0:e.json;if((null==n?void 0:n.origins)&&r){let e;e="link-chart"===r?n.origins[r]&&("any"===t||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],e&&("any"===t||t in e)&&(n=e)}return n}function CI(e){var t;const r=function(e){return e.json.types?jI(e.json):e.type?RI(e):jI(e)}(e);if(e.json.origins)for(const n in e.json.origins){const s=e.json.origins[n],i=s.types?xI(s):r;uI(i,s,!1),s.types&&!s.write&&(null==(t=e.json.write)?void 0:t.enabled)&&(s.write={...e.json.write}),wI(i,s)}uI(r,e.json,!0),wI(r,e.json)}function xI(e){return e.type?RI(e):jI(e)}function RI(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!XE(r);)r=r[0],t++;return{type:r,ndimArray:t}}function jI(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function PI(e){(function(e){if(e.json||(e.json={}),yI(e.json),_I(e.json),vI(e.json),e.json.origins)for(const t in e.json.origins)yI(e.json.origins[t]),_I(e.json.origins[t]),vI(e.json.origins[t]);return!0})(e)&&(function(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const e in r)if(t[e]){const n=t[e];r[e].forEach((e=>{t[e]=n})),delete t[e]}}}(e),CI(e))}const DI=new Set,UI=new Set;function LI(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,function(e){const t=e.prototype,r=hA(t),n={};for(const e of Object.getOwnPropertyNames(r)){const t=r[e];PI(t),n[e]={enumerable:!0,configurable:!0,get:NI(e,t),set(r){const n=this.__accessor__;if(void 0!==n){if(n.mutable)return n.initialized&&t.readOnly?$I("read-only",e):n.lifecycle===uA.CONSTRUCTED&&t.constructOnly?$I("construct-only",e):void n.set(e,r)}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}}Object.defineProperties(e.prototype,n)}(t);const r=[],n=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!DI.has(s.initialize)&&(DI.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!UI.has(s.destroy)&&(UI.add(s.destroy),n.push(s.destroy)),s=Object.getPrototypeOf(s);DI.clear(),UI.clear();const i=class extends t{constructor(...e){if(super(...e),this.constructor===i&&"function"==typeof this.postscript){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=r.length-1;e>=0;e--)r[e].call(this)}}),n.length){let e=!1;const t=this[XS];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0,t.call(this);for(let e=0;e<n.length;e++)n[e].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};i.__accessorMetadata__=hA(t.prototype),i.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(i,"name",{value:o,configurable:!0}),i}}function NI(e,t){return null==t.get?function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0===r)return;t.mutable&&xA(r);const n=t.store;return n.has(e)?n.get(e):r.metadata.value}:function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0!==r)return r.getComputed(t)}}const $I=(e,t)=>{dS.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var MI,FI;function BI(e){var t;if(null==e)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return(null==(t=e.constructor)?void 0:t.__accessorMetadata__)||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const qI=Symbol("Accessor-Handles"),zI=Symbol("Accessor-Initialized");let VI=class e{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:t,declaredClass:r,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class i extends s{constructor(...e){super(...e),this.inherited=null,n&&n.apply(this,e)}}hA(i.prototype);for(const t in e){const r=e[t];i.prototype[t]="function"==typeof r?function(...e){const n=this.inherited;let i;this.inherited=function(...e){if(s.prototype[t])return s.prototype[t].apply(this,e)};try{i=r.apply(this,e)}catch(e){throw this.inherited=n,e}return this.inherited=n,i}:e[t]}for(const e in t){oI(BI(t[e]))(i.prototype,e)}return LI(r)(i)}static freeze(t){return t instanceof e?t.__accessor__.mutable=!1:Object.freeze(t),t}static isFrozen(t){return t instanceof e?!t.__accessor__.mutable:Object.isFrozen(t)}constructor(...t){var r;if(this[MI]=null,this[FI]=!1,this.constructor===e)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new WA(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),t.length>0&&(n.ctorArgs=(null==(r=this.normalizeCtorArgs)?void 0:r.apply(this,t))??t[0])}postscript(){const e=this.__accessor__,t=e.ctorArgs;e.initialize(),t&&(this.set(t),e.ctorArgs=null),e.constructed(),this.initialize(),this[zI]=!0}initialize(){}[XS](){this[qI]=wS(this[qI])}destroy(){var e;this.destroyed||(function(e){for(const t of AE.values())t.target===e&&(t.removed=!0)}(this),this.__accessor__.destroy(),null==(e=void 0)||e.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[zI]}get destroyed(){var e;return(null==(e=this.__accessor__)?void 0:e.lifecycle)===uA.DESTROYED||!1}commitProperty(e){lA(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return HA(this,e,t),this}watch(e,t,r){return GS(dS.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-core-reactiveUtils.html#watch",warnOnce:!0}),xE(this,e,t,r)}addHandles(e,t){if(this.destroyed){const t=Array.isArray(e)?e:[e];for(const e of t)e.remove()}else(this[qI]??(this[qI]=new JS)).add(e,t)}removeHandles(e){var t;null==(t=this[qI])||t.remove(e)}removeAllHandles(){var e;null==(e=this[qI])||e.removeAll()}removeHandlesReference(e){var t;null==(t=this[qI])||t.removeReference(e)}hasHandles(e){var t;return!0===(null==(t=this[qI])?void 0:t.has(e))}_override(e,t){void 0===t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){null==t?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}};MI=qI,FI=zI;let WI=class e{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new e;return this._values.forEach(((e,n)=>{t&&t.has(n)||r.set(n,bb(e.value),e.origin)})),r}get(e,t){t=this._normalizeOrigin(t);const r=this._values.get(e);return null==t||(null==r?void 0:r.origin)===t?null==r?void 0:r.value:void 0}originOf(e){var t;return(null==(t=this._values.get(e))?void 0:t.origin)??wA.USER}keys(e){e=this._normalizeOrigin(e);const t=[...this._values.keys()];return null==e?t:t.filter((t=>{var r;return(null==(r=this._values.get(t))?void 0:r.origin)===e}))}set(e,t,r){if((r=this._normalizeOrigin(r))===wA.DEFAULTS){const t=this._values.get(e);if(null!=(null==t?void 0:t.origin)&&t.origin>r)return}this._values.set(e,new GI(t,r))}delete(e,t){var r;null!=(t=this._normalizeOrigin(t))&&(null==(r=this._values.get(e))?void 0:r.origin)!==t||this._values.delete(e)}has(e,t){var r;return null!=(t=this._normalizeOrigin(t))?(null==(r=this._values.get(e))?void 0:r.origin)===t:this._values.has(e)}forEach(e){this._values.forEach((({value:t},r)=>e(t,r)))}_normalizeOrigin(e){if(null!=e)return e===wA.DEFAULTS?e:wA.USER}};class GI{constructor(e,t){this.value=e,this.origin=t}}function HI(e,t,r){if(!(null==e?void 0:e.read)||!1===e.read.enabled||!e.read.source)return!1;const n=e.read.source;if("string"==typeof n){if(n===t)return!0;if(n.includes(".")&&0===n.indexOf(t)&&cA(n,r))return!0}else for(const e of n){if(e===t)return!0;if(e.includes(".")&&0===e.indexOf(t)&&cA(e,r))return!0}return!1}function JI(e,t,r,n,s){let i=kI(t[r],s);(function(e){return e&&(!e.read||!1!==e.read.enabled&&!e.read.source)})(i)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))i=kI(t[o],s),HI(i,r,n)&&(e[o]=!0)}function KI(e,t,r,n){const s=function(e,t){return TI(e,"any",null==t?void 0:t.origin)}(r.metadata[t],n),i=null==s?void 0:s.default;if(void 0===i)return;const o="function"==typeof i?i.call(e,t,n):i;void 0!==o&&r.set(t,o)}const YI={origin:"service"};function ZI(e,t,r,n,s){var i,o;const a={};return null==(o=null==(i=t.write)?void 0:i.writer)||o.call(e,n,a,r,s),a}function XI(e,t,r,n,s,i){if(!(null==n?void 0:n.write))return!1;const o=lA(e,r);if(!s&&n.write.overridePolicy){const t=n.write.overridePolicy.call(e,o,r,i??void 0);void 0!==t&&(s=t)}if(s||(s=n.write),!s||!1===s.enabled)return!1;if(s.layerContainerTypes&&(null==i?void 0:i.layerContainerType)&&!s.layerContainerTypes.includes(i.layerContainerType))return!1;if((null===o&&!s.allowNull&&!s.writerEnsuresNonNull||void 0===o)&&s.isRequired){const t=new fS("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return t&&(null==i?void 0:i.messages)?i.messages.push(t):t&&!i&&dS.getLogger("esri.core.accessorSupport.write").error(t.name,t.message),!1}return void 0!==o&&(!(null===o&&!s.allowNull&&!s.writerEnsuresNonNull)&&(!(!(s.alwaysWriteDefaults||t.store.multipleOriginsSupported&&t.store.originOf(r)!==wA.DEFAULTS)&&function(e,t,r,n,s){const i=n.default;if(void 0===i)return!1;if(null!=n.defaultEquals)return n.defaultEquals(s);if("function"==typeof i){if(Array.isArray(s)){return yb(i.call(e,t,r??void 0),s)}return!1}return i===s}(e,r,i,n,o))&&!(!s.ignoreOrigin&&(null==i?void 0:i.origin)&&t.store.multipleOriginsSupported&&t.store.originOf(r)<AA(i.origin))))}const QI=e=>{let t=class extends e{constructor(...e){super(...e);const t=QS(this),r=t.store,n=new WI;t.store=n,function(e,t,r){t.keys().forEach((e=>{r.set(e,t.get(e),wA.DEFAULTS)}));const n=e.metadata;Object.keys(n).forEach((t=>{e.internalGet(t)&&r.set(t,e.internalGet(t),wA.DEFAULTS)}))}(t,r,n)}read(e,t){!function(e,t,r=YI){if(!t||"object"!=typeof t)return;const n=QS(e),s=n.metadata,i={};for(const e of Object.getOwnPropertyNames(t))JI(i,s,e,t,r);n.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(i)){const i=kI(s[o],r).read,a=null==i?void 0:i.source;let l;l=a&&"string"==typeof a?aA(t,a):t[o],(null==i?void 0:i.reader)&&(l=i.reader.call(e,l,t,r)),void 0!==l&&n.set(o,l)}if(!r||!r.ignoreDefaults){n.setDefaultOrigin("defaults");for(const t of Object.getOwnPropertyNames(s))i[t]||KI(e,t,n,r)}n.setDefaultOrigin("user")}(this,e,t)}write(e,t){return function(e,t,r){var n,s;if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return eA(t,e.toJSON(r));const i=QS(e),o=i.metadata;for(const a in o){const l=OI(o[a],r);if(!XI(e,i,a,l,void 0,r))continue;const c=lA(e,a),u=ZI(e,l,l.write&&"string"==typeof l.write.target?l.write.target:a,c,r);Object.keys(u).length>0&&(t=eA(t,u),(null==(s=null==(n=null==r?void 0:r.resources)?void 0:n.pendingOperations)?void 0:s.length)&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then((()=>eA(t,u,(()=>"replace-arrays"))))),(null==r?void 0:r.writtenProperties)&&r.writtenProperties.push({target:e,propName:a,oldOrigin:IA(i.store.originOf(a)),newOrigin:r.origin}))}return t}(this,e??{},t)}toJSON(e){return this.write({},e)}static fromJSON(e,t){return ek.call(this,e,t)}};return t=VS([LI("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function ek(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let tk=class extends(QI(VI)){};tk=VS([LI("esri.core.JSONSupport")],tk),function(e){e.JSONSupportMixin=QI,e.isSerializable=function(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}}(tk||(tk={}));const rk=tk;function nk(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function sk(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,n=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):n.test(e)&&(e=e.replace(n,"https://qaext.arcgis.com")),e}const ik=()=>dS.getLogger("esri.core.urlUtils"),ok=oS.request,ak="esri/config: esriConfig.request.proxyUrl is not set.",lk=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,ck=/^\s*http:/i,uk=/^\s*https:/i,dk=/^\s*file:/i,hk=/:\d+$/,pk=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,fk=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),gk=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let mk=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let t=this.uri.match(fk);this.scheme=t[2]||(t[1]?"":null),this.authority=t[4]||(t[3]?"":null),this.path=t[5],this.query=t[7]||(t[6]?"":null),this.fragment=t[9]||(t[8]?"":null),null!=this.authority&&(t=this.authority.match(gk),this.user=t[3]||null,this.password=t[4]||null,this.host=t[6]||t[7],this.port=t[9]||null)}toString(){return this.uri}};const vk={};let yk=new mk(oS.applicationUrl);const _k=function(){const e=yk.path,t=e.slice(0,e.lastIndexOf("/")+1);return`${yk.scheme}://${yk.host}${null!=yk.port?`:${yk.port}`:""}${t}`}();let wk=_k;const bk=()=>yk;function Sk(e){if(!e)return null;const t={path:null,query:null},r=new mk(e),n=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.slice(0,n),t.query=Ak(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.slice(0,t.path.length-(r.fragment.length+1)))),t}function Ak(e){const t=e.split("&"),r={};for(const e of t){if(!e)continue;const t=e.indexOf("=");let n,s;t<0?(n=decodeURIComponent(e),s=""):(n=decodeURIComponent(e.slice(0,t)),s=decodeURIComponent(e.slice(t+1)));let i=r[n];"string"==typeof i&&(i=r[n]=[i]),Array.isArray(i)?i.push(s):r[n]=s}return r}function Ek(e,t){return e?Object.keys(e).map((r=>{const n=e[r];if(null==n)return"";const s=encodeURIComponent(r)+"=",i=null==t?void 0:t[r];return i?s+encodeURIComponent(i(n)):Array.isArray(n)?n.map((e=>rk.isSerializable(e)?s+encodeURIComponent(JSON.stringify(e)):s+encodeURIComponent(e))).join("&"):rk.isSerializable(n)?s+encodeURIComponent(JSON.stringify(n)):s+encodeURIComponent(n)})).filter((e=>e)).join("&"):""}function Ik(e=!1){let t,r=ok.proxyUrl;if("string"==typeof e){t=function(e){return null!=e&&uk.test(e)||"https"===yk.scheme&&zk(e)}(e);const n=Ck(e);n&&(r=n.proxyUrl)}else t=!!e;if(!r)throw ik().warn(ak),new fS("urlUtils:proxy-not-set",ak);return t&&Gk()&&(r=Wk(r)),Sk(r)}const kk={path:"",query:""};function Ok(e){const t=e.indexOf("?");return-1!==t?(kk.path=e.slice(0,t),kk.query=e.slice(t+1)):(kk.path=e,kk.query=null),kk}function Tk(e){return(e=Hk(e=function(e){return e.endsWith("/")?e:`${e}/`}(e=Ok(e).path),!0)).toLowerCase()}function Ck(e){const t=ok.proxyRules,r=Tk(e);for(let e=0;e<t.length;e++)if(0===r.indexOf(t[e].urlPrefix))return t[e]}function xk(e,t=ok.interceptors){const r=t=>null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&e.startsWith(t);if(t)for(const e of t)if(Array.isArray(e.urls)){if(e.urls.some(r))return e}else if(r(e.urls))return e;return null}function Rk(e,t,r=!1){if(!e||!t)return!1;const n=Kk(e),s=Kk(t);return!(!r&&n.scheme!==s.scheme)&&null!=n.host&&null!=s.host&&n.host.toLowerCase()===s.host.toLowerCase()&&n.port===s.port}function jk(e){if("string"==typeof e){if(!Mk(e))return!0;e=Kk(e)}if(Rk(e,yk))return!0;const t=ok.trustedServers||[];for(let r=0;r<t.length;r++){const n=Pk(t[r]);for(let t=0;t<n.length;t++)if(Rk(e,n[t]))return!0}return!1}function Pk(e){return vk[e]||(Vk(e)||zk(e)?vk[e]=[new mk(Dk(e))]:vk[e]=[new mk(`http://${e}`),new mk(`https://${e}`)]),vk[e]}function Dk(e,t=wk,r){return zk(e)?(null==r?void 0:r.preserveProtocolRelative)?e:"http"===yk.scheme&&yk.authority===$k(e).slice(2)?`http:${e}`:`https:${e}`:Vk(e)?e:Nk("/"===e[0]?function(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return-1===r?e:e.slice(0,r)}(t):t,e)}function Uk(e,t=wk,r){if(null==e||!Mk(e))return e;const n=Lk(e),s=n.toLowerCase(),i=Lk(t).toLowerCase().replace(/\/+$/,""),o=r?Lk(r).toLowerCase().replace(/\/+$/,""):null;if(o&&0!==i.indexOf(o))return e;const a=(e,t,r)=>-1===(r=e.indexOf(t,r))?e.length:r;let l=a(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,l+1)===i.slice(0,l)+"/"&&(c=l+1,l!==s.length);)l=a(s,"/",l+1);if(-1===c)return e;if(o&&c<o.length)return e;e=n.slice(c);const u=i.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let t=0;t<u;t++)e=`../${e}`;else e=`./${e}`;return e}function Lk(e){return function(e){const t=ok.httpsDomains;if(!function(e){return null!=e&&ck.test(e)||"http"===yk.scheme&&zk(e)}(e))return e;const r=e.indexOf("/",7);let n;if(n=-1===r?e:e.slice(0,r),n=n.toLowerCase().slice(7),hk.test(n)){if(!n.endsWith(":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return"http"===yk.scheme&&n===yk.authority&&!pk.test(e)||(Gk()&&n===yk.authority||t&&t.some((e=>n===e||n.endsWith(`.${e}`)))||Gk()&&!Ck(e))&&(e=Wk(e)),e}(e=function(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}(e=function(e){if(/^https?:\/\//i.test(e)){const t=Ok(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}(e=Dk(e=e.trim()))))}function Nk(...e){const t=e.filter(_b);if(!(null==t?void 0:t.length))return;const r=[];if(Mk(t[0])){const e=t[0],n=e.indexOf("//");-1!==n&&(r.push(e.slice(0,n+1)),function(e){return null!=e&&dk.test(e)}(t[0])&&(r[0]+="/"),t[0]=e.slice(n+2))}else"/"===t[0][0]&&r.push("");const n=t.reduce(((e,t)=>t?e.concat(t.split("/")):e),[]);for(let e=0;e<n.length;e++){const t=n[e];".."===t&&r.length>0&&".."!==r[r.length-1]?r.pop():(!t&&e===n.length-1||t&&("."!==t||0===r.length))&&r.push(t)}return r.join("/")}function $k(e,t=!1){if(null==e||Fk(e)||Bk(e))return null;let r=e.indexOf("://");if(-1===r&&zk(e))r=2;else{if(-1===r)return null;r+=3}const n=e.indexOf("/",r);return-1!==n&&(e=e.slice(0,n)),t&&(e=Hk(e,!0)),e}function Mk(e){return zk(e)||Vk(e)}function Fk(e){return null!=e&&"blob:"===e.slice(0,5)}function Bk(e){return null!=e&&"data:"===e.slice(0,5)}function qk(e){return function(e){const t=new Uint8Array(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}function zk(e){return null!=e&&"/"===e[0]&&"/"===e[1]}function Vk(e){return null!=e&&lk.test(e)}function Wk(e){return zk(e)?`https:${e}`:e.replace(ck,"https:")}function Gk(){return"https"===yk.scheme}function Hk(e,t=!1){return zk(e)?e.slice(2):(e=e.replace(lk,""),t&&e.length>1&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function Jk(e,t,r){if(!(t&&r&&e&&Mk(e)))return e;const n=e.indexOf("//"),s=e.indexOf("/",n+2),i=e.indexOf(":",n+2),o=Math.min(s<0?e.length:s,i<0?e.length:i);return e.slice(n+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,n+2)}${r}${e.slice(o)}`}function Kk(e){return"string"==typeof e?new mk(Dk(e)):(e.scheme||(e.scheme=yk.scheme),e)}function Yk(e,t){if(!t)return e;const r=Sk(e),n=r.query||{};for(const[e,r]of Object.entries(t))null!=r&&(n[e]=r);const s=Ek(n);return s?`${r.path}?${s}`:r.path}function Zk(e){if(null==e)return null;const t=e.match(Xk);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}const Xk=/([^.]*)\.([^/]*)$/;let Qk;function eO(e){Qk=e}function tO(e,t){var r;const n=null==(r=null==t?void 0:t.url)?void 0:r.path;if(e&&n&&(e=Dk(e,n,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const r=Uk(e,t.portalItem.itemUrl);null!=r&&sO.test(r)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(r).path)}return(e=oO(e,null==t?void 0:t.portal))&&nO.test(e)?aO(e):e}function rO(e,t,r=cO.YES){var n,s;if(null==(e=e&&nO.test(e)?lO(e):e))return e;!Mk(e)&&(null==t?void 0:t.blockedRelativeUrls)&&t.blockedRelativeUrls.push(e);let i=Dk(e);if(t){const r=(null==(n=t.verifyItemRelativeUrls)?void 0:n.rootPath)||(null==(s=t.url)?void 0:s.path);if(r){const n=oO(r,t.portal),s=oO(i,t.portal);i=Uk(s,n,n),null!=i&&i!==s&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=iO(i,null==t?void 0:t.portal),Mk(i)&&(i=Lk(i)),(null==t?void 0:t.resources)&&(null==t?void 0:t.portalItem)&&!Mk(i)&&!Bk(i)&&r===cO.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}Symbol.dispose??(Symbol.dispose=Symbol("Symbol.dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("Symbol.asyncDispose")),vb("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),vb("host-webworker");const nO=/\/items\/([^/]+)\/resources\/(.*)/,sO=/^\.\/resources\//;function iO(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?Jk(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function oO(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,n=bk();return Rk(n,`${n.scheme}://${r}`)?Jk(e,t.portalHostname,r):Jk(e,r,t.portalHostname)}function aO(e){if(!e)return e||null;let t=e;return t&&Qk&&!Qk.findCredential(t)&&(t=sk(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function lO(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&Qk&&!Qk.findCredential(t)&&(t=sk(t)),t}var cO;!function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"}(cO||(cO={})),Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return cO},ensureMainOnlineDomain:iO,fromCDNUrl:lO,fromJSON:tO,itemIdFromResourceUrl:function(e){const t=(null==e?void 0:e.match(nO))??null;return(null==t?void 0:t[1])??null},prefixAndFilenameFromResourceUrl:function(e){const t=(null==e?void 0:e.match(nO))??null;if(null==t)return null;const r=t[2],n=r.lastIndexOf("/");if(-1===n){const{path:e,extension:t}=Zk(r);return{prefix:null,filename:e,extension:t}}const{path:s,extension:i}=Zk(r.slice(n+1));return{prefix:r.slice(0,n),filename:s,extension:i}},read:function(e,t,r){return tO(e,r)},toCDNUrl:aO,toJSON:rO,write:function(e,t,r,n){const s=rO(e,n);void 0!==s&&(t[r]=s)}},Symbol.toStringTag,{value:"Module"}));const uO=Object.values({mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"});function dO(e){let t=$k(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${uO.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${uO.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i");const hO=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function pO(e,t){return!(!oS.apiKey||!function(e){const t=$k(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!hO.has(t)&&!e.endsWith("/sharing/rest/generateToken")}(e))}function fO(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const gO="Timeout exceeded";async function mO(e,t){var n;e instanceof URL&&(e=e.toString()),(null==t?void 0:t.query)instanceof URLSearchParams&&(t.query=Ak(t.query.toString().replaceAll("+"," ")));const s=Bk(e),i=Fk(e);i||s||(e=Lk(e));const o={url:e,requestOptions:{...t}},a=e=>({data:e,getAllHeaders:AO,getHeader:AO,httpStatus:200,requestOptions:o.requestOptions,url:o.url}),l=xk(e,yO.internalInterceptors);if(l){const e=await xO(l,o);if(null!=e)return a(e)}let c=xk(e);if(c){const e=await xO(c,o);if(null!=e)return a(e);c.after||c.error||(c=null)}if(e=o.url,"image"===(t=o.requestOptions).responseType&&(vb("host-webworker")||vb("host-node")))throw kO("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),o);if("head"===t.method){if(t.body)throw kO("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),o);if(s||i)throw kO("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),o)}if(await async function(){vb("host-webworker")&&!vO&&(vO=await r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_request-DKab8zXV_js").then(r.bind(r,36674)))}(),vO)return vO.execute(e,t);const u=new AbortController,d=OS(t,(()=>u.abort())),h={controller:u,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:c,params:o,redoRequest:!1,useIdentity:yO.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=t.useRequestQueue?async function(e){const t=function(e){let t,r;return"string"==typeof e?(t=$k(e,!0),r=dO(e)):(t=e.origin,r=dO(e.toString())),null==t?null:{origin:t,isHosted:r}}(e.params.url);if(!t)return PO(e);const{QueueProcessor:n}=await r.e("extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_QueueProcessor-F1nkeFoA_js").then(r.bind(r,33823)),s=jE(jO,t.origin,(()=>{const e=t.isHosted?vb("request-queue-concurrency-hosted"):vb("request-queue-concurrency-non-hosted");return new n({concurrency:e,process:e=>{if(IS(e.params.requestOptions))throw kO("",AS("Request canceled"),e.params);return PO(e)}})}));return s.push(e)}(h):PO(h),f=await p.finally((()=>null==d?void 0:d.remove()));return null==(n=null==c?void 0:c.after)||n.call(c,f),f}let vO;const yO=oS.request,_O="FormData"in globalThis,wO=new Set([499,498,403,401]),bO=new Set(["COM_0056","COM_0057","SB_0008"]),SO=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],AO=()=>null,EO=Symbol();function IO(e){const t=$k(e);return!t||t.endsWith(".arcgis.com")||mO._corsServers.includes(t)||jk(t)}function kO(e,t,r,n){let s="Error";const i={url:r.url,requestOptions:r.requestOptions,getAllHeaders:AO,getHeader:AO,ssl:!1};if(t instanceof fS)return t.details?(t.details=bb(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=i,t;if(t){const e=n&&(()=>Array.from(n.headers)),r=n&&(e=>n.headers.get(e)),o=null==n?void 0:n.status,a=t.message;a&&(s=a),e&&r&&(i.getAllHeaders=e,i.getHeader=r),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||o||0,i.subCode=t.subcode,i.messageCode=t.messageCode,"string"==typeof t.details?i.messages=[t.details]:i.messages=t.details,i.raw=EO in t?t[EO]:t}return CS(t)?AS():new fS(e,s,i)}async function OO(){Qk||await r.e("vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_IdentityManager-5ef2bb").then(r.bind(r,42982)).then((e=>e.I))}function TO(e){return SO.some((t=>t.test(e)))}async function CO(e){let t=e.params.url;const r=e.params.requestOptions,n=e.fetchOptions??{},s=Fk(t)||Bk(t),i=r.responseType||"json",o=s?0:null!=r.timeout?r.timeout:yO.timeout;let a=!1;if(!s){e.useSSL&&(t=Wk(t));let s={...r.query};e.credentialToken&&(s.token=e.credentialToken);let i=Ek(s);vb("esri-url-encodes-apostrophe")&&(i=i.replaceAll("'","%27"));const o=t.length+1+i.length;let l;a="delete"===r.method||"post"===r.method||"put"===r.method||!!r.body||o>yO.maxUrlLength;const c=r.useProxy||!!Ck(t);if(c){const e=Ik(t);l=e.path,!a&&l.length+1+o>yO.maxUrlLength&&(a=!0),e.query&&(s={...e.query,...s})}if("HEAD"===n.method&&(a||c)){if(a){if(o>yO.maxUrlLength)throw kO("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params);throw kO("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params)}if(c)throw kO("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(n.method="delete"===r.method?"DELETE":"put"===r.method?"PUT":"POST",r.body?t=Yk(t,s):(n.body=Ek(s),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Yk(t,s),c&&(e.useProxy=!0,t=`${l}?${t}`),s.token&&_O&&n.body instanceof FormData&&!nk(t)&&n.body.set("token",s.token),r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Rk(t,bk()))if(jk(t))e.withCredentials=!0;else if(Qk){const r=Qk.findServerInfo(t);(null==r?void 0:r.webTierAuth)&&(e.withCredentials=!0)}e.withCredentials&&(n.credentials="include",function(e){const t=oS.request.crossOriginNoCorsDomains;if(t){let r=$k(e);if(r)return r=r.toLowerCase(),!Rk(r,bk())&&t[r]<Date.now()-36e5}return!1}(t)&&await async function(e){var t;const r=Sk(e);e=r.path,"json"===(null==(t=r.query)?void 0:t.f)&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}const n=oS.request.crossOriginNoCorsDomains,s=$k(e);n&&s&&(n[s.toLowerCase()]=Date.now())}(a?Yk(t,s):t))}let l,c,u=0,d=!1;o>0&&(u=setTimeout((()=>{d=!0,e.controller.abort()}),o));try{if("native-request-init"===r.responseType)c=n,c.url=t,r.signal?c.signal=r.signal:delete c.signal;else if("image"!==r.responseType||"default"!==n.cache||"GET"!==n.method||a||function(e){if(e)for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0;return!1}(r.headers)||!s&&!e.useProxy&&yO.proxyUrl&&!IO(t)){if(mO._beforeFetch&&await mO._beforeFetch(t,n),l=await fetch(t,n),mO._afterFetch&&await mO._afterFetch(l),e.useProxy||function(e){const t=$k(e);t&&!mO._corsServers.includes(t)&&mO._corsServers.push(t)}(t),"native"===r.responseType)c=l;else if("HEAD"!==n.method)if(l.ok){switch(i){case"array-buffer":c=await l.arrayBuffer();break;case"blob":case"image":c=await l.blob();break;default:c=await l.text()}if(u&&(clearTimeout(u),u=0),"json"===i||"xml"===i||"document"===i)if(c)switch(i){case"json":c=JSON.parse(c);break;case"xml":c=RO(c,"application/xml");break;case"document":c=RO(c,"text/html")}else c=null;if(c){if("array-buffer"===i||"blob"===i){const e=l.headers.get("Content-Type");if(e&&/application\/json|text\/plain/i.test(e)&&c["blob"===i?"size":"byteLength"]<=750)try{const e=await new Response(c).json();e.error&&(c=e)}catch{}}"image"===i&&c instanceof Blob&&(c=await UO(URL.createObjectURL(c),e,!0))}}else{c=await l.text();try{c=JSON.parse(c)}catch{}}}else c=await UO(t,e)}catch(n){if("AbortError"===n.name){if(d)throw new Error(gO);throw AS("Request canceled")}if(!(!l&&n instanceof TypeError&&yO.proxyUrl)||r.body||"delete"===r.method||"head"===r.method||"post"===r.method||"put"===r.method||e.useProxy||IO(t))throw n;e.redoRequest=!0,function(e){const t={proxyUrl:e.proxyUrl,urlPrefix:Tk(e.urlPrefix)},r=ok.proxyRules,n=t.urlPrefix;let s=r.length;for(let e=0;e<r.length;e++){const t=r[e].urlPrefix;if(0===n.indexOf(t)){if(n.length===t.length)return-1;s=e;break}0===t.indexOf(n)&&(s=e+1)}r.splice(s,0,t)}({proxyUrl:yO.proxyUrl,urlPrefix:$k(t)??""})}finally{u&&clearTimeout(u)}return[l,c]}async function xO(e,t){if(null!=e.responseData)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,n;try{n=await e.before(t)}catch(e){r=kO("request:interceptor",e,t)}if((n instanceof Error||n instanceof fS)&&(r=kO("request:interceptor",n,t)),r)throw e.error&&e.error(r),r;return n}}function RO(e,t){let r;try{r=(new DOMParser).parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}mO._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],mO._beforeFetch=void 0,mO._afterFetch=void 0;const jO=new Map;async function PO(e){var t,r;let n,s;await async function(e){var t;const r=e.params.url,n=e.params.requestOptions,s=e.controller.signal,i=n.body;let o=null,a=null;if(_O&&"HTMLFormElement"in globalThis&&(i instanceof FormData?o=i:i instanceof HTMLFormElement&&(o=new FormData(i))),"string"==typeof i&&(a=i),e.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:"head"===n.method?"HEAD":"GET",mode:"cors",priority:yO.priority,redirect:"follow",signal:s},(o||a)&&(e.fetchOptions.body=o||a),"anonymous"===n.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(r)||(null==(t=n.query)?void 0:t.token)||(null==o?void 0:o.get("token"))),!e.hasToken&&pO(r)&&(n.query||(n.query={}),n.query.token=oS.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!TO(r)&&!IS(s)){let t;"immediate"===n.authMode?(await OO(),t=await Qk.getCredential(r,{signal:s}),e.credential=t):"no-prompt"===n.authMode?(await OO(),t=await Qk.getCredential(r,{prompt:!1,signal:s}).catch((()=>{})),e.credential=t):Qk&&(t=Qk.findCredential(r)),t&&(e.credentialToken=t.token,e.useSSL=!!t.ssl)}}(e);try{do{[n,s]=await CO(e)}while(!await DO(e,n,s))}catch(r){const s=kO("request:server",r,e.params,n);throw s.details.ssl=e.useSSL,(null==(t=e.interceptor)?void 0:t.error)&&e.interceptor.error(s),s}const i=e.params.url;if(s&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&(null==(r=s.user)?void 0:r.username)&&!jk(i)){const e=$k(i,!0);e&&yO.trustedServers.push(e)}Array.isArray(s.authorizedCrossOriginNoCorsDomains)&&function(e){oS.request.crossOriginNoCorsDomains||(oS.request.crossOriginNoCorsDomains={});const t=oS.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[$k(r)??""]=0:(t[$k("http://"+r)??""]=0,t[$k("https://"+r)??""]=0)}(s.authorizedCrossOriginNoCorsDomains)}const o=e.credential;if(o&&Qk){const e=Qk.findServerInfo(o.server);let t=null==e?void 0:e.owningSystemUrl;if(t){t=t.replace(/\/?$/,"/sharing");const e=Qk.findCredential(t,o.userId);e&&-1===Qk._getIdenticalSvcIdx(t,e)&&e.resources.unshift(t)}}return{data:s,getAllHeaders:n?()=>Array.from(n.headers):AO,getHeader:n?e=>n.headers.get(e):AO,httpStatus:(null==n?void 0:n.status)??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function DO(e,t,r){var n;if(e.redoRequest)return e.redoRequest=!1,!1;const s=e.params.requestOptions;if(!t||"native"===s.responseType||"native-request-init"===s.responseType)return!0;let i,o;if(r&&(r.error&&"object"==typeof r.error?i=r.error:"error"===r.status&&Array.isArray(r.messages)&&(i={...r},i[EO]=r,i.details=r.messages)),!i&&!t.ok)throw i=new Error(`Unable to load ${t.url} status: ${t.status}`),i[EO]=r,i;let a,l=null;i&&(o=Number(i.code),l=i.hasOwnProperty("subcode")?Number(i.subcode):null,a=i.messageCode,a=null==a?void 0:a.toUpperCase());const c=s.authMode;if(403===o&&(4===l||(null==(n=i.message)?void 0:n.toLowerCase().includes("ssl"))&&!i.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&("no-prompt"!==c||498===o)&&void 0!==o&&wO.has(o)&&!TO(e.params.url)&&(403!==o||(!a||!bO.has(a))&&(null==l||2===l&&e.credentialToken))){await OO();try{const t=await Qk.getCredential(e.params.url,{error:kO("request:server",i,e.params),prompt:"no-prompt"!==c,signal:e.controller.signal,token:e.credentialToken});return e.credential=t,e.credentialToken=t.token,e.useSSL=e.useSSL||t.ssl,!1}catch(t){if("no-prompt"===c)return e.credential=void 0,e.credentialToken=void 0,!1;i=t}}if(i)throw i;return!0}function UO(e,t,r=!1){const n=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=yO.priority,s.src=e,function(e,t,r=!1,n){return new Promise(((s,i)=>{if(IS(n))return void i(fO());let o=()=>{c(),i(new Error(`Unable to load ${t}`))},a=()=>{const t=e;c(),s(t)},l=()=>{if(!e)return;const t=e;c(),t.src="",i(fO())};const c=()=>{vb("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,null!=n&&n.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};null!=n&&n.addEventListener("abort",l),vb("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))}))}(s,e,r,n)}async function LO(e,t,r,n){const s=t.exec(r);if(!s)throw new fS("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const i=s[1]?`${s[1]}/`:"",o=s[2],a=function(e){if(!DS.test(e))return null;const t=DS.exec(e);if(null===t)return null;const[,r,n]=t;return LS(r+(n?"-"+n.toUpperCase():""))??LS(r)}(n),l=`${i}${o}.json`,c=a?`${i}${o}_${a}.json`:l;let u;try{u=await NO(e(c))}catch(t){if(c===l)throw new fS("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:t});try{u=await NO(e(l))}catch(e){throw new fS("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:e})}}return u}async function NO(e){if(null!=FO.fetchBundleAsset)return FO.fetchBundleAsset(e);const t=await mO(e,{responseType:"text"});return JSON.parse(t.data)}class $O{constructor({base:e="",pattern:t,location:r=new URL(window.location.href)}){let n;n="string"==typeof r?e=>new URL(e,new URL(r,window.location.href)).href:r instanceof URL?e=>new URL(e,r).href:r,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=n,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,t){return LO(this.getAssetUrl,this.matcher,e,t)}}function MO(e){return new $O(e)}const FO={};function BO(e){if(!oS.assetsPath)throw dS.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new fS("assets:path-not-set","config.assetsPath is not set");return Nk(oS.assetsPath,e)}FS(MO({pattern:"esri/",location:BO}));Re({label:"linkExplorerContent",width:"calc(100%-1px)"}),Re({label:"documentListItem","&:hover, &:active":{textDecoration:"underline"}}),Re({label:"documentTitle",fontWeight:"var(--calcite-font-weight-medium)"}),Re({label:"documentDescription",color:"var(--calcite-ui-text-3)",fontSize:"var(--calcite-font-size--2\t)"})},22799:(e,t)=>{"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,s=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case u:case d:case i:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case g:case l:return e;default:return t}}case s:return t}}}function S(e){return b(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=n,t.ForwardRef=h,t.Fragment=i,t.Lazy=m,t.Memo=g,t.Portal=s,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return S(e)||b(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===i},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===g},t.isPortal=function(e){return b(e)===s},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===a||e===o||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===_||e.$$typeof===w||e.$$typeof===v)},t.typeOf=b},38512:e=>{"use strict";e.exports=n},44363:(e,t,r)=>{"use strict";e.exports=r(22799)},62686:e=>{"use strict";e.exports=s},68972:e=>{"use strict";e.exports=o},79244:e=>{"use strict";e.exports=r}},l={};function c(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={exports:{}};return a[e](r,r.exports,c),r.exports}c.m=a,c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.f={},c.e=e=>Promise.all(Object.keys(c.f).reduce(((t,r)=>(c.f[r](e,t),t)),[])),c.u=e=>"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_GeoBimIssuesExtension-C-07c35f"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_GeoBimIssuesExtension-C-07c35f.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_request-DjMIBMX7-BWgirqq__js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_request-DjMIBMX7-BWgirqq__js.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_QueueProcessor-B9xkVLf8-66eabb"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_QueueProcessor-B9xkVLf8-66eabb.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_component-BvRje-187d02"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_component-BvRje-187d02.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-C51c3Lvs--95d0c5"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-C51c3Lvs--95d0c5.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-B3QBcl-_--ae6afc"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-B3QBcl-_--ae6afc.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-DOdgU1bk--f35545"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-DOdgU1bk--f35545.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-CzAZhvoY-D9QQeYC__js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-CzAZhvoY-D9QQeYC__js.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-BJk3KwjJ-w4GqNxg-_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-BJk3KwjJ-w4GqNxg-_js.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_request-DKab8zXV_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_request-DKab8zXV_js.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_IdentityManager-5ef2bb"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_IdentityManager-5ef2bb.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_QueueProcessor-F1nkeFoA_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_QueueProcessor-F1nkeFoA_js.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_component-B3w5U_Cs_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_component-B3w5U_Cs_js.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index--RWWyNAN_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index--RWWyNAN_js.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-Bxr3QHHG_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-Bxr3QHHG_js.js":"vendors-extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-DjFzNNz4_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-DjFzNNz4_js.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-CKsLZHvw_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-CKsLZHvw_js.js":"extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_index-B2Fm_-u5_js"===e?"widgets/shared-code/chunks/lib_geobim_node_modules_geobim_ui_dist_index-B2Fm_-u5_js.js":void 0,c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="exb-client:",c.l=(r,n,s,i)=>{if(e[r])e[r].push(n);else{var o,a;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){o=d;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,c.nc&&o.setAttribute("nonce",c.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[n];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),a&&document.head.appendChild(o)}},c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="",(()=>{var e={"widgets/shared-code/geobim":0};c.f.j=(t,r)=>{var n=c.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise(((r,s)=>n=e[t]=[r,s]));r.push(n[2]=s);var i=c.p+c.u(t),o=new Error;c.l(i,(r=>{if(c.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[i,o,a]=r,l=0;if(i.some((t=>0!==e[t]))){for(n in o)c.o(o,n)&&(c.m[n]=o[n]);if(a)a(c)}for(t&&t(r);l<i.length;l++)s=i[l],c.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkexb_client=self.webpackChunkexb_client||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var u={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(u),c.d(u,{APSDefaultModelViewerVersion:()=>uo.b3,ApsLogIn:()=>te,FeatureServiceErrors:()=>ae,GeoBIMContext:()=>g,GeoBIMProvider:()=>v,GeoBIMStoreExtension:()=>Oi,GeoBIMWidgetNames:()=>t,GeoBimFeatureServiceError:()=>r,HEADER_LINE_HEIGHT:()=>ro,MapSelection:()=>ee,ModelViewer:()=>uo.b0,ModelViewerProvider:()=>uo.a$,ReactModelViewer:()=>uo.b2,UserTypeNotPermissible:()=>le,apsAuthenticatedSelector:()=>Ti,apsErrorSelector:()=>Ci,areFeatureDocumentLinksEqual:()=>J,areIDocumentsEqual:()=>H,areModelViewerLinkedDocumentsEqual:()=>G,areRecordArraysEqual:()=>P,defaultSharedMessages:()=>e,geoBIMWidgetContainerStyle:()=>so,getAllFeatureServiceIds:()=>N,getFeatureAttribute:()=>k,getFeatureTitle:()=>I,getGeoBIMFeatureServiceError:()=>M,getMapViewName:()=>$,hidableContainerStyle:()=>lo,inWidgetMessageContainerStyle:()=>io,inWidgetMessageLinkStyle:()=>oo,isBuildingSceneLayer:()=>S,isDocumentRepositoryItem:()=>V,isNodeRepositoryItem:()=>z,loadingContainerStyle:()=>ao,modelViewerDisabledSelector:()=>Ri,modelViewerLinkedDocumentSelector:()=>xi,repositoryItemHasChildren:()=>W,selectionWarningStyle:()=>no,setModelViewerDisabled:()=>ge,setModelViewerLinkedDocument:()=>fe,useApsAuth:()=>Ve,useDocuments:()=>Ki,useGeoBIM:()=>Fi,useLinks:()=>Wi,useModelViewer:()=>uo.b1,useSessionManager:()=>$i,useSharedMessages:()=>to});var e={};c.r(e),c.d(e,{default:()=>co});var t,r,n,s=c(79244),i=c(38512);!function(e){e.DOCUMENT_EXPLORER="document-explorer",e.DOCUMENT_VIEWER="document-viewer",e.LINK_EXPLORER="link-explorer"}(t||(t={})),function(e){e.NONE="NONE",e.NO_FEATURE_SERVICE="NO_FEATURE_SERVICE",e.MULTIPLE_FEATURE_SERVICES="MULTIPLE_FEATURE_SERVICES"}(r||(r={})),function(e){e.NO_FEATURE_SERVICE="NO_FEATURE_SERVICE",e.SINGLE_FEATURE_SERVICE="SINGLE_FEATURE_SERVICE",e.MULTIPLE_FEATURE_SERVICES="MULTIPLE_FEATURE_SERVICES"}(n||(n={}));var o=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useCallback:a,useState:l,createContext:d,useMemo:h,useEffect:p}=s.React,{useSelector:f}=s.ReactRedux,g=d(void 0),m=e=>{switch(null==e?void 0:e.featureServiceStatus){case n.MULTIPLE_FEATURE_SERVICES:return i.GeoBimFeatureServiceError.MULTIPLE_FEATURE_SERVICES;case n.NO_FEATURE_SERVICE:return i.GeoBimFeatureServiceError.NO_FEATURE_SERVICE;default:return i.GeoBimFeatureServiceError.NONE}};function v(e){const{mapWidgetId:t,widgetId:r,children:c,widgetState:u}=e,d=f((e=>(0,i.apsAuthenticatedSelector)(e))),[v,y]=l(null),_=null==v?void 0:v.id,[w,b]=l(new Map),S=h((()=>w.get(_)),[_,w]),[A,E]=l(!0),[I,k]=l(!1),[O,T]=l(!1),[C,x]=l([]),{isGeoBIMProjectService:R,sessionManagerInitialized:j,LinksService:P,DocumentsService:D,projectServiceLoading:U,projectServiceInitialized:L,isUserAuthorized:N}=(0,i.useSessionManager)(S),{apsLogin:$}=(0,i.useApsAuth)(),M=null!=t&&""!==t;null==t&&null!=v&&y(null);const F=a((e=>o(this,void 0,void 0,(function*(){const t=yield(0,i.getAllFeatureServiceIds)(e),r=yield Promise.all(t.map((e=>o(this,void 0,void 0,(function*(){return yield R(e)})))));return t.filter(((e,t)=>r[t]))}))),[R]);p((function(){let e=!1;const t=(e,t)=>{const r=1===t.length?t[0]:null,s=(e=>{switch(e.length){case 0:return n.NO_FEATURE_SERVICE;case 1:return n.SINGLE_FEATURE_SERVICE;default:return n.MULTIPLE_FEATURE_SERVICES}})(t);b((t=>new Map(t.set(e,{sessionId:e,featureServiceId:r,featureServiceStatus:s}))))};return(()=>{o(this,void 0,void 0,(function*(){if(j){if(null!=_&&null==S){E(!0);const r=yield F(v);if(e)return;t(_,r)}E(!1),k(!0)}else E(!0)}))})(),()=>{e=!0}}),[S,v,_,F,j]);const B=a((e=>{T(e)}),[T]),q=a((e=>{(null==e?void 0:e.id)!==_&&(null!=_&&null==S&&E(!0),y(e))}),[_,S]),z=a((e=>{x(e)}),[x]),V=a((()=>{d||$()}),[d,$]),W=h((()=>m(S)),[S]),G=h((()=>U||A),[A,U]),H=h((()=>({selectionUpdating:O,geoBIMLoading:G,geoBIMInitialized:I,projectServiceInitialized:L,currentGeoBIMView:S,apsAuthenticated:d,geoBIMError:W,selectedFeatures:C,LinksService:P,DocumentsService:D,hasMapWidget:M,userHasPermission:N,onApsLogin:V,widgetState:u})),[O,G,I,L,S,d,W,C,P,D,M,N,V,u]);return(0,s.jsx)(g.Provider,{value:H},null!=t&&(0,s.jsx)(i.MapSelection,{mapWidgetId:t,widgetId:r,onSelectionUpdating:B,onActiveViewChange:q,onSelectionChange:z}),c)}var y=c(62686);const _=["DisplayName","Title","Name"],w=["Name","FamilyType","Family","DocName"],b="DocName";function S(e){return"building-scene"===e.type}function A(e){const t=O(e);return j(t,"objectIdField")?t.objectIdField:C(e.attributes,"objectId")}function E(e){const t=A(e);return t?e.attributes[t]:null}function I(e){if(null==e)return null;const t=function(e){const t=O(e);if(null==t)return null;if(S(e.layer)&&j(t,"displayField")&&t.displayField===b)return null;return j(t,"displayField")&&""!==t.displayField?e.attributes[t.displayField]:null}(e);if(null!==t)return t;const r=S(e.layer)?w:_;for(const t of r){const r=k(e,t);if(null!=r&&""!==r)return r}return null}function k(e,t){return x(e.attributes,t)}function O(e){return null!=e.layer&&S(e.layer)&&"sourceLayer"in e&&null!=e.sourceLayer?e.sourceLayer:null!=e.layer?e.layer:null}function T(e){const{layer:t}=e;if(null==t)return null;if(j(t,"portalItem")){return t.portalItem.id}if(j(t,"url")){return t.url}if(j(t,"parent")&&null!==x(t.parent,"portalItem")){return t.parent.portalItem.id}return null}function C(e,t){return Object.keys(e).find((e=>e.toLowerCase()===t.toLowerCase()))}function x(e,t){const r=C(e,t);return null===r?null:R(e,r)?e[r]:null}function R(e,t){return t in e}function j(e,t){return!!R(e,t)&&null!=e[t]}function P(e,t){var r,n,i,o,a;if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;for(let l=0;l<e.length;l++){const c=e[l],u=t[l];if((null===(r=c.dataSource)||void 0===r?void 0:r.id)!==(null===(n=u.dataSource)||void 0===n?void 0:n.id)||(i=c.feature,o=u.feature,a=!0,!(i&&o?E(i)===E(o)&&(!a||s.lodash.isDeepEqual(i.attributes,o.attributes)):i===o)))return!1}return!0}var D=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const U=["Documents","Issues","Schedules","BIMProjects","Location Notes","Line Notes","Area Notes"],L=["Accounts","Links","Jobs"];function N(e){return D(this,void 0,void 0,(function*(){if(null==e)return[];const t=new Set,r=e.jimuLayerViews,n=Object.values(r).filter((e=>q(e)));for(const e of n){const r=yield e.createLayerDataSource();if(!r)continue;yield r.ready();const n=r.getLayerDefinition().serviceItemId;t.add(n)}return Array.from(t)}))}function $(e){var t,r;return null!==(r=null===(t=e.getMapDataSource())||void 0===t?void 0:t.getLabel())&&void 0!==r?r:""}function M(e){return D(this,void 0,void 0,(function*(){const t=yield function(e){return D(this,void 0,void 0,(function*(){const t=s.ServiceManager.getInstance(),r=new Set,n=yield e.whenAllJimuLayerViewLoaded();for(const e in n){const s=n[e];if(!q(s))continue;const i=s.layer.url,o=yield t.fetchServiceInfo(i);if(F(o)){const e=o.definition;r.add(e.serviceItemId)}}return r.size}))}(e);switch(t){case 0:return r.NO_FEATURE_SERVICE;case 1:return r.NONE;default:return r.MULTIPLE_FEATURE_SERVICES}}))}function F(e){var t,r;const n=e.definition,s=null===(t=n.layers)||void 0===t?void 0:t.map((e=>e.name)),i=U.every((e=>{var t;return null!==(t=null==s?void 0:s.includes(e))&&void 0!==t&&t})),o=null===(r=n.tables)||void 0===r?void 0:r.map((e=>e.name)),a=L.every((e=>{var t;return null!==(t=null==o?void 0:o.includes(e))&&void 0!==t&&t}));return i&&a}function B(e){return q(e)}function q(e){return"feature"===e.type}function z(e){return null===e.document}function V(e){return null!==e.document}function W(e){return!V(e)&&(null===e.children||e.children.length>0)}function G(e,t){var r,n,s,i,o,a;return null==e||null==t?e===t:(null===(r=e.document)||void 0===r?void 0:r.displayName)===(null===(n=t.document)||void 0===n?void 0:n.displayName)&&(null===(s=e.document)||void 0===s?void 0:s.fileName)===(null===(i=t.document)||void 0===i?void 0:i.fileName)&&(null===(o=e.document)||void 0===o?void 0:o.url)===(null===(a=t.document)||void 0===a?void 0:a.url)&&e.selectedIds===t.selectedIds}function H(e,t){return e.displayName===t.displayName&&e.fileName===t.fileName&&e.url===t.url&&s.lodash.isDeepEqual(e.attributes,t.attributes)}function J(e,t){if(null==e||null==t)return e===t;if(r=e.feature,n=t.feature,!(null==r||null==n?r===n:r.objectId===n.objectId&&s.lodash.isDeepEqual(r.attributes,n.attributes)))return!1;var r,n;const i=e.documents,o=t.documents;if(i.length!==o.length)return!1;for(let e=0;e<i.length;e++){if(!H(i[e],o[e]))return!1}return!0}var K=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useRef:Y,useState:Z,useEffect:X,useCallback:Q}=s.React,ee=e=>{const{mapWidgetId:t,onSelectionUpdating:r,onSelectionChange:n,onActiveViewChange:i,widgetId:o}=e,[a,l]=Z(null),c=Y(null),[u,d]=Z(null),[h,p]=Z(null),[f,g]=Z(null),[m,v]=Z(!1),_=Y([]),w=Q((e=>{P(_.current,e)||(_.current=e,n&&n(e))}),[n]),b=Q((e=>{var t;if(!(null===(t=null==e?void 0:e.layer)||void 0===t?void 0:t.id))return!1;const r=e.layer.id;return!(null==u?void 0:u.find((e=>e.includes(r.toString()))))}),[u]);X((function(){let e=!1;return(()=>{K(this,void 0,void 0,(function*(){const[t]=yield(0,y.loadArcGISJSAPIModules)(["esri/core/reactiveUtils"]);e||g(t)}))})(),()=>{e=!0}}),[]),X((function(){let e=null,t=null,r=null;return(()=>{var s;if(!f||!(null===(s=null==a?void 0:a.view)||void 0===s?void 0:s.popup)||!n||null===u)return;const i=a.view;e=f.watch((()=>i.popup.selectedFeature),(e=>{(e=>{if(!b(e))return;w([{feature:e,dataSource:null}])})(e)})),t=f.when((()=>i.popup.visible),(()=>{null!=r&&(r.remove(),r=null),r=f.when((()=>!i.popup.visible),(()=>{w([])}),{once:!0})}))})(),()=>{null!=e&&(e.remove(),e=null),null!=t&&(t.remove(),t=null),null!=r&&(r.remove(),r=null)}}),[a,b,u,n,w,f]),X((function(){r&&r(m)}),[r,m]);const S=e=>K(void 0,void 0,void 0,(function*(){const t=e.view.popup.selectedFeature;if(t&&b(t)){return w([{feature:t,dataSource:null}]),void v(!1)}if(c.current=e.id,c.current!==e.id)return;const r=yield e.whenAllJimuLayerViewLoaded();if(c.current!==e.id)return;const n=Object.values(r).filter((e=>B(e))),s=[],i=e.getMapDataSource();if(!i)return w([]),void v(!1);yield i.ready(),i.areChildDataSourcesCreated()||(yield i.childDataSourcesReady());for(const t of n){yield t.ready();let r=t.getLayerDataSource();if(r||(r=yield t.createLayerDataSource()),!r)continue;if(yield r.ready(),c.current!==(null==e?void 0:e.id))return;const n=r.getSelectedRecordIds();for(const t of n){const n=yield r.queryById(t);if(c.current!==(null==e?void 0:e.id))return;if(n&&s.push(n),s.length>1)return w(s),void v(!1)}}w(s),v(!1)})),A=e=>K(void 0,void 0,void 0,(function*(){const t=yield e.whenAllJimuLayerViewLoaded(),r=Object.values(t).filter((e=>B(e))),n=Object.values(r).map((e=>e.layerDataSourceId));d(n),p(e.dataSourceId)}));return s.React.createElement(s.React.Fragment,null,t&&s.React.createElement(s.React.Fragment,null,s.React.createElement(y.JimuMapViewComponent,{useMapWidgetId:t,onActiveViewChange:e=>K(void 0,void 0,void 0,(function*(){if(!e)return l(null),d(null),void p(null);v(!0),w([]);const t=yield e.whenJimuMapViewLoaded();l(t),i&&i(t),n&&(yield S(t),yield A(t))}))}),(()=>{if(!h||0===u.length)return[];return u.map((e=>{const t=(0,s.Immutable)({dataSourceId:e,mainDataSourceId:e,rootDataSourceId:h});return s.React.createElement(s.DataSourceComponent,{key:e,widgetId:o,useDataSource:t,onSelectionChange:()=>{v(!0),S(a)}})}))})()))},te=e=>{const{theme:t,logInLinkText:r,loginMessageFirstLine:n,loginMessageSecondLine:o}=e,{onApsLogin:a}=(0,i.useGeoBIM)();return(0,s.jsx)("div",{css:(0,i.inWidgetMessageContainerStyle)(t)},(0,s.jsx)("p",null,(0,s.jsx)("a",{css:(0,i.inWidgetMessageLinkStyle)(t),href:"",target:"_blank",rel:"noopener noreferrer",onClick:e=>{e.preventDefault(),a()}},r),n,(0,s.jsx)("br",null),o))};var re=c(14321),ne=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useState:se,useCallback:ie}=s.React,oe=e=>(0,s.css)({label:"featureServiceErrorContainerStyle",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",gap:e.sys.spacing(2)}),ae=e=>{const{useMapWidgetIds:t,errorType:r,noFeatureServiceErrorText:n,multipleFeatureServicesErrorText:o,infoMessageText:a,theme:l}=e,[c,u]=se(new Map),d=ie((e=>ne(void 0,void 0,void 0,(function*(){const t=new Map;for(const r in e){const n=e[r],s=(0,i.getMapViewName)(n),o=yield(0,i.getGeoBIMFeatureServiceError)(n);t.set(s,o)}u(t)}))),[]);return(0,s.jsx)("div",{css:oe(l)},(0,s.jsx)(y.JimuMapViewComponent,{useMapWidgetId:t?t[0]:"",onViewsChange:d}),(()=>{const e=[...new Set(c.values())],t=[];return e.forEach((e=>{e===i.GeoBimFeatureServiceError.NO_FEATURE_SERVICE?t.push((0,s.jsx)(re.Alert,{key:e,fullWidth:!0,type:r,withIcon:!0,text:n})):e===i.GeoBimFeatureServiceError.MULTIPLE_FEATURE_SERVICES&&t.push((0,s.jsx)(re.Alert,{key:e,fullWidth:!0,type:r,withIcon:!0,text:o}))})),t.length>0&&""!==a&&t.push((0,s.jsx)(re.Alert,{key:"info",fullWidth:!0,type:"info",withIcon:!0,text:a})),t})())},le=e=>{const{theme:t,userTypeNotPermissibleLinkText:r,userTypeNotPermissibleText:n}=e;return(0,s.jsx)("div",{css:(0,i.inWidgetMessageContainerStyle)(t)},(0,s.jsx)("p",null,n,(0,s.jsx)("br",null),(0,s.jsx)("br",null),(0,s.jsx)("a",{css:(0,i.inWidgetMessageLinkStyle)(t),href:"https://www.esri.com/en-us/arcgis/products/user-types/overview",target:"_blank",rel:"noopener noreferrer"},r)))};var ce,ue=(e=>(e.CODE="code",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.STATE="state",e))(ue||{}),de=(e=>(e.APS_LOGIN_WINDOW_EVENT="geobim-aps-login-window-event",e.APS_LOGIN_CALLBACK_EVENT="geobim-aps-login-callback-event",e))(de||{});function he(e,t){t({type:ce.SetApsAuthenticated,payload:e})}function pe(e,t){t({type:ce.SetApsError,payload:e})}function fe(e,t,r,n){const s={modelViewerWidgetId:e,document:t,selectedIds:r};n({type:ce.SetModelViewerLinkedDocument,payload:s})}function ge(e,t,r){const n={modelViewerWidgetId:e,disabled:t};r({type:ce.SetModelViewerDisabled,payload:n})}!function(e){e.SetApsAuthenticated="SET_APS_AUTHENTICATED",e.SetApsError="SET_APS_ERROR",e.SetModelViewerLinkedDocument="SET_MODEL_VIEWER_LINKED_DOCUMENT",e.SetModelViewerDisabled="SET_MODEL_VIEWER_DISABLED"}(ce||(ce={}));var me=Object.defineProperty,ve=(e,t,r)=>((e,t,r)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);ve(class{constructor(){ve(this,"globalId"),ve(this,"objectId"),ve(this,"creationDate"),ve(this,"creator"),ve(this,"editDate"),ve(this,"editor")}},"fields",["globalId","objectId","creationDate","creator","editDate","editor"]);var ye=(e=>(e.INFO="info",e.WARNING="warning",e.DANGER="danger",e))(ye||{});class _e extends Error{constructor(e){super(e.message),ve(this,"_message"),ve(this,"_severity"),ve(this,"_intl"),ve(this,"errorType","GeoBIM_Error"),this._message=e.message,this._severity=e.severity??"info",this._intl=e.intl}get message(){return this._message}get severity(){return this._severity}get intl(){return this._intl}}var we=Object.defineProperty,be=(e,t,r)=>((e,t,r)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const Se={devext:{hosts:["devext.arcgis.com","localhost"],clientId:"Rbr9tlIpobcRuxEToJ9OVsuSSEtFSNaI"},qa:{hosts:["qaext.arcgis.com","mapsqa.arcgis.com"],clientId:"EMRsxdOAQA4Ha7XmM3Mbki7TufnCnGgC"},prod:{hosts:["arcgis.com"],clientId:"EpgT7BA0Ty2iOyOCy06RTRBlcESRA1c6"},portal:{hosts:["esri.com"],clientId:"fgl7ZH20xaY048WvBDGxXDfOId2FmlC4"}};var Ae=(e=>(e.APS_LOGIN_ABORTED="aps_login_aborted",e))(Ae||{});function Ee(e){return function(e){return null!=(null==e?void 0:e.accessToken)&&""!==(null==e?void 0:e.accessToken)&&null!=(null==e?void 0:e.refreshToken)&&""!==(null==e?void 0:e.refreshToken)&&null!=(null==e?void 0:e.accessTokenExpiry)&&""!==(null==e?void 0:e.accessTokenExpiry)}(e)||Ie(e)}function Ie(e){const t=null===(null==e?void 0:e.errorDescription)||"string"==typeof(null==e?void 0:e.errorDescription);return null!=(null==e?void 0:e.error)&&""!==(null==e?void 0:e.error)&&t}const ke="Authorize";function Oe(e){if(null==e)return{error:"GP Auth Service Error",errorDescription:"Auth Service did not respond"};const t=e.results.find((e=>"response"===e.paramName));if(void 0===t)return{error:"GP Auth Service Error",errorDescription:"APS Token Response not found"};const r=t.value;if(function(e){return null!=(null==e?void 0:e.exception)}(r))return{error:"GP Auth Service Exception",errorDescription:r.exception};const n=1e3*r.expires_in,s=Date.now()+n;return{accessToken:r.access_token,accessTokenExpiry:s.toString(),refreshToken:r.refresh_token}}class Te{constructor(e,t,r){be(this,"_portal"),be(this,"_getToken"),be(this,"_executeTask"),be(this,"executeAuthTask",(async(e,t,r)=>{await this._portal.load();const n=function(e){var t,r;const n=null==(r=null==(t=e.helperServices)?void 0:t.geoBIM)?void 0:r.authUrl;return null!=n?`${n}/${ke}`:`${function(e){switch(!0){case e.endsWith("devext.arcgis.com"):case e.endsWith("devext.arcgis.com/"):return"https://geobimservicesdev.arcgis.com/arcgis/rest/services/";case e.endsWith("mapsqa.arcgis.com"):case e.endsWith("mapsqa.arcgis.com/"):case e.endsWith("qaext.arcgis.com"):case e.endsWith("qaext.arcgis.com/"):return"https://geobimservicesqa.arcgis.com/arcgis/rest/services/";default:return"https://geobimservices.arcgis.com/arcgis/rest/services/"}}(e.url)}GeoBIMAuth/GPServer/${ke}`}(this._portal);if(null===n)return null;const s=await this._getToken();return null===s?null:await this._executeTask(n,s,e,t,r)})),this._portal=e,this._getToken=t,this._executeTask=r}}const Ce="geoBimApsLoginWindowActive",xe="true",Re="geoBimApsToken";class je{constructor(e,t,r){be(this,"_gpAuthService"),be(this,"_loginWindow",null),be(this,"_loginWindowPolling",null),be(this,"_refreshTokenTask",null),be(this,"_portalUrl",""),be(this,"getToken",(async()=>{const e=this.getTokenFromStorage();if(null===e||Ie(e))return null;if(function(e){if(null==(null==e?void 0:e.accessTokenExpiry)||isNaN(parseInt(e.accessTokenExpiry)))return!1;const t=parseInt(e.accessTokenExpiry)-6e4,r=new Date;return new Date(t)>r}(e))return e.accessToken;const t=await this.refreshTokenRequest(e.refreshToken);return null===t?(this.setAPSAuthError("Refresh Token Request Failed","User must be logged in to ArcGIS before logging in to Autodesk."),null):(this.saveTokenToStorage(t),Ie(t)?null:t.accessToken)})),be(this,"onLoginWindowMessage",(e=>{const t=new URL(this.getAPSRedirectUri());e.origin===t.origin&&(e=>{const t=Object.values(de);return null!=e&&"object"==typeof e&&t.includes(e.source)&&"string"==typeof e.message})(e.data)&&e.data.source===de.APS_LOGIN_CALLBACK_EVENT&&(window.removeEventListener("message",this.onLoginWindowMessage),this.parseLoginWindowMessage(e))})),this._portalUrl=e.url,this._gpAuthService=new Te(e,t,r),this.closeAPSLoginWindow(),window.onbeforeunload=()=>{this.closeAPSLoginWindow()}}getAPSAuthError(){const e=this.getTokenFromStorage();return Ie(e)?e.error===Ae.APS_LOGIN_ABORTED?new _e({message:e.errorDescription??"",severity:ye.WARNING}):new _e({message:e.errorDescription??"",severity:ye.DANGER}):null}clearAPSAuthError(){Ie(this.getTokenFromStorage())&&this.removeTokenFromStorage()}async openAPSLoginWindow(){if(this.isLoginWindowActive())return void(null!==this._loginWindow&&!this._loginWindow.closed&&this._loginWindow.focus());this.setLoginWindowActive(!0),this.removeTokenFromStorage();const e=new URL("https://developer.api.autodesk.com/authentication/v2/authorize"),t=await this.getAPSClientId();null!==t?(e.searchParams.append("client_id",t),e.searchParams.append("response_type","code"),e.searchParams.append("redirect_uri",this.getAPSRedirectUri()),e.searchParams.append("state",window.location.origin),e.searchParams.append("scope","data:read data:write bucket:read account:read"),this._loginWindow=window.open(e,"_blank"),null!==this._loginWindow?(window.addEventListener("message",this.onLoginWindowMessage),this._loginWindowPolling=setInterval((()=>{(null===this._loginWindow||this._loginWindow.closed)&&this.onLoginWindowCloseEarly()}),1e3)):(this.setAPSAuthError("Popup Blocker Active","Login window blocked by a popup blocker. Please allow popups on this site and try again."),this.setLoginWindowActive(!1))):this.setAPSAuthError("APS Client ID Error","Unable to resolve APS Client ID for your domain.")}async apsLogout(){this.closeAPSLoginWindow(),this.removeTokenFromStorage()}isLoginWindowActive(){return localStorage.getItem(Ce)===xe}getAPSRegionsInfoUrl(){return`${this._portalUrl}/apps/geobim/autodeskRegionsConfig.json`}async refreshTokenRequest(e){if(null!=this._refreshTokenTask)return await this._refreshTokenTask;this._refreshTokenTask=this.refreshToken(e);const t=await this._refreshTokenTask;return this._refreshTokenTask=null,t}async refreshToken(e){const t={params:{refresh_token:e}};return Oe(await this._gpAuthService.executeAuthTask(t))}async parseLoginWindowMessage(e){const t=JSON.parse(e.data.message);if(void 0!==t[ue.CODE]){const e=t[ue.CODE];await this.getTokenFromCode(e)}else if(void 0!==t[ue.ERROR]){const e=t[ue.ERROR],r=void 0!==t[ue.ERROR_DESCRIPTION]&&""!==t[ue.ERROR_DESCRIPTION]?t[ue.ERROR_DESCRIPTION]:null;this.setAPSAuthError(e,r)}this.closeAPSLoginWindow()}async getTokenFromCode(e){const t={params:{auth_code:e,redirect_uri:this.getAPSRedirectUri()}},r=Oe(await this._gpAuthService.executeAuthTask(t));this.saveTokenToStorage(r)}clearLoginWindowPolling(){null!==this._loginWindowPolling&&(clearInterval(this._loginWindowPolling),this._loginWindowPolling=null)}closeAPSLoginWindow(){window.removeEventListener("message",this.onLoginWindowMessage),this.clearLoginWindowPolling(),null!==this._loginWindow&&(this._loginWindow.close(),this._loginWindow=null),this.setLoginWindowActive(!1)}async onLoginWindowCloseEarly(){window.removeEventListener("message",this.onLoginWindowMessage),this.clearLoginWindowPolling(),this.setLoginWindowActive(!1),this.setAPSAuthError(Ae.APS_LOGIN_ABORTED,"Window closed before login was completed.")}setLoginWindowActive(e){if(e===this.isLoginWindowActive())return;e?localStorage.setItem(Ce,xe):localStorage.setItem(Ce,"");const t=new BroadcastChannel(de.APS_LOGIN_WINDOW_EVENT),r={source:de.APS_LOGIN_WINDOW_EVENT,message:e.toString()};t.postMessage(r),t.close()}setAPSAuthError(e,t){const r={error:e,errorDescription:t};this.saveTokenToStorage(r)}getTokenFromStorage(){const e=localStorage.getItem(Re);if(null===e)return null;let t;try{t=JSON.parse(e)}catch{return null}return Ee(t)?t:null}saveTokenToStorage(e){Ee(e)&&(localStorage.setItem(Re,JSON.stringify(e)),window.dispatchEvent(new Event("storage")))}removeTokenFromStorage(){null!==localStorage.getItem(Re)&&(localStorage.removeItem(Re),window.dispatchEvent(new Event("storage")))}async getAPSClientId(){const e=new URLSearchParams(window.location.search).get("aps_client_id");if(null!=e&&""!==e)return e;try{const e=`${this._portalUrl}/apps/geobim/autodesk.json`,t=await fetch(e);if(null!=t&&t.ok){const e=await t.json();if(null!=(null==e?void 0:e.clientId))return e.clientId}}catch{}for(const e in Se){const t=Se[e].hosts,r=Se[e].clientId;for(const e of t)if(this._portalUrl.includes(e))return r}return null}getAPSRedirectUri(){return`${this._portalUrl}/apps/geobim/aps-auth/`}}var Pe=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const De=(e,t,...r)=>Pe(void 0,[e,t,...r],void 0,(function*(e,t,r={},n,s){const i=Object.assign(Object.assign({},r),{token:t}),[o]=yield(0,y.loadArcGISJSAPIModules)(["esri/rest/geoprocessor"]),a=o;return yield a.execute(e,i,n,s)}));var Ue=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Le{static getInstance(){return null===Le._instance&&(Le._instance=new Le),Le._instance}constructor(){this.getToken=()=>Promise.resolve(s.SessionManager.getInstance().getMainSession().token),null===Le._initialized&&(Le._initialized=new Promise((e=>{Le._resolveInitialized=e})))}initialize(){return Ue(this,void 0,void 0,(function*(){if(!Le._isInitialized&&!Le._isInitializing){Le._isInitializing=!0;const[e]=yield(0,s.loadArcGISJSAPIModules)(["esri/portal/Portal"]),t=new e({url:(0,s.getAppStore)().getState().portalUrl});Le._ApsAuthService=new je(t,this.getToken,De),Le._isInitializing=!1,this.setInitialized()}return Le._initialized}))}getApsAuthService(){return Le._ApsAuthService}setInitialized(){Le._isInitialized||(Le._isInitialized=!0,Le._resolveInitialized())}}Le._instance=null,Le._isInitialized=!1,Le._isInitializing=!1,Le._initialized=null,Le._ApsAuthService=null;var Ne=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useCallback:$e,useEffect:Me,useMemo:Fe,useState:Be}=s.React,{useDispatch:qe}=s.ReactRedux,ze="arcgis.com",Ve=()=>{const e=Fe((()=>Le.getInstance()),[]),[t,r]=Be(null),n=null!==t,s=qe();Me((function(){let t=!1;return(()=>{Ne(this,void 0,void 0,(function*(){if(n)return;yield e.initialize();const s=e.getApsAuthService();t||null===s||r(s)}))})(),()=>{t=!0}}),[e,n,t]),Me((function(){let e=!1;const r=()=>{const e=t.getAPSAuthError();null!==e&&console.warn("APS Error:",e),pe(e,s)};return(()=>{Ne(this,void 0,void 0,(function*(){if(!n)return;const i=yield t.getToken();if(!e){he(null!==i,s);pe(t.getAPSAuthError(),s),window.addEventListener("storage",r)}}))})(),()=>{e=!0,window.removeEventListener("storage",r)}}),[n,t,s]);const i=$e((()=>Ne(void 0,void 0,void 0,(function*(){if(!n)return null;he(!1,s),yield t.openAPSLoginWindow(),yield new Promise((e=>{const t=new BroadcastChannel(de.APS_LOGIN_WINDOW_EVENT);t.onmessage=r=>{"false"===r.data.message&&(t.close(),e(!0))}}));const e=yield t.getToken();return he(null!==e,s),e}))),[n,t,s]),o=$e((()=>Ne(void 0,void 0,void 0,(function*(){n&&(yield t.apsLogout(),he(!1,s))}))),[n,t,s]),a=$e((()=>Ne(void 0,void 0,void 0,(function*(){if(!n)return null;const e=yield t.getToken();return null!==e?(he(!0,s),e):(he(!1,s),yield i())}))),[n,t,i,s]),l=$e((()=>{if(n){const e=window.location.hostname;return e===ze||(null==e?void 0:e.endsWith(`.${ze}`))||"localhost"===e?null:t.getAPSRegionsInfoUrl()}return null}),[n,t]),c=$e((()=>{n&&t.clearAPSAuthError()}),[n,t]);return Fe((()=>({apsLogin:i,apsLogout:o,getApsAuthToken:a,getApsRegionsInfoUrl:l,userClearApsError:c,apsAuthLoaded:n})),[n,i,o,a,l,c])};var We=Object.defineProperty,Ge=(e,t,r)=>((e,t,r)=>t in e?We(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const He=["Documents","Issues","Schedules","BIMProjects","Location Notes","Line Notes","Area Notes"],Je=["Accounts","Links","Jobs"],Ke=["Location Notes","Line Notes","Area Notes"],Ye=async(e,t)=>{let r=[];for(let n=0;n<t.length;n++){const s=t[n];if("BIM360"===s.linkType){const t=await Ze(e,s.linkDefinition);r=r.concat(t)}}return r},Ze=async(e,t)=>{const r=[],n=JSON.parse(t);for(let t=0;t<n.documentIds.length;t++){const s={projectId:n.projectId,itemId:n.documentIds[t].urn},i=await e.getDocument(s);null!=i&&r.push(i)}return r};function Xe(e,t){if((null==e?void 0:e.length)>0&&null!=t)return e.find((e=>e.toLowerCase()===t.toLowerCase()))}class Qe{constructor(){Ge(this,"globalId"),Ge(this,"objectId"),Ge(this,"creationDate"),Ge(this,"creator"),Ge(this,"editDate"),Ge(this,"editor")}}Ge(Qe,"fields",["globalId","objectId","creationDate","creator","editDate","editor"]);var et=(e=>(e.BIM360="BIM360",e.URL="URL",e.LINKRULE="LINKRULE",e.LINKACCOUNT="LINKACCOUNT",e))(et||{});var tt=(e=>(e.ViewerUrl="ViewerUrl",e.BIMDocument="BIMDocument",e.DocumentName="DocumentName",e.ScheduleFeature="ScheduleFeature",e.Custom="Custom",e))(tt||{});const rt=async(e,t,r)=>{let n=[];nt(r,t);for(let s=0;s<r.length;s++){const i=r[s];if(i.linkType===et.LINKRULE){const r=await ot(e,t,i.linkDefinition);n=n.concat(r)}}return n},nt=(e,t)=>{const r=st(t);if(null===r||it(e,r))return;const n=JSON.stringify({rule:`${tt.ViewerUrl}({"viewerUrl":"$${r}"})`}),s={linkType:et.LINKRULE,linkDefinition:n,itemId:t.layer.portalItemId,layerId:t.layer.layerId};e.push(s)},st=e=>null==(null==e?void 0:e.attributes)?null:Object.keys(e.attributes).find((e=>e.toLowerCase()==="SharedView".toLowerCase()))??null,it=(e,t)=>{for(let r=0;r<e.length;r++){const n=e[r];if(n.linkType===et.LINKRULE){const e=JSON.parse(n.linkDefinition);if(ct(e.rule)===tt.ViewerUrl&&e.rule.includes(t))return!0}}return!1},ot=async(e,t,r)=>{const n=JSON.parse(r),s=ct(n.rule),i=ut(n.rule);return s===tt.ScheduleFeature?(console.warn("LinkRuleName.ScheduleFeature is not currently supported in this release."),[]):await at(e,i,t,s)},at=async(e,t,r,n)=>{const s=JSON.parse(t);if(n===tt.ViewerUrl&&"string"==typeof s)return await lt(e,r,s);const i={};return Object.keys(s).forEach((e=>{const t=dt(r,s[e]);null!==t&&(i[e]=t)})),Object.keys(i).length===Object.keys(s).length?await e.getDocumentByRule(n,i):[]},lt=async(e,t,r)=>{const n={},s=dt(t,r);return n.viewerUrl=s,await e.getDocumentByRule(tt.ViewerUrl,n)},ct=e=>e.split(/[()]/)[0],ut=e=>{const t=e.split(/[()]/);return t.length>1?t[1]:""},dt=(e,t)=>{if("string"!=typeof t||(e=>"$"!==(null==e?void 0:e.substring(0,1)))(t))return t;const r=(e=>"$"===(null==e?void 0:e.substring(0,1))?null==e?void 0:e.substring(1):"")(t);return 0===r.length?null:((e,t)=>Object.prototype.hasOwnProperty.call(e.attributes,t))(e,r)?e.attributes[r]:null},ht=async(e,t,r)=>{if(!pt(r)||null==r.geometry)return[];const n=await t.getDocumentsByIntersection(r);return await ft(e,n)},pt=e=>void 0!==e.layer&&void 0!==Ke.find((t=>{var r;return null==(r=e.layer.title)?void 0:r.startsWith(t)})),ft=async(e,t)=>{const r=[];for(let n=0;n<t.length;n++){const s=t[n];if(void 0===s.projectId||void 0===s.itemId)continue;const i={projectId:s.projectId,itemId:s.itemId},o=await e.getDocument(i);null!=o&&r.push(o)}return r};class gt extends Qe{constructor(e){super(),Ge(this,"issueGUID"),Ge(this,"projectId"),Ge(this,"project"),Ge(this,"itemId"),Ge(this,"id"),Ge(this,"identifier"),Ge(this,"status"),Ge(this,"type"),Ge(this,"subType"),Ge(this,"createdAt"),Ge(this,"syncedAt"),Ge(this,"updatedAt"),Ge(this,"title"),Ge(this,"location"),Ge(this,"assignedTo"),Ge(this,"company"),Ge(this,"dueDate"),Ge(this,"linkedDocument"),Ge(this,"rootCause"),Ge(this,"owner"),Ge(this,"description"),Ge(this,"locationDescription"),Ge(this,"documentId"),Ge(this,"fields",Qe.fields.concat(["issueGUID","projectId","project","itemId","id","identifier","status","type","subType","createdAt","syncedAt","updatedAt","title","location","assignedTo","company","dueDate","linkedDocument","rootCause","description","locationDescription","owner","documentId","AutodeskType"]));const t=Object.keys(e.attributes);for(const r in this){const n=Xe(t,r);void 0!==n&&(this[r]=e.attributes[n])}}}class mt{constructor(e,t){Ge(this,"documentRepositoryService"),Ge(this,"projectDataService"),Ge(this,"getLinks",(async e=>null!=this.projectDataService?await this.getLinksFromProject(e):await this.getLinksWithNoProject(e))),Ge(this,"getLinksWithNoProject",(async e=>({feature:e,documents:await rt(this.documentRepositoryService,e,[])}))),Ge(this,"getLinksFromProject",(async e=>{if(null==this.projectDataService)throw new Error("GeoBIM Project feature services not available");const t=await(await this.projectDataService.linkDataService()).getLinkRecords(e.layer.portalItemId,e.layer.layerId,e.objectId),r=await this.projectDataService.documentDataService(),n=[...await Ye(this.documentRepositoryService,t),...await rt(this.documentRepositoryService,e,t),...await ht(this.documentRepositoryService,r,e)].filter(((e,t,r)=>!this.isDuplicateLink(e,t,r)));return{feature:e,documents:await this.addRelatedBIMIssuesToDocument(e,n)}})),Ge(this,"addRelatedBIMIssuesToDocument",(async(e,t)=>{var r;if(!await(null==(r=this.projectDataService)?void 0:r.isIssueFeature(e.layer)))return t;const n=new gt(e),{id:s,itemId:i,projectId:o}=n;if(null==s||null==i||null==o)return t;const a=[];for(const e of t)a.push({...e,issue:await this.getLinkedBimIssue(e,n)});return a})),Ge(this,"getLinkedBimIssue",(async(e,t)=>{const{id:r,itemId:n,projectId:s}=t;if(void 0!==r&&void 0!==n&&void 0!==s&&this.documentRepositoryService.isDocumentIssue(n,e))return await this.documentRepositoryService.getIssue(s,r)??void 0})),Ge(this,"isDuplicateLink",((e,t,r)=>t!==r.findIndex((t=>t.url===e.url)))),Ge(this,"addLinks",(async e=>{if(null==this.projectDataService)throw new Error("Cannot add link: GeoBIM Project feature service not available");const t=e.feature;if(!(t.objectId>0&&t.layer.portalItemId.length>0&&t.layer.layerId>=0&&e.documents.length>0))throw new Error("Invalid parameters");await(await this.projectDataService.linkDataService()).addLinks(e)})),this.documentRepositoryService=e,this.projectDataService=t}}class vt{constructor(e){Ge(this,"projectDataService"),Ge(this,"getAccounts",(async(e,t)=>await(await this.projectDataService.accountDataService()).getAccountRecords(e,t))),Ge(this,"getAccountFilter",(async(e,t)=>{var r;const n=await this.getAccounts(e,t);return null==n||0===n.length?null:(null==(r=n[0])?void 0:r.connectionInfo)??null})),this.projectDataService=e}}class yt{constructor(e,t,r){Ge(this,"documentsService"),Ge(this,"projectDataService"),Ge(this,"_accountCoreService"),Ge(this,"_linkCoreService"),Ge(this,"_projectServiceId"),Ge(this,"getLayerById",(async e=>null==this.projectDataService?null:await this.projectDataService.getLayer(e))),Ge(this,"setAccountFilterOnDataService",(async()=>{if(null==this.documentsService)return;if(null==this.accountCoreService)return void this.documentsService.setAccountFilter(null);const e=await this.accountCoreService.getAccountFilter(this.documentsService.getProviderName());this.documentsService.setAccountFilter(e)})),this.projectDataService=e,this.documentsService=t,this._projectServiceId=r}get projectServiceId(){return this._projectServiceId}get accountCoreService(){return null==this.projectDataService?null:(null==this._accountCoreService&&(this._accountCoreService=new vt(this.projectDataService)),this._accountCoreService)}get linkCoreService(){return null==this._linkCoreService&&(this._linkCoreService=new mt(this.documentsService,this.projectDataService)),this._linkCoreService}}class _t{constructor(e){Ge(this,"_documentsService"),Ge(this,"getDocument",(async e=>await this._documentsService.getDocument(e))),Ge(this,"checkPermissions",(async e=>await this._documentsService.checkPermissions(e))),Ge(this,"getRepositoryItems",(async e=>await this._documentsService.getRepositoryItems(e))),Ge(this,"searchRepository",(async(e,t)=>await this._documentsService.searchRepository(e,t))),this._documentsService=e}}class wt{constructor(e){Ge(this,"documentDataRepository"),Ge(this,"arcGISDataService"),Ge(this,"_projectCoreServices",{}),Ge(this,"_documentDataCoreService"),Ge(this,"getProjectCoreService",(async e=>{const t=e??"noGeoBIMProjectServiceId";if(void 0===this._projectCoreServices[t]){const r=await this.createProjectCoreService(e,this.arcGISDataService,this.documentDataRepository);this._projectCoreServices[t]=r}const r=this._projectCoreServices[t];return await r.setAccountFilterOnDataService(),r})),Ge(this,"createProjectCoreService",(async(e,t,r)=>{await t.load();const n=null!=e?t.projectDataService(e):null;return new yt(n,r,e)})),Ge(this,"initializeDataServices",(e=>new _t(e))),Ge(this,"selectFeature",(async e=>{const t=e.layerId??0,r=void 0===this._projectCoreServices[e.serviceId]?await this.arcGISDataService.getLayer(e.serviceId,t):await this._projectCoreServices[e.serviceId].getLayerById(t);return null==r?null:await this.arcGISDataService.getFeature(r,e.objectId)})),Ge(this,"getFeatureService",(async e=>await this.arcGISDataService.getFeatureService(e))),Ge(this,"isProjectService",(e=>{const t=e.layers.map((e=>e.title)),r=He.every((e=>t.includes(e))),n=e.tables.map((e=>e.title)),s=Je.every((e=>n.includes(e)));return r&&s})),this.documentDataRepository=e.documentDataService,this.arcGISDataService=e.arcGISDataService,this._documentDataCoreService=this.initializeDataServices(this.documentDataRepository)}get projectServiceIds(){return Object.keys(this._projectCoreServices)}get documentDataCoreService(){return this._documentDataCoreService}}const bt="GeoBIM_Error";var St=(e=>(e.INFO="info",e.WARNING="warning",e.DANGER="danger",e))(St||{});class At extends Error{constructor(e){super(e.message),Ge(this,"_message"),Ge(this,"_severity"),Ge(this,"_intl"),Ge(this,"errorType",bt),this._message=e.message,this._severity=e.severity??"info",this._intl=e.intl}get message(){return this._message}get severity(){return this._severity}get intl(){return this._intl}}function Et(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;function It(e){return Object.keys(e).some((t=>{let r=e[t];if(!r)return!1;r&&r.toParam&&(r=r.toParam());switch(r.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function kt(e){const t={};return Object.keys(e).forEach((r=>{var n,s;let i=e[r];if(i&&i.toParam&&(i=i.toParam()),!i&&0!==i&&"boolean"!=typeof i&&"string"!=typeof i)return;let o;switch(i.constructor.name){case"Array":const e=null===(s=null===(n=i[0])||void 0===n?void 0:n.constructor)||void 0===s?void 0:s.name;o="Array"===e?i:"Object"===e?JSON.stringify(i):i.join(",");break;case"Object":o=JSON.stringify(i);break;case"Date":o=i.valueOf();break;case"Function":o=null;break;case"Boolean":o=i+"";break;default:o=i}(o||0===o||"string"==typeof o||Array.isArray(o))&&(t[r]=o)})),t}function Ot(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((t=>Ot(e,t))).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function Tt(e){const t=kt(e);return Object.keys(t).map((e=>Ot(e,t[e]))).join("&")}const Ct=globalThis.FormData;globalThis.File,globalThis.Blob;class xt extends Error{constructor(e,t,r,n,s){super(e);const i=new.target.prototype;Object.setPrototypeOf(this,i),e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:`${t}: ${e}`,this.originalMessage=e,this.code=t,this.response=r,this.url=n,this.options=s}}const Rt="@esri/arcgis-rest-js";class jt extends xt{constructor(e="AUTHENTICATION_ERROR",t="AUTHENTICATION_ERROR_CODE",r,n,s){super(e,t,r,n,s),this.name="ArcGISAuthError",this.message="AUTHENTICATION_ERROR_CODE"===t?e:`${t}: ${e}`;const i=new.target.prototype;Object.setPrototypeOf(this,i)}retry(e,t=1){let r=0;const n=(s,i)=>{r+=1,e(this.url,this.options).then((e=>{const t=Object.assign(Object.assign({},this.options),{authentication:e});return Pt(this.url,t)})).then((e=>{s(e)})).catch((e=>{"ArcGISAuthError"===e.name&&r<t?n(s,i):e.name===this.name&&e.message===this.message&&r>=t?i(this):i(e)}))};return new Promise(((e,t)=>{n(e,t)}))}}function Pt(e,t){const r=globalThis.DEFAULT_ARCGIS_REQUEST_OPTIONS||{httpMethod:"POST",params:{f:"json"}},n=Object.assign(Object.assign(Object.assign({httpMethod:"POST"},r),t),{params:Object.assign(Object.assign({},r.params),t.params),headers:Object.assign(Object.assign({},r.headers),t.headers)}),{httpMethod:s,rawResponse:i}=n,o=Object.assign({f:"json"},n.params);let a=null;const l={method:s,signal:n.signal,credentials:n.credentials||"same-origin"};let c;if(n.headers&&n.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(l.credentials="include"),"string"==typeof n.authentication){const e=n.authentication;c={portal:"https://www.arcgis.com/sharing/rest",getToken:()=>Promise.resolve(e)},n.authentication.startsWith("AAPK")||n.authentication.startsWith("AATK")||n.suppressWarnings||globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING||(u="Using an oAuth 2.0 access token directly in the token option is discouraged. Consider using ArcGISIdentityManager or Application session. See https://esriurl.com/arcgis-rest-js-direct-token-warning for more information.",console&&console.warn&&console.warn.apply(console,[u]),globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING=!0)}else c=n.authentication;var u;const d=e;return(c?c.getToken(e).catch((t=>(t.url=e,t.options=n,a=t,Promise.resolve("")))):Promise.resolve("")).then((t=>{t.length&&(o.token=t),c&&c.getDomainCredentials&&(l.credentials=c.getDomainCredentials(e));const r={};if("GET"===l.method){o.token&&n.hideToken&&"undefined"==typeof window&&(r["X-Esri-Authorization"]=`Bearer ${o.token}`,delete o.token);const s=""===Tt(o)?e:e+"?"+Tt(o);n.maxUrlLength&&s.length>n.maxUrlLength||!n.maxUrlLength&&s.length>2e3||o.token&&n.hideToken?(l.method="POST",t.length&&n.hideToken&&(o.token=t,delete r["X-Esri-Authorization"])):e=s}const s=new RegExp("/items/.+/updateResources").test(e);return"POST"===l.method&&(l.body=function(e,t){const r=It(e)||t,n=kt(e);if(r){const e=new Ct;return Object.keys(n).forEach((t=>{if("undefined"!=typeof Blob&&n[t]instanceof Blob){const r=n.fileName||n[t].name||t;e.append(t,n[t],r)}else e.append(t,n[t])})),e}return Tt(e)}(o,s)),l.headers=Object.assign(Object.assign({},r),n.headers),("undefined"==typeof window||window&&void 0===window.document)&&!l.headers.referer&&(l.headers.referer=Rt),It(o)||s||(l.headers["Content-Type"]="application/x-www-form-urlencoded"),globalThis.fetch?globalThis.fetch(e,l):Promise.resolve({fetch:globalThis.fetch,Headers:globalThis.Headers,Response:globalThis.Response,Request:globalThis.Request}).then((({fetch:t})=>t(e,l)))})).then((t=>{if(!t.ok)return t.json().then((r=>{const{status:s,statusText:i}=t,{message:o,details:a}=r.error,l=`${o}. ${a?a.join(" "):""}`.trim();throw new xt(l,`HTTP ${s} ${i}`,r,e,n)})).catch((r=>{if("ArcGISRequestError"===r.name)throw r;const{status:s,statusText:i}=t;throw new xt(i,`HTTP ${s}`,t,e,n)}));if(i)return t;switch(o.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((t=>{if("json"!==o.f&&"geojson"!==o.f||i)return t;{const r=function(e,t,r,n,s){if(e.code>=400){const{message:r,code:s}=e;throw new xt(r,s,e,t,n)}if(e.error){const{message:r,code:i,messageCode:o}=e.error,a=o||i||"UNKNOWN_ERROR_CODE";if(498===i||499===i)throw s||new jt(r,a,e,t,n);throw new xt(r,a,e,t,n)}if("failed"===e.status||"failure"===e.status){let r,s="UNKNOWN_ERROR_CODE";try{r=JSON.parse(e.statusMessage).message,s=JSON.parse(e.statusMessage).code}catch(t){r=e.statusMessage||e.message}throw new xt(r,s,e,t,n)}return e}(t,d,0,n,a);if(a){const t=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];n.authentication.federatedServers[t]={token:[],expires:new Date(Date.now()+864e5)},a=null}return r}}))}function Dt(e,t={params:{f:"json"}}){const{request:r}=t,n=Et(t,["request"]);return r?r(e,n):Pt(e,n).catch((e=>e instanceof jt&&t.authentication&&"string"!=typeof t.authentication&&t.authentication.canRefresh&&t.authentication.refreshCredentials?e.retry((()=>t.authentication.refreshCredentials()),1):Promise.reject(e)))}var Ut,Lt;!function(e){e.TOKEN_REFRESH_FAILED="TOKEN_REFRESH_FAILED",e.GENERATE_TOKEN_FOR_SERVER_FAILED="GENERATE_TOKEN_FOR_SERVER_FAILED",e.REFRESH_TOKEN_EXCHANGE_FAILED="REFRESH_TOKEN_EXCHANGE_FAILED",e.NOT_FEDERATED="NOT_FEDERATED",e.UNKNOWN_ERROR_CODE="UNKNOWN_ERROR_CODE"}(Ut||(Ut={}));class Nt extends Error{constructor(e="UNKNOWN_ERROR",t=Ut.UNKNOWN_ERROR_CODE,r,n,s){super(e);const i=new.target.prototype;Object.setPrototypeOf(this,i),this.name="ArcGISTokenRequestError",this.message=`${t}: ${e}`,this.originalMessage=e,this.code=t,this.response=r,this.url=n,this.options=s}}class $t extends Error{constructor(){super("The user has denied your authorization request.");const e=new.target.prototype;Object.setPrototypeOf(this,e),this.name="ArcGISAccessDeniedError"}}Error;function Mt(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}!function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError",e.ArcGISAccessDeniedError="ArcGISAccessDeniedError",e.ArcGISTokenRequestError="ArcGISTokenRequestError"}(Lt||(Lt={}));const Ft=3e5;function Bt(e,t){const r=t;return r.rawResponse=!1,Dt(e,r).then((e=>{if("token"in e&&"expires"in e)return{token:e.token,username:t.params.username,expires:new Date(e.expires)};const r={token:e.access_token,username:e.username,expires:new Date(Date.now()+1e3*e.expires_in-Ft),ssl:!0===e.ssl};return e.refresh_token&&(r.refreshToken=e.refresh_token),e.refresh_token_expires_in&&(r.refreshTokenExpires=new Date(Date.now()+1e3*e.refresh_token_expires_in-Ft)),r}))}class qt{constructor(e){this.portal=e.portal?Mt(e.portal):"https://www.arcgis.com/sharing/rest",this._username=e.username}get username(){return this._username?this._username:this._user&&this._user.username?this._user.username:void 0}getUsername(){return this.username?Promise.resolve(this.username):this.getUser().then((e=>e.username))}getUser(e){if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);{const t=`${this.portal}/community/self`,r=Object.assign(Object.assign({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=Dt(t,r).then((e=>(this._user=e,this._pendingUserRequest=null,e))),this._pendingUserRequest}}clearCachedUserInfo(){this._user=null}}function zt(e){return!e||e.length<=0?{}:e.replace(/^#/,"").replace(/^\?/,"").split("&").reduce(((e,t)=>{const{key:r,value:n}=function(e){const[t,r]=e.split("=");return{key:decodeURIComponent(t),value:decodeURIComponent(r)}}(t);return e[r]=n,e}),{})}const Vt=/^https?:\/\/(\S+)\.arcgis\.com.+/;function Wt(e){return Vt.test(e)}function Gt(e){if(!Vt.test(e))return null;const t=e.match(Vt)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function Ht(e,t){const r=Mt(function(e){if(!Vt.test(e))return e;switch(Gt(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(t)).replace(/https?:\/\//,""),n=Mt(e).replace(/https?:\/\//,"");return new RegExp(n,"i").test(r)}function Jt(e,t=window){return!t&&window&&(t=window),t.btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Kt(e){!e&&window&&(e=window);return Jt(e.crypto.getRandomValues(new Uint8Array(32)))}class Yt extends qt{constructor(e){if(super(e),this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?Mt(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.server=e.server,this.referer=e.referer,this.federatedServers={},this.trustedDomains=[],e.server){const t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}get token(){return this._token}get tokenExpires(){return this._tokenExpires}get refreshToken(){return this._refreshToken}get refreshTokenExpires(){return this._refreshTokenExpires}get canRefresh(){return!(!this.username||!this.password)||!!(this.clientId&&this.refreshToken&&this.redirectUri)}static beginOAuth2(e,t){!t&&window&&(t=window);const{portal:r,provider:n,clientId:s,expiration:i,redirectUri:o,popup:a,popupWindowFeatures:l,locale:c,params:u,style:d,pkce:h,state:p}=Object.assign({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",locale:"",style:"",pkce:!0},e),f=p||Kt(t),g=`ARCGIS_REST_JS_AUTH_STATE_${s}`;t.localStorage.setItem(g,f);let m=`${Mt(r)}/oauth2/authorize`;const v={client_id:s,response_type:h?"code":"token",expiration:i,redirect_uri:o,state:JSON.stringify({id:f,originalUrl:t.location.href}),locale:c,style:d};let y;if("arcgis"!==n&&(m=`${Mt(r)}/oauth2/social/authorize`,v.socialLoginProviderName=n,v.autoAccountCreateForSocial=!0),h){const e=Kt(t),r=`ARCGIS_REST_JS_CODE_VERIFIER_${s}`;t.localStorage.setItem(r,e),y=function(e,t=window){if(!t&&window&&(t=window),e&&t.isSecureContext&&t.crypto&&t.crypto.subtle){const r=(new t.TextEncoder).encode(e);return t.crypto.subtle.digest("SHA-256",r).then((e=>Jt(new Uint8Array(e),t)))}return Promise.resolve(null)}(e,t).then((function(t){v.code_challenge_method=t?"S256":"plain",v.code_challenge=t||e}))}else y=Promise.resolve();return y.then((()=>(m=`${m}?${Tt(v)}`,u&&(m=`${m}&${Tt(u)}`),a?new Promise(((e,n)=>{t.addEventListener(`arcgis-rest-js-popup-auth-${s}`,(t=>{if("access_denied"===t.detail.error){const e=new $t;return n(e),e}if(t.detail.errorMessage){const e=new jt(t.detail.errorMessage,t.detail.error);return n(e),e}e(new Yt({clientId:s,portal:r,ssl:t.detail.ssl,token:t.detail.token,tokenExpires:t.detail.expires,username:t.detail.username,refreshToken:t.detail.refreshToken,refreshTokenExpires:t.detail.refreshTokenExpires,redirectUri:o}))}),{once:!0}),t.open(m,"oauth-window",l),t.dispatchEvent(new CustomEvent("arcgis-rest-js-popup-auth-start"))})):void(t.location.href=m))))}static completeOAuth2(e,t){!t&&window&&(t=window);const{portal:r,clientId:n,popup:s,pkce:i,redirectUri:o}=Object.assign({portal:"https://www.arcgis.com/sharing/rest",popup:!0,pkce:!0},e),a=`ARCGIS_REST_JS_AUTH_STATE_${n}`,l=t.localStorage.getItem(a),c=zt(i?t.location.search.replace(/^\?/,""):t.location.hash.replace(/^#/,"")),u=c&&c.state?JSON.parse(c.state):void 0;function d(e,r,i){return t.localStorage.removeItem(a),s&&t.opener?(t.opener.dispatchEvent(new CustomEvent(`arcgis-rest-js-popup-auth-${n}`,{detail:{error:r,errorMessage:e}})),void t.close()):(i&&t.history.replaceState(t.history.state,"",i),"access_denied"===r?Promise.reject(new $t):Promise.reject(new jt(e,r)))}function h(e,i){return t.localStorage.removeItem(a),s&&t.opener?(t.opener.dispatchEvent(new CustomEvent(`arcgis-rest-js-popup-auth-${n}`,{detail:Object.assign({},e)})),void t.close()):(t.history.replaceState(t.history.state,"",i),new Yt({clientId:n,portal:r,ssl:e.ssl,token:e.token,tokenExpires:e.expires,username:e.username,refreshToken:e.refreshToken,refreshTokenExpires:e.refreshTokenExpires,redirectUri:o||location.href.replace(location.search,"")}))}if(!l||!u)return d("No authentication state was found, call `ArcGISIdentityManager.beginOAuth2(...)` to start the authentication process.","no-auth-state");if(u.id!==l)return d("Saved client state did not match server sent state.","mismatched-auth-state");if(c.error){const e=c.error;return d(c.error_description||"Unknown error",e,u.originalUrl)}if(i&&c.code){const e=Mt(`${r}/oauth2/token/`),s=`ARCGIS_REST_JS_CODE_VERIFIER_${n}`,i=t.localStorage.getItem(s);return t.localStorage.removeItem(s),Bt(e,{httpMethod:"POST",params:{client_id:n,code_verifier:i,grant_type:"authorization_code",redirect_uri:o||location.href.replace(location.search,""),code:c.code}}).then((e=>h(Object.assign(Object.assign({},e),u),u.originalUrl))).catch((e=>d(e.originalMessage,e.code,u.originalUrl)))}return!i&&c.access_token?Promise.resolve(h(Object.assign({token:c.access_token,expires:new Date(Date.now()+1e3*parseInt(c.expires_in,10)),ssl:"true"===c.ssl,username:c.username},u),u.originalUrl)):d("Unknown error","oauth-error",u.originalUrl)}static fromParent(e,t){let r;return!t&&window&&(t=window),new Promise(((n,s)=>{r=e=>{if(e.source===t.parent&&e.data)try{return n(Yt.parentMessageHandler(e))}catch(e){return s(e)}},t.addEventListener("message",r,!1),t.parent.postMessage({type:"arcgis:auth:requestCredential"},e)})).then((e=>(t.removeEventListener("message",r,!1),e)))}static authorize(e,t){const{portal:r,clientId:n,expiration:s,redirectUri:i,state:o}=Object.assign({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),a={client_id:n,expiration:s,response_type:"code",redirect_uri:i};o&&(a.state=o);const l=`${r}/oauth2/authorize?${Tt(a)}`;t.writeHead(301,{Location:l}),t.end()}static exchangeAuthorizationCode(e,t){const{portal:r,clientId:n,redirectUri:s}=Object.assign({portal:"https://www.arcgis.com/sharing/rest"},e);return Bt(`${r}/oauth2/token`,{params:{grant_type:"authorization_code",client_id:n,redirect_uri:s,code:t}}).then((e=>new Yt({clientId:n,portal:r,ssl:e.ssl,redirectUri:s,refreshToken:e.refreshToken,refreshTokenExpires:e.refreshTokenExpires,token:e.token,tokenExpires:e.expires,username:e.username}))).catch((e=>{throw new Nt(e.message,Ut.REFRESH_TOKEN_EXCHANGE_FAILED,e.response,e.url,e.options)}))}static deserialize(e){const t=JSON.parse(e);return new Yt({clientId:t.clientId,refreshToken:t.refreshToken,refreshTokenExpires:t.refreshTokenExpires?new Date(t.refreshTokenExpires):void 0,username:t.username,password:t.password,token:t.token,tokenExpires:t.tokenExpires?new Date(t.tokenExpires):void 0,portal:t.portal,ssl:t.ssl,tokenDuration:t.tokenDuration,redirectUri:t.redirectUri,server:t.server})}static fromCredential(e,t){const r=void 0===e.ssl||e.ssl,n=e.expires||Date.now()+72e5;return t.hasServer?new Yt({server:e.server,ssl:r,token:e.token,username:e.userId,tokenExpires:new Date(n)}):new Yt({portal:Mt(e.server.includes("sharing/rest")?e.server:e.server+"/sharing/rest"),ssl:r,token:e.token,username:e.userId,tokenExpires:new Date(n)})}static parentMessageHandler(e){if("arcgis:auth:credential"===e.data.type){const t=e.data.credential;return function(e){return"string"==typeof e.userId||"number"==typeof e.expires}(t)?Yt.fromCredential(t,{hasPortal:!0,hasServer:!1,server:t.server}):new Yt(t)}if("arcgis:auth:error"===e.data.type){const t=new Error(e.data.error.message);throw t.name=e.data.error.name,t}throw new Error("Unknown message type.")}static destroy(e){return function(e){const t=`${Mt(e.portal||"https://www.arcgis.com/sharing/rest")}/oauth2/revokeToken/`,r=e.token,n=e.clientId;delete e.portal,delete e.clientId,delete e.token;const s=Object.assign(Object.assign({},e),{httpMethod:"POST",params:{client_id:n,auth_token:r}});return Dt(t,s).then((e=>{if(!e.success)throw new xt("Unable to revoke token",500,e,t,s);return e}))}({clientId:e.clientId,portal:e.portal,token:e.refreshToken||e.token})}static fromToken(e){const t=new Yt(e);return t.getUser().then((()=>t))}static signIn(e){const t=new Yt(e);return t.getUser().then((()=>t))}toCredential(){return{expires:this.tokenExpires.getTime(),server:this.server||this.portal,ssl:this.ssl,token:this.token,userId:this.username}}getPortal(e){if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);{const t=`${this.portal}/portals/self`,r=Object.assign(Object.assign({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=Dt(t,r).then((e=>(this._portalInfo=e,this._pendingPortalRequest=null,e))),this._pendingPortalRequest}}getToken(e,t){return function(e,t){const r=Wt(e),n=Wt(t),s=Gt(e),i=Gt(t);return!(!r||!n||s!==i)}(this.portal,e)||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t)}validateAppAccess(e){return this.getToken(this.portal).then((t=>function(e,t,r="https://www.arcgis.com/sharing/rest"){return Dt(`${r}/oauth2/validateAppAccess`,{method:"POST",params:{f:"json",client_id:t,token:e}})}(t,e)))}toJSON(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires||void 0,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires||void 0,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,server:this.server}}serialize(){return JSON.stringify(this)}enablePostMessageAuth(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)}disablePostMessageAuth(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)}refreshCredentials(e){return this.clearCachedUserInfo(),this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new Nt("Unable to refresh token. No refresh token or password present.",Ut.TOKEN_REFRESH_FAILED))}getServerRootUrl(e){const[t]=Mt(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/),[r,n,s]=t.match(/(https?:\/\/)(.+)/),[i,...o]=s.split("/");return`${n}${i.toLowerCase()}/${o.join("/")}`}getDomainCredentials(e){return this.trustedDomains&&this.trustedDomains.length?(e=e.toLowerCase(),this.trustedDomains.some((t=>e.startsWith(t.toLowerCase())))?"include":"same-origin"):"same-origin"}signOut(){return Yt.destroy(this)}createPostMessageHandler(e){return t=>{const r=e.indexOf(t.origin)>-1,n="arcgis:auth:requestCredential"===t.data.type,s=this.tokenExpires.getTime()>Date.now();if(r&&n){let e={};if(s){const t=this.toCredential();t.server=t.server.replace("/sharing/rest",""),e={type:"arcgis:auth:credential",credential:t}}else e={type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Token was expired, and not returned to the child application"}};t.source.postMessage(e,t.origin)}}}getTokenForServer(e,t){const r=this.getServerRootUrl(e),n=this.federatedServers[r];return n&&n.expires&&n.expires.getTime()>Date.now()?Promise.resolve(n.token):(this._pendingTokenRequests[r]||(this._pendingTokenRequests[r]=this.fetchAuthorizedDomains().then((()=>Dt(`${r}/rest/info`,{credentials:this.getDomainCredentials(e)}).then((n=>{if(n.owningSystemUrl){if(Ht(n.owningSystemUrl,this.portal))return Dt(`${n.owningSystemUrl}/sharing/rest/info`,t);throw new Nt(`${e} is not federated with ${this.portal}.`,Ut.NOT_FEDERATED)}if(n.authInfo&&void 0!==this.federatedServers[r])return Promise.resolve({authInfo:n.authInfo});throw new Nt(`${e} is not federated with any portal and is not explicitly trusted.`,Ut.NOT_FEDERATED)})).then((e=>this.token&&this.tokenExpires.getTime()<Date.now()?this.server?this.refreshCredentials().then((()=>({token:this.token,expires:this.tokenExpires}))):this.refreshCredentials().then((()=>this.generateTokenForServer(e.authInfo.tokenServicesUrl,r))):this.generateTokenForServer(e.authInfo.tokenServicesUrl,r))).then((e=>(this.federatedServers[r]=e,delete this._pendingTokenRequests[r],e.token)))))),this._pendingTokenRequests[r])}generateTokenForServer(e,t){return Dt(e,{params:{token:this.token,serverUrl:t,expiration:this.tokenDuration}}).then((e=>({token:e.token,expires:new Date(e.expires-3e5)}))).catch((e=>{throw new Nt(e.message,Ut.GENERATE_TOKEN_FOR_SERVER_FAILED,e.response,e.url,e.options)}))}getFreshToken(e){return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshCredentials(e).then((()=>(this._pendingTokenRequests[this.portal]=null,this.token)))),this._pendingTokenRequests[this.portal])}refreshWithUsernameAndPassword(e){const t={username:this.username,password:this.password,expiration:this.tokenDuration,client:"referer",referer:this.referer?this.referer:"undefined"!=typeof window&&void 0!==window.document&&window.location&&window.location.origin?window.location.origin:Rt};return(this.server?Dt(`${this.getServerRootUrl(this.server)}/rest/info`).then((r=>Dt(r.authInfo.tokenServicesUrl,Object.assign({params:t},e)))):Dt(`${this.portal}/generateToken`,Object.assign({params:t},e))).then((e=>(this.updateToken(e.token,new Date(e.expires)),this))).catch((e=>{throw new Nt(e.message,Ut.TOKEN_REFRESH_FAILED,e.response,e.url,e.options)}))}refreshWithRefreshToken(e){if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()-864e5<Date.now())return this.exchangeRefreshToken(e);const t=Object.assign({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return Bt(`${this.portal}/oauth2/token`,t).then((e=>this.updateToken(e.token,e.expires))).catch((e=>{throw new Nt(e.message,Ut.TOKEN_REFRESH_FAILED,e.response,e.url,e.options)}))}updateToken(e,t){return this._token=e,this._tokenExpires=t,this}exchangeRefreshToken(e){const t=Object.assign({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return Bt(`${this.portal}/oauth2/token`,t).then((e=>(this._token=e.token,this._tokenExpires=e.expires,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this))).catch((e=>{throw new Nt(e.message,Ut.REFRESH_TOKEN_EXCHANGE_FAILED,e.response,e.url,e.options)}))}fetchAuthorizedDomains(){return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((e=>(e.authorizedCrossOriginDomains&&e.authorizedCrossOriginDomains.length&&(this.trustedDomains=e.authorizedCrossOriginDomains.filter((e=>!e.startsWith("http://"))).map((e=>e.startsWith("https://")?e:`https://${e}`))),this)))}}function Zt(e){return console.log("DEPRECATED:, 'UserSession' is deprecated. Use 'ArcGISIdentityManager' instead."),new Yt(e)}var Xt;Zt.beginOAuth2=function(...e){return console.warn("DEPRECATED:, 'UserSession.beginOAuth2' is deprecated. Use 'ArcGISIdentityManager.beginOAuth2' instead."),Yt.beginOAuth2(...e)},Zt.completeOAuth2=function(...e){return console.warn("DEPRECATED:, 'UserSession.completeOAuth2()' is deprecated. Use 'ArcGISIdentityManager.completeOAuth2()' instead."),e.length<=1&&console.warn("WARNING:, 'UserSession.completeOAuth2()' is now async and returns a promise the resolves to an instance of `ArcGISIdentityManager`."),Yt.completeOAuth2(...e)},Zt.fromParent=function(...e){return console.warn("DEPRECATED:, 'UserSession.fromParent' is deprecated. Use 'ArcGISIdentityManager.fromParent' instead."),Yt.fromParent(...e)},Zt.authorize=function(...e){return console.warn("DEPRECATED:, 'UserSession.authorize' is deprecated. Use 'ArcGISIdentityManager.authorize' instead."),Yt.authorize(...e)},Zt.exchangeAuthorizationCode=function(...e){return console.warn("DEPRECATED:, 'UserSession.exchangeAuthorizationCode' is deprecated. Use 'ArcGISIdentityManager.exchangeAuthorizationCode' instead."),Yt.exchangeAuthorizationCode(...e)},Zt.fromCredential=function(...e){return console.log("DEPRECATED:, 'UserSession.fromCredential' is deprecated. Use 'ArcGISIdentityManager.fromCredential' instead."),console.warn("WARNING:, 'UserSession.fromCredential' now requires a `ServerInfo` object from the JS API as a second parameter."),Yt.fromCredential(...e)},Zt.deserialize=function(...e){return console.log("DEPRECATED:, 'UserSession.deserialize' is deprecated. Use 'ArcGISIdentityManager.deserialize' instead."),Yt.deserialize(...e)},function(e){e.Success="Succeeded",e.Failed="Failed",e.Waiting="Waiting",e.Cancelled="Cancelled",e.Cancelling="Cancelling",e.New="New",e.Executing="Executing",e.Submitted="Submitted",e.Failure="Failure",e.TimedOut="TimedOut",e.Error="Error",e.Status="Etatus",e.Unknown="Unknown"}(Xt||(Xt={}));function Qt(e,t){return Dt(er(e,t),Object.assign({httpMethod:"GET"},t))}const er=(e,t)=>`${"string"==typeof t?t:function(e={}){return e.portal?Mt(e.portal):e.authentication&&"string"!=typeof e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}(t)}/content/items/${e}`;var tr=Object.defineProperty,rr=(e,t,r)=>((e,t,r)=>t in e?tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);const nr={aps_data:{},geobim_data:{notAGeoBIMItem:"{GeobimItemTitle} is not a valid GeoBIM Project or App Item.",geobimItemFailedLoad:"GeoBIM Item failed to load: {LoadStatus}",geobimServiceFailedLoad:"GeoBIM Feature Service item failed to load: {LoadStatus}",geobimServiceNotALayer:"GeoBIM Feature Service item id {FeatureServiceId} is not a layer.",serviceIsNotReady:"GeoBIM Project Service is not ready",layerDoesNotExist:"Project Layer {Name} does not exist in GeoBIM Feature Service",serviceInvalidType:"Service of type {LayerType} is not a valid GeoBIM Feature Service",layerIdDoesNotExist:"GeoBIM Project Layer with ID of {LayerId} does not exist",layerInvalidType:"Layer of type {LayerType} is not a valid GeoBIM Feature Layer",geobimServiceNotAService:"GeoBIM Feature Service item id {FeatureServiceId} is not a service.",layerUrlDoesNotExist:"This layer does not exist: {ServiceUrl}",serviceUrlUndefined:"Service item, {FeatureServiceId}, url is undefined",layerDoesNotHaveObjectId:"Layer {ServiceUrl} does not have an ObjectId field",featureNotFound:"Feature with id {ObjectId} was not found in layer {ServiceUrl}",serviceIsNotDefined:"The project has no feature service.",notImplemented:"This method is not implemented: {Name}.",unknown:"Unknown"}},sr="geobim_data";function ir(e){const t=function(e,t,r){const n=Object.assign(Object.assign({params:{}},r),e);return n.params=t.reduce(((t,r)=>((e[r]||"boolean"==typeof e[r]||"number"==typeof e[r]&&0===e[r])&&(t[r]=e[r]),t)),n.params),["params","httpMethod","rawResponse","authentication","hideToken","portal","credentials","maxUrlLength","headers","signal","suppressWarnings","request"].reduce(((e,t)=>(n[t]&&(e[t]=n[t]),e)),{})}(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:Object.assign({where:"1=1",outFields:"*"},e.params)});return Dt(`${Mt(e.url)}/query`,t)}var or=Object.defineProperty,ar=(e,t,r)=>((e,t,r)=>t in e?or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);function lr(e,t){if((null==e?void 0:e.length)>0&&null!=t)return e.find((e=>e.toLowerCase()===t.toLowerCase()))}class cr{constructor(){ar(this,"globalId"),ar(this,"objectId"),ar(this,"creationDate"),ar(this,"creator"),ar(this,"editDate"),ar(this,"editor")}}ar(cr,"fields",["globalId","objectId","creationDate","creator","editDate","editor"]);class ur extends cr{constructor(e){super(),ar(this,"linkType"),ar(this,"linkDefinition"),ar(this,"itemId"),ar(this,"layerId"),ar(this,"featureId"),ar(this,"licenseDetails"),ar(this,"fields",cr.fields.concat(["linkType","linkDefinition","itemId","resourceId","featureId","licenseDetails"]));for(const t in this){const r=lr(Object.keys(e.attributes),t);void 0!==r&&("resourceId"===t?this.layerId=parseInt(e.attributes[r]):this[t]=e.attributes[r])}}}var dr=(e=>(e.ViewerUrl="ViewerUrl",e.BIMDocument="BIMDocument",e.DocumentName="DocumentName",e.ScheduleFeature="ScheduleFeature",e.Custom="Custom",e))(dr||{}),hr=(e=>(e.Documents="Documents",e.Issues="Issues",e.Schedules="Schedules",e.BIMProjects="BIMProjects",e.Accounts="Accounts",e.Links="Links",e.Jobs="Jobs",e.LocationNotes="Location Notes",e.LineNotes="Line Notes",e.AreaNotes="Area Notes",e))(hr||{});class pr extends cr{constructor(e){super(),ar(this,"name"),ar(this,"type"),ar(this,"connectionInfo"),ar(this,"licenseDetails"),ar(this,"fields",cr.fields.concat(["name","type","authDetails"]));const t=Object.keys(e.attributes);for(const r in this)if("connectionInfo"===r){const r=lr(t,"authDetails");if(void 0===r)continue;this.connectionInfo=JSON.parse(e.attributes[r])}else{const n=lr(t,r);if(void 0===n)continue;this[r]=e.attributes[n]}}}class fr extends cr{constructor(e){super(),ar(this,"lastModifiedTime"),ar(this,"projectId"),ar(this,"itemId"),ar(this,"versionId"),ar(this,"displayName"),ar(this,"boundary"),ar(this,"spatialReference"),ar(this,"hidden"),ar(this,"outlier"),ar(this,"outlierMessage"),ar(this,"shapeArea"),ar(this,"shapeLength"),ar(this,"fields",cr.fields.concat(["lastModifiedTime","projectId","itemId","versionId","displayName","boundary","spatialReference","hidden","outlier","outlierMessage","shapeArea","shapeLength","docOffset"]));for(const t in this){const r=lr(Object.keys(e.attributes),t);void 0!==r&&(this[t]=e.attributes[r])}}}var gr=(e=>(e.INFO="info",e.WARNING="warning",e.DANGER="danger",e))(gr||{});class mr extends Error{constructor(e){super(e.message),ar(this,"_message"),ar(this,"_severity"),ar(this,"_intl"),ar(this,"errorType","GeoBIM_Error"),this._message=e.message,this._severity=e.severity??"info",this._intl=e.intl}get message(){return this._message}get severity(){return this._severity}get intl(){return this._intl}}const vr=e=>new mr({message:nr.geobim_data.notAGeoBIMItem.replace("{GeobimItemTitle}",e),severity:gr.DANGER,intl:{id:"notAGeoBIMItem",messageGroupId:sr,substitutions:{GeobimItemTitle:e}}}),yr=e=>new mr({message:nr.geobim_data.geobimServiceNotAService.replace("{FeatureServiceId}",e),severity:gr.DANGER,intl:{id:"geobimServiceNotAService",messageGroupId:sr,substitutions:{FeatureServiceId:e}}}),_r=e=>new mr({message:nr.geobim_data.serviceUrlUndefined.replace("{FeatureServiceId}",e),severity:gr.DANGER,intl:{id:"serviceUrlUndefined",messageGroupId:sr,substitutions:{FeatureServiceId:e}}});class wr{constructor(e){rr(this,"_session"),rr(this,"getFeature",(async(e,t)=>{const r=await function(e){const t=`${Mt(e.url)}/${e.id}`,r=Object.assign({httpMethod:"GET"},e);return Dt(t,r).then((e=>r.rawResponse?e:e.feature))}({url:e.url,id:t,authentication:this._session});if(null==r)throw((e,t)=>new mr({message:nr.geobim_data.featureNotFound.replace("{ObjectId}",e.toString()).replace("{ServiceUrl}",t),severity:gr.DANGER,intl:{id:"featureNotFound",messageGroupId:sr,substitutions:{ObjectId:e.toString(),ServiceUrl:t}}}))(t,e.url);return this.mapIRestFeatureToIFeature(t,r,e)})),rr(this,"getLayer",(async(e,t)=>{const r=await this.getFeatureServiceUrl(e);return await this.getLayerFromUrl(`${r}/${t}`,e,t)})),rr(this,"getLayerFromUrl",(async(e,t,r)=>{const n=await function(e){return Dt(Mt(e.url),e)}({url:e,authentication:this._session});if(null==n)throw(e=>new mr({message:nr.geobim_data.layerUrlDoesNotExist.replace("{ServiceUrl}",e),severity:gr.DANGER,intl:{id:"layerDoesNotExist",messageGroupId:sr,substitutions:{ServiceUrl:e}}}))(e);return this.mapILayerDefinitionToILayer(n,e,t,r)})),rr(this,"queryFeatures",(async(e,t)=>{var r;const n={authentication:this._session,url:e.url,...t},s=await ir(n);if(null==s)return[];if((null==(r=s.features)?void 0:r.length)<=0)return[];if(void 0===s.objectIdFieldName)throw(e=>new mr({message:nr.geobim_data.layerDoesNotHaveObjectId.replace("{ServiceUrl}",e),severity:gr.DANGER,intl:{id:"layerDoesNotHaveObjectId",messageGroupId:sr,substitutions:{ServiceUrl:e}}}))(n.url);const i=s.objectIdFieldName;return s.features.map((t=>this.mapIRestFeatureToIFeature(t.attributes[i],t,e)))})),rr(this,"getItem",(async e=>{const t=await Qt(e,{authentication:this._session});return this.mapIRestItemtoIItem(t)})),rr(this,"getFeatureService",(async e=>{const t=await this.getFeatureServiceUrl(e),r=await this.getFeatureServiceFromUrl(`${t}`);return this.mapIFeatureServiceDefinitionToIFeatureService(r,t,e)})),rr(this,"getFeatureServiceFromUrl",(async e=>await function(e){return Dt(Mt(e.url),e)}({url:e,authentication:this._session}))),rr(this,"getFeatureServiceUrl",(async e=>{try{const t=await Qt(e,{authentication:this._session});if("Feature Service"!==t.type)throw yr(e);if(void 0===t.url)throw _r(e);return t.url}catch{throw yr(e)}})),this._session=e}mapIRestFeatureToIFeature(e,t,r){return{objectId:e,attributes:t.attributes,layer:r}}mapILayerDefinitionToILayer(e,t,r,n){return{id:e.name??"",portalItemId:r,layerId:n,type:e.type??"",title:e.name??"",displayField:e.displayField??"",objectIdField:e.objectIdField??"",url:t,fields:void 0===e.fields?[]:e.fields.map((e=>({name:e.name,type:e.type,alias:e.alias})))}}mapITableToILayer(e,t,r,n){return{id:e.name??"",portalItemId:r,layerId:n,type:"table",title:e.name??"",displayField:"",objectIdField:"",url:t,fields:[]}}mapIRestItemtoIItem(e){return e}mapIFeatureServiceDefinitionToIFeatureService(e,t,r){return{portalItemId:r,description:e.description??"",url:t,layers:e.layers.map((e=>this.mapILayerDefinitionToILayer(e,t,r,e.id??0))),tables:e.tables.map((e=>null!=e.layerDefinition?this.mapILayerDefinitionToILayer(e.layerDefinition,t,r,e.id??0):this.mapITableToILayer(e,t,r,e.id??0)))}}}class br{constructor(e,t){rr(this,"_layer"),rr(this,"_queryService"),this._queryService=e,this._layer=t}get ArcGISRestService(){return this._queryService}get layer(){return this._layer}}class Sr extends br{constructor(){super(...arguments),rr(this,"getLinkRecords",(async(e,t,r)=>{const n=this.getServiceFieldName("ResourceId"),s=this.getServiceFieldName("ItemId"),i=this.getServiceFieldName("FeatureId"),o=`${n} = '${t}' AND ${s} = '${e}' AND (${i} = ${r} OR ${i} IS NULL)`,a=await this.ArcGISRestService.queryFeatures(this.layer,{url:this.layer.url,where:o});return(null==a?void 0:a.length)>0?a.map((e=>new ur(e))):[]})),rr(this,"addLinks",(async e=>{})),rr(this,"getServiceFieldName",(e=>{var t;const r=null==(t=this.layer.fields)?void 0:t.find((t=>t.name.toLowerCase()===e.toLowerCase()));return(null==r?void 0:r.name)??e}))}}class Ar extends br{constructor(){super(...arguments),rr(this,"getAccountRecords",(async(e,t)=>{const r=this.getServiceFieldName("Name"),n=this.getServiceFieldName("Type"),s=`${r} = '${e}' ${void 0!==t&&t.length>0?`AND ${n} = '${t}'`:""}`,i=await this.ArcGISRestService.queryFeatures(this.layer,{url:this.layer.url,where:s});return(null==i?void 0:i.length)>0?i.map((e=>new pr(e))):[]})),rr(this,"getServiceFieldName",(e=>{var t;const r=null==(t=this.layer.fields)?void 0:t.find((t=>t.name.toLowerCase()===e.toLowerCase()));return(null==r?void 0:r.name)??e}))}}class Er extends br{constructor(){super(...arguments),rr(this,"getDocumentsByIntersection",(async e=>{var t;const r=await this.ArcGISRestService.queryFeatures(this.layer,{url:this.layer.url,geometry:this.getQueryGeometry(e),geometryType:this.getQueryGeometryType(e),inSR:(null==(t=e.geometry)?void 0:t.spatialReference)??"3857"});return(null==r?void 0:r.length)>0?r.map((e=>new fr(e))):[]})),rr(this,"getQueryGeometry",(e=>{if(null==(null==e?void 0:e.geometry))return;const t=e.geometry;switch(e.geometry.type){case"point":{const e=t;return{x:e.x,y:e.y}}case"polyline":return{paths:t.paths};case"polygon":return{rings:t.rings};default:throw new Error("Unsupported geometry type")}})),rr(this,"getQueryGeometryType",(e=>{if(null!=(null==e?void 0:e.geometry))switch(e.geometry.type){case"point":return"esriGeometryPoint";case"polyline":return"esriGeometryPolyline";case"polygon":return"esriGeometryPolygon";default:throw new Error("Unsupported geometry type")}}))}}class Ir{constructor(e,t){rr(this,"_linkDataService"),rr(this,"_accountDataService"),rr(this,"_documentDataService"),rr(this,"featureServiceItem"),rr(this,"featureService"),rr(this,"geobimSourceItemId"),rr(this,"arcGISRestService"),rr(this,"projectLayers",{}),rr(this,"getGeoBIMProjectIdFromAppItem",(e=>{var t,r;const n=null==(r=null==(t=e.properties)?void 0:t.geobim)?void 0:r.parentId;if(null!=n)return n;throw vr(e.id)})),rr(this,"getGeoBIMServiceFromItem",(e=>{if(null==e.featureServiceId||null==e.featureServiceName)throw new mr({message:nr.geobim_data.serviceIsNotDefined,severity:gr.DANGER,intl:{id:"serviceIsNotDefined",messageGroupId:sr,substitutions:{}}});return{id:e.featureServiceId,name:e.featureServiceName}})),rr(this,"getFeatureServiceItem",(async()=>(void 0!==this.featureServiceItem||(this.featureServiceItem=await this.getFeatureServiceItemFromId(this.geobimSourceItemId)),this.featureServiceItem))),rr(this,"getFeatureServiceItemFromId",(async e=>{var t;const r=await this.arcGISRestService.getItem(e);if("GeoBIM Project"===r.type){const e=null==(t=r.properties)?void 0:t.geobim;if(null==e)throw vr(r.title);const n=this.getGeoBIMServiceFromItem(e);return await this.getFeatureServiceItemFromId(n.id)}if("GeoBIM Application"===r.type){const e=this.getGeoBIMProjectIdFromAppItem(r);return await this.getFeatureServiceItemFromId(e)}if("Feature Service"!==r.type)throw yr(this.featureServiceItem.id);return r})),rr(this,"getFeatureServiceUrl",(async()=>{const e=await this.getFeatureServiceItem();if(void 0===e.url)throw _r(this.featureServiceItem.id);return e.url})),rr(this,"getFeatureService",(async()=>{if(void 0!==this.featureService)return this.featureService;const e=await this.getFeatureServiceUrl();return this.featureService=await this.arcGISRestService.getFeatureServiceFromUrl(e),this.featureService})),rr(this,"isValidLayerId",(async e=>await this.isValidTableLayerId(e)||await this.isValidLayerLayerId(e))),rr(this,"isValidTableLayerId",(async e=>void 0!==(await this.getFeatureService()).tables.find((t=>t.id===e)))),rr(this,"isValidLayerLayerId",(async e=>void 0!==(await this.getFeatureService()).layers.find((t=>t.id===e)))),rr(this,"getLayerIdFromName",(async e=>{let t=await this.getLayerIdFromTableName(e);if(-1!==t||(t=await this.getLayerIdFromLayerName(e),-1!==t))return t;throw(e=>new mr({message:nr.geobim_data.layerDoesNotExist.replace("{Name}",e),severity:gr.DANGER,intl:{id:"layerDoesNotExist",messageGroupId:sr,substitutions:{TableName:e}}}))(e)})),rr(this,"getLayerIdFromTableName",(async e=>{var t;return(null==(t=(await this.getFeatureService()).tables.find((t=>{var r;return(null==(r=t.name)?void 0:r.toLowerCase())===e.toLowerCase()})))?void 0:t.id)??-1})),rr(this,"getLayerIdFromLayerName",(async e=>{var t;return(null==(t=(await this.getFeatureService()).layers.find((t=>{var r;return(null==(r=t.name)?void 0:r.toLowerCase())===e.toLowerCase()})))?void 0:t.id)??-1})),rr(this,"getAccountsService",(async()=>{if(void 0!==this._accountDataService)return this._accountDataService;const e=await this.getLayerIdFromName(hr.Accounts),t=await this.getLayer(e);return this._accountDataService=new Ar(this.arcGISRestService,t),this._accountDataService})),rr(this,"getLinksService",(async()=>{if(void 0!==this._linkDataService)return this._linkDataService;const e=await this.getLayerIdFromTableName(hr.Links),t=await this.getLayer(e);return this._linkDataService=new Sr(this.arcGISRestService,t),this._linkDataService})),rr(this,"getDocumentsService",(async()=>{if(void 0!==this._documentDataService)return this._documentDataService;const e=await this.getLayerIdFromLayerName(hr.Documents),t=await this.getLayer(e);return this._documentDataService=new Er(this.arcGISRestService,t),this._documentDataService})),rr(this,"linkDataService",(async()=>await this.getLinksService())),rr(this,"accountDataService",(async()=>await this.getAccountsService())),rr(this,"documentDataService",(async()=>await this.getDocumentsService())),rr(this,"getLayer",(async e=>{if(void 0!==this.projectLayers[e])return this.projectLayers[e];if(!await this.isValidLayerId(e))throw(e=>new mr({message:nr.geobim_data.layerIdDoesNotExist.replace("{LayerId}",e.toString()),severity:gr.DANGER,intl:{id:"layerIdDoesNotExist",messageGroupId:sr,substitutions:{LayerId:e.toString()}}}))(e);const t=await this.getFeatureServiceItem(),r=await this.getFeatureServiceUrl(),n=await this.arcGISRestService.getLayerFromUrl(`${r}/${e}`,t.id,e);return this.projectLayers[e]=n,n})),rr(this,"isIssueFeature",(async e=>{const t=await this.getFeatureServiceItem(),r=await this.getLayerIdFromName(hr.Issues);return e.portalItemId===t.id&&e.layerId===r})),this.arcGISRestService=e,this.geobimSourceItemId=t}}class kr{constructor(e){rr(this,"loadPromise"),rr(this,"_credentialsProvider"),rr(this,"_session"),rr(this,"queryService"),rr(this,"_projectDataService",{}),rr(this,"load",(async()=>{void 0===this.loadPromise&&(this.loadPromise=this.initializeService()),await this.loadPromise})),rr(this,"initializeService",(async()=>{const{credential:e,serverInfo:t}=this._credentialsProvider();this.refreshToken(e,t)})),rr(this,"refreshToken",((e,t)=>{if(void 0===this._session)this._session=Yt.fromCredential(e,t);else{const t=e.expires??null;null!==t?this._session.updateToken(e.token,new Date(t)):console.warn("Cannot update token without an expiry date")}const r=e.expires-Date.now()-2e3,n=Math.max(1e3,r);setTimeout((()=>{const{credential:e,serverInfo:t}=this._credentialsProvider();this.refreshToken(e,t)}),n)})),rr(this,"getFeatureService",(async e=>await this.ArcGISRestService.getFeatureService(e))),rr(this,"projectDataService",(e=>(void 0!==this._projectDataService[e]||(this._projectDataService[e]=new Ir(this.ArcGISRestService,e)),this._projectDataService[e]))),rr(this,"getItem",(async e=>await this.ArcGISRestService.getItem(e))),rr(this,"getLayer",(async(e,t)=>await this.ArcGISRestService.getLayer(e,t))),rr(this,"getFeature",(async(e,t)=>await this.ArcGISRestService.getFeature(e,t))),rr(this,"queryFeatures",(async(e,t)=>await this.ArcGISRestService.queryFeatures(e,{url:e.url,where:t}))),this._credentialsProvider=e}get ArcGISRestService(){if(void 0!==this.queryService)return this.queryService;if(void 0===this._session)throw new Error("Service not initialized");return this.queryService=new wr(this._session),this.queryService}}function Or(e,t){return function(){return e.apply(t,arguments)}}const{toString:Tr}=Object.prototype,{getPrototypeOf:Cr}=Object,{iterator:xr,toStringTag:Rr}=Symbol,jr=(e=>t=>{const r=Tr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Pr=e=>(e=e.toLowerCase(),t=>jr(t)===e),Dr=e=>t=>typeof t===e,{isArray:Ur}=Array,Lr=Dr("undefined");const Nr=Pr("ArrayBuffer");const $r=Dr("string"),Mr=Dr("function"),Fr=Dr("number"),Br=e=>null!==e&&"object"==typeof e,qr=e=>{if("object"!==jr(e))return!1;const t=Cr(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Rr in e||xr in e)},zr=Pr("Date"),Vr=Pr("File"),Wr=Pr("Blob"),Gr=Pr("FileList"),Hr=Pr("URLSearchParams"),[Jr,Kr,Yr,Zr]=["ReadableStream","Request","Response","Headers"].map(Pr);function Xr(e,t,{allOwnKeys:r=!1}={}){if(null===e||typeof e>"u")return;let n,s;if("object"!=typeof e&&(e=[e]),Ur(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const s=r?Object.getOwnPropertyNames(e):Object.keys(e),i=s.length;let o;for(n=0;n<i;n++)o=s[n],t.call(null,e[o],o,e)}}function Qr(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,s=r.length;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const en=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,tn=e=>!Lr(e)&&e!==en;const rn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Cr(Uint8Array)),nn=Pr("HTMLFormElement"),sn=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),on=Pr("RegExp"),an=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Xr(r,((r,s)=>{let i;!1!==(i=t(r,s,e))&&(n[s]=i||r)})),Object.defineProperties(e,n)};const ln=Pr("AsyncFunction"),cn=((e,t)=>e?setImmediate:t?((e,t)=>(en.addEventListener("message",(({source:r,data:n})=>{r===en&&n===e&&t.length&&t.shift()()}),!1),r=>{t.push(r),en.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))("function"==typeof setImmediate,Mr(en.postMessage)),un=typeof queueMicrotask<"u"?queueMicrotask.bind(en):typeof process<"u"&&process.nextTick||cn,dn={isArray:Ur,isArrayBuffer:Nr,isBuffer:function(e){return null!==e&&!Lr(e)&&null!==e.constructor&&!Lr(e.constructor)&&Mr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Mr(e.append)&&("formdata"===(t=jr(e))||"object"===t&&Mr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t=typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Nr(e.buffer),t},isString:$r,isNumber:Fr,isBoolean:e=>!0===e||!1===e,isObject:Br,isPlainObject:qr,isReadableStream:Jr,isRequest:Kr,isResponse:Yr,isHeaders:Zr,isUndefined:Lr,isDate:zr,isFile:Vr,isBlob:Wr,isRegExp:on,isFunction:Mr,isStream:e=>Br(e)&&Mr(e.pipe),isURLSearchParams:Hr,isTypedArray:rn,isFileList:Gr,forEach:Xr,merge:function e(){const{caseless:t}=tn(this)&&this||{},r={},n=(n,s)=>{const i=t&&Qr(r,s)||s;qr(r[i])&&qr(n)?r[i]=e(r[i],n):qr(n)?r[i]=e({},n):Ur(n)?r[i]=n.slice():r[i]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&Xr(arguments[e],n);return r},extend:(e,t,r,{allOwnKeys:n}={})=>(Xr(t,((t,n)=>{r&&Mr(t)?e[n]=Or(t,r):e[n]=t}),{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let s,i,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=!1!==r&&Cr(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:jr,kindOfTest:Pr,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(Ur(e))return e;let t=e.length;if(!Fr(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[xr]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:nn,hasOwnProperty:sn,hasOwnProp:sn,reduceDescriptors:an,freezeMethods:e=>{an(e,((t,r)=>{if(Mr(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];if(Mr(n)){if(t.enumerable=!1,"writable"in t)return void(t.writable=!1);t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return Ur(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Qr,global:en,isContextDefined:tn,isSpecCompliantForm:function(e){return!!(e&&Mr(e.append)&&"FormData"===e[Rr]&&e[xr])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(Br(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const s=Ur(e)?[]:{};return Xr(e,((e,t)=>{const i=r(e,n+1);!Lr(i)&&(s[t]=i)})),t[n]=void 0,s}}return e};return r(e,0)},isAsyncFn:ln,isThenable:e=>e&&(Br(e)||Mr(e))&&Mr(e.then)&&Mr(e.catch),setImmediate:cn,asap:un,isIterable:e=>null!=e&&Mr(e[xr])};function hn(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}dn.inherits(hn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:dn.toJSONObject(this.config),code:this.code,status:this.status}}});const pn=hn.prototype,fn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{fn[e]={value:e}})),Object.defineProperties(hn,fn),Object.defineProperty(pn,"isAxiosError",{value:!0}),hn.from=(e,t,r,n,s,i)=>{const o=Object.create(pn);return dn.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),hn.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};function gn(e){return dn.isPlainObject(e)||dn.isArray(e)}function mn(e){return dn.endsWith(e,"[]")?e.slice(0,-2):e}function vn(e,t,r){return e?e.concat(t).map((function(e,t){return e=mn(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const yn=dn.toFlatObject(dn,{},null,(function(e){return/^is[A-Z]/.test(e)}));function _n(e,t,r){if(!dn.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=dn.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!dn.isUndefined(t[e])}));const n=r.metaTokens,s=r.visitor||c,i=r.dots,o=r.indexes,a=(r.Blob||typeof Blob<"u"&&Blob)&&dn.isSpecCompliantForm(t);if(!dn.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(dn.isDate(e))return e.toISOString();if(!a&&dn.isBlob(e))throw new hn("Blob is not supported. Use a Buffer instead.");return dn.isArrayBuffer(e)||dn.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,s){let a=e;if(e&&!s&&"object"==typeof e)if(dn.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(dn.isArray(e)&&function(e){return dn.isArray(e)&&!e.some(gn)}(e)||(dn.isFileList(e)||dn.endsWith(r,"[]"))&&(a=dn.toArray(e)))return r=mn(r),a.forEach((function(e,n){!dn.isUndefined(e)&&null!==e&&t.append(!0===o?vn([r],n,i):null===o?r:r+"[]",l(e))})),!1;return!!gn(e)||(t.append(vn(s,r,i),l(e)),!1)}const u=[],d=Object.assign(yn,{defaultVisitor:c,convertValue:l,isVisitable:gn});if(!dn.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!dn.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),dn.forEach(r,(function(r,i){!0===(!(dn.isUndefined(r)||null===r)&&s.call(t,r,dn.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])})),u.pop()}}(e),t}function wn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function bn(e,t){this._pairs=[],e&&_n(e,this,t)}const Sn=bn.prototype;function An(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function En(e,t,r){if(!t)return e;const n=r&&r.encode||An;dn.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(i=s?s(t,r):dn.isURLSearchParams(t)?t.toString():new bn(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}Sn.append=function(e,t){this._pairs.push([e,t])},Sn.toString=function(e){const t=e?function(t){return e.call(this,t,wn)}:wn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class In{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){dn.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const kn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},On={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:bn,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Tn=typeof window<"u"&&typeof document<"u",Cn="object"==typeof navigator&&navigator||void 0,xn=Tn&&(!Cn||["ReactNative","NativeScript","NS"].indexOf(Cn.product)<0),Rn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,jn=Tn&&window.location.href||"http://localhost",Pn={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Tn,hasStandardBrowserEnv:xn,hasStandardBrowserWebWorkerEnv:Rn,navigator:Cn,origin:jn},Symbol.toStringTag,{value:"Module"})),...On};function Dn(e){function t(e,r,n,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;return i=!i&&dn.isArray(n)?n.length:i,a?(dn.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!o):((!n[i]||!dn.isObject(n[i]))&&(n[i]=[]),t(e,r,n[i],s)&&dn.isArray(n[i])&&(n[i]=function(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}(n[i])),!o)}if(dn.isFormData(e)&&dn.isFunction(e.entries)){const r={};return dn.forEachEntry(e,((e,n)=>{t(function(e){return dn.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null}const Un={transitional:kn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,s=dn.isObject(e);if(s&&dn.isHTMLForm(e)&&(e=new FormData(e)),dn.isFormData(e))return n?JSON.stringify(Dn(e)):e;if(dn.isArrayBuffer(e)||dn.isBuffer(e)||dn.isStream(e)||dn.isFile(e)||dn.isBlob(e)||dn.isReadableStream(e))return e;if(dn.isArrayBufferView(e))return e.buffer;if(dn.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return _n(e,new Pn.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Pn.isNode&&dn.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=dn.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return _n(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,r){if(dn.isString(e))try{return(t||JSON.parse)(e),dn.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Un.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(dn.isResponse(e)||dn.isReadableStream(e))return e;if(e&&dn.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(r)throw"SyntaxError"===e.name?hn.from(e,hn.ERR_BAD_RESPONSE,this,null,this.response):e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pn.classes.FormData,Blob:Pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};dn.forEach(["delete","get","head","post","put","patch"],(e=>{Un.headers[e]={}}));const Ln=dn.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nn=Symbol("internals");function $n(e){return e&&String(e).trim().toLowerCase()}function Mn(e){return!1===e||null==e?e:dn.isArray(e)?e.map(Mn):String(e)}function Fn(e,t,r,n,s){if(dn.isFunction(n))return n.call(this,t,r);if(s&&(t=r),dn.isString(t)){if(dn.isString(n))return-1!==t.indexOf(n);if(dn.isRegExp(n))return n.test(t)}}let Bn=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function s(e,t,r){const s=$n(t);if(!s)throw new Error("header name must be a non-empty string");const i=dn.findKey(n,s);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=Mn(e))}const i=(e,t)=>dn.forEach(e,((e,r)=>s(e,r,t)));if(dn.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(dn.isString(e)&&(e=e.trim())&&!(e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))(e))i((e=>{const t={};let r,n,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!(!r||t[r]&&Ln[r])&&("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(dn.isObject(e)&&dn.isIterable(e)){let r,n,s={};for(const t of e){if(!dn.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(r=s[n])?dn.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,r);return this}get(e,t){if(e=$n(e)){const r=dn.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(dn.isFunction(t))return t.call(this,e,r);if(dn.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$n(e)){const r=dn.findKey(this,e);return!(!r||void 0===this[r]||t&&!Fn(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function s(e){if(e=$n(e)){const s=dn.findKey(r,e);s&&(!t||Fn(0,r[s],s,t))&&(delete r[s],n=!0)}}return dn.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const s=t[r];(!e||Fn(0,this[s],s,e,!0))&&(delete this[s],n=!0)}return n}normalize(e){const t=this,r={};return dn.forEach(this,((n,s)=>{const i=dn.findKey(r,s);if(i)return t[i]=Mn(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(s):String(s).trim();o!==s&&delete t[s],t[o]=Mn(n),r[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return dn.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&dn.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach((e=>r.set(e))),r}static accessor(e){const t=(this[Nn]=this[Nn]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=$n(e);t[n]||(function(e,t){const r=dn.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,s){return this[n].call(this,t,e,r,s)},configurable:!0})}))}(r,e),t[n]=!0)}return dn.isArray(e)?e.forEach(n):n(e),this}};function qn(e,t){const r=this||Un,n=t||r,s=Bn.from(n.headers);let i=n.data;return dn.forEach(e,(function(e){i=e.call(r,i,s.normalize(),t?t.status:void 0)})),s.normalize(),i}function zn(e){return!(!e||!e.__CANCEL__)}function Vn(e,t,r){hn.call(this,e??"canceled",hn.ERR_CANCELED,t,r),this.name="CanceledError"}function Wn(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new hn("Request failed with status code "+r.status,[hn.ERR_BAD_REQUEST,hn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}Bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),dn.reduceDescriptors(Bn.prototype,(({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}})),dn.freezeMethods(Bn),dn.inherits(Vn,hn,{__CANCEL__:!0});const Gn=(e,t,r=3)=>{let n=0;const s=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[o];s||(s=l),r[i]=a,n[i]=l;let u=o,d=0;for(;u!==i;)d+=r[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,s=0,i=1e3/t;const o=(t,i=Date.now())=>{s=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-s;a>=i?o(e,t):(r=e,n||(n=setTimeout((()=>{n=null,o(r)}),i-a)))},()=>r&&o(r)]}((r=>{const i=r.loaded,o=r.lengthComputable?r.total:void 0,a=i-n,l=s(a);n=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),r)},Hn=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Jn=e=>(...t)=>dn.asap((()=>e(...t))),Kn=Pn.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Pn.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Pn.origin),Pn.navigator&&/(msie|trident)/i.test(Pn.navigator.userAgent)):()=>!0,Yn=Pn.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];dn.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),dn.isString(n)&&o.push("path="+n),dn.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Zn(e,t,r){let n=!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Xn=e=>e instanceof Bn?{...e}:e;function Qn(e,t){t=t||{};const r={};function n(e,t,r,n){return dn.isPlainObject(e)&&dn.isPlainObject(t)?dn.merge.call({caseless:n},e,t):dn.isPlainObject(t)?dn.merge({},t):dn.isArray(t)?t.slice():t}function s(e,t,r,s){return dn.isUndefined(t)?dn.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function i(e,t){if(!dn.isUndefined(t))return n(void 0,t)}function o(e,t){return dn.isUndefined(t)?dn.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,s,i){return i in t?n(r,s):i in e?n(void 0,r):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,r)=>s(Xn(e),Xn(t),0,!0)};return dn.forEach(Object.keys(Object.assign({},e,t)),(function(n){const i=l[n]||s,o=i(e[n],t[n],n);dn.isUndefined(o)&&i!==a||(r[n]=o)})),r}const es=e=>{const t=Qn({},e);let r,{data:n,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=Bn.from(a),t.url=En(Zn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),dn.isFormData(n))if(Pn.hasStandardBrowserEnv||Pn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(r=a.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Pn.hasStandardBrowserEnv&&(s&&dn.isFunction(s)&&(s=s(t)),s||!1!==s&&Kn(t.url))){const e=i&&o&&Yn.read(o);e&&a.set(i,e)}return t},ts=typeof XMLHttpRequest<"u"&&function(e){return new Promise((function(t,r){const n=es(e);let s=n.data;const i=Bn.from(n.headers).normalize();let o,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let g=new XMLHttpRequest;function m(){if(!g)return;const n=Bn.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Wn((function(e){t(e),f()}),(function(e){r(e),f()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){!g||4!==g.readyState||0===g.status&&(!g.responseURL||0!==g.responseURL.indexOf("file:"))||setTimeout(m)},g.onabort=function(){g&&(r(new hn("Request aborted",hn.ECONNABORTED,e,g)),g=null)},g.onerror=function(){r(new hn("Network Error",hn.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||kn;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new hn(t,s.clarifyTimeoutError?hn.ETIMEDOUT:hn.ECONNABORTED,e,g)),g=null},void 0===s&&i.setContentType(null),"setRequestHeader"in g&&dn.forEach(i.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),dn.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),d&&"json"!==d&&(g.responseType=n.responseType),p&&([l,u]=Gn(p,!0),g.addEventListener("progress",l)),h&&g.upload&&([a,c]=Gn(h),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{g&&(r(!t||t.type?new Vn(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);v&&-1===Pn.protocols.indexOf(v)?r(new hn("Unsupported protocol "+v+":",hn.ERR_BAD_REQUEST,e)):g.send(s||null)}))},rs=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const s=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof hn?t:new Vn(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,s(new hn(`timeout ${t} of ms exceeded`,hn.ETIMEDOUT))}),t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:a}=n;return a.unsubscribe=()=>dn.asap(o),a}},ns=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,s=0;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},ss=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},is=(e,t,r,n)=>{const s=async function*(e,t){for await(const r of ss(e))yield*ns(r,t)}(e,t);let i,o=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return a(),void e.close();let i=n.byteLength;if(r){let e=o+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(e){throw a(e),e}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},os="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,as=os&&"function"==typeof ReadableStream,ls=os&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),cs=(e,...t)=>{try{return!!e(...t)}catch{return!1}},us=as&&cs((()=>{let e=!1;const t=new Request(Pn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ds=as&&cs((()=>dn.isReadableStream(new Response("").body))),hs={stream:ds&&(e=>e.body)};os&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach((t=>{!hs[t]&&(hs[t]=dn.isFunction(e[t])?e=>e[t]():(e,r)=>{throw new hn(`Response type '${t}' is not supported`,hn.ERR_NOT_SUPPORT,r)})}))})(new Response);const ps=async(e,t)=>dn.toFiniteNumber(e.getContentLength())??(async e=>null==e?0:dn.isBlob(e)?e.size:dn.isSpecCompliantForm(e)?(await new Request(Pn.origin,{method:"POST",body:e}).arrayBuffer()).byteLength:dn.isArrayBufferView(e)||dn.isArrayBuffer(e)?e.byteLength:(dn.isURLSearchParams(e)&&(e+=""),dn.isString(e)?(await ls(e)).byteLength:void 0))(t),fs=os&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=es(e);c=c?(c+"").toLowerCase():"text";let p,f=rs([s,i&&i.toAbortSignal()],o);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(l&&us&&"get"!==r&&"head"!==r&&0!==(m=await ps(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(dn.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){const[e,t]=Hn(m,Gn(Jn(l)));n=is(r.body,65536,e,t)}}dn.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:s?d:void 0});let i=await fetch(p);const o=ds&&("stream"===c||"response"===c);if(ds&&(a||o&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=dn.toFiniteNumber(i.headers.get("content-length")),[r,n]=a&&Hn(t,Gn(Jn(a),!0))||[];i=new Response(is(i.body,65536,r,(()=>{n&&n(),g&&g()})),e)}c=c||"text";let v=await hs[dn.findKey(hs,c)||"text"](i,e);return!o&&g&&g(),await new Promise(((t,r)=>{Wn(t,r,{data:v,headers:Bn.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(t){throw g&&g(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message)?Object.assign(new hn("Network Error",hn.ERR_NETWORK,e,p),{cause:t.cause||t}):hn.from(t,t&&t.code,e,p)}}),gs={http:null,xhr:ts,fetch:fs};dn.forEach(gs,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}}));const ms=e=>`- ${e}`,vs=e=>dn.isFunction(e)||null===e||!1===e,ys=e=>{e=dn.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!vs(r)&&(n=gs[(t=String(r)).toLowerCase()],void 0===n))throw new hn(`Unknown adapter '${t}'`);if(n)break;s[t||"#"+i]=n}if(!n){const e=Object.entries(s).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new hn("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(ms).join("\n"):" "+ms(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function _s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Vn(null,e)}function ws(e){return _s(e),e.headers=Bn.from(e.headers),e.data=qn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ys(e.adapter||Un.adapter)(e).then((function(t){return _s(e),t.data=qn.call(e,e.transformResponse,t),t.headers=Bn.from(t.headers),t}),(function(t){return zn(t)||(_s(e),t&&t.response&&(t.response.data=qn.call(e,e.transformResponse,t.response),t.response.headers=Bn.from(t.response.headers))),Promise.reject(t)}))}const bs="1.9.0",Ss={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ss[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const As={};Ss.transitional=function(e,t,r){function n(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,s,i)=>{if(!1===e)throw new hn(n(s," has been removed"+(t?" in "+t:"")),hn.ERR_DEPRECATED);return t&&!As[s]&&(As[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,s,i)}},Ss.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const Es={assertOptions:function(e,t,r){if("object"!=typeof e)throw new hn("options must be an object",hn.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const t=e[i],r=void 0===t||o(t,i,e);if(!0!==r)throw new hn("option "+i+" must be "+r,hn.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new hn("Unknown option "+i,hn.ERR_BAD_OPTION)}},validators:Ss},Is=Es.validators;let ks=class{constructor(e){this.defaults=e||{},this.interceptors={request:new In,response:new In}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const r=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?r&&!String(e.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+r):e.stack=r}catch{}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Qn(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:s}=t;void 0!==r&&Es.assertOptions(r,{silentJSONParsing:Is.transitional(Is.boolean),forcedJSONParsing:Is.transitional(Is.boolean),clarifyTimeoutError:Is.transitional(Is.boolean)},!1),null!=n&&(dn.isFunction(n)?t.paramsSerializer={serialize:n}:Es.assertOptions(n,{encode:Is.function,serialize:Is.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Es.assertOptions(t,{baseUrl:Is.spelling("baseURL"),withXsrfToken:Is.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&dn.merge(s.common,s[t.method]);s&&dn.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=Bn.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let c,u,d=0;if(!a){const e=[ws.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(e){t.call(this,e);break}}try{c=ws.call(this,h)}catch(e){return Promise.reject(e)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return En(Zn((e=Qn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};dn.forEach(["delete","get","head","options"],(function(e){ks.prototype[e]=function(t,r){return this.request(Qn(r||{},{method:e,url:t,data:(r||{}).data}))}})),dn.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,s){return this.request(Qn(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ks.prototype[e]=t(),ks.prototype[e+"Form"]=t(!0)}));const Os={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Os).forEach((([e,t])=>{Os[t]=e}));const Ts=function e(t){const r=new ks(t),n=Or(ks.prototype.request,r);return dn.extend(n,ks.prototype,r,{allOwnKeys:!0}),dn.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Qn(t,r))},n}(Un);Ts.Axios=ks,Ts.CanceledError=Vn,Ts.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,s){r.reason||(r.reason=new Vn(e,n,s),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e((function(e){t=e})),cancel:t}}},Ts.isCancel=zn,Ts.VERSION=bs,Ts.toFormData=_n,Ts.AxiosError=hn,Ts.Cancel=Ts.CanceledError,Ts.all=function(e){return Promise.all(e)},Ts.spread=function(e){return function(t){return e.apply(null,t)}},Ts.isAxiosError=function(e){return dn.isObject(e)&&!0===e.isAxiosError},Ts.mergeConfig=Qn,Ts.AxiosHeaders=Bn,Ts.formToJSON=e=>Dn(dn.isHTMLForm(e)?new FormData(e):e),Ts.getAdapter=ys,Ts.HttpStatusCode=Os,Ts.default=Ts;const{Axios:Cs,AxiosError:xs,CanceledError:Rs,isCancel:js,CancelToken:Ps,VERSION:Ds,all:Us,Cancel:Ls,isAxiosError:Ns,spread:$s,toFormData:Ms,AxiosHeaders:Fs,HttpStatusCode:Bs,formToJSON:qs,getAdapter:zs,mergeConfig:Vs}=Ts,Ws=class e{constructor(){return rr(this,"cache",[]),rr(this,"set",((e,t,r)=>{this.recordExists(e,r)||this.cache.push({url:e,body:r,result:t})})),rr(this,"get",((e,t)=>{const r=this.cache.find((r=>null!=t?r.url===e&&r.body===t:r.url===e));return null!=r?r.result:null})),rr(this,"recordExists",((e,t)=>null!=this.get(e,t))),null!=e.instance?e.instance:(e.instance=this,this)}};rr(Ws,"instance");let Gs=Ws;class Hs{constructor(e){rr(this,"getToken"),rr(this,"cache",new Gs),rr(this,"getData",(async e=>{if(this.cache.recordExists(e))return this.cache.get(e);try{const t=await this.getToken(),r=await Ts.get(e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return this.cache.set(e,r),r}catch(t){return console.error(`API call '${e}' fails with exception:`,t),null}})),this.getToken=e}}const Js=class e extends Hs{constructor(){super(...arguments),rr(this,"dataManagementBaseUrl","https://developer.api.autodesk.com/data/v1"),rr(this,"getUser",(async()=>{try{const e=await this.getData("https://api.userprofile.autodesk.com/userinfo");return null==e?void 0:e.data}catch{return null}})),rr(this,"getHubs",(async()=>{var e;const t=await this.getData("https://developer.api.autodesk.com/project/v1/hubs");return(null==(e=null==t?void 0:t.data)?void 0:e.data)??[]})),rr(this,"getHubRegion",(async t=>{var r;const n=(await this.getHubs()).find((e=>e.id===t));return(null==(r=null==n?void 0:n.attributes)?void 0:r.region)??e.DEFAULT_REGION})),rr(this,"getProjects",(async e=>{var t;const r=`https://developer.api.autodesk.com/project/v1/hubs/${e}/projects`,n=await this.getData(r);return(null==(t=null==n?void 0:n.data)?void 0:t.data)??[]})),rr(this,"getBIMDocument",(async({projectId:e,itemId:t,versionId:r})=>{if(void 0!==t){const r=await this.getLatestVersion(e,t);if(this.isBIMDocumentDeleted(r))throw new Error("Document is deleted");return r}if(void 0!==r){const t=await this.getVersion(e,r);if(this.isBIMDocumentDeleted(t))throw new Error("Document is deleted");return t}throw new Error("Invalid parameters")})),rr(this,"getProject",(async(e,t)=>{var r;const n=`https://developer.api.autodesk.com/project/v1/hubs/${e}/projects/${t}`,s=await this.getData(n);return null==(r=null==s?void 0:s.data)?void 0:r.data})),rr(this,"isBIMDocumentDeleted",(e=>{var t,r;const n=null==(r=null==(t=null==e?void 0:e.attributes)?void 0:t.extension)?void 0:r.type;return(null==n?void 0:n.length)>0&&n.endsWith("Deleted")})),rr(this,"getItemVersions",(async(e,t)=>{var r;const n=await this.getData(`${this.dataManagementBaseUrl}/projects/${e}/items/${encodeURIComponent(t)}/versions`);return(null==(r=null==n?void 0:n.data)?void 0:r.data)??[]})),rr(this,"getLatestVersion",(async(e,t)=>{var r,n,s;const i=await this.getItemTipVersion(e,t);if(!1===(null==(s=null==(n=null==(r=null==i?void 0:i.attributes)?void 0:r.extension)?void 0:n.type)?void 0:s.includes("Deleted")))return i;const o=await this.getItemVersions(e,t);return null==o||o.sort(((e,t)=>{var r,n;return(null==(r=null==t?void 0:t.attributes)?void 0:r.versionNumber)-(null==(n=null==e?void 0:e.attributes)?void 0:n.versionNumber)})),null==o?void 0:o.find((e=>{var t,r,n;return!(null!=(n=null==(r=null==(t=null==e?void 0:e.attributes)?void 0:t.extension)?void 0:r.type)&&n.includes("Deleted"))}))})),rr(this,"getItemTipVersion",(async(e,t)=>{var r;const n=await this.getData(`${this.dataManagementBaseUrl}/projects/${e}/items/${encodeURIComponent(t)}/tip`);return null==(r=null==n?void 0:n.data)?void 0:r.data})),rr(this,"getItem",(async(e,t)=>{var r,n;const s=`${this.dataManagementBaseUrl}/projects/${e}/items/${encodeURIComponent(t)}`;return null==(n=null==(r=await this.getData(s))?void 0:r.data)?void 0:n.data})),rr(this,"getVersion",(async(e,t)=>{var r;const n=await this.getData(`${this.dataManagementBaseUrl}/projects/${e}/versions/${encodeURIComponent(t)}`);return null==(r=null==n?void 0:n.data)?void 0:r.data})),rr(this,"searchFolder",(async(e,t,r)=>{var n,s,i,o,a,l,c,u,d;let h=null,p=[];const f=this.buildFilter(r);if(0===f.length)return[];let g=`${this.dataManagementBaseUrl}/projects/${e}/folders/${t}/search?${f}`;do{null!=(null==(i=null==(s=null==(n=null==h?void 0:h.data)?void 0:n.links)?void 0:s.next)?void 0:i.href)&&(g=h.data.links.next.href),h=await this.getData(g);const e=null==(a=null==(o=null==h?void 0:h.data)?void 0:o.data)?void 0:a.length;void 0!==e&&e>0&&(p=p.concat((null==(l=null==h?void 0:h.data)?void 0:l.data)??[]))}while(null!=(null==(d=null==(u=null==(c=null==h?void 0:h.data)?void 0:c.links)?void 0:u.next)?void 0:d.href));return p})),rr(this,"buildFilter",(e=>{if(""===e||"function"!=typeof(null==e?void 0:e.toString))return"";const t=e.toString(),r=[t];t.toLocaleLowerCase()!==t&&r.push(t.toLocaleLowerCase()),t.toLocaleUpperCase()!==t&&r.push(t.toLocaleUpperCase()),this.capitalizeFirstLetter(t)!==t&&r.push(this.capitalizeFirstLetter(t));const n=r.reduce(((e,t)=>`${e}filter[attributes.displayName]-contains=${t}&`),"");return n.substring(0,n.length-1)})),rr(this,"capitalizeFirstLetter",(e=>{if(0===e.length)return"";const t=e.codePointAt(0);if(null==t)return"";const r=t>65535?2:1;return String.fromCodePoint(t).toUpperCase()+e.slice(r)})),rr(this,"getForgeData",(async e=>{var t,r,n;const s=[];if(e.length>0)for(let i=0;i<e.length;i++)try{let o=e[i];for(;null!=o;){const e=await this.getData(o);o=null==(n=null==(r=null==(t=e.data)?void 0:t.links)?void 0:r.next)?void 0:n.href,s.push(e)}}catch(e){return console.warn(e),null}else try{const e=await this.getData("https://developer.api.autodesk.com/project/v1/hubs");s.push(e)}catch(e){return console.warn(e),null}return s}))}};rr(Js,"DEFAULT_REGION","US");let Ks=Js;var Ys=(e=>(e.HUBS="hubs",e.PROJECTS="projects",e.FOLDERS="folders",e.ITEMS="items",e.MODEL_SETS="model-set",e.VERSIONS="versions",e.MODEL_SET_VERSION="model-set-version",e))(Ys||{});class Zs{constructor(e){rr(this,"baseUrl","https://developer.api.autodesk.com/modelderivative/v2"),rr(this,"getToken"),rr(this,"getFormats",(async()=>{const e=await this.getToken(),t=`${this.baseUrl}/designdata/formats`,r=await Ts.get(t,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}});return null==r?void 0:r.data})),this.getToken=e}}class Xs{constructor(e,t){rr(this,"_filter",""),rr(this,"parentAPS"),rr(this,"dataManagement"),rr(this,"root",null),rr(this,"search",(async(e,t)=>{if(0===t.length)return e;if(null!=this.root&&t===this._filter)return this.root;this._filter=t;const r=JSON.parse(JSON.stringify(e)),n=r.item;return n.type===Ys.HUBS?await this.searchHub(r,t):n.type===Ys.PROJECTS?await this.searchProject(r,t):console.warn("Search root item is not a hub or project"),this.pruneNodes(null,r),r})),rr(this,"searchHub",(async(e,t)=>{null!=e.children&&await Promise.all(e.children.map((async r=>{r.children=null,await this.searchProject(r,t),(null==r.children||0===r.children.length)&&this.removeNode(e,r)})))})),rr(this,"searchProject",(async(e,t)=>{var r,n,s,i,o,a,l;await this.addProjectTopFolders(e);const c=e.item,u=null==(s=null==(n=null==(r=c.relationships)?void 0:r.rootFolder)?void 0:n.data)?void 0:s.id,d=await this.dataManagement.searchFolder(c.id,u,t);if(null==d||0===(null==d?void 0:d.length))return;const h=await this.filterInvalidSearchItems(d);for(let t=0;t<h.length;t++){const r=h[t],n=await this.createNode(r);if(null!=n&&null!=(null==(o=null==(i=r.links)?void 0:i.webView)?void 0:o.href)&&(null==(l=null==(a=r.links)?void 0:a.webView)?void 0:l.href.length)>0){const t=this.getParentFolderId(r.links.webView.href),s=`https://developer.api.autodesk.com/data/v1/projects/${c.id}/folders/${t}`;await this.buildParentFolders(e,n,s)}}})),rr(this,"pruneNodes",((e,t)=>{if(null==t.item)return;const r=t.item;if(r.type!==Ys.HUBS&&r.type!==Ys.PROJECTS&&r.type!==Ys.FOLDERS)return;if(null!=t.children)for(let e=t.children.length-1;e>=0;e--)this.pruneNodes(t,t.children[e]);let n=!1;r.type===Ys.FOLDERS&&(n=r.attributes.hidden),(r.type===Ys.PROJECTS||r.type===Ys.FOLDERS)&&(null==t.children||0===t.children.length||n)&&null!=e&&this.removeNode(e,t)})),rr(this,"filterInvalidSearchItems",(async e=>{const t=await this.parentAPS.getViewerFormats();return e.filter((e=>this.parentAPS.isValidViewerFormat(e,t)))})),rr(this,"removeNode",((e,t)=>{if(null!=e.children)for(let r=0;r<e.children.length;r++)if(e.children[r].id===t.id){e.children.splice(r,1);break}})),rr(this,"addProjectTopFolders",(async e=>{const t=e.item;if(null==t||null==t.relationships.rootFolder||null==t.relationships.topFolders)return;const r=await this.dataManagement.getForgeData([t.relationships.topFolders.links.related.href]);if(null!=r)for(let t=0;t<r.length;t++){const n=r[t];if(0!==n.data.data.length)for(let t=0;t<n.data.data.length;t++){const r=await this.createNode(n.data.data[t]);null!=r&&this.addChild(e,r)}}})),rr(this,"buildParentFolders",(async(e,t,r)=>{var n,s,i,o,a,l,c,u,d,h,p,f,g;if(null==r||0===r.length)return;const m=e.item,v=await this.dataManagement.getForgeData([r]);for(let r=0;r<v.length;r++){const y=v[r];if(null==(null==(n=null==y?void 0:y.data)?void 0:n.data)||(null==(o=null==(i=null==(s=m.relationships)?void 0:s.rootFolder)?void 0:i.data)?void 0:o.id)===y.data.data.id)return void this.addChild(e,t);const _=this.findNode(e,y.data.data.id);if(null!=_)return void this.addChild(_,t);const w=await this.createNode(y.data.data);if(null==w)return void this.addChild(e,t);if((null==(c=null==(l=null==(a=m.relationships)?void 0:a.rootFolder)?void 0:l.data)?void 0:c.id)===(null==(h=null==(d=null==(u=y.data.data.relationships)?void 0:u.parent)?void 0:d.data)?void 0:h.id))this.addChild(e,w);else{const t=null==(g=null==(f=null==(p=y.data.data.relationships)?void 0:p.parent)?void 0:f.data)?void 0:g.id,r=`https://developer.api.autodesk.com/data/v1/projects/${m.id}/folders/${t}`;await this.buildParentFolders(e,w,r)}this.addChild(w,t)}})),rr(this,"findNode",((e,t)=>{if(e.id===t)return e;if(null!=e.children&&e.children.length>0)for(let r=0;r<e.children.length;r++){const n=this.findNode(e.children[r],t);if(null!=n)return n}return null})),rr(this,"addChild",((e,t)=>{null==e.children?e.children=[t]:e.children.push(t)})),rr(this,"getParentFolderId",(e=>e.includes("docs.b360")?this.getBIM360ParentFolderId(e):this.getACCParentFolderId(e))),rr(this,"getBIM360ParentFolderId",(e=>{const t=e.split("/"),r=t.findIndex((e=>"folders"===e));return-1!==r?t[r+1]:""})),rr(this,"getACCParentFolderId",(e=>{const t=e.split("?");if(t.length<2)return"";const r=t[1].split("&").find((e=>e.toLocaleLowerCase().startsWith("folderurn"))),n=null!=r?r.split("="):[];return n.length>1?n[1]:""})),rr(this,"createNode",(async e=>await this.parentAPS.mapAPSItemToIRepositoryItem(e))),this.parentAPS=e,this.dataManagement=t}}class Qs{constructor(e){rr(this,"getRegionUrl",(e=>{var t;return null==(t=this.getRegionInfo(e))?void 0:t.regionUrl})),rr(this,"getDocumentsRoot",((e,t)=>{var r,n;return this.getValidatedUrl(null==(n=null==(r=this.getRegionInfo(e))?void 0:r[t])?void 0:n.documentsRoot)})),rr(this,"getProjectRoot",((e,t)=>{var r,n;return this.getValidatedUrl(null==(n=null==(r=this.getRegionInfo(e))?void 0:r[t])?void 0:n.projectRoot)})),rr(this,"getRegionInfo",(e=>{var t;return null==(t=this.regionsInfo)?void 0:t.regions[e]})),rr(this,"getValidatedUrl",(e=>{var t;return 0===(null==(t=null==e?void 0:e.trim())?void 0:t.length)?void 0:e})),this.regionsInfo=e}}const ei={US:{regionUrl:"",ACC:{documentsRoot:"https://acc.autodesk.com",projectRoot:"https://acc.autodesk.com"},BIM360:{documentsRoot:"https://docs.b360.autodesk.com",projectRoot:"https://insight.b360.autodesk.com"}},EMEA:{regionUrl:"/regions/eu",ACC:{documentsRoot:"https://acc.autodesk.eu",projectRoot:"https://acc.autodesk.eu"},BIM360:{documentsRoot:"https://docs.b360.eu.autodesk.com",projectRoot:"https://insight.b360.eu.autodesk.com"}},APAC:{regionUrl:"/regions/apac",ACC:{documentsRoot:"https://acc.apac.autodesk.com",projectRoot:"https://acc.apac.autodesk.com"},BIM360:{documentsRoot:"",projectRoot:""}},AUS:{regionUrl:"/regions/aus",ACC:{documentsRoot:"https://acc.aus.autodesk.com",projectRoot:"https://acc.aus.autodesk.com"},BIM360:{documentsRoot:"",projectRoot:""}}},ti={regions:ei},ri=Object.freeze(Object.defineProperty({__proto__:null,default:ti,regions:ei},Symbol.toStringTag,{value:"Module"})),ni=class e extends Hs{constructor(){super(...arguments),rr(this,"getApsIssueJson",(e=>{var t;return{id:e.id,title:e.title,displayId:e.displayId,description:e.description,status:e.status,published:e.published,target_urn:null==(t=e.linkedDocuments[0])?void 0:t.urn,issueSubtypeId:e.issueSubtypeId,issueTypeId:e.issueTypeId,createdAt:e.createdAt,updatedAt:e.updatedAt,locationDetails:e.locationDetails,dueDate:e.dueDate,rootCauseId:e.rootCauseId,ownerId:e.ownerId,linkedDocuments:e.linkedDocuments}}))}async getIssue(t,r){var n;const s=e.baseUrl+`/projects/${t}/issues/${r}`,i=null==(n=await this.getData(s))?void 0:n.data;return null!=i?this.getApsIssueJson(i):null}static async getIssueSourceURL(e,t,r,n){var s,i;const o=null==(s=t.sourceData)?void 0:s.id;if(void 0!==o){let s=`${r}/docs/issues/projects/${e}/issues?issueId=${o}`;if(void 0!==(null==(i=t.sourceData)?void 0:i.target_urn)&&void 0!==n){const t=n.replace(`${r}/docs/files/projects/${e}?`,"").split("&");s=`${r}/docs/files/projects/${e}?folderUrn=${t[0].replace("folderUrn=","")}&entityId=${t[1].replace("entityId=","")}&viewModel=detail&moduleId=folders&issueId=${o}`}return s}}};rr(ni,"baseUrl","https://developer.api.autodesk.com/construction/issues/v1");let si=ni;const ii=class e extends Hs{constructor(){super(...arguments),rr(this,"getApsIssueJson",(e=>{var t;return{id:e.id,title:e.title,displayId:e.displayId,description:e.description,status:e.status,target_urn:null==(t=e.linkedDocuments[0])?void 0:t.urn,issueSubtypeId:e.issueSubtypeId,issueTypeId:e.issueTypeId,createdAt:e.createdAt,updatedAt:e.updatedAt,locationDetails:e.locationDetails,dueDate:e.dueDate,rootCauseId:e.rootCauseId,ownerId:e.ownerId,linkedDocuments:e.linkedDocuments}}))}async getIssue(t,r){var n;const s=e.baseUrl+`/containers/${t}/issues/${r}`,i=null==(n=await this.getData(s))?void 0:n.data;return null!=i?this.getApsIssueJson(i):null}static async getIssueSourceURL(e,t,r,n){var s,i;const o=null==(s=t.sourceData)?void 0:s.id;if(void 0!==o){let s=`${r}/projects/${e}/issues/${o}`;const a=null==(i=t.sourceData)?void 0:i.target_urn;if(void 0!==a&&void 0!==n){s=`${r}/projects/${e}/folders/${n.replace(`${r}/projects/${e}/folders/`,"").split("/")[0]}/detail/viewer/items/${a}/issues/${o}`}return s}}};rr(ii,"baseUrl","https://developer.api.autodesk.com/issues/v2");let oi=ii;const ai=class e extends Hs{constructor(t){super(t),rr(this,"issuesACC"),rr(this,"issuesBIM360"),rr(this,"getIssue",(async(t,r)=>{var n,s,i;if(null==t)return null;const o=e.getProjectType(t),a=encodeURIComponent(r),l=t.id.replace("b.",""),c=null==(i=null==(s=null==(n=t.relationships)?void 0:n.issues)?void 0:s.data)?void 0:i.id;let u=null;switch(o){case"ACC":u=await this.issuesACC.getIssue(l,a);break;case"BIM360":u=await this.issuesBIM360.getIssue(c,a)}return null!==u?function(e,t){return{projectId:t,sourceType:"APS",sourceData:e}}(u,l):null})),this.issuesACC=new si(t),this.issuesBIM360=new oi(t)}static isAPSIssue(t){return t.sourceType===e.ISSUE_SOURCE_TYPE}async getIssueSourceURL(t,r,n,s){var i;const o=e.getProjectType(t),a=null==(i=t.id)?void 0:i.replace("b.","");switch(o){case"ACC":return await si.getIssueSourceURL(a,r,n,s);case"BIM360":return await oi.getIssueSourceURL(a,r,n,s)}}};rr(ai,"ISSUE_SOURCE_TYPE","APS"),rr(ai,"getProjectType",(e=>{var t,r,n;return null==(n=null==(r=null==(t=null==e?void 0:e.attributes)?void 0:t.extension)?void 0:r.data)?void 0:n.projectType}));let li=ai;const ci=e=>/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/.test(e),ui=e=>{if("string"==typeof e)try{return decodeURIComponent(e)}catch{}return e};class di{constructor(e,t){rr(this,"id"),this.urn=e,this.source=t;const r=null==e?void 0:e.trim(),n=ci(r)?window.atob(r):r;this.urn=n;const s=null==n?void 0:n.split(/:|\./);this.id=s.length>0?s[s.length-1]:n}static fromUrn(e){return new di(e,e)}static fromUrl(e){return e.includes("docs.b360")?di.getItemIdFromB360Url(e):e.includes("acc.autodesk")?di.getItemIdFromACCUrl(e):e.includes("api.autodesk")?di.getItemIdFromDataManagementUrl(e):null}static getItemIdFromB360Url(e){return di.getItemIdFromUrl(e,"/","items")}static getItemIdFromACCUrl(e){return di.getItemIdFromUrl(e,"=","entityId")}static getItemIdFromDataManagementUrl(e){return di.getItemIdFromUrl(e,"/","versions")}static getItemIdFromUrl(e,t,r){const n=e.split(t),s=n.findIndex((e=>e.includes(r)));if(s>-1){let t=n[s+1];return t=(null==t?void 0:t.split(/\?|&/))[0],new di(t,e)}return null}}const hi=class e{constructor(e,t){rr(this,"tokenInfo"),rr(this,"dataManagement"),rr(this,"derivatives"),rr(this,"issues"),rr(this,"search"),rr(this,"regions"),rr(this,"bimAccounts"),rr(this,"accountFilter"),rr(this,"supportedViewerFormats"),rr(this,"getProviderName",(()=>"Autodesk")),rr(this,"setToken",(e=>{this.tokenInfo=e})),rr(this,"getToken",(async()=>{const e=this.tokenInfo.access_token??await this.tokenInfo.getToken();if(null===e)throw new Error("Invalid Token: token is null");return e})),rr(this,"getUser",(async()=>{const e=await this.dataManagement.getUser();return`${null==e?void 0:e.name}`})),rr(this,"checkPermissions",(async e=>void 0!==e.url&&e.url.length>0)),rr(this,"setAccountFilter",(e=>{this.accountFilter=e})),rr(this,"getDocument",(async e=>{const t=e,r=t.projectId,n=t.itemId.replace("urn:","").replace("_","/"),s=ci(n)?window.atob(n):t.itemId,i=s.split("?")[0].replace("fs.file:vf.","dm.lineage:"),o=s.length>1?s.split("?")[1]:void 0,a=await this.getDocumentWithAttributes({projectId:r,itemId:i,versionId:o});return null===a?null:await this.validateAndFilterDocument(a)})),rr(this,"getDocumentItem",(async e=>{const t=this.getProjectIdFromItemUrl(e.links.self.href),r=await this.getAttributes(t,e.attributes),n={displayName:(null==r?void 0:r.displayName)??"",fileName:(null==r?void 0:r.name)??"",url:e.links.self.href,attributes:r};return await this.validateAndFilterDocument(n)})),rr(this,"validateAndFilterDocument",(async e=>{if(!this.isValidDocument(e))return null;const t=this.accountFilter;if(null==t)return e;const r=await this.filterDocuments([e],t);return null===r||0===r.length?null:r[0]})),rr(this,"getDocumentByUrl",(async e=>(await this.runViewerUrlRule({viewerUrl:e}))[0])),rr(this,"getDocumentByRule",(async(e,t)=>{const r=this.accountFilter;let n=[];if(e===dr.BIMDocument){const e=t;n=await this.runBIMDocumentRule(e)}else if(e===dr.ViewerUrl){const e=t;n=await this.runViewerUrlRule(e)}else{if(e!==dr.DocumentName)throw dr.ScheduleFeature,new Error(`Rule ${e} not supported`);{if(null==r)throw new Error("geobimAccounts is required for DocumentName rule");const e=t,s=await this.getFilteredAccounts(r);null!==s&&(n=await this.runDocumentNameRule(e,s))}}return null==r?n:await this.filterDocuments(n,r)??[]})),rr(this,"searchRepository",(async(e,t)=>await this.search.search(e,t))),rr(this,"mapAPSItemToIRepositoryItem",(async e=>{if(e.type===Ys.ITEMS||e.type===Ys.VERSIONS){const t=await this.getDocumentItem(e);return{id:e.id,label:(null==t?void 0:t.displayName)??"",document:t,item:null,children:null}}return{id:e.id,label:e.attributes.name,document:null,item:e,children:null}})),rr(this,"getIssue",(async(e,t)=>{const r=await this.getBimAccount(e),n=null==r?void 0:r.id;if(void 0!==n){const r=await this.dataManagement.getProject(n,e),s=await this.issues.getIssue(r,t);return null!==s&&(s.sourceUrl=await this.getIssueSourceUrl(r,n,s)),s}return null})),rr(this,"isDocumentIssue",((e,t)=>{const r=t.url;if(void 0!==r){const t=di.fromUrl(ui(r)),n=di.fromUrn(e);if(null!==t)return t.id===n.id}return!1})),rr(this,"isValidDocument",(e=>{var t,r;if(null===e)return!1;const n=null==(t=e.attributes)?void 0:t.accountName,s=null==(r=e.attributes)?void 0:r.projectName;return null!=n&&(null==n?void 0:n.length)>0&&null!=s&&(null==s?void 0:s.length)>0})),rr(this,"getAllAccounts",(async()=>{var e;if(void 0!==this.bimAccounts)return this.bimAccounts;const t={},r=(await this.dataManagement.getHubs()).filter((e=>{var t,r;return"hubs:autodesk.bim360:Account"===(null==(r=null==(t=e.attributes)?void 0:t.extension)?void 0:r.type)}));for(const n of r)if(void 0!==n.id){const r=(await this.dataManagement.getProjects(n.id)).map((e=>({id:e.id,name:e.attributes.name})));t[n.id]={id:n.id,projects:r,name:null==(e=n.attributes)?void 0:e.name}}return this.bimAccounts=t,this.bimAccounts})),rr(this,"checkAccountAccess",(async e=>{const t=await this.getAllAccounts();return Object.keys(t).some((t=>t===e.accountId))})),rr(this,"getFilteredAccounts",(async e=>{var t;if(null==e)return{};if(!await this.checkAccountAccess(e))return null;const r={},n=await this.getAllAccounts(),s=e;if(null!=s.projectIds&&s.projectIds.length>0){const e=null==(t=Object.values(n[s.accountId].projects))?void 0:t.filter((e=>{var t;return null==(t=s.projectIds)?void 0:t.includes(e.id)}));r[s.accountId]={id:s.accountId,name:n[s.accountId].name,projects:e}}else r[s.accountId]=n[s.accountId];return r})),rr(this,"filterDocuments",(async(e,t)=>{const r=await this.getFilteredAccounts(t);return null===r?null:e.filter((e=>{var t,n;const s=null==(t=e.attributes)?void 0:t.accountName;if(null==s)return!1;const i=Object.values(r).find((e=>e.name===s));if(null==i)return!1;const o=null==(n=e.attributes)?void 0:n.projectName;return null!=o&&null!=i.projects.find((e=>e.name===o))}))})),rr(this,"runBIMDocumentRule",(async e=>{const t=[],r=e.projectId,n=e.itemId,s=await this.getDocumentWithAttributes({projectId:r,itemId:n});return null!==s&&this.isValidDocument(s)&&t.push(s),t})),rr(this,"runViewerUrlRule",(async e=>{const t=this.getProjectIdFromUrl(e.viewerUrl),r=this.getItemIdFromUrl(e.viewerUrl),n=await this.getDocumentWithAttributes({projectId:t,itemId:r});return null===n?[]:this.isValidDocument(n)?[n]:[]})),rr(this,"getProjectIdFromUrl",(e=>e.includes("docs.b360")?this.getProjectIdFromB360Url(e):e.includes("acc.autodesk")?this.getProjectIdFromACCUrl(e):"")),rr(this,"getProjectIdFromB360Url",(e=>{const t=e.split("/"),r=t.findIndex((e=>"projects"===e));return r>-1?`b.${t[r+1]}`:""})),rr(this,"getProjectIdFromACCUrl",(e=>{const t=e.split("/");return t.findIndex((e=>"projects"===e))>-1?"b."+t[6].split("?")[0]:""})),rr(this,"getItemIdFromUrl",(e=>e.includes("docs.b360")?this.getItemIdFromB360Url(e):e.includes("acc.autodesk")?this.getItemIdFromACCUrl(e):"")),rr(this,"getItemIdFromB360Url",(e=>{const t=e.split("/"),r=t.findIndex((e=>"items"===e));return r>-1?decodeURIComponent(t[r+1]):""})),rr(this,"getItemIdFromACCUrl",(e=>{const t=e.split("="),r=t.findIndex((e=>e.includes("entityId")));return r>-1?decodeURIComponent(t[r+1]):""})),rr(this,"runDocumentNameRule",(async(e,t)=>{const r=[],n=e.documentName;for(const e of Object.values(t))for(const t of e.projects){const s=await this.runDocumentNameRuleOnProject(e.id,t.id,n);r.push(...s)}return r})),rr(this,"runDocumentNameRuleOnProject",(async(e,t,r)=>{var n,s,i,o;const a=[],l=await this.dataManagement.getProject(e,t),c=null==(i=null==(s=null==(n=null==l?void 0:l.relationships)?void 0:n.rootFolder)?void 0:s.data)?void 0:i.id;if(null==c)return a;const u=await this.dataManagement.searchFolder(t,c,r.trim()),d=await this.getViewerFormats();for(const e of u){if(!this.isValidViewerFormat(e,d))continue;const r=await this.getAttributes(t,e.attributes);a.push({displayName:e.attributes.displayName,fileName:e.attributes.name,url:null==(o=e.links)?void 0:o.self.href,attributes:r})}return a})),rr(this,"getAttributes",(async(e,t)=>{if(null==t)return;const r=["name","displayName","versionNumber","createUserName"],n={accountName:"",projectName:""};Object.keys(t).forEach((e=>{r.includes(e)&&(n[e]=t[e].toString())}));const s=await this.getAllAccounts(),i=Object.values(s).find((t=>t.projects.some((t=>t.id===e))));null!=(null==i?void 0:i.name)&&(n.accountName=i.name);const o=null==i?void 0:i.projects.find((t=>t.id===e));return null!=(null==o?void 0:o.name)&&(n.projectName=o.name),n})),rr(this,"getRepositoryItems",(async e=>{if(null===e&&null!==this.accountFilter&&!await this.checkAccountAccess(this.accountFilter))return null;const t=this.getChildUrls(e),r=await this.dataManagement.getForgeData(t);if(null==r)return null;const n=[],s=this.accountFilter,i=await this.getViewerFormats();for(let e=0;e<r.length;e++){const t=r[e],o=[...t.data.data,...t.data.included??[]];for(let e=0;e<o.length;e++){const t=o[e];if((null==s||await this.filterResult(t,s,i))&&t.type!==Ys.ITEMS){const e=await this.mapAPSItemToIRepositoryItem(t);null!=e&&n.push(e)}}}return n})),rr(this,"getChildUrls",(e=>{const t=null==e?void 0:e.item;switch(null==t?void 0:t.type){case Ys.HUBS:return this.getHubChildUrls(t);case Ys.PROJECTS:return this.getProjectChildUrls(t);case Ys.FOLDERS:return this.getFolderChildUrls(t);default:return[]}})),rr(this,"getHubChildUrls",(e=>null==e.relationships.projects?[]:[e.relationships.projects.links.related.href])),rr(this,"getProjectChildUrls",(e=>null==e.relationships.topFolders?[]:[e.relationships.topFolders.links.related.href])),rr(this,"getFolderChildUrls",(e=>null==e.relationships.contents?[]:[e.relationships.contents.links.related.href])),rr(this,"getProjectIdFromItemUrl",(e=>{const t=e.split("/"),r=t.findIndex((e=>"projects"===e));return r>-1?t[r+1]:""})),rr(this,"filterResult",(async(e,t,r)=>{const n=await this.getFilteredAccounts(t);return null!==n&&(e.type===Ys.HUBS?null!=n[e.id]:e.type===Ys.PROJECTS?null!=Object.values(n).find((t=>null!=t.projects.find((t=>t.id===e.id)))):e.type!==Ys.ITEMS&&e.type!==Ys.VERSIONS||this.isValidViewerFormat(e,r))})),rr(this,"isValidViewerFormat",((e,t)=>{if(e.type!==Ys.ITEMS&&e.type!==Ys.VERSIONS)return!1;const r=this.getFileType(e);return null!=r&&t.some((e=>e.toLowerCase()===(null==r?void 0:r.toLowerCase())))})),rr(this,"getViewerFormats",(async()=>{var e;if(null!=this.supportedViewerFormats)return this.supportedViewerFormats;const t=await this.derivatives.getFormats(),r=(null==(e=null==t?void 0:t.formats)?void 0:e.svf2)??[];return this.supportedViewerFormats=r.concat(this.getForgeViewerAdditionalSupportedFormats().filter((e=>!r.includes(e)))),this.supportedViewerFormats})),rr(this,"getFileType",(e=>{var t,r;if(e.type===Ys.VERSIONS){const r=e;return null!=r.attributes.fileType?null==(t=r.attributes.fileType)?void 0:t.toLowerCase():null}return(null==(r=e.attributes.displayName.split(".").pop())?void 0:r.toLowerCase())??null})),rr(this,"getForgeViewerAdditionalSupportedFormats",(()=>["jpg","jpeg","png"])),rr(this,"getDocumentWithAttributes",(async e=>{const t=await this.dataManagement.getBIMDocument(e);if(null===(t??null))return null;const r=await this.getAttributes(e.projectId,t.attributes);return{displayName:t.attributes.displayName,fileName:t.attributes.name,url:t.links.self.href,attributes:r}})),this.setToken(e.tokenInfo),this.dataManagement=new Ks(this.getToken),this.derivatives=new Zs(this.getToken),this.issues=new li(this.getToken),this.search=new Xs(this,this.dataManagement),this.regions=new Qs(t),this.accountFilter=null}static async create(t){const r=await this.getApsRegionsInfo(t);return new e(t,r)}async getIssueSourceUrl(e,t,r){var n,s,i;const{projectType:o}=e.attributes.extension.data,a=await this.dataManagement.getHubRegion(t),l=this.regions.getDocumentsRoot(a,o);if(void 0===l)return;const c=null==(n=null==r?void 0:r.sourceData)?void 0:n.linkedDocuments;if(void 0!==c&&c.length>0){const t=c[0].urn;if(void 0!==t){const n=await this.dataManagement.getItem(e.id,t),o=null==(i=null==(s=null==n?void 0:n.links)?void 0:s.webView)?void 0:i.href;if(void 0!==o)return await this.issues.getIssueSourceURL(e,r,l,ui(o))}}}async getBimAccount(e){const t=this.accountFilter;if(null!==t){const r=await this.getFilteredAccounts(t);return null===r?void 0:Object.values(r).find((t=>null!=t.projects.find((t=>t.id===e))))}}};rr(hi,"getApsRegionsInfo",(async e=>{const t=e.apsRegionsInfoUrl;if(null!==t){const e=await hi.getApsRegionsInfoFromPortal(t);if(null!==e)return e}return ri})),rr(hi,"getApsRegionsInfoFromPortal",(async e=>{try{const t=await fetch(e);if(null!=t&&t.ok)return await t.text()}catch(e){console.error("Unable to fetch APS regions config so using default regions config.",e)}return null}));let pi=hi;var fi=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class gi{constructor(e){if(this._documentCoreService=null,this._documentCoreService=e,null===this._documentCoreService)throw new Error("LinkCoreService is null!")}getDocument(e){return fi(this,void 0,void 0,(function*(){return yield this._documentCoreService.getDocument(e)}))}getRepositoryItems(e){return fi(this,void 0,void 0,(function*(){return yield this._documentCoreService.getRepositoryItems(e)}))}searchRepository(e,t){return fi(this,void 0,void 0,(function*(){return yield this._documentCoreService.searchRepository(e,t)}))}}var mi,vi,yi=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.FeatureLayer="feature",e.MapImageLayer="map-image",e.TileLayer="tile",e.GroupLayer="group",e.SceneLayer="scene",e.ImageryLayer="imagery",e.ImageryTileLayer="imagery-tile",e.ElevationLayer="elevation",e.OrientedImageryLayer="oriented-imagery",e.VectorTileLayer="vector-tile",e.KMLLayer="kml",e.CSVLayer="csv",e.GeoJSONLayer="geojson",e.WFSLayer="wfs",e.WMSLayer="wms",e.WMTSLayer="wmts",e.BuildingSceneLayer="building-scene",e.BuildingComponentSubLayer="building-component",e.BuildingGroupSubLayer="building-group"}(mi||(mi={})),function(e){e.AUTOCAD_ID_FIELD="Handle",e.IFC_ID_FIELD="GlobalId",e.REVIT_ID_FIELD="ObjectId",e.IFC_ID_FIELD2="Tag"}(vi||(vi={}));const _i=[vi.IFC_ID_FIELD,vi.REVIT_ID_FIELD,vi.AUTOCAD_ID_FIELD,vi.IFC_ID_FIELD2];class wi{constructor(e){if(this._linkCoreService=null,this.getFeatureBimIds=e=>{const t=[];for(const r of _i){const n=this.getFeatureAttribute(e,r);null!==n&&n.trim().length>0&&t.push(n)}return t},this.getFeatureAttribute=(e,t)=>{if(null==(null==e?void 0:e.attributes))return null;const r=this.getAttributeFields(e).find((e=>e.toLowerCase()===t.toLowerCase()));return r?e.attributes[r].toString():null},this.getAttributeFields=e=>{const t=Object.keys(e.attributes);if(e.layer.type===mi.FeatureLayer){const r=e.layer;return t.filter((e=>e!==r.objectIdField))}if(e.layer.type===mi.BuildingSceneLayer){const r=e.layer.allSublayers.find((e=>j(e,"objectIdField"))),n=null!=r&&j(r,"objectIdField")?r.objectIdField:"ObjectId";return t.filter((e=>e.toLowerCase()!==n.toLowerCase()))}if(j(e.layer,"objectIdField")){const r=e.layer.objectIdField;return t.filter((e=>e!==r))}return t},this._linkCoreService=e,null===this._linkCoreService)throw new Error("LinkCoreService is null!")}getFeatureDocumentLinks(e){return yi(this,void 0,void 0,(function*(){return yield this._linkCoreService.getLinks(this.mapFeatureDataRecordToIFeature(e))}))}mapFeatureDataRecordToIFeature(e){return this.mapGraphicToIFeature(e.feature)}mapGraphicToIFeature(e){const t=e.layer,r=this.mapGraphicGeometryToIGeometry(e.geometry);return{objectId:E(e),attributes:e.attributes,geometry:r,bimIds:this.getFeatureBimIds(e),layer:{id:t.id,portalItemId:T(e),layerId:j(t,"layerId")?t.layerId:0,type:t.type,title:t.title,displayField:j(t,"displayField")?t.displayField:"",objectIdField:A(e),url:j(t,"url")?t.url:null}}}mapGraphicGeometryToIGeometry(e){if(null==e)return null;switch(e.type){case"point":{const t=e;return{type:"point",hasM:t.hasM,hasZ:t.hasZ,x:t.x,y:t.y,z:t.z,spatialReference:{wkid:t.spatialReference.wkid,wkt:t.spatialReference.wkt}}}case"multipoint":{const t=e;return{type:"polyline",hasM:t.hasM,hasZ:t.hasZ,points:t.points,spatialReference:{wkid:t.spatialReference.wkid,wkt:t.spatialReference.wkt}}}case"polyline":{const t=e;return{type:"polyline",hasM:t.hasM,hasZ:t.hasZ,paths:t.paths,spatialReference:{wkid:t.spatialReference.wkid,wkt:t.spatialReference.wkt}}}case"polygon":{const t=e;return{type:"polygon",hasM:t.hasM,hasZ:t.hasZ,rings:t.rings,spatialReference:{wkid:t.spatialReference.wkid,wkt:t.spatialReference.wkt}}}default:return console.warn(`GeoBIM Link Service: Unhandled geometry type: ${e.type}.`),null}}}class bi{constructor(e){if(this._projectCoreService=null,this._linksService=null,this._projectCoreService=e,null===this._projectCoreService)throw new Error("ProjectCoreService is null!")}getLinksService(){return null==this._linksService&&(this._linksService=new wi(this._projectCoreService.linkCoreService)),this._linksService}}var Si=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class Ai{static getInstance(){return null===Ai._instance&&(Ai._instance=new Ai),Ai._instance}constructor(){null===Ai._initialized&&(Ai._initialized=new Promise((e=>{Ai._resolveInitialized=e})))}initialize(e,t){return Si(this,void 0,void 0,(function*(){return Ai._isInitialized||Ai._isInitializing||(Ai._isInitializing=!0,Ai._coreService=yield this.initializeCoreService(e,(0,s.getAppStore)().getState().portalUrl,t),yield this.setPortal(),Ai._isInitializing=!1,this.setInitialized()),Ai._initialized}))}getProjectService(e,t){return Si(this,void 0,void 0,(function*(){if(!Ai._isInitialized)return null;const e=yield Ai._coreService.getProjectCoreService(t);return new bi(e)}))}isGeoBIMProjectService(e){return Si(this,void 0,void 0,(function*(){if(!Ai._isInitialized||null==e||""===e)return!1;try{const t=yield Ai._coreService.getFeatureService(e);return null!=t&&Ai._coreService.isProjectService(t)}catch(e){return!1}}))}initializeCoreService(e,t,r){return Si(this,void 0,void 0,(function*(){var n;try{const[n]=yield(0,y.loadArcGISJSAPIModules)(["esri/identity/IdentityManager"]),s=n,i=()=>{var e,r,n,i;const o=`${t}/sharing/rest`,a=s.findCredential(o),l={expires:null!==(e=a.expires)&&void 0!==e?e:0,server:a.server,ssl:a.ssl,token:a.token,userId:a.userId},c=s.findServerInfo(o);return{credential:l,serverInfo:{server:null!==(r=c.server)&&void 0!==r?r:"",hasPortal:null!==(n=c.hasPortal)&&void 0!==n&&n,hasServer:null!==(i=c.hasServer)&&void 0!==i&&i}}},o=new kr(i);yield o.load();const a=yield pi.create({tokenInfo:{getToken:e},apsRegionsInfoUrl:r}),l=new wt({documentDataService:a,arcGISDataService:o});return Ai._coreService=l,Ai._coreService}catch(e){if(console.error("Error initializing Core Service:",e),function(e){return null!=e&&"object"==typeof e&&e.errorType===bt}(e))throw e;throw new At({message:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e,severity:St.DANGER})}}))}getDocumentsService(){return null==Ai._documentsService&&Ai._isInitialized&&(Ai._documentsService=new gi(Ai._coreService.documentDataCoreService)),Ai._documentsService}getCoreService(){return Ai._coreService}isUserAuthorized(){var e;if(null===Ai._portal)return!1;if(Ai._portal.user){const t=Ai._portal.user;return null!==(null!==(e=null==t?void 0:t.userLicenseTypeId)&&void 0!==e?e:null)&&"viewerUT"!==t.userLicenseTypeId}}setInitialized(){Ai._isInitialized||(Ai._isInitialized=!0,Ai._resolveInitialized())}setPortal(){return Si(this,void 0,void 0,(function*(){if(null!==Ai._portal)return;const[e]=yield(0,y.loadArcGISJSAPIModules)(["esri/portal/Portal"]),t=new e({url:(0,s.getAppStore)().getState().portalUrl});Ai._portal=yield t.load()}))}}Ai._instance=null,Ai._isInitialized=!1,Ai._isInitializing=!1,Ai._initialized=null,Ai._coreService=null,Ai._documentsService=null,Ai._portal=null;const Ei=(e,t,r)=>{switch(t.type){case ce.SetApsAuthenticated:return((e,t)=>{const r=t.payload;return e.set("apsAuthenticated",r)})(e,t);case ce.SetApsError:return((e,t)=>{const r=t.payload;return e.set("apsError",r)})(e,t);case ce.SetModelViewerLinkedDocument:return((e,t)=>{const{modelViewerWidgetId:r,document:n,selectedIds:s}=t.payload;if(null==r)return e;if(e.getIn(["disabledModelViewers",r]))return e;const i={document:n,selectedIds:s};return e.setIn(["modelViewerLinkedDocuments",r],i)})(e,t);case ce.SetModelViewerDisabled:return((e,t)=>{const{modelViewerWidgetId:r,disabled:n}=t.payload;return null==r?e:e.setIn(["disabledModelViewers",r],n)})(e,t)}},Ii="geoBIMState",ki=(0,s.Immutable)({apsAuthenticated:!1,apsError:null,modelViewerLinkedDocuments:new Map,disabledModelViewers:new Map},{});class Oi{constructor(){this.id="geobim-store-extension"}getActions(){return Object.keys(ce).map((e=>ce[e]))}getStoreKey(){return Ii}getInitLocalState(){return ki}getReducer(){return Ei}}function Ti(e){var t,r;return null!==(r=null===(t=null==e?void 0:e[Ii])||void 0===t?void 0:t.apsAuthenticated)&&void 0!==r&&r}function Ci(e){var t,r;return null!==(r=null===(t=null==e?void 0:e[Ii])||void 0===t?void 0:t.apsError)&&void 0!==r?r:null}function xi(e,t){var r,n;return null!==(n=null===(r=null==t?void 0:t[Ii])||void 0===r?void 0:r.modelViewerLinkedDocuments.getIn([e]))&&void 0!==n?n:null}function Ri(e,t){var r,n;return null!==(n=null===(r=null==t?void 0:t[Ii])||void 0===r?void 0:r.disabledModelViewers.getIn([e]))&&void 0!==n&&n}var ji=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useEffect:Pi,useMemo:Di,useState:Ui,useCallback:Li}=s.React,{useSelector:Ni}=s.ReactRedux,$i=e=>{const{getApsAuthToken:t,apsAuthLoaded:r,getApsRegionsInfoUrl:n}=(0,i.useApsAuth)(),s=Di((()=>Ai.getInstance()),[]),[o,a]=Ui(!1),[l,c]=Ui(!1),[u,d]=Ui(!1),[h,p]=Ui(null),f=Ni((e=>Ti(e)));Pi((function(){let e=!1;return(()=>{ji(this,void 0,void 0,(function*(){r&&f&&(yield s.initialize(t,n()),e||d(!0))}))})(),()=>{e=!0}}),[s,r,f,t,n]),Pi((function(){let t=!1;return(()=>{ji(this,void 0,void 0,(function*(){if(u&&null!=e){a(!0);const r=yield s.getProjectService(e.sessionId,e.featureServiceId);t||(p(r),a(!1),c(!0))}}))})(),()=>{t=!0}}),[s,e,u]);const g=Di((()=>!h||o?null:h.getLinksService()),[h,o]),m=Di((()=>u?s.getDocumentsService():null),[s,u]),v=Li((e=>ji(void 0,void 0,void 0,(function*(){return!(!u||null==e||""===e)&&(yield s.isGeoBIMProjectService(e))}))),[s,u]),y=Di((()=>!!u&&s.isUserAuthorized()),[s,u]);return Di((()=>({LinksService:g,DocumentsService:m,isGeoBIMProjectService:v,projectServiceLoading:o,projectServiceInitialized:l,sessionManagerInitialized:u,isUserAuthorized:y})),[g,m,v,o,l,u,y])},{useContext:Mi}=s.React,Fi=()=>{const e=Mi(g);if(void 0===e)throw new Error("useGeoBIM must be used within a GeoBIMProvider");return e};var Bi=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useMemo:qi,useState:zi,useEffect:Vi}=s.React,Wi=()=>{const[e,t]=zi(null),{selectedFeatures:r,geoBIMInitialized:n,LinksService:s}=Fi(),[o,a]=zi([]),[l,c]=zi(!1),[u,d]=zi(!1);(0,i.areRecordArraysEqual)(r,o)||a(r),Vi((function(){let e=!1;return(()=>{Bi(this,void 0,void 0,(function*(){if(n&&s){d(!0);try{if(0===o.length)return;if(o.length>1)return void t(null);c(!0);const r=o[0],n=yield s.getFeatureDocumentLinks(r);e&&1===o.length||t(n)}finally{e||c(!1)}}}))})(),()=>{e=!0}}),[n,s,o]);return qi((()=>({featureDocumentLinks:e,linksLoading:l,linksInitialized:u})),[e,l,u])};var Gi=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useCallback:Hi,useMemo:Ji}=s.React,Ki=()=>{const{geoBIMInitialized:e,DocumentsService:t,currentGeoBIMView:r,geoBIMLoading:n,projectServiceInitialized:s}=Fi(),i=Ji((()=>e&&!n&&s&&null!==t),[t,e,n,s]),o=Hi(((e,n)=>Gi(void 0,void 0,void 0,(function*(){var s;if(!i||null==e||null==r)return null;const o=yield t.searchRepository(e,n);return(null===(s=null==o?void 0:o.children)||void 0===s?void 0:s.length)>0?o:null}))),[t,r,i]),a=Hi((()=>Gi(void 0,void 0,void 0,(function*(){if(!i||null==r)return null;const e=yield t.getRepositoryItems(null);if(!((null==e?void 0:e.length)>0))return null;const n=e[0],s=yield t.getRepositoryItems(n),o=JSON.parse(JSON.stringify(s));return Object.assign(Object.assign({},n),{children:o})}))),[t,r,i]),l=Hi((e=>Gi(void 0,void 0,void 0,(function*(){if(!i||null==r)return[];return yield t.getRepositoryItems(e)}))),[t,r,i]);return Ji((()=>({searchRepository:o,getRoot:a,getChildren:l,useDocumentsReady:i})),[l,a,o,i])};var Yi=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};const{useEffect:Zi,useMemo:Xi,useState:Qi,useCallback:eo}=s.React,to=(e,t)=>{const[r,n]=Qi(!1),[i,o]=Qi(),a=Xi((()=>(0,s.createIntlCache)()),[]);Zi((()=>{let i=!1;return Yi(void 0,void 0,void 0,(function*(){if(r)return;let l=(0,s.getAppStore)().getState().appContext.locale;l=s.i18n.getLocaleToLoad(l,t);let c={};if(l)try{c=yield s.i18n.loadLocaleMessages("widgets/shared-code/lib/geobim/translations",l)}catch(e){console.warn("Failed to load shared messages, default messages will be used for:",l)}else l=t.length>0?t[0]:"en";if(!i){const t=Object.assign({},e.messages,c);o((0,s.createIntl)({locale:l,messages:t},a)),n(!0)}})),()=>{i=!0}}),[a,e,r,t]);const l=eo(((e,t,n)=>r?i.formatMessage({id:e,defaultMessage:t[e]},n):t[e]||e),[i,r]);return Xi((()=>({translateMessage:l})),[l])},ro="32px",no=e=>(0,s.css)({label:"selectionWarningStyle",padding:e.sys.spacing(6),"div.jimu-alert-panel":{width:"unset !important"}}),so=e=>(0,s.css)({label:"geoBIMWidgetContainerStyle",border:`solid 1px ${e.sys.color.divider.primary}`,display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",backgroundColor:e.sys.color.surface.background}),io=e=>(0,s.css)({label:"inWidgetMessageContainerStyle",flexBasis:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:e.sys.spacing(6)}),oo=e=>(0,s.css)({label:"inWidgetMessageLinkStyle",color:`${e.sys.color.surface.paperText} !important`,textDecoration:"underline !important",cursor:"pointer","&:hover":{color:`${e.sys.color.action.link.hover} !important`}}),ao=e=>(0,s.css)({label:"loadingContainerStyle",position:"absolute",width:"100%",height:"100%"}),lo=(e,t)=>(0,s.css)({height:t?"0":"100%",visibility:t?"hidden":"visible"}),co={geobim_logInLink:"Log in",geobim_logInTip:"(All widgets requiring Autodesk authentication will also be logged in.)",geobim_noFeatureServiceSettingsWarning:"One or more sources do not contain feature layers from a GeoBIM project.",geobim_multipleFeatureServicesSettingsWarning:"One or more sources contain feature layers from multiple GeoBIM projects.",geobim_featureServicesSettingsTip:"Please use a source containing feature layers from a single GeoBIM project.",geobim_bimCloudConnectionSettingsTip:"Sources containing elements from BIM Cloud Connection will still be supported.",geobim_itemInaccessible:"Item cannot be accessed.",noGeoBIMFeatureServiceError:"No GeoBIM Feature Service found in this View. Please use a Web Map or Web Scene that contains layers from only one GeoBIM Feature Service.",multipleGeoBIMFeatureServicesError:"Multiple GeoBIM Feature Services were found in this View. Please use a Web Map or Web Scene that contains layers from only one GeoBIM Feature Service.",selectMapSetting:"Select a Map Widget.",geobimNoneSetting:"(None)",geobim_userTypeNote:"A Contributor or higher ArcGIS user type is needed to use the {widget_name} widget. Reach out to your GIS administrator to confirm your license or request an upgrade.",geobim_userTypeLink:"Learn more about user types."};var uo=c(22738)})(),u})())}}}));