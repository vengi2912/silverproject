"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_shared-code_lib_geobim_node_modules_geobim_ui_dist_GeoBimIssuesExtension-C-07c35f"],{18674:(e,s,i)=>{i.d(s,{GeoBIMIssuesExtension:()=>l});var t=Object.defineProperty,n=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);class l extends Autodesk.Viewing.Extension{constructor(e,s){super(e,s),n(this,"issues"),n(this,"pushPinExt"),n(this,"viewer"),this.issues=[],this.handlePinSelected=this.handlePinSelected.bind(this),this.viewer=e}async load(){return this.pushPinExt=await this.viewer.loadExtension("Autodesk.BIM360.Extension.PushPin",{hideIssuesButton:!1,hideRfisButton:!0,hideFieldIssuesButton:!0}),this.viewer.addEventListener("pushpin.selected",this.handlePinSelected),!0}async showBIMIssues(e){this.issues=e,this.pushPinExt.removeAllItems();const s=[];e.forEach((e=>{var i,t,n;if(void 0===e)return;const l=null==e?void 0:e.sourceData,u=void 0!==(null==(i=null==l?void 0:l.linkedDocuments)?void 0:i.length)?l.linkedDocuments[0]:null;null!==u&&s.push({status:null==l?void 0:l.status,viewerState:null==(t=u.details)?void 0:t.viewerState,position:null==(n=u.details)?void 0:n.position,label:null==l?void 0:l.displayId,id:null==l?void 0:l.id})})),this.pushPinExt.loadItemsV2(s)}async handlePinSelected(){var e,s;const i=null==(s=null==(e=this.pushPinExt)?void 0:e.pushPinManager)?void 0:s.selectedItem,t=this.issues.find((e=>{var s;return(null==(s=e.sourceData)?void 0:s.id)===i.itemData.id})),n=null==t?void 0:t.sourceUrl;if(void 0!==n){const e=n;void 0!==e&&window.open(e,"_blank")}}unload(){var e,s;return null==(s=null==(e=this.pushPinExt)?void 0:e.pushPinManager)||s.removeEventListener("pushpin.selected",this.handlePinSelected),!0}}}}]);