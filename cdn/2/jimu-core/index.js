/*! For license information please see index.js.LICENSE.txt */
System.register(["jimu-core/react","jimu-core/react-dom"],(function(e,t){var n={},r={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(r,"__esModule",{value:!0}),{setters:[function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){r[t]=e[t]}))}],execute:function(){e((()=>{var e,t,o={61:(e,t,n)=>{"use strict";n.d(t,{A:()=>R});var r=n(8972),o=n(1468),i=n(3676),s=n(2159),a=n(1035),l=n(4820),u=n(2910),c=n(2089),d=n(3610),p=n(9459),f=n(6962),h=n(6417),g=n(2265),m=n(7390),v=n(6090),y=n(2733),S=n(6917),I=n(7374),b=n(9174),w=n(9589),E=n(4502),A=n(5689),O=n(6048),C=n(4262),T=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class x{static getInstance(){return x.instance||(x.instance=new x,window._widgetManager=x.instance),x.instance}constructor(){this.widgets={},(0,a.Yz)(this.onStoreChange.bind(this),["appConfig","widgets"]),(0,a.Yz)(this.onStoreSectionChange.bind(this),["appConfig","sections"]),(0,a.Yz)(this.onAppI18nMessagesChange.bind(this),["appI18nMessages"]),this.dsManager=p.A.getInstance()}updateWidgetCache(e,t){if("__proto__"!==e&&"constructor"!==e&&"prototype"!==e){this.widgets[e]||(this.widgets[e]={});for(const n in t){if("__proto__"===n||"constructor"===n||"prototype"===n)return;this.widgets[e][n]=t[n]}}}getWidgetClass(e){var t,n,r;const o=null===(n=null===(t=(0,a.Vp)().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];if(o)return null===(r=this.widgets[o.uri])||void 0===r?void 0:r.clazz}getWidgetClassByUri(e){var t;return null===(t=this.widgets[e])||void 0===t?void 0:t.clazz}getWidgetI18nMessagesByUri(e){var t;return(null===(t=this.widgets[e])||void 0===t?void 0:t.i18nMessages)||{}}destroyWidget(e){var t,n;const r=null===(n=null===(t=(0,a.Vp)().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];r&&delete this.widgets[r.uri]}destroyWidgetByUri(e){this.checkWidgetUriInConfig(e)||delete this.widgets[e]}destroyAllWidgets(){this.widgets={}}checkWidgetUriInConfig(e){const t=(0,a.Vp)().getState().appConfig.widgets||{};return!!Object.keys(t).find((n=>t[n].uri===e))}loadWidgetClass(e){return T(this,void 0,void 0,(function*(){var t,n;const r=null===(n=null===(t=(0,a.Vp)().getState().appConfig)||void 0===t?void 0:t.widgets)||void 0===n?void 0:n[e];return r?this.loadWidgetClassByUri(r.uri):Promise.resolve(null)}))}upgradeWidgetByUri(e,t){return T(this,void 0,void 0,(function*(){const n=(0,a.Vp)().getState().appConfig.widgets,r=Object.keys(n).map((e=>n[e])).filter((t=>t.uri===e));if(0===r.length)return;if(!t)return void(0,a.Vp)().dispatch(l.widgetsUpgraded(e));const o=r.map((e=>this.upgradeWidget(e,t))),i=(yield Promise.all(o)).filter((e=>!!e));(0,a.Vp)().dispatch(l.widgetsUpgraded(e,i))}))}upgradeWidget(e,t){return T(this,void 0,void 0,(function*(){var n;const r=e.manifest.version,o=e.version,i=e.config,s=e.manifest.name;if(r===o)return null;if(!o)return null;if(!w.valid(o)||!w.valid(r))return console.error("Bad widget version number, "+e.manifest.name+","+o+","+r),null;let l=null;e.outputDataSources&&(l=m({}),e.outputDataSources.forEach((e=>{l=l.set(e,(0,a.Vp)().getState().appConfig.dataSources[e])})));const u={widgetJson:(0,a.Vp)().getState().appConfig.widgets[e.id],outputDataSourceJsons:l};if(!w.lt(o,r))return console.error("It seems this widget is configured with a higher version. Please upgrade to the latest version to view. "+s+","+o+","+r),null;try{let s;if(t.widgetUpgrade)s=yield t.widgetUpgrade(u,o,r,e.id);else{const l=yield t.upgrade(i,o,r,e.id);s={widgetJson:(0,a.Vp)().getState().appConfig.widgets[e.id].set("config",l),outputDataSourceJsons:null===(n=e.outputDataSources)||void 0===n?void 0:n.reduce(((e,t)=>e.set(t,(0,a.Vp)().getState().appConfig.dataSources[t])),m({}))}}return s}catch(e){return console.error("Upgrade widget ["+s+"] error,"+e),null}}))}loadWidgetClassByUri(e){return T(this,void 0,void 0,(function*(){var t,n;if(!this.checkWidgetUriInConfig(e))return Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.clazzPromise)return this.widgets[e].clazzPromise;if(!(null===(n=this.widgets[e])||void 0===n?void 0:n.manifest))return console.error(e,"Should load manifest first."),Promise.reject(null);const r=this.widgets[e].manifest;return r.properties.hasMainClass?(this.widgets[e].clazzPromise=this.loadRawClass(e).then((t=>this.upgradeWidgetByUri(e,t.versionManager))).then((()=>T(this,void 0,void 0,(function*(){return this.injectWidgetProps(e)})))).then((e=>e?this.appWidgetClassWrapperExtension(e,r):e)).then((t=>t?(this.widgets[e].clazz=t,(0,a.Vp)().dispatch(l.widgetClassLoaded(e)),t):(delete this.widgets[e],t))),this.widgets[e].clazzPromise):Promise.resolve(null)}))}loadRawClass(e){return T(this,void 0,void 0,(function*(){return this.loadWidgetDependency(e).then((()=>T(this,void 0,void 0,(function*(){return(0,c.loadModule)(`${e}dist/runtime/widget`)})))).then((t=>{if((0,C.isAbsoluteUrl)(e)&&t.__set_webpack_public_path__){const n=e.indexOf("/widgets/");if(n<0)console.warn(`The widget, located at ${e}, is not present within the "widgets" folder. If the widget utilizes the "import()" function to dynamically load modules, it is necessary to deploy both the widget itself and the "chunks" folder within the "widgets" directory.`);else{const r=e.substring(0,n+1);t.__set_webpack_public_path__(r)}}const n=t.default?t.default:t;return this.widgets[e].rawClazz=n,n}))}))}loadWidgetTranslation(e,t){return T(this,void 0,void 0,(function*(){let n=(0,a.Vp)().getState().appContext.locale;return n=(0,f.getLocaleToLoad)(n,t.translatedLocales),n?(0,f.loadLocaleMessages)(`${e}dist/runtime/translations`,n).catch((e=>T(this,void 0,void 0,(function*(){return console.error("Load widget translation error",e),Promise.resolve({})})))):Promise.resolve({})}))}openWidget(e){(0,a.Vp)().dispatch(l.openWidget(e))}closeWidget(e){(0,a.Vp)().dispatch(l.closeWidget(e))}appWidgetClassWrapperExtension(e,t){const n=u.A.getInstance().getExtensions(d.ExtensionPoints.WidgetClassWrapper)[0];return n?n.wrap(e,t):e}handleNewWidgetJson(e){return T(this,void 0,void 0,(function*(){return e.context=(0,s.getWidgetContext)(e.uri),e.itemId&&(e.uri=yield this.getWidgetUriByItemId(e.itemId)),this.loadWidgetManifest(e.uri,!e.itemId).then((t=>T(this,void 0,void 0,(function*(){return e.manifest=t,this.processWidgetManifest(e)})))).then((t=>T(this,void 0,void 0,(function*(){var n;e.manifest=t,e.version=t.version,(null===(n=t.properties)||void 0===n?void 0:n.defaultOffPanel)&&(e.offPanel=!0);const r=(0,a.Vp)().getState().appStateInBuilder?(0,a.Vp)().getState().appStateInBuilder.appConfig:(0,a.Vp)().getState().appConfig;return(0,s.addWidgetDefaultLabelAndIcon)(r,e),this.loadWidgetDefaultConfig(e.uri)})))).then((t=>(e.config=t,e)))}))}getWidgetUriByItemId(e){return T(this,void 0,void 0,(function*(){const t=(0,a.Vp)().getState().portalUrl;if((0,A.isAGOLDomain)(t))return Promise.reject("Not support yet.");const n=yield(0,i.getItem)(e,{portal:(0,A.getPortalRestUrl)((0,a.Vp)().getState().portalUrl),authentication:O.Ay.getInstance().getSessionByUrl((0,a.Vp)().getState().portalUrl)}).catch((e=>O.Ay.getInstance().handleAuthError(e,!1)));if("Experience Builder Widget"!==n.type)return Promise.reject("Item type is not correct.");if(!n.url)return Promise.reject("Item does not have url.");let r;return r=/manifest\.json$/.test(n.url)?n.url.substring(0,n.url.length-13):/\/$/.test(n.url)?n.url:n.url+"/",r=r.replace(/^http:\/\//,"https://"),r}))}loadWidgetManifest(e,t){return T(this,void 0,void 0,(function*(){var n;if(!e)return Promise.reject("Widget uri or itemId is required.");if(t&&(0,C.isAbsoluteUrl)(e))return Promise.reject("Remote URL is not allowed.");if(this.widgets[e]||(this.widgets[e]={}),this.widgets[e].manifestPromise)return this.widgets[e].manifestPromise;let r;if(null===(n=window.widgetsManifest)||void 0===n?void 0:n[e])r=Promise.resolve(window.widgetsManifest[e]);else{const t=`${(0,s.getWidgetContext)(e).folderUrl}manifest.json`;r=window.fetch(t).then((e=>T(this,void 0,void 0,(function*(){return 404===e.status?Promise.reject("404, widget not found."):e.json()}))))}return this.widgets[e].manifestPromise=r.then((e=>T(this,void 0,void 0,(function*(){if(e.error&&e.error.code)return Promise.reject(e.error);const t=e;return!t.widgetType&&t.properties&&t.properties.type&&(t.widgetType=t.properties.type,delete t.properties.type),!t.layouts&&t.properties&&t.properties.layouts&&(t.layouts=t.properties.layouts,delete t.properties.layouts),!t.translatedLocales&&t.supportedLocales&&(t.translatedLocales=t.supportedLocales),Promise.resolve(t)})))),this.widgets[e].manifestPromise}))}processWidgetManifest(e){return T(this,void 0,void 0,(function*(){const t=(0,s.addWidgetManifestProperties)(e.manifest);return e.manifest=t,this.loadWidgetTranslation(e.uri,t).then((n=>{t.i18nMessages=n||{},e.manifest=t,this.widgets[e.uri]?this.widgets[e.uri].manifest=t:this.widgets[e.uri]={manifest:t,manifestPromise:Promise.resolve(t)};const r=(0,a.Vp)().getState().appI18nMessages;return this.widgets[e.uri].i18nMessages=Object.assign({},t.i18nMessages,r),t}))}))}registerManifestProps(e,t){return T(this,void 0,void 0,(function*(){const n=e.manifest,r=[];return n.extensions&&n.extensions.length>0&&r.push(u.A.getInstance().registerWidgetExtensions(e,!t)),n.messageActions&&n.messageActions.length>0&&I.A.getInstance().registerWidgetActions(e,t),n.dataActions&&n.dataActions.length>0&&b.A.getInstance().registerWidgetActions(e,t),Promise.all(r).then((()=>null))}))}unRegisterManifestProps(e){u.A.getInstance().destroyWidgetExtensions(e),I.A.getInstance().destroyWidgetActions(e),b.A.getInstance().destroyWidgetActions(e)}loadWidgetDefaultConfig(e){return T(this,void 0,void 0,(function*(){var t;if(!this.widgets[e].manifest.properties.hasConfig)return Promise.resolve(null);if(null===(t=this.widgets[e])||void 0===t?void 0:t.defaultConfigPromise)return this.widgets[e].defaultConfigPromise;const n=(0,s.getWidgetContext)(e).folderUrl;return this.widgets[e].defaultConfigPromise=window.fetch(`${n}config.json`).then((e=>T(this,void 0,void 0,(function*(){return 404===e.status?Promise.reject("404, widget not found."):e.json()})))).then((e=>e)),this.widgets[e].defaultConfigPromise}))}loadWidgetDependency(e){return T(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest;if(!t.dependency)return Promise.resolve();const n="string"==typeof t.dependency?[t.dependency]:t.dependency;return(0,v.c)(n)}))}injectWidgetProps(e){return T(this,void 0,void 0,(function*(){const t=this.widgets[e].manifest,n=t.name,i=(0,E.getJimuThemeModule)().withTheme,s=this.widgets[e].rawClazz,u=i((0,h.Ay)(s),window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder),c=(0,S.sY)(u);if(!this.checkWidgetUriInConfig(e))return Promise.resolve(null);const d=(t,n)=>{var r,o;const i=n.widgetId;if(!t.appConfig.widgets[i])return{};const a=t.widgetsRuntimeInfo[i],l=Object.assign({portalUrl:t.portalUrl,portalSelf:t.portalSelf,user:t.user,locale:t.appContext.locale,appI18nMessages:t.appI18nMessages,i18nMessages:null===(r=this.widgets[e])||void 0===r?void 0:r.i18nMessages},n);t.widgetsState[i]&&(l.stateProps=t.widgetsState[i]),t.widgetsMutableStateVersion[i]&&(l.mutableStatePropsVersion=t.widgetsMutableStateVersion[i],l.mutableStateProps=y.A.getInstance().getStateValue([i])),(null===(o=this.widgets[e])||void 0===o?void 0:o.widgetBuilderSupportModules)&&(l.builderSupportModules=this.widgets[e].widgetBuilderSupportModules),t.widgetsPreloadProps&&t.widgetsPreloadProps[i]&&Object.assign(l,t.widgetsPreloadProps[i]);const u=Object.assign(l,t.appConfig.widgets[i],a);return Object.assign(u,s.mapExtraStateProps?s.mapExtraStateProps(t,u):{})},p=e=>T(this,void 0,void 0,(function*(){const t=(0,a.Vp)().getState().appConfig.widgets[e];if(!t)return Promise.resolve(null);if(t.version===t.manifest.version)return Promise.resolve(null);if(!s.versionManager)return void(0,a.Vp)().dispatch(l.widgetUpgraded(e));const n=yield this.upgradeWidget(t,s.versionManager);(0,a.Vp)().dispatch(l.widgetUpgraded(e,n))}));class f extends r.PureComponent{constructor(e){super(e),this.state={fullConfig:null}}componentDidMount(){p(this.props.widgetId),s.getFullConfig&&this.setState({fullConfig:s.getFullConfig(this.props.config)})}componentDidUpdate(e){p(this.props.widgetId),s.getFullConfig&&e.config!==this.props.config&&this.setState({fullConfig:s.getFullConfig(this.props.config)})}getFullConfig(e){return s.getFullConfig?s.getFullConfig(e):e}render(){const{id:e,manifest:t,version:n,i18nMessages:o}=this.props;if(!e)return null;if(s.versionManager&&n&&t.version!==n)return null;const i=Object.assign({},this.props);return i.savedConfig=this.props.config,this.state.fullConfig?i.config=this.state.fullConfig:i.config=this.getFullConfig(this.props.config),r.createElement(g.A,{locale:this.props.locale,defaultLocale:this.props.locale,messages:o},r.createElement(c,Object.assign({},i)))}}return f.displayName=`WidgetWrapper(${n})`,this.loadWidgetBuilderSupportModules(e,t).then((()=>T(this,void 0,void 0,(function*(){return this.checkWidgetUriInConfig(e)?Promise.resolve((0,o.connect)(d)(f)):Promise.resolve(null)}))))}))}loadWidgetBuilderSupportModules(e,t){return T(this,void 0,void 0,(function*(){var n;const r=[];if(window.jimuConfig.isInBuilder){if(null===(n=this.widgets[e])||void 0===n?void 0:n.widgetBuilderSupportModulesPromise)return this.widgets[e].widgetBuilderSupportModulesPromise;if(t.properties.hasEmbeddedLayout?r.push((0,c.loadModule)("jimu-layouts/layout-builder").then((e=>e.LayoutEntry))):r.push(Promise.resolve(null)),t.properties.hasBuilderSupportModule){const t=`${e}dist/runtime/builder-support`;r.push((0,c.loadModule)(t).then((e=>e.default)))}else r.push(Promise.resolve(null));return this.widgets[e].widgetBuilderSupportModulesPromise=Promise.all(r).then((t=>(this.widgets[e].widgetBuilderSupportModules={jimuForBuilderLib:(0,c.getJimuForBuilderModules)(),LayoutEntry:t[0],widgetModules:t[1]},this.widgets[e].widgetBuilderSupportModules))),this.widgets[e].widgetBuilderSupportModulesPromise}return Promise.resolve({jimuForBuilderLib:null})}))}onStoreChange(e,t){e&&t&&Object.keys(e).forEach((e=>{t[e]||this.unRegisterManifestProps(e)})),e&&t&&Object.keys(t).forEach((n=>{e[n]?e[n].uri!==t[n].uri&&(this.unRegisterManifestProps(n),this.registerManifestProps(t[n])):this.registerManifestProps(t[n])}))}onStoreSectionChange(e,t){e&&t&&Object.keys(e).forEach((e=>{t[e]||I.A.getInstance().destroySectionActions(e)})),e&&t&&Object.keys(t).forEach((t=>{e[t]||I.A.getInstance().registerSectionActions(t)}))}onAppI18nMessagesChange(e,t){e!==t&&Object.keys(this.widgets).forEach((e=>{const n=this.widgets[e];n&&n.i18nMessages&&(n.i18nMessages=Object.assign({},n.i18nMessages,t))}))}}const R=x},124:(e,t,n)=>{var r=n(9325);e.exports=function(){return r.Date.now()}},133:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 2H3v3h3zM2 1v5h5V1zM0 14.09c1.2.503 2.493.746 3.793.711 1.832 0 3.02-.4 4.207-.8s2.374-.8 4.207-.8A6.62 6.62 0 0 1 16 14.291L13.867 1.686a8.2 8.2 0 0 0-3.161-.674A6.9 6.9 0 0 0 8 1.506v1.062q.174-.06.339-.12a5.9 5.9 0 0 1 2.367-.434c.773.01 1.54.146 2.27.4l1.72 10.162a8.3 8.3 0 0 0-2.489-.376 12.8 12.8 0 0 0-4.526.852c-1.24.484-2.557.737-3.888.748a9.5 9.5 0 0 1-2.669-.363L2.214 7H1.2zM11 5H9v2h2zM8 4v3H5v4h7V4zm-2 6V8h2v2zm3-2h2v2H9z" clip-rule="evenodd"></path></svg>'},144:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},147:e=>{"use strict";e.exports=JSON.parse('{"exbVersion":"1.18.0","exbBuildNum":"1109","exbBuildCommit":"b60660fef98965cf44b30b825832c2fb37ec6eaa","exbBuildBranch":"origin/release/dev1.18","exbExtensionsBuildCommit":"98209ad02db93d82ce4acc62ca57d5dc46e84209","exbExtensionsBuildBranch":"origin/release/dev1.18","exbBuildDate":"20250716.161724.CST","productVersion":"ArcGIS Experience Builder"}')},154:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(1917),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof module&&module&&!module.nodeType&&module,s=i&&i.exports===o?r.A.Buffer:void 0,a=s?s.allocUnsafe:void 0;const l=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},228:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r=n(3537);function o(e,t){const n=(0,r.a)(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}},241:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1917).A.Symbol},270:(e,t,n)=>{const r=n(3908),o=n(8311);e.exports=(e,t,n)=>{let i=null,s=null,a=null;try{a=new o(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&1!==s.compare(e)||(i=e,s=new r(i,n)))})),i}},337:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(2516),o=n(3537);function i(e,t){const n=(0,r.q)(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=(0,o.a)(e,t?.in),a=s.getDay(),l=(a<i?7:0)+a-i;return s.setDate(s.getDate()-l),s.setHours(0,0,0,0),s}},340:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});const r=/[\x00-\x1F\x7F-\x9F\xA0]/g;function o(e){return e.replace(r,"")}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},367:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e,t){return function(n){return e(t(n))}}},407:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(3149),o=Object.create;const i=function(){function e(){}return function(t){if(!(0,r.A)(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();var s=n(5647),a=n(7271);const l=function(e){return"function"!=typeof e.constructor||(0,a.A)(e)?{}:i((0,s.A)(e))}},430:e=>{"use strict";e.exports=JSON.parse('{"Dateline Standard Time":-12,"UTC-11":-11,"Hawaiian Standard Time":-10,"Alaskan Standard Time":-9,"Pacific Standard Time":-8,"Pacific Standard Time (Mexico)":-8,"Mountain Standard Time":-7,"Mountain Standard Time (Mexico)":-7,"US Mountain Standard Time":-7,"Canada Central Standard Time":-6,"Central America Standard Time":-6,"Central Standard Time":-6,"Central Standard Time (Mexico)":-6,"Eastern Standard Time":-5,"SA Pacific Standard Time":-5,"US Eastern Standard Time":-5,"Venezuela Standard Time":-3.5,"Atlantic Standard Time":-4,"Central Brazilian Standard Time":-4,"Pacific SA Standard Time":-4,"SA Western Standard Time":-4,"Paraguay Standard Time":-4,"Newfoundland Standard Time":-2.5,"E. South America Standard Time":-3,"Greenland Standard Time":-3,"Montevideo Standard Time":-3,"SA Eastern Standard Time":-3,"Argentina Standard Time":-3,"Mid-Atlantic Standard Time":-2,"UTC-2":-2,"Azores Standard Time":-1,"Cabo Verde Standard Time":-1,"GMT Standard Time":0,"Greenwich Standard Time":0,"Morocco Standard Time":0,"UTC":0,"Central Europe Standard Time":1,"Central European Standard Time":1,"Romance Standard Time":1,"W. Central Africa Standard Time":1,"W. Europe Standard Time":1,"Namibia Standard Time":1,"E. Europe Standard Time":2,"Egypt Standard Time":2,"FLE Standard Time":2,"GTB Standard Time":2,"Israel Standard Time":2,"Jordan Standard Time":2,"Middle East Standard Time":2,"South Africa Standard Time":2,"Syria Standard Time":2,"Turkey Standard Time":2,"Arab Standard Time":3,"Arabic Standard Time":3,"E. Africa Standard Time":3,"Kaliningrad Standard Time":3,"Iran Standard Time":3.5,"Russian Standard Time":4,"Arabian Standard Time":4,"Azerbaijan Standard Time":4,"Caucasus Standard Time":4,"Georgian Standard Time":4,"Mauritius Standard Time":4,"Afghanistan Standard Time":4.5,"West Asia Standard Time":5,"Pakistan Standard Time":5,"India Standard Time":5.5,"Sri Lanka Standard Time":5.5,"Nepal Standard Time":5,"Ekaterinburg Standard Time":6,"Central Asia Standard Time":6,"Bangladesh Standard Time":6,"Myanmar Standard Time":6.5,"N. Central Asia Standard Time":7,"SE Asia Standard Time":7,"North Asia Standard Time":8,"China Standard Time":8,"Singapore Standard Time":8,"Taipei Standard Time":8,"W. Australia Standard Time":8,"Ulaanbaatar Standard Time":8,"North Asia East Standard Time":9,"Korea Standard Time":9,"Tokyo Standard Time":9,"AUS Central Standard Time":9.5,"Cen. Australia Standard Time":9.5,"Yakutsk Standard Time":10,"AUS Eastern Standard Time":10,"E. Australia Standard Time":10,"Tasmania Standard Time":10,"West Pacific Standard Time":10,"Vladivostok Standard Time":11,"Central Pacific Standard Time":11,"Magadan Standard Time":12,"Fiji Standard Time":12,"New Zealand Standard Time":12,"UTC+12":12,"Tonga Standard Time":13,"Samoa Standard Time":-11}')},441:(e,t,n)=>{"use strict";function r(e){return Object.keys(e).some((t=>{let n=e[t];if(!n)return!1;n&&n.toParam&&(n=n.toParam());switch(n.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}}))}function o(e){const t={};return Object.keys(e).forEach((n=>{var r,o;let i=e[n];if(i&&i.toParam&&(i=i.toParam()),!i&&0!==i&&"boolean"!=typeof i&&"string"!=typeof i)return;let s;switch(i.constructor.name){case"Array":const e=null===(o=null===(r=i[0])||void 0===r?void 0:r.constructor)||void 0===o?void 0:o.name;s="Array"===e?i:"Object"===e?JSON.stringify(i):i.join(",");break;case"Object":s=JSON.stringify(i);break;case"Date":s=i.valueOf();break;case"Function":s=null;break;case"Boolean":s=i+"";break;default:s=i}(s||0===s||"string"==typeof s||Array.isArray(s))&&(t[n]=s)})),t}n.d(t,{Z:()=>r,y:()=>o})},476:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getServerRootUrl:()=>u,getServiceRootUrl:()=>l,isServerUrl:()=>a,isServiceUrl:()=>s});const r={mapServer:"MapServer",imageServer:"ImageServer",featureServer:"FeatureServer",sceneServer:"SceneServer",streamServer:"StreamServer",vectortileServer:"VectorTileServer",GPServer:"GPServer",bigDataCatalogServer:"BigDataCatalogServer",dataReviewerServer:"DataReviewerServer",geoAnalytics:"GeoAnalytics",geocodeServer:"GeocodeServer",geoDataServer:"GeoDataServer",geometryServer:"GeometryServer",globeServer:"GlobeServer",knowledgeGraphServer:"KnowledgeGraphServer",LRServer:"LRServer",mobileServer:"MobileServer",networkDiagramServer:"NetworkDiagramServer",parcelFabricServer:"ParcelFabricServer",relationalCatalogServer:"RelationalCatalogServer",NAServer:"NAServer",schematicsServer:"SchematicsServer",symbolServer:"SymbolServer",topographicProductionServer:"TopographicProductionServer",traceNetworkServer:"TraceNetworkServer",utilityNetworkServer:"UtilityNetworkServer",validationServer:"ValidationServer",versionManagementServer:"VersionManagementServer"};function o(e=""){const t=Object.values(r),n=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/(admin\\/)?services\\/(.+?)\\/(${t.join("|")}))`,"i"),o=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${t.join("|")}))`,"i"),i=e.match(n)||e.match(o);return i?i[0]:null}function i(e=""){const t=/\/rest\/admin\/services(\/|$)/i,n=e.toLowerCase();let r=n.indexOf("/appservices");-1===r&&(r=n.indexOf("/rest/services")),-1===r&&t.test(e)&&(r=e.search(t));return r>-1?e.substring(0,r):null}function s(e=""){return!!o(e)}function a(e=""){return!!i(e)}function l(e=""){return o(e)||e}function u(e=""){return i(e)||e}},508:(e,t,n)=>{"use strict";var r,o;n.d(t,{at:()=>i,yR:()=>g,Xz:()=>f,e3:()=>r,hg:()=>o,iy:()=>h,pQ:()=>d,Vh:()=>p,Rf:()=>l,QB:()=>u,Oh:()=>s,fY:()=>c,nS:()=>a}),function(e){e.NotCreated="NOT_CREATED",e.Created="CREATED",e.CreateError="CREATE_ERROR",e.NotReady="NOT_READY",e.Unloaded="UNLOADED",e.Loading="LOADING",e.Loaded="LOADED",e.LoadError="LOAD_ERROR",e.Saving="SAVING",e.Saved="SAVED",e.SaveError="SAVE_ERROR",e.Closed="CLOSED",e.Connecting="CONNECTING",e.Connected="CONNECTED",e.Closing="CLOSING"}(r||(r={})),function(e){e.Error="ERROR",e.SimpleLocal="SIMPLE_LOCAL",e.CSV="CSV",e.FeatureLayer="FEATURE_LAYER",e.SceneLayer="SCENE_LAYER",e.SubtypeGroupLayer="SUBTYPE_GROUP_LAYER",e.SubtypeSublayer="SUBTYPE_SUBLAYER",e.GroupLayer="GROUP_LAYER",e.FeatureService="FEATURE_SERVICE",e.MapService="MAP_SERVICE",e.SceneService="SCENE_SERVICE",e.VectorTileService="VECTOR_TILE_SERVICE",e.GeoJSON="GEO_JSON",e.KML="KML",e.WFS="WFS",e.WMS="WMS",e.WMTS="WMTS",e.BuildingSceneLayer="BUILDING_SCENE_LAYER",e.BuildingGroupSubLayer="BUILDING_GROUP_SUBLAYER",e.BuildingComponentSubLayer="BUILDING_COMPONENT_SUBLAYER",e.OrientedImageryLayer="ORIENTED_IMAGERY_LAYER",e.ImageryLayer="IMAGERY_LAYER",e.ImageryTileLayer="IMAGERY_TILE_LAYER",e.ElevationLayer="ELEVATION_LAYER",e.Map="MAP",e.WebMap="WEB_MAP",e.WebScene="WEB_SCENE"}(o||(o={}));const i=o;var s,a,l,u,c,d,p,f,h;!function(e){e.FeatureLayer="Feature Layer",e.Table="Table",e.GroupLayer="Group Layer",e.OrientedImageryLayer="Oriented Imagery Layer",e.SceneLayerPoint="Point",e.SceneLayer3DObject="3DObject",e.BuildingSceneLayer="Building",e.BuildingGroupSubLayer="building-group",e.BuildingComponentSubLayer="building-component"}(s||(s={})),function(e){e.FeatureService="FeatureServer",e.MapService="MapServer",e.SceneService="SceneServer",e.ImageService="ImageServer",e.VectorTileService="VectorTileServer"}(a||(a={})),function(e){e.WebMap="Web Map",e.WebScene="Web Scene",e.FeatureService="Feature Service",e.MapService="Map Service",e.SceneService="Scene Service",e.ImageService="Image Service",e.VectorTileService="Vector Tile Service",e.FeatureCollection="Feature Collection",e.GroupLayer="Group Layer",e.CSV="CSV",e.GeoJSON="GeoJson",e.KML="KML",e.WFS="WFS",e.WMS="WMS",e.WMTS="WMTS",e.GeometryService="Geometry Service",e.GeocodingService="Geocoding Service",e.GeoprocessingService="Geoprocessing Service",e.NetworkAnalysisService="Network Analysis Service",e.GeoenrichmentService="Geoenrichment service"}(l||(l={})),function(e){e.FeatureLayer="feature",e.MapImageLayer="map-image",e.TileLayer="tile",e.GroupLayer="group",e.SceneLayer="scene",e.ImageryLayer="imagery",e.ImageryTileLayer="imagery-tile",e.ElevationLayer="elevation",e.OrientedImageryLayer="oriented-imagery",e.SubtypeGroupLayer="subtype-group",e.SubtypeSublayer="subtype-sublayer",e.VectorTileLayer="vector-tile",e.KMLLayer="kml",e.CSVLayer="csv",e.GeoJSONLayer="geojson",e.WFSLayer="wfs",e.WMSLayer="wms",e.WMTSLayer="wmts",e.BuildingSceneLayer="building-scene",e.BuildingComponentSubLayer="building-component",e.BuildingGroupSubLayer="building-group"}(u||(u={})),function(e){e.FeatureLayer="ArcGISFeatureLayer",e.SceneLayer="ArcGISSceneServiceLayer",e.GroupLayer="GroupLayer",e.MapService="ArcGISMapServiceLayer",e.TiledMapService="ArcGISTiledMapServiceLayer",e.VectorTileService="VectorTileLayer",e.ImageService="ArcGISImageServiceLayer",e.TiledImageService="ArcGISTiledImageServiceLayer",e.CSV="CSV",e.GeoJSON="GeoJSON",e.KML="KML",e.WFS="WFS",e.WMS="WMS",e.SubtypeGroupLayer="SubtypeGroupLayer"}(c||(c={}));class g extends Error{constructor(e,t){super(`data source id: ${e}, ${t}`),this.dataSourceId=e}}!function(e){e.InAllData="IN_ALL_DATA",e.InRemoteConfigView="IN_REMOTE_CONFIG_VIEW",e.InConfigView="IN_CONFIG_VIEW",e.InRuntimeView="IN_RUNTIME_VIEW"}(d||(d={})),function(e){e.Asc="ASC",e.Desc="DESC"}(p||(p={})),function(e){e.New="New",e.AddToCurrent="AddToCurrent",e.RemoveFromCurrent="RemoveFromCurrent",e.SelectFromCurrent="SelectFromCurrent"}(f||(f={})),function(e){e.BaseDynamicLayer="base-dynamic",e.BaseElevationLayer="base-elevation",e.BaseTileLayer="base-tile",e.BingMapsLayer="bing-maps",e.BuildingSceneLayer="building-scene",e.BuildingGroupSublayer="building-group",e.BuildingComponentSublayer="building-component",e.CatalogLayer="catalog",e.CatalogDynamicGroupLayer="catalog-dynamic-group",e.CatalogFootprintLayer="catalog-footprint",e.CSVLayer="csv",e.DimensionLayer="dimension",e.ElevationLayer="elevation",e.FeatureLayer="feature",e.GeoJSONLayer="geojson",e.GeoRSSLayer="geo-rss",e.GraphicsLayer="graphics",e.GroupLayer="group",e.SubtypeGroupLayer="subtype-group",e.SubtypeSublayer="subtype-sublayer",e.ImageryLayer="imagery",e.ImageryTileLayer="imagery-tile",e.IntegratedMesh3DTilesLayer="integrated-mesh-3dtiles",e.OrientedImageryLayer="oriented-imagery",e.IntegratedMeshLayer="integrated-mesh",e.KMLLayer="kml",e.KnowledgeGraphLayer="knowledge-graph",e.KnowledgeGraphSublayer="knowledge-graph-sublayer",e.LineOfSightLayer="line-of-sight",e.MapImageLayer="map-image",e.MapNotesLayer="map-notes",e.MediaLayer="media",e.OGCFeatureLayer="ogc-feature",e.OpenStreetMapLayer="open-street-map",e.PointCloudLayer="point-cloud",e.RouteLayer="route",e.SceneLayer="scene",e.StreamLayer="stream",e.TileLayer="tile",e.UnknownLayer="unknown",e.UnsupportedLayer="unsupported",e.VectorTileLayer="vector-tile",e.VideoLayer="video",e.ViewshedLayer="viewshed",e.VoxelLayer="voxel",e.WCSLayer="wcs",e.WFSLayer="wfs",e.WMSLayer="wms",e.WMTSLayer="wmts",e.WebTileLayer="web-tile"}(h||(h={}))},560:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},565:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(3988);const o=function(e){var t=new e.constructor(e.byteLength);return new r.A(t).set(new r.A(e)),t}},568:(e,t,n)=>{"use strict";n.d(t,{Db:()=>a,XS:()=>l,kR:()=>u,kS:()=>s,sc:()=>i});var r=n(3718);const o=/^https?:\/\/(\S+)\.arcgis\.com.+/;function i(e){return o.test(e)}function s(e){if(!o.test(e))return e;switch(a(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}function a(e){if(!o.test(e))return null;const t=e.match(o)[1].split(".").pop();return t.includes("dev")?"dev":t.includes("qa")?"qa":"production"}function l(e,t){const n=(0,r.T)(s(t)).replace(/https?:\/\//,""),o=(0,r.T)(e).replace(/https?:\/\//,"");return new RegExp(o,"i").test(n)}function u(e,t){const n=i(e),r=i(t),o=a(e),s=a(t);return!(!n||!r||o!==s)}},597:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 12"><path fill="#000" fill-rule="evenodd" d="M0 0v12l4-4h6zm3.586 7L1 9.586V2.08L7.15 7z" clip-rule="evenodd"></path></svg>'},659:(e,t,n)=>{var r=n(1873),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[a]=n:delete e[a]),o}},743:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(2080),o=n(2050);const i=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const s=function(e){return this.__data__.has(e)};function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new o.A;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=s;const l=a;const u=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const c=function(e,t){return e.has(t)};const d=function(e,t,n,r,o,i){var s=1&n,a=e.length,d=t.length;if(a!=d&&!(s&&d>a))return!1;var p=i.get(e),f=i.get(t);if(p&&f)return p==t&&f==e;var h=-1,g=!0,m=2&n?new l:void 0;for(i.set(e,t),i.set(t,e);++h<a;){var v=e[h],y=t[h];if(r)var S=s?r(y,v,h,t,e,i):r(v,y,h,e,t,i);if(void 0!==S){if(S)continue;g=!1;break}if(m){if(!u(t,(function(e,t){if(!c(m,t)&&(v===e||o(v,e,n,r,i)))return m.push(t)}))){g=!1;break}}else if(v!==y&&!o(v,y,n,r,i)){g=!1;break}}return i.delete(e),i.delete(t),g};var p=n(241),f=n(3988),h=n(6984);const g=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const m=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var v=p.A?p.A.prototype:void 0,y=v?v.valueOf:void 0;const S=function(e,t,n,r,o,i,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new f.A(e),new f.A(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,h.A)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=g;case"[object Set]":var l=1&r;if(a||(a=m),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var c=d(a(e),a(t),r,o,i,s);return s.delete(e),c;case"[object Symbol]":if(y)return y.call(e)==y.call(t)}return!1};var I=n(9042),b=Object.prototype.hasOwnProperty;const w=function(e,t,n,r,o,i){var s=1&n,a=(0,I.A)(e),l=a.length;if(l!=(0,I.A)(t).length&&!s)return!1;for(var u=l;u--;){var c=a[u];if(!(s?c in t:b.call(t,c)))return!1}var d=i.get(e),p=i.get(t);if(d&&p)return d==t&&p==e;var f=!0;i.set(e,t),i.set(t,e);for(var h=s;++u<l;){var g=e[c=a[u]],m=t[c];if(r)var v=s?r(m,g,c,t,e,i):r(g,m,c,e,t,i);if(!(void 0===v?g===m||o(g,m,n,r,i):v)){f=!1;break}h||(h="constructor"==c)}if(f&&!h){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(f=!1)}return i.delete(e),i.delete(t),f};var E=n(2434),A=n(2049),O=n(1200),C=n(4749),T="[object Arguments]",x="[object Array]",R="[object Object]",P=Object.prototype.hasOwnProperty;const D=function(e,t,n,o,i,s){var a=(0,A.A)(e),l=(0,A.A)(t),u=a?x:(0,E.A)(e),c=l?x:(0,E.A)(t),p=(u=u==T?R:u)==R,f=(c=c==T?R:c)==R,h=u==c;if(h&&(0,O.A)(e)){if(!(0,O.A)(t))return!1;a=!0,p=!1}if(h&&!p)return s||(s=new r.A),a||(0,C.A)(e)?d(e,t,n,o,i,s):S(e,t,u,n,o,i,s);if(!(1&n)){var g=p&&P.call(e,"__wrapped__"),m=f&&P.call(t,"__wrapped__");if(g||m){var v=g?e.value():e,y=m?t.value():t;return s||(s=new r.A),i(v,y,n,o,s)}}return!!h&&(s||(s=new r.A),w(e,t,n,o,i,s))};var _=n(3098);const L=function e(t,n,r,o,i){return t===n||(null==t||null==n||!(0,_.A)(t)&&!(0,_.A)(n)?t!=t&&n!=n:D(t,n,r,o,e,i))};const M=function(e,t){return L(e,t)}},751:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var r=/\s/;const o=function(e){for(var t=e.length;t--&&r.test(e.charAt(t)););return t};var i=/^\s+/;const s=function(e){return e?e.slice(0,o(e)+1).replace(i,""):e};var a=n(3149),l=n(1882),u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,d=/^0o[0-7]+$/i,p=parseInt;const f=function(e){if("number"==typeof e)return e;if((0,l.A)(e))return NaN;if((0,a.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,a.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=s(e);var n=c.test(e);return n||d.test(e)?p(e.slice(2),n?2:8):u.test(e)?NaN:+e}},806:(e,t,n)=>{"use strict";n.d(t,{e:()=>s,p:()=>a});var r=n(6090),o=n(2089),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function s(e){return i(this,void 0,void 0,(function*(){return yield(0,r.W)("jimu-arcgis"),yield(0,o.loadModules)(e)}))}function a(e){return i(this,void 0,void 0,(function*(){return yield s([e]).then((e=>e[0]))}))}},819:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.915 1A1.5 1.5 0 1 0 1 2.915v10.17A1.5 1.5 0 1 0 2.915 15h10.17a1.5 1.5 0 1 0 1.276-1.994l-2.272-3.975c.255-.269.411-.632.411-1.031 0-.4-.156-.762-.41-1.031l2.27-3.975q.07.006.14.006a1.5 1.5 0 1 0-1.415-2zm0 13h10.17q.076-.211.207-.389l-2.204-4.114L11 9.5a1.5 1.5 0 1 1 .088-2.997l2.204-4.114A1.5 1.5 0 0 1 13.085 2H2.915c-.151.426-.489.764-.915.915v10.17c.426.151.764.489.915.915" clip-rule="evenodd"></path></svg>'},880:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 2h5v12H2zM1 14V1h7v13h2.5V4H9V3h2.5v11H14V7h-1.5V6H15v8h1v1H0v-1zM3 3h1v1H3zm1 3H3v1h1zM3 9h1v1H3zm3-6H5v1h1zM5 6h1v1H5zm1 3H5v1h1z" clip-rule="evenodd"></path></svg>'},901:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(1882);const o=function(e){if("string"==typeof e||(0,r.A)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},903:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9592);const o=function(e){return(0,r.A)(e,5)}},909:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n)=>{const o=new r(e,n),i=new r(t,n);return o.compare(i)||o.compareBuild(i)}},914:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m8 0 8 6-8 6-8-6zM1.887 6 8 10.82 14.113 6 8 1.18zM0 9.81.563 9 8 14.775 15.437 9l.563.81L8 16z" clip-rule="evenodd"></path></svg>'},1035:(e,t,n)=>{"use strict";n.d(t,{pq:()=>j,Vp:()=>U,Yz:()=>F});var r=n(7390),o=n(4820),i=n(3702),s=n(2910),a=n(4990),l=n(3610),u=n(4262),c=n(5001),d=n(508),p=n(2159),f=n(9359),h=n(4962),g=n(743),m=n(6028),v=n(2089);function y(e,t){var n,c,h,g,v,y,T,k,N,j,U,F,B,$;if(!e)return function(){const e={appConfig:null,portalUrl:null,portalSelf:null,widgetsRuntimeInfo:{},widgetsPreloadProps:{},widgetsClassStatus:{},dataSourcesPreloadData:{},appContext:{},appRuntimeInfo:{},isNetworkOffLine:null,browserSizeMode:null,appPath:window.location.pathname,appId:null,appInfo:{},appI18nMessages:{},queryObject:{},urlHashObject:{},dataSourcesInfo:{},jimuMapViewsInfo:{},mapWidgetsInfo:{},widgetsState:{},widgetsMutableStateVersion:{},user:null,overlays:[],userLocaleChanged:!1,hasPrivilege:!0,privilegeError:null,loadAppConfigError:null,portalsNeedToRegisterClientId:[],noPermissionResourceChangedFlag:"",resourceSessions:{},guideId:null,shouldCheckGuideDisplay:!1,dynamicStyleState:{}};return r(e)}();if(t.type.includes("@@"))return e;switch(t.type){case o.ActionKeys.InitStoreExtensionState:return function(e,t){const n=s.A.getInstance().getExtensionById(t.extensionId),r=n.getStoreKey().split(".");if(e.getIn(r))return e;return e=e.setIn(r,n.getInitLocalState()),e}(e,t);case o.ActionKeys.AppConfigLoaded:return function(e,t){var n,o,i,s,l;const c=null===(o=null===(n=e.portalSelf)||void 0===n?void 0:n.portalProperties)||void 0===o?void 0:o.sharedTheme,f=S(r(t.appConfig),c,e.portalUrl),h=f||t.appConfig;let g=e.set("appConfig",h);if(!g.appRuntimeInfo.currentPageId){const e=Object.keys(h.pages).find((e=>h.pages[e].isDefault));g=g.setIn(["appRuntimeInfo","currentPageId"],e)}if(!g.appRuntimeInfo.currentDialogId&&g.queryObject.dlg){const e=(0,u.getDialogIdFromIdOrLabel)(g.queryObject.dlg,h);g=g.setIn(["appRuntimeInfo","currentDialogId"],e),g=b(g,e)}(null===(s=null===(i=g.appConfig)||void 0===i?void 0:i.cookieBanner)||void 0===s?void 0:s.enable)&&g.queryObject.cookie_banner&&(g=g.setIn(["appRuntimeInfo","cookieBanner","isCookieBannerOpenByUrl"],!0));g.appConfig.dataSources&&Object.keys(g.appConfig.dataSources).forEach((e=>{g=g.setIn(["dataSourcesInfo",e,"instanceStatus"],d.e3.NotCreated)}));g=(0,p.updateControllerWidgetId)(g),(null===(l=window.jimuConfig)||void 0===l?void 0:l.isInBuilder)&&a.A.getInstance().initIdCounter(g.appConfig);return g}(e,t);case o.ActionKeys.LoadAppConfigFailed:return e.set("loadAppConfigError",t.error);case o.ActionKeys.SetPortalInfo:return t.portalInfo.portalUrl&&(e=e.set("portalUrl",t.portalInfo.portalUrl)),t.portalInfo.clientId&&(e=e.set("clientId",t.portalInfo.clientId)),void 0!==t.portalInfo.isWebTier&&(e=e.set("isWebTier",t.portalInfo.isWebTier)),e;case o.ActionKeys.SetPortalSelf:return function(e,t){var n;const r=null===(n=null==t?void 0:t.portalProperties)||void 0===n?void 0:n.sharedTheme,o=S(e.appConfig,r,e.portalUrl);let i=e.set("portalSelf",t);o&&(i=i.set("appConfig",o));return i}(e,t.portalSelf);case o.ActionKeys.AppConfigChanged:return function(e,t){return e=(0,p.updateStateWhenAppConfigChange)(e,t.appConfig),e=(0,p.updateControllerWidgetId)(e),e}(e,t);case o.ActionKeys.AppPathChanged:return function(e,t){var n;e=e.set("appPath",t.path);let r=(0,u.parseAppPath)(t.path,e.appConfig).pageId;!r&&(null===(n=null==e?void 0:e.appConfig)||void 0===n?void 0:n.pages)&&(r=e.appConfig&&Object.keys(e.appConfig.pages).find((t=>e.appConfig.pages[t].isDefault)));if(r){if(e.appRuntimeInfo.currentPageId===r)return e;e.appRuntimeInfo.currentPageId&&(e=x(e,e.appRuntimeInfo.currentPageId,r)),e=I(e=e.setIn(["appRuntimeInfo","currentPageId"],r),r)}return e}(e,t);case o.ActionKeys.AppInfoChanged:return e.set("appInfo",t.appInfo);case o.ActionKeys.AppContextInit:return e.set("appContext",t.appContext);case o.ActionKeys.AppIdChanged:return e.set("appId",t.appId);case o.ActionKeys.I18nMessagesLoaded:return function(e,t){0;return e.set("appI18nMessages",e.appI18nMessages.merge(t.messages))}(e,t);case o.ActionKeys.QueryObjectChanged:return function(e,t){var n,o,i,s,a,l,c;e=e.set("queryObject",r(t.query));const d=function(e){var t,n,r,o,i,s,a;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId)&&((null===(r=null===(n=e.appConfig.dialogs)||void 0===n?void 0:n[e.appRuntimeInfo.currentDialogId])||void 0===r?void 0:r.isSplash)||(null===(i=null===(o=e.appConfig.dialogs)||void 0===o?void 0:o[e.appRuntimeInfo.currentDialogId])||void 0===i?void 0:i.mode)===f.oM.Anchored||(null===(a=null===(s=e.appConfig.pages)||void 0===s?void 0:s[e.appRuntimeInfo.currentPageId])||void 0===a?void 0:a.autoOpenDialogId)===e.appRuntimeInfo.currentDialogId)}(e);if(t.query.dlg){const c=(0,u.getDialogIdFromIdOrLabel)(t.query.dlg,e.appConfig);if(!d&&c!==(null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.currentDialogId)&&(e.appRuntimeInfo.currentDialogId?e=P(e,e.appRuntimeInfo.currentDialogId,c):(null===(o=e.appRuntimeInfo.openedDialogIds)||void 0===o?void 0:o.includes(c))&&(e=P(e,null,c)),(e=e.setIn(["appRuntimeInfo","currentDialogId"],c)).appConfig)){(null===(i=e.appConfig.dialogs)||void 0===i?void 0:i[c])&&!function(e,t){var n,r;return(null===(r=null===(n=e.appConfig.dialogs)||void 0===n?void 0:n[t])||void 0===r?void 0:r.isSplash)||e.appConfig.pages&&Object.keys(e.appConfig.pages).find((n=>e.appConfig.pages[n].autoOpenDialogId===t))}(e,c)&&(e=b(e,c));const t=null===(s=e.appConfig.dialogs)||void 0===s?void 0:s[c];let n=(e.appRuntimeInfo.dialogInfos||r({})).setIn([c,"canClose"],!(null==t?void 0:t.interactionType)||!(null==t?void 0:t.confirmBeforeClose)).setIn([c,"checked"],!1).setIn([c,"isClosed"],!1);if(window.jimuConfig.isInBuilder&&(null===(l=null===(a=e.appConfig.pages)||void 0===a?void 0:a[e.appRuntimeInfo.currentPageId])||void 0===l?void 0:l.autoOpenDialogId)===c){const r=e.appRuntimeInfo.currentPageId+"-"+c;n=n.setIn([r,"canClose"],!(null==t?void 0:t.interactionType)||!(null==t?void 0:t.confirmBeforeClose)).setIn([r,"checked"],!1).setIn([r,"isClosed"],!1)}e=e.setIn(["appRuntimeInfo","dialogInfos"],n)}}else d||(e.appRuntimeInfo.currentDialogId&&(e=P(e,e.appRuntimeInfo.currentDialogId,null)),e=e.setIn(["appRuntimeInfo","currentDialogId"],null));if(t.query.views&&e.appConfig){const n=(0,u.getSectionNavInfoFromQueryObject)(t.query,e.appConfig);Object.keys(n).forEach((t=>{var r,o,i,s,a,l;if((null===(i=null===(o=null===(r=e.appRuntimeInfo)||void 0===r?void 0:r.sectionNavInfos)||void 0===o?void 0:o[t])||void 0===i?void 0:i.currentViewId)!==n[t].currentViewId){const r=(null===(l=null===(a=null===(s=e.appRuntimeInfo)||void 0===s?void 0:s.sectionNavInfos)||void 0===a?void 0:a[t])||void 0===l?void 0:l.currentViewId)||e.appConfig.sections[t].views[0],o=C(e,t,n[t]),i=o.currentViewId;r!==i&&(e=R(e,r,i)),e=e.setIn(["appRuntimeInfo","sectionNavInfos",t],o)}}))}if(!window.jimuConfig.useStructuralUrl){let n=(0,u.getPageIdFromIdOrLabel)(t.query.page,e.appConfig);!n&&(null===(c=null==e?void 0:e.appConfig)||void 0===c?void 0:c.pages)&&(n=e.appConfig&&Object.keys(e.appConfig.pages).find((t=>e.appConfig.pages[t].isDefault))),n&&n!==e.appRuntimeInfo.currentPageId&&(e.appRuntimeInfo.currentPageId&&(e=x(e,e.appRuntimeInfo.currentPageId,n)),e=I(e=e.setIn(["appRuntimeInfo","currentPageId"],n),n))}return e}(e,t);case o.ActionKeys.UrlHashObjectChanged:return function(e,t){return e=e.set("urlHashObject",r(t.hash)),e}(e,t);case o.ActionKeys.SetAppInBuilder:return e.set("appContext",e.appContext.merge({isInBuilder:!0}));case o.ActionKeys.WidgetClassLoaded:return function(e,t){const n=e.appConfig.widgets||{},r=Object.keys(n).filter((e=>n[e].uri===t));e=e.setIn(["widgetsClassStatus",t],!0);const o={};return r.forEach((e=>{o[e]={isClassLoaded:!0}})),e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.merge(o,{deep:!0})),e}(e,t.widgetUri);case o.ActionKeys.WidgetConfigLoaded:return e.setIn(["appConfig","widgets",t.widgetId,"config"],t.config);case o.ActionKeys.WidgetsUpgraded:return function(e,t,n){const o=Object.keys(e.appConfig.widgets).filter((n=>e.appConfig.widgets[n].uri===t));if(0===o.length)return e;const i=e.appConfig.widgets[o[0]].manifest.version;if(!n){const t={};return o.forEach((e=>{t[e]={version:i}})),e=e.setIn(["appConfig","widgets"],e.appConfig.widgets.merge(t,{deep:!0}))}const s={},a={},l={};return o.forEach((e=>{const t=n.find((t=>t.widgetJson.id===e));s[e]={version:i},t&&(a[e]=t.widgetJson,t.outputDataSourceJsons&&(Object.keys(t.outputDataSourceJsons).forEach((e=>{const n=t.outputDataSourceJsons[e];l[e]=n})),s[e].outputDataSources=Object.keys(t.outputDataSourceJsons)))})),e=e.setIn(["appConfig","widgets"],e.appConfig.widgets.merge(a,{deep:!0}).merge(s,{deep:!0})),e=e.setIn(["appConfig","dataSources"],(e.appConfig.dataSources||r({})).merge(l,{deep:!0})),e}(e,t.widgetUri,t.upgradeInfos);case o.ActionKeys.WidgetUpgraded:return function(e,t,n){const r=e.appConfig.widgets[t];if(!r)return e;if(!n)return e.setIn(["appConfig","widgets",t,"version"],r.manifest.version);const o=n.widgetJson.set("version",n.widgetJson.manifest.version);if(e=e.setIn(["appConfig","widgets",t],o),!n.outputDataSourceJsons)return e;return Object.keys(n.outputDataSourceJsons).forEach((t=>{const r=n.outputDataSourceJsons[t];e=e.setIn(["appConfig","dataSources",t],r)})),e=e.setIn(["appConfig","widgets",t,"outputDataSources"],Object.keys(n.outputDataSourceJsons)),e}(e,t.widgetId,t.upgradeInfo);case o.ActionKeys.WidgetToolbarStateChange:return function(e,t,n){return n.forEach((n=>{var r,o,i,s;let a=null===(s=null===(i=null===(o=null===(r=e.widgetsRuntimeInfo)||void 0===r?void 0:r[t])||void 0===o?void 0:o.layoutItemTools)||void 0===i?void 0:i[n])||void 0===s?void 0:s.version;a>0?a+=1:a=1,e=e.setIn(["widgetsRuntimeInfo",t,"layoutItemTools",n,"version"],a)})),e}(e,t.widgetId,t.toolNames);case o.ActionKeys.WidgetRuntimeInfoChange:return e.setIn(["widgetsRuntimeInfo",t.widgetId,t.prop],t.value);case o.ActionKeys.OpenWidget:return E(e,t.widgetId);case o.ActionKeys.OpenWidgets:return function(e,t){return t.forEach((t=>{e=E(e,t)})),e}(e,t.widgetIds);case o.ActionKeys.CloseWidget:return A(e,t.widgetId);case o.ActionKeys.CloseWidgets:return function(e,t){return t.forEach((t=>{e=A(e,t)})),e}(e,t.widgetIds);case o.ActionKeys.HideWidgetsInLayout:return D(e,t.layoutId);case o.ActionKeys.ShowWidgetsInLayout:return _(e,t.layoutId);case o.ActionKeys.HideWidgetsInLayoutItem:return L(e,t.layoutInfo);case o.ActionKeys.ShowWidgetsInLayoutItem:return M(e,t.layoutInfo);case o.ActionKeys.ShowWidgetsInLayoutItems:return function(e,t){return t.forEach((t=>{e=M(e,t)})),e}(e,t.layoutInfos);case o.ActionKeys.HideWidgetsInLayoutItems:return function(e,t){return t.forEach((t=>{e=L(e,t)})),e}(e,t.layoutInfos);case o.ActionKeys.ResetWidgetsState:return function(e,t){return t.forEach((t=>{e=function(e,t){var n;let r=null===(n=e.widgetsRuntimeInfo)||void 0===n?void 0:n[t];return r?(r=r.without("state"),e.setIn(["widgetsRuntimeInfo",t],r)):e}(e,t)})),e}(e,t.widgetIds);case o.ActionKeys.ActivateWidget:return function(e,t){var n,r;const o=Object.keys(e.widgetsRuntimeInfo).filter((t=>e.widgetsRuntimeInfo[t].state===i.YG.Active));e.appConfig.widgets[t].manifest.properties.deactivateOtherWidgets&&o.forEach((t=>{e=e.setIn(["widgetsRuntimeInfo",t,"state"],i.YG.Opened)}));(null===(r=null===(n=e.appConfig.widgets[t])||void 0===n?void 0:n.manifest)||void 0===r?void 0:r.properties.needActiveState)&&(e=e.setIn(["widgetsRuntimeInfo",t,"state"],i.YG.Active));return e}(e,t.widgetId);case o.ActionKeys.SetWidgetIsInlineEditingState:return t.isInlineEditing?(Object.keys(e.widgetsRuntimeInfo).forEach((t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!0)):e.setIn(["widgetsRuntimeInfo",t.widgetId,"isInlineEditing"],!1);case o.ActionKeys.SetWidgetPreloadProps:return e.setIn(["widgetsPreloadProps",t.widgetId],t.props);case o.ActionKeys.SetDataSourcePreloadData:return e.setIn(["dataSourcesPreloadData",t.dataSourceId],t.data);case o.ActionKeys.LayoutClassLoaded:return e.setIn(["isLayoutClassLoaded",t.layoutName],!0);case o.ActionKeys.DataSourceInstanceStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"instanceStatus"],t.status);case o.ActionKeys.DataSourceStatusChanged:return w(e,t.dataSourceId,"status",t.status,t.dataSourceManager);case o.ActionKeys.DataSourceCountStatusChanged:return w(e,t.dataSourceId,"countStatus",t.countStatus,t.dataSourceManager);case o.ActionKeys.DataSourceSaveStatusChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"saveStatus"],t.saveStatus);case o.ActionKeys.DataSourceVersionAdded:const V=e.dataSourcesInfo[t.dataSourceId]&&e.dataSourcesInfo[t.dataSourceId].version?e.dataSourcesInfo[t.dataSourceId].version:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"version"],V+1);case o.ActionKeys.DataSourceSourceVersionAdded:const G=null!==(h=null===(c=null===(n=e.dataSourcesInfo)||void 0===n?void 0:n[t.dataSourceId])||void 0===c?void 0:c.sourceVersion)&&void 0!==h?h:0;return e.setIn(["dataSourcesInfo",t.dataSourceId,"sourceVersion"],G+1);case o.ActionKeys.ChangeDataSourceGDBVersion:return e.setIn(["dataSourcesInfo",t.dataSourceId,"gdbVersion"],t.gdbVersion);case o.ActionKeys.ClearDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.without(t.dataSourceId));case o.ActionKeys.UpdateDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.set(t.dataSourceId,t.dataSourceInfo));case o.ActionKeys.BatchUpdateDataSourceInfo:return e.setIn(["dataSourcesInfo"],e.dataSourcesInfo.merge(t.dataSourcesInfo));case o.ActionKeys.JimuMapViewAdded:case o.ActionKeys.JimuMapViewUpdated:return e.setIn(["jimuMapViewsInfo",t.jimuMapViewId],t.jimuMapViewInfo);case o.ActionKeys.JimuMapViewRemoved:let W=null;return W=e.jimuMapViewsInfo.without(t.jimuMapViewId),e.setIn(["jimuMapViewsInfo"],W);case o.ActionKeys.RequestAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],t.autoControlWidgetId);case o.ActionKeys.ReleaseAutoControlMapWidget:return e.setIn(["mapWidgetsInfo",t.mapWidgetId,"autoControlWidgetId"],null);case o.ActionKeys.MapWidgetInfoAdded:case o.ActionKeys.MapWidgetInfoUpdated:return e.setIn(["mapWidgetsInfo",t.mapWidgetId],t.mapWidgetInfo);case o.ActionKeys.MapWidgetInfoRemoved:let H=null;return H=e.mapWidgetsInfo.without(t.mapWidgetId),e.setIn(["mapWidgetsInfo"],H);case o.ActionKeys.DataSourceSelectedIndexesChanged:return e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],t.selectedIndexes).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],null).setIn(["dataSourcesInfo",t.dataSourceId,"selectOptions"],null);case o.ActionKeys.DataSourceSelectionChanged:const q=null===(g=t.selectOptions)||void 0===g?void 0:g.records;return t.selectOptions=t.selectOptions?Object.assign({},t.selectOptions):t.selectOptions,null===(v=t.selectOptions)||void 0===v||delete v.records,e.setIn(["dataSourcesInfo",t.dataSourceId,"selectedIds"],(null==q?void 0:q.map((e=>e.getId())))||(null===(y=t.selectOptions)||void 0===y?void 0:y.ids)).setIn(["dataSourcesInfo",t.dataSourceId,"selectedIndexes"],null).setIn(["dataSourcesInfo",t.dataSourceId,"selectOptions"],(null===(T=t.selectOptions)||void 0===T?void 0:T.widgetId)?t.selectOptions:null);case o.ActionKeys.SetDataNeedRefresh:return e.setIn(["dataSourcesInfo",t.dataSourceId,"needRefresh"],t.refresh);case o.ActionKeys.SetDataLastRefreshTime:return e.setIn(["dataSourcesInfo",t.dataSourceId,"lastAutoRefreshCheckTime"],t.lastAutoRefreshCheckTime);case o.ActionKeys.UpdateWidgetQuery:return e.setIn(["dataSourcesInfo",t.dataSourceId,"widgetQueries",t.widgetId],t.query);case o.ActionKeys.WidgetStatePropChange:return function(e,t){const n=t.propKey.split(".");return e.setIn(["widgetsState",t.widgetId].concat(n),t.value)}(e,t);case o.ActionKeys.WidgetMutableStatePropChange:return function(e,t){var n,r;let o=null!==(r=null===(n=e.widgetsMutableStateVersion[t.widgetId])||void 0===n?void 0:n[t.propKey])&&void 0!==r?r:0;return e.setIn(["widgetsMutableStateVersion",t.widgetId,t.propKey],++o)}(e,t);case o.ActionKeys.UserSignIn:return e.set("user",r(t.user));case o.ActionKeys.UserSignOut:return e.merge({user:null});case o.ActionKeys.BrowserSizeModeChanged:return e=e.set("browserSizeMode",t.browserSizeMode),e=(0,p.updateControllerWidgetId)(e);case o.ActionKeys.NetworkStatusChanged:return e.set("isNetworkOffLine",t.isOffLine);case o.ActionKeys.CurrentPageChanged:return e.appRuntimeInfo.currentPageId===t.pageId?e:(e.appRuntimeInfo.currentPageId&&(e=x(e,e.appRuntimeInfo.currentPageId,t.pageId)),I(e=e.setIn(["appRuntimeInfo","currentPageId"],t.pageId),t.pageId));case o.ActionKeys.CurrentDialogChanged:return e.appRuntimeInfo.currentDialogId===t.dialogId?e:(e.appRuntimeInfo.currentDialogId?e=P(e,e.appRuntimeInfo.currentDialogId,t.dialogId):(null===(k=e.appRuntimeInfo.openedDialogIds)||void 0===k?void 0:k.includes(t.dialogId))&&(e=P(e,null,t.dialogId)),t.dialogId&&(null===(N=e.appConfig.dialogs[t.dialogId])||void 0===N?void 0:N.mode)===f.oM.Anchored&&(e=b(e,t.dialogId)),e.setIn(["appRuntimeInfo","currentDialogId"],t.dialogId));case o.ActionKeys.SelectionChanged:return function(e,t){var n,r;if(Object.keys(e.widgetsRuntimeInfo).forEach((t=>{e.widgetsRuntimeInfo[t].isInlineEditing&&(e=e.setIn(["widgetsRuntimeInfo",t,"isInlineEditing"],!1))})),t){const{layoutId:o,layoutItemId:i}=t;if(!(null===(r=null===(n=e.appConfig.layouts[o])||void 0===n?void 0:n.content)||void 0===r?void 0:r[i]))return e=e.setIn(["appRuntimeInfo","selection"],null)}return e=e.setIn(["appRuntimeInfo","selection"],t),e}(e,t.selection);case o.ActionKeys.AppModeChanged:return e.setIn(["appRuntimeInfo","appMode"],t.mode).setIn(["appRuntimeInfo","animationPreview"],null).setIn(["appRuntimeInfo","hoverPreview"],null).setIn(["appRuntimeInfo","openedControllerInfo"],null);case o.ActionKeys.AppRuntimeInfoInit:return e.set("appRuntimeInfo",t.info);case o.ActionKeys.UpdateStoreState:return t.state;case o.ActionKeys.ThemeVariablesChanged:return e.set("theme",r(t.theme));case o.ActionKeys.ActivePagePartChanged:return e.setIn(["appRuntimeInfo","activePagePart"],t.part);case o.ActionKeys.OpenOverlay:return function(e,t,n){if(!O(t))return e;if(n&&!O(n))return e;if(e.overlays.includes(t))return e;const r=function(e,t,n){if(t.startsWith("modal_"))return e.push(t),e;let r=n?e.indexOf(n):0;const o=n?r+1:0;if(o===e.length)r=e.length+1;else for(let t=o;t<e.length;t++){if(!e[t].startsWith("popper_")){r=t;break}r=t+1}return e.splice(r,0,t),e}(e.overlays.asMutable(),t,n);return e.set("overlays",r)}(e,t.id,t.modalId);case o.ActionKeys.CloseOverlay:return(null==e?void 0:e.overlays.includes(t.id))?e.set("overlays",e.overlays.filter((e=>e!==t.id))):e;case o.ActionKeys.ActiveOverlay:let z=null==e?void 0:e.overlays;if(!(null==z?void 0:z.includes(t.id)))return e;return(null==z?void 0:z.indexOf(t.id))===(null==z?void 0:z.length)-1?e:(z=z.filter((e=>e!==t.id)),z=z.concat([t.id]),e.set("overlays",z));case o.ActionKeys.SetIsBusy:return e.setIn(["appRuntimeInfo","isBusy"],t.isBusy).setIn(["appRuntimeInfo","loadingType"],t.loadingType).setIn(["appRuntimeInfo","loadingText"],t.loadingText);case o.ActionKeys.ZoomScaleChanged:return e.setIn(["appRuntimeInfo","zoomScale"],t.zoomScale);case o.ActionKeys.ClipboardChanged:return e.setIn(["appRuntimeInfo","clipboard"],t.item);case o.ActionKeys.SectionNavInfoChanged:{const n=C(e,t.sectionId,t.navInfo);if(n.currentViewId!==(null===(U=null===(j=e.appRuntimeInfo.sectionNavInfos)||void 0===j?void 0:j[t.sectionId])||void 0===U?void 0:U.currentViewId)){const r=(null===(B=null===(F=e.appRuntimeInfo.sectionNavInfos)||void 0===F?void 0:F[t.sectionId])||void 0===B?void 0:B.currentViewId)||e.appConfig.sections[t.sectionId].views[0];e=R(e,r,n.currentViewId)}return e.setIn(["appRuntimeInfo","sectionNavInfos",t.sectionId],n)}case o.ActionKeys.ScreenGroupNavInfoChanged:return e.setIn(["appRuntimeInfo","screenGroupNavInfos",t.screenGroupId],{activeIndex:t.activeIndex,scrollIntoView:t.scrollIntoView});case o.ActionKeys.DialogInfosChanged:return e.setIn(["appRuntimeInfo","dialogInfos"],t.dialogInfos);case o.ActionKeys.SetupAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("hoverPreview")).setIn(["appRuntimeInfo","animationPreview"],t.data);case o.ActionKeys.ClearAnimationPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview"));case o.ActionKeys.SetupHoverPreview:return e.set("appRuntimeInfo",e.appRuntimeInfo.without("animationPreview")).setIn(["appRuntimeInfo","hoverPreview"],t.data);case o.ActionKeys.UserLocaleChanged:return e.set("userLocaleChanged",t.isChanged);case o.ActionKeys.HasPrivilegeChanged:return t.hasPrivilege?e.set("hasPrivilege",!0).set("privilegeError",""):e.set("hasPrivilege",!1).set("privilegeError",t.errorMessage);case o.ActionKeys.AddToRegisterClientIdList:{let n=null==e?void 0:e.portalsNeedToRegisterClientId;return(null==n?void 0:n.find((e=>e.portalUrl===t.portalUrl)))?e:(n=n.concat([{portalUrl:t.portalUrl,needToSignIn:t.needToSignIn,forceLogin:t.forceLogin,serviceUrl:t.serviceUrl}]),e.set("portalsNeedToRegisterClientId",n))}case o.ActionKeys.RemoveFromRegisterClientIdList:{let n=null==e?void 0:e.portalsNeedToRegisterClientId;return(null==n?void 0:n.find((e=>e.portalUrl===t.portalUrl)))?(n=n.filter((e=>e.portalUrl!==t.portalUrl)),e.set("portalsNeedToRegisterClientId",n)):e}case o.ActionKeys.UpdateNoPermissionResourceChangedFlag:return e.set("noPermissionResourceChangedFlag",(0,m.A)());case o.ActionKeys.UpdateResourceSessions:{const n=Object.assign({},e.resourceSessions);return n[t.resourceRootUrl]=t.userName,e.set("resourceSessions",n)}case o.ActionKeys.ScreenPanelVisibleChange:return e.setIn(["appRuntimeInfo","screenPanelStates",t.screenId],t.visible);case o.ActionKeys.ActivePrintPreview:return e.setIn(["appRuntimeInfo","isPrintPreview"],!0);case o.ActionKeys.QuitPrintPreview:return e.setIn(["appRuntimeInfo","isPrintPreview"],!1);case o.ActionKeys.UtilityStateChange:{const n={success:t.success};return t.success||(n.isSignInError=null!==($=t.isSignInError)&&void 0!==$&&$),e.setIn(["appRuntimeInfo","utilityStates",t.id],n)}case o.ActionKeys.SaveThumbnailUrl:return e.setIn(["appRuntimeInfo","saveThumbnailUrl"],t.saveThumbnailUrl);case o.ActionKeys.OpenCookieBannerSetting:return e.setIn(["appRuntimeInfo","cookieBanner","isCookieBannerSettingOpen"],t.isSettingOpen);case o.ActionKeys.OpenCookieSettingsWindow:return e.setIn(["appRuntimeInfo","cookieBanner","isCookieSettingsWindowOpen"],t.isCookieSettingsWindowOpen);case o.ActionKeys.OpenCookieBannerByPrivacyPanel:return e.setIn(["appRuntimeInfo","cookieBanner","isCookieBannerOpenByPrivacyPanel"],t.isCookieBannerOpenByPrivacyPanel);case o.ActionKeys.OpenCookieBannerByUrl:return e.setIn(["appRuntimeInfo","cookieBanner","isCookieBannerOpenByUrl"],t.isCookieBannerOpenByUrl);case o.ActionKeys.CurrentGuideChange:return e.set("guideId",t.guideId).set("shouldCheckGuideDisplay",t.shouldCheckGuideDisplay);case o.ActionKeys.ChangeDynamicStylePreviewConditionInfo:return function(e,t){return e.setIn(["dynamicStyleState","previewConditionInfo",t.widgetId],t.value)}(e,t);case o.ActionKeys.ChangeDynamicStylePreviewRepeatedRecordInfo:return function(e,t){return e.setIn(["dynamicStyleState","previewRepeatedRecordInfo",t.widgetId],t.value)}(e,t);default:return function(e,t){const n=s.A.getInstance().getExtensions(l.ExtensionPoints.ReduxStore);for(let r=0;r<n.length;r++){const o=n[r];if(o.getActions().includes(t.type)){const n=o.getStoreKey().split("."),r=e.getIn(n);return e.setIn(n,o.getReducer()(r,t,e))}}return e}(e,t)}}function S(e,t,n){var r,o,i;if(!(e&&(null===(r=e.attributes)||void 0===r?void 0:r.portalUrl)&&t&&n))return;if(e.attributes.portalUrl!==n)return;const s=(0,h.createSharedThemeVariables)(t);return(0,g.A)(s,null===(i=null===(o=e.sharedThemeVariables)||void 0===o?void 0:o.asMutable)||void 0===i?void 0:i.call(o,{deep:!0}))?void 0:e=e.set("sharedThemeVariables",s)}function I(e,t){var n;let r;return r=e.appConfig&&e.appConfig.pages?e.appConfig.pages[t]:{},e.setIn(["appRuntimeInfo","activeLayout"],null!==(n=null==r?void 0:r.layout)&&void 0!==n?n:null).setIn(["appRuntimeInfo","selection"],null)}function b(e,t){const n=e.appRuntimeInfo.openedDialogIds||[];return e.setIn(["appRuntimeInfo","openedDialogIds"],n.includes(t)?n:[...n,t])}function w(e,t,n,r,o){var i;let s=e.setIn(["dataSourcesInfo",t,n],r);const a=null==o?void 0:o.getDataSource(t);return(null===(i=null==a?void 0:a.getDataSourceJson())||void 0===i?void 0:i.isOutputFromWidget)&&(r!==d.e3.Unloaded&&r!==d.e3.NotReady||a.getAllDerivedDataSources().forEach((e=>{s=s.setIn(["dataSourcesInfo",e.id,n],r)}))),s}function E(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],i.YG.Opened)}function A(e,t){return e.setIn(["widgetsRuntimeInfo",t,"state"],i.YG.Closed)}function O(e){return e.startsWith("popper_")||e.startsWith("modal_")}function C(e,t,n){var r,o,i,s,a,l;let u,c;if("asMutable"in n&&(n=n.asMutable({deep:!0})),(null===(r=n.visibleViews)||void 0===r?void 0:r.length)>0?(c=n.visibleViews,u=n.visibleViews.length):(c=null!==(i=null===(o=e.appConfig.sections[t])||void 0===o?void 0:o.views)&&void 0!==i?i:[],u=null!==(s=null==c?void 0:c.length)&&void 0!==s?s:0),n.useProgress&&(!n.currentViewId||!n.previousViewId)){const{currentIndex:e,previousIndex:t}=function(e,t){let n,r;const o=T(e,0,1)*(t-1),i=Math.floor(o);r=i,r=function(e){return Math.abs(e-Math.round(e))<1e-7}(o)?Math.round(o)-1:i;return n=r+1,n=T(n,0,t-1),r=T(r,0,t-1),{previousIndex:r,progress:o,currentIndex:n}}(n.progress,u);n.currentViewId=c[e],n.previousViewId=c[t]}if(null==n.progress){const e=c.indexOf(n.currentViewId);n.progress=c.length>1?e/(c.length-1):1}if(null==n.previousViewId){const r=null===(l=null===(a=e.appRuntimeInfo)||void 0===a?void 0:a.sectionNavInfos)||void 0===l?void 0:l[t];if(null==r?void 0:r.currentViewId)n.previousViewId=r.currentViewId;else{const e=c.indexOf(n.currentViewId);n.previousViewId=e>0?c[e-1]:c[u-1]}}return n}function T(e,t,n){return Math.max(t,Math.min(e,n))}function x(e,t,n){var r,o;const{searchUtils:i}=(0,v.getModuleSync)("jimu-layouts/layout-runtime"),s=null===(r=e.appConfig.pages)||void 0===r?void 0:r[t],a=null===(o=e.appConfig.pages)||void 0===o?void 0:o[n];if(!s||!a)return e;if(e=D(e,i.findLayoutId(s.layout,e.browserSizeMode,e.appConfig.mainSizeMode)),s.header&&!a.header){e=D(e,i.findLayoutId(e.appConfig.header.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}if(s.footer&&!a.footer){e=D(e,i.findLayoutId(e.appConfig.footer.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}if(e=_(e,i.findLayoutId(a.layout,e.browserSizeMode,e.appConfig.mainSizeMode)),!s.header&&a.header){e=_(e,i.findLayoutId(e.appConfig.header.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}if(!s.footer&&a.footer){e=_(e,i.findLayoutId(e.appConfig.footer.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}return e}function R(e,t,n){var r,o;const{searchUtils:i}=(0,v.getModuleSync)("jimu-layouts/layout-runtime"),s=null===(r=e.appConfig.views)||void 0===r?void 0:r[t],a=null===(o=e.appConfig.views)||void 0===o?void 0:o[n];if(!s||!a)return e;return e=_(e=D(e,i.findLayoutId(s.layout,e.browserSizeMode,e.appConfig.mainSizeMode)),i.findLayoutId(a.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}function P(e,t,n){var r,o;const{searchUtils:i}=(0,v.getModuleSync)("jimu-layouts/layout-runtime");if(t){const n=null===(r=e.appConfig.dialogs)||void 0===r?void 0:r[t];if(!n)return e;e=D(e,i.findLayoutId(n.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}if(n){const t=null===(o=e.appConfig.dialogs)||void 0===o?void 0:o[n];if(!t)return e;e=_(e,i.findLayoutId(t.layout,e.browserSizeMode,e.appConfig.mainSizeMode))}return e}function D(e,t){const{searchUtils:n}=(0,v.getModuleSync)("jimu-layouts/layout-runtime");if(!e.appConfig.layouts[t])return e;const r=n.getContentsInLayoutRecursive(e.appConfig,t,c.K.Widget,e.browserSizeMode,!1),o={};return r.forEach((t=>{e.appConfig.widgets[t].manifest.properties.needHiddenState&&(o[t]={state:i.YG.Hidden})})),e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.merge(o,{deep:!0}))}function _(e,t,n){const{searchUtils:r}=(0,v.getModuleSync)("jimu-layouts/layout-runtime");if(!e.appConfig.layouts[t])return e;const o=r.getVisibleWidgetsInLayoutRecursive(e,t,e.browserSizeMode,n),i={};return o.forEach((t=>{e.appConfig.widgets[t].manifest.properties.needHiddenState&&(i[t]={state:void 0})})),e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.merge(i,{deep:!0}))}function L(e,t){var n,r,o;const{searchUtils:s}=(0,v.getModuleSync)("jimu-layouts/layout-runtime"),a=null===(r=null===(n=e.appConfig.layouts[t.layoutId])||void 0===n?void 0:n.content)||void 0===r?void 0:r[t.layoutItemId];if(!a)return e;if(a.type===c.K.Widget){const t=a.widgetId;(null===(o=e.appConfig.widgets[t])||void 0===o?void 0:o.manifest.properties.needHiddenState)&&(e=e.setIn(["widgetsRuntimeInfo",t,"state"],i.YG.Hidden))}return s.getLayoutIdsInLayoutItem(e,t,!1).forEach((t=>{e=D(e,t)})),e}function M(e,t){var n,r,o;const{searchUtils:i}=(0,v.getModuleSync)("jimu-layouts/layout-runtime"),s=null===(r=null===(n=e.appConfig.layouts[t.layoutId])||void 0===n?void 0:n.content)||void 0===r?void 0:r[t.layoutItemId];if(!s)return e;if(s.type===c.K.Widget){const t=s.widgetId;(null===(o=e.appConfig.widgets[t])||void 0===o?void 0:o.manifest.properties.needHiddenState)&&(e=e.setIn(["widgetsRuntimeInfo",t,"state"],void 0))}return i.getLayoutIdsInLayoutItem(e,t,!0).forEach((t=>{e=_(e,t)})),e}var k=n(4644);let N;function j(e){return N||(N=(0,k.Yl)(y,e,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__({stateSanitizer:e=>e.appConfig?"1"===e.queryObject.__log_app_config_in_redux__||"true"===e.queryObject.__log_app_config_in_redux__?e:e.set("appConfig","<<appConfig>>"):e})),window._appStore=N,N)}function U(){return N}function F(e,t){let n;function r(){let r=N.getState();t?(r=r.getIn(t),r!==n&&(e(n,r),n=r)):r!==n&&(e(n,r),n=r)}const o=N.subscribe(r);return r(),o}},1071:(e,t,n)=>{"use strict";n.d(t,{RK:()=>s,TT:()=>r,hN:()=>a});var r,o=n(4293),i=n(1732);function s(e){return"function"==typeof e}function a(e,t,n,l,u,c,d){if(1===e.length&&(0,o.eW)(e[0]))return[{type:r.literal,value:e[0].value}];for(var p=[],f=0,h=e;f<h.length;f++){var g=h[f];if((0,o.eW)(g))p.push({type:r.literal,value:g.value});else if((0,o.jA)(g))"number"==typeof c&&p.push({type:r.literal,value:n.getNumberFormat(t).format(c)});else{var m=g.value;if(!u||!(m in u))throw new i.Ei(m,d);var v=u[m];if((0,o.Im)(g))v&&"string"!=typeof v&&"number"!=typeof v||(v="string"==typeof v||"number"==typeof v?String(v):""),p.push({type:"string"==typeof v?r.literal:r.object,value:v});else if((0,o.tv)(g)){var y="string"==typeof g.style?l.date[g.style]:(0,o.Tu)(g.style)?g.style.parsedOptions:void 0;p.push({type:r.literal,value:n.getDateTimeFormat(t,y).format(v)})}else if((0,o.Qh)(g)){y="string"==typeof g.style?l.time[g.style]:(0,o.Tu)(g.style)?g.style.parsedOptions:l.time.medium;p.push({type:r.literal,value:n.getDateTimeFormat(t,y).format(v)})}else if((0,o.oF)(g)){(y="string"==typeof g.style?l.number[g.style]:(0,o.N1)(g.style)?g.style.parsedOptions:void 0)&&y.scale&&(v*=y.scale||1),p.push({type:r.literal,value:n.getNumberFormat(t,y).format(v)})}else{if((0,o.xm)(g)){var S=g.children,I=g.value,b=u[I];if(!s(b))throw new i.Zo(I,"function",d);var w=b(a(S,t,n,l,u,c).map((function(e){return e.value})));Array.isArray(w)||(w=[w]),p.push.apply(p,w.map((function(e){return{type:"string"==typeof e?r.literal:r.object,value:e}})))}if((0,o.Jp)(g)){if(!(E=g.options[v]||g.options.other))throw new i.$x(g.value,v,Object.keys(g.options),d);p.push.apply(p,a(E.value,t,n,l,u))}else if((0,o.N6)(g)){var E;if(!(E=g.options["=".concat(v)])){if(!Intl.PluralRules)throw new i.IF('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',i.O4.MISSING_INTL_API,d);var A=n.getPluralRules(t,{type:g.pluralType}).select(v-(g.offset||0));E=g.options[A]||g.options.other}if(!E)throw new i.$x(g.value,v,Object.keys(g.options),d);p.push.apply(p,a(E.value,t,n,l,u,v-(g.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var n=e[e.length-1];return n&&n.type===r.literal&&t.type===r.literal?n.value+=t.value:e.push(t),e}),[])}(p)}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(r||(r={}))},1100:e=>{e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},1121:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=Function.prototype.toString;const o=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},1123:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),o=t.test(n);return r&&o&&(e=+e,n=+n),e===n?0:r&&!o?-1:o&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},1200:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(1917);const o=function(){return!1};var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===i?r.A.Buffer:void 0;const l=(a?a.isBuffer:void 0)||o},1219:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M15 3.6 11.4 0H2v16h13zM14 15H3V1h7v4h4zM11 4h3v-.31L11.31 1H11zM7 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0M5 7.5h7v-1H5z" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M9 10H6v2h3zM5 9v4h5V9z" clip-rule="evenodd"></path></svg>'},1261:(e,t,n)=>{const r=n(3908),o=n(8311),i=n(5580);e.exports=(e,t)=>{e=new o(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let s=null;o.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!i(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!i(n,s)||(n=s)}return n&&e.test(n)?n:null}},1330:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path><path fill="#000" fill-rule="evenodd" d="m11.002 7.002-3 3-3-3v-4a2.893 2.893 0 0 1 3-3 2.893 2.893 0 0 1 3 3zm-3-6h-.038a1.893 1.893 0 0 0-1.963 1.962l.001.018v3.606l2 2 2-2V2.964A1.894 1.894 0 0 0 8.04 1z" clip-rule="evenodd"></path><path fill="#000" d="M4.072 1.908a10.4 10.4 0 0 1-1.939-.433L0 13.077c1.2.504 2.493.746 3.793.711A10.7 10.7 0 0 0 7 13.31v1.678H2v1h11v-1H8v-2a11.9 11.9 0 0 1 4.207-.8A6.62 6.62 0 0 1 16 13.277L13.867 1.674a8.2 8.2 0 0 0-2.236-.61 3.5 3.5 0 0 1 .336 1.066q.514.097 1.009.27l1.72 9.163a8.3 8.3 0 0 0-2.489-.376 12.8 12.8 0 0 0-4.526.852l-.604.204-.363.108a9.7 9.7 0 0 1-2.921.436 9.5 9.5 0 0 1-2.668-.363l1.81-9.697q.53.115 1.068.18v-.173a3.4 3.4 0 0 1 .069-.826"></path></svg>'},1468:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Provider:()=>te,ReactReduxContext:()=>Y,batch:()=>de,connect:()=>ee,createDispatchHook:()=>se,createSelectorHook:()=>ue,createStoreHook:()=>oe,shallowEqual:()=>M,useDispatch:()=>ae,useSelector:()=>ce,useStore:()=>ie});var r=n(8972),o=n(8418),i=r.version.startsWith("19"),s=Symbol.for(i?"react.transitional.element":"react.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=f,S=m;function I(e){if("object"==typeof e&&null!==e){const{$$typeof:t}=e;switch(t){case s:switch(e=e.type){case l:case c:case u:case h:case g:return e;default:switch(e=e&&e.$$typeof){case p:case f:case v:case m:case d:return e;default:return t}}case a:return t}}}function b(e,t,n,r,{areStatesEqual:o,areOwnPropsEqual:i,areStatePropsEqual:s}){let a,l,u,c,d,p=!1;function f(p,f){const h=!i(f,l),g=!o(p,a,f,l);return a=p,l=f,h&&g?(u=e(a,l),t.dependsOnOwnProps&&(c=t(r,l)),d=n(u,c,l),d):h?(e.dependsOnOwnProps&&(u=e(a,l)),t.dependsOnOwnProps&&(c=t(r,l)),d=n(u,c,l),d):g?function(){const t=e(a,l),r=!s(t,u);return u=t,r&&(d=n(u,c,l)),d}():d}return function(o,i){return p?f(o,i):(a=o,l=i,u=e(a,l),c=t(r,l),d=n(u,c,l),p=!0,d)}}function w(e){return function(t){const n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function E(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function A(e,t){return function(t,{displayName:n}){const r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=E(e);let o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=E(o),o=r(t,n)),o},r}}function O(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function C(e,t,n){return{...n,...e,...t}}function T(e){e()}var x={notify(){},get:()=>[]};function R(e,t){let n,r=x,o=0,i=!1;function s(){u.onStateChange&&u.onStateChange()}function a(){o++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){T((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){r&&null!==e&&(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}())}function l(){o--,n&&0===o&&(n(),n=void 0,r.clear(),r=x)}const u={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,a())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>r};return u}var P=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),D=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),_=(()=>P||D?r.useLayoutEffect:r.useEffect)();function L(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function M(e,t){if(L(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!L(e[n[r]],t[n[r]]))return!1;return!0}var k={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},N={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},j={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},U={[y]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[S]:j};function F(e){return I(e)===m?j:U[e.$$typeof]||k}var B=Object.defineProperty,$=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,G=Object.getOwnPropertyDescriptor,W=Object.getPrototypeOf,H=Object.prototype;function q(e,t){if("string"!=typeof t){if(H){const n=W(t);n&&n!==H&&q(e,n)}let n=$(t);V&&(n=n.concat(V(t)));const r=F(e),o=F(t);for(let i=0;i<n.length;++i){const s=n[i];if(!(N[s]||o&&o[s]||r&&r[s])){const n=G(t,s);try{B(e,s,n)}catch(e){}}}}return e}var z=Symbol.for("react-redux-context"),K="undefined"!=typeof globalThis?globalThis:{};function J(){if(!r.createContext)return{};const e=K[z]??=new Map;let t=e.get(r.createContext);return t||(t=r.createContext(null),e.set(r.createContext,t)),t}var Y=J(),Q=[null,null];function X(e,t,n,r,o,i){e.current=r,n.current=!1,o.current&&(o.current=null,i())}function Z(e,t){return e===t}var ee=function(e,t,n,{pure:o,areStatesEqual:i=Z,areOwnPropsEqual:s=M,areStatePropsEqual:a=M,areMergedPropsEqual:l=M,forwardRef:u=!1,context:c=Y}={}){const d=c,p=function(e){return e?"function"==typeof e?A(e):O(e,"mapStateToProps"):w((()=>({})))}(e),f=function(e){return e&&"object"==typeof e?w((t=>function(e,t){const n={};for(const r in e){const o=e[r];"function"==typeof o&&(n[r]=(...e)=>t(o(...e)))}return n}(e,t))):e?"function"==typeof e?A(e):O(e,"mapDispatchToProps"):w((e=>({dispatch:e})))}(t),h=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:n,areMergedPropsEqual:r}){let o,i=!1;return function(t,n,s){const a=e(t,n,s);return i?r(a,o)||(o=a):(i=!0,o=a),o}}}(e):O(e,"mergeProps"):()=>C}(n),g=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",n=`Connect(${t})`,o={shouldHandleStateChanges:g,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:p,initMapDispatchToProps:f,initMergeProps:h,areStatesEqual:i,areStatePropsEqual:a,areOwnPropsEqual:s,areMergedPropsEqual:l};function c(t){const[n,i,s]=r.useMemo((()=>{const{reactReduxForwardedRef:e,...n}=t;return[t.context,e,n]}),[t]),a=r.useMemo((()=>d),[n,d]),l=r.useContext(a),u=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),c=Boolean(l)&&Boolean(l.store);const p=u?t.store:l.store,f=c?l.getServerState:p.getState,h=r.useMemo((()=>function(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:r,...o}){return b(t(e,o),n(e,o),r(e,o),e,o)}(p.dispatch,o)),[p]),[m,v]=r.useMemo((()=>{if(!g)return Q;const e=R(p,u?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,u,l]),y=r.useMemo((()=>u?l:{...l,subscription:m}),[u,l,m]),S=r.useRef(void 0),I=r.useRef(s),w=r.useRef(void 0),E=r.useRef(!1),A=r.useRef(!1),O=r.useRef(void 0);_((()=>(A.current=!0,()=>{A.current=!1})),[]);const C=r.useMemo((()=>()=>w.current&&s===I.current?w.current:h(p.getState(),s)),[p,s]),T=r.useMemo((()=>e=>m?function(e,t,n,r,o,i,s,a,l,u,c){if(!e)return()=>{};let d=!1,p=null;const f=()=>{if(d||!a.current)return;const e=t.getState();let n,f;try{n=r(e,o.current)}catch(e){f=e,p=e}f||(p=null),n===i.current?s.current||u():(i.current=n,l.current=n,s.current=!0,c())};return n.onStateChange=f,n.trySubscribe(),f(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,p)throw p}}(g,p,m,h,I,S,E,A,w,v,e):()=>{}),[m]);var x,P,D;let L;x=X,P=[I,S,E,s,w,v],_((()=>x(...P)),D);try{L=r.useSyncExternalStore(T,C,f?()=>h(f(),s):C)}catch(e){throw O.current&&(e.message+=`\nThe error may be correlated with this previous error:\n${O.current.stack}\n\n`),e}_((()=>{O.current=void 0,w.current=void 0,S.current=L}));const M=r.useMemo((()=>r.createElement(e,{...L,ref:i})),[i,e,L]);return r.useMemo((()=>g?r.createElement(a.Provider,{value:y},M):M),[a,M,y])}const m=r.memo(c);if(m.WrappedComponent=e,m.displayName=c.displayName=n,u){const t=r.forwardRef((function(e,t){return r.createElement(m,{...e,reactReduxForwardedRef:t})}));return t.displayName=n,t.WrappedComponent=e,q(t,e)}return q(m,e)}};var te=function(e){const{children:t,context:n,serverState:o,store:i}=e,s=r.useMemo((()=>{const e=R(i);return{store:i,subscription:e,getServerState:o?()=>o:void 0}}),[i,o]),a=r.useMemo((()=>i.getState()),[i]);_((()=>{const{subscription:e}=s;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,a]);const l=n||Y;return r.createElement(l.Provider,{value:s},t)};function ne(e=Y){return function(){return r.useContext(e)}}var re=ne();function oe(e=Y){const t=e===Y?re:ne(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var ie=oe();function se(e=Y){const t=e===Y?ie:oe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ae=se(),le=(e,t)=>e===t;function ue(e=Y){const t=e===Y?re:ne(e),n=(e,n={})=>{const{equalityFn:i=le}="function"==typeof n?{equalityFn:n}:n;const s=t(),{store:a,subscription:l,getServerState:u}=s,c=(r.useRef(!0),r.useCallback({[e.name]:t=>e(t)}[e.name],[e])),d=(0,o.useSyncExternalStoreWithSelector)(l.addNestedSub,a.getState,u||a.getState,c,i);return r.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var ce=ue(),de=T},1539:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4 2H2v2h2zM2 1H1v4h4V1H2m-.619 5L0 14.29s3.2 1.6 8 0 8 0 8 0L13.867 1.487a9.76 9.76 0 0 0-5.867 0 9.7 9.7 0 0 1-2 .408v1.048a8.3 8.3 0 0 0 2.372-.527 6.3 6.3 0 0 1 2.334-.402c.768.006 1.533.097 2.28.272l1.76 10.56c-.834-.18-1.685-.27-2.538-.268-1.54.01-3.067.267-4.524.762-1.253.428-2.567.65-3.891.66a9.5 9.5 0 0 1-2.67-.363L2.395 6zM10 5H8v2h2zM7 4v3H4v4h7V4zm-2 6V8h2v2zm3-2h2v2H8z" clip-rule="evenodd"></path></svg>'},1580:(e,t,n)=>{"use strict";n.d(t,{p:()=>o});var r=n(3537);function o(e,t){const n=(0,r.a)(e,t?.in),o=n.getMonth();return n.setFullYear(n.getFullYear(),o+1,0),n.setHours(23,59,59,999),n}},1635:(e,t,n)=>{"use strict";n.d(t,{C6:()=>o,Cl:()=>i,Tt:()=>s,fX:()=>a});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function a(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError},1636:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteRequestCache:()=>g,getRequestCache:()=>f,isURLCacheable:()=>v,registerCacheableUrl:()=>p,requestWrapper:()=>a,setRequestCache:()=>h});var r=n(6048),o=n(3484),i=n(7707),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function a(e,t){return s(this,arguments,void 0,(function*(e,t,n=1,a=!1){if((0,i.getWhetherUseProxy)()){const t=(0,i.getProxyUrl)(e);t&&t!==e&&(e=t)}const c=(o,i=0)=>t(o).catch((t=>{if(i>=n)return Promise.reject(u(t));const s=t.options,d=r.Cv.getInstance(),p="ArcGISAuthError"===t.name&&s&&(!s.authentication||498===t.code||403===t.code||"AUTHENTICATION_ERROR_CODE"===t.code||"GWM_0003"===t.code),f="ArcGISRequestError"===t.name&&(403===t.code||"GWM_0003"===t.code);return p||f?(498===t.code&&d.handleInvalidToken(e),l(e,a).then((e=>c(e,i+1))).catch((e=>Promise.reject(u(e))))):c(o,i+1)})),d=r.Cv.getInstance(),p=d.getSessionByUrl(e);return p?c(p):d.getServerKeyFromUrl(e)?o.A.getInstance().fetchArcGISServerInfo(e).then((t=>s(this,void 0,void 0,(function*(){if(null==t?void 0:t.owningSystemUrl){const n=d.getSessionByUrl(t.owningSystemUrl);return n&&(yield l(e)),c(n)}return c(void 0)})))):c(void 0)}))}function l(e,t=!1){const n=r.Cv.getInstance(),i=n.getServerKeyFromUrl(e);let a,l="";const u=n.getNoPermissionResourceInfoByUrl(e),c=n.isSignInPromptBlocked();if(t=t&&(null==u?void 0:u.allowSignIn),u&&!t){const t=n.getSessionByUrl(e);return a=t?Promise.resolve(t):Promise.reject(n.getSignInErrorByCode(u.signInErrorCode)),a}if(c&&!t){let t;t=i?o.A.getInstance().fetchArcGISServerInfo(e).then((e=>e)):Promise.resolve(null),a=t.then((t=>s(this,void 0,void 0,(function*(){const o=t?t.owningSystemUrl:e,i=n.getSessionByUrl(o);return l=null==t?void 0:t.owningSystemUrl,i?Promise.resolve(i):Promise.reject(n.getSignInErrorByCode(r.Ag.SignInCanceled))}))))}else a=i?o.A.getInstance().fetchArcGISServerInfo(e).then((r=>s(this,void 0,void 0,(function*(){if(null==r?void 0:r.owningSystemUrl){const o=n.getClientIdByUrl(null==r?void 0:r.owningSystemUrl);let i;if(l=null==r?void 0:r.owningSystemUrl,o)i=n.signIn({fromUrl:window.location&&window.location.href,popup:!0,desUrl:null==r?void 0:r.owningSystemUrl,clientId:o,forceLogin:t,federatedServiceUrl:e}).then((e=>e));else{if(!window.jimuConfig.isBuilder&&!window.jimuConfig.isInBuilder)return n.nonOAuthSignIn(e,t);i=n.useDialogToSetClientIdToConnectionsOfAppConfig(r.owningSystemUrl).then((o=>{var i;const s=o||n.getClientIdByUrl(r.owningSystemUrl);return n.signIn({fromUrl:null===(i=window.location)||void 0===i?void 0:i.href,popup:!0,desUrl:r.owningSystemUrl,clientId:s,forceLogin:t,federatedServiceUrl:e})}))}return i}return n.nonOAuthSignIn(e,t)})))):n.signIn({fromUrl:window.location&&window.location.href,popup:!0,desUrl:e});return a.then((t=>(n.checkSessionPermissionForUrl(e,t.token,t.username,l),t))).catch((t=>(t.code===r.Ag.SignInCanceled&&n.addToNoPermissionResourceInfoList(e,"",r.Ag.SignInCanceled,!1,l),Promise.reject(t))))}function u(e){const t=r.Cv.getInstance(),n=t.getSignInErrorCodeByAuthError(e);return n?t.getSignInErrorByCode(n):e}const c=[],d={};function p(e){c.push(e)}function f(e,t){return d[m(e,t)]}function h(e,t,n){d[m(e,t)]=n}function g(e,t){delete d[m(e,t)]}function m(e,t){let n="";return t&&Object.keys(t).sort(((e,t)=>e.localeCompare(t,"en"))).forEach(((e,r)=>{n=`${n}${0===r?"?":"&"}${e}=${t[e]}`})),n?`${e}${n}`:e}function v(e,t){return c.some((n=>(n=>{const r=Object.prototype.toString.call(n);return"[object String]"===r?n===e:"[object RegExp]"===r?n.test(e):"[object Function]"===r&&n(e,t)})(n)))}window._cachedRequests=d},1729:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},1732:(e,t,n)=>{"use strict";n.d(t,{$x:()=>s,Ei:()=>l,IF:()=>i,O4:()=>r,Zo:()=>a});var r,o=n(1635);!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(r||(r={}));var i=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.code=n,o.originalMessage=r,o}return(0,o.C6)(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),s=function(e){function t(t,n,o,i){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(o).join('", "'),'"'),r.INVALID_VALUE,i)||this}return(0,o.C6)(t,e),t}(i),a=function(e){function t(t,n,o){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),r.INVALID_VALUE,o)||this}return(0,o.C6)(t,e),t}(i),l=function(e){function t(t,n){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),r.MISSING_VALUE,n)||this}return(0,o.C6)(t,e),t}(i)},1763:(e,t,n)=>{const r=n(560);e.exports=(e,t)=>r(e,t,!0)},1767:(e,t,n)=>{"use strict";n.d(t,{CD:()=>c,PS:()=>f,e0:()=>l,jU:()=>p,ns:()=>u,qt:()=>s,rQ:()=>d,w:()=>h});var r=n(1035),o=n(5689),i=n(6048);function s(e,t){function n(e,n,r){const o=e[n];try{if(t.matcher(o,r)){const i=t.handler(o,r);e[n]=i}}catch(e){console.error(e)}}return function e(r,o){var i;for(const s in r)if("object"==typeof r[s]&&null!==r[s]){const n=null!=o?o:null===(i=null==t?void 0:t.passIndicator)||void 0===i?void 0:i.call(t,r[s]);e(r[s],n)}else"string"==typeof r[s]&&n(r,s,o)}(e),e}const a=["widgets/common/text/"],l=e=>a.includes(e.uri)||void 0,u=(e="")=>/blob:\http(s?):\/\/(.)/.test(e),c=e=>!!e&&e.includes("${appResourceUrl}"),d=e=>(e||"").match(/\$\{appResourceUrl\}\/images\/(?:[^\/]+\/)?[^\/\\:\*"\?<>\|]+\.(png|jpeg|jpg|gif|bmp|webp|svg)/gi)||[];function p(){if(window.jimuConfig.isOutOfExb)return"./resources";{let e=null;e=window.jimuConfig.isBuilder?(0,r.Vp)().getState().appStateInBuilder:(0,r.Vp)().getState();const t=e&&e.appId;return window.jimuConfig.isDevEdition?window.location.origin+window.jimuConfig.mountPath+"apps/"+t+"/resources":(0,o.getPlatformUrlByOrgUrl)((0,r.Vp)().getState().portalUrl)+"/sharing/rest/content/items/"+t+"/resources"}}function f(e){var t;if("string"!=typeof e)return e;const n=p(),r=null===(t=i.Ay.getInstance().getMainSession())||void 0===t?void 0:t.token;let o=e;const s=d(o);for(const e of s){let t=e.replace("${appResourceUrl}",n);r&&(t=`${t}?token=${r}`),o=o.replace(e,t)}return o}function h(e){const t=p(),n=new RegExp(t,"g");return e.replace(n,"${appResourceUrl}").replace(/\?token=[\w-_\.]*/g,"")}},1800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},1801:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(565);const o=function(e,t){var n=t?(0,r.A)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},1832:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,null,!0),o=r(t,null,!0),i=n.compare(o);if(0===i)return null;const s=i>0,a=s?n:o,l=s?o:n,u=!!a.prerelease.length;if(!!l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(a))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return n.major!==o.major?c+"major":n.minor!==o.minor?c+"minor":n.patch!==o.patch?c+"patch":"prerelease"}},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},1882:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2383),o=n(3098);const i=function(e){return"symbol"==typeof e||(0,o.A)(e)&&"[object Symbol]"==(0,r.A)(e)}},1917:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2136),o="object"==typeof self&&self&&self.Object===Object&&self;const i=r.A||o||Function("return this")()},2031:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2851),o=n(2528);const i=function(e,t,n,i){var s=!n;n||(n={});for(var a=-1,l=t.length;++a<l;){var u=t[a],c=i?i(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),s?(0,o.A)(n,u,c):(0,r.A)(n,u,c)}return n}},2048:(e,t,n)=>{var r=n(6018).FilterCSS,o=n(6018).getDefaultWhiteList,i=n(9349);function s(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var a=new r;function l(e){return e.replace(u,"&lt;").replace(c,"&gt;")}var u=/</g,c=/>/g,d=/"/g,p=/&quot;/g,f=/&#([a-zA-Z0-9]*);?/gim,h=/&colon;?/gim,g=/&newline;?/gim,m=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,v=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,y=/u\s*r\s*l\s*\(.*/gi;function S(e){return e.replace(d,"&quot;")}function I(e){return e.replace(p,'"')}function b(e){return e.replace(f,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function w(e){return e.replace(h,":").replace(g," ")}function E(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return i.trim(t)}function A(e){return e=E(e=w(e=b(e=I(e))))}function O(e){return e=l(e=S(e))}t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},t.getDefaultWhiteList=s,t.onTag=function(e,t,n){},t.onIgnoreTag=function(e,t,n){},t.onTagAttr=function(e,t,n){},t.onIgnoreTagAttr=function(e,t,n){},t.safeAttrValue=function(e,t,n,r){if(n=A(n),"href"===t||"src"===t){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(m.lastIndex=0,m.test(n))return""}else if("style"===t){if(v.lastIndex=0,v.test(n))return"";if(y.lastIndex=0,y.test(n)&&(m.lastIndex=0,m.test(n)))return"";!1!==r&&(n=(r=r||a).process(n))}return n=O(n)},t.escapeHtml=l,t.escapeQuote=S,t.unescapeQuote=I,t.escapeHtmlEntities=b,t.escapeDangerHtml5Entities=w,t.clearNonPrintableCharacter=E,t.friendlyAttrValue=A,t.escapeAttrValue=O,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(s,a,l){if(function(t){return!!n||-1!==i.indexOf(e,t)}(s)){if(l.isClosing){var u="[/removed]",c=l.position+10;return r.push([!1!==o?o:l.position,c]),o=!1,u}return o||(o=l.position),"[removed]"}return t(s,a,l)},remove:function(e){var t="",n=0;return i.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},t.stripCommentTag=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("--\x3e",r);if(-1===o)break;n=o+3}return t},t.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},t.cssFilter=a,t.getDefaultCSSWhiteList=o},2049:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=Array.isArray},2050:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});const r=(0,n(8562).A)(Object,"create");const o=function(){this.__data__=r?r(null):{},this.size=0};const i=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var s=Object.prototype.hasOwnProperty;const a=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0};var l=Object.prototype.hasOwnProperty;const u=function(e){var t=this.__data__;return r?void 0!==t[e]:l.call(t,e)};const c=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=a,d.prototype.has=u,d.prototype.set=c;const p=d;var f=n(9469),h=n(8335);const g=function(){this.size=0,this.__data__={hash:new p,map:new(h.A||f.A),string:new p}};const m=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const v=function(e,t){var n=e.__data__;return m(t)?n["string"==typeof t?"string":"hash"]:n.map};const y=function(e){var t=v(this,e).delete(e);return this.size-=t?1:0,t};const S=function(e){return v(this,e).get(e)};const I=function(e){return v(this,e).has(e)};const b=function(e,t){var n=v(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function w(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=g,w.prototype.delete=y,w.prototype.get=S,w.prototype.has=I,w.prototype.set=b;const E=w},2080:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(9469);const o=function(){this.__data__=new r.A,this.size=0};const i=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const s=function(e){return this.__data__.get(e)};const a=function(e){return this.__data__.has(e)};var l=n(8335),u=n(2050);const c=function(e,t){var n=this.__data__;if(n instanceof r.A){var o=n.__data__;if(!l.A||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new u.A(o)}return n.set(e,t),this.size=n.size,this};function d(e){var t=this.__data__=new r.A(e);this.size=t.size}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=s,d.prototype.has=a,d.prototype.set=c;const p=d},2089:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteModule:()=>d,getJimuForBuilderModules:()=>c,getModuleSync:()=>i,loadModule:()=>s,loadModules:()=>a,resolveModuleFullPath:()=>u,resolveModuleFullUrl:()=>l});var r=n(4262),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function i(e){const t=window.SystemJS.get(l(e));return t?t.__useDefault?t.default:t:null}function s(e,t){return o(this,void 0,void 0,(function*(){return!(0,r.isAbsoluteUrl)(e)||/\.(js|css)$/.test(e)||/\/$/.test(e)||(e=`${e}.js`),window.SystemJS.import(e,t).then((e=>e=e.__useDefault?e.default:e)).catch((e=>(console.error("Load module error.",e),null)))}))}function a(e,t){return o(this,void 0,void 0,(function*(){return yield Promise.all(e.map((e=>o(this,void 0,void 0,(function*(){return yield s(e,t)})))))}))}function l(e){return window.SystemJS.resolve(e)}function u(e){const t=l(e);return/^file:/.test(t)?t:t.substring(`${window.location.protocol}//${window.location.host}`.length,t.length)}function c(){return i("jimu-for-builder")}function d(e){window.SystemJS.delete(l(e))}},2111:(e,t,n)=>{const r=n(4641),o=n(3999),i=n(5580),s=n(4089),a=n(7059),l=n(5200);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return o(e,n,u);case">":return i(e,n,u);case">=":return s(e,n,u);case"<":return a(e,n,u);case"<=":return l(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},2136:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},2159:(e,t,n)=>{"use strict";n.r(t),n.d(t,{addLayoutLabel:()=>y,addWebmapOrWebsceneToAppConfig:()=>M,addWidgetDefaultLabelAndIcon:()=>v,addWidgetManifestProperties:()=>m,fixLayoutIds:()=>O,fullMatchBlobUrl:()=>h.ns,fullMatchResourceUrl:()=>h.CD,getAllWidgets:()=>w,getAllWidgetsInSameRootContainer:()=>U,getClientQueryEnabledMapWidgetId:()=>j,getConnectionInfoFromAppConfig:()=>_,getDataSourceJsonById:()=>k,getLayoutIdInSizeMode:()=>x,getRealAppResourceUrl:()=>h.jU,getResourceUrlsInString:()=>h.rQ,getSizeModeOfALayout:()=>R,getUniqueId:()=>S,getUniqueLabel:()=>I,getWidgetContext:()=>g,getWidgetIdByOutputDataSource:()=>P,getWidgetMessageActionJsons:()=>E,isFullReplace:()=>h.e0,isTwoViewsInSaveSection:()=>A,parseUniqueLabel:()=>b,processResourceUrl:()=>h.PS,replaceStringInAppConfig:()=>h.qt,restoreResourceUrl:()=>h.w,setConnectionInfoToAppConfig:()=>L,updateControllerWidgetId:()=>T,updateStateWhenAppConfigChange:()=>C,validateConnectionsOfAppConfig:()=>D});var r=n(9359),o=n(4262),i=n(5689),s=n(4649),a=n(7390),l=n(1035),u=n(2089),c=n(5001),d=n(4990),p=n(4502),f=n(4820),h=n(1767);function g(e){const t={};return/^http(s)?:\/\//.test(e)||/^\/\//.test(e)?(t.isRemote=!0,t.folderUrl=e):(t.isRemote=!1,t.folderUrl=`${window.location.protocol}//${window.location.host}${(0,o.getFixedRootPath)()}${e}`),t}function m(e){void 0===e.properties&&(e.properties={});["hasVersionManager","supportInlineEditing","supportRepeat","hasBuilderSupportModule","hasEmbeddedLayout","lockChildren","flipIcon","coverLayoutBackground","canCrossLayoutBoundary","needActiveState","canConsumeDataAction","watchViewportVisibility","isWidgetController"].forEach((function(t){void 0===e.properties[t]&&(e.properties[t]=!1)}));return["hasMainClass","hasConfig","hasSettingPage","hasConfigInSettingPage","passDataSourceToChildren","deactivateOtherWidgets","supportAutoSize"].forEach((function(t){void 0===e.properties[t]&&(e.properties[t]=!0)})),e}function v(e,t){t.icon=t.icon?t.icon:t.context.folderUrl+"icon.svg",t.label=t.label?t.label:I(e,"widget",t.manifest?t.manifest.i18nMessages._widgetLabel||t.manifest.label||t.manifest.name:"")}function y(e){e.widgets&&Object.keys(e.widgets).forEach((t=>{const n=e.widgets[t];n.layouts&&Object.keys(n.layouts).forEach((t=>{Object.keys(n.layouts[t]).forEach((r=>{var o;const i=n.layouts[t][r];if(e.layouts[i]&&!e.layouts[i].label){const r=null===(o=n.manifest.layouts)||void 0===o?void 0:o.find((e=>e.name===t));e.layouts[i].label=n.manifest.i18nMessages[`_layout_${t}_label`]||(null==r?void 0:r.label)||(null==r?void 0:r.name)}}))}))}))}function S(e){return d.A.getInstance().getUniqueId(e)}function I(e,t,n){const r=function(e){return"y"===e.charAt(e.length-1)?`${e.slice(0,e.length-1)}ies`:`${e}s`}(t);let[o,i]=b(n);if(!e[r])return null===i?n:`${n} ${i+1}`;Object.keys(e[r]).filter((t=>{const o=b(e[r][t].label)[0];return n===o})).forEach((t=>{let n=b(e[r][t].label)[1];n=null===n?1:n,i=Math.max(i,n)}));return null===i?o:`${o} ${i+1}`}function b(e){if(!e)return[e,null];const t=e.lastIndexOf(" "),n=e.substring(t+1);let r,o;return/^\d+$/.test(n)?(r=e.substring(0,t),o=parseInt(n)):(r=e,o=null),[r,o]}function w(e){if(!(null==e?void 0:e.widgets))return[];const t=[];return Object.keys(e.widgets).forEach((n=>{t.push(e.widgets[n])})),t}function E(e,t,n){let r=[];return e.messageConfigs&&Object.entries(e.messageConfigs).forEach((([e,o])=>{r=r.concat(o.actions&&o.actions.filter((e=>e.widgetId===t&&e.actionName===n)))})),r}function A(e,t,n){return e.sections&&Object.keys(e.sections).some((r=>{const o=e.sections[r].views;return(null==o?void 0:o.includes(t))&&(null==o?void 0:o.includes(n))}))}function O(e){(null==e?void 0:e.layouts)&&Object.keys(e.layouts).forEach((t=>{const n=e.layouts[t];return n.content&&Object.keys(n.content).forEach((e=>{if(isNaN(parseInt(e)))return void console.error("Layout item MUST be integer string");n.content[e].id=e})),n.id=t,n}))}function C(e,t){var n,r,o,i,s;const a=e.appConfig,l=t,u=Object.keys(a.widgets||{}).filter((e=>!l.widgets[e]));e=e.set("widgetsRuntimeInfo",e.widgetsRuntimeInfo.without.apply(e.widgetsRuntimeInfo,u)).set("widgetsState",e.widgetsState.without.apply(e.widgetsState,u)).set("widgetsMutableStateVersion",e.widgetsMutableStateVersion.without.apply(e.widgetsMutableStateVersion,u));Object.keys(l.widgets||{}).filter((e=>!a.widgets[e])).forEach((t=>{const n=l.widgets[t];e.widgetsClassStatus[n.uri]&&(e=e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0))}));Object.keys(l.widgets||{}).filter((e=>a.widgets[e]&&l.widgets[e].uri!==a.widgets[e].uri)).forEach((t=>{const n=l.widgets[t];e=e.widgetsClassStatus[n.uri]?e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!0):e.setIn(["widgetsRuntimeInfo",t,"isClassLoaded"],!1)}));Object.keys(a.views||{}).filter((e=>!l.views[e])).forEach((t=>{var n,r,o,i,s,l;const u=Object.keys(a.sections||{}).find((e=>a.sections[e].views.includes(t)));(null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[u])&&((null===(r=e.appRuntimeInfo.sectionNavInfos)||void 0===r?void 0:r[u].currentViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",u,"currentViewId"],null)),(null===(o=e.appRuntimeInfo.sectionNavInfos)||void 0===o?void 0:o[u].previousViewId)===t&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",u,"previousViewId"],null)),(null===(s=null===(i=e.appRuntimeInfo.sectionNavInfos)||void 0===i?void 0:i[u].visibleViews)||void 0===s?void 0:s.find((e=>e===t)))&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos",u,"visibleViews"],null===(l=e.appRuntimeInfo.sectionNavInfos)||void 0===l?void 0:l[u].visibleViews.filter((e=>e!==t)))))}));if(Object.keys(a.sections||{}).filter((e=>!l.sections[e])).forEach((t=>{var n;(null===(n=e.appRuntimeInfo.sectionNavInfos)||void 0===n?void 0:n[t])&&(e=e.setIn(["appRuntimeInfo","sectionNavInfos"],e.appRuntimeInfo.sectionNavInfos.without(t)))})),e.appRuntimeInfo.currentPageId&&!l.pages[e.appRuntimeInfo.currentPageId]){const t=Object.keys(l.pages).find((e=>l.pages[e].isDefault));e=e.setIn(["appRuntimeInfo","currentPageId"],t)}if(e.appRuntimeInfo.currentDialogId&&!l.dialogs[e.appRuntimeInfo.currentDialogId]&&(e=e.setIn(["appRuntimeInfo","currentDialogId"],null)),null===(n=e.appRuntimeInfo.openedDialogIds)||void 0===n?void 0:n.length){const t=Object.keys(a.dialogs).find((e=>!l.dialogs[e]));t&&(e=e.setIn(["appRuntimeInfo","openedDialogIds"],e.appRuntimeInfo.openedDialogIds.filter((e=>e!==t))));const n=Object.keys(a.dialogs).find((e=>a.dialogs[e].isSplash)),r=Object.keys(l.dialogs).find((e=>l.dialogs[e].isSplash));r&&n!==r&&(e=e.setIn(["appRuntimeInfo","openedDialogIds"],e.appRuntimeInfo.openedDialogIds.filter((e=>e!==r))))}if(e.appRuntimeInfo.clipboard){const{layoutId:t,layoutItemId:n}=e.appRuntimeInfo.clipboard;(null===(o=null===(r=l.layouts[t])||void 0===r?void 0:r.content)||void 0===o?void 0:o[n])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("clipboard")))}if(e.appRuntimeInfo.selection){const{layoutId:t,layoutItemId:n}=e.appRuntimeInfo.selection;(null===(s=null===(i=l.layouts[t])||void 0===i?void 0:i.content)||void 0===s?void 0:s[n])||(e=e.set("appRuntimeInfo",e.appRuntimeInfo.without("selection")))}return e=e.set("appConfig",l)}const T=e=>{var t,n;const{widgetsRuntimeInfo:r,appConfig:o,browserSizeMode:i}=e;if(!r||!o||!i)return e;try{let s=e;const{widgets:l,layouts:d,mainSizeMode:p}=o,f=(0,u.getModuleSync)("jimu-layouts/layout-runtime"),h=Object.keys(r).filter((e=>r[e].controllerWidgetId));for(const e of h){let n=f.searchUtils.getParentWidgetIdOfContent(o,e,c.K.Widget,i);n||(n=f.searchUtils.getParentWidgetIdOfContent(o,e,c.K.Widget,p));const a=l[n];if(!a||!(null===(t=a.manifest.properties)||void 0===t?void 0:t.isWidgetController)){const t=r[e];s=s.setIn(["widgetsRuntimeInfo",e],t.without("controllerWidgetId"))}}const g=Object.values(l).filter((e=>{var t;return null===(t=e.manifest.properties)||void 0===t?void 0:t.isWidgetController}));for(const e of g){if(!(null===(n=e.layouts)||void 0===n?void 0:n.controller))continue;const t=d[e.layouts.controller[i]||e.layouts.controller[p]],o=f.searchUtils.getContentsInLayout(t,c.K.Widget,!1);for(const t of o){const n=r[t];(null==n?void 0:n.controllerWidgetId)||(s=s.setIn(["widgetsRuntimeInfo",t],(n||a({})).set("controllerWidgetId",e.id)))}}return s}catch(t){return console.log(t),e}};function x(e,t,n){var r;return null!==(r=e[t])&&void 0!==r?r:e[n]}function R(e,t){var n,o;const i=e.layouts[t],s=e=>Object.keys(null!=e?e:{}).find((n=>e[n]===t));if(null==i?void 0:i.parent){const{id:t,type:a}=i.parent;switch(a){case r.$4.Dialog:return s(e.dialogs[t].layout);case r.$4.Footer:return s(e.footer.layout);case r.$4.Header:return s(e.header.layout);case r.$4.Page:return s(e.pages[t].layout);case r.$4.Screen:return null!==(n=s(e.screens[t].main.layout))&&void 0!==n?n:s(null===(o=e.screens[t].panel)||void 0===o?void 0:o.layout);case r.$4.View:return s(e.views[t].layout);case r.$4.Widget:{const n=e.widgets[t].layouts;let r=null;return Object.keys(n).some((e=>(r=s(n[e]),!!r))),r}}}return null}function P(e){var t;return(null===(t=function(e){var t,n;if(!e)return null;const r=(null===(t=null===window||void 0===window?void 0:window.jimuConfig)||void 0===t?void 0:t.isBuilder)?(0,l.Vp)().getState().appStateInBuilder:(0,l.Vp)().getState(),o=null===(n=null==r?void 0:r.appConfig)||void 0===n?void 0:n.widgets;return o&&Object.values(o).find((t=>{var n;return null===(n=null==t?void 0:t.outputDataSources)||void 0===n?void 0:n.some((t=>t===e.mainDataSourceId))}))||null}(e))||void 0===t?void 0:t.id)||null}function D(){var e,t;const n=(null===(e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===e?void 0:e.isBuilder)?(0,l.Vp)().getState().appStateInBuilder:(0,l.Vp)().getState(),r=(null===(t=null==n?void 0:n.appConfig)||void 0===t?void 0:t.connections)||[],o=r.length,i=r.map((e=>{const t=Object.assign({},e);return(0,s.validateClientId)(e.portalUrl,e.clientId).then((e=>(e||(t.clientId=null),t)))}));Promise.allSettled(i).then((e=>{let t=null==n?void 0:n.appConfig;const r=[];e.forEach((e=>{var t;(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.clientId)&&r.push(e.value)})),o!==r.length&&(t=t.set("connections",r),(0,p.changeAppConfig)(t))}))}function _(e){var t;const n=window.jimuConfig.isBuilder?(0,l.Vp)().getState().appStateInBuilder:(0,l.Vp)().getState();return((null===(t=null==n?void 0:n.appConfig)||void 0===t?void 0:t.connections)||[]).find((t=>"portal"===t.type&&(0,i.isSamePortalUrl)(e,null==t?void 0:t.portalUrl)))}function L(e,t,n){var r,o;const s=e&&t&&n&&{type:"portal",portalUrl:e,clientId:t,portalVersion:n};if(!s)return;const a=window.jimuConfig.isBuilder?(0,l.Vp)().getState().appStateInBuilder:(0,l.Vp)().getState();let c=(null===(r=null==a?void 0:a.appConfig)||void 0===r?void 0:r.connections)||[];const d=_(e);if(!(d&&(p=d,h=s,p&&h&&p.type===h.type&&p.clientId===h.clientId&&p.portalVersion===h.portalVersion&&(0,i.isSamePortalUrl)(p.portalUrl,h.portalUrl)))){c=d?c.filter((t=>t.portalUrl!==e)):c;const t=null===(o=null==a?void 0:a.appConfig)||void 0===o?void 0:o.set("connections",c.concat([s]));if(window.jimuConfig.isBuilder){(0,u.getModuleSync)("jimu-for-builder").builderAppSync.publishAppConfigChangeToApp(t)}else(0,l.Vp)().dispatch((0,f.appConfigChanged)(t))}var p,h}function M(e,t,n,o=!0){const i=t||n;(t||n)&&(function(e,t,n,r){var o;const i=n||r,s=n?"WEB_MAP":"WEB_SCENE";(null==e?void 0:e.dataSources)||(e.dataSources={});Object.values(e.dataSources).find((e=>e.itemId===i))||(e.dataSources[t]={type:s,itemId:i,id:t,portalUrl:null===(o=e.attributes)||void 0===o?void 0:o.portalUrl})}(e,i,t,n),o&&function(e,t){"blankfullscreen"===e.template&&function(e,t){e.widgets.widget_1={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConfig:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_1",layouts:{MapFixedLayout:{LARGE:"layout_1"}},useDataSources:[{dataSourceId:t,mainDataSourceId:t}]},e.layouts.layout_0={type:"FIXED",content:{0:{type:"WIDGET",bbox:{left:"50%",right:"58.6%",top:"50%",bottom:"38.9%",width:"31.3%",height:"50.0%"},widgetId:"widget_1",setting:{autoProps:{left:!1,right:!0,top:!1,bottom:!0},hCenter:!0,vCenter:!0,heightMode:"fixed",aspectRatio:1}}},order:["0"]},e.layouts.layout_1={type:"FIXED"}}(e,t);"blankscrollable"===e.template&&function(e,t){e.widgets.widget_1={uri:"widgets/layout/row/",version:window.jimuConfig.exbVersion,config:{space:10,style:{padding:{number:[10],unit:"px"}}},id:"widget_1",layouts:{DEFAULT:{LARGE:"layout_1"}}},e.widgets.widget_2={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConfig:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_2",layouts:{MapFixedLayout:{LARGE:"layout_2"}},useDataSources:[{dataSourceId:t,mainDataSourceId:t}]},e.layouts.layout_0={type:"FLOW",content:{0:{type:"WIDGET",bbox:{left:"80px",right:"480px",top:"4px",bottom:"404px",width:"400px",height:420},widgetId:"widget_1",setting:{heightMode:"fixed"}}},order:["0"]},e.layouts.layout_1={type:"ROW",order:["0"],content:{0:{type:"WIDGET",bbox:{left:"0px",width:"4px",height:"400px"},widgetId:"widget_2",setting:{heightMode:"fit"}}}},e.layouts.layout_2={type:"FIXED"}}(e,t);"blankfullscreengrid"===e.template&&function(e){e.widgets.widget_1={uri:"widgets/arcgis/arcgis-map/",version:window.jimuConfig.exbVersion,config:{toolConfig:{canZoom:!0,canHome:!0,canSearch:!0,canNavigation:!0},isUseCustomMapState:!1},id:"widget_1",layouts:{MapFixedLayout:{LARGE:"layout_1"}}},e.layouts.layout_0={type:"GRID",content:{0:{type:"WIDGET",widgetId:"widget_1",bbox:{width:100},gridType:r.Qw.Plain}},order:["0"],setting:{rootItem:"0"}},e.layouts.layout_1={type:"FIXED"}}(e)}(e,i),function(e,t){const n=Object.values(e.widgets).find((e=>"widgets/arcgis/arcgis-map/"===e.uri));n&&(n.useDataSources=[{dataSourceId:t,mainDataSourceId:t}],n.config&&(n.config.initialMapState=null,n.config.isUseCustomMapState=!1))}(e,i))}function k(e,t){return N(e.dataSources,t)}function N(e,t){var n,r;if(!t)return null;let o;const i=Object.values(e||{});for(let e=0;e<i.length&&(o=(null===(n=i[e])||void 0===n?void 0:n.id)===t?i[e]:N(null===(r=i[e])||void 0===r?void 0:r.childDataSourceJsons,t),!o);e++);return o}function j(e){var t,n,r,o;const i=window.jimuConfig.isBuilder?null===(n=null===(t=(0,l.Vp)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===n?void 0:n.appConfig:null===(r=(0,l.Vp)().getState())||void 0===r?void 0:r.appConfig,s=null==i?void 0:i.widgets;if(!s)return null;const a=Object.values(s);for(const t of a)if(t&&"widgets/arcgis/arcgis-map/"===t.uri){const n=null===(o=t.config)||void 0===o?void 0:o.clientQueryDataSourceIds;if(n&&n.includes(e))return t.id}return null}function U(e){var t,n;const r=(0,l.Vp)().getState(),o=(null===(t=window.jimuConfig)||void 0===t?void 0:t.isBuilder)?r.appStateInBuilder:r,i=o.appConfig,s=null===(n=o.appRuntimeInfo)||void 0===n?void 0:n.currentPageId,a=o.browserSizeMode,d=(0,u.getModuleSync)("jimu-layouts/layout-runtime"),p=d.searchUtils.getContentRootContainerInfo(i,e,c.K.Widget,a,!1);return d.searchUtils.getContentsInContainerRecursiveAdv(i,p,c.K.Widget,a,{includePending:!1,includeOtherSizeMode:!1,currentPageId:s})}},2263:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M4 3H3v1h1z"></path><path fill="#000" fill-rule="evenodd" d="M1 7V1h6v6zm1-5h4v4H2z" clip-rule="evenodd"></path><path fill="#000" d="M4 10H3v1h1zM4 12H3v1h1zM10 8h1v1h-1zM10 12h1v1h-1z"></path><path fill="#000" fill-rule="evenodd" d="M1 8v6H0v1h16v-1h-2V6H8v8H7V8zm5 6V9H2v5zm7-7v7H9V7z" clip-rule="evenodd"></path><path fill="#000" d="M10 10h1v1h-1z"></path></svg>'},2265:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(1635),o=n(7683),i=n(8972),s=n(4184),a=n(8857),l=n(6417);function u(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache=(0,o.MT)(),t.state={cache:t.cache,intl:(0,a.E)(u(t.props),t.cache),prevConfig:u(t.props)},t}return(0,r.C6)(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.prevConfig,r=t.cache,o=u(e);return(0,s.bN)(n,o)?null:{intl:(0,a.E)(o,r),prevConfig:o}},t.prototype.render=function(){return(0,s.HM)(this.state.intl),i.createElement(l.Kq,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=s.JF,t}(i.PureComponent);const d=c},2383:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(241),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,a=r.A?r.A.toStringTag:void 0;const l=function(e){var t=i.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[a]=n:delete e[a]),o};var u=Object.prototype.toString;const c=function(e){return u.call(e)};var d=r.A?r.A.toStringTag:void 0;const p=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?l(e):c(e)}},2388:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(2049),o=n(1882),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;const a=function(e,t){if((0,r.A)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,o.A)(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))};var l=n(2050);function u(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(u.Cache||l.A),n}u.Cache=l.A;const c=u;var d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g;const f=function(e){var t=c(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(d,(function(e,n,r,o){t.push(r?o.replace(p,"$1"):n||e)})),t}));var h=n(8781);const g=function(e,t){return(0,r.A)(e)?e:a(e,t)?[e]:f((0,h.A)(e))}},2434:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var r=n(8562),o=n(1917);const i=(0,r.A)(o.A,"DataView");var s=n(8335);const a=(0,r.A)(o.A,"Promise");const l=(0,r.A)(o.A,"Set");const u=(0,r.A)(o.A,"WeakMap");var c=n(2383),d=n(1121),p="[object Map]",f="[object Promise]",h="[object Set]",g="[object WeakMap]",m="[object DataView]",v=(0,d.A)(i),y=(0,d.A)(s.A),S=(0,d.A)(a),I=(0,d.A)(l),b=(0,d.A)(u),w=c.A;(i&&w(new i(new ArrayBuffer(1)))!=m||s.A&&w(new s.A)!=p||a&&w(a.resolve())!=f||l&&w(new l)!=h||u&&w(new u)!=g)&&(w=function(e){var t=(0,c.A)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,d.A)(n):"";if(r)switch(r){case v:return m;case y:return p;case S:return f;case I:return h;case b:return g}return t});const E=w},2443:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 2v12H2V2zm-1 1H3v10h10zm-5 7.5L6 9l-2 1.5L6 12zm2-3.833 2 1.5-2 1.5-2-1.5zM8 5.5 6 4 4 5.5 6 7z" clip-rule="evenodd"></path></svg>'},2505:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});const r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var o=n(5175),i=n(2049),s=n(1200),a=n(5353),l=n(4749),u=Object.prototype.hasOwnProperty;const c=function(e,t){var n=(0,i.A)(e),c=!n&&(0,o.A)(e),d=!n&&!c&&(0,s.A)(e),p=!n&&!c&&!d&&(0,l.A)(e),f=n||c||d||p,h=f?r(e.length,String):[],g=h.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||(0,a.A)(m,g))||h.push(m);return h}},2516:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});let r={};function o(){return r}},2525:(e,t,n)=>{const r=n(7638),o=n(560);e.exports=(e,t,n)=>{const i=[];let s=null,a=null;const l=e.sort(((e,t)=>o(e,t,n)));for(const e of l){r(e,t,n)?(a=e,s||(s=e)):(a&&i.push([s,a]),a=null,s=null)}s&&i.push([s,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return c.length<d.length?c:t}},2528:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(4171);const o=function(e,t,n){"__proto__"==t&&r.A?(0,r.A)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},2529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.027 0A8 8 0 1 1 0 8a8 8 0 0 1 8.027-8m-2.07 1.303A7 7 0 0 0 2.256 4h1.6a8.3 8.3 0 0 1 2.103-2.697M3.453 5H1.674a7 7 0 0 0-.656 2.5H3.01q.06-1.336.441-2.5m.56 2.5a8.1 8.1 0 0 1 .5-2.5H7.5v2.5zm-1.001 1H1.018c.062.89.291 1.733.656 2.5h1.778a9.3 9.3 0 0 1-.441-2.5M4.512 11a8.1 8.1 0 0 1-.5-2.5H7.5V11zm-.657 1h-1.6a7 7 0 0 0 3.702 2.697A8.3 8.3 0 0 1 3.855 12M7.5 14.61V12H4.985q.869 1.516 2.515 2.61M7.5 4V1.39Q5.854 2.484 4.985 4zm2.543 10.697A7 7 0 0 0 13.745 12h-1.6a8.3 8.3 0 0 1-2.102 2.697M12.548 11h1.778c.365-.767.594-1.61.656-2.5H12.99a9.3 9.3 0 0 1-.441 2.5m-.56-2.5a8.1 8.1 0 0 1-.5 2.5H8.5V8.5zm1.001-1h1.993a7 7 0 0 0-.656-2.5h-1.778q.381 1.164.441 2.5M11.488 5q.434 1.146.5 2.5H8.5V5zm.657-1h1.6a7 7 0 0 0-3.703-2.697Q11.408 2.473 12.145 4M8.5 1.39Q10.146 2.484 11.015 4H8.5zM8.5 12h2.515q-.869 1.516-2.515 2.61z" clip-rule="evenodd"></path></svg>'},2552:(e,t,n)=>{var r=n(1873),o=n(659),i=n(9350),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?o(e):i(e)}},2581:e=>{"use strict";e.exports=r},2587:(e,t,n)=>{"use strict";n.d(t,{S:()=>u});var r=n(1635),o=n(4819),i=n(4293),s=n(1071);function a(e,t){return t?Object.keys(e).reduce((function(n,o){var i,s;return n[o]=(i=e[o],(s=t[o])?(0,r.Cl)((0,r.Cl)((0,r.Cl)({},i||{}),s||{}),Object.keys(i).reduce((function(e,t){return e[t]=(0,r.Cl)((0,r.Cl)({},i[t]),s[t]||{}),e}),{})):i),n}),(0,r.Cl)({},e)):e}function l(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}var u=function(){function e(t,n,i,u){void 0===n&&(n=e.defaultLocale);var c,d=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=d.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce((function(e,t){return e.length&&t.type===s.TT.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return(0,s.hN)(d.ast,d.locales,d.formatters,d.formats,e,void 0,d.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=d.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(d.locales)[0]}},this.getAst=function(){return d.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var p=u||{},f=(p.formatters,(0,r.Tt)(p,["formatters"]));this.ast=e.__parse(t,(0,r.Cl)((0,r.Cl)({},f),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=a(e.formats,i),this.formatters=u&&u.formatters||(void 0===(c=this.formatterCache)&&(c={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:(0,o.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))}),{cache:l(c.number),strategy:o.W.variadic}),getDateTimeFormat:(0,o.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))}),{cache:l(c.dateTime),strategy:o.W.variadic}),getPluralRules:(0,o.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,r.fX)([void 0],t,!1)))}),{cache:l(c.pluralRules),strategy:o.W.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"==typeof e?e:e[0])}},e.__parse=i.qg,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}()},2618:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#040303" fill-rule="evenodd" d="M7 13v2H2v1h11v-1H8v-2h8L14 1H2L0 13zM2.847 2 1.18 12h3.697a1.58 1.58 0 0 1 .107-1.323A1.37 1.37 0 0 1 4 9.387c0-.165.03-.303.07-.424.032-.094.07-.178.105-.257a1.1 1.1 0 0 0 .115-.34c.029-.282-.084-.321-.084-.575a1.62 1.62 0 0 1 1.591-1.643 1.44 1.44 0 0 1 1.086.47A1.45 1.45 0 0 1 8.266 5.53a1.5 1.5 0 0 1 .453.073q.114.037.221.093a2 2 0 0 1 .555-.606l.094-.064a3 3 0 0 0-.066-.414 1.32 1.32 0 0 1 .32-1.09l.068-.078a1.7 1.7 0 0 1 .468-.353 1.4 1.4 0 0 1 .074-.442c.086-.246.231-.466.422-.643L10.872 2zm3.46 10h3.479l.062-.035c.223-.125.447-.251.447-.541 0-.174-.184-.24-.184-.41 0-.213.127-.341.253-.468.064-.064.127-.127.174-.201a.5.5 0 0 0 .079-.265v-.502a.2.2 0 0 1 .035-.115c.075-.116.26-.178.41-.178a.7.7 0 0 1 .3.088c.095.044.19.089.299.089.242 0 .372-.17.502-.339s.26-.338.501-.338c.11 0 .185.052.245.13.056.073.099.172.142.273.06.141.123.287.23.38a1.48 1.48 0 0 0 .906.432h.3l-1.334-8h-1.175a.5.5 0 0 1 .018.133.43.43 0 0 1-.057.219 1 1 0 0 1-.065.091 1 1 0 0 1-.082.086l-.104.092c-.07.06-.14.12-.195.188a.5.5 0 0 0-.092.16l-.008.028-.008.038a.4.4 0 0 0-.006.076q0 .045.008.097l.017.093.005.026c.016.086.033.176.035.26a.5.5 0 0 1-.011.129c-.035.141-.154.24-.466.218a.3.3 0 0 0-.16.052c-.16.099-.328.31-.304.435l.011.054c.082.397.22 1.069-.371 1.386-.22.12-.34.333-.454.535-.145.257-.28.495-.599.495-.174 0-.293-.09-.413-.18-.119-.09-.238-.18-.411-.18a.45.45 0 0 0-.184.052.47.47 0 0 0-.253.436c0 .367-.308.977-.798.977a.64.64 0 0 1-.617-.308l-.007-.011a1.7 1.7 0 0 0-.252-.375.48.48 0 0 0-.359-.154.617.617 0 0 0-.59.643q.002.11.022.202l.029.12c.026.098.051.196.051.32 0 .194-.077.336-.154.477-.077.142-.154.283-.154.476a.405.405 0 0 0 .437.36q.13-.002.223-.028.085-.024.158-.055a.8.8 0 0 1 .416-.071c.108.01.185.077.237.162a.7.7 0 0 1 .094.289l.003.063c0 .274-.196.47-.392.665-.141.141-.282.283-.35.454-.06.153-.062.33.049.553.06.118.234.173.432.222m8.513 0h-3.645a1.5 1.5 0 0 0 .12-.576q0-.183-.053-.358c.152-.176.263-.383.326-.607l.093.003c.3.002.593-.09.836-.266q.06.066.126.124c.42.411.977.654 1.564.68h.43v-.215z" clip-rule="evenodd"></path></svg>'},2733:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(3538),o=n(3467),i=n(1035),s=n(4820);class a{constructor(){this.state={}}static getInstance(){return a.instance||(a.instance=new a,window._mutableStoreManager=a.instance),a.instance}updateStateValue(e,t,n){var o;const a=null!==(o=null==t?void 0:t.split("."))&&void 0!==o?o:[],l=[e].concat(a);(0,r.A)(this.state,l,n),(0,i.Vp)().dispatch((0,s.widgetMutableStatePropChange)(e,t))}readStateValue(e,t){var n;const r=null!==(n=null==t?void 0:t.split("."))&&void 0!==n?n:[],i=[e].concat(r);return(0,o.A)(this.state,i)}getStateValue(e){return(0,o.A)(this.state,e)}getState(){return this.state}clearState(){Object.keys(this.state).forEach((e=>{delete this.state[e]}))}}},2773:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 1.5a1.5 1.5 0 0 1-2.147 1.354l-11 11a1.5 1.5 0 1 1-.707-.707l11-11A1.5 1.5 0 1 1 16 1.5" clip-rule="evenodd"></path></svg>'},2786:(e,t,n)=>{"use strict";n.d(t,{isAllowedToTrack:()=>l});var r=n(4502),o=n(9359),i=n(1035);function s(){return`${(0,r.getLocalStorageAppKey)()}-cookie-confirmations`}function a(){var e,t;const n=s(),o=(0,r.readLocalStorage)(n);let a=null;if(a=window.jimuConfig.isInBuilder?(0,i.Vp)().getState().appStateInBuilder.appConfig:(0,i.Vp)().getState().appConfig,o){const n=JSON.parse(o).confirmTime;return!((null===(e=null==a?void 0:a.cookieBanner)||void 0===e?void 0:e.renewTime)&&n<(null===(t=null==a?void 0:a.cookieBanner)||void 0===t?void 0:t.renewTime))}return!1}function l(){var e,t,n;let l=null;if(l=window.jimuConfig.isInBuilder?null===(e=(0,i.Vp)().getState().appStateInBuilder)||void 0===e?void 0:e.appConfig:(0,i.Vp)().getState().appConfig,(null===(t=null==l?void 0:l.cookieBanner)||void 0===t?void 0:t.enable)&&(null===(n=null==l?void 0:l.cookieBanner)||void 0===n?void 0:n.consentMode)===o.pg.Required){if(!a())return!1;if(!(a()?JSON.parse((0,r.readLocalStorage)(s())):null).performance)return!1}return!0}},2789:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return function(t){return e(t)}}},2799:(e,t)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,g=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,S=n?Symbol.for("react.responder"):60118,I=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case i:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case m:case g:case l:return e;default:return t}}case o:return t}}}function w(e){return b(e)===d}t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=p,t.Fragment=i,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||b(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===p},t.isFragment=function(e){return b(e)===i},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===g},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===a},t.isStrictMode=function(e){return b(e)===s},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===d||e===a||e===s||e===f||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===y||e.$$typeof===S||e.$$typeof===I||e.$$typeof===v)},t.typeOf=b},2851:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2528),o=n(6984),i=Object.prototype.hasOwnProperty;const s=function(e,t,n){var s=e[t];i.call(e,t)&&(0,o.A)(s,n)&&(void 0!==n||t in e)||(0,r.A)(e,t,n)}},2910:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(2089),o=n(3610),i=n(1035),s=n(4820),a=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class l{constructor(){this.extensions={},this.extensionClasses={}}static getInstance(){return l.instance||(l.instance=new l,window._extensionManager=l.instance),l.instance}getExtensions(e){return this.extensions[e]||[]}getAllExtensions(){const e=[];return Object.keys(this.extensions).forEach((t=>{this.extensions[t].forEach((t=>{e.push(t)}))})),e}registerExtension(e){if(!this.getExtensionById(e.extension.id)){if(this.extensions[e.epName]){if(!o.EP_SUPPORT_MULTIPLE_EXTENSIONS.includes(e.epName))return;this.extensions[e.epName].push(e.extension),this.extensions[e.epName]=this.extensions[e.epName].sort(((e,t)=>e.index-t.index))}else this.extensions[e.epName]=[e.extension];e.epName===o.ExtensionPoints.ReduxStore&&(0,i.Vp)().dispatch((0,s.initStoreExtensionState)(e.extension.id))}}destroyAllExtensions(){Object.keys(this.extensions).forEach((e=>{this.extensions[e].forEach((e=>{delete this.extensionClasses[e.name],e.destroy&&e.destroy()}))})),this.extensions={}}destroyWidgetExtensions(e){Object.keys(this.extensions).forEach((t=>{this.extensions[t].forEach((t=>{t.widgetId===e&&(delete this.extensionClasses[t.name],t.destroy&&t.destroy())})),this.extensions[t]=this.extensions[t].filter((t=>t.widgetId!==e))}))}registerWidgetExtensions(e,t){return a(this,void 0,void 0,(function*(){var n;const r=[];e.manifest.extensions&&e.manifest.extensions.forEach((t=>{(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||!o.EP_BUILDER_ONLY_EXTENSIONS.includes(t.point))&&r.push(this.registerWidgetExtension(e,t))}));const a=yield Promise.all(r);if(t&&e.manifest.extensions){const t=(0,i.Vp)().getState().widgetsRuntimeInfo;(null===(n=null==t?void 0:t[e.id])||void 0===n?void 0:n.shouldExpandContextTool)||(0,i.Vp)().dispatch((0,s.widgetRuntimeInfoChange)(e.id,"shouldExpandContextTool",!0))}return a}))}registerWidgetExtension(e,t){return a(this,void 0,void 0,(function*(){if(this.extensions[t.point]){if(!o.EP_SUPPORT_MULTIPLE_EXTENSIONS.includes(t.point))return Promise.resolve();if(this.extensions[t.point].filter((n=>n.name===`${e.manifest.name}-${t.name}`&&n.widgetId===e.id)).length>0)return Promise.resolve()}return window.jimuConfig.isInBuilder&&o.EP_BUILDER_ONLY_EXTENSIONS.includes(t.point)&&(yield window.parent._extensionManager.registerWidgetExtension(e,t)),this.loadWidgetExtensionClass(e,t).then((n=>{const r=new n;r.name=`${e.manifest.name}-${t.name}`,r.widgetId=e.id,r.id=`${r.widgetId}-${t.name}`,r.label=e.manifest.i18nMessages[`_ext_${t.name}_label`]||t.label,this.registerExtension({epName:t.point,extension:r})})).catch((t=>(console.error("Register widget extension error.",e.label),Promise.resolve())))}))}loadWidgetExtensionClass(e,t){return a(this,void 0,void 0,(function*(){const n=`${e.manifest.name}-${t.name}`;if(this.extensionClasses[n])return yield this.extensionClasses[n];const o=e.uri+"dist/"+t.uri;return this.extensionClasses[n]=(0,r.loadModule)(o).then((e=>e.default)),this.extensionClasses[n]}))}getExtensionById(e){const t=this.getAllExtensions();for(const n of t)if(n.id===e)return n}}},2938:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).major},2943:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0" clip-rule="evenodd"></path></svg>'},3001:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m4 2 8 6-8 6z"></path></svg>'},3007:(e,t,n)=>{const r=n(3908);e.exports=(e,t,n,o,i)=>{"string"==typeof n&&(i=o,o=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,o,i).version}catch(e){return null}}},3020:(e,t,n)=>{"use strict";function r(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function o(e){return Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[1])}function i(e){return e.join(",")}n.d(t,{OL:()=>o,Wr:()=>i,Zu:()=>r})},3096:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ADD_MARKER_LAYER_ID:()=>I,ADD_TO_MAP_DATA_ID_PREFIX:()=>S,BREAK_POINTS:()=>o,CURRENT_PAGE:()=>h,DATA_SOURCES_PROFILE_ARCADE_CONTENT_ID_PREFIX:()=>w,DATA_VIEW_ID_FOR_NO_SELECTION:()=>d,DEFAULT_PAGE_WIDTH:()=>s,DEFAULT_QUERY_PAGE_SIZE:()=>g,DEFAULT_VIEWPORT_SIZE:()=>i,FEATURE_PROFILE_ARCADE_CONTENT_ID_PREFIX:()=>b,MAX_DATA_SOURCES_PROFILE_ARCADE_CONTENT_PER_PAGE:()=>E,OUTPUT_DATA_VIEW_ID:()=>p,REPEAT_CONTEXT_DATA_VIEW_ID:()=>f,SCREEN_RESOLUTIONS:()=>l,SELECTION_DATA_VIEW_ID:()=>c,SHARED_THEME:()=>u,SHOW_ON_MAP_DATA_ID_PREFIX:()=>y,TYPE_KEYWORDS_OF_EXPRESS_APP:()=>v,USER_LOCALE_KEY:()=>m});var r=n(3702);const o=[576,992],i={DESKTOP:{width:1280,height:800},PAD:{width:768,height:1024},PHONE:{width:414,height:896}},s=960,a={};a[r.rH.Large]=[{width:1024,height:768},{width:1280,height:800},{width:1280,height:1024},{width:1366,height:768},{width:1440,height:900},{width:1536,height:864},{width:1600,height:900},{width:1920,height:1080}],a[r.rH.Medium]=[{width:601,height:962},{width:600,height:1024},{width:768,height:1024},{width:800,height:1280},{width:834,height:1112}],a[r.rH.Small]=[{width:360,height:640},{width:360,height:720},{width:360,height:740},{width:375,height:667},{width:414,height:736}];const l=a,u="themes/shared-theme/",c="selection",d="no_selection",p="output",f="repeat_context",h="current_page",g=100,m="exb_user_locale",v="ExpressExperienceApp",y="layer_of_showOnMap_action_",S="layer_of_addToMap_action_",I="__exb_add_marker_action_layer",b="__exb_feature_profile_arcade_content_",w="__exb_data_sources_profile_arcade_content_",E=10},3098:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},3149:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3153:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(){return[]}},3195:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M0 3.307V15l5.722-2.117 4.528 1.937L16 12.693V1l-5.722 2.117L5.75 1.18zm1 10.286V3.974l4-1.48v9.619zm5-1.65 4 1.711V4.057L6 2.346zm5 1.563V3.887l4-1.48v9.619z" clip-rule="evenodd"></path></svg>'},3467:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(2388),o=n(901);const i=function(e,t){for(var n=0,i=(t=(0,r.A)(t,e)).length;null!=e&&n<i;)e=e[(0,o.A)(t[n++])];return n&&n==i?e:void 0};const s=function(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}},3473:(e,t,n)=>{var r=n(7043),o=n(5323);n(1100);function i(e){return null==e}function s(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||r.whiteList,e.onAttr=e.onAttr||r.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||r.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||r.safeAttrValue,this.options=e}s.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,s=t.onIgnoreAttr,a=t.safeAttrValue;return o(e,(function(e,t,o,l,u){var c=n[o],d=!1;if(!0===c?d=c:"function"==typeof c?d=c(l):c instanceof RegExp&&(d=c.test(l)),!0!==d&&(d=!1),l=a(o,l)){var p,f={position:t,sourcePosition:e,source:u,isWhite:d};return d?i(p=r(o,l,f))?o+":"+l:p:i(p=s(o,l,f))?void 0:p}}))},e.exports=s},3484:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(6888),o=n(1636),i=n(6048),s=n(1035),a=n(5689),l=n(476),u=n(508),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class d{constructor(){this.servicesInfo={},this.servicesInfoPromise={},this.arcGISServersInfo={},this.arcGISServersInfoPromise={}}static getInstance(){return window.jimuConfig&&window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._serviceManager?window._appWindow._serviceManager:(console.error("Please wait for app loaded."),null):(d.instance||(d.instance=new d,window._serviceManager=d.instance),d.instance)}getServiceInfo(e){return this.servicesInfo[e]}setServiceInfo(e,t){this.servicesInfo[e]=t}getServerInfo(e){return this.arcGISServersInfo[e]}getServerInfoByServiceUrl(e){return this.arcGISServersInfo[this.getArcGISServerUrlFromServiceUrl(e)]}clearServiceInfo(e){e&&Object.keys(this.servicesInfoPromise).forEach((t=>{t.startsWith(e)&&(delete this.servicesInfoPromise[t],delete this.servicesInfo[t])}))}fetchServiceInfo(e){return c(this,void 0,void 0,(function*(){return this.getServiceInfo(e)?Promise.resolve(this.getServiceInfo(e)):(this.servicesInfoPromise[e]||(this.servicesInfoPromise[e]=this.isHostedServiceInSamePortal(e).then((t=>c(this,void 0,void 0,(function*(){return(0,o.requestWrapper)(e,(n=>c(this,void 0,void 0,(function*(){return(0,r.request)(e,{authentication:n,httpMethod:"GET"}).then((e=>({definition:e,isHostedInSamePortal:t})))}))),1)})))).then((t=>(this.servicesInfo[e]=t,t)))),this.servicesInfoPromise[e])}))}isHostedServiceInSamePortal(e){return c(this,void 0,void 0,(function*(){return this.fetchArcGISServerInfo(e).then((t=>(null==t?void 0:t.owningSystemUrl)?!(!/https?:\/\/(www|services)\.arcgis\.com/.test(t.owningSystemUrl)||!/maps\.arcgis\.com\/?$/.test((0,s.Vp)().getState().portalUrl))||(!(!/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsdevext\.arcgis\.com\/?$/.test((0,s.Vp)().getState().portalUrl))||(!(!/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(t.owningSystemUrl)||!/mapsqa\.arcgis\.com\/?$/.test((0,s.Vp)().getState().portalUrl))||(0,a.isSamePortalUrl)((0,s.Vp)().getState().portalUrl,t.owningSystemUrl))):!!i.Ay.getInstance().getSessionByUrl(e)))}))}fetchArcGISServerInfo(e){return c(this,void 0,void 0,(function*(){const t=this.getArcGISServerUrlFromServiceUrl(e);return t?(this.arcGISServersInfoPromise[t]||(this.arcGISServersInfoPromise[t]=(0,r.request)(t,{httpMethod:"GET"}).then((e=>(this.arcGISServersInfo[t]=e,e))).catch((e=>c(this,void 0,void 0,(function*(){return console.warn("Failed to fetch ArcGIS server info."),Promise.resolve(null)}))))),this.arcGISServersInfoPromise[t]):Promise.resolve(null)}))}getArcGISServerUrlFromServiceUrl(e){const t=(0,l.getServerRootUrl)(e);return t?t+"/rest/info":null}isHostedService(e){return c(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?(0,r.request)(t+"/rest/info",{httpMethod:"GET"}).then((e=>!!e.owningSystemUrl)):Promise.resolve(!1)}))}fetchChildLayerDefinitionsFromUrls(e){return c(this,void 0,void 0,(function*(){return Promise.allSettled(e.map((e=>c(this,void 0,void 0,(function*(){return this.fetchServiceInfo(e).then((e=>e.definition))}))))).then((t=>{const n={};let r;return t.forEach(((t,o)=>{const i="fulfilled"===t.status?t.value:null;i&&(r=e[o],n[r]=i)})),n})).then((e=>{const t=Object.keys(e).map((t=>e[t])),n=this._getAllChildLayerIdsOfGroupLayer(t),r={};return Object.keys(e).forEach((t=>{n.some((n=>{var r;return n===`${null===(r=e[t])||void 0===r?void 0:r.id}`}))||(r[t]=e[t])})),r}))}))}_getAllChildLayerIdsOfGroupLayer(e){if(!e||0===e.length)return[];const t=e.filter((e=>e.type===u.Oh.GroupLayer));return this._getChildLayerIdsFromGroupLayerDefinitions(t)}_getChildLayerIdsFromGroupLayerDefinitions(e){return 0===e.length?[]:Array.prototype.concat.apply([],e.map((e=>(null==e?void 0:e.subLayers.map((e=>`${e.id}`)))||[])))}}},3509:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2H3v12h5zM2 1v13H0v1h16v-1h-3V8.69l-4-2V1zm7 6.809V14h3V9.309zM5 3H4v1h1zM4 6h1v1H4zm1 3H4v1h1zm1-6h1v1H6zm1 3H6v1h1zM6 9h1v1H6z" clip-rule="evenodd"></path></svg>'},3537:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});Math.pow(10,8);const r=Symbol.for("constructDateFrom");function o(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&r in e?e[r](t):e instanceof Date?new e.constructor(t):new Date(t)}function i(e,t){return o(t||e,e)}},3538:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(2851),o=n(2388),i=n(5353),s=n(3149),a=n(901);const l=function(e,t,n,l){if(!(0,s.A)(e))return e;for(var u=-1,c=(t=(0,o.A)(t,e)).length,d=c-1,p=e;null!=p&&++u<c;){var f=(0,a.A)(t[u]),h=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(u!=d){var g=p[f];void 0===(h=l?l(g,f,p):void 0)&&(h=(0,s.A)(g)?g:(0,i.A)(t[u+1])?[]:{})}(0,r.A)(p,f,h),p=p[f]}return e};const u=function(e,t,n){return null==e?e:l(e,t,n)}},3610:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{DummyExtension:()=>s,EP_BUILDER_ONLY_EXTENSIONS:()=>i,EP_SUPPORT_MULTIPLE_EXTENSIONS:()=>o,ExtensionPoints:()=>r}),function(e){e.AppConfigProcessor="APP_CONFIG_PROCESSOR",e.WidgetClassWrapper="WIDGET_CLASS_WRAPPER",e.AppConfigService="APP_CONFIG_SERVICE",e.ReduxStore="REDUX_STORE",e.DependencyDefine="DEPENDENCY_DEFINE",e.DataSourceFactoryUri="DATA_SOURCE_FACTORY_URI",e.ContextTool="CONTEXT_TOOL",e.AppConfigOperations="APP_CONFIG_OPERATIONS",e.BuilderOperations="BUILDER_OPERATIONS",e.LayoutTransformer="LAYOUT_TRANSFORMER"}(r||(r={}));const o=[r.ReduxStore,r.DataSourceFactoryUri,r.DependencyDefine,r.ContextTool,r.AppConfigOperations,r.BuilderOperations,r.LayoutTransformer],i=[r.ContextTool,r.AppConfigOperations];class s{}},3676:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SearchQueryBuilder:()=>K,acceptInvitation:()=>Ce,addGroupUsers:()=>te,addItemData:()=>c,addItemPart:()=>Q,addItemRelationship:()=>d,addItemResource:()=>p,bboxToString:()=>i.Wr,cancelItemUpload:()=>Z,commitItemUpload:()=>X,createFolder:()=>h,createGroup:()=>ae,createGroupNotification:()=>le,createItem:()=>m,createItemInFolder:()=>g,createOrgNotification:()=>ye,declineInvitation:()=>Te,determineOwner:()=>i.Zu,determineUsername:()=>Ie.O,ensureMembership:()=>Be,exportItem:()=>v,getGroup:()=>L,getGroupCategorySchema:()=>M,getGroupContent:()=>k,getGroupUsers:()=>N,getItem:()=>S,getItemBaseUrl:()=>I,getItemData:()=>b,getItemGroups:()=>O,getItemInfo:()=>x,getItemMetadata:()=>R,getItemParts:()=>T,getItemResource:()=>A,getItemResources:()=>E,getItemStatus:()=>C,getPortal:()=>He,getPortalSettings:()=>qe,getPortalUrl:()=>o,getRelatedItems:()=>w,getSelf:()=>We,getSharingUrl:()=>U,getUniqueServiceName:()=>Ge,getUser:()=>be,getUserContent:()=>f,getUserInvitation:()=>Oe,getUserInvitations:()=>Ae,getUserMembership:()=>$,getUserNotifications:()=>xe,getUserProperties:()=>Le,getUserTags:()=>we,getUserUrl:()=>Ee,inviteGroupUsers:()=>ie,isBBox:()=>i.OL,isItemOwner:()=>F,isItemSharedWithGroup:()=>je,isOrgAdmin:()=>B,isServiceNameAvailable:()=>Ve,joinGroup:()=>me,leaveGroup:()=>ve,moveItem:()=>u,protectGroup:()=>ue,protectItem:()=>D,reassignItem:()=>V,removeFolder:()=>q,removeGroup:()=>de,removeGroupUsers:()=>oe,removeItem:()=>G,removeItemRelationship:()=>W,removeItemResource:()=>H,removeItemThumbnail:()=>z,removeNotification:()=>Re,scrubControlChars:()=>y.Y,searchCommunityUsers:()=>De,searchGroupContent:()=>fe,searchGroupUsers:()=>j,searchGroups:()=>pe,searchItems:()=>Y,searchUsers:()=>Pe,setItemAccess:()=>ke,setUserProperties:()=>Me,shareItemWithGroup:()=>Ue,unprotectGroup:()=>ce,unprotectItem:()=>_,unshareItemWithGroup:()=>$e,updateGroup:()=>he,updateItem:()=>s,updateItemInfo:()=>a,updateItemResource:()=>l,updateUser:()=>_e,updateUserMemberships:()=>ge});var r=n(6888);function o(e={}){return e.portal?(0,r.cleanUrl)(e.portal):e.authentication&&"string"!=typeof e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}var i=n(3020);function s(e){return(0,i.Zu)(e).then((t=>{const n=e.folderId?`${o(e)}/content/users/${t}/${e.folderId}/items/${e.item.id}/update`:`${o(e)}/content/users/${t}/items/${e.item.id}/update`;return e.params=Object.assign(Object.assign({},e.params),e.item),e.params.extent&&(0,i.OL)(e.params.extent)&&(e.params.extent=(0,i.Wr)(e.params.extent)),(0,r.request)(n,e)}))}function a(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/updateinfo`;return e.params=Object.assign({folderName:e.folderName,file:e.file},e.params),(0,r.request)(n,e)}))}function l(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/updateResources`;return e.params=Object.assign({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content},e.params),void 0!==e.private&&(e.params.access=e.private?"private":"inherit"),(0,r.request)(n,e)}))}function u(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.itemId}/move`;let i=e.folderId;return i||(i="/"),e.params=Object.assign({folder:i},e.params),(0,r.request)(n,e)}))}function c(e){const t=Object.assign({item:{id:e.id,text:e.text,file:e.file}},e);return delete t.id,delete t.data,s(t)}function d(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/addRelationship`,i=(0,r.appendCustomParams)(e,["originItemId","destinationItemId","relationshipType"],{params:Object.assign({},e.params)});return(0,r.request)(n,i)}))}function p(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/addResources`;return e.params=Object.assign({file:e.resource,fileName:e.name,resourcesPrefix:e.prefix,text:e.content,access:e.private?"private":"inherit"},e.params),(0,r.request)(n,e)}))}const f=e=>{const{folderId:t,start:n=1,num:s=10,authentication:a}=e,l=t?`/${t}`:"";return(0,i.Zu)(e).then((t=>`${o(e)}/content/users/${t}${l}`)).then((e=>(0,r.request)(e,{httpMethod:"GET",authentication:a,params:{start:n,num:s}})))};function h(e){return(0,i.Zu)(e).then((t=>{const n=`${`${o(e)}/content/users/${t}`}/createFolder`;return e.params=Object.assign({title:e.title},e.params),(0,r.request)(n,e)}))}function g(e){return e.multipart&&!e.filename?Promise.reject(new Error("The filename is required for a multipart request.")):(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}`;let s=`${n}/addItem`;e.folderId&&(s=`${n}/${e.folderId}/addItem`),e.params=Object.assign(Object.assign({},e.params),e.item),e.params.extent&&(0,i.OL)(e.params.extent)&&(e.params.extent=(0,i.Wr)(e.params.extent));const a=(0,r.appendCustomParams)(e,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:Object.assign({},e.params)});return(0,r.request)(s,a)}))}function m(e){return g(Object.assign({folderId:null},e))}const v=e=>{const{authentication:t,id:n,title:s,exportFormat:a,exportParameters:l}=e;return(0,i.Zu)(e).then((t=>`${o(e)}/content/users/${t}/export`)).then((e=>(0,r.request)(e,{httpMethod:"POST",authentication:t,params:{itemId:n,title:s,exportFormat:a,exportParameters:l}})))};var y=n(340);function S(e,t){const n=I(e,t),o=Object.assign({httpMethod:"GET"},t);return(0,r.request)(n,o)}const I=(e,t)=>`${"string"==typeof t?t:o(t)}/content/items/${e}`;function b(e,t){const n=`${I(e,t)}/data`,o=Object.assign({httpMethod:"GET",params:{}},t);return o.file&&(o.params.f=null),(0,r.request)(n,o).catch((e=>{if(!RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i).test(e.message))throw e}))}function w(e){const t=`${I(e.id,e)}/relatedItems`,n=Object.assign({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?n.params.relationshipType=e.relationshipType:n.params.relationshipTypes=e.relationshipType,delete n.direction,delete n.relationshipType,(0,r.request)(t,n)}function E(e,t){const n=`${I(e,t)}/resources`,o=Object.assign({},t);return o.params=Object.assign({num:1e3},o.params),(0,r.request)(n,o)}function A(e,t){const n=t.readAs||"blob";return P(e,`/resources/${t.fileName}`,n,t)}function O(e,t){const n=`${I(e,t)}/groups`;return(0,r.request)(n,t)}function C(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/status`,i=(0,r.appendCustomParams)(e,["jobId","jobType"],{params:Object.assign({},e.params)});return(0,r.request)(n,i)}))}function T(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/parts`;return(0,r.request)(n,e)}))}function x(e,t){const{fileName:n="iteminfo.xml",readAs:r="text"}=t||{};return P(e,`/info/${n}`,r,Object.assign({httpMethod:"GET"},t))}function R(e,t){return x(e,Object.assign(Object.assign({},t),{fileName:"metadata/metadata.xml"}))}function P(e,t,n,o){const i=`${I(e,o)}${t}`,s=Object.assign({params:{}},o),a=s.rawResponse;return s.rawResponse=!0,s.params.f=null,(0,r.request)(i,s).then((e=>a?e:"json"!==n?e[n]():e.text().then((e=>JSON.parse((0,y.Y)(e))))))}function D(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/protect`;return(0,r.request)(n,e)}))}function _(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/unprotect`;return(0,r.request)(n,e)}))}function L(e,t){const n=`${o(t)}/community/groups/${e}`,i=Object.assign({httpMethod:"GET"},t);return(0,r.request)(n,i)}function M(e,t){const n=`${o(t)}/community/groups/${e}/categorySchema`,i=Object.assign({httpMethod:"GET"},t);return(0,r.request)(n,i)}function k(e,t){const n=`${o(t)}/content/groups/${e}`,i=Object.assign(Object.assign({httpMethod:"GET"},{params:{start:1,num:100}}),t);return t&&t.paging&&(i.params=Object.assign({},t.paging)),(0,r.request)(n,i)}function N(e,t){const n=`${o(t)}/community/groups/${e}/users`,i=Object.assign({httpMethod:"GET"},t);return(0,r.request)(n,i)}function j(e,t){const n=`${o(t)}/community/groups/${e}/userlist`,i=(0,r.appendCustomParams)(t||{},["name","num","start","sortField","sortOrder","joined","memberType"],{httpMethod:"GET"});return(0,r.request)(n,i)}function U(e,t){const n=t||e.authentication.username,r=e.owner||n;return`${o(e)}/content/users/${encodeURIComponent(r)}/items/${e.id}/share`}function F(e,t){const n=t||e.authentication.username;return(e.owner||n)===n}function B(e){return e.authentication.getUser().then((e=>e&&"org_admin"===e.role&&!e.roleId))}function $(e){return L(e.groupId,e).then((e=>e.userMembership.memberType)).catch((()=>"none"))}function V(e){return B(e).then((t=>{if(!t)throw Error(`Item ${e.id} can not be reassigned because current user is not an organization administrator.`);const n=`${o(e)}/content/users/${e.currentOwner}/items/${e.id}/reassign`,i={params:{targetUsername:e.targetUsername,targetFolderName:e.targetFolderName},authentication:e.authentication};return(0,r.request)(n,i)}))}function G(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/delete`;return(0,r.request)(n,e)}))}function W(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/deleteRelationship`,i=(0,r.appendCustomParams)(e,["originItemId","destinationItemId","relationshipType"],{params:Object.assign({},e.params)});return(0,r.request)(n,i)}))}function H(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/removeResources`;return e.params=Object.assign(Object.assign({},e.params),{resource:e.resource}),void 0!==e.deleteAll&&(e.params.deleteAll=e.deleteAll),(0,r.request)(n,e)}))}function q(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${encodeURIComponent(t)}/${e.folderId}/delete`;return(0,r.request)(n,e)}))}function z(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/deleteThumbnail`;return(0,r.request)(n,e)}))}class K{constructor(e=""){this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}match(...e){return this.termStack=this.termStack.concat(e),this}in(e){const t=`\`in(${e?`"${e}"`:""})\``;return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=`${e}:`),this.commit()):((0,r.warn)(`${t} was called with no call to \`match(...)\` or \`from(...)\`/\`to(...)\`. Your query was not modified.`),this)}startGroup(){return this.commit(),this.openGroups>0&&(this.q+=" "),this.openGroups++,this.q+="(",this}endGroup(){return this.openGroups<=0?((0,r.warn)("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."),this):(this.commit(),this.openGroups--,this.q+=")",this)}and(){return this.addModifier("and")}or(){return this.addModifier("or")}not(){return this.addModifier("not")}from(e){return this.hasTerms?((0,r.warn)('`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01").  Your query was not modified.'),this):(this.rangeStack[0]=e,this)}to(e){return this.hasTerms?((0,r.warn)('`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01"). Your query was not modified.'),this):(this.rangeStack[1]=e,this)}boost(e){return this.commit(),this.q+=`^${e}`,this}toParam(){return this.commit(),this.cleanup(),this.q}clone(){return this.commit(),this.cleanup(),new K(this.q+"")}addModifier(e){return this.currentModifer?((0,r.warn)(`You have called \`${this.currentModifer}()\` after \`${e}()\`. Your current query was not modified.`),this):(this.commit(),""===this.q&&"not"!==e?((0,r.warn)(`You have called \`${e}()\` without calling another method to modify your query first. Try calling \`match()\` first.`),this):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=`${e.toUpperCase()} `,this))}hasWhiteSpace(e){return/\s/g.test(e)}formatTerm(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.hasWhiteSpace(e)?`"${e}"`:e}commit(){return this.currentModifer=void 0,this.hasRange&&(this.q+=`[${this.formatTerm(this.rangeStack[0])} TO ${this.formatTerm(this.rangeStack[1])}]`,this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map((e=>this.formatTerm(e))).join(" "),this.termStack=[]),this}get hasTerms(){return this.termStack.length>0}get hasRange(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]}cleanup(){if(this.openGroups>0)for((0,r.warn)(`Automatically closing ${this.openGroups} group(s). You can use \`endGroup(...)\` to remove this warning.`);this.openGroups>0;)this.q+=")",this.openGroups--;const e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&(0,r.warn)("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")}}function J(e,t){let n,i;switch(n="string"==typeof e||e instanceof K?{httpMethod:"GET",params:{q:e}}:(0,r.appendCustomParams)(e,["q","num","start","sortField","sortOrder","searchUserAccess","searchUserName","filter","countFields","countSize","categories","categoryFilters"],{httpMethod:"GET"}),t){case"item":i="/search";break;case"group":i="/community/groups";break;case"groupContent":if("string"==typeof e||e instanceof K||!e.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));i=`/content/groups/${e.groupId}/search`;break;case"communityUser":i="/community/users";break;default:i="/portals/self/users/search"}const s=o(n)+i;return(0,r.request)(s,n).then((n=>(n.nextStart&&-1!==n.nextStart&&(n.nextPage=function(){let r;return"string"==typeof e||e instanceof K?r={q:e,start:n.nextStart}:(r=e,r.start=n.nextStart),J(r,t)}),n)))}function Y(e){return J(e,"item")}function Q(e){const t=e.partNum;return!Number.isInteger(t)||t<1||t>1e4?Promise.reject(new Error("The part number must be an integer between 1 to 10000, inclusive.")):(0,i.Zu)(e).then((n=>{const i=`${o(e)}/content/users/${n}/items/${e.id}/addPart?partNum=${t}`,s=(0,r.appendCustomParams)(e,["file"],{params:Object.assign({},e.params)});return(0,r.request)(i,s)}))}function X(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/commit`,i=(0,r.appendCustomParams)(e,[],{params:Object.assign(Object.assign({},e.params),e.item)});return(0,r.request)(n,i)}))}function Z(e){return(0,i.Zu)(e).then((t=>{const n=`${o(e)}/content/users/${t}/items/${e.id}/cancel`;return(0,r.request)(n,e)}))}var ee=n(3794);function te(e){const t=e.id,n=`${o(e)}/community/groups/${t}/addUsers`,i=Object.assign({},e,{admins:void 0,users:void 0}),s=[...ne("users",e.users,i),...ne("admins",e.admins,i)].map((e=>function(e,t){return(0,r.request)(e,t).catch((e=>({errors:[e]})))}(n,e)));return Promise.all(s).then(re)}function ne(e,t,n){if(!t||t.length<1)return[];return(0,ee.i)(t,25).map((t=>function(e,t,n){return Object.assign({},n,{[e]:t,params:Object.assign(Object.assign({},n.params),{[e]:t})})}(e,t,n)))}function re(e){const t=e.filter((e=>e.notAdded)).reduce(((e,t)=>e.concat(t.notAdded)),[]),n=e.filter((e=>e.errors)).reduce(((e,t)=>e.concat(t.errors)),[]),r={notAdded:t};return n.length>0&&(r.errors=n),r}function oe(e){const{id:t,users:n}=e,i=`${o(e)}/community/groups/${t}/removeUsers`,s=(0,ee.i)(n,25).map((t=>(t=>{const n=Object.assign(Object.assign({},e),{users:t,params:{users:t}});return(0,r.request)(i,n).catch((e=>({errors:[e]})))})(t)));return Promise.all(s).then((e=>{const t=t=>e.filter((e=>e[t])).reduce(((e,n)=>e.concat(n[t])),[]),n=t("errors"),r={notRemoved:t("notRemoved")};return n.length?Object.assign(Object.assign({},r),{errors:n}):r}))}function ie(e){const t=e.id,n=`${o(e)}/community/groups/${t}/invite`,i=function(e){const t=(0,ee.i)(e.users,25);return t.map((t=>function(e,t){const n=Object.assign({},t);return n.params=Object.assign(Object.assign({},n.params),{users:e,role:n.role,expiration:n.expiration}),n}(t,e)))}(e),s=i.map((e=>function(e,t){return(0,r.request)(e,t).catch((e=>({errors:[e]})))}(n,e)));return Promise.all(s).then(se)}function se(e){const t=e.every((e=>e.success)),n=e.reduce(((e,t)=>e.concat(t.errors||[])),[]),r={success:t};return n.length>0&&(r.errors=n),r}function ae(e){const t=`${o(e)}/community/createGroup`;return e.params=Object.assign(Object.assign({},e.params),e.group),(0,r.request)(t,e)}function le(e){const t=`${o(e)}/community/groups/${e.id}/createNotification`,n=Object.assign({params:Object.assign({subject:e.subject,message:e.message,users:e.users,notificationChannelType:e.notificationChannelType||"email",clientId:e.clientId,silentNotification:e.silentNotification,notifyAll:!e.users||0===e.users.length},e.params)},e);return(0,r.request)(t,n)}function ue(e){const t=`${o(e)}/community/groups/${e.id}/protect`;return(0,r.request)(t,e)}function ce(e){const t=`${o(e)}/community/groups/${e.id}/unprotect`;return(0,r.request)(t,e)}function de(e){const t=`${o(e)}/community/groups/${e.id}/delete`,n=Object.assign({},e);return(0,r.request)(t,n)}function pe(e){return J(e,"group")}function fe(e){return J(e,"groupContent")}function he(e){const t=`${o(e)}/community/groups/${e.group.id}/update`;return e.params=Object.assign(Object.assign({},e.params),e.group),(0,r.request)(t,e)}function ge(e){const t=`${o(e)}/community/groups/${e.id}/updateUsers`,n={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?n.params.admins=e.users:n.params.users=e.users,(0,r.request)(t,n)}function me(e){const t=`${o(e)}/community/groups/${e.id}/join`;return(0,r.request)(t,e)}function ve(e){const t=`${o(e)}/community/groups/${e.id}/leave`;return(0,r.request)(t,e)}function ye(e){const t=`${o(e)}/portals/self/createNotification`,n=function(e){const t=(0,ee.i)(e.users,e.batchSize||25);return t.map((t=>function(e,t){const n=Object.assign({},t);return n.params=Object.assign(Object.assign({},n.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:n.notificationChannelType}),n}(t,e)))}(e),i=n.map((e=>function(e,t){return(0,r.request)(e,t).catch((e=>({errors:[e]})))}(t,e)));return Promise.all(i).then(Se)}function Se(e){const t=e.every((e=>e.success)),n=e.reduce(((e,t)=>e.concat(t.errors||[])),[]),r={success:t};return n.length>0&&(r.errors=n),r}var Ie=n(4107);async function be(e){let t,n={httpMethod:"GET"};if("string"==typeof e)t=`https://www.arcgis.com/sharing/rest/community/users/${e}`;else{const r=await(0,Ie.O)(e);t=`${o(e)}/community/users/${r}`,n=Object.assign(Object.assign({},e),n)}return(0,r.request)(t,n)}async function we(e){const t=await(0,Ie.O)(e),n=`${o(e)}/community/users/${t}/tags`;return(0,r.request)(n,e)}function Ee(e){return`${o(e)}/community/users/${encodeURIComponent(e.username)}`}async function Ae(e){let t={httpMethod:"GET"};const n=await(0,Ie.O)(e),i=`${o(e)}/community/users/${n}/invitations`;return t=Object.assign(Object.assign({},e),t),(0,r.request)(i,t)}async function Oe(e){const t=await(0,Ie.O)(e),n=`${o(e)}/community/users/${t}/invitations/${e.invitationId}`;let i={httpMethod:"GET"};return i=Object.assign(Object.assign({},e),i),(0,r.request)(n,i)}async function Ce(e){const t=await(0,Ie.O)(e),n=`${o(e)}/community/users/${t}/invitations/${e.invitationId}/accept`,i=Object.assign({},e);return(0,r.request)(n,i)}async function Te(e){const t=await(0,Ie.O)(e),n=`${o(e)}/community/users/${t}/invitations/${e.invitationId}/decline`,i=Object.assign({},e);return(0,r.request)(n,i)}async function xe(e){let t={httpMethod:"GET"};const n=await(0,Ie.O)(e),i=`${o(e)}/community/users/${n}/notifications`;return t=Object.assign(Object.assign({},e),t),(0,r.request)(i,t)}async function Re(e){const t=await(0,Ie.O)(e),n=`${o(e)}/community/users/${t}/notifications/${e.id}/delete`;return(0,r.request)(n,e)}function Pe(e){return J(e,"user")}function De(e){return J(e,"communityUser")}async function _e(e){const t=e.user.username||await e.authentication.getUsername(),n=`${o(e)}/community/users/${encodeURIComponent(t)}/update`;return e.params=Object.assign(Object.assign({},e.user),e.params),delete e.user,(0,r.request)(n,e)}async function Le(e,t){const n=`${o(t)}/community/users/${encodeURIComponent(e)}/properties`,i=await(0,r.request)(n,Object.assign({httpMethod:"GET"},t));return i.properties.mapViewer||(i.properties.mapViewer="modern"),i.properties}async function Me(e,t,n){const i=`${o(n)}/community/users/${encodeURIComponent(e)}/setProperties`,s=Object.assign({httpMethod:"POST",params:{properties:t}},n);try{const e=await(0,r.request)(i,s);if(!e.success)throw new Error("Success was false");return e}catch(e){throw new Error(`Failed to set user properties: ${e.message}`)}}async function ke(e){const t=await e.authentication.getUsername(),n=U(e,t);return F(e,t)?Ne(n,e):B(e).then((r=>{if(r)return Ne(n,e);throw Error(`This item can not be shared by ${t}. They are neither the item owner nor an organization admin.`)}))}function Ne(e,t){return t.params=Object.assign({org:!1,everyone:!1},t.params),"private"===t.access&&(t.params.groups=" "),"org"===t.access&&(t.params.org=!0),"public"===t.access&&(t.params.account=!0,t.params.everyone=!0),(0,r.request)(e,t)}function je(e){return Y({q:`id: ${e.id} AND group: ${e.groupId}`,start:1,num:10,sortField:"title",authentication:e.authentication,httpMethod:"POST"}).then((t=>{let n=!1;if(t.total>0)return n=t.results.some((t=>t.id===e.id)),n}))}async function Ue(e){return je(e).then((async t=>{if(t)return{itemId:e.id,shortcut:!0,notSharedWith:[]};const{owner:n,confirmItemControl:r}=e,o=await e.authentication.getUsername(),i=n||o;if(i!==o){let t=!1,n=!1;return Promise.all([be({username:o,authentication:e.authentication}),be({username:i,authentication:e.authentication}),$(e)]).then((([o,i,s])=>{const a=!!r;return t="org_admin"===o.role&&!o.roleId,n=o.orgId!==i.orgId,function(e,t,n,r,o,i){const s=[];if(i.groupId!==e.favGroupId)if(t){if(!r)throw Error(`This item can not be shared to shared editing group ${i.groupId} by ${e.username} as they not the item owner or org admin.`);s.push(Be(e,e,!1,`Error adding ${e.username} as member to edit group ${i.groupId}. Consequently item ${i.id} was not shared to the group.`,i),Be(e,o,!0,"none"===n?`Error adding user ${o.username} to edit group ${i.groupId}. Consequently item ${i.id} was not shared to the group.`:`Error promoting user ${o.username} to admin in edit group ${i.groupId}. Consequently item ${i.id} was not shared to the group.`,i))}else if(r)s.push(Be(e,e,!1,`Error adding ${e.username} as member to view group ${i.groupId}. Consequently item ${i.id} was not shared to the group.`,i));else if("none"===n)throw new Error(`This item can not be shared by ${e.username} as they are not a member of the specified group ${i.groupId}.`);return s}(o,a,s,t,i,e)})).then((r=>{const[{revert:o}={promise:Promise.resolve({notAdded:[]}),revert:e=>Promise.resolve(e)}]=r;return Promise.all(r.map((({promise:e})=>e))).then((()=>Fe(e,t,n))).then((e=>o(e)))}))}return Fe(e)})).then((t=>{if(t.notSharedWith.length)throw Error(`Item ${e.id} could not be shared to group ${e.groupId}.`);return t}))}async function Fe(e,t=!1,n=!1){const i=await e.authentication.getUsername(),s=e.owner||i;let a=`${o(e)}/content/items/${e.id}/share`;return(s===i||t&&!n)&&(a=`${o(e)}/content/users/${s}/items/${e.id}/share`),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},(0,r.request)(a,e)}function Be(e,t,n,r,o){const i=t.groups||[],s=i.find((e=>e.id===o.groupId));if(e.orgId!==t.orgId)throw Error(`User ${t.username} is not a member of the same org as ${e.username}. Consequently they can not be added added to group ${o.groupId} nor can item ${o.id} be shared to the group.`);if(!s&&i.length>511)throw Error(`User ${t.username} already has 512 groups, and can not be added to group ${o.groupId}. Consequently item ${o.id} can not be shared to the group.`);let a,l;if(s)n&&"member"===s.userMembership.memberType?(a=ge({id:o.groupId,users:[t.username],newMemberType:"admin",authentication:o.authentication}).then((e=>{const t=e.results.reduce(((e,t)=>(t.success||e.push(t.username),e)),[]);return Promise.resolve({notAdded:t})})).catch((()=>({notAdded:[t.username]}))),l=e=>ge({id:o.groupId,users:[t.username],newMemberType:"member",authentication:o.authentication}).then((()=>e)).catch((()=>e))):(a=Promise.resolve({notAdded:[]}),l=e=>Promise.resolve(e));else{const e=n?"admins":"users";a=te({id:o.groupId,[e]:[t.username],authentication:o.authentication}).then((e=>{if(e.errors&&e.errors.length)throw e.errors[0];return e})).catch((()=>({notAdded:[t.username]}))),l=e=>oe({id:o.groupId,users:[t.username],authentication:o.authentication}).then((()=>e))}return{promise:a.then((e=>{if(e.notAdded.length)throw new Error(r);return e})),revert:l}}function $e(e){return je(e).then((async t=>{if(!t)return Promise.resolve({itemId:e.id,shortcut:!0,notUnsharedFrom:[]});const{owner:n}=e,i=await e.authentication.getUsername();return Promise.all([$(e),be({username:i,authentication:e.authentication})]).then((([t,s])=>{const a=(n||i)===i,l="org_admin"===s.role&&!s.roleId;if(!a&&!l&&["admin","owner"].indexOf(t)<0)throw Error(`This item can not be unshared from group ${e.groupId} by ${i} as they not the item owner, an org admin, group admin or group owner.`);return async function(e){const t=await e.authentication.getUsername(),n=e.owner||t;let i=`${o(e)}/content/items/${e.id}/unshare`;n===t&&(i=`${o(e)}/content/users/${n}/items/${e.id}/unshare`);return e.params={groups:e.groupId},(0,r.request)(i,e)}(e)})).then((t=>{if(t.notUnsharedFrom.length)throw Error(`Item ${e.id} could not be unshared to group ${e.groupId}`);return t}))}))}function Ve(e,t,n){const o=`${n.portal}/portals/self/isServiceNameAvailable`;return(0,r.request)(o,{params:{name:e,type:t},httpMethod:"GET",authentication:n})}function Ge(e,t,n,r){let o=e;return r&&(o=`${e}_${r}`),Ve(o,t,n).then((i=>i.available?o:Ge(e,t,n,r+=1)))}function We(e){return He(null,e)}function He(e,t){const n=e||"self",i=`${o(t)}/portals/${n}`,s=Object.assign({httpMethod:"GET"},t);return(0,r.request)(i,s)}function qe(e,t){const n=e||"self",i=`${o(t)}/portals/${n}/settings`,s=Object.assign({httpMethod:"GET"},t);return(0,r.request)(i,s)}},3702:(e,t,n)=>{"use strict";var r,o,i,s,a,l,u,c,d;n.d(t,{$0:()=>a,Bz:()=>p,Eo:()=>o,J:()=>u,YG:()=>l,cy:()=>h,kd:()=>s,mX:()=>g,oX:()=>i,qZ:()=>c,rH:()=>r,vt:()=>m,xH:()=>f,xO:()=>d,yC:()=>v}),function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE"}(r||(r={})),function(e){e.String="STRING",e.Number="NUMBER",e.Date="DATE",e.DateOnly="DATE_ONLY",e.TimeOnly="TIME_ONLY"}(o||(o={})),function(e){e.BigInteger="esriFieldTypeBigInteger",e.Blob="esriFieldTypeBlob",e.Date="esriFieldTypeDate",e.DateOnly="esriFieldTypeDateOnly",e.TimeOnly="esriFieldTypeTimeOnly",e.Double="esriFieldTypeDouble",e.Geometry="esriFieldTypeGeometry",e.GlobalID="esriFieldTypeGlobalID",e.GUID="esriFieldTypeGUID",e.Integer="esriFieldTypeInteger",e.OID="esriFieldTypeOID",e.Raster="esriFieldTypeRaster",e.Single="esriFieldTypeSingle",e.SmallInteger="esriFieldTypeSmallInteger",e.String="esriFieldTypeString",e.XML="esriFieldTypeXML"}(i||(i={})),function(e){e.Fetching="FETCHING",e.Success="SUCCESS",e.Error="ERROR"}(s||(s={})),function(e){e.Design="DESIGN",e.Run="RUN",e.Express="EXPRESS"}(a||(a={})),function(e){e.Opened="OPENED",e.Active="ACTIVE",e.Closed="CLOSED",e.Hidden="HIDDEN"}(l||(l={})),function(e){e.None="NONE",e.Page="PAGE",e.Dialog="DIALOG",e.View="VIEW",e.WebAddress="WEB_ADDRESS",e.Block="BLOCK",e.Screen="SCREEN",e.PageTop="PAGE_TOP",e.PrintPreview="PRINT_PREVIEW",e.CookieBanner="COOKIE_BANNER"}(u||(u={})),function(e){e.CurrentWindow="_self",e.TopWindow="_top",e.NewWindow="_blank"}(c||(c={})),function(e){e.Normal="NORMAL",e.Layout="LAYOUT"}(d||(d={}));const p=["shortDate","shortDateLE","longMonthDayYear","dayShortMonthYear","longDate","longDateShortTime","longMonthDayYearShortTime","longMonthDayYearLongTime","longMonthDayYearLongTime24","shortDateShortTime","shortDateLEShortTime","shortDateShortTime24","shortDateLEShortTime24","shortDateLongTime","shortDateLELongTime","shortDateLongTime24","shortDateLELongTime24","longMonthYear","shortMonthYear","year"];var f,h;!function(e){e.Header="HEADER",e.Footer="FOOTER",e.Body="BODY"}(f||(f={})),function(e){e.Http="http:",e.Https="https:"}(h||(h={}));const g="_appWindow";var m,v;!function(e){e.Image="IMAGE",e.Config="CONFIG"}(m||(m={})),function(e){e.EXB_DATA_SOURCE_ID_SET_TO_CREATED_JS_API_LAYER="_exb_data_source_id_set_to_created_js_api_layer",e.EXB_OID="_exb_oid",e.EXB_NOT_EDITABLE="_exb_not_editable",e.EXB_DATA_SOURCE="__exb_data_source",e.EXB_DATA_SET="__exb_data_set",e.EXB_LAYER_VIEW_IGNORE_SPATIAL_FILTER="__exb_layer_view_ignore_spatial_filter",e.EXB_LAYER_FROM_RUNTIME="__exb_layer_from_runtime",e.EXB_DATA_SOURCE_ID="__exb_data_source_id",e.EXB_JIMU_LAYER_VIEW_ID="__exb_jimu_layer_view_id",e.EXB_PREDEFINED_RENDERER="__exb_predefined_renderer"}(v||(v={}))},3718:(e,t,n)=>{"use strict";function r(e){return"string"!=typeof e||"/"===(e=e.trim())[e.length-1]&&(e=e.slice(0,-1)),e}n.d(t,{T:()=>r})},3794:(e,t,n)=>{"use strict";function r(e,t){if(0===e.length)return[];const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}n.d(t,{i:()=>r})},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3831:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6912),o=n(2049);const i=function(e,t,n){var i=t(e);return(0,o.A)(e)?i:(0,r.A)(i,n(e))}},3874:(e,t,n)=>{const r=n(8311);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},3904:(e,t,n)=>{const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=i(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=o;const i=n(8587),{safeRe:s,t:a}=n(9718),l=n(2111),u=n(7272),c=n(3908),d=n(8311)},3908:(e,t,n)=>{const r=n(7272),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=n(6874),{safeRe:s,safeSrc:a,t:l}=n(9718),u=n(8587),{compareIdentifiers:c}=n(1123);class d{constructor(e,t){if(t=u(t),e instanceof d){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[l.LOOSE]:s[l.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof d)){if("string"==typeof e&&e===this.version)return 0;e=new d(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof d||(e=new d(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof d||(e=new d(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return c(n,o)}while(++t)}compareBuild(e){e instanceof d||(e=new d(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(r("build compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return c(n,o)}while(++t)}inc(e,t,n){if(e.startsWith("pre")){if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(t){const e=new RegExp(`^${this.options.loose?a[l.PRERELEASELOOSE]:a[l.PRERELEASE]}$`),n=`-${t}`.match(e);if(!n||n[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=d},3927:(e,t,n)=>{const r=n(909);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},3982:(e,t,n)=>{"use strict";n.d(t,{G:()=>r});class r{constructor(){this._status="pending",this._promise=new Promise(((e,t)=>{this._resolver=e,this._rejecter=t}))}resolve(e){return this._status="resolved",this._resolver(e)}reject(e){return this._status="rejected",this._rejecter(e)}get status(){return this._status}get promise(){return this._promise}}},3988:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=n(1917).A.Uint8Array},3999:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>0!==r(e,t,n)},4005:(e,t,n)=>{var r=n(2048),o=n(5930),i=n(8327);function s(e,t){return new i(t).process(e)}(t=e.exports=s).filterXSS=s,t.FilterXSS=i,function(){for(var e in r)t[e]=r[e];for(var n in o)t[n]=o[n]}(),"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},4022:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(4741),o=n(3149);const i=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,o.A)(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),(0,r.A)(e,t,{leading:i,maxWait:t,trailing:s})}},4041:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M5.53 6.937v4.356l5.386-1.905-.604-.45.604-.805 2.368 1.479-8.753 3.095V6.888a1.5 1.5 0 1 1 2.055-1.183l.827.482-.731.731-.556-.324c-.167.157-.37.276-.595.343M5.6 5.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0" clip-rule="evenodd"></path><path fill="#000" d="m8.307 7.414-.707.707.707.707.707-.707.707.707.707-.707-.707-.707.707-.707L9.721 6l-.707.707L8.307 6l-.707.707z"></path><path fill="#000" fill-rule="evenodd" d="M8 14.29c4.8-1.6 8 0 8 0L13.867 1.487a9.76 9.76 0 0 0-5.867 0 9.74 9.74 0 0 1-5.867 0L0 14.29s3.2 1.6 8 0m4.208-1.712c-1.54.01-3.067.267-4.524.762-1.253.428-2.567.65-3.891.66a9.5 9.5 0 0 1-2.67-.363L2.941 2.722a12 12 0 0 0 2.353.241 8.3 8.3 0 0 0 3.078-.547 6.3 6.3 0 0 1 2.334-.402c.768.006 1.533.097 2.28.272l1.76 10.56c-.834-.18-1.685-.27-2.538-.268" clip-rule="evenodd"></path></svg>'},4048:(e,t,n)=>{"use strict";n.r(t),n.d(t,{HistoryContext:()=>L,HistoryProvider:()=>M,browserHistory:()=>P,changeDialog:()=>$,changeHashObjectByDataSourceSelection:()=>V,changePage:()=>U,changeQueryObject:()=>N,changeQueryObjectByDataSourceGDBVersion:()=>G,changeUrlHashObject:()=>j,changeView:()=>F,changeViewBySectionNavInfo:()=>B,putBrowserHistoryLocalState:()=>D,restoreBrowserHistoryLocalState:()=>_,withHistory:()=>k});var r,o=n(8972),i=n(7390),s=n(743),a=n(8798),l=n(8168);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));var u=function(e){return e};var c="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function f(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function h(){return Math.random().toString(36).substr(2,8)}function g(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,o=void 0===r?"":r,i=e.hash,s=void 0===i?"":i;return o&&"?"!==o&&(n+="?"===o.charAt(0)?o:"?"+o),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function m(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var v=n(4820),y=n(1035),S=n(6319),I=n(4262),b=n(7808),w=n(4502);const E=[/\.arcgis\.com$/];var A,O;function C(e){const t=(0,w.getParentWindow)();if(!window||!t||t===window)return;const n=t;try{if(n.jimuConfig&&n.jimuConfig.isBuilder)return}catch(e){}n.postMessage(e,window.location.origin)}function T(e,t){return function(n){if(r=n.origin,(null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.origin)!==r&&!E.some((e=>e.test(r))))return;var r,o;if(!n.data)return;if(!Object.keys(O).map((e=>O[e])).includes(n.data.type))return;const i=n.data;i.type===e&&t(i)}}function x(e,t){if(!window||!window.addEventListener)return;const n=T(e,t);return window.addEventListener("message",n,!1),n}!function(e){e.JimuPageChanged="JIMU_PAGE_CHANGED",e.JimuQueryChanged="JIMU_QUERY_CHANGED",e.JimuHashChanged="JIMU_HASH_CHANGED"}(A||(A={})),function(e){e.ChangePage="CHANGE_PAGE",e.ChangeQuery="CHANGE_QUERY"}(O||(O={}));var R=n(8192);const P=document&&function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,o=n.history;function i(){var e=n.location,t=e.pathname,r=e.search,i=e.hash,s=o.state||{};return[s.idx,u({pathname:t,search:r,hash:i,state:s.usr||null,key:s.key||"default"})]}var s=null;n.addEventListener(d,(function(){if(s)b.call(s),s=null;else{var e=r.Pop,t=i(),n=t[0],o=t[1];if(b.length){if(null!=n){var a=y-n;a&&(s={action:e,location:o,retry:function(){T(-1*a)}},T(a))}}else C(e)}}));var a=r.Pop,v=i(),y=v[0],S=v[1],I=f(),b=f();function w(e){return"string"==typeof e?e:g(e)}function E(e,t){return void 0===t&&(t=null),u((0,l.A)({pathname:S.pathname,hash:"",search:""},"string"==typeof e?m(e):e,{state:t,key:h()}))}function A(e,t){return[{usr:e.state,key:e.key,idx:t},w(e)]}function O(e,t,n){return!b.length||(b.call({action:e,location:t,retry:n}),!1)}function C(e){a=e;var t=i();y=t[0],S=t[1],I.call({action:a,location:S})}function T(e){o.go(e)}return null==y&&(y=0,o.replaceState((0,l.A)({},o.state,{idx:y}),"")),{get action(){return a},get location(){return S},createHref:w,push:function e(t,i){var s=r.Push,a=E(t,i);if(O(s,a,(function(){e(t,i)}))){var l=A(a,y+1),u=l[0],c=l[1];try{o.pushState(u,"",c)}catch(e){n.location.assign(c)}C(s)}},replace:function e(t,n){var i=r.Replace,s=E(t,n);if(O(i,s,(function(){e(t,n)}))){var a=A(s,y),l=a[0],u=a[1];o.replaceState(l,"",u),C(i)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return I.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&n.addEventListener(c,p),function(){t(),b.length||n.removeEventListener(c,p)}}}}();function D(){const e=R.A.getInstance(),t=(0,y.Vp)().getState(),n=t.appConfig,r=t.appRuntimeInfo;if(!e||!n||!r)return;const o=null==r?void 0:r.currentPageId;e.putLocalState("app_current_page",o);const i=null==r?void 0:r.currentDialogId;e.putLocalState("app_current_dlg",i);const s=null==r?void 0:r.sectionNavInfos,a=Object.entries(s||{}).reduce(((e,[t,r])=>{var o,i;const s=r.currentViewId||(null===(i=null===(o=n.sections[t])||void 0===o?void 0:o.views)||void 0===i?void 0:i[0]);return s&&e.push(s),e}),[]);e.putLocalState("app_current_views",a)}function _(){var e;const t=R.A.getInstance(),n=t.getLastLocalState("app_current_page");n&&U(n);const r=(0,y.Vp)().getState(),o=Object.values(r.appConfig.dialogs).find((e=>e.isSplash));if(o){const t=(null===(e=r.appRuntimeInfo)||void 0===e?void 0:e.dialogInfos)||i({}),n=Object.entries(t).find((([e,t])=>t.isClosed&&e===o.id));if(!n){const e=t.setIn([o.id,"isClosed"],!0);(0,y.Vp)().dispatch((0,v.dialogInfosChanged)(e))}}const s=t.getLastLocalState("app_current_dlg");s&&$(s);const a=t.getLastLocalState("app_current_views")||[],l=r.appConfig.views;for(const e of a){const t=Object.values(l).find((t=>t.id===e));t&&F(t.parent,t.id)}}x(O.ChangePage,(e=>{U(e.pageId)})),x(O.ChangeQuery,(e=>{N(e.queryObject)})),P&&P.listen((({action:e,location:t})=>{if(t.pathname!==(0,y.Vp)().getState().appPath){(0,y.Vp)().dispatch((0,v.appPathChanged)(t.pathname));const e=(0,I.parseAppPath)(t.pathname,(0,y.Vp)().getState().appConfig).pageId;n=e,C({type:A.JimuPageChanged,pageId:n})}var n;const r=(0,y.Vp)().getState().queryObject.asMutable(),o=a.A.parse(t.search);if(o.data_filter){const e=a.A.parse(t.search,{decode:!1});o.data_filter=e.data_filter}var i;(0,s.A)(r,o)||((0,y.Vp)().dispatch((0,v.queryObjectChanged)(o)),i=o,C({type:A.JimuQueryChanged,queryObject:i}));const l=(0,b.parseHashStrToObj)(t.hash);var u;(0,s.A)(l,(0,y.Vp)().getState().urlHashObject.asMutable())||((0,y.Vp)().dispatch((0,v.urlHashObjectChanged)(l)),u=l,C({type:A.JimuHashChanged,urlHashObject:u})),window.jimuConfig.isBuilder||window.jimuConfig.isSite||window.jimuConfig.isInBuilder||D()}));const L=o.createContext(P),M=e=>o.createElement(L.Provider,{value:P},e.children);function k(e){class t extends o.PureComponent{render(){return o.createElement(L.Consumer,null,(t=>o.createElement(e,Object.assign({},this.props,{history:t}))))}}return t.displayName=`HistoryComponent(${e.displayName})`,t}function N(e,t=!1,n=!1){if((0,s.A)(e,(0,y.Vp)().getState().queryObject))return;let r=n?i(e):(0,y.Vp)().getState().queryObject.merge(e);r=r.without.apply(r,Object.keys(r).filter((e=>null===r[e])));const o=(0,b.parseQueryObjToStr)(r),a=(0,I.createLocation)(P.location,"?"+o);try{t?P.replace(a):P.push(a)}catch(e){console.error("Failed to change browser history",e)}}function j(e,t){const{replaceHistory:n=!0,isReplaceHashObject:r=!1}=null!=t?t:{};if((0,s.A)(e,(0,y.Vp)().getState().urlHashObject))return;const o=P.location.search;let i=(0,y.Vp)().getState().urlHashObject;i=(0,b.getFullEncodedUrlHashObject)(i);const a=!r;let l=i.merge(e,{deep:a});for(const e of Object.keys(l)){const t=l[e];if(null===e||null===t)l=l.without(e);else for(const n of Object.keys(t)){const r=t[n];null!==n&&null!==r||(l=l.update(e,(e=>e.without(n))))}}const u=(0,b.parseHashObjToStr)(l),c=Object.assign({},P.location);c.hash=u;const d=(0,I.createLocation)(c,o);try{n?P.replace(d):P.push(d)}catch(e){console.error("Failed to change browser history",e)}}function U(e){(0,I.parseAppPath)(window.location.pathname,(0,y.Vp)().getState().appConfig).pageId!==e&&P.push((0,I.getPageLinkUrl)(e,(0,y.Vp)().getState().queryObject))}function F(e,t){const n=(0,y.Vp)().getState();let r=n.queryObject.views?n.queryObject.views.split(","):[];r=r.map((e=>(0,I.getViewIdFromIdOrLabel)(e,n.appConfig)));const o=r.length,i=Object.keys(n.appConfig.views);r=r.filter((e=>i.includes(e)));const s=r.length;if(r.includes(t)){if(o===s)return;N({views:r.map((e=>n.appConfig.views[e].label)).sort().join(",")})}else r=r.filter((t=>!n.appConfig.sections[e].views.includes(t))),r.push(t),N({views:r.map((e=>(0,I.fixViewLabel)(n.appConfig.views[e].label))).sort().join(",")})}function B(e,t){var n;const r=(0,y.Vp)().getState();let o=(null===(n=r.queryObject.views)||void 0===n?void 0:n.split(",").map((e=>(0,I.getViewIdFromIdOrLabel)(e,r.appConfig))))||[];o.includes(t.currentViewId)||(o=o.filter((t=>!r.appConfig.sections[e].views.includes(t))),o.push(t.currentViewId)),N({views:o.map((e=>(0,I.fixViewLabel)(r.appConfig.views[e].label))).sort().join(",")})}function $(e){N({dlg:e})}function V(e,t){var n;const r=function(e){var t;const n={};if(null==e?void 0:e.queryParams)Object.keys(e.queryParams).forEach((t=>{switch(t){case S.h5.Id:break;case S.h5.Where:case S.h5.SpatialRel:n[t]=e.queryParams[t];break;case S.h5.Geometry:n[t]=JSON.stringify(e.queryParams[t]);break;default:const r=t;console.warn(`Unhandled case: ${r}`)}}));else if((null==e?void 0:e.records)||(null==e?void 0:e.ids)){const r=(null===(t=null==e?void 0:e.records)||void 0===t?void 0:t.map((e=>e.getId())))||(null==e?void 0:e.ids);n[S.h5.Id]=r.sort(((e,t)=>e.localeCompare(t,"en",{numeric:!0,sensitivity:"base"}))).join("+")}return n}(t),o=function(e,t,n){const r="~",o=":",i=n.map((e=>`${e.type}${o}${e.dsIds.join(r)}${o}${e.value}`)),s=(e,t,n,i)=>n.includes(e)?[t,n.filter((t=>t!==e)).join(r),i].join(o):[t,n.join(r),i].join(o),a=(e,t,n,i)=>n.includes(e)?[t,n.join(r),i].join(o):[t,n.concat(e).join(r),i].join(o),l=[];return n.forEach(((n,r)=>{const{type:o,dsIds:u,value:c}=n,d=t[o],p=d&&d===c;!d||d!==c||l.includes(o)?i[r]=s(e,o,u,c):p&&(i[r]=a(e,o,u,c),l.push(o)),0===(0,I.splitDataSToParts)(i[r]).length&&(i[r]="")})),Object.keys(t).forEach((n=>{const r=t[n];r&&!l.includes(n)&&i.push([n,e,r].join(o))})),i.filter((e=>!!e))}(e,r,(0,I.splitDataSToParts)(null===(n=(0,y.Vp)().getState().urlHashObject)||void 0===n?void 0:n.data_s));let s=i.from({data_s:o.length>0?encodeURIComponent(o.join(",")):null});(0,I.isZoomToSelection)()&&(s=s.merge(i.from({zoom_to_selection:!0}))),j(s),(0,y.Vp)().getState().queryObject.data_id&&o.length>0&&N({data_id:null},!0)}function G(e,t){var n;const r=`${e}:${t}`,o=function(e,t,n){const r=[];let o=!1;t.forEach((t=>{t.split(":")[0]===e?n&&(r.push(n),o=!0):r.push(t)})),!o&&n&&r.push(n);return r}(e,(null===(n=(0,y.Vp)().getState().queryObject.data_version)||void 0===n?void 0:n.split(","))||[],r);N({data_version:o.length>0?o.join(","):null},!0)}},4089:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)>=0},4107:(e,t,n)=>{"use strict";async function r(e){var t;return e.username?encodeURIComponent(e.username):(null===(t=e.authentication)||void 0===t?void 0:t.username)?encodeURIComponent(e.authentication.username):e.authentication?e.authentication.getUsername().then(encodeURIComponent):void 0}n.d(t,{O:()=>r})},4128:(e,t,n)=>{var r=n(1800),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},4146:(e,t,n)=>{"use strict";var r=n(4363),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?s:a[e.$$typeof]||o}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var o=f(n);o&&o!==h&&e(t,o,r)}var s=c(n);d&&(s=s.concat(d(n)));for(var a=l(t),g=l(n),m=0;m<s.length;++m){var v=s[m];if(!(i[v]||r&&r[v]||g&&g[v]||a&&a[v])){var y=p(n,v);try{u(t,v,y)}catch(e){}}}}return t}},4169:(e,t,n)=>{"use strict";n.d(t,{Q:()=>o});var r=n(3537);function o(e,t){const n=(0,r.a)(e,t?.in),o=n.getFullYear();return n.setFullYear(o+1,0,0),n.setHours(23,59,59,999),n}},4171:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(8562);const o=function(){try{var e=(0,r.A)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},4184:(e,t,n)=>{"use strict";n.d(t,{HM:()=>a,JF:()=>l,V1:()=>s,bN:()=>c,yU:()=>u});var r=n(1635),o=n(8972),i=n(7683);function s(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}function a(e){s(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var l=(0,r.Cl)((0,r.Cl)({},i.JF),{textComponent:o.Fragment});function u(e){return function(t){return e(o.Children.toArray(t))}}function c(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),o=n.length;if(r.length!==o)return!1;for(var i=0;i<o;i++){var s=n[i];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}},4203:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-2 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M15 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" clip-rule="evenodd"></path></svg>'},4213:function(e,t,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,t,n){var a=s.URL||s.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):o(l.href)?r(e,t,n):i(l,l.target="_blank")):(l.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,s),n);else if(o(e))r(e,n,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var i="application/octet-stream"===e.type,l=/constructor/i.test(s.HTMLElement)||s.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var d=s.URL||s.webkitURL,p=d.createObjectURL(e);o?o.location=p:location.href=p,o=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});s.saveAs=l.saveAs=l,e.exports=l})?r.apply(t,o):r)||(e.exports=i)},4262:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendQueryParam:()=>T,checkAbsoluteUrl:()=>v,createHref:()=>I,createLocation:()=>S,createShortUrl:()=>ee,fixDialogLabel:()=>B,fixPageLabel:()=>F,fixViewLabel:()=>$,getAbsoluteRootUrl:()=>q,getAppIdPageIdFromUrl:()=>L,getAppUrl:()=>K,getArcgisOnlineOrgId:()=>X,getArcgisOnlineUrl:()=>Q,getCanonicalPageUrl:()=>J,getDataSourceInfosFromUrlParams:()=>R,getDialogIdFromIdOrLabel:()=>j,getExperienceBuilderOnlineUrl:()=>Y,getFixedRootPath:()=>H,getFolder:()=>y,getHrefFromLinkTo:()=>z,getPageIdFromIdOrLabel:()=>k,getPageLinkInfo:()=>V,getPageLinkUrl:()=>W,getProtocol:()=>w,getSectionNavInfoFromQueryObject:()=>_,getUrlHost:()=>O,getViewIdFromIdOrLabel:()=>N,isAbsoluteUrl:()=>m,isZoomToSelection:()=>Z,normalize:()=>x,parseAppPath:()=>M,parseUrl:()=>g,removeProtocol:()=>A,removeSearchFromUrl:()=>C,setProtocol:()=>E,splitDataSToParts:()=>D,updateQueryStringParameter:()=>b});var r=n(6319),o=n(8798),i=n(3702),s=n(4502),a=n(1035),l=n(2159),u=n(9359),c=n(3096),d=n(5689),p=n(7390),f=n(7808),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function g(e){let t=e||"/",n="",r="";const o=t.indexOf("#");-1!==o&&(r=t.substr(o),t=t.substr(0,o));const i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function m(e){return/(^http:)|(^https:)|(^\/\/)|(^mailto:)|(^tel:)|(^data:)|(^sms:)|(^ftp:)/.test(e)}function v(e,t=["https","mailto","tel","sms","ftp","data"]){if(!e)return"valid";const n=null==t?void 0:t.find((t=>"sms"===t||"tel"===t||"mailto"===t||"data"===t?new RegExp(`^${t}:`,"i").test(e):new RegExp(`^(${t}:)?//`,"i").test(e)));if(!n)return"schemeError";if("sms"===n||"tel"===n){if(!/\d+/.test(e))return"invalidUrlError"}else if("mailto"===n){if(!e.includes("@"))return"invalidUrlError"}else if("data"===n){if(!e.includes(","))return"invalidUrlError"}else if("https"===n){if(!(e.includes(".")||e.toLowerCase().includes("localhost")))return"invalidUrlError"}return"valid"}function y(e){if(/\/$/.test(e))return e;if(!([".js",".css",".scss",".html"].filter((t=>new RegExp(`${t}$`).test(e))).length>0))return e;const t=e.split("/");return t.pop(),t.join("/")}function S(e,t){let n=t;const r=g(t);e.hash&&!r.hash&&(n+=e.hash);const o=g(n);return"/"===o.pathname||""===o.pathname?(o.pathname=e.pathname,o):"/"===o.pathname.charAt(0)?o:"."===o.pathname.charAt(0)?(o.pathname=e.pathname+"/"+o.pathname.substr(2),o):(o.pathname=e.pathname+"/"+o.pathname,o)}function I(e){const t=e.pathname,n=e.search,r=e.hash;let o=t||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}function b(e,t,n){if(!n&&""!==n)return e;const r=new URL(e),o=new URLSearchParams(r.search);return o.set(t,n),r.search=o.toString(),r.href}function w(e){let t;return 0===(e=e.toLowerCase()).indexOf("https://")?t="https:":0===e.indexOf("http://")&&(t="http:"),t}function E(e,t){return w(e)?e.replace(/^https?:\/\//,`${t}//`):`${t}//${e}`}function A(e){return e.replace(/^https?:\/\//,"")}function O(e){return 0===(e=(e=(e||"").trim()).replace(/^(http(s?):?)\/\//gi,"")).indexOf("//")&&(e=e.slice(2)),e.split("/")[0].toLowerCase()}function C(e){return(e=(e||"").trim()).split("?")[0]}function T(e,t,n){const r=(e=(e||"").trim()).indexOf("#");let o="";return r>-1&&(o=e.substring(r),e=e.substring(0,r)),e.includes("?")?e+=`&${t}=${n}${o}`:e+=`?${t}=${n}${o}`,e}function x(e){return e?new URL(e).href:""}function R(e,t){const n={},o=e.data_id&&P(e.data_id,(e=>e.split("+")),!1)||[],i=(null==t?void 0:t.data_s)&&function(e){const t=D(e),n={};return t.forEach((e=>{const{type:t,dsIds:o,value:i}=e;o.forEach((e=>{switch(n[e]||(n[e]={widgetId:"_selectOptionsInUrl"}),t){case r.h5.Id:n[e].ids=i.split("+");break;case r.h5.Where:case r.h5.Geometry:case r.h5.SpatialRel:let o;try{o=t===r.h5.Geometry?JSON.parse(i):i}catch(e){console.error("Failed to parse data_s.",e)}o&&(n[e].queryParams||(n[e].queryParams={}),n[e].queryParams[t]=o);break;default:const s=t;console.warn(`Unhandled case: ${s}`)}}))})),Object.keys(n).map((e=>({dsId:e,data:n[e]})))}(t.data_s)||[],s=e.data_filter&&P(e.data_filter,(e=>({where:e})),!0)||[],a=e.data_version&&P(e.data_version,(e=>e),!1)||[];return o.concat(i,s,a).forEach((e=>{n[e.dsId]={}})),o.forEach((e=>{n[e.dsId].selection=e.data})),i.forEach((e=>{n[e.dsId].selection=e.data})),s.forEach((e=>{n[e.dsId].filter=e.data})),a.forEach((e=>{n[e.dsId].gdbVersion=e.data})),n}function P(e,t,n=!1){const r=(0,f.parseDsQueryObject)(e,n),o=[],i=r.asMutable({deep:!0});return Object.keys(i).forEach((e=>{const n={dsId:e,data:t(i[e])};o.push(n)})),o}function D(e){if(!e)return[];const t=[];return e.split(new RegExp(`,(?=${Object.values(r.h5).join("|")})`)).forEach((e=>{var n;const{type:o,dsIds:i,value:s}=(null===(n=new RegExp(`(?<type>${Object.values(r.h5).join("|")}):(?<dsIds>[^:]*):(?<value>.*)`).exec(e))||void 0===n?void 0:n.groups)||{};if(!o||!i||!s)return;const a=i.split("~");t.push({type:o,dsIds:a,value:s})})),t}function _(e,t){if(!e.views)return{};const n=e.views.split(",").map((e=>N(e,t))),r={};return Object.keys(t.sections||{}).forEach((e=>{var o;const i=null===(o=t.sections[e].views)||void 0===o?void 0:o.find((e=>n.includes(e)));i&&(r[e]={currentViewId:i})})),r}function L(e){if(e||(e=window.location),window.jimuConfig.useStructuralUrl)return M(e.pathname,(0,a.Vp)().getState().appConfig);{const t=o.A.parse(e.search);return{appId:t.id,pageId:k(t.page,(0,a.Vp)().getState().appConfig)}}}function M(e,t){const n=e.substr(window.jimuConfig.rootPath.length),r={pageId:null,appId:null},o=n.split("/").filter((e=>e)).map((e=>decodeURIComponent(e)));return""===n||(1===o.length?n.includes(".")||"page"===o[0]||(r.appId=o[0]):2===o.length?/^page\/page\//.test(n)?r.pageId="page":/^page/.test(n)?r.pageId=o[1]:r.appId=o[0]:o.length>=3?(r.appId=o[0],r.pageId=o[2]):console.log("URL pattern is not correct.",e),r.pageId&&(r.pageId=k(r.pageId,t))),r}function k(e,t){if(!t||!e)return e;const n=t.pages;if(!n||n[e])return e;{const r=Object.keys(n).find((t=>F(n[t].label)===e));if(r)return r;{const n=U(e,"pages",t);return null!=n?n:e}}}function N(e,t){if(!t||!e)return e;const n=t.views;if(!n||n[e])return e;{const r=Object.keys(n).find((t=>$(n[t].label)===e));if(r)return r;{const n=U(e,"views",t);return null!=n?n:e}}}function j(e,t){if(!t||!e)return e;const n=t.dialogs;if(!n||n[e])return e;{const r=Object.keys(n).find((t=>B(n[t].label)===e));if(r)return r;{const n=U(e,"dialogs",t);return null!=n?n:e}}}function U(e,t,n){if(!n.historyLabels)return null;const r=n.historyLabels[t];return r?Object.keys(r).find((n=>!!r[n].find((n=>"views"===t?$(n)===e:"dialogs"===t?B(n)===e:F(n)===e)))):null}function F(e){return null==e?void 0:e.replace(/\s/g,"-").replace(/\./g,"_")}function B(e){return null==e?void 0:e.replace(/\s/g,"-")}function $(e){return null==e?void 0:e.replace(/\s/g,"-").replace(/,/g,"-")}function V(e){var t,n,r;let o=window.jimuConfig.isInBuilder?e:F(null!==(r=null===(n=null===(t=(0,a.Vp)().getState().appConfig)||void 0===t?void 0:t.pages[e])||void 0===n?void 0:n.label)&&void 0!==r?r:e);if(window.jimuConfig.useStructuralUrl){o=encodeURIComponent(o);const e=M(window.location.pathname,(0,a.Vp)().getState().appConfig);let t;return t=e.appId?`${window.jimuConfig.rootPath}${e.appId}/page/${o}`:`${window.jimuConfig.rootPath}page/${o}`,{path:t,qo:null}}return{path:window.jimuConfig.rootPath,qo:{page:o}}}function G(e,t,n){var r;const o=(0,a.Vp)().getState().appConfig;if((null===(r=o.dialogs[e])||void 0===r?void 0:r.mode)===u.oM.Fixed){const n=window.jimuConfig.isInBuilder?e:B(o.dialogs[e].label);t=t?t.set("dlg",n):{dlg:n}}return I(S(n,"?"+(0,f.parseQueryObjToStr)(t)))}function W(e,t,n=window.location,r){e===c.CURRENT_PAGE&&(e=(0,a.Vp)().getState().appRuntimeInfo.currentPageId);const o=V(e);let i,l;if(i=t&&o.qo?Object.assign({},t,o.qo):t||o.qo,i&&!(0,s.isDeepEqual)(i,{})){const e=(0,f.parseQueryObjToStr)(i);l=`${o.path}?${e}`}else l=o.path;return n&&n.hash&&(l=`${l}${n.hash}`),r&&(l=`${l}#${r}`),l}function H(){let e;return e=window.jimuConfig.isOutOfExb||window.jimuConfig.rootPath===window.jimuConfig.mountPath?window.jimuConfig.rootPath:window.jimuConfig.rootPath+"../",window.jimuConfig.buildNumber?e+"cdn/"+window.jimuConfig.buildNumber+"/":e}function q(){return`${window.location.protocol}//${window.location.host}${H()}`}function z(e,t,n=window.location,r=!1){var o;if("string"==typeof e)return m(e)?e:/^www./.test(e)?`//${e}`:I(S(n,e));if(!e.linkType)return I(e);{const s=e.linkType,u=e;let d,h=t;const g=(0,a.Vp)().getState().appConfig;switch(s){case i.J.Page:case i.J.Screen:t=r?t:null==t?void 0:t.without("dlg");const e=s===i.J.Screen&&u.value;return d=s===i.J.Page?u.value:c.CURRENT_PAGE,W(d,t,n,e);case i.J.Block:return function(e,t,n){return t=t?t.set("block_id",e):{block_id:e},I(S(n,"?"+(0,f.parseQueryObjToStr)(t)))}(u.value,h,n);case i.J.Dialog:return G(u.value,h,n);case i.J.View:const v=u.value.split(",")[0],y=u.value.split(",").slice(1).filter((e=>{var t;return null===(t=g.views)||void 0===t?void 0:t[e]}));if(null==h?void 0:h.views){let e=h.views.split(",").map((e=>N(e,g)));y.forEach((t=>{e=e.filter((e=>!(0,l.isTwoViewsInSaveSection)(g,t,e))),e.push(t)}));const t=window.jimuConfig.isInBuilder?e:e.map((e=>{var t,n;return $((null===(n=null===(t=g.views)||void 0===t?void 0:t[e])||void 0===n?void 0:n.label)||e)}));h=h.set("views",t.sort().join(","))}else{const e=window.jimuConfig.isInBuilder?y:y.map((e=>{var t,n;return $((null===(n=null===(t=g.views)||void 0===t?void 0:t[e])||void 0===n?void 0:n.label)||e)}));e.length>0&&(h=h?h.set("views",e.sort().join(",")):p({views:e.sort().join(",")}))}return(null===(o=(0,a.Vp)().getState().appConfig.dialogs)||void 0===o?void 0:o[v])?G(v,h,n):W(v,h);case i.J.WebAddress:const b=u.value;if(m(b))return b;if(/^www./.test(b))return`//${b}`;case i.J.CookieBanner:return function(e,t,n){var r;const o=(0,a.Vp)().getState().appConfig;return(null===(r=null==o?void 0:o.cookieBanner)||void 0===r?void 0:r.enable)&&(t=t?t.set("cookie_banner","true"):{cookie_banner:"true"}),I(S(n,"?"+(0,f.parseQueryObjToStr)(t)))}(u.value,h,n);case i.J.None:case i.J.PageTop:return null;case i.J.PrintPreview:return h=h?h.set("print_preview",!0):{print_preview:String(!0)},I(S(n,"?"+(0,f.parseQueryObjToStr)(h)));default:console.error("Unknown type:",s)}}}function K(e){const{id:t,name:n,type:r="app",target:o="relative_path",isDraft:i,isFullUrl:s}=e;if(n){if("template"!==r)return console.error('The name is only valid when the type is "template".'),null;let e;return e=window.jimuConfig.buildNumber?window.jimuConfig.mountPath+"cdn/"+window.jimuConfig.buildNumber+"/":window.jimuConfig.mountPath,`${s?window.location.origin:""}${window.jimuConfig.mountPath}template/?config=${e}templates/app/${n}/config.json`}const l=(0,a.Vp)().getState().portalUrl,u=(0,d.isAGOLDomain)(l)?"online":"enterprise",c="template"===r?"template":"experience",p=()=>`${Y()}/${c}/${t}`,f=()=>`${l}/apps/experiencebuilder/${c}?id=${t}`,h=()=>window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${c}/${t}`:`${window.jimuConfig.mountPath}${c}?id=${t}`;let g;return g=window.jimuConfig.isDevEdition?"online"===o?p():"current_portal"===o?"online"===u?p():f():s?`${window.location.origin}${h()}`:h():"enterprise"===u?"online"===o?p():s?f():h():s?p():h(),i&&(g=window.jimuConfig.useStructuralUrl?`${g}?draft=true`:`${g}&draft=true`),g}function J(e,t){var n,r,o;const i=null===(n=(0,a.Vp)().getState().appConfig)||void 0===n?void 0:n.pages;if(t===Object.keys(i).find((e=>i[e].isDefault)))return e;{let n=F(null!==(o=null===(r=i[t])||void 0===r?void 0:r.label)&&void 0!==o?o:t);return window.jimuConfig.useStructuralUrl?(n=encodeURIComponent(n),`${e}/page/${n}`):T(e,"page",n)}}function Y(){let e;const t=(0,a.Vp)().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://experiencedev.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://experienceqa.arcgis.com":"https://experience.arcgis.com",e}function Q(){let e;const t=(0,a.Vp)().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"https://devext.arcgis.com":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"https://qaext.arcgis.com":"https://www.arcgis.com",e}function X(){let e;const t=(0,a.Vp)().getState().portalUrl;return e=(null==t?void 0:t.endsWith("mapsdevext.arcgis.com"))||(null==t?void 0:t.endsWith("mapsdevext.arcgis.com/"))?"VxZfyyZuOsDEPxG8":(null==t?void 0:t.endsWith("mapsqa.arcgis.com"))||(null==t?void 0:t.endsWith("mapsqa.arcgis.com/"))?"iWreOEDHiYP7Bqst":"oC086ufSSQ6Avnw2",e}function Z(){var e,t,n,r,o;const i=null===(e=(0,a.Vp)().getState().urlHashObject)||void 0===e?void 0:e.zoom_to_selection,s=null===(o=null===(r=null===(n=null===(t=(0,a.Vp)().getState().appConfig)||void 0===t?void 0:t.urlParams)||void 0===n?void 0:n.general)||void 0===r?void 0:r.dataSelection)||void 0===o?void 0:o.zoomToSelection;return"true"===i||s}function ee(e){return h(this,void 0,void 0,(function*(){var t;let n=e;n=b("https://arcg.is/prod/shorten","longUrl",n),n=b(n,"f","json");const r=yield fetch(n),o=yield r.json();return(null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.url)||""}))}},4277:(e,t,n)=>{const r=n(909);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},4293:(e,t,n)=>{"use strict";n.d(t,{ZE:()=>o,Im:()=>l,tv:()=>c,Tu:()=>v,eW:()=>a,oF:()=>u,N1:()=>m,N6:()=>f,jA:()=>h,Jp:()=>p,xm:()=>g,Qh:()=>d,qg:()=>ie});var r,o,i,s=n(1635);function a(e){return e.type===o.literal}function l(e){return e.type===o.argument}function u(e){return e.type===o.number}function c(e){return e.type===o.date}function d(e){return e.type===o.time}function p(e){return e.type===o.select}function f(e){return e.type===o.plural}function h(e){return e.type===o.pound}function g(e){return e.type===o.tag}function m(e){return!(!e||"object"!=typeof e||e.type!==i.number)}function v(e){return!(!e||"object"!=typeof e||e.type!==i.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(r||(r={})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(o||(o={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(i||(i={}));var y=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,S=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function I(e){var t={};return e.replace(S,(function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"long":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var b=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;var w=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,E=/^(@+)?(\+|#+)?[rs]?$/g,A=/(\*)(0+)|(#+)(0+)|(0+)/g,O=/^(0+)$/;function C(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(E,(function(e,n,r){return"string"!=typeof r?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===r?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof r?r.length:0)),""})),t}function T(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function x(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!O.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function R(e){var t=T(e);return t||{}}function P(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n];switch(o.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=o.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=o.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=(0,s.Cl)((0,s.Cl)((0,s.Cl)({},t),{notation:"scientific"}),o.options.reduce((function(e,t){return(0,s.Cl)((0,s.Cl)({},e),R(t))}),{}));continue;case"engineering":t=(0,s.Cl)((0,s.Cl)((0,s.Cl)({},t),{notation:"engineering"}),o.options.reduce((function(e,t){return(0,s.Cl)((0,s.Cl)({},e),R(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(o.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(A,(function(e,n,r,o,i,s){if(n)t.minimumIntegerDigits=r.length;else{if(o&&i)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(O.test(o.stem))t.minimumIntegerDigits=o.stem.length;else if(w.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(w,(function(e,n,r,o,i,s){return"*"===r?t.minimumFractionDigits=n.length:o&&"#"===o[0]?t.maximumFractionDigits=o.length:i&&s?(t.minimumFractionDigits=i.length,t.maximumFractionDigits=i.length+s.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""}));var i=o.options[0];"w"===i?t=(0,s.Cl)((0,s.Cl)({},t),{trailingZeroDisplay:"stripIfInteger"}):i&&(t=(0,s.Cl)((0,s.Cl)({},t),C(i)))}else if(E.test(o.stem))t=(0,s.Cl)((0,s.Cl)({},t),C(o.stem));else{var a=T(o.stem);a&&(t=(0,s.Cl)((0,s.Cl)({},t),a));var l=x(o.stem);l&&(t=(0,s.Cl)((0,s.Cl)({},t),l))}}return t}var D,_={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function L(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,r=e.language;return"root"!==r&&(n=e.maximize().region),(_[n||""]||_[r||""]||_["".concat(r,"-001")]||_["001"])[0]}var M=new RegExp("^".concat(y.source,"*")),k=new RegExp("".concat(y.source,"*$"));function N(e,t){return{start:e,end:t}}var j=!!String.prototype.startsWith&&"_a".startsWith("a",1),U=!!String.fromCodePoint,F=!!Object.fromEntries,B=!!String.prototype.codePointAt,$=!!String.prototype.trimStart,V=!!String.prototype.trimEnd,G=!!Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},W=!0;try{W="a"===(null===(D=X("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===D?void 0:D[0])}catch(e){W=!1}var H,q=j?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},z=U?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,r="",o=e.length,i=0;o>i;){if((n=e[i++])>1114111)throw RangeError(n+" is not a valid code point");r+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return r},K=F?Object.fromEntries:function(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n],i=o[0],s=o[1];t[i]=s}return t},J=B?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var r,o=e.charCodeAt(t);return o<55296||o>56319||t+1===n||(r=e.charCodeAt(t+1))<56320||r>57343?o:r-56320+(o-55296<<10)+65536}},Y=$?function(e){return e.trimStart()}:function(e){return e.replace(M,"")},Q=V?function(e){return e.trimEnd()}:function(e){return e.replace(k,"")};function X(e,t){return new RegExp(e,t)}if(W){var Z=X("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");H=function(e,t){var n;return Z.lastIndex=t,null!==(n=Z.exec(e)[1])&&void 0!==n?n:""}}else H=function(e,t){for(var n=[];;){var r=J(e,t);if(void 0===r||ne(r)||re(r))break;n.push(r),t+=r>=65536?2:1}return z.apply(void 0,n)};var ee=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var i=[];!this.isEOF();){var s=this.char();if(123===s){if((a=this.parseArgument(e,n)).err)return a;i.push(a.val)}else{if(125===s&&e>0)break;if(35!==s||"plural"!==t&&"selectordinal"!==t){if(60===s&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(r.UNMATCHED_CLOSING_TAG,N(this.clonePosition(),this.clonePosition()))}if(60===s&&!this.ignoreTag&&te(this.peek()||0)){if((a=this.parseTag(e,t)).err)return a;i.push(a.val)}else{var a;if((a=this.parseLiteral(e,t)).err)return a;i.push(a.val)}}else{var l=this.clonePosition();this.bump(),i.push({type:o.pound,location:N(l,this.clonePosition())})}}}return{val:i,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:o.literal,value:"<".concat(i,"/>"),location:N(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var s=this.parseMessage(e+1,t,!0);if(s.err)return s;var a=s.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!te(this.char()))return this.error(r.INVALID_TAG,N(l,this.clonePosition()));var u=this.clonePosition();return i!==this.parseTagName()?this.error(r.UNMATCHED_CLOSING_TAG,N(u,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:o.tag,value:i,children:a,location:N(n,this.clonePosition())},err:null}:this.error(r.INVALID_TAG,N(l,this.clonePosition())))}return this.error(r.UNCLOSED_TAG,N(n,this.clonePosition()))}return this.error(r.INVALID_TAG,N(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e,t=this.offset();for(this.bump();!this.isEOF()&&(45===(e=this.char())||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039);)this.bump();return this.message.slice(t,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),r="";;){var i=this.tryParseQuote(t);if(i)r+=i;else{var s=this.tryParseUnquoted(e,t);if(s)r+=s;else{var a=this.tryParseLeftAngleBracket();if(!a)break;r+=a}}}var l=N(n,this.clonePosition());return{val:{type:o.literal,value:r,location:l},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(te(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return z.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),z(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,N(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(r.EMPTY_ARGUMENT,N(n,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(r.MALFORMED_ARGUMENT,N(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,N(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:o.argument,value:i,location:N(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,N(n,this.clonePosition())):this.parseArgumentOptions(e,t,i,n);default:return this.error(r.MALFORMED_ARGUMENT,N(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=H(this.message,t),r=t+n.length;return this.bumpTo(r),{value:n,location:N(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,a){var l,u=this.clonePosition(),c=this.parseIdentifierIfPossible().value,d=this.clonePosition();switch(c){case"":return this.error(r.EXPECT_ARGUMENT_TYPE,N(u,d));case"number":case"date":case"time":this.bumpSpace();var p=null;if(this.bumpIf(",")){this.bumpSpace();var f=this.clonePosition();if((w=this.parseSimpleArgStyleIfPossible()).err)return w;if(0===(v=Q(w.val)).length)return this.error(r.EXPECT_ARGUMENT_STYLE,N(this.clonePosition(),this.clonePosition()));p={style:v,styleLocation:N(f,this.clonePosition())}}if((E=this.tryParseArgumentClose(a)).err)return E;var h=N(a,this.clonePosition());if(p&&q(null==p?void 0:p.style,"::",0)){var g=Y(p.style.slice(2));if("number"===c)return(w=this.parseNumberSkeletonFromString(g,p.styleLocation)).err?w:{val:{type:o.number,value:n,location:h,style:w.val},err:null};if(0===g.length)return this.error(r.EXPECT_DATE_TIME_SKELETON,h);var m=g;this.locale&&(m=function(e,t){for(var n="",r=0;r<e.length;r++){var o=e.charAt(r);if("j"===o){for(var i=0;r+1<e.length&&e.charAt(r+1)===o;)i++,r++;var s=1+(1&i),a=i<2?1:3+(i>>1),l=L(t);for("H"!=l&&"k"!=l||(a=0);a-- >0;)n+="a";for(;s-- >0;)n=l+n}else n+="J"===o?"H":o}return n}(g,this.locale));var v={type:i.dateTime,pattern:m,location:p.styleLocation,parsedOptions:this.shouldParseSkeletons?I(m):{}};return{val:{type:"date"===c?o.date:o.time,value:n,location:h,style:v},err:null}}return{val:{type:"number"===c?o.number:"date"===c?o.date:o.time,value:n,location:h,style:null!==(l=null==p?void 0:p.style)&&void 0!==l?l:null},err:null};case"plural":case"selectordinal":case"select":var y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(r.EXPECT_SELECT_ARGUMENT_OPTIONS,N(y,(0,s.Cl)({},y)));this.bumpSpace();var S=this.parseIdentifierIfPossible(),b=0;if("select"!==c&&"offset"===S.value){if(!this.bumpIf(":"))return this.error(r.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,N(this.clonePosition(),this.clonePosition()));var w;if(this.bumpSpace(),(w=this.tryParseDecimalInteger(r.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,r.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return w;this.bumpSpace(),S=this.parseIdentifierIfPossible(),b=w.val}var E,A=this.tryParsePluralOrSelectOptions(e,c,t,S);if(A.err)return A;if((E=this.tryParseArgumentClose(a)).err)return E;var O=N(a,this.clonePosition());return"select"===c?{val:{type:o.select,value:n,options:K(A.val),location:O},err:null}:{val:{type:o.plural,value:n,options:K(A.val),offset:b,pluralType:"plural"===c?"cardinal":"ordinal",location:O},err:null};default:return this.error(r.INVALID_ARGUMENT_TYPE,N(u,d))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(r.EXPECT_ARGUMENT_CLOSING_BRACE,N(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(r.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,N(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,r=e.split(b).filter((function(e){return e.length>0}));n<r.length;n++){var o=r[n].split("/");if(0===o.length)throw new Error("Invalid number skeleton");for(var i=o[0],s=o.slice(1),a=0,l=s;a<l.length;a++)if(0===l[a].length)throw new Error("Invalid number skeleton");t.push({stem:i,options:s})}return t}(e)}catch(e){return this.error(r.INVALID_NUMBER_SKELETON,t)}return{val:{type:i.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?P(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,o){for(var i,s=!1,a=[],l=new Set,u=o.value,c=o.location;;){if(0===u.length){var d=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var p=this.tryParseDecimalInteger(r.EXPECT_PLURAL_ARGUMENT_SELECTOR,r.INVALID_PLURAL_ARGUMENT_SELECTOR);if(p.err)return p;c=N(d,this.clonePosition()),u=this.message.slice(d.offset,this.offset())}if(l.has(u))return this.error("select"===t?r.DUPLICATE_SELECT_ARGUMENT_SELECTOR:r.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,c);"other"===u&&(s=!0),this.bumpSpace();var f=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?r.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:r.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,N(this.clonePosition(),this.clonePosition()));var h=this.parseMessage(e+1,t,n);if(h.err)return h;var g=this.tryParseArgumentClose(f);if(g.err)return g;a.push([u,{value:h.val,location:N(f,this.clonePosition())}]),l.add(u),this.bumpSpace(),u=(i=this.parseIdentifierIfPossible()).value,c=i.location}return 0===a.length?this.error("select"===t?r.EXPECT_SELECT_ARGUMENT_SELECTOR:r.EXPECT_PLURAL_ARGUMENT_SELECTOR,N(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!s?this.error(r.MISSING_OTHER_CLAUSE,N(this.clonePosition(),this.clonePosition())):{val:a,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,r=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var o=!1,i=0;!this.isEOF();){var s=this.char();if(!(s>=48&&s<=57))break;o=!0,i=10*i+(s-48),this.bump()}var a=N(r,this.clonePosition());return o?G(i*=n)?{val:i,err:null}:this.error(t,a):this.error(e,a)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=J(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(q(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&ne(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function te(e){return e>=97&&e<=122||e>=65&&e<=90}function ne(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function re(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function oe(e){e.forEach((function(e){if(delete e.location,p(e)||f(e))for(var t in e.options)delete e.options[t].location,oe(e.options[t].value);else u(e)&&m(e.style)||(c(e)||d(e))&&v(e.style)?delete e.style.location:g(e)&&oe(e.children)}))}function ie(e,t){void 0===t&&(t={}),t=(0,s.Cl)({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new ee(e,t).parse();if(n.err){var o=SyntaxError(r[n.err.kind]);throw o.location=n.err.location,o.originalMessage=n.err.message,o}return(null==t?void 0:t.captureLocation)||oe(n.val),n.val}},4308:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M10.95 1 6 3.95l4.95 2.95 4.95-2.95zm0 1.164L7.953 3.95l2.997 1.785 2.996-1.785z" clip-rule="evenodd"></path><path fill="#000" d="M0 4.5h5v-1H0zM0 12.5h5v-1H0z"></path><path fill="#000" fill-rule="evenodd" d="M6 11.95 10.95 9l4.95 2.95-4.95 2.95zm1.953 0 2.997-1.786 2.996 1.786-2.996 1.785z" clip-rule="evenodd"></path></svg>'},4352:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var r=n(2516),o=n(3537);function i(e,t){const n=(0,r.q)(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=(0,o.a)(e,t?.in),a=s.getDay(),l=6+(a<i?-7:0)-(a-i);return s.setDate(s.getDate()+l),s.setHours(23,59,59,999),s}},4363:(e,t,n)=>{"use strict";e.exports=n(2799)},4394:(e,t,n)=>{var r=n(2552),o=n(346);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},4419:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r={loading:"Loading",apply:"Apply",ok:"OK",publish:"Publish",cancel:"Cancel",yes:"Yes",no:"No",open:"Open",close:"Close",new:"New",classic:"Classic",widgetLoadError:"Fail to load",notPublishError:"This item is not published. Please open this item in Experience Builder, then click <b>&nbsp;Publish&nbsp;</b> to publish it.",versionUpdateMsg:"New updates are available. Click Reload to get the latest updates.",userLocaleChangeMsg:"The user locale has changed. Click Reload to refresh the page.",doUpdate:"Reload",search:"Search",delete:"Delete",about:"About",neverUnsupportedBrowserTitle:"Unsupported browser",neverUnsupportedBrowserOnlineContent:"You are using a browser that is not supported by [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>. Provide your feedback through <feedback-link>GeoNet, the Esri Community</feedback-link>.",neverUnsupportedBrowserEnterpriseContent:"You are using a browser that is not supported [ArcGIS Experience Builder]. Please use the latest version of <chrome-link>Google Chrome</chrome-link>, <firefox-link>Mozilla Firefox</firefox-link>, <safari-link>Apple Safari</safari-link>, or <edge-link>Microsoft Edge</edge-link>.",message_StringSelectionChange:"String selection changes",message_ExtentChange:"Extent changes",message_DataSourceFilterChange:"Data filtering changes",message_DataRecordsSelectionChange:"Record selection changes",message_DataRecordSetChange:"Records created",message_DataSourcesChange:"Data added",message_SelectDataRecord:"Select data record",message_LocationChange:"Location change",message_ButtonClick:"Button click",message_ViewChange:"Views change",actions:"Actions",noActions:"No available actions",selectedData:"Selected ({count})",allData:"All data ({count})",allDataWithoutCount:"All data",loadedData:"Loaded ({count})",currentData:"Current",export:"Export",exportAll:"Export all",exportSelected:"Export selected",largeWarningTitle:"Are you sure you want to export all data records? ",largeWarningContent:"Exporting this large dataset will take time.",tooLargeWarningTitle:"You can only export the first {max} records.",tooLargeWarningContent:"Dataset export is limited to the first {max} records.",dataAction_ExportJson:"Export to JSON",dataAction_ExportCSV:"Export to CSV",dataAction_ExportGeoJson:"Export to GeoJSON",dataAction_ExportItem:"Export to Item",dataAction_ExportShp:"Export to Shapefile",dataAction_ExportGDB:"Export to FGDB",dataAction_ExportKML:"Export to KML",dataAction_SetFilter:"Set filter",dataAction_DataStatistics:"Statistics",dataAction_RelatedData:"Related data",selectionMode:"Selection mode",selectionModeSingle:"Single",selectionModeMultiple:"Multiple",showMore:"Show More",pleaseSelectAField:"Please select a field",countLabel:"Number of values",countEmptyLabel:"Number of empty values",sumLabel:"Sum of values",minLabel:"Minimum",maxLabel:"Maximum",avgLabel:"Average",stddevLabel:"Standard deviation",error:"Error",messageAction_SelectDataRecord:"Select data records",messageAction_FilterDataRecord:"Filter data records",messageAction_TriggerData:"Trigger data",messageAction_ChangeView:"Open view",action_addedData:"Added: {label}",icon:"Icon",verySmall:"Very small",small:"Small",low:"Low",high:"High",large:"Large",varyLarge:"Very large",short:"Short",medium:"Medium",long:"Long",full:"Full",experience:"Experience",template:"Template",widget:"Widget",section:"Section",view:"View",page:"Page",dialog:"Window",makeHome:"Make homepage",makeSplash:"Set as splash",pageWindowSelect:"Switch page and window",layout:"Layout",theme:"Theme",dataSource:"Data source",block:"Block",screenGroup:"Screen group",screen:"Screen",grid:"Grid",locationReferencing:"Location Referencing",dialogConfirmationDefaultText:"I agree to the above terms and conditions",dialogPreventDisplayAgainDefaultText:"Don't show this again",publicUserError:"Public Account user cannot access this application.",noEditPrivilegesError:"Your account does not have permission to create or modify data.",noEditContentPrivilegesError:"Your account does not have permission to create or modify content.",essentialAppsLicenseErrorForApp:"Your account is not licensed to use an app that is not public. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",essentialAppsLicenseErrorForBuilder:"Your account is not licensed for Experience Builder. Please ask your organization administrator to assign you a user type that includes Essential Apps or an add-on Essential Apps license.",roleError:"Experience Builder Developer Edition requires a level 2 ArcGIS account to work. Please login with an account that has level 2 privileges.",roleError2:"Experience Builder Developer Edition requires an ArcGIS organization account with a user type that includes privileges to create content.",invalidResourceExperience:"This is not a supported item.",invalidResourceItem:"Item does not exist or is inaccessible.",invalidResourcePermission:"Sorry, you do not have permissions to access this application.",invalidResourcePermissionForReadOnly:"Sorry, you only have view permission to this application.",dataSourceCreateError:"Data is inaccessible.",blockedByAdminErrorForApp:"Your organization has blocked access to this application. Please contact your administrator for details.",blockedByAdminErrorForBuilder:"Your organization has blocked access to Experience Builder. Please contact your administrator for details.",readOnlyModeError:"ArcGIS Online is experiencing operational issues and has temporarily switched to read-only mode. Some capabilities may be limited. For the latest updates on when this will be resolved, visit the {link}.",readOnlyModeErrorLink:"ArcGIS Online Health Dashboard",goToAnotherExperienceBtn:"Go to another experience",switchAccountBtn:"Switch account",switch:"Switch",signInErrorDefault:"Sorry, you do not have permission to access this resource.",signInErrorsDefault:"Sorry, you do not have permission to access ({names}).",signInErrorEnterCredential:"Sorry, you do not have permission to access this resource. Click to enter credential.",signInErrorCannotEnterCredential:"Sorry, your current account does not have permission to access this resource.",signInErrorTryAgain:"Sorry, you do not have permission to access this resource. Please try again.",signInErrorInvalidToken:"Invalid credential. Please login again.",signInBannerListWarning:"Sorry, you don\u2019t have access to the resources from the following servers or organizations. Click Sign in to provide credentials. Click Ignore to avoid loading the resource until you refresh the app.",signInBannerIgnore:"Ignore",signInBannerIgnoreAll:"Ignore all",restoreState:"Restore experience state",restoreStateTips:"Restore the state of page, view, window, map viewpoint, and layer visibility where you left off.",restoreStateAccept:"Accept",upgradedFrom:"Upgraded from previous config",versionIsHigh:"Oops.. It seems this experience is built with a higher version of ArcGIS Experience Builder. Please upgrade to the latest version to view.",badVersion:"Oops.. It seems the version of this experience is incorrect. Please check its configuration file.",setClientIdMessage1:"This service is hosted on an ArcGIS Enterprise that the Experience Builder not registered with. Please provide Client ID to {register} first.",registerText:"register",arcgisEnterpriseText:"ArcGIS Enterprise",setClientIdMessage2:"Provide the Client ID for Experience Builder registered in the ArcGIS Enterprise you specify above",experienceVersionRemind:"This experience is in higher version. Incompatible contents may not work.",templateVersionRemind:"This template is in higher version. Incompatible contents may not work.",publishedExperienceVersionRemind:"The published version of this experience is in higher version. Incompatible contents may not work.",publishedTemplateVersionRemind:"The published version of this template is in higher version. Incompatible contents may not work.",draftTemplateVersionRemind:"The draft version of this template is in higher version. Incompatible contents may not work.",draftExperienceVersionRemind:"The draft version of this experience is in higher version. Incompatible contents may not work.",featureLayer:"Feature Layer",featureSet:"Feature Set",featureService:"Feature Service",mapService:"Map Service",groupLayer:"Group Layer",map:"Map",simpleLocal:"Simple Local",webMap:"Web Map",webScene:"Web Scene",csv:"CSV",sceneService:"Scene Service",sceneLayer:"Scene Layer",imageryLayer:"Imagery Layer",imageryTileLayer:"Tiled Imagery Layer",elevationLayer:"Elevation layer",rasterLayer:"Raster Layer",orientedImageryLayer:"Oriented Imagery Layer",SubtypeGroupLayer:"Subtype Group Layer",SubtypeSublayer:"Subtype Sublayer",vectorTileService:"Vector Tile Service",wfsLayer:"WFS Layer",wmsLayer:"WMS Layer",wmtsLayer:"WMTS Layer",kml:"KML",geojson:"GeoJSON",outputView:"{dataSourceLabel} output view",buildingScene:"Building Scene Layer",buildingGroup:"Building Group Sublayer",buildingComponent:"Building Component Sublayer",json:"JSON",exportItem:"Item"}},4430:(e,t,n)=>{"use strict";function r(){return Promise.resolve({fetch:globalThis.fetch,Headers:globalThis.Headers,Response:globalThis.Response,Request:globalThis.Request})}n.d(t,{J:()=>r})},4493:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).patch},4501:(e,t,n)=>{"use strict";n.d(t,{a:()=>o});var r=n(3537);function o(e,t){const n=(0,r.a)(e,t?.in),o=n.getMonth(),i=o-o%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}},4502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AppHigherVersionStateType:()=>v,applyMixins:()=>R,calculateDigits:()=>F,changeAppConfig:()=>ce,checkAppHigherVersionState:()=>K,diffArrays:()=>ae,findViewportSize:()=>O,formatNumber:()=>ee,formatPercentageNumber:()=>te,formatPixelNumber:()=>ne,getBrowserSizeMode:()=>A,getButtonStyles:()=>h.hs,getGeometryService:()=>S,getGeometryType:()=>y,getIntlOption:()=>G,getJimuThemeModule:()=>re,getLocalStorageAppKey:()=>N,getNavButtonGroupStyles:()=>h.x_,getNavStyles:()=>h.A_,getOverlayUniqueId:()=>B,getPaginationStyles:()=>h.Hv,getPanelCallbackNamesFromPanelState:()=>b,getPaperStyles:()=>h.ZQ,getParentWindow:()=>le,getSizeModeWidth:()=>C,getSliderStyles:()=>h.G,getUID:()=>j,getUUID:()=>U,getValue:()=>r.A,getWidgetCallbackNamesFromWidgetState:()=>I,hyphenateStyleName:()=>L,isArrayContainSameItems:()=>P,isDeepEqual:()=>o.A,isExpressMode:()=>ue,isInIFrame:()=>E,isTouchDevice:()=>w,isWidgetSelected:()=>ie,loadstyle:()=>x,memoize:()=>W,readLocalStorage:()=>q,readLocalStorageKeys:()=>H,readSessionStorage:()=>Y,readSessionStorageKeys:()=>J,removeFromLocalStorage:()=>X,removeFromSessionStorage:()=>Z,replaceI18nPlaceholdersInObject:()=>$,replaceStringInObject:()=>oe,setLocalStorage:()=>z,setRef:()=>se,setSessionStorage:()=>Q,showApp:()=>V,styleObjectToString:()=>M,tryGet:()=>k,wait:()=>de});var r=n(3467),o=n(743),i=n(3702),s=n(3096),a=n(7390),l=n(1035),u=n(9875),c=n(6962),d=n(9589),p=n(4820),f=n(2089),h=n(9635),g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const m=n(147).exbVersion;var v;function y(e){return"x"in e&&"y"in e?"esriGeometryPoint":"points"in e?"esriGeometryMultipoint":"paths"in e||"curvePaths"in e?"esriGeometryPolyline":"rings"in e||"curveRings"in e?"esriGeometryPolygon":"esriGeometryEnvelope"}function S(){var e,t,n,r,o,i,s,a,u,c,d;let p,f,h;window.jimuConfig.isBuilder?(p=null===(t=null===(e=(0,l.Vp)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig,h=null===(i=null===(o=null===(r=null===(n=(0,l.Vp)().getState())||void 0===n?void 0:n.appStateInBuilder)||void 0===r?void 0:r.portalSelf)||void 0===o?void 0:o.helperServices)||void 0===i?void 0:i.geometry):(p=null===(s=(0,l.Vp)().getState())||void 0===s?void 0:s.appConfig,h=null===(c=null===(u=null===(a=(0,l.Vp)().getState())||void 0===a?void 0:a.portalSelf)||void 0===u?void 0:u.helperServices)||void 0===c?void 0:c.geometry),(null==p?void 0:p.utilities)&&Object.keys(p.utilities).some((e=>{const t=p.utilities[e];return!!/\/rest\/services\/.*\/GeometryServer\/?/.test(t.url)&&(f=t.url,!0)}));const g="prod"===window.jimuConfig.hostEnv?"":window.jimuConfig.hostEnv;return null!==(d=null!=f?f:null==h?void 0:h.url)&&void 0!==d?d:`https://utility${g}.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer`}function I(e,t){return T(e,t)}function b(e,t){return T(e,t)}function w(){var e;return"undefined"!=typeof window&&Boolean("ontouchstart"in window||(null===(e=window.navigator)||void 0===e?void 0:e.maxTouchPoints)>0||window.DocumentTouch&&document instanceof window.DocumentTouch)}function E(){return window.self!==window.top&&!window.jimuConfig.isInBuilder}function A(e){return e.width<=s.BREAK_POINTS[0]?i.rH.Small:e.width<=s.BREAK_POINTS[1]?i.rH.Medium:i.rH.Large}function O(e,t){let n=(0,r.A)(e,`forBuilderAttributes.viewPortSize.${t}`);return n||(n=(0,r.A)(s.SCREEN_RESOLUTIONS[t],"[1]")),n||{width:0,height:0}}function C(e){return e===i.rH.Small?s.BREAK_POINTS[0]:e===i.rH.Medium?s.BREAK_POINTS[1]:1e5}function T(e,t){switch(e){case"opened":switch(t){case"opened":return null;case"closed":return"onOpen";case"active":return"onDeActive"}case"closed":switch(t){case"opened":return"onClose";case"closed":return null;case"active":return["onDeActive","onClose"]}case"active":switch(t){case"opened":return"onDeActive";case"closed":return["onOpen","onActive"];case"active":return null}}}function x(e,t){return g(this,void 0,void 0,(function*(){return yield new Promise((n=>{let r;r=t?document.getElementById(t):document.getElementsByTagName("head")[0];const o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e),o.onload=()=>{n(null)},r.appendChild(o)}))}))}function R(e,t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((n=>{e.prototype[n]=t.prototype[n]}))}))}function P(e,t){return e.length===t.length&&(e=e.sort(((e,t)=>e>t?-1:1)),t=t.sort(((e,t)=>e>t?-1:1)),(0,o.A)(e,t))}!function(e){e.None="None Version Heigher",e.Draft="Draft Version Heigher",e.Published="Published Version Heigher",e.Both="Both Version Heigher"}(v||(v={}));const D=/([A-Z])/g,_=/^ms-/;function L(e){return e.replace(D,"-$1").toLowerCase().replace(_,"-ms-")}function M(e){let t="";for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];null!=r&&(t?t+=";"+L(n)+":"+r:t=L(n)+":"+r)}return t||""}function k(e){return g(this,arguments,void 0,(function*(e,t=1e3,n=100){const r=(new Date).getTime();function o(i){const s=(new Date).getTime(),a=e();if(a)i(null,a);else{if(r+t<s)return void i("Timeout",null);setTimeout((()=>{o(i)}),n)}}return new Promise(((e,t)=>{o(((n,r)=>{n?t(new Error(n)):e(r)}))}))}))}function N(){return window.jimuConfig.isBuilder?`exb-${(0,l.Vp)().getState().appStateInBuilder.appId||(0,l.Vp)().getState().appStateInBuilder.appPath}`:`exb-${(0,l.Vp)().getState().appId||(0,l.Vp)().getState().appPath}`}const j=()=>(65536*(1+Math.random())|0).toString(16).substring(1),U=()=>j()+j()+"_"+j()+"_"+j()+"_"+j()+"_"+j()+j()+j(),F=e=>e.toString().includes(".")?e.toString().split(".")[1].length:0,B=(e,t=a([]))=>{const n=new RegExp(`^${e}\\_(\\d+)$`);let r=-1;return t.forEach((e=>{const t=e.match(n);t&&(r=Math.max(r,parseInt(t[1],10)))})),`${e}_${r+1}`};function $(e,t,n){const r=/\$\{\w*\}/g;for(const o in e)if("string"==typeof e[o]){const i=e[o].match(r);if(i&&i.length>0){let r=e[o];i.forEach((e=>{const o=e.substring(2,e.length-1);if("appResourceUrl"!==o){const i=t.formatMessage({id:o,defaultMessage:n&&n[o]});r=r.replace(e,i)}})),e[o]=r}}else"object"==typeof e[o]&&$(e[o],t,n);return e}function V(){document.getElementById("loading").style.display="none",document.getElementById("app").style.display="block"}const G=e=>{if(null==e?void 0:e.format){if(e.type===i.Eo.Date)return(0,u.getIntlOptions)(e.format.dateFormat);if(e.type===i.Eo.Number){const t=e.format.places,n=e.format.digitSeparator,r={style:"decimal",notation:"standard"};return"number"==typeof t&&(r.minimumFractionDigits=t,r.maximumFractionDigits=t),"boolean"==typeof n&&(r.useGrouping=n),r}}};function W(e){const t={props:null,result:null};return function(n){if("object"!=typeof n)return console.error("Memorize object param only."),n;if(Object.keys(n).find((e=>{var r;return n[e]!==(null===(r=t.props)||void 0===r?void 0:r[e])}))){const r=e.call(this,n);return t.props=n,t.result=r,r}return t.result}}function H(){try{return Object.keys(localStorage)}catch(e){return console.error("Read Local storage keys error.",e),[]}}function q(e){try{return localStorage.getItem(e)}catch(e){return console.error("Read Local storage error.",e),null}}function z(e,t){try{localStorage.setItem(e,t)}catch(e){console.error("Set Local storage error.",e)}}function K(e){if(!e)return v.None;const t=(null==e?void 0:e.typeKeywords)||[];let n,r,o=!1,i=!1;return null==t||t.forEach((e=>{var t,o;(null==e?void 0:e.includes("version:"))&&(n=null===(t=null==e?void 0:e.split("version:"))||void 0===t?void 0:t[1]),(null==e?void 0:e.includes("publishVersion:"))&&(r=null===(o=null==e?void 0:e.split("publishVersion:"))||void 0===o?void 0:o[1])})),n&&(o=d.lt(m,n)),r&&(i=d.lt(m,r)),o||i?!o&&i?v.Published:o&&!i?v.Draft:o&&i?v.Both:void 0:v.None}function J(){try{return Object.keys(sessionStorage)}catch(e){return console.error("Read Session storage keys error.",e),[]}}function Y(e){try{return sessionStorage.getItem(e)}catch(e){return console.error("Read session storage error.",e),null}}function Q(e,t){try{sessionStorage.setItem(e,t)}catch(e){console.error("Set session storage error.",e)}}function X(e){try{localStorage.removeItem(e)}catch(e){console.error("Remove from Local storage error.",e)}}function Z(e){try{sessionStorage.removeItem(e)}catch(e){console.error("Remove from session storage error.",e)}}function ee(e,t=!0){return[e<0?"-":"",(0,c.getIntl)().formatNumber(Math.abs(e),{useGrouping:t})]}function te(e){var t,n;const r=(0,l.Vp)().getState().appContext.locale,o=null!==(n=null===(t=(0,l.Vp)().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==n&&n,i=parseFloat(e),[s,a]=ee(i),u=window.jimuUA.browser.name.toLowerCase();return o&&"firefox"!==u&&"safari"!==u?"he"===(null==r?void 0:r.toLowerCase())?`${s}${a}%`:`${s}%${a}`:"tr"===(null==r?void 0:r.toLowerCase().split("-")[0])?`${s}%${a}`:`${s}${a}%`}function ne(e){var t,n;const r=parseFloat(e),o=null!==(n=null===(t=(0,l.Vp)().getState().appContext)||void 0===t?void 0:t.isRTL)&&void 0!==n&&n,[i,s]=ee(r);return o?`${i}px${s}`:`${i}${s}px`}const re=()=>(0,f.getModuleSync)("jimu-theme")?(0,f.getModuleSync)("jimu-theme"):(console.error("Please init jimu-theme."),null);function oe(e,t){function n(e){for(const t in e)"object"==typeof e[t]?Array.isArray(e[t])?o(e,t):n(e[t]):"string"==typeof e[t]&&r(e,t)}function r(e,n,r){if("number"==typeof r){const o=e[n][r];if(t.matcher(o)){const i=t.handler(o);e[n][r]=i}}else{const r=e[n];if(t.matcher(r)){const o=t.handler(r);e[n]=o}}}function o(e,t){for(let o=0;o<e[t].length;o++)"string"==typeof e[t][o]?r(e,t,o):"object"==typeof e[t][o]&&n(e[t][o])}return n(e),e}const ie=(e,t)=>{var n,r,o,i;const s=null===(n=(t=null!=t?t:(0,l.Vp)().getState()).appRuntimeInfo)||void 0===n?void 0:n.selection;if(!(null===(r=t.appConfig)||void 0===r?void 0:r.layouts)||!s)return!1;const a=t.appConfig.layouts[s.layoutId];return(null===(i=null===(o=null==a?void 0:a.content)||void 0===o?void 0:o[s.layoutItemId])||void 0===i?void 0:i.widgetId)===e},se=(e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)};function ae(e,t,n){e&&(t=Array.from(new Set(t)),n=Array.from(new Set(n)));const r={};t.forEach((e=>{r[e]>0?r[e]++:r[e]=1}));const o={};n.forEach((e=>{o[e]>0?o[e]++:o[e]=1}));const i=Array.from(new Set(t.concat(n))),s=[],a=[],l=[];i.forEach((e=>{const t=r[e]>0?r[e]:0,n=o[e]>0?o[e]:0;if(t<n){const r=n-t;for(let t=0;t<r;t++)s.push(e)}else if(t>n){const r=t-n;for(let t=0;t<r;t++)a.push(e)}const i=Math.min(t,n);if(i>0)for(let t=0;t<i;t++)l.push(e)}));return{isEqual:0===s.length&&0===a.length,added:s,deleted:a,saved:l}}function le(){try{return window.parent}catch(e){return null}}function ue(){return window.jimuConfig.isBuilder?window.isExpressBuilder:!!window.jimuConfig.isInBuilder&&window.parent.isExpressBuilder}function ce(e){if(window.jimuConfig.isInBuilder){(0,f.getModuleSync)("jimu-for-builder").getAppConfigAction().setAppConfig(e).exec()}else(0,l.Vp)().dispatch((0,p.appConfigChanged)(e))}function de(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}},4558:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M0 3.5 6 0l6 3.5L6 7zm1.985 0L6 1.158 10.015 3.5 6 5.842zM8 8.5 12 6l4 2.5-4 2.5zm1.887 0L12 7.18l2.113 1.32L12 9.82z" clip-rule="evenodd"></path><path fill="#000" d="M3 6.5 4 7v2h3v1H4v3.5h3v1H3zM8 13l2.4-1.5.943.59-1.456.91L12 14.32 14.113 13l-1.456-.91.943-.59L16 13l-4 2.5z"></path></svg>'},4592:(e,t,n)=>{"use strict";function r(e){const[t,n]=e.split("=");return{key:decodeURIComponent(t),value:decodeURIComponent(n)}}function o(e){return!e||e.length<=0?{}:e.replace(/^#/,"").replace(/^\?/,"").split("&").reduce(((e,t)=>{const{key:n,value:o}=r(t);return e[n]=o,e}),{})}n.d(t,{c:()=>r,m:()=>o})},4641:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>0===r(e,t,n)},4644:(e,t,n)=>{"use strict";function r(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}n.d(t,{Yl:()=>u});var o=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),i=()=>Math.random().toString(36).substring(7).split("").join("."),s={INIT:`@@redux/INIT${i()}`,REPLACE:`@@redux/REPLACE${i()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${i()}`};function a(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function l(e,t,n){if("function"!=typeof e)throw new Error(r(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(r(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(r(1));return n(l)(e,t)}let i=e,u=t,c=new Map,d=c,p=0,f=!1;function h(){d===c&&(d=new Map,c.forEach(((e,t)=>{d.set(t,e)})))}function g(){if(f)throw new Error(r(3));return u}function m(e){if("function"!=typeof e)throw new Error(r(4));if(f)throw new Error(r(5));let t=!0;h();const n=p++;return d.set(n,e),function(){if(t){if(f)throw new Error(r(6));t=!1,h(),d.delete(n),c=null}}}function v(e){if(!a(e))throw new Error(r(7));if(void 0===e.type)throw new Error(r(8));if("string"!=typeof e.type)throw new Error(r(17));if(f)throw new Error(r(9));try{f=!0,u=i(u,e)}finally{f=!1}return(c=d).forEach((e=>{e()})),e}v({type:s.INIT});return{dispatch:v,subscribe:m,getState:g,replaceReducer:function(e){if("function"!=typeof e)throw new Error(r(10));i=e,v({type:s.REPLACE})},[o]:function(){const e=m;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(r(11));function n(){const e=t;e.next&&e.next(g())}n();return{unsubscribe:e(n)}},[o](){return this}}}}}function u(e,t,n){return l(e,t,n)}},4649:(e,t,n)=>{"use strict";n.r(t),n.d(t,{clearPortalSelf:()=>f,getAppInfo:()=>g,initPortalSelf:()=>p,removeAppInfo:()=>m,shouldShowClassificationBanner:()=>y,shouldShowClassificationConfig:()=>S,validateClientId:()=>v});var r=n(6888),o=n(4262),i=n(5689),s=n(1035),a=n(4820),l=n(6048),u=n(3676),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};let d={};function p(e){const t=l.Ay.getInstance(),n=t.handleAuthError.bind(t);return d[e]||(d[e]=(0,r.request)(`${(0,i.getPortalRestUrl)(e)}/portals/self`,{authentication:t.getMainSession(),httpMethod:"GET",params:{f:"json",culture:window.locale}}).then((t=>{if(!t.isPortal){const n=`https://${t.urlKey}.${t.customBaseUrl}`;t.urlKey&&!(0,i.isSamePortalUrl)(e,n)&&(0,s.Vp)().dispatch((0,a.setPortalInfo)({portalUrl:n}))}return(0,s.Vp)().dispatch((0,a.setPortalSelf)(t)),t})).catch((e=>{n(e,!1)}))),d[e]}function f(){d={}}const h={};function g(e=(0,o.getAppIdPageIdFromUrl)().appId){return h[e]||(window.jimuConfig.isDevEdition?h[e]=function(e){return c(this,void 0,void 0,(function*(){return yield window.fetch(`${window.jimuConfig.mountPath}apps/${e}/info.json`).then((e=>c(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>Object.assign(Object.assign({},e),{name:e.title})))}))}(e):h[e]=function(e){return c(this,void 0,void 0,(function*(){const t=l.Ay.getInstance(),n=(0,s.Vp)().getState().portalUrl,r=yield p(n),o=r.isPortal?n:r.urlKey?`https://${r.urlKey}.${r.customBaseUrl}`:n;return yield(0,u.getItem)(e,{portal:(0,i.getPortalRestUrl)(o),authentication:t.getSessionByUrl(n)}).then((e=>Object.assign(Object.assign({},e),{name:e.title}))).catch((e=>"CONT_0001"===e.code?Promise.reject(e):Promise.reject({})))}))}(e)),h[e]}function m(e){delete h[e]}function v(e,t){return fetch(`${e}/sharing/rest/oauth2/token?client_id=${t}&client_secret=invalid_secret&grant_type=client_credentials`).then((e=>e.json())).then((e=>{var t;return"invalid_client_id"!==(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.error)})).catch((e=>!1))}function y(e){var t;const n=window.jimuConfig.isInPortal,r=null===(t=null==e?void 0:e.portalSelf)||void 0===t?void 0:t.hasClassificationSchema;return!window.jimuConfig.isBuilder&&!window.jimuConfig.isSite&&n&&r}function S(e){var t;const n=window.jimuConfig.isInPortal,r=null===(t=null==e?void 0:e.portalSelf)||void 0===t?void 0:t.hasClassificationSchema;return(window.jimuConfig.isBuilder||window.jimuConfig.isSite)&&n&&r}},4682:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},4741:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(3149),o=n(1917);const i=function(){return o.A.Date.now()};var s=n(751),a=Math.max,l=Math.min;const u=function(e,t,n){var o,u,c,d,p,f,h=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=o,r=u;return o=u=void 0,h=t,d=e.apply(r,n)}function S(e){var n=e-f;return void 0===f||n>=t||n<0||m&&e-h>=c}function I(){var e=i();if(S(e))return b(e);p=setTimeout(I,function(e){var n=t-(e-f);return m?l(n,c-(e-h)):n}(e))}function b(e){return p=void 0,v&&o?y(e):(o=u=void 0,d)}function w(){var e=i(),n=S(e);if(o=arguments,u=this,f=e,n){if(void 0===p)return function(e){return h=e,p=setTimeout(I,t),g?y(e):d}(f);if(m)return clearTimeout(p),p=setTimeout(I,t),y(f)}return void 0===p&&(p=setTimeout(I,t)),d}return t=(0,s.A)(t)||0,(0,r.A)(n)&&(g=!!n.leading,c=(m="maxWait"in n)?a((0,s.A)(n.maxWait)||0,t):c,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==p&&clearTimeout(p),h=0,o=f=u=p=void 0},w.flush=function(){return void 0===p?d:b(i())},w}},4747:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.547 1.788A.5.5 0 0 1 3 1.5h9.167c.358 0 .699.147.947.403.249.255.386.599.386.954v1.714a.5.5 0 0 1-1 0V2.857a.37.37 0 0 0-.103-.257.32.32 0 0 0-.23-.1h-8.1l4.317 5.18a.5.5 0 0 1 0 .64L4.068 13.5h8.099a.32.32 0 0 0 .23-.1.37.37 0 0 0 .103-.257v-1.714a.5.5 0 1 1 1 0v1.714c0 .355-.137.699-.386.954-.248.257-.59.403-.947.403H3a.5.5 0 0 1-.384-.82L7.349 8 2.616 2.32a.5.5 0 0 1-.069-.532" clip-rule="evenodd"></path></svg>'},4749:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(2383),o=n(5254),i=n(3098),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;const a=function(e){return(0,i.A)(e)&&(0,o.A)(e.length)&&!!s[(0,r.A)(e)]};var l=n(2789),u=n(4841),c=u.A&&u.A.isTypedArray;const d=c?(0,l.A)(c):a},4760:(e,t,n)=>{"use strict";n.d(t,{G:()=>i,o:()=>o});var r=n(441);function o(e,t){return Array.isArray(t)&&t[0]&&Array.isArray(t[0])?t.map((t=>o(e,t))).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e){const t=(0,r.y)(e);return Object.keys(t).map((e=>o(e,t[e]))).join("&")}},4819:(e,t,n)=>{"use strict";function r(e,t){var n=t&&t.cache?t.cache:c,r=t&&t.serializer?t.serializer:l;return(t&&t.strategy?t.strategy:a)(e,{cache:n,serializer:r})}function o(e,t,n,r){var o,i=null==(o=r)||"number"==typeof o||"boolean"==typeof o?r:n(r),s=t.get(i);return void 0===s&&(s=e.call(this,r),t.set(i,s)),s}function i(e,t,n){var r=Array.prototype.slice.call(arguments,3),o=n(r),i=t.get(o);return void 0===i&&(i=e.apply(this,r),t.set(o,i)),i}function s(e,t,n,r,o){return n.bind(t,e,r,o)}function a(e,t){return s(e,this,1===e.length?o:i,t.cache.create(),t.serializer)}n.d(t,{B:()=>r,W:()=>d});var l=function(){return JSON.stringify(arguments)},u=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(e){return this.cache[e]},e.prototype.set=function(e,t){this.cache[e]=t},e}(),c={create:function(){return new u}},d={variadic:function(e,t){return s(e,this,i,t.cache.create(),t.serializer)},monadic:function(e,t){return s(e,this,o,t.cache.create(),t.serializer)}}},4820:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ActionKeys:()=>r,CurrentGuideChange:()=>Ze,MapWidgetInfoAdded:()=>ne,MapWidgetInfoRemoved:()=>oe,MapWidgetInfoUpdated:()=>re,OpenCookieBannerByPrivacyPanel:()=>Qe,OpenCookieBannerByUrl:()=>Xe,OpenCookieBannerSetting:()=>Je,OpenCookieSettingsWindow:()=>Ye,activateWidget:()=>P,activeOverlay:()=>Pe,activePagePartChanged:()=>Te,activePrintPreview:()=>He,addToRegisterClientIdList:()=>$e,appConfigChanged:()=>u,appConfigLoaded:()=>a,appIdChanged:()=>p,appInfoChanged:()=>d,appModeChanged:()=>N,appPathChanged:()=>c,appRuntimeInfoInit:()=>Ae,batchUpdateDataSourceInfo:()=>z,browserSizeModeChanged:()=>fe,changeDataSourceGDBVersion:()=>W,changeDynamicStylePreviewConditionInfo:()=>et,changeDynamicStylePreviewRepeatedRecordInfo:()=>tt,clearAnimationPreview:()=>je,clearDataSourceInfo:()=>H,clipboardChanged:()=>we,closeOverlay:()=>Re,closeWidget:()=>T,closeWidgets:()=>x,currentDialogChanged:()=>Se,currentPageChanged:()=>ye,dataSourceCountStatusChanged:()=>F,dataSourceInstanceStatusChanged:()=>B,dataSourceSaveStatusChanged:()=>$,dataSourceSelectedIndexesChanged:()=>ue,dataSourceSelectionChanged:()=>ce,dataSourceSourceVersionAdded:()=>G,dataSourceStatusChanged:()=>U,dataSourceVersionAdded:()=>V,dialogInfosChanged:()=>Ie,hasPrivilegeChanged:()=>Be,hideWidgetsInLayout:()=>b,hideWidgetsInLayoutItem:()=>E,hideWidgetsInLayoutItems:()=>O,i18nMessagesLoaded:()=>_,initAppContext:()=>D,initStoreExtensionState:()=>ie,jimuMapViewAdded:()=>Q,jimuMapViewRemoved:()=>Z,jimuMapViewUpdated:()=>X,layoutClassLoaded:()=>j,loadAppConfigFailed:()=>l,networkStatusChanged:()=>ve,openOverlay:()=>xe,openWidget:()=>S,openWidgets:()=>I,queryObjectChanged:()=>L,quitPrintPreview:()=>qe,releaseAutoControlMapWidget:()=>te,removeFromRegisterClientIdList:()=>Ve,requestAutoControlMapWidget:()=>ee,resetWidgetsState:()=>R,saveThumbnailUrl:()=>Ke,screenGroupNavInfoChanged:()=>Me,screenPanelVisibleChanged:()=>ke,sectionNavInfoChanged:()=>Le,selectionChanged:()=>be,setAppInBuilder:()=>k,setDataLastRefreshTime:()=>J,setDataNeedRefresh:()=>K,setDataSourcePreloadData:()=>me,setIsBusy:()=>_e,setPortalInfo:()=>le,setPortalSelf:()=>Ce,setWidgetIsInlineEditingState:()=>he,setWidgetPreloadProps:()=>ge,setupAnimationPreview:()=>Ne,setupHoverPreview:()=>Ue,showWidgetsInLayout:()=>w,showWidgetsInLayoutItem:()=>A,showWidgetsInLayoutItems:()=>C,themeVariablesChanged:()=>Oe,updateDataSourceInfo:()=>q,updateNoPermissionResourceChangedFlag:()=>Ge,updateResourceSessions:()=>We,updateStoreState:()=>Ee,updateWidgetQuery:()=>Y,urlHashObjectChanged:()=>M,userLocaleChanged:()=>Fe,userSignIn:()=>de,userSignOut:()=>pe,utilityStateChange:()=>ze,widgetClassLoaded:()=>f,widgetConfigLoaded:()=>m,widgetMutableStatePropChange:()=>ae,widgetRuntimeInfoChange:()=>y,widgetStatePropChange:()=>se,widgetToolbarStateChange:()=>v,widgetUpgraded:()=>g,widgetsUpgraded:()=>h,zoomScaleChange:()=>De});var r,o=n(3702),i=n(508),s=n(9459);function a(e){return{type:r.AppConfigLoaded,appConfig:e}}function l(e){return{type:r.LoadAppConfigFailed,error:e}}function u(e){return{type:r.AppConfigChanged,appConfig:e}}function c(e){return{type:r.AppPathChanged,path:e}}function d(e){return{type:r.AppInfoChanged,appInfo:e}}function p(e){return{type:r.AppIdChanged,appId:e}}function f(e){return{type:r.WidgetClassLoaded,widgetUri:e}}function h(e,t){return{type:r.WidgetsUpgraded,widgetUri:e,upgradeInfos:t}}function g(e,t){return{type:r.WidgetUpgraded,widgetId:e,upgradeInfo:t}}function m(e,t){return{type:r.WidgetConfigLoaded,widgetId:e,config:t}}function v(e,t){return{type:r.WidgetToolbarStateChange,widgetId:e,toolNames:t}}function y(e,t,n){return{type:r.WidgetRuntimeInfoChange,widgetId:e,prop:t,value:n}}function S(e){return{type:r.OpenWidget,widgetId:e}}function I(e){return{type:r.OpenWidgets,widgetIds:e}}function b(e){return{type:r.HideWidgetsInLayout,layoutId:e}}function w(e){return{type:r.ShowWidgetsInLayout,layoutId:e}}function E(e){return{type:r.HideWidgetsInLayoutItem,layoutInfo:e}}function A(e){return{type:r.ShowWidgetsInLayoutItem,layoutInfo:e}}function O(e){return{type:r.HideWidgetsInLayoutItems,layoutInfos:e}}function C(e){return{type:r.ShowWidgetsInLayoutItems,layoutInfos:e}}function T(e){return{type:r.CloseWidget,widgetId:e}}function x(e){return{type:r.CloseWidgets,widgetIds:e}}function R(e){return{type:r.ResetWidgetsState,widgetIds:e}}function P(e){return{type:r.ActivateWidget,widgetId:e}}function D(e){return{type:r.AppContextInit,appContext:e}}function _(e,t){return{type:r.I18nMessagesLoaded,key:e,messages:t}}function L(e){return{type:r.QueryObjectChanged,query:e}}function M(e){return{type:r.UrlHashObjectChanged,hash:e}}function k(){return{type:r.SetAppInBuilder}}function N(e){return{type:r.AppModeChanged,mode:e}}function j(e){return{type:r.LayoutClassLoaded,layoutName:e}}function U(e,t){var n;const o=null===(n=s.A.getInstance())||void 0===n?void 0:n.getDataSource(e);return o&&t===i.e3.NotReady&&(o.clearSourceRecordsNotAddVersion(),o.getAllDerivedDataSources().forEach((e=>{e.clearSourceRecordsNotAddVersion()}))),o&&t===i.e3.Unloaded&&(o.clearRecordsNotAddVersion(),o.getAllDerivedDataSources().forEach((e=>{e.clearRecordsNotAddVersion()}))),{type:r.DataSourceStatusChanged,dataSourceId:e,status:t,dataSourceManager:s.A.getInstance()}}function F(e,t){return{type:r.DataSourceCountStatusChanged,dataSourceId:e,countStatus:t,dataSourceManager:s.A.getInstance()}}function B(e,t){return{type:r.DataSourceInstanceStatusChanged,dataSourceId:e,status:t}}function $(e,t){return{type:r.DataSourceSaveStatusChanged,dataSourceId:e,saveStatus:t}}function V(e){return{type:r.DataSourceVersionAdded,dataSourceId:e}}function G(e){return{type:r.DataSourceSourceVersionAdded,dataSourceId:e}}function W(e,t){return{type:r.ChangeDataSourceGDBVersion,dataSourceId:e,gdbVersion:t}}function H(e){return{type:r.ClearDataSourceInfo,dataSourceId:e}}function q(e,t){return{type:r.UpdateDataSourceInfo,dataSourceId:e,dataSourceInfo:t}}function z(e){return{type:r.BatchUpdateDataSourceInfo,dataSourcesInfo:e}}function K(e,t){return{type:r.SetDataNeedRefresh,dataSourceId:e,refresh:t}}function J(e,t){return{type:r.SetDataLastRefreshTime,dataSourceId:e,lastAutoRefreshCheckTime:t}}function Y(e,t,n){return{type:r.UpdateWidgetQuery,dataSourceId:e,widgetId:t,query:n}}function Q(e,t){return{type:r.JimuMapViewAdded,jimuMapViewId:e,jimuMapViewInfo:t}}function X(e,t){return{type:r.JimuMapViewUpdated,jimuMapViewId:e,jimuMapViewInfo:t}}function Z(e){return{type:r.JimuMapViewRemoved,jimuMapViewId:e}}function ee(e,t){return{type:r.RequestAutoControlMapWidget,mapWidgetId:e,autoControlWidgetId:t}}function te(e){return{type:r.ReleaseAutoControlMapWidget,mapWidgetId:e}}function ne(e,t){return{type:r.MapWidgetInfoAdded,mapWidgetId:e,mapWidgetInfo:t}}function re(e,t){return{type:r.MapWidgetInfoUpdated,mapWidgetId:e,mapWidgetInfo:t}}function oe(e){return{type:r.MapWidgetInfoRemoved,mapWidgetId:e}}function ie(e){return{type:r.InitStoreExtensionState,extensionId:e}}function se(e,t,n){return{type:r.WidgetStatePropChange,widgetId:e,propKey:t,value:n}}function ae(e,t){return{type:r.WidgetMutableStatePropChange,widgetId:e,propKey:t}}function le(e){return{type:r.SetPortalInfo,portalInfo:e}}function ue(e,t){return{type:r.DataSourceSelectedIndexesChanged,dataSourceId:e,selectedIndexes:t}}function ce(e,t){return{type:r.DataSourceSelectionChanged,dataSourceId:e,selectOptions:t}}function de(e){return{type:r.UserSignIn,user:e}}function pe(){return{type:r.UserSignOut}}function fe(e){const t=window.document&&window.document.documentElement;return t&&(t.classList.remove(`size-mode-${o.rH.Large}`),t.classList.remove(`size-mode-${o.rH.Medium}`),t.classList.remove(`size-mode-${o.rH.Small}`),t.classList.add(`size-mode-${e}`)),{type:r.BrowserSizeModeChanged,browserSizeMode:e}}function he(e,t){return{type:r.SetWidgetIsInlineEditingState,widgetId:e,isInlineEditing:t}}function ge(e,t){return{type:r.SetWidgetPreloadProps,widgetId:e,props:t}}function me(e,t){return{type:r.SetDataSourcePreloadData,dataSourceId:e,data:t}}function ve(e){return{type:r.NetworkStatusChanged,isOffLine:e}}function ye(e){return{type:r.CurrentPageChanged,pageId:e}}function Se(e){return{type:r.CurrentDialogChanged,dialogId:e}}function Ie(e){return{type:r.DialogInfosChanged,dialogInfos:e}}function be(e){return{type:r.SelectionChanged,selection:e}}function we(e){return{type:r.ClipboardChanged,item:e}}function Ee(e){return{type:r.UpdateStoreState,state:e}}function Ae(e){return{type:r.AppRuntimeInfoInit,info:e}}function Oe(e){return{type:r.ThemeVariablesChanged,theme:e}}function Ce(e){return{type:r.SetPortalSelf,portalSelf:e}}function Te(e){return{part:e,type:r.ActivePagePartChanged}}function xe(e,t){return{type:r.OpenOverlay,id:e,modalId:t}}function Re(e){return{type:r.CloseOverlay,id:e}}function Pe(e){return{type:r.ActiveOverlay,id:e}}function De(e){return{type:r.ZoomScaleChanged,zoomScale:e}}function _e(e,t,n){return{type:r.SetIsBusy,isBusy:e,loadingType:t,loadingText:n}}function Le(e,t){return{type:r.SectionNavInfoChanged,sectionId:e,navInfo:t}}function Me(e,t,n=!0){return{type:r.ScreenGroupNavInfoChanged,screenGroupId:e,activeIndex:t,scrollIntoView:n}}function ke(e,t){return{type:r.ScreenPanelVisibleChange,screenId:e,visible:t}}function Ne(e){return{type:r.SetupAnimationPreview,data:e}}function je(){return{type:r.ClearAnimationPreview}}function Ue(e){return{type:r.SetupHoverPreview,data:e}}function Fe(e){return{type:r.UserLocaleChanged,isChanged:e}}function Be(e,t=!1){return{type:r.HasPrivilegeChanged,hasPrivilege:t,errorMessage:e}}function $e(e,t,n,o){return{type:r.AddToRegisterClientIdList,portalUrl:e,needToSignIn:t,forceLogin:o,serviceUrl:n}}function Ve(e){return{type:r.RemoveFromRegisterClientIdList,portalUrl:e}}function Ge(){return{type:r.UpdateNoPermissionResourceChangedFlag}}function We(e,t){return{type:r.UpdateResourceSessions,resourceRootUrl:e,userName:t}}function He(){return{type:r.ActivePrintPreview}}function qe(){return{type:r.QuitPrintPreview}}function ze(e,t,n){return{type:r.UtilityStateChange,id:e,success:t,isSignInError:n}}function Ke(e){return{type:r.SaveThumbnailUrl,saveThumbnailUrl:e}}function Je(e){return{type:r.OpenCookieBannerSetting,isSettingOpen:e}}function Ye(e){return{type:r.OpenCookieSettingsWindow,isCookieSettingsWindowOpen:e}}function Qe(e){return{type:r.OpenCookieBannerByPrivacyPanel,isCookieBannerOpenByPrivacyPanel:e}}function Xe(e){return{type:r.OpenCookieBannerByUrl,isCookieBannerOpenByUrl:e}}function Ze(e,t){return{type:r.CurrentGuideChange,guideId:e,shouldCheckGuideDisplay:t}}function et(e,t){return{type:r.ChangeDynamicStylePreviewConditionInfo,widgetId:e,value:t}}function tt(e,t){return{type:r.ChangeDynamicStylePreviewRepeatedRecordInfo,widgetId:e,value:t}}!function(e){e.InitStoreExtensionState="INIT_STORE_EXTENSION_STATE",e.AppConfigLoaded="APP_CONFIG_LOADED",e.AppConfigChanged="APP_CONFIG_CHANGED",e.LoadAppConfigFailed="LOAD_APP_CONFIG_FAILED",e.ThemeVariablesChanged="THEME_VARIABLES_CHANGED",e.SetPortalInfo="SET_PORTAL_INFO",e.SetPortalSelf="SET_PORTAL_SELF",e.WidgetClassLoaded="WIDGET_CLASS_LOADED",e.WidgetConfigLoaded="WIDGET_CONFIG_LOADED",e.WidgetsUpgraded="WIDGETS_UPGRADED",e.WidgetUpgraded="WIDGET_UPGRADED",e.OpenWidget="OPEN_WIDGET",e.OpenWidgets="OPEN_WIDGETS",e.CloseWidget="CLOSE_WIDGET",e.CloseWidgets="CLOSE_WIDGETS",e.HideWidgetsInLayout="HIDE_WIDGETS_IN_LAYOUT",e.ShowWidgetsInLayout="SHOW_WIDGETS_IN_LAYOUT",e.HideWidgetsInLayoutItem="HIDE_WIDGETS_IN_LAYOUT_ITEM",e.ShowWidgetsInLayoutItem="SHOW_WIDGETS_IN_LAYOUT_ITEM",e.HideWidgetsInLayoutItems="HIDE_WIDGETS_IN_LAYOUT_ITEMS",e.ShowWidgetsInLayoutItems="SHOW_WIDGETS_IN_LAYOUT_ITEMs",e.ResetWidgetsState="RESET_WIDGETS_STATE",e.SetWidgetIsInlineEditingState="SET_WIDGET_IS_INLINE_EDITING_STATE",e.SetWidgetPreloadProps="SET_WIDGET_PRELOAD_PROPS",e.ActivateWidget="ACTIVATE_WIDGET",e.SetAppInBuilder="SET_APP_IN_BUILDER",e.LayoutClassLoaded="LAYOUT_CLASS_LOADED",e.AppContextInit="APP_CONTEXT_INIT",e.I18nMessagesLoaded="I18N_MESSAGES_LOADED",e.QueryObjectChanged="QUERY_OBJECT_CHANGED",e.UrlHashObjectChanged="URL_HASH_OBJECT_CHANGED",e.AppModeChanged="APP_MODE_CHANGED",e.SelectionChanged="SELECTION_CHANGED",e.AppRuntimeInfoInit="APP_RUNTIME_INFO_INIT",e.CurrentPageChanged="CURRENT_PAGE_CHANGED",e.CurrentDialogChanged="CURRENT_DIALOG_CHANGED",e.DialogInfosChanged="DIALOG_INFOS_CHANGED",e.ClipboardChanged="CLIPBOARD_CHANGED",e.AppPathChanged="APP_PATH_CHANGED",e.AppIdChanged="APP_ID_CHANGED",e.AppInfoChanged="APP_INFO_CHANGED",e.NetworkStatusChanged="NETWORK_STATUS_CHANGED",e.DataSourceStatusChanged="DATA_SOURCE_STATUS_CHANGED",e.DataSourceCountStatusChanged="DATA_SOURCE_COUNT_STATUS_CHANGED",e.DataSourceInstanceStatusChanged="DATA_SOURCE_INSTANCE_STATUS_CHANGED",e.DataSourceSaveStatusChanged="DATA_SOURCE_SAVE_STATUS_CHANGED",e.DataSourceVersionAdded="DATA_SOURCE_VERSION_ADDED",e.DataSourceSourceVersionAdded="DATA_SOURCE_SOURCE_VERSION_ADDED",e.DataSourceSelectedIndexesChanged="DATA_SOURCE_SELECTED_INDEXES_CHANGED",e.DataSourceSelectionChanged="DATA_SOURCE_SELECTION_CHANGED",e.SetDataSourcePreloadData="SET_DATA_SOURCE_PRELOAD_DATA",e.SetDataNeedRefresh="SET_DATA_NEED_REFRESH",e.SetDataLastRefreshTime="SET_DATA_LAST_REFRESH_TIME",e.UpdateWidgetQuery="UPDATE_WIDGET_QUERY",e.ChangeDataSourceGDBVersion="CHANGE_DATA_SOURCE_GDB_VERSION",e.ClearDataSourceInfo="CLEAR_DATA_SOURCE_INFO",e.UpdateDataSourceInfo="UPDATE_DATA_SOURCE_INFO",e.BatchUpdateDataSourceInfo="BATCH_UPDATE_DATA_SOURCE_INFO",e.JimuMapViewAdded="JIMU_MAP_VIEW_ADDED",e.JimuMapViewRemoved="JIMU_MAP_VIEW_REMOVED",e.JimuMapViewUpdated="JIMU_MAP_VIEW_UPDATED",e.MapWidgetInfoAdded="MAP_WIDGET_INFO_ADDED",e.MapWidgetInfoRemoved="MAP_WIDGET_INFO_REMOVED",e.MapWidgetInfoUpdated="MAP_WIDGET_INFO_UPDATED",e.RequestAutoControlMapWidget="REQUEST_AUTO_CONTROL_MAP_WIDGET",e.ReleaseAutoControlMapWidget="RELEASE_AUTO_CONTROL_MAP_WIDGET",e.WidgetStatePropChange="WIDGET_STATE_PROP_CHANGE",e.WidgetMutableStatePropChange="WIDGET_MUTABLE_STATE_PROP_CHANGE",e.UserSignIn="USER_SIGN_IN",e.UserSignOut="USER_SIGN_OUT",e.BrowserSizeModeChanged="BROWSER_SIZE_MODE_CHANGED",e.UpdateStoreState="UPDATE_STORE_STATE",e.ActivePagePartChanged="ACTIVE_PAGE_PART_CHANGED",e.OpenOverlay="OPEN_OVERLAY",e.CloseOverlay="CLOSE_OVERLAY",e.ActiveOverlay="ACTIVE_OVERLAY",e.SetIsBusy="SET_IS_BUSY",e.ZoomScaleChanged="ZOOM_SCALE_CHANGED",e.SectionNavInfoChanged="SECTION_NAV_INFO_CHANGED",e.SetupAnimationPreview="SETUP_ANIMATION_PREVIEW",e.ClearAnimationPreview="CLEAR_ANIMATION_PREVIEW",e.SetupHoverPreview="SETUP_HOVER_PREVIEW",e.ScreenGroupNavInfoChanged="SCREEN_GROUP_NAV_INFO_CHANGE",e.UserLocaleChanged="USER_LOCALE_CHANGED",e.HasPrivilegeChanged="HAS_PRIVILEGE_CHANGED",e.AddToRegisterClientIdList="ADD_TO_REGISTER_CLIENT_ID_LIST",e.RemoveFromRegisterClientIdList="REMOVE_FROM_REGISTER_CLIENT_ID_LIST",e.UpdateNoPermissionResourceChangedFlag="UPDATE_NO_PERMISSION_RESOURCE_CHANGED_FLAG",e.UpdateResourceSessions="UPDATE_RESOURCE_SESSIONS",e.ScreenPanelVisibleChange="SCREEN_PANEL_VISIBLE_CHANGE",e.ActivePrintPreview="ACTIVE_PRINT_PREVIEW",e.QuitPrintPreview="QUIT_PRINT_PREVIEW",e.UtilityStateChange="UTILITY_STATE_CHANGE",e.SaveThumbnailUrl="SAVE_THUMBNAIL_URL",e.OpenCookieBannerSetting="OPEN_COOKIE_BANNER_SETTING",e.OpenCookieSettingsWindow="OPEN_COOKIE_SETTINGS_WINDOW",e.OpenCookieBannerByPrivacyPanel="OPEN_COOKIE_BANNER_BY_PRIVACY_PANEL",e.OpenCookieBannerByUrl="OPEN_COOKIE_BANNER_BY_URL",e.WidgetToolbarStateChange="WIDGET_TOOLBAR_STATE_CHANGE",e.WidgetRuntimeInfoChange="WIDGET_RUNTIME_INFO_CHANGE",e.CurrentGuideChange="CURRENT_GUIDE_CHANGE",e.ChangeDynamicStylePreviewConditionInfo="CHANGE_DYNAMIC_STYLE_PREVIEW_CONDITION_INFO",e.ChangeDynamicStylePreviewRepeatedRecordInfo="CHANGE_DYNAMIC_STYLE_PREVIEW_REPEATED_RECORD_INFO"}(r||(r={}))},4835:(e,t,n)=>{"use strict";n.r(t),n.d(t,{convertGeometryJsonToGeometryInstance:()=>c,createBuffer:()=>l,projectDataRecordsToSpatialReference:()=>s,projectToSpatialReference:()=>a});var r=n(4502),o=n(806),i=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function s(e,t){return i(this,void 0,void 0,(function*(){const n=yield(0,o.p)("esri/geometry/support/jsonUtils"),r=e&&e[0]&&e[0].getGeometry();if(!r||t.equals(r.spatialReference))return Promise.resolve(e);return a(e.map((e=>n.fromJSON(e.getGeometry()))),t).then((t=>t.map(((t,n)=>{const r=e[n]&&e[n].clone();return r.setGeometry(t),r}))))}))}function a(e,t){return i(this,void 0,void 0,(function*(){return e&&0!==e.length&&e[0]&&t.wkid!==e[0].spatialReference.wkid&&!t.equals(e[0].spatialReference)?yield(0,o.e)(["esri/rest/geometryService","esri/rest/support/ProjectParameters","esri/geometry/operators/projectOperator"]).then((n=>i(this,void 0,void 0,(function*(){var r,o;let s,a,l;if([s,a,l]=n,l.isLoaded()&&(null===(o=null===(r=e[0])||void 0===r?void 0:r.spatialReference)||void 0===o?void 0:o.wkid)){const n=function(e,t,n){return n.executeMany(e,t)}(e,t,l);return n&&n[0]?yield Promise.resolve(n):yield u(e,t,s,a).then((e=>i(this,void 0,void 0,(function*(){return yield Promise.resolve(e)}))),(e=>i(this,void 0,void 0,(function*(){return console.error(e),yield Promise.reject(new Error(e))}))))}return l.load(),yield u(e,t,s,a).then((e=>i(this,void 0,void 0,(function*(){return yield Promise.resolve(e)}))),(e=>i(this,void 0,void 0,(function*(){return console.error(e),yield Promise.reject(new Error(e))}))))})))):yield Promise.resolve(e)}))}function l(e,t,n){return i(this,void 0,void 0,(function*(){const i=Array.isArray(e)?e[0]:e,s=new(yield(0,o.p)("esri/geometry/SpatialReference"))("function"==typeof i.spatialReference.toJSON?i.spatialReference.toJSON():i.spatialReference);if(s.isGeographic&&!s.isWGS84){const s=(0,r.getGeometryService)(),[a,l]=yield(0,o.e)(["esri/rest/geometryService","esri/rest/support/BufferParameters"]);return yield a.buffer(s,new l({distances:t,unit:n,geodesic:!0,bufferSpatialReference:i.spatialReference,outSpatialReference:i.spatialReference,geometries:Array.isArray(e)?e:[e]}))}{if(s.isWGS84||s.isWebMercator){const r=yield(0,o.p)("esri/geometry/operators/geodesicBufferOperator");return r.isLoaded()||(yield r.load()),Array.isArray(e)?r.executeMany(e,t,{unit:n}):r.execute(e,t[0],{unit:n})}const r=yield(0,o.p)("esri/geometry/operators/bufferOperator");return Array.isArray(e)?r.executeMany(e,t,{unit:n}):r.execute(e,t[0],{unit:n})}}))}function u(e,t,n,o){return i(this,void 0,void 0,(function*(){const i=(0,r.getGeometryService)(),s=new o({geometries:e,outSpatialReference:t});return yield n.project(i,s)}))}function c(e,t){return i(this,void 0,void 0,(function*(){const n=yield(0,o.p)("esri/geometry/support/jsonUtils");let r=null;if(e)if(e.declaredClass)r=t?e.clone():e;else try{r=n.fromJSON(e)}catch(e){r=null,console.error("can not get geometry instance by geometry json",e)}return r}))}},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},4841:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(2136),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof module&&module&&!module.nodeType&&module,s=i&&i.exports===o&&r.A.process;const a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}()},4882:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m13 11-1-6H4l-1 6zM4.847 6l-.25 1.5h1.7l.15-1.5zm-.667 4 .25-1.5h1.768l-.15 1.5zm2.872 0 .15-1.5h1.595l.15 1.5zm2.9 0-.15-1.5h1.768l.25 1.5zm-.25-2.5h1.7l-.25-1.5h-1.6zm-2.4 0h1.396L8.548 6H7.451z" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M8 14.29c4.8-1.6 8 0 8 0L13.867 1.487a9.76 9.76 0 0 0-5.867 0 9.74 9.74 0 0 1-5.867 0L0 14.29s3.2 1.6 8 0m4.208-1.712c-1.54.01-3.067.267-4.524.762-1.253.428-2.567.65-3.891.66a9.5 9.5 0 0 1-2.67-.363L2.941 2.722a12 12 0 0 0 2.353.241 8.3 8.3 0 0 0 3.078-.547 6.3 6.3 0 0 1 2.334-.402c.768.006 1.533.097 2.28.272l1.76 10.56c-.834-.18-1.685-.27-2.538-.268" clip-rule="evenodd"></path></svg>'},4902:(e,t,n)=>{"use strict";n.d(t,{Dk:()=>f,Go:()=>r,HX:()=>p,I9:()=>I,It:()=>i,QX:()=>d,R:()=>g,V6:()=>s,jq:()=>m,kc:()=>v,oj:()=>l,q0:()=>h,r2:()=>y,vQ:()=>o,w5:()=>c,wJ:()=>S,zd:()=>u});var r,o,i,s,a=n(4419);function l(e,t){return{STRING_SELECTION_CHANGE:t.formatMessage({id:"message_StringSelectionChange",defaultMessage:a.A.message_StringSelectionChange}),EXTENT_CHANGE:t.formatMessage({id:"message_ExtentChange",defaultMessage:a.A.message_ExtentChange}),DATA_RECORDS_SELECTION_CHANGE:t.formatMessage({id:"message_DataRecordsSelectionChange",defaultMessage:a.A.message_DataRecordsSelectionChange}),DATA_SOURCE_FILTER_CHANGE:t.formatMessage({id:"message_DataSourceFilterChange",defaultMessage:a.A.message_DataSourceFilterChange}),DATA_RECORD_SET_CHANGE:t.formatMessage({id:"message_DataRecordSetChange",defaultMessage:a.A.message_DataRecordSetChange}),DATA_SOURCES_CHANGE:t.formatMessage({id:"message_DataSourcesChange",defaultMessage:a.A.message_DataSourcesChange}),LOCATION_CHANGE:t.formatMessage({id:"message_LocationChange",defaultMessage:a.A.message_LocationChange}),SELECT_DATA_RECORD:t.formatMessage({id:"message_SelectDataRecord",defaultMessage:a.A.message_SelectDataRecord}),BUTTON_CLICK:t.formatMessage({id:"message_ButtonClick",defaultMessage:a.A.message_ButtonClick}),VIEW_CHANGE:t.formatMessage({id:"message_ViewChange",defaultMessage:a.A.message_ViewChange})}[e]}!function(e){e.StringSelectionChange="STRING_SELECTION_CHANGE",e.ExtentChange="EXTENT_CHANGE",e.DataRecordsSelectionChange="DATA_RECORDS_SELECTION_CHANGE",e.DataSourceFilterChange="DATA_SOURCE_FILTER_CHANGE",e.DataRecordSetChange="DATA_RECORD_SET_CHANGE",e.DataSourcesChange="DATA_SOURCES_CHANGE",e.LocationChange="LOCATION_CHANGE",e.SelectDataRecord="SELECT_DATA_RECORD",e.ButtonClick="BUTTON_CLICK",e.ViewChange="VIEW_CHANGE"}(r||(r={})),function(e){e.UseDataSource="USE_DATA_SOURCE",e.OutputDataSource="OUTPUT_DATA_SOURCE",e.BothDataSource="BOTH_DATA_SOURCE"}(o||(o={}));class u{constructor(e,t){this.type=r.StringSelectionChange,this.widgetId=e,this.str=t}}class c{constructor(e,t,n){this.type=r.DataRecordsSelectionChange,this.widgetId=e,this.records=t,this.dataSourceIds=n}}class d{constructor(e,t,n,o){this.type=r.ExtentChange,this.widgetId=e,this.extent=t,this.viewpoint=n,this.stationary=o,this.relatedWidgetIds=[]}setRelatedWidgetIds(e){this.relatedWidgetIds=e.slice()}getRelatedWidgetIds(){return this.relatedWidgetIds?this.relatedWidgetIds.slice():[]}addRelatedWidgetId(e){this.relatedWidgetIds.includes(e)||this.relatedWidgetIds.push(e)}clone(){const e=this.extent?this.extent.clone():null,t=this.viewpoint?this.viewpoint.clone():null,n=new d(this.widgetId,e,t,this.stationary);n.publishTime=this.publishTime;const r=this.getRelatedWidgetIds();return n.setRelatedWidgetIds(r),n}}class p{constructor(e,t){this.type=r.DataSourceFilterChange,this.widgetId=e,this.dataSourceIds=t}}!function(e){e.CreateUpdate="CREATE_UPDATE",e.Remove="REMOVE"}(i||(i={}));class f{constructor(e,t,n){this.type=r.DataRecordSetChange,this.widgetId=e,this.changeType=t,t===i.CreateUpdate?this.dataRecordSets=n:this.dataRecordSetNames=n}}!function(e){e.Create="CREATE",e.Remove="REMOVE"}(s||(s={}));class h{constructor(e,t,n){this.type=r.DataSourcesChange,this.widgetId=e,this.changeType=t,this.dataSources=n}}class g{constructor(e,t){this.type=r.LocationChange,this.widgetId=e,this.point=t}}class m{constructor(e,t,n){this.type=r.SelectDataRecord,this.widgetId=e,this.dataSourceId=t,this.recordId=n}}class v{constructor(e){this.type=r.ButtonClick,this.widgetId=e}}class y{constructor(e,t,n){this.type=r.ViewChange,this.widgetId=e,this.viewId=t,this.preViewId=n}}class S{constructor(e){this.id=e.id,e.name&&(this.name=e.name),e.widgetId&&(this.widgetId=e.widgetId),e.sectionId&&(this.sectionId=e.sectionId),this.label=e.label,this.intl=e.intl}destroy(){return null}onRemoveListen(e,t){return null}}class I extends S{filterMessageDescription(e){return!0}filterMessage(e){return!0}onExecute(e,t){return!0}}},4931:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m9.513 3.47 4.324 8.03H2.224l3.158-6.948L7.43 7.113zM7.79 8.5h3.296L9.487 5.53zm3.834 1H4.231l-.454 1h8.386zm-4.364-1H4.686l.932-2.052z" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M16 14.29s-3.2-1.6-8 0-8 0-8 0L2.133 1.487a9.74 9.74 0 0 0 5.867 0 9.76 9.76 0 0 1 5.867 0zm-8.316-.95a14.3 14.3 0 0 1 4.524-.762c.853-.002 1.704.088 2.538.267l-1.76-10.559a10.3 10.3 0 0 0-2.28-.272 6.3 6.3 0 0 0-2.334.402 8.3 8.3 0 0 1-3.078.547 12 12 0 0 1-2.353-.24L1.123 13.636c.868.247 1.767.37 2.67.363a12.3 12.3 0 0 0 3.891-.66" clip-rule="evenodd"></path></svg>'},4962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createCustomSharedThemeVariables:()=>u,createSharedThemeVariables:()=>l,isSharedTheme:()=>a});var r=n(7390),o=n(3096);function i(e,t=!0){return"string"==typeof e&&"no-color"!==e&&(!!t||"transparent"!==e)}function s(e){if(null!=e)return Object.assign(Object.assign(Object.assign({},i(e.background)&&{bg:e.background}),i(e.text)&&{color:e.text}),i(e.link)&&{link:e.link})}const a=e=>e===o.SHARED_THEME,l=e=>{let t=null;if(!e)return t;const n=e.header,r=e.body,o=e.button,i=e.logo,a=e.fonts,l=s(n),u=s(r),c=s(o);return t={},l&&(t.header=l),u&&(t.body=u),c&&(t.button=c),i&&(t.logo=i),a&&(t.fonts=a),t},u=e=>{let t=r({});if(!e)return t;const n=e.header,o=e.body,s=e.button,a=i(null==s?void 0:s.bg,!1)&&{primary:s.bg},l=(i(null==s?void 0:s.color,!1)||i(null==s?void 0:s.bg,!1))&&{variants:{primary:{default:{color:s.color,bg:s.bg}}}},u=i(null==o?void 0:o.link,!1)&&{color:null==o?void 0:o.link,hover:{color:null==o?void 0:o.link}};return a&&(t=t.set("colors",a)),n&&(t=t.set("header",n)),o&&(t=t.set("body",o)),l&&(t=t.set("components",{button:l})),u&&(t=t.set("link",u)),t}},4990:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class r{constructor(){this.idCounter={}}static getInstance(){var e;return window.jimuConfig&&window.jimuConfig.isBuilder?null===(e=window._appWindow)||void 0===e?void 0:e._idManager:(r.instance||(r.instance=new r,window._idManager=r.instance),r.instance)}initIdCounter(e){this.idCounter={};["page","view","section","widget","screen","screenGroup","layout","dialog","dataSource","messageConfig","appProxy","utility"].forEach((t=>{var n;const r=this.getConfigKeyByType(t);null==this.idCounter[t]&&(this.idCounter[t]=0),Object.keys(null!==(n=e[r])&&void 0!==n?n:{}).forEach((e=>{const n=`${t}_`,r=n.length,o=e.indexOf(n);if(-1!==o){const n=e.substring(o+r);/^\d+$/.test(n)&&(this.idCounter[t]=Math.max(this.idCounter[t],parseInt(n)))}}))}))}getConfigKeyByType(e){return"y"===e.charAt(e.length-1)?`${e.slice(0,e.length-1)}ies`:`${e}s`}getUniqueId(e){return null==this.idCounter[e]&&(this.idCounter[e]=0),this.idCounter[e]+=1,`${e}_${this.idCounter[e]}`}}},5001:(e,t,n)=>{"use strict";var r,o;n.d(t,{K:()=>r,p:()=>o}),function(e){e.Unkown="UNKNOWN",e.Widget="WIDGET",e.Section="SECTION",e.ScreenGroup="SCREEN_GROUP"}(r||(r={})),function(e){e.FixedLayout="FIXED",e.FlowLayout="FLOW",e.GridLayout="GRID",e.ColumnLayout="COLUMN",e.RowLayout="ROW",e.AccordionLayout="ACCORDION",e.FlexRowLayout="FLEX_ROW"}(o||(o={}))},5032:(e,t,n)=>{const r=n(8311),o=n(3904),{ANY:i}=o,s=n(7638),a=n(560),l=[new o(">=0.0.0-0")],u=[new o(">=0.0.0")],c=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=n.includePrerelease?l:u}if(1===t.length&&t[0].semver===i){if(n.includePrerelease)return!0;t=u}const r=new Set;let o,c,f,h,g,m,v;for(const t of e)">"===t.operator||">="===t.operator?o=d(o,t,n):"<"===t.operator||"<="===t.operator?c=p(c,t,n):r.add(t.semver);if(r.size>1)return null;if(o&&c){if(f=a(o.semver,c.semver,n),f>0)return null;if(0===f&&(">="!==o.operator||"<="!==c.operator))return null}for(const e of r){if(o&&!s(e,String(o),n))return null;if(c&&!s(e,String(c),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let y=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver,S=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver;y&&1===y.prerelease.length&&"<"===c.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(v=v||">"===e.operator||">="===e.operator,m=m||"<"===e.operator||"<="===e.operator,o)if(S&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===S.major&&e.semver.minor===S.minor&&e.semver.patch===S.patch&&(S=!1),">"===e.operator||">="===e.operator){if(h=d(o,e,n),h===e&&h!==o)return!1}else if(">="===o.operator&&!s(o.semver,String(e),n))return!1;if(c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(g=p(c,e,n),g===e&&g!==c)return!1}else if("<="===c.operator&&!s(c.semver,String(e),n))return!1;if(!e.operator&&(c||o)&&0!==f)return!1}return!(o&&m&&!c&&0!==f)&&(!(c&&v&&!o&&0!==f)&&(!S&&!y))},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},p=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let o=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,n);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},5033:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M0 14.09 1.2 7h1.014l-1.09 6.437a9.5 9.5 0 0 0 2.669.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a7.2 7.2 0 0 0-2.27-.399 5.9 5.9 0 0 0-2.367.434q-.165.06-.339.12V1.506a6.9 6.9 0 0 1 2.706-.493 8.2 8.2 0 0 1 3.161.674L16 14.29a6.62 6.62 0 0 0-3.793-1.089c-3.665 0-4.749 1.6-8.414 1.6A9.2 9.2 0 0 1 0 14.089zM4 11V7h4V4h4v7zm4-2.5a.954.954 0 0 1-.995 1.062h-.002L7 10h1zm3 1.5v-.487A2.96 2.96 0 0 1 9.5 10zM9 7h2V5H9zm0 1v1h.5a2.7 2.7 0 0 0 1.5-.721V8zm-4 2h1v-.5c0-.574.312-.889.93-.936l.068-.005L7 8.5c.002-.173.043-.344.119-.5H5zM2 6V1h5v5zm1.564-2.19c.075-.288.228-.55.442-.756a.9.9 0 0 1 .74-.179c.077-.32.226-.62.436-.875H3v2.34a.56.56 0 0 0 .336-.09 1 1 0 0 0 .228-.44M6 2.56a1.26 1.26 0 0 0-.297.609 1 1 0 0 1-.279.544.87.87 0 0 1-.756.161l-.05-.009q-.065.135-.11.276c-.09.328-.268.625-.516.859H6z" clip-rule="evenodd"></path></svg>'},5055:(e,t,n)=>{"use strict";function r(e){return Object.keys(e).reduce(((t,n)=>{const r=e[n],o=r.constructor.name;return t[n]="Array"===o?JSON.stringify(r):r,t}),{})}n.d(t,{V:()=>r})},5074:(e,t,n)=>{"use strict";var r,o,i,s,a;n.d(t,{KI:()=>u,Kh:()=>i,Mg:()=>o,Yu:()=>r,Zc:()=>a,a0:()=>s,ee:()=>c,gQ:()=>d,ol:()=>l,zd:()=>p}),function(e){e.All="ALL",e.Simple="SIMPLE"}(r||(r={})),function(e){e.And="AND",e.Or="OR"}(o||(o={})),function(e){e.None="NONE",e.Previous="PREVIOUS",e.All="ALL"}(i||(i={})),function(e){e.StringOperatorIs="STRING_OPERATOR_IS",e.StringOperatorIsNot="STRING_OPERATOR_IS_NOT",e.StringOperatorContains="STRING_OPERATOR_CONTAINS",e.StringOperatorDoesNotContain="STRING_OPERATOR_DOES_NOT_CONTAIN",e.StringOperatorStartsWith="STRING_OPERATOR_STARTS_WITH",e.StringOperatorDoesNotStartWith="STRING_OPERATOR_DOES_NOT_START_WITH",e.StringOperatorEndsWith="STRING_OPERATOR_ENDS_WITH",e.StringOperatorDoesNotEndWith="STRING_OPERATOR_DOES_NOT_END_WITH",e.StringOperatorIsAnyOf="STRING_OPERATOR_IS_ANY_OF",e.StringOperatorIsNoneOf="STRING_OPERATOR_IS_NONE_OF",e.StringOperatorIsBlank="STRING_OPERATOR_IS_BLANK",e.StringOperatorIsNotBlank="STRING_OPERATOR_IS_NOT_BLANK",e.NumberOperatorIs="NUMBER_OPERATOR_IS",e.NumberOperatorIsNot="NUMBER_OPERATOR_IS_NOT",e.NumberOperatorIsAtLeast="NUMBER_OPERATOR_IS_AT_LEAST",e.NumberOperatorIsAtMost="NUMBER_OPERATOR_IS_AT_MOST",e.NumberOperatorIsLessThan="NUMBER_OPERATOR_IS_LESS_THAN",e.NumberOperatorIsGreaterThan="NUMBER_OPERATOR_IS_GREATER_THAN",e.NumberOperatorIsBetween="NUMBER_OPERATOR_IS_BETWEEN",e.NumberOperatorIsNotBetween="NUMBER_OPERATOR_IS_NOT_BETWEEN",e.NumberOperatorIsAnyOf="NUMBER_OPERATOR_IS_ANY_OF",e.NumberOperatorIsNoneOf="NUMBER_OPERATOR_IS_NONE_OF",e.NumberOperatorIsBlank="NUMBER_OPERATOR_IS_BLANK",e.NumberOperatorIsNotBlank="NUMBER_OPERATOR_IS_NOT_BLANK",e.DateOperatorIsOn="DATE_OPERATOR_IS_ON",e.DateOperatorIsNotOn="DATE_OPERATOR_IS_NOT_ON",e.DateOperatorIsIn="DATE_OPERATOR_IS_IN",e.DateOperatorIsNotIn="DATE_OPERATOR_IS_NOT_IN",e.DateOperatorIsBefore="DATE_OPERATOR_IS_BEFORE",e.DateOperatorIsAfter="DATE_OPERATOR_IS_AFTER",e.DateOperatorIsOnOrBefore="DATE_OPERATOR_IS_ON_OR_BEFORE",e.DateOperatorIsOnOrAfter="DATE_OPERATOR_IS_ON_OR_AFTER",e.DateOperatorIsInTheLast="DATE_OPERATOR_IS_IN_THE_LAST",e.DateOperatorIsNotInTheLast="DATE_OPERATOR_IS_NOT_IN_THE_LAST",e.DateOperatorIsInTheNext="DATE_OPERATOR_IS_IN_THE_NEXT",e.DateOperatorIsNotInTheNext="DATE_OPERATOR_IS_NOT_IN_THE_NEXT",e.DateOperatorIsBetween="DATE_OPERATOR_IS_BETWEEN",e.DateOperatorIsNotBetween="DATE_OPERATOR_IS_NOT_BETWEEN",e.DateOperatorIsBlank="DATE_OPERATOR_IS_BLANK",e.DateOperatorIsNotBlank="DATE_OPERATOR_IS_NOT_BLANK",e.DateOnlyOperatorIsOn="DATE_ONLY_OPERATOR_IS_ON",e.DateOnlyOperatorIsNotOn="DATE_ONLY_OPERATOR_IS_NOT_ON",e.DateOnlyOperatorIsBefore="DATE_ONLY_OPERATOR_IS_BEFORE",e.DateOnlyOperatorIsAfter="DATE_ONLY_OPERATOR_IS_AFTER",e.DateOnlyOperatorIsOnOrBefore="DATE_ONLY_OPERATOR_IS_ON_OR_BEFORE",e.DateOnlyOperatorIsOnOrAfter="DATE_ONLY_OPERATOR_IS_ON_OR_AFTER",e.DateOnlyOperatorIsBetween="DATE_ONLY_OPERATOR_IS_BETWEEN",e.DateOnlyOperatorIsNotBetween="DATE_ONLY_OPERATOR_IS_NOT_BETWEEN",e.DateOnlyOperatorIsBlank="DATE_ONLY_OPERATOR_IS_BLANK",e.DateOnlyOperatorIsNotBlank="DATE_ONLY_OPERATOR_IS_NOT_BLANK",e.TimeOnlyOperatorIsOn="TIME_ONLY_OPERATOR_IS_ON",e.TimeOnlyOperatorIsNotOn="TIME_ONLY_OPERATOR_IS_NOT_ON",e.TimeOnlyOperatorIsBefore="TIME_ONLY_OPERATOR_IS_BEFORE",e.TimeOnlyOperatorIsAfter="TIME_ONLY_OPERATOR_IS_AFTER",e.TimeOnlyOperatorIsOnOrBefore="TIME_ONLY_OPERATOR_IS_ON_OR_BEFORE",e.TimeOnlyOperatorIsOnOrAfter="TIME_ONLY_OPERATOR_IS_ON_OR_AFTER",e.TimeOnlyOperatorIsBetween="TIME_ONLY_OPERATOR_IS_BETWEEN",e.TimeOnlyOperatorIsNotBetween="TIME_ONLY_OPERATOR_IS_NOT_BETWEEN",e.TimeOnlyOperatorIsBlank="TIME_ONLY_OPERATOR_IS_BLANK",e.TimeOnlyOperatorIsNotBlank="TIME_ONLY_OPERATOR_IS_NOT_BLANK"}(s||(s={})),function(e){e.UserInput="USER_INPUT",e.Field="FIELD",e.SingleSelectFromUnique="UNIQUE",e.MultipleSelectFromUnique="MULTIPLE",e.SingleSelectFromPredefined="UNIQUE_PREDEFINED",e.MultipleSelectFromPredefined="MULTIPLE_PREDEFINED"}(a||(a={}));const l="-empty-";var u,c,d,p;!function(e){e.Single="SINGLE",e.Set="SET"}(u||(u={})),function(e){e.Inline="INLINE",e.Block="BLOCK"}(c||(c={})),function(e){e.None="NONE",e.UseAskForValue="USE_ASK_FOR_VALUE",e.UseLabel="USE_LABEL"}(d||(d={})),function(e){e.Asc="ASC",e.Desc="DESC"}(p||(p={}))},5157:(e,t,n)=>{"use strict";n.r(t),n.d(t,{IndexedDBCache:()=>o,getDBName:()=>a,whenRequest:()=>i,whenTransaction:()=>s});var r=n(1035);class o{constructor(e,t,n,r,o,i){this.db=null,this.closed=!1,this.dbName=a(e,t),this.storeName=n,this.version=r,this.indexName=o,this.indexKey=i}init(){return indexedDB?Promise.resolve().then((()=>{const e=indexedDB.open(this.dbName,this.version);return e.onupgradeneeded=()=>{const t=e.result;if(!t.objectStoreNames.contains(this.storeName)){const e=t.createObjectStore(this.storeName,{autoIncrement:!0});this.indexName&&e.createIndex(this.indexName,this.indexKey)}},i(e)})).then((e=>{this.closed?e.close():this.db=e})):Promise.reject(new Error(null))}initialized(){return null!=this.db}close(){this.db&&(this.db.close(),this.db=null),this.closed=!0}put(e,t){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(t,e)).then()}putObject(e){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).put(e))}putAllObject(e){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));const t=this.db.transaction([this.storeName],"readwrite");return e.forEach((e=>{t.objectStore(this.storeName).put(e)})),s(t)}putAll(e){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));const t=this.db.transaction([this.storeName],"readwrite");return e.forEach((e=>{t.objectStore(this.storeName).put(e.value,e.key)})),s(t)}get(e){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e))}getAllKeys(){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAllKeys())}getAll(){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll())}delete(e){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).delete(e))}deleteAll(e){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));const t=this.db.transaction([this.storeName],"readwrite");return e.forEach((e=>{t.objectStore(this.storeName).delete(e)})),s(t)}clear(){if(null==this.db)return Promise.reject(new Error("IndexedDB:not-initialized"));return i(this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).clear())}destroy(){this.db&&this.db.deleteObjectStore(this.storeName),this.close()}}function i(e){return new Promise(((t,n)=>{"done"===e.readyState?null!=e.error?n(e.error):t(e.result):(e.onsuccess=()=>{t(e.result)},e.onerror=()=>{n(e.error)})}))}function s(e){return new Promise(((t,n)=>{e.oncomplete=()=>{t()},e.onerror=()=>{n(e.error)},e.onabort=()=>{n(e.error)}}))}function a(e,t){var n,o;return`exb-${(null===(n=window.jimuConfig)||void 0===n?void 0:n.isBuilder)?null===(o=(0,r.Vp)().getState().appStateInBuilder)||void 0===o?void 0:o.appId:(0,r.Vp)().getState().appId}-${t}-${e}-cache`}},5160:(e,t,n)=>{"use strict";var r=n(8972);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useSyncExternalStore,s=r.useRef,a=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=l((function(){function e(e){if(!a){if(a=!0,i=e,e=r(e),void 0!==c&&p.hasValue){var t=p.value;if(c(t,e))return s=t}return s=e}if(t=s,o(i,e))return t;var n=r(e);return void 0!==c&&c(t,n)?(i=e,t):(i=e,s=n)}var i,s,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,c]);var f=i(e,d[0],d[1]);return a((function(){p.hasValue=!0,p.value=f}),[f]),u(f),f}},5175:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(2383),o=n(3098);const i=function(e){return(0,o.A)(e)&&"[object Arguments]"==(0,r.A)(e)};var s=Object.prototype,a=s.hasOwnProperty,l=s.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(e){return(0,o.A)(e)&&a.call(e,"callee")&&!l.call(e,"callee")};const c=u},5200:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)<=0},5208:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});const r=function(e){return e};const o=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var i=Math.max;const s=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=i(r.length-t,0),l=Array(a);++s<a;)l[s]=r[t+s];s=-1;for(var u=Array(t+1);++s<t;)u[s]=r[s];return u[t]=n(l),o(e,this,u)}};const a=function(e){return function(){return e}};var l=n(4171);const u=l.A?function(e,t){return(0,l.A)(e,"toString",{configurable:!0,enumerable:!1,value:a(t),writable:!0})}:r;var c=Date.now;const d=function(e){var t=0,n=0;return function(){var r=c(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const p=d(u);const f=function(e,t){return p(s(e,t,r),e+"")}},5254:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5323:(e,t,n)=>{var r=n(1100);e.exports=function(e,t){";"!==(e=r.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,o=!1,i=0,s=0,a="";function l(){if(!o){var n=r.trim(e.slice(i,s)),l=n.indexOf(":");if(-1!==l){var u=r.trim(n.slice(0,l)),c=r.trim(n.slice(l+1));if(u){var d=t(i,a.length,u,c,n);d&&(a+=d+"; ")}}}i=s+1}for(;s<n;s++){var u=e[s];if("/"===u&&"*"===e[s+1]){var c=e.indexOf("*/",s+2);if(-1===c)break;i=(s=c+1)+1,o=!1}else"("===u?o=!0:")"===u?o=!1:";"===u?o||l():"\n"===u&&l()}return r.trim(a)}},5338:(e,t,n)=>{"use strict";var r=n(2581);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},5342:(e,t,n)=>{const r=n(7075);e.exports=(e,t,n)=>r(e,t,"<",n)},5353:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=/^(?:0|[1-9]\d*)$/;const o=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},5566:(e,t,n)=>{"use strict";n.d(t,{Vq:()=>ue,e$:()=>Z,gO:()=>O,J$:()=>E,a:()=>ne,Dy:()=>m,jh:()=>re,iC:()=>F,kN:()=>U,W0:()=>se,D0:()=>A,B3:()=>K,Qw:()=>ae,BP:()=>I,uq:()=>le});var r=n(8168);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&o(i,n.prototype),i}(e,arguments,i(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)},a(e)}function l(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var u={symbols:{"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:l,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:l,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"}}},c=u;var d=function(e){var t,n;function r(t){return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this)}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(a(Error)),p=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function f(e,t){var n,r=e.pop();return t.push(r.f.apply(r,(n=[]).concat.apply(n,t.splice(-r.argCount)))),r.precedence}function h(e,t){var n,o=function(e){var t={};return t.symbols=e?(0,r.A)({},c.symbols,e.symbols):(0,r.A)({},c.symbols),t}(t),i=[o.symbols["("].prefix],s=[],a=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(o.symbols).map((function(e){return o.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");a.lastIndex=0;var l=!1;do{var u=(n=a.exec(e))||[")",void 0],p=u[0],h=u[1],g=o.symbols[p],m=g&&!g.prefix&&!g.func,v=!g||!g.postfix&&!g.infix;if(h||(l?v:m))throw new d(37,n?n.index:e.length,e);if(l){var y=g.postfix||g.infix;do{var S=i[i.length-1];if((y.precedence-S.precedence||S.rightToLeft)>0)break}while(f(i,s));l="postfix"===y.notation,")"!==y.symbol&&(i.push(y),l&&f(i,s))}else if(g){if(i.push(g.prefix||g.func),g.func&&(!(n=a.exec(e))||"("!==n[0]))throw new d(38,n?n.index:e.length,e)}else s.push(+p),l=!0}while(n&&i.length);if(i.length)throw new d(39,n?n.index:e.length,e);if(n)throw new d(40,n?n.index:e.length,e);return s.pop()}function g(e){return e.split("").reverse().join("")}function m(e,t){var n=g(e),r=n.match(p);if(r&&!r.every((function(e){return e===r[0]})))throw new d(41);return""+h(g(n.replace(p,"")),t)+(r?g(r[0]):"")}function v(e){return e.charAt(0).toUpperCase()+e.slice(1)}function y(e,t){return e.substr(-t.length)===t}var S=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function I(e){return"string"!=typeof e?e:e.match(S)?parseFloat(e):e}var b=function(e){return function(t,n){void 0===n&&(n="16px");var r=t,o=n;if("string"==typeof t){if(!y(t,"px"))throw new d(69,e,t);r=I(t)}if("string"==typeof n){if(!y(n,"px"))throw new d(70,e,n);o=I(n)}if("string"==typeof r)throw new d(71,t,e);if("string"==typeof o)throw new d(72,n,e);return""+r/o+e}},w=(b("em"),/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/);function E(e){if("string"!=typeof e)return[e,""];var t=e.match(w);return t?[parseFloat(e),t[2]]:[e,void 0]}var A=b("rem");function O(e,t){void 0===t&&(t=1);var n={display:"inline-block",maxWidth:e||"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"};return t>1?(0,r.A)({},n,{WebkitBoxOrient:"vertical",WebkitLineClamp:t,display:"-webkit-box",whiteSpace:"normal"}):n}function C(e){return Math.round(255*e)}function T(e,t,n){return C(e)+","+C(t)+","+C(n)}function x(e,t,n,r){if(void 0===r&&(r=T),0===t)return r(n,n,n);var o=(e%360+360)%360/60,i=(1-Math.abs(2*n-1))*t,s=i*(1-Math.abs(o%2-1)),a=0,l=0,u=0;o>=0&&o<1?(a=i,l=s):o>=1&&o<2?(a=s,l=i):o>=2&&o<3?(l=i,u=s):o>=3&&o<4?(l=s,u=i):o>=4&&o<5?(a=s,u=i):o>=5&&o<6&&(a=i,u=s);var c=n-i/2;return r(a+c,l+c,u+c)}var R={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var P=/^#[a-fA-F0-9]{6}$/,D=/^#[a-fA-F0-9]{8}$/,_=/^#[a-fA-F0-9]{3}$/,L=/^#[a-fA-F0-9]{4}$/,M=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,k=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,N=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,j=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function U(e){if("string"!=typeof e)throw new d(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return R[t]?"#"+R[t]:e}(e);if(t.match(P))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(D)){var n=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:n}}if(t.match(_))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(L)){var r=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:r}}var o=M.exec(t);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var i=k.exec(t.substring(0,50));if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])>1?parseFloat(""+i[4])/100:parseFloat(""+i[4])};var s=N.exec(t);if(s){var a="rgb("+x(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",l=M.exec(a);if(!l)throw new d(4,t,a);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var u=j.exec(t.substring(0,50));if(u){var c="rgb("+x(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",p=M.exec(c);if(!p)throw new d(4,t,c);return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10),alpha:parseFloat(""+u[4])>1?parseFloat(""+u[4])/100:parseFloat(""+u[4])}}throw new d(5)}function F(e){return function(e){var t,n=e.red/255,r=e.green/255,o=e.blue/255,i=Math.max(n,r,o),s=Math.min(n,r,o),a=(i+s)/2;if(i===s)return void 0!==e.alpha?{hue:0,saturation:0,lightness:a,alpha:e.alpha}:{hue:0,saturation:0,lightness:a};var l=i-s,u=a>.5?l/(2-i-s):l/(i+s);switch(i){case n:t=(r-o)/l+(r<o?6:0);break;case r:t=(o-n)/l+2;break;default:t=(n-r)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:u,lightness:a,alpha:e.alpha}:{hue:t,saturation:u,lightness:a}}(U(e))}var B=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function $(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function V(e){return $(Math.round(255*e))}function G(e,t,n){return B("#"+V(e)+V(t)+V(n))}function W(e,t,n){return x(e,t,n,G)}function H(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return W(e,t,n);if("object"==typeof e&&void 0===t&&void 0===n)return W(e.hue,e.saturation,e.lightness);throw new d(1)}function q(e,t,n,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?W(e,t,n):"rgba("+x(e,t,n)+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?W(e.hue,e.saturation,e.lightness):"rgba("+x(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new d(2)}function z(e,t,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)return B("#"+$(e)+$(t)+$(n));if("object"==typeof e&&void 0===t&&void 0===n)return B("#"+$(e.red)+$(e.green)+$(e.blue));throw new d(6)}function K(e,t,n,r){if("string"==typeof e&&"number"==typeof t){var o=U(e);return"rgba("+o.red+","+o.green+","+o.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r)return r>=1?z(e,t,n):"rgba("+e+","+t+","+n+","+r+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===r)return e.alpha>=1?z(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new d(7)}function J(e){if("object"!=typeof e)throw new d(8);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha}(e))return K(e);if(function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return z(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha}(e))return q(e);if(function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)}(e))return H(e);throw new d(8)}function Y(e,t,n){return function(){var r=n.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):Y(e,t,r)}}function Q(e){return Y(e,e.length,[])}Q((function(e,t){if("transparent"===t)return t;var n=F(t);return J((0,r.A)({},n,{hue:n.hue+parseFloat(e)}))}));function X(e,t,n){return Math.max(e,Math.min(t,n))}var Z=Q((function(e,t){if("transparent"===t)return t;var n=F(t);return J((0,r.A)({},n,{lightness:X(0,1,n.lightness-parseFloat(e))}))}));Q((function(e,t){if("transparent"===t)return t;var n=F(t);return J((0,r.A)({},n,{saturation:X(0,1,n.saturation-parseFloat(e))}))}));function ee(e){if("transparent"===e)return 0;var t=U(e),n=Object.keys(t).map((function(e){var n=t[e]/255;return n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)})),r=n[0],o=n[1],i=n[2];return parseFloat((.2126*r+.7152*o+.0722*i).toFixed(3))}function te(e,t){var n=ee(e),r=ee(t);return parseFloat((n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)).toFixed(2))}var ne=Q((function(e,t){if("transparent"===t)return t;var n=F(t);return J((0,r.A)({},n,{lightness:X(0,1,n.lightness+parseFloat(e))}))}));var re=Q((function(e,t,n){if("transparent"===t)return n;if("transparent"===n)return t;if(0===e)return n;var o=U(t),i=(0,r.A)({},o,{alpha:"number"==typeof o.alpha?o.alpha:1}),s=U(n),a=(0,r.A)({},s,{alpha:"number"==typeof s.alpha?s.alpha:1}),l=i.alpha-a.alpha,u=2*parseFloat(e)-1,c=((u*l==-1?u:u+l)/(1+u*l)+1)/2,d=1-c;return K({red:Math.floor(i.red*c+a.red*d),green:Math.floor(i.green*c+a.green*d),blue:Math.floor(i.blue*c+a.blue*d),alpha:i.alpha*parseFloat(e)+a.alpha*(1-parseFloat(e))})}));Q((function(e,t){if("transparent"===t)return t;var n=U(t),o="number"==typeof n.alpha?n.alpha:1;return K((0,r.A)({},n,{alpha:X(0,1,(100*o+100*parseFloat(e))/100)}))}));var oe="#000",ie="#fff";function se(e,t,n,r){void 0===t&&(t=oe),void 0===n&&(n=ie),void 0===r&&(r=!0);var o=ee(e)>.179,i=o?t:n;return!r||te(e,i)>=4.5?i:o?oe:ie}Q((function(e,t){if("transparent"===t)return t;var n=F(t);return J((0,r.A)({},n,{saturation:X(0,1,n.saturation+parseFloat(e))}))}));Q((function(e,t){return"transparent"===t?t:J((0,r.A)({},F(t),{hue:parseFloat(e)}))}));Q((function(e,t){return"transparent"===t?t:J((0,r.A)({},F(t),{lightness:parseFloat(e)}))}));Q((function(e,t){return"transparent"===t?t:J((0,r.A)({},F(t),{saturation:parseFloat(e)}))}));var ae=Q((function(e,t){return"transparent"===t?t:re(parseFloat(e),"rgb(0, 0, 0)",t)}));var le=Q((function(e,t){return"transparent"===t?t:re(parseFloat(e),"rgb(255, 255, 255)",t)}));Q((function(e,t){if("transparent"===t)return t;var n=U(t),o="number"==typeof n.alpha?n.alpha:1;return K((0,r.A)({},n,{alpha:X(0,1,+(100*o-100*parseFloat(e)).toFixed(2)/100)}))}));function ue(e,t){var n,r,o=v(e);if(!t&&0!==t)throw new d(62);if("Top"===o||"Bottom"===o)return(n={})["border"+o+"RightRadius"]=t,n["border"+o+"LeftRadius"]=t,n;if("Left"===o||"Right"===o)return(r={})["borderTop"+o+"Radius"]=t,r["borderBottom"+o+"Radius"]=t,r;throw new d(63)}},5571:(e,t,n)=>{const r=n(7075);e.exports=(e,t,n)=>r(e,t,">",n)},5580:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)>0},5647:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(367).A)(Object.getPrototypeOf,Object)},5689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{fixPortalUrlProtocol:()=>E,getBaseGroupUrl:()=>s,getBaseItemUrl:()=>f,getBaseUserUrl:()=>g,getContentUrl:()=>v,getHomeIndexUrl:()=>b,getHomeMapViewerUrl:()=>w,getItemUrl:()=>h,getPlatformUrlByOrgUrl:()=>O,getPortalProxyUrl:()=>A,getPortalRestUrl:()=>l,getPortalSelfInfoUrl:()=>i,getPortalUrlFromLocation:()=>a,getPortalUrlFromRestUrl:()=>u,getStandardPortalUrl:()=>p,getUserContentUrl:()=>y,getUserItemsUrl:()=>S,getUserUrl:()=>m,isAGOLDomain:()=>d,isPlatformUrl:()=>C,isSamePortalUrl:()=>c,shareItemUrl:()=>I});var r=n(4262),o=n(3702);function i(e){let t="",n=e||"";return n=p(n),n&&(t=n+"/sharing/rest/portals/self"),t}function s(e){let t="";const n=p(e);return n&&(t=n+"/sharing/rest/community/groups"),t}function a(){const e=`${window.location.protocol}//${window.location.host}${function(){const e=window.location.href.split("?")[0];let t=e.indexOf("/home/");t<0&&(t=e.indexOf("/apps/"));let n=e.substring(e.indexOf(window.location.host)+window.location.host.length+1,t);"/"!==n&&(n="/"+n+"/");return n}()}`;return e.substr(0,e.length-1)}function l(e){return/\/$/.test(e)?`${e}sharing/rest`:`${e}/sharing/rest`}function u(e){const t=/\/$/.test(e)?"/sharing/rest/":"/sharing/rest";return e.substr(0,e.length-t.length)}function c(e,t){const n=/^http(s?):\/\//gi,r=/^\/\//gi;return(e=p(e).toLowerCase().replace(n,"").replace(r,""))===(t=p(t).toLowerCase().replace(n,"").replace(r,""))}function d(e){return r.getUrlHost(e).includes(".arcgis.com")}function p(e){const t=r.getUrlHost(e);return""===t?"":d(t)?r.setProtocol(t,o.cy.Https):(e=(e||"").trim().replace(/sharing(.*)/gi,"").replace(/\/*$/g,""),r.setProtocol(e,o.cy.Https))}function f(e){let t="";const n=p(e);return n&&(t=n+"/sharing/rest/content/items"),t}function h(e,t){let n="";const r=f(e);return r&&t&&(n=r+"/"+t),n}function g(e){let t="";const n=p(e);return n&&(t=n+"/sharing/rest/community/users"),t}function m(e,t){let n="";const r=g(e);return e&&t&&(n=r+"/"+t),n}function v(e){let t="";return e&&(t=(e=p(e))+"/sharing/rest/content"),t}function y(e,t,n){let r="",o="";return e&&t&&(r=v(e),o=n?r+"/users/"+t+"/"+n:r+"/users/"+t),o}function S(e,t,n){let r="",o="";return e&&t&&(r=y(e,t,n),o=r+"/items"),o}function I(e,t,n,r){let o="",i="";return e&&t&&(o=S(e,t,r),i=o+"/"+n+"/share"),i}function b(e){let t="";const n=p(e);return n&&(t=n+"/home/index.html"),t}function w(e,t){let n="";const r=p(e);return r&&(n=r+"/home/webmap/viewer.html",n+=t?"?webmap="+t:"?useExisting=1"),n}function E(e){const t=window.location.protocol,n=r.getProtocol(e);return r.getProtocol(e)?t!==n&&t===o.cy.Https?r.setProtocol(e,o.cy.Https):e:r.setProtocol(e,t)}function A(e){return`${e}/sharing/proxy`}function O(e){if(!e)return e;if(d(e)){const t=r.getUrlHost(e),n=r.getProtocol(e),o=t.split("."),i=o[0];o.splice(0,1);const s=o.join(".");let a;return"devext"===i||"mapsdevext.arcgis.com"===s?a="devext.arcgis.com":"qaext"===i||"mapsqa.arcgis.com"===s?a="qaext.arcgis.com":"www"!==i&&"maps.arcgis.com"!==s||(a="www.arcgis.com"),a=a&&`${n?n+"//":""}${a}`,a}return e}function C(e){return e=r.getUrlHost(e),["devext.arcgis.com","qaext.arcgis.com","www.arcgis.com"].includes(e)}},5737:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m14 4-6 8-6-8z"></path></svg>'},5930:(e,t,n)=>{var r=n(9349);function o(e){var t,n=r.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=r.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function i(e){return"</"===e.slice(0,2)}var s=/[^a-zA-Z0-9\\_:.-]/gim;function a(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function l(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"'"===n||'"'===n?t:-1}}function u(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function c(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}t.parseTag=function(e,t,n){"use strict";var r="",s=0,a=!1,l=!1,u=0,c=e.length,d="",p="";e:for(u=0;u<c;u++){var f=e.charAt(u);if(!1===a){if("<"===f){a=u;continue}}else if(!1===l){if("<"===f){r+=n(e.slice(s,u)),a=u,s=u;continue}if(">"===f){r+=n(e.slice(s,a)),d=o(p=e.slice(a,u+1)),r+=t(a,r.length,d,p,i(p)),s=u+1,a=!1;continue}if('"'===f||"'"===f)for(var h=1,g=e.charAt(u-h);""===g.trim()||"="===g;){if("="===g){l=f;continue e}g=e.charAt(u-++h)}}else if(f===l){l=!1;continue}}return s<e.length&&(r+=n(e.substr(s))),r},t.parseAttr=function(e,t){"use strict";var n=0,o=0,i=[],d=!1,p=e.length;function f(e,n){if(!((e=(e=r.trim(e)).replace(s,"").toLowerCase()).length<1)){var o=t(e,n||"");o&&i.push(o)}}for(var h=0;h<p;h++){var g,m=e.charAt(h);if(!1!==d||"="!==m)if(!1===d||h!==o)if(/\s|\n|\t/.test(m)){if(e=e.replace(/\s|\n|\t/g," "),!1===d){if(-1===(g=a(e,h))){f(r.trim(e.slice(n,h))),d=!1,n=h+1;continue}h=g-1;continue}if(-1===(g=u(e,h-1))){f(d,c(r.trim(e.slice(n,h)))),d=!1,n=h+1;continue}}else;else{if(-1===(g=e.indexOf(m,h+1)))break;f(d,r.trim(e.slice(o+1,g))),d=!1,n=(h=g)+1}else d=e.slice(n,h),n=h+1,o='"'===e.charAt(n)||"'"===e.charAt(n)?n:l(e,h+1)}return n<e.length&&(!1===d?f(e.slice(n)):f(d,c(r.trim(e.slice(n))))),r.trim(i.join(" "))}},6018:(e,t,n)=>{var r=n(7043),o=n(3473);for(var i in(t=e.exports=function(e,t){return new o(t).process(e)}).FilterCSS=o,r)t[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},6028:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>c});const o=new Uint8Array(16);function i(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(o)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function a(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}const l={};function u(e,t,n,r,o,i,s=0){if(e.length<16)throw new Error("Random bytes length must be >= 16");if(i){if(s<0||s+16>i.length)throw new RangeError(`UUID byte range ${s}:${s+15} is out of buffer bounds`)}else i=new Uint8Array(16),s=0;t??=Date.now(),n??=0,r??=16383&(e[8]<<8|e[9]),o??=e.slice(10,16);const a=(1e4*(268435455&(t+=122192928e5))+n)%4294967296;i[s++]=a>>>24&255,i[s++]=a>>>16&255,i[s++]=a>>>8&255,i[s++]=255&a;const l=t/4294967296*1e4&268435455;i[s++]=l>>>8&255,i[s++]=255&l,i[s++]=l>>>24&15|16,i[s++]=l>>>16&255,i[s++]=r>>>8|128,i[s++]=255&r;for(let e=0;e<6;++e)i[s++]=o[e];return i}const c=function(e,t,n){let r;const o=e?._v6??!1;if(e){const t=Object.keys(e);1===t.length&&"_v6"===t[0]&&(e=void 0)}if(e)r=u(e.random??e.rng?.()??i(),e.msecs,e.nsecs,e.clockseq,e.node,t,n);else{const e=Date.now(),s=i();!function(e,t,n){e.msecs??=-1/0,e.nsecs??=0,t===e.msecs?(e.nsecs++,e.nsecs>=1e4&&(e.node=void 0,e.nsecs=0)):t>e.msecs?e.nsecs=0:t<e.msecs&&(e.node=void 0);e.node||(e.node=n.slice(10,16),e.node[0]|=1,e.clockseq=16383&(n[8]<<8|n[9]));e.msecs=t}(l,e,s),r=u(s,l.msecs,l.nsecs,o?void 0:l.clockseq,o?void 0:l.node,t,n)}return t??a(r)}},6048:(e,t,n)=>{"use strict";n.d(t,{t4:()=>m,Cv:()=>T,dF:()=>v,Ag:()=>g,Ay:()=>x});var r=n(6888),o=n(4820),i=n(1035),s=n(2089),a=n(806),l=n(4262),u=n(5689),c=n(476),d=n(2159),p=n(3702),f=n(3096);function h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var g,m,v,y=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=h({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",h({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,h({},this.attributes,t))},withConverter:function(t){return e(h({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"}),S=n(4502),I=n(6962),b=n(4419),w=n(3982),E=n(903),A=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.TokenRequired="TOKEN_REQUIRED",e.InvalidToken="INVALID_TOKEN",e.NoPermission="NO_PERMISSION",e.SignInCanceled="SIGN_IN_CANCELED",e.Other="OTHER"}(g||(g={})),function(e){e.ArcGISJSAPISync="ARCGIS_JSAPI",e.PostMessageSync="POST_MESSAGE",e.OtherWindowSync="OTHER_WINDOW",e.AddOrUpdate="ADD_OR_UPDATE",e.Remove="REMOVE"}(m||(m={})),function(e){e.PortalSession="PORTAL_SESSION",e.ServerSessionFederated="SERVER_SESSION_FEDERATED",e.ServerSessionStandAlone="SERVER_SESSION_STAND_ALONE",e.ServerSessionStandAloneWebTier="SERVER_SESSION_STAND_ALONE_WEB_TIER"}(v||(v={}));const O=12e5,C=!0;class T{getMainSession(){var e;if(!this.sessions||!this.getMainPortal())return null;const t=this.sessions[this.getSessionKeyFromUrl(null===(e=this.getMainPortal())||void 0===e?void 0:e.portalUrl)];return this.isSessionExpired(t)?null:t}getSessions(){if(!this.sessions)return[];const e={};return Object.keys(this.sessions).forEach((t=>{const n=this.sessions[t];this.isSessionExpired(n)?n.canRefresh&&(e[t]=n):e[t]=n})),this.sessions=e,Object.keys(this.sessions).map((e=>this.sessions[e]))}clearSessions(){delete this.sessions}onSessionChanged(e){if(this.onSessionChangedCallbacks){const t=this.getSessions();this.onSessionChangedCallbacks.forEach((n=>{n(t,e)}))}}static getInstance(){return T.instance||(T.instance=new T,window._sessionManager=T.instance,this.instance.isSigning=!1,this.instance.signInUrlFromQueue="",this.instance.signInQueue=[],this.instance.onSessionChangedCallbacks=[],this.instance.requestCacheForValidatingToken={},this.instance.signInDialogPendingList={},this.instance.noPermissionResourceInfoList={}),T.instance}constructor(){this.readSessionFromParentPromise=null,this.isMainSession=e=>{if(!e)return!1;if(this.isSessionExpired(e))return!1;const t=this.getSessionKeyFromUrl(e.portal),n=this.getMainPortal();return!(!(null==n?void 0:n.portalUrl)||t!==this.getSessionKeyFromUrl(null==n?void 0:n.portalUrl)||e.clientId!==(null==n?void 0:n.clientId))},this.processInvalidSignInSession=()=>{this.removeAuthInfo(),this.clearSessions()},this.gotoSignInPage=()=>{var e,t;const n=!window.jimuConfig.isSite&&!window.jimuConfig.isBuilder,r=`${window.location.pathname}${window.location.search}${window.location.hash}`;window.jimuConfig.isDevEdition&&(null===(t=null===(e=(0,i.Vp)().getState())||void 0===e?void 0:e.portalUrl)||void 0===t?void 0:t.includes("www.arcgis.com"))?this.gotoLandingPage():window.jimuConfig.isInPortal||window.jimuConfig.isBuilder||n?this.signIn({fromUrl:r,popup:!1}):this.gotoLandingPage()},this.gotoLandingPage=()=>{let e;if(window.jimuConfig.isDevEdition)e=`${location.protocol}//${location.host}${window.jimuConfig.mountPath}page/set-portalurl`;else{e=`${location.protocol}//${location.host}/page/landing`;const t=(0,i.Vp)().getState().queryObject;t.locale&&(e=(0,l.appendQueryParam)(e,"locale",t.locale)),t.__env__&&(e=(0,l.appendQueryParam)(e,"__env__",t.__env__))}0!==window.location.href.indexOf(e)&&(window.location.href=e)},this.gotoAuthErrorPage=(e=g.InvalidToken)=>{(0,i.Vp)().dispatch((0,o.hasPrivilegeChanged)(e))},this.handleAuthError=(e,...t)=>A(this,[e,...t],void 0,(function*(e,t=!0){const n=e.options,o=e instanceof r.ArcGISAuthError&&n&&(!n.authentication||498===e.code||"AUTHENTICATION_ERROR_CODE"===e.code),i=e instanceof r.ArcGISRequestError&&!n.authentication;if(o||i){const n=this.getSessionKeyFromUrl(e.url);return this.sessions&&this.sessions[n]&&delete this.sessions[n],yield this.signIn({fromUrl:window.location&&window.location.href,popup:t,desUrl:e.url})}throw new Error(e)})),this.onMessage=e=>{var t,n,r;if("arcgis:auth:requestCredential"===e.data.type){if(!this.canPostSessionTo(e.origin))return;try{const r={dev:/.*dev\.arcgis\.com$/,qa:/.*qa\.arcgis\.com$/,prod:/.*\.arcgis\.com$/};let o;const i=(0,l.getUrlHost)(e.origin);o=r.dev.test(i)?"https://devext.arcgis.com":r.qa.test(i)?"https://qaext.arcgis.com":r.prod.test(i)?"https://www.arcgis.com":null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl;const s=this.getSessionByUrl(o);if(!s)return void e.source.postMessage({type:"arcgis:auth:error",error:{name:"NoCredential",message:"Does not find credential."}},e.origin);let a=s.toCredential();a.server=a.server.replace("/sharing/rest",""),null===(n=e.source)||void 0===n||n.postMessage({type:"arcgis:auth:credential",credential:a},e.origin)}catch(t){null===(r=e.source)||void 0===r||r.postMessage({type:"arcgis:auth:error",error:{name:t.name,message:t.message}},e.origin),console.error("Response requestCredential error.",t)}}else if("arcgis:auth:credential"===e.data.type){const t=(0,i.Vp)().getState().queryObject["arcgis-auth-origin"];if(!(e.origin===window.location.origin||e.origin===t)||!e.data.credential)return;this.addFromCredential(e.data.credential,m.PostMessageSync).then((e=>{this.readSessionFromParentPromise&&this.readSessionFromParentPromise.resolve(e)})).catch((e=>{console.error("Get session from parent error.",e),this.readSessionFromParentPromise&&this.readSessionFromParentPromise.resolve(null)}))}},this.onMessage=this.onMessage.bind(this),window.addEventListener("message",this.onMessage,!1),this.clientIdDialogResultPromises={},window.jimuConfig.isInBuilder&&(0,i.Yz)(((e,t)=>{void 0===e?(0,d.validateConnectionsOfAppConfig)():t.some((e=>{const t=this.getSessionKeyFromUrl(e.portalUrl);return!!this.clientIdDialogResultPromises[t]&&(this.onClientIdDialogFinished(e.portalUrl,e.clientId),!0)}))}),["appConfig","connections"]),window.jimuConfig.isInBuilder||(window.addEventListener("visibilitychange",(e=>{"visible"===document.visibilityState&&(console.debug("^^^^ check session expiration when current page is visible"),this.refreshSessions())})),setInterval((()=>{this.refreshSessions()}),O))}needToRefreshSession(e){const t=(new Date).getTime();return e.tokenExpires-t<=O}refreshFederatedSessionsBelongToThePortalSession(e,t){return A(this,void 0,void 0,(function*(){const n=[];return Object.values(this.sessions||{}).forEach((r=>{if(r.portal&&r.server&&r.portal===e.portal){console.debug("---- try refreshing session, ","current time: ",new Date,` expiration time: ${r.tokenExpires}`," - ",`portal: ${r.portal}`,`server: ${r.server||""}`);const o=(0,l.setProtocol)((0,l.getUrlHost)(window.location.href),p.cy.Https),i=`serverUrl=${r.server}&referer=${o}&token=${e.token}`;n.push(this.generateToken((0,u.getPortalUrlFromRestUrl)(r.portal),i,t).then((e=>(e?r.updateToken(e.token,new Date(e.expires)):console.warn("Refresh sessions failed: generate token info is null"),Promise.resolve()))).catch((e=>(console.warn("Refresh sessions failed: generate token request failed",e),Promise.resolve()))))}})),Promise.allSettled(n)}))}refreshPortalSession(e){return A(this,void 0,void 0,(function*(){return e.canRefresh?e.refreshCredentials().then((()=>(this.isMainSession(e)&&this.writeAuthInfo(e),this.refreshFederatedSessionsBelongToThePortalSession(e)))).catch((e=>(console.warn("Refresh sessions failed: refresh credentials request failed",e),Promise.reject(new Error(e))))):(console.warn("Refresh sessions failed: session cannot be refreshed"),Promise.reject(new Error(null)))}))}refreshWebTierPortalSession(e){return A(this,void 0,void 0,(function*(){return this.getSessionFromWebTierPortal((0,u.getPortalUrlFromRestUrl)(e.portal)).then((t=>t?(this.isMainSession(e)&&this.writeAuthInfo(t),e.updateToken(t.token,t.tokenExpires),this.refreshFederatedSessionsBelongToThePortalSession(t,"include")):(console.warn("Refresh webTier portal sessions failed: generate webTier portal token failed"),Promise.reject(new Error(null)))))}))}refreshSessions(){const e=[];console.debug("==== check session expiration, ","current time: ",new Date),Object.values(this.sessions||{}).forEach((t=>{if(t.portal&&!t.server)if(t.canRefresh&&this.needToRefreshSession(t)){console.debug("---- try refreshing session, ","current time: ",new Date,` expiration time: ${t.tokenExpires}`," - ",`portal: ${t.portal}`,`server: ${t.server||""}`);const n=this.refreshPortalSession(t).catch((()=>(console.warn("Refresh sessions failed: try a second request"),this.refreshPortalSession(t).catch((()=>(console.warn("Refresh sessions failed: try a second request and it fails"),Promise.resolve()))))));e.push(n)}else{const{portalUrl:n,isWebTier:r}=(0,i.Vp)().getState();if((r&&(0,u.isSamePortalUrl)(t.portal,n)||this.isTrustedServer(t.portal))&&this.needToRefreshSession(t)){console.debug("---- try refreshing webTier portal session, ","current time: ",new Date,` expiration time: ${t.tokenExpires}`," - ",`portal: ${t.portal}`,`server: ${t.server||""}`);const n=this.refreshWebTierPortalSession(t).catch((()=>Promise.resolve()));e.push(n)}else{const e=t.canRefresh?"session has not expired":"session cannot be refreshed";console.debug(`**** ${e}, `,"current time: ",new Date,` expiration time: ${t.tokenExpires}`," - ",`portal: ${t.portal}`,`server: ${t.server||""}`)}}})),Promise.allSettled(e).then((e=>{(null==e?void 0:e.length)>0&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(m.AddOrUpdate))}))}initSession(){return A(this,void 0,void 0,(function*(){const e=window.location.pathname;if(new RegExp(`^${window.jimuConfig.mountPath}page/set-portalurl`).test(e)||/^\/page\/landing/.test(e))return Promise.resolve();const t=(0,i.Vp)().getState().queryObject["arcgis-auth-origin"];return t?this.readSessionFromParent(t).then((e=>{this.readSessionFromParentPromise=null})):this.initSessionFromCookieOrStorage().then((()=>{this.refreshSessions()}))}))}initSessionFromCookieOrStorage(){return A(this,void 0,void 0,(function*(){var e;const t=this.getMainPortal();if(!t)return;let n=(0,u.getPortalRestUrl)(t.portalUrl);(0,l.getProtocol)(n)||(n=(0,l.setProtocol)(n,p.cy.Https));const o=this.isValidTokenFromStorage(t.portalUrl),i=(0,r.platformSelf)(null==t?void 0:t.clientId,n,n).then((e=>e)).catch((()=>null)),[s,a]=yield null===(e=Promise.allSettled([o,i]))||void 0===e?void 0:e.then((e=>e.map((e=>null==e?void 0:e.value)))),c=yield this.getSessionFromStorage();if(c){const e=this.getSessionKeyFromUrl(c.portal);s&&a?c.username===a.username?this.setSession(e,c):this.setSessionByPlatformSelfResponse(a,t):!s&&a?this.setSessionByPlatformSelfResponse(a,t):s&&!a&&(!(0,u.isAGOLDomain)(window.location.host)||window.jimuConfig.isDevEdition||this.readCookie("esri_locale"))?this.setSession(e,c):this.failedToInitSession()}else a?this.setSessionByPlatformSelfResponse(a,t):this.failedToInitSession()}))}failedToInitSession(){if(this.processInvalidSignInSession(),window.jimuConfig.isSite||window.jimuConfig.isBuilder)throw this.gotoSignInPage(),new Error("Should signIn")}setSessionByPlatformSelfResponse(e,t){let n=(0,u.getPortalRestUrl)(t.portalUrl);(0,l.getProtocol)(n)||(n=(0,l.setProtocol)(n,p.cy.Https));const o={expires:(new Date).getTime()+1e3*e.expires_in,server:n,ssl:!0,token:e.token,userId:e.username};let i=r.ArcGISIdentityManager.fromCredential(o,{hasPortal:!1,hasServer:!1,server:""}),s=i.toJSON();s.clientId=t.clientId,i=new r.ArcGISIdentityManager(s);const a=this.getSessionKeyFromUrl(i.portal);this.setSession(a,i)}isValidTokenFromStorage(e){return A(this,void 0,void 0,(function*(){const t=yield this.getSessionFromStorage();if((null==t?void 0:t.token)&&e){const n=`${e}/sharing/rest`,r=(0,i.Vp)().getState().isWebTier?{credentials:"include"}:{};return this.isValidToken(n,t.token,r).then((e=>{var t;return!(!e.valid||!(null===(t=e.response)||void 0===t?void 0:t.currentVersion))}))}return Promise.resolve(!1)}))}isValidToken(e,t){return A(this,arguments,void 0,(function*(e,t,n={}){if(t){e=(0,l.removeSearchFromUrl)(e);const r=`${e=(0,c.getServiceRootUrl)(e)}?f=json&token=${t}`,o=`${e}_${t}`;if(this.requestCacheForValidatingToken[o])return this.requestCacheForValidatingToken[o];{const e=fetch(r,n).then((e=>e.json())).then((e=>(null==e?void 0:e.error)?{valid:!1,error:e.error}:{valid:!0,response:e,error:null})).catch((e=>(console.warn("failed to validate token."),{valid:!1,error:e})));return this.requestCacheForValidatingToken[o]=Promise.resolve(e),e}}return Promise.resolve({valid:!1,error:null})}))}isSameSession(e,t){var n,r;return!(!e||!t)&&(e.portal===t.portal&&e.server===t.server&&e.username===t.username&&e.clientId===t.clientId&&e.ssl===t.ssl&&e.token===t.token&&(null===(n=e.tokenExpires)||void 0===n?void 0:n.valueOf())===(null===(r=t.tokenExpires)||void 0===r?void 0:r.valueOf())&&e.refreshToken===t.refreshToken)}getUserInfo(){return A(this,void 0,void 0,(function*(){return(0,i.Vp)().getState().user?yield Promise.resolve((0,i.Vp)().getState().user.asMutable({deep:!0})):this.getMainSession()?yield this.getMainSession().getUser().then((e=>(this.afterGetUserInfo(e),e))):Promise.resolve(null)}))}afterGetUserInfo(e){(0,i.Vp)().dispatch((0,o.userSignIn)(e));const t=null===e.culture?"":e.culture;null!==S.readLocalStorage(f.USER_LOCALE_KEY)?S.readLocalStorage(f.USER_LOCALE_KEY)!==t&&(S.setLocalStorage(f.USER_LOCALE_KEY,t),(0,i.Vp)().dispatch((0,o.userLocaleChanged)(!0))):S.setLocalStorage(f.USER_LOCALE_KEY,t)}getMainPortal(){const e=(0,i.Vp)().getState();if(!e.portalUrl)return null;return{portalUrl:e.portalUrl,clientId:e.clientId,isWebTier:e.isWebTier}}getTrustedServers(){var e;const t=(0,i.Vp)().getState(),n=null===(e=null==t?void 0:t.portalSelf)||void 0===e?void 0:e.authorizedCrossOriginDomains;return!this.trustedServers&&n&&(this.trustedServers=n.map((e=>(0,l.setProtocol)((0,l.getUrlHost)(e),p.cy.Https)))),this.trustedServers||[]}isTrustedServer(e){return this.getTrustedServers().some((t=>e.includes(t)))}removeSession(e){if(!e)return!1;const t=this.getSessionKeyFromSession(e);return!!this.removeSessionByKey(t)&&(this.removeServerSessionsByPortalSession(e),this.syncToOtherWindowSessionManager(),this.onSessionChanged(m.Remove),!0)}removeSessionByKey(e){return!!e&&(this.sessions&&this.sessions[e]&&delete this.sessions[e],!0)}addOrReplaceSession(e){if(!e)return!1;if(this.doAddOrReplaceSession(e)){this.syncToOtherWindowSessionManager(),this.onSessionChanged(m.AddOrUpdate);const t=e.server?`${e.server}/rest/services`:e.portal;return this.releasePendingSignIn(t),!0}return!1}doAddOrReplaceSession(e){if(!e)return!1;const t=this.getSessionKeyFromSession(e);return!!t&&(this.setSession(t,e),!0)}setSession(e,t){var n;if(this.isSessionExpired(t))return;this.sessions||(this.sessions={});const r=this.sessions[e];if(this.removeServerSessionsByPortalSession(r),this.sessions[e]=t,e===this.getSessionKeyFromUrl(null===(n=this.getMainPortal())||void 0===n?void 0:n.portalUrl)&&((0,i.Vp)().getState().user||this.getUserInfo(),this.writeAuthInfo(t)),!(window.jimuConfig.isBuilder||t.portal&&t.server)){const e=(0,u.getStandardPortalUrl)(t.portal)||(0,c.getServerRootUrl)(t.server);(0,i.Vp)().dispatch((0,o.updateResourceSessions)(e,t.username))}}removeServerSessionsByPortalSession(e){if(e&&e.portal&&!e.server){this.getSessions().forEach((t=>{if(t.server&&t.portal===e.portal&&t.username===e.username){const e=this.getSessionKeyFromSession(t);this.removeSessionByKey(e)}}))}}getSessionByUrl(e){if(!this.sessions)return;let t=this.getSessionKeyFromUrl(e),n=this.sessions[t];if((null==n?void 0:n.server)&&(null==n?void 0:n.portal)){const e=this.getPortalKeyFromUrl(n.portal);n=this.sessions[e]}return n}getSessionKeyFromSession(e){return(null==e?void 0:e.server)?"server_"+(0,l.removeProtocol)(e.server).toLowerCase():this.getSessionKeyFromUrl(e.portal)}getSessionKeyFromUrl(e){return this.getServerKeyFromUrl(e)||this.getPortalKeyFromUrl(e)}getServerKeyFromUrl(e){const t=(0,c.isServerUrl)(e)?(0,l.removeProtocol)((0,c.getServerRootUrl)(e)):"";return(t?`server_${t}`:"").toLowerCase()}getPortalKeyFromUrl(e){var t,n;let r="";if((0,u.isAGOLDomain)(e))r=this.getStandardAGOLSessionKey(e)||"";else{const{customBaseUrl:o,urlKey:i}=this.getPortalUrlInfo(e)||{};if(r=`${i}.${o}`,null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl){const e=this.getPortalUrlInfo(null===(n=this.getMainPortal())||void 0===n?void 0:n.portalUrl);i===e.urlKey&&0===o.indexOf(e.customBaseUrl)&&(r=`${e.urlKey}.${e.customBaseUrl}`)}}return r.toLowerCase()}getPortalUrlInfo(e){if(!e)return null;let t=e.toLowerCase(),n="",r=t.indexOf("https://");0===r?n="https://":(r=t.indexOf("http://"),0===r&&(n="http://")),r=n.length;let o,i,s=t.indexOf("/sharing/rest",r);s=s<0?t.length:s,t=t.substring(r,s);const a=t.split(".");return o=a[0],a.splice(0,1),i=a.join("."),{urlKey:o,customBaseUrl:i,schema:n}}getSessionFromAuthInfo(e){var t;if(!this.checkAuthInfo(e))return null;const n=this.getPortalFromAuthInfo(e);return new r.ArcGISIdentityManager({clientId:null===(t=this.getMainPortal())||void 0===t?void 0:t.clientId,token:e.token,tokenExpires:new Date(e.expires),refreshToken:e.refreshToken,refreshTokenExpires:e.refreshTokenExpires?new Date(e.refreshTokenExpires):null,redirectUri:e.redirectUri,portal:n,username:e.email})}getSessionFromStorage(){return A(this,void 0,void 0,(function*(){var e;const t=null===(e=this.readAuthInfo("exb_auth"))||void 0===e?void 0:e.authInfo,n=this.getSessionFromAuthInfo(t);let r=null;if(n&&n.canRefresh&&this.isSessionExpired(n))try{yield n.refreshCredentials()}catch(e){return console.warn("failed to refresh the token in storage",e),Promise.resolve(null)}return n&&this.isMainSession(n)?r=n:n&&this.processInvalidSignInSession(),Promise.resolve(r)}))}readCookie(e){try{return y.get(e)}catch(e){console.error("Read cookie error.",e)}}getPortalFromAuthInfo(e){var t;if(window.jimuConfig.isInPortal)return`${null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl}/sharing/rest/`;const n=e.urlKey?`${e.urlKey}.`:"";let r=e.schema;r=r||"https://";let o=`${r}${n}${e.customBaseUrl}/sharing/rest/`;return"maps.arcgis.com"===e.customBaseUrl?o=`${r}www.arcgis.com/sharing/rest/`:"mapsdevext.arcgis.com"===e.customBaseUrl?o=`${r}devext.arcgis.com/sharing/rest/`:"mapsqa.arcgis.com"===e.customBaseUrl&&(o=`${r}qaext.arcgis.com/sharing/rest/`),o}isSessionExpired(e){return!e||new Date(e.tokenExpires)<new Date&&(console.debug("???? session has expired, ","current time: ",new Date,` expiration time: ${e.tokenExpires}`," - ",`portal: ${e.portal}`,`server: ${e.server||""}`),!0)}getAuthInfoFromSession(e){const{urlKey:t,customBaseUrl:n,schema:r}=this.getPortalUrlInfo(e.portal);return{portalApp:!1,email:e.username,token:e.token,expires:e.tokenExpires,refreshToken:e.refreshToken,refreshTokenExpires:e.refreshTokenExpires,redirectUri:e.redirectUri,urlKey:t,customBaseUrl:n,clientId:e.clientId,schema:r}}checkAuthInfo(e){if(!e)return!1;if(e.refreshTokenExpires){if(new Date(e.refreshTokenExpires)<new Date)return!1}else if(new Date(e.expires)<new Date)return!1;return!0}readAuthInfo(e){let t,n;try{n=JSON.parse(S.readLocalStorage(e))}catch(e){console.error("Parse localStorage auth error")}if(n)t={authInfo:n,from:"LocalStorage"};else{try{n=JSON.parse(S.readSessionStorage(e))}catch(e){console.error("Parse sessionStorage auth error")}t={authInfo:n,from:"SessionStorage"}}return t}writeAuthInfo(e){const t=this.readAuthInfo("exb_auth");this.removeAuthInfo(),"LocalStorage"===t.from||window.jimuConfig.isDevEdition||window.jimuConfig.isOutOfExb?S.setLocalStorage("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e))):S.setSessionStorage("exb_auth",JSON.stringify(this.getAuthInfoFromSession(e)))}removeAuthInfo(){S.removeFromLocalStorage("exb_auth"),S.removeFromSessionStorage("exb_auth")}getStandardAGOLSessionKey(e){if(!(0,u.isAGOLDomain)(e))return;let t,n;const r=(0,l.getUrlHost)(e).split(".");let o;return t=r[0],r.splice(0,1),n=r.join("."),"devext"===t||"mapsdevext.arcgis.com"===n?o="devext.arcgis.com":"qaext"===t||"mapsqa.arcgis.com"===n?o="qaext.arcgis.com":"www"===t||"maps.arcgis.com"===n?o="www.arcgis.com":(o="www.arcgis.com",t.indexOf("dev")>-1||n.indexOf("dev")>-1?o="devext.arcgis.com":(t.indexOf("qa")>-1||n.indexOf("qa")>-1)&&(o="qaext.arcgis.com")),o}getOrgUrl(e,t){let n;return"www.arcgis.com"===e?n=`${t}.maps.arcgis.com`:"devext.arcgis.com"===e?n=`${t}.mapsdevext.arcgis.com`:"qaext.arcgis.com"===e?n=`${t}.mapsqa.arcgis.com`:(n=e,console.error("Bad params.",e,t)),(0,l.setProtocol)(n,p.cy.Https)}getHostedService(e){return A(this,void 0,void 0,(function*(){const t=e.split(/\/rest(\/admin)?\/services\//)[0];return t?yield(0,r.request)(t+"/rest/info",{httpMethod:"GET"}).then((e=>A(this,void 0,void 0,(function*(){if(!e.owningSystemUrl)return yield Promise.resolve(null);let t;return/https?:\/\/(www|services)\.arcgis\.com/.test(e.owningSystemUrl)?t="www.arcgis.com":/https?:\/\/(devext|servicesdev)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsdevext\.arcgis\.com\/?$/.test((0,i.Vp)().getState().portalUrl)?t="devext.arcgis.com":/https?:\/\/(qaext|servicesqa)\.arcgis\.com/.test(e.owningSystemUrl)&&/mapsqa\.arcgis\.com\/?$/.test((0,i.Vp)().getState().portalUrl)&&(t="qaext.arcgis.com"),yield Promise.resolve(t)})))):yield Promise.resolve(null)}))}getHostedServiceArcgisKey(e){return A(this,void 0,void 0,(function*(){const t=(0,l.getUrlHost)(e).split("."),n=t[0];let r;return t.splice(0,1),n.includes("servicesdev")?r="devext.arcgis.com":n.includes("servicesqa")?r="qaext.arcgis.com":n.includes("services")&&(r="www.arcgis.com"),r?yield Promise.resolve(r):yield this.getHostedService(e)}))}getSignInDomain(e,t){return A(this,void 0,void 0,(function*(){if(!e)return null;if((0,u.isAGOLDomain)(e)){let n=this.getStandardAGOLSessionKey(e);return n||(n=yield this.getHostedServiceArcgisKey(e),n=n||(0,l.getUrlHost)(e)),t?this.getOrgUrl(n,t):`https://${n}`}{const{customBaseUrl:t,urlKey:n,schema:r}=this.getPortalUrlInfo(e);return`${r||"https://"}${n}.${t}`}}))}signInByResourceUrl(e,t,n){let r,o;if((0,c.isServerUrl)(e))if(t)n&&(o=this.removeFromNoPermissionResourceInfoList(t)),r=this.signIn({desUrl:t,forceLogin:n,federatedServiceUrl:e});else{if(n){const t=(0,c.getServerRootUrl)(e);o=this.removeFromNoPermissionResourceInfoList(t)}r=this.nonOAuthSignIn(e,n)}else n&&(o=this.removeFromNoPermissionResourceInfoList((0,u.getStandardPortalUrl)(e))),r=this.signIn({desUrl:e,forceLogin:n});return r.catch((e=>{n&&o&&e.code===g.SignInCanceled&&this.setNoPermissionResourceInfoList(Object.assign(Object.assign({},this.noPermissionResourceInfoList),o))}))}signIn(){return A(this,arguments,void 0,(function*(e={}){var t,n,o,a,c;let d=e.fromUrl||window.jimuConfig.mountPath;const p=e.desUrl||(null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl),f=e.clientId||this.getClientIdByUrl(p),h=null===(n=e.popup)||void 0===n||n,m=null!==(o=e.forceLogin)&&void 0!==o&&o,v=e.federatedServiceUrl;"/"===d.split("#")[0]&&window.jimuConfig.isInPortal&&(d=window.location.pathname);const y=this.getSessionByUrl(p);if(y&&!m){if(this._executeSignIn(),!h){const e=0===d.indexOf("/");window.location.href=`${location.protocol}//${location.host}${e?"":"/"}${d}`}return v&&(yield this.generateSeverSessionByPortalSession(y,v)),Promise.resolve(y)}let S=!1;if(h){const e=this.tryToPendingSignInDialog(p);S=!!e,v&&this.tryToPendingSignInDialog(v);const t=this.signInUrlFromQueue&&this.getSessionKeyFromUrl(this.signInUrlFromQueue)===this.getSessionKeyFromUrl(p);if(e&&!t)return e.promise.then((()=>A(this,void 0,void 0,(function*(){this.isSigning=!1,v&&this.releasePendingSignIn(v),this._executeSignIn();const e=this.getSessionByUrl(p);return v&&(yield this.generateSeverSessionByPortalSession(e,v)),e})))).catch((e=>{const t=this.getSignInErrorCodeByAuthError(e);return v&&this.releasePendingSignIn(v,e),this._executeSignIn(),Promise.reject(this.getSignInErrorByCode(t))}))}const I=(0,i.Vp)().getState().queryObject;if(this.isSigning&&!S){const e=this.defer();return this.signInQueue.push({desUrl:p,fromUrl:d,popup:h,sessionDefer:e,federatedServiceUrl:v}),yield e.promise}const b=yield this.getSignInDomain(p,null==I?void 0:I.org);let E=(0,u.getPortalRestUrl)(b);const O=(0,l.getFolder)((0,s.resolveModuleFullPath)("jimu-core"));let T=`${window.location.origin}${O}/oauth-callback.html?clientId=${f}&portal=${E}&popup=${h}&isInPortal=${window.jimuConfig.isInPortal}&isDevEdition=${window.jimuConfig.isDevEdition}&isOutOfExb=${window.jimuConfig.isOutOfExb}&mountPath=${window.jimuConfig.mountPath}&enablePkce=true&fromUrl=${encodeURIComponent(d)}`;T=`${T}&redirectUri=${encodeURIComponent(T)}`,T=new URL(T).toString();const x={portal:E,clientId:f,redirectUri:T,popup:h,pkce:C,locale:null===(a=(0,i.Vp)().getState())||void 0===a?void 0:a.appContext.locale,params:{showSignupOption:!0,signupType:"esri",hideCancel:window.jimuConfig.isInPortal&&!h,force_login:m}};this.isSigning=!0;const R=new w.G,P=window.open.exbReplaced?null:window.open;if(P){const e=(e,t,n)=>{P&&(window.open=P);const r=P(e,t,n);if("oauth-window"===t){const e=r,t=setInterval((()=>{if(null==e?void 0:e.closed){const e=this.getSessionByUrl(E);this.releasePendingSignIn(p,e?null:{name:"identity-manager:user-aborted",details:"originally aborted from exb",message:"ABORTED"}),v&&this.releasePendingSignIn(v,e?null:{name:"identity-manager:user-aborted",details:"originally aborted from exb",message:"ABORTED"}),this.isSigning=!1,this._executeSignIn(),e?R.resolve(e):this.initSessionFromCookieOrStorage().then((()=>{const e=this.getSessionByUrl(E);e?R.resolve(e):R.reject(this.getSignInErrorByCode(g.SignInCanceled))})),clearInterval(t)}}),500)}return r};e.exbReplaced=!0,window.open=e}return null===(c=r.ArcGISIdentityManager.beginOAuth2(x))||void 0===c||c.then((e=>{this.addOrReplaceSession(e),this.isSigning=!1,this._executeSignIn(),R.resolve(e)})).catch((e=>{"ArcGISAccessDeniedError"!==e.name&&R.reject(this.getSignInErrorByCode(g.Other))})),R.promise.then((e=>A(this,void 0,void 0,(function*(){return v&&(yield this.generateSeverSessionByPortalSession(e,v)),e}))))}))}nonOAuthSignIn(e,t){return A(this,void 0,void 0,(function*(){return(0,a.e)(["esri/request"]).then((n=>{const[r]=n,o=this.getSessionByUrl(e);let i;if(t){o&&this.removeSession(o);const t=(0,c.getServerRootUrl)(e);i=this.removeFromNoPermissionResourceInfoList(t)}const s=t?"immediate":"auto";return e=(0,l.appendQueryParam)(e,"f","json"),r(e=t?(0,l.appendQueryParam)(e,"_exbForceLogin","true"):e,{authMode:s,responseType:"json"}).then((t=>this.getSessionByUrl(e))).catch((n=>{const r=this.getSessionByUrl(e);if(r)return Promise.resolve(r);{const e=this.getSignInErrorCodeByAuthError(n),r=this.getSignInErrorByCode(e);return t&&(o&&this.addOrReplaceSession(o),r.code===g.SignInCanceled&&this.setNoPermissionResourceInfoList(Object.assign(Object.assign({},this.noPermissionResourceInfoList),i))),Promise.reject(r)}}))}))}))}getSignInErrorCodeByAuthError(e){var t,n,r,o;const i=(null===(n=null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.error)||void 0===n?void 0:n.code)||e.code||(null===(o=null===(r=null==e?void 0:e.details)||void 0===r?void 0:r.raw)||void 0===o?void 0:o.code)||null;let s=null;return 499===i?s=g.TokenRequired:498===i?s=g.InvalidToken:403===i?s=g.NoPermission:"identity-manager:user-aborted"===e.name&&(s=g.SignInCanceled),s}getSignInErrorByCode(e=g.Other){const t=(0,I.getIntl)(),n={code:e,isSignInError:!0,message:t.formatMessage({id:"signInErrorDefault",defaultMessage:b.A.signInErrorDefault}),message1:t.formatMessage({id:"signInErrorEnterCredential",defaultMessage:b.A.signInErrorEnterCredential}),message2:t.formatMessage({id:"signInErrorTryAgain",defaultMessage:b.A.signInErrorTryAgain})};switch(e){case g.TokenRequired:case g.InvalidToken:case g.NoPermission:case g.SignInCanceled:break;default:n.code=g.Other}return n}getClientIdByUrl(e){var t;let n;const r=(0,i.Vp)().getState();n=(0,u.isSamePortalUrl)((0,u.getPlatformUrlByOrgUrl)(e),(0,u.getPlatformUrlByOrgUrl)(r.portalUrl))?r.clientId:null===(t=(0,d.getConnectionInfoFromAppConfig)(e))||void 0===t?void 0:t.clientId;const o=/.*\.arcgis\.com(?::(\d+))?(?=[\/?#]|$)/,s=window.location.host,a=(0,l.getUrlHost)(e),c=o.test(s),p=/.*\.esri\.com(?::(\d+))?(?=[\/?#]|$)/.test(s);return!n&&(c||p)&&o.test(a)&&(n="experienceBuilder"),n}onClientIdDialogFinished(e,t,n){const r=this.getSessionKeyFromUrl(e);this.clientIdDialogResultPromises[r]&&(n?this.clientIdDialogResultPromises[r].reject(null):this.clientIdDialogResultPromises[r].resolve(t))}getPortalVersionByUrl(e){return(0,r.request)((0,u.getPortalSelfInfoUrl)(e),{httpMethod:"GET"}).then((e=>Number(null==e?void 0:e.currentVersion))).catch((e=>(console.warn(e),null)))}useDialogToSetClientIdToConnectionsOfAppConfig(e){return A(this,void 0,void 0,(function*(){var t,n;let r;const a=this.getSessionKeyFromUrl(e);let l;this.clientIdDialogResultPromises[a]?l=this.clientIdDialogResultPromises[a]:(l={promise:null,resolve:null,reject:null},l.promise=new Promise(((e,t)=>{l.resolve=e,l.reject=t})));const u=window.location.host,c=/.*\.arcgis\.com(?::(\d+))?(?=[\/?#]|$)/.test(u),p=yield this.getPortalVersionByUrl(e),f=p>7.3;if(this.isTrustedServer(e))(0,d.setConnectionInfoToAppConfig)(e,"",p),r=Promise.resolve("");else if(c&&f)(0,d.setConnectionInfoToAppConfig)(e,"experienceBuilder",p),r=Promise.resolve("experienceBuilder");else if(window.jimuConfig.isBuilder)this.clientIdDialogResultPromises[a]=l,(0,i.Vp)().dispatch((0,o.addToRegisterClientIdList)(e)),r=null===(t=this.clientIdDialogResultPromises[a])||void 0===t?void 0:t.promise;else if(window.jimuConfig.isInBuilder){const t=(0,s.getModuleSync)("jimu-for-builder").appBuilderSync;this.clientIdDialogResultPromises[a]=l,t.publishPortalUrlNeedToRegisterClientId(e),r=null===(n=this.clientIdDialogResultPromises[a])||void 0===n?void 0:n.promise}else r=Promise.resolve();return r}))}addSessionChangeListener(e){if("function"!=typeof e)throw new Error("callback must be a function");this.onSessionChangedCallbacks.includes(e)||this.onSessionChangedCallbacks.push(e)}_executeSignIn(){if(!this.isSigning&&this.signInQueue){const e=this.signInQueue.pop();e&&(this.signInUrlFromQueue=e.desUrl,this.signIn({fromUrl:e.fromUrl,popup:e.popup,desUrl:e.desUrl,federatedServiceUrl:e.federatedServiceUrl}).then((t=>{e.sessionDefer.resolve(t)})).catch((t=>{e.sessionDefer.reject(t)})),this.signInUrlFromQueue="")}}signOut(){var e,t;const n=this.getMainSession();let r=null==n?void 0:n.portal;r||(r=null===(e=this.getMainPortal())||void 0===e?void 0:e.portalUrl,r=r&&(0,u.getPortalRestUrl)(r));const s=(null==n?void 0:n.clientId)||(null===(t=this.getMainPortal())||void 0===t?void 0:t.clientId);this.clearSessions(),(0,i.Vp)().dispatch((0,o.userSignOut)());const a=window&&window.location;let l;if(l=window.jimuConfig.isDevEdition?`${a.protocol}//${a.host}${window.jimuConfig.mountPath}page/set-portalurl`:window.jimuConfig.isInPortal?window.location.href:`${a.protocol}//${a.host}/page/landing`,this.removeAuthInfo(),this.arcgisJSIM&&this.arcgisJSIM.destroyCredentials(),r&&s){l=encodeURIComponent(l);const e=`${r}/oauth2/signout?client_id=${s}&redirect_uri=${l}`;a.href=e}else a.href="/"}switchAccount(){const{portalUrl:e,clientId:t}=(0,i.Vp)().getState(),n=`${e}/home/pages/Account/manage_accounts.html#client_id=${t}&redirect_uri=${window.location.href}#`;this.removeAuthInfo(),window.location.href=n}defer(){const e={promise:null,resolve:null,reject:null};return e.promise=new Promise(((t,n)=>{e.resolve=t,e.reject=n})),e}generateToken(e){return A(this,arguments,void 0,(function*(e,t="",n="same-origin"){const r=(0,l.setProtocol)(`${(0,u.getPortalRestUrl)(e)}/generateToken?f=json`,p.cy.Https),o=t||"",i={cache:"no-cache",credentials:n};return yield fetch(`${r}&${o}`,i).then((e=>A(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>e.error?null:e),(e=>null))}))}generateSeverSessionByPortalSession(e,t){return A(this,arguments,void 0,(function*(e,t,n="same-origin"){const o=(t||"").trim().replace(/rest(.*)/gi,"").replace(/\/*$/g,""),i=(0,l.setProtocol)((0,l.getUrlHost)(window.location.href),p.cy.Https),s=`serverUrl=${o}&referer=${i}&token=${e.token}`;return this.generateToken((0,u.getPortalUrlFromRestUrl)(e.portal),s,n).then((t=>{if(t){const n=new r.ArcGISIdentityManager({portal:e.portal,server:o,token:t.token,tokenExpires:new Date(t.expires),ssl:t.ssl,username:e.username});return this.addOrReplaceSession(n),n}return null}))}))}getPortalSelf(e){return A(this,void 0,void 0,(function*(){const t=(0,l.setProtocol)(`${(0,u.getPortalRestUrl)(e)}/portals/self?f=json`,p.cy.Https);return yield fetch(t,{cache:"no-cache",credentials:"include"}).then((e=>A(this,void 0,void 0,(function*(){return yield e.json()}))))}))}getSessionFromWebTierPortal(e,t,n){let o,i;return i=n?Promise.resolve(n):this.getPortalSelf(e),i.then((n=>A(this,void 0,void 0,(function*(){return o=n,yield this.generateToken(e,t,"include")})))).then((t=>{if(t&&t.token){const n={token:t.token,expires:t.expires,userId:o.user?o.user.username:"",ssl:t.ssl,server:(0,u.getPortalRestUrl)(e)},i={hasPortal:!1,hasServer:!1,server:""};return r.ArcGISIdentityManager.fromCredential(n,i)}return null})).catch((()=>null))}getSessionFromWebTierServer(e){return A(this,void 0,void 0,(function*(){if(!(0,c.isServiceUrl)(e))return Promise.resolve(null);const t=(0,c.getServerRootUrl)(e),n=this.getSessionByUrl(e);if(n)return yield Promise.resolve(n);{const n=(0,l.setProtocol)((0,l.getUrlHost)(window.location.href),p.cy.Https);return yield fetch(t+"/rest/info?f=json",{cache:"no-cache",credentials:"include"}).then((e=>A(this,void 0,void 0,(function*(){return yield e.json()})))).then((t=>A(this,void 0,void 0,(function*(){const o=t.owningSystemUrl;if(o){const t=`referer=${n}`;return this.getSessionFromWebTierPortal(o,t).then((t=>A(this,void 0,void 0,(function*(){if(t){this.addOrReplaceSession(t);const n=yield this.generateSeverSessionByPortalSession(t,e,"include");return n&&this.addOrReplaceSession(n),t}return null}))))}{const t=(0,c.getServerRootUrl)(e),n=`${t}/rest/self?f=json`,o=yield fetch(n,{credentials:"include"}).then((e=>A(this,void 0,void 0,(function*(){return yield e.json()}))));if(o){const e=(new Date).getTime()+31536e6,n=new r.ArcGISIdentityManager({server:t,token:"",tokenExpires:new Date(e),username:null==o?void 0:o.user.username});return n.portal=void 0,this.addOrReplaceSession(n),n}return null}})))).catch((e=>(console.warn("Failed to get session from trusted server."),null)))}}))}getSessionType(e){return e.portal&&e.server?v.ServerSessionFederated:e.server?e.token?v.ServerSessionStandAlone:v.ServerSessionStandAloneWebTier:e.portal?v.PortalSession:void 0}addFromCredential(e,t,n,o){return A(this,void 0,void 0,(function*(){var s;let a;if(!e.server)return null;if(e.token&&e.expires)if("server"===e.scope)a=new r.ArcGISIdentityManager({server:e.server,token:e.token,tokenExpires:new Date(e.expires),ssl:e.ssl,username:e.userId}),(null==n?void 0:n.owningSystemUrl)?a.portal=`${null==n?void 0:n.owningSystemUrl}/sharing/rest`:a.portal=void 0;else{const t=(0,u.getPortalRestUrl)(e.server);a=new r.ArcGISIdentityManager({portal:t,token:e.token,tokenExpires:new Date(e.expires),ssl:e.ssl,username:e.userId,clientId:null==o?void 0:o.appId,redirectUri:null==o?void 0:o.popupCallbackUrl,refreshToken:null===(s=null==o?void 0:o._oAuthCred)||void 0===s?void 0:s.refreshToken})}else{const{portalUrl:t,isWebTier:n}=(0,i.Vp)().getState(),r=n&&(0,u.isSamePortalUrl)(e.server,t);(this.isTrustedServer(e.server)||r)&&(a="server"===e.scope?yield this.getSessionFromWebTierServer(e.server):yield this.getSessionFromWebTierPortal(e.server))}const l=this.sessions?this.sessions[this.getSessionKeyFromSession(a)]:null;return!this.isSameSession(a,l)&&this.doAddOrReplaceSession(a)&&(this.syncToOtherWindowSessionManager(),this.onSessionChanged(t)),a}))}syncToOtherWindowSessionManager(){if(window.jimuConfig.isBuilder){(0,s.getModuleSync)("jimu-for-builder").builderAppSync.publishChangeSessionToApp()}else if(window.jimuConfig.isInBuilder){(0,s.getModuleSync)("jimu-for-builder").appBuilderSync.publishAppSessionChangeToBuilder()}}syncSessionsFromOtherWindow(e){this.clearSessions(),e.forEach((e=>{const t=e.toJSON(),n=new r.ArcGISIdentityManager(t);n.portal=e.portal,n.server=e.server,this.doAddOrReplaceSession(n)})),this.onSessionChanged(m.OtherWindowSync)}syncNoPermissionResourceInfoListToOtherWindowSessionManager(){if(window.jimuConfig.isBuilder){(0,s.getModuleSync)("jimu-for-builder").builderAppSync.publishNoPermissionResourceInfoListChangeToApp()}else if(window.jimuConfig.isInBuilder){(0,s.getModuleSync)("jimu-for-builder").appBuilderSync.publishNoPermissionResourceInfoListChangeToBuilder()}}syncNoPermissionResourceInfoListFromOtherWindow(e){this.noPermissionResourceInfoList=(0,E.A)(e),(0,i.Vp)().dispatch((0,o.updateNoPermissionResourceChangedFlag)())}readSessionFromParent(e){return A(this,void 0,void 0,(function*(){return this.readSessionFromParentPromise=new w.G,window.parent.postMessage({type:"arcgis:auth:requestCredential"},e),this.readSessionFromParentPromise.promise}))}canPostSessionTo(e){var t;const n=null===(t=window.trustedOrigins)||void 0===t?void 0:t.includes(e);return window.location.origin===e||e.endsWith(".arcgis.com")||n}tryToPendingSignInDialog(e){const t=this.getSessionKeyFromUrl(e);if(t){if(this.signInDialogPendingList[t])return this.signInDialogPendingList[t];{const e=new w.G;return this.signInDialogPendingList[t]=e,null}}return null}releasePendingSignIn(e,t){const n=this.getSessionKeyFromUrl(e),r=this.signInDialogPendingList[n];r&&(t?r.reject(t):r.resolve(null),delete this.signInDialogPendingList[n])}getNoPermissionResourceKey(e){let t;const n="/sharing/rest/content/items";if((0,c.isServiceUrl)(e))t=(0,c.getServiceRootUrl)(e);else{const r=(0,u.getPlatformUrlByOrgUrl)((0,u.getStandardPortalUrl)(e));if(e.includes(n)){const o=e.indexOf(n)+27,i=e.substr(o+1).split("/")[0];t=(0,u.getItemUrl)(r,i)}else t=null}return t}addToNoPermissionResourceInfoList(e,t,n,r,s){var a;const l=this.getNoPermissionResourceKey(e);if(!l)return;const c=this.noPermissionResourceInfoList[l],d=(0,u.isSamePortalUrl)((0,u.getPlatformUrlByOrgUrl)(null===(a=this.getMainPortal())||void 0===a?void 0:a.portalUrl),(0,u.getPlatformUrlByOrgUrl)((0,u.getStandardPortalUrl)(s||e)));c&&c.userName===t||(this.noPermissionResourceInfoList[l]={owningSystemUrl:s||"",userName:t||"",ignored:r||!1,signInErrorCode:n||g.Other,allowSignIn:!(d&&(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder))},this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),(0,i.Vp)().dispatch((0,o.updateNoPermissionResourceChangedFlag)()))}removeFromNoPermissionResourceInfoList(e){const t={},n=this.getNoPermissionResourceKey(e);let r=!1;this.noPermissionResourceInfoList[n]&&(t[n]=this.noPermissionResourceInfoList[n],delete this.noPermissionResourceInfoList[n],r=!0);const s=!this.getServerKeyFromUrl(e)&&(0,u.getStandardPortalUrl)(e)===e,a=(0,c.isServerUrl)(e)&&(0,c.getServerRootUrl)(e)===e;return(s||a)&&Object.entries(this.noPermissionResourceInfoList).forEach((n=>{const o=n[0];n[1].owningSystemUrl!==e&&(0,u.getStandardPortalUrl)(o)!==(0,u.getPlatformUrlByOrgUrl)(e)&&(0,c.getServerRootUrl)(o)!==e||(t[o]=this.noPermissionResourceInfoList[o],delete this.noPermissionResourceInfoList[o],r=!0)})),r?(this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),(0,i.Vp)().dispatch((0,o.updateNoPermissionResourceChangedFlag)()),t):null}ignoreFromNoPermissionResourceInfoList(e){let t=!1;if(!e)Object.entries(this.noPermissionResourceInfoList).forEach((e=>{const n=e[0];e[1].ignored||(this.noPermissionResourceInfoList[n].ignored=!0,t=!0)}));else{const n=!this.getServerKeyFromUrl(e),r=this.getNoPermissionResourceKey(e),o=(0,c.getServerRootUrl)(`${e}/rest/services`)===e;this.noPermissionResourceInfoList[r]&&(this.noPermissionResourceInfoList[r].ignored=!0,t=!0),(n||o)&&Object.entries(this.noPermissionResourceInfoList).forEach((n=>{const r=n[0],o=n[1],i=o.owningSystemUrl===(0,u.getPlatformUrlByOrgUrl)(e),s=(0,u.getStandardPortalUrl)(r)===(0,u.getPlatformUrlByOrgUrl)(e),a=(0,c.getServerRootUrl)(r)===e;!o.ignored&&(i||s||a)&&(this.noPermissionResourceInfoList[r].ignored=!0,t=!0)}))}t&&(this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),(0,i.Vp)().dispatch((0,o.updateNoPermissionResourceChangedFlag)()))}getNoPermissionResourceInfoList(){return this.noPermissionResourceInfoList}setNoPermissionResourceInfoList(e){this.noPermissionResourceInfoList=e,this.syncNoPermissionResourceInfoListToOtherWindowSessionManager(),(0,i.Vp)().dispatch((0,o.updateNoPermissionResourceChangedFlag)())}getNoPermissionResourceInfoByUrl(e){const t=this.getNoPermissionResourceKey(e);return this.noPermissionResourceInfoList[t]}checkSessionPermissionForUrl(e,t,n,r){e&&t&&this.isValidToken(e,t).then((t=>{var o,i;(null==t?void 0:t.valid)?this.removeFromNoPermissionResourceInfoList(e):403===(null===(o=null==t?void 0:t.error)||void 0===o?void 0:o.code)?this.addToNoPermissionResourceInfoList(e,n,g.NoPermission,!1,r):498===(null===(i=null==t?void 0:t.error)||void 0===i?void 0:i.code)&&this.addToNoPermissionResourceInfoList(e,n,g.InvalidToken,!1,r)}))}handleInvalidToken(e){var t,n;const r=(0,u.isSamePortalUrl)((0,u.getPlatformUrlByOrgUrl)(null===(t=this.getMainPortal())||void 0===t?void 0:t.portalUrl),(0,u.getPlatformUrlByOrgUrl)((0,u.getStandardPortalUrl)(e))),o=(0,i.Vp)().getState(),a=this.sessions&&this.sessions[this.getSessionKeyFromUrl(e)];if(this.removeSession(a),Object.keys(this.requestCacheForValidatingToken).forEach((t=>{t.includes((0,c.getServiceRootUrl)((0,l.removeSearchFromUrl)(e)))&&delete this.requestCacheForValidatingToken[t]})),r&&(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||(null===(n=o.appInfo)||void 0===n?void 0:n.access)&&"public"!==o.appInfo.access)&&(this.gotoAuthErrorPage(),window.jimuConfig.isInBuilder)){(0,s.getModuleSync)("jimu-for-builder").appBuilderSync.publishCheck498ErrorToBuilder(e)}}isSignInPromptBlocked(){var e,t;if(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder||window.jimuConfig.isSite)return!1;return null===(t=((null===(e=null===window||void 0===window?void 0:window.jimuConfig)||void 0===e?void 0:e.isBuilder)?(0,i.Vp)().getState().appStateInBuilder:(0,i.Vp)().getState()).appConfig.permission)||void 0===t?void 0:t.blockSignInPrompt}}const x=T},6090:(e,t,n)=>{"use strict";n.d(t,{W:()=>u,c:()=>c});var r=n(2910),o=n(3610),i=n(2089),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const a={},l={};function u(e){return s(this,void 0,void 0,(function*(){if(l[e])return l[e];let t=[];const n=r.A.getInstance().getExtensions(o.ExtensionPoints.DependencyDefine).filter((t=>t.getDependencyKey()===e))[0];if(n)t=t.concat(n.getResources());else{if(!/^http/.test(e))return console.error("Unknown dependency.",e),Promise.reject(Error(`Unknown dependency: ${e}.`));t.push({url:e})}const i=[];return t.forEach((e=>{a[e.url]?i.push(a[e.url]):i.push(d(e))})),l[e]=Promise.all(i).then((e=>{if(null==n?void 0:n.postInit)return n.postInit()}))}))}function c(e){return s(this,void 0,void 0,(function*(){return e.reduce(((e,t)=>s(this,void 0,void 0,(function*(){return e.then((()=>s(this,void 0,void 0,(function*(){return u(t)}))))}))),u(e[0]))}))}function d(e){return s(this,void 0,void 0,(function*(){if(e.dependencies&&e.dependencies.length>0)return Promise.all(e.dependencies.map((e=>s(this,void 0,void 0,(function*(){return d(e)}))))).then((()=>s(this,void 0,void 0,(function*(){return delete e.dependencies,d(e)}))));const t=e.url;return a[e.url]=(0,i.loadModule)(t),a[e.url]}))}},6170:(e,t,n)=>{const r=n(3908),o=n(144),{safeRe:i,t:s}=n(9718);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?i[s.COERCERTLFULL]:i[s.COERCERTL];let o;for(;(o=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&o.index+o[0].length===n.index+n[0].length||(n=o),r.lastIndex=o.index+o[1].length+o[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?i[s.COERCEFULL]:i[s.COERCE]);if(null===n)return null;const a=n[2],l=n[3]||"0",u=n[4]||"0",c=t.includePrerelease&&n[5]?`-${n[5]}`:"",d=t.includePrerelease&&n[6]?`+${n[6]}`:"";return o(`${a}.${l}.${u}${c}${d}`,t)}},6254:(e,t,n)=>{const r=n(3908);e.exports=(e,t)=>new r(e,t).minor},6300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},6319:(e,t,n)=>{"use strict";var r,o,i;n.d(t,{Wy:()=>r,bA:()=>o,h5:()=>i}),function(e){e.DataSelection="dataSelection"}(r||(r={})),function(e){e.Widgets="widgets",e.Data_s="data_s"}(o||(o={})),function(e){e.Id="id",e.Where="where",e.Geometry="geometry",e.SpatialRel="spatialRel"}(i||(i={}))},6374:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M2 0v9h1V1h7v4h4v4h1V3.6L11.4 0zm12 4h-3V1h.31L14 3.69zM1.5 13.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2M14.57 10h1.05l-1.615 5.059h-.994L11.421 10h1.047l1.044 3.317zM4 11v3h2v1H3v-5h3v1zm4 0v1h2v3H7v-1h2v-1H7v-3h3v1z" clip-rule="evenodd"></path></svg>'},6417:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>p,Kq:()=>c,ob:()=>d});var r=n(1635),o=n(4146),i=n.n(o),s=n(8972),a=n(4184);var l="undefined"==typeof window||window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?s.createContext(null):window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=s.createContext(null)),u=l.Consumer,c=l.Provider,d=l;function p(e,t){var n,o=t||{},l=o.intlPropName,c=void 0===l?"intl":l,d=o.forwardRef,p=void 0!==d&&d,f=o.enforceContext,h=void 0===f||f,g=function(t){return s.createElement(u,null,(function(n){var o;h&&(0,a.HM)(n);var i=((o={})[c]=n,o);return s.createElement(e,(0,r.Cl)({},t,i,{ref:p?t.forwardedRef:null}))}))};return g.displayName="injectIntl(".concat((n=e).displayName||n.name||"Component",")"),g.WrappedComponent=e,p?i()(s.forwardRef((function(e,t){return s.createElement(g,(0,r.Cl)({},e,{forwardedRef:t}))})),e):i()(g,e)}},6420:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.973 11.484c0 .285.236.516.527.516a.52.52 0 0 0 .527-.516V1.976L10.6 4.473c.206.202.54.202.746 0a.51.51 0 0 0 0-.73L7.5 0 3.654 3.743a.51.51 0 0 0 0 .73c.206.202.54.202.746 0l2.573-2.497zM1 8v7h13V8h1v8H0V8z" clip-rule="evenodd"></path></svg>'},6480:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(9749);const o=(0,n(5208).A)((function(e,t){return(0,r.A)(e,1,t)}))},6489:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const r=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i};var o=n(3153),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return i.call(e,t)})))}:o.A},6780:(e,t,n)=>{const r=n(8311);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},6874:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},6888:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ApiKey:()=>M,ApiKeyManager:()=>L,ApplicationCredentialsManager:()=>D,ApplicationSession:()=>_,ArcGISAccessDeniedError:()=>E,ArcGISAuthError:()=>m,ArcGISIdentityManager:()=>$,ArcGISJobError:()=>A,ArcGISRequestError:()=>c,ArcGISTokenRequestError:()=>w,ArcGISTokenRequestErrorCodes:()=>I,Blob:()=>l,ErrorTypes:()=>O,File:()=>a,FormData:()=>s,JOB_STATUSES:()=>k,Job:()=>K,NODEJS_DEFAULT_REFERER_HEADER:()=>f,UserSession:()=>V,appendCustomParams:()=>b.O,canUseOnlineToken:()=>N.kR,checkForErrors:()=>v,cleanUrl:()=>C.T,decodeParam:()=>T.c,decodeQueryString:()=>T.m,encodeFormData:()=>u,encodeParam:()=>i.o,encodeQueryString:()=>i.G,exchangeToken:()=>G,fetchToken:()=>R,getDefaultRequestOptions:()=>g,getFetch:()=>p.J,getOnlineEnvironment:()=>N.Db,internalRequest:()=>y,isFederated:()=>N.XS,isOnline:()=>N.sc,normalizeOnlinePortalUrl:()=>N.kS,platformSelf:()=>W,processParams:()=>o.y,request:()=>S,requiresFormData:()=>o.Z,revokeToken:()=>U,setDefaultRequestOptions:()=>h,validateAppAccess:()=>j,warn:()=>d.R,withOptions:()=>J.t});var r=n(1635),o=n(441),i=n(4760);const s=globalThis.FormData,a=globalThis.File,l=globalThis.Blob;function u(e,t){const n=(0,o.Z)(e)||t,r=(0,o.y)(e);if(n){const e=new s;return Object.keys(r).forEach((t=>{if("undefined"!=typeof Blob&&r[t]instanceof Blob){const n=r.fileName||r[t].name||t;e.append(t,r[t],n)}else e.append(t,r[t])})),e}return(0,i.G)(e)}class c extends Error{constructor(e,t,n,r,o){super(e);const i=new.target.prototype;Object.setPrototypeOf(this,i),e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:`${t}: ${e}`,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=o}}var d=n(9883),p=n(4430);const f="@esri/arcgis-rest-js";function h(e,t){e.authentication&&!t&&(0,d.R)("You should not set `authentication` as a default in a shared environment such as a web server which will process multiple users requests. You can call `setDefaultRequestOptions` with `true` as a second argument to disable this warning."),globalThis.DEFAULT_ARCGIS_REQUEST_OPTIONS=e}function g(){return globalThis.DEFAULT_ARCGIS_REQUEST_OPTIONS||{httpMethod:"POST",params:{f:"json"}}}class m extends c{constructor(e="AUTHENTICATION_ERROR",t="AUTHENTICATION_ERROR_CODE",n,r,o){super(e,t,n,r,o),this.name="ArcGISAuthError",this.message="AUTHENTICATION_ERROR_CODE"===t?e:`${t}: ${e}`;const i=new.target.prototype;Object.setPrototypeOf(this,i)}retry(e,t=1){let n=0;const r=(o,i)=>{n+=1,e(this.url,this.options).then((e=>{const t=Object.assign(Object.assign({},this.options),{authentication:e});return y(this.url,t)})).then((e=>{o(e)})).catch((e=>{"ArcGISAuthError"===e.name&&n<t?r(o,i):e.name===this.name&&e.message===this.message&&n>=t?i(this):i(e)}))};return new Promise(((e,t)=>{r(e,t)}))}}function v(e,t,n,r,o){if(e.code>=400){const{message:n,code:o}=e;throw new c(n,o,e,t,r)}if(e.error){const{message:n,code:i,messageCode:s}=e.error,a=s||i||"UNKNOWN_ERROR_CODE";if(498===i||499===i)throw o||new m(n,a,e,t,r);throw new c(n,a,e,t,r)}if("failed"===e.status||"failure"===e.status){let n,o="UNKNOWN_ERROR_CODE";try{n=JSON.parse(e.statusMessage).message,o=JSON.parse(e.statusMessage).code}catch(t){n=e.statusMessage||e.message}throw new c(n,o,e,t,r)}return e}function y(e,t){const n=g(),r=Object.assign(Object.assign(Object.assign({httpMethod:"POST"},n),t),{params:Object.assign(Object.assign({},n.params),t.params),headers:Object.assign(Object.assign({},n.headers),t.headers)}),{httpMethod:s,rawResponse:a}=r,l=Object.assign({f:"json"},r.params);let h=null;const m={method:s,signal:r.signal,credentials:r.credentials||"same-origin"};let y;if(r.headers&&r.headers["X-Esri-Auth-Client-Id"]&&e.indexOf("/oauth2/platformSelf")>-1&&(m.credentials="include"),"string"==typeof r.authentication){const e=r.authentication;y={portal:"https://www.arcgis.com/sharing/rest",getToken:()=>Promise.resolve(e)},r.authentication.startsWith("AAPK")||r.authentication.startsWith("AATK")||r.suppressWarnings||globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING||((0,d.R)("Using an oAuth 2.0 access token directly in the token option is discouraged. Consider using ArcGISIdentityManager or Application session. See https://esriurl.com/arcgis-rest-js-direct-token-warning for more information."),globalThis.ARCGIS_REST_JS_SUPPRESS_TOKEN_WARNING=!0)}else y=r.authentication;const S=e;return(y?y.getToken(e).catch((t=>(t.url=e,t.options=r,h=t,Promise.resolve("")))):Promise.resolve("")).then((t=>{t.length&&(l.token=t),y&&y.getDomainCredentials&&(m.credentials=y.getDomainCredentials(e));const n={};if("GET"===m.method){l.token&&r.hideToken&&"undefined"==typeof window&&(n["X-Esri-Authorization"]=`Bearer ${l.token}`,delete l.token);const o=""===(0,i.G)(l)?e:e+"?"+(0,i.G)(l);r.maxUrlLength&&o.length>r.maxUrlLength||!r.maxUrlLength&&o.length>2e3||l.token&&r.hideToken?(m.method="POST",t.length&&r.hideToken&&(l.token=t,delete n["X-Esri-Authorization"])):e=o}const s=new RegExp("/items/.+/updateResources").test(e);return"POST"===m.method&&(m.body=u(l,s)),m.headers=Object.assign(Object.assign({},n),r.headers),("undefined"==typeof window||window&&void 0===window.document)&&!m.headers.referer&&(m.headers.referer=f),(0,o.Z)(l)||s||(m.headers["Content-Type"]="application/x-www-form-urlencoded"),globalThis.fetch?globalThis.fetch(e,m):(0,p.J)().then((({fetch:t})=>t(e,m)))})).then((t=>{if(!t.ok)return t.json().then((n=>{const{status:o,statusText:i}=t,{message:s,details:a}=n.error,l=`${s}. ${a?a.join(" "):""}`.trim();throw new c(l,`HTTP ${o} ${i}`,n,e,r)})).catch((n=>{if("ArcGISRequestError"===n.name)throw n;const{status:o,statusText:i}=t;throw new c(i,`HTTP ${o}`,t,e,r)}));if(a)return t;switch(l.f){case"json":case"geojson":return t.json();case"html":case"text":return t.text();default:return t.blob()}})).then((t=>{if("json"!==l.f&&"geojson"!==l.f||a)return t;{const n=v(t,S,0,r,h);if(h){const t=e.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0];r.authentication.federatedServers[t]={token:[],expires:new Date(Date.now()+864e5)},h=null}return n}}))}function S(e,t={params:{f:"json"}}){const{request:n}=t,o=(0,r.Tt)(t,["request"]);return n?n(e,o):y(e,o).catch((e=>e instanceof m&&t.authentication&&"string"!=typeof t.authentication&&t.authentication.canRefresh&&t.authentication.refreshCredentials?e.retry((()=>t.authentication.refreshCredentials()),1):Promise.reject(e)))}var I,b=n(9146);!function(e){e.TOKEN_REFRESH_FAILED="TOKEN_REFRESH_FAILED",e.GENERATE_TOKEN_FOR_SERVER_FAILED="GENERATE_TOKEN_FOR_SERVER_FAILED",e.REFRESH_TOKEN_EXCHANGE_FAILED="REFRESH_TOKEN_EXCHANGE_FAILED",e.NOT_FEDERATED="NOT_FEDERATED",e.UNKNOWN_ERROR_CODE="UNKNOWN_ERROR_CODE"}(I||(I={}));class w extends Error{constructor(e="UNKNOWN_ERROR",t=I.UNKNOWN_ERROR_CODE,n,r,o){super(e);const i=new.target.prototype;Object.setPrototypeOf(this,i),this.name="ArcGISTokenRequestError",this.message=`${t}: ${e}`,this.originalMessage=e,this.code=t,this.response=n,this.url=r,this.options=o}}class E extends Error{constructor(){super("The user has denied your authorization request.");const e=new.target.prototype;Object.setPrototypeOf(this,e),this.name="ArcGISAccessDeniedError"}}class A extends Error{constructor(e="Unknown error",t){super(e);const n=new.target.prototype;Object.setPrototypeOf(this,n),this.name="ArcGISJobError",this.message=`${t.status}: ${e}`,this.status=t.status,this.id=t.id,this.jobInfo=t}}var O,C=n(3718),T=n(4592);!function(e){e.ArcGISRequestError="ArcGISRequestError",e.ArcGISAuthError="ArcGISAuthError",e.ArcGISAccessDeniedError="ArcGISAccessDeniedError",e.ArcGISTokenRequestError="ArcGISTokenRequestError"}(O||(O={}));const x=3e5;function R(e,t){const n=t;return n.rawResponse=!1,S(e,n).then((e=>{if("token"in e&&"expires"in e)return{token:e.token,username:t.params.username,expires:new Date(e.expires)};const n={token:e.access_token,username:e.username,expires:new Date(Date.now()+1e3*e.expires_in-x),ssl:!0===e.ssl};return e.refresh_token&&(n.refreshToken=e.refresh_token),e.refresh_token_expires_in&&(n.refreshTokenExpires=new Date(Date.now()+1e3*e.refresh_token_expires_in-x)),n}))}class P{constructor(e){this.portal=e.portal?(0,C.T)(e.portal):"https://www.arcgis.com/sharing/rest",this._username=e.username}get username(){return this._username?this._username:this._user&&this._user.username?this._user.username:void 0}getUsername(){return this.username?Promise.resolve(this.username):this.getUser().then((e=>e.username))}getUser(e){if(this._pendingUserRequest)return this._pendingUserRequest;if(this._user)return Promise.resolve(this._user);{const t=`${this.portal}/community/self`,n=Object.assign(Object.assign({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingUserRequest=S(t,n).then((e=>(this._user=e,this._pendingUserRequest=null,e))),this._pendingUserRequest}}clearCachedUserInfo(){this._user=null}}class D extends P{constructor(e){super(e),this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.token=e.token,this.expires=e.expires,this.portal=e.portal||"https://www.arcgis.com/sharing/rest",this.duration=e.duration||7200}static fromCredentials(e){return new D(e)}getToken(e,t){return this.token&&this.expires&&this.expires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequest||(this._pendingTokenRequest=this.refreshToken(t)),this._pendingTokenRequest)}refreshToken(e){const t=Object.assign({params:{client_id:this.clientId,client_secret:this.clientSecret,grant_type:"client_credentials",expiration:this.duration}},e);return R(`${this.portal}/oauth2/token/`,t).then((e=>(this._pendingTokenRequest=null,this.token=e.token,this.expires=e.expires,e.token))).catch((e=>{throw new w(e.message,I.TOKEN_REFRESH_FAILED,e.response,e.url,e.options)}))}refreshCredentials(){return this.clearCachedUserInfo(),this.refreshToken().then((()=>this))}}function _(e){return console.log("DEPRECATED: 'ApplicationSession' is deprecated. Use 'ApplicationCredentialsManager' instead."),new D(e)}class L extends P{constructor(e){super(e),this.portal="https://www.arcgis.com/sharing/rest",this.key=e.key}static fromKey(e){return new L("string"==typeof e?{key:e}:e)}getToken(e){return Promise.resolve(this.key)}}function M(e){return console.log("DEPRECATED:, 'ApiKey' is deprecated. Use 'ApiKeyManager' instead."),new L(e)}var k,N=n(568);function j(e,t,n="https://www.arcgis.com/sharing/rest"){return S(`${n}/oauth2/validateAppAccess`,{method:"POST",params:{f:"json",client_id:t,token:e}})}function U(e){const t=`${(0,C.T)(e.portal||"https://www.arcgis.com/sharing/rest")}/oauth2/revokeToken/`,n=e.token,r=e.clientId;delete e.portal,delete e.clientId,delete e.token;const o=Object.assign(Object.assign({},e),{httpMethod:"POST",params:{client_id:r,auth_token:n}});return S(t,o).then((e=>{if(!e.success)throw new c("Unable to revoke token",500,e,t,o);return e}))}function F(e,t=window){return!t&&window&&(t=window),t.btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function B(e){!e&&window&&(e=window);return F(e.crypto.getRandomValues(new Uint8Array(32)))}class $ extends P{constructor(e){if(super(e),this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?(0,C.T)(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.server=e.server,this.referer=e.referer,this.federatedServers={},this.trustedDomains=[],e.server){const t=this.getServerRootUrl(e.server);this.federatedServers[t]={token:e.token,expires:e.tokenExpires}}this._pendingTokenRequests={}}get token(){return this._token}get tokenExpires(){return this._tokenExpires}get refreshToken(){return this._refreshToken}get refreshTokenExpires(){return this._refreshTokenExpires}get canRefresh(){return!(!this.username||!this.password)||!!(this.clientId&&this.refreshToken&&this.redirectUri)}static beginOAuth2(e,t){!t&&window&&(t=window);const{portal:n,provider:r,clientId:o,expiration:s,redirectUri:a,popup:l,popupWindowFeatures:u,locale:c,params:d,style:p,pkce:f,state:h}=Object.assign({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",locale:"",style:"",pkce:!0},e),g=h||B(t),v=`ARCGIS_REST_JS_AUTH_STATE_${o}`;t.localStorage.setItem(v,g);let y=`${(0,C.T)(n)}/oauth2/authorize`;const S={client_id:o,response_type:f?"code":"token",expiration:s,redirect_uri:a,state:JSON.stringify({id:g,originalUrl:t.location.href}),locale:c,style:p};let I;if("arcgis"!==r&&(y=`${(0,C.T)(n)}/oauth2/social/authorize`,S.socialLoginProviderName=r,S.autoAccountCreateForSocial=!0),f){const e=B(t),n=`ARCGIS_REST_JS_CODE_VERIFIER_${o}`;t.localStorage.setItem(n,e),I=function(e,t=window){if(!t&&window&&(t=window),e&&t.isSecureContext&&t.crypto&&t.crypto.subtle){const n=(new t.TextEncoder).encode(e);return t.crypto.subtle.digest("SHA-256",n).then((e=>F(new Uint8Array(e),t)))}return Promise.resolve(null)}(e,t).then((function(t){S.code_challenge_method=t?"S256":"plain",S.code_challenge=t||e}))}else I=Promise.resolve();return I.then((()=>(y=`${y}?${(0,i.G)(S)}`,d&&(y=`${y}&${(0,i.G)(d)}`),l?new Promise(((e,r)=>{t.addEventListener(`arcgis-rest-js-popup-auth-${o}`,(t=>{if("access_denied"===t.detail.error){const e=new E;return r(e),e}if(t.detail.errorMessage){const e=new m(t.detail.errorMessage,t.detail.error);return r(e),e}e(new $({clientId:o,portal:n,ssl:t.detail.ssl,token:t.detail.token,tokenExpires:t.detail.expires,username:t.detail.username,refreshToken:t.detail.refreshToken,refreshTokenExpires:t.detail.refreshTokenExpires,redirectUri:a}))}),{once:!0}),t.open(y,"oauth-window",u),t.dispatchEvent(new CustomEvent("arcgis-rest-js-popup-auth-start"))})):void(t.location.href=y))))}static completeOAuth2(e,t){!t&&window&&(t=window);const{portal:n,clientId:r,popup:o,pkce:i,redirectUri:s}=Object.assign({portal:"https://www.arcgis.com/sharing/rest",popup:!0,pkce:!0},e),a=`ARCGIS_REST_JS_AUTH_STATE_${r}`,l=t.localStorage.getItem(a),u=(0,T.m)(i?t.location.search.replace(/^\?/,""):t.location.hash.replace(/^#/,"")),c=u&&u.state?JSON.parse(u.state):void 0;function d(e,n,i){return t.localStorage.removeItem(a),o&&t.opener?(t.opener.dispatchEvent(new CustomEvent(`arcgis-rest-js-popup-auth-${r}`,{detail:{error:n,errorMessage:e}})),void t.close()):(i&&t.history.replaceState(t.history.state,"",i),"access_denied"===n?Promise.reject(new E):Promise.reject(new m(e,n)))}function p(e,i){return t.localStorage.removeItem(a),o&&t.opener?(t.opener.dispatchEvent(new CustomEvent(`arcgis-rest-js-popup-auth-${r}`,{detail:Object.assign({},e)})),void t.close()):(t.history.replaceState(t.history.state,"",i),new $({clientId:r,portal:n,ssl:e.ssl,token:e.token,tokenExpires:e.expires,username:e.username,refreshToken:e.refreshToken,refreshTokenExpires:e.refreshTokenExpires,redirectUri:s||location.href.replace(location.search,"")}))}if(!l||!c)return d("No authentication state was found, call `ArcGISIdentityManager.beginOAuth2(...)` to start the authentication process.","no-auth-state");if(c.id!==l)return d("Saved client state did not match server sent state.","mismatched-auth-state");if(u.error){const e=u.error;return d(u.error_description||"Unknown error",e,c.originalUrl)}if(i&&u.code){const e=(0,C.T)(`${n}/oauth2/token/`),o=`ARCGIS_REST_JS_CODE_VERIFIER_${r}`,i=t.localStorage.getItem(o);return t.localStorage.removeItem(o),R(e,{httpMethod:"POST",params:{client_id:r,code_verifier:i,grant_type:"authorization_code",redirect_uri:s||location.href.replace(location.search,""),code:u.code}}).then((e=>p(Object.assign(Object.assign({},e),c),c.originalUrl))).catch((e=>d(e.originalMessage,e.code,c.originalUrl)))}return!i&&u.access_token?Promise.resolve(p(Object.assign({token:u.access_token,expires:new Date(Date.now()+1e3*parseInt(u.expires_in,10)),ssl:"true"===u.ssl,username:u.username},c),c.originalUrl)):d("Unknown error","oauth-error",c.originalUrl)}static fromParent(e,t){let n;return!t&&window&&(t=window),new Promise(((r,o)=>{n=e=>{if(e.source===t.parent&&e.data)try{return r($.parentMessageHandler(e))}catch(e){return o(e)}},t.addEventListener("message",n,!1),t.parent.postMessage({type:"arcgis:auth:requestCredential"},e)})).then((e=>(t.removeEventListener("message",n,!1),e)))}static authorize(e,t){const{portal:n,clientId:r,expiration:o,redirectUri:s,state:a}=Object.assign({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),l={client_id:r,expiration:o,response_type:"code",redirect_uri:s};a&&(l.state=a);const u=`${n}/oauth2/authorize?${(0,i.G)(l)}`;t.writeHead(301,{Location:u}),t.end()}static exchangeAuthorizationCode(e,t){const{portal:n,clientId:r,redirectUri:o}=Object.assign({portal:"https://www.arcgis.com/sharing/rest"},e);return R(`${n}/oauth2/token`,{params:{grant_type:"authorization_code",client_id:r,redirect_uri:o,code:t}}).then((e=>new $({clientId:r,portal:n,ssl:e.ssl,redirectUri:o,refreshToken:e.refreshToken,refreshTokenExpires:e.refreshTokenExpires,token:e.token,tokenExpires:e.expires,username:e.username}))).catch((e=>{throw new w(e.message,I.REFRESH_TOKEN_EXCHANGE_FAILED,e.response,e.url,e.options)}))}static deserialize(e){const t=JSON.parse(e);return new $({clientId:t.clientId,refreshToken:t.refreshToken,refreshTokenExpires:t.refreshTokenExpires?new Date(t.refreshTokenExpires):void 0,username:t.username,password:t.password,token:t.token,tokenExpires:t.tokenExpires?new Date(t.tokenExpires):void 0,portal:t.portal,ssl:t.ssl,tokenDuration:t.tokenDuration,redirectUri:t.redirectUri,server:t.server})}static fromCredential(e,t){const n=void 0===e.ssl||e.ssl,r=e.expires||Date.now()+72e5;return t.hasServer?new $({server:e.server,ssl:n,token:e.token,username:e.userId,tokenExpires:new Date(r)}):new $({portal:(0,C.T)(e.server.includes("sharing/rest")?e.server:e.server+"/sharing/rest"),ssl:n,token:e.token,username:e.userId,tokenExpires:new Date(r)})}static parentMessageHandler(e){if("arcgis:auth:credential"===e.data.type){const t=e.data.credential;return function(e){return"string"==typeof e.userId||"number"==typeof e.expires}(t)?$.fromCredential(t,{hasPortal:!0,hasServer:!1,server:t.server}):new $(t)}if("arcgis:auth:error"===e.data.type){const t=new Error(e.data.error.message);throw t.name=e.data.error.name,t}throw new Error("Unknown message type.")}static destroy(e){return U({clientId:e.clientId,portal:e.portal,token:e.refreshToken||e.token})}static fromToken(e){const t=new $(e);return t.getUser().then((()=>t))}static signIn(e){const t=new $(e);return t.getUser().then((()=>t))}toCredential(){return{expires:this.tokenExpires.getTime(),server:this.server||this.portal,ssl:this.ssl,token:this.token,userId:this.username}}getPortal(e){if(this._pendingPortalRequest)return this._pendingPortalRequest;if(this._portalInfo)return Promise.resolve(this._portalInfo);{const t=`${this.portal}/portals/self`,n=Object.assign(Object.assign({httpMethod:"GET",authentication:this},e),{rawResponse:!1});return this._pendingPortalRequest=S(t,n).then((e=>(this._portalInfo=e,this._pendingPortalRequest=null,e))),this._pendingPortalRequest}}getToken(e,t){return(0,N.kR)(this.portal,e)||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t)}validateAppAccess(e){return this.getToken(this.portal).then((t=>j(t,e)))}toJSON(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires||void 0,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires||void 0,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,server:this.server}}serialize(){return JSON.stringify(this)}enablePostMessageAuth(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)}disablePostMessageAuth(e){!e&&window&&(e=window),e.removeEventListener("message",this._hostHandler,!1)}refreshCredentials(e){return this.clearCachedUserInfo(),this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new w("Unable to refresh token. No refresh token or password present.",I.TOKEN_REFRESH_FAILED))}getServerRootUrl(e){const[t]=(0,C.T)(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/),[n,r,o]=t.match(/(https?:\/\/)(.+)/),[i,...s]=o.split("/");return`${r}${i.toLowerCase()}/${s.join("/")}`}getDomainCredentials(e){return this.trustedDomains&&this.trustedDomains.length?(e=e.toLowerCase(),this.trustedDomains.some((t=>e.startsWith(t.toLowerCase())))?"include":"same-origin"):"same-origin"}signOut(){return $.destroy(this)}createPostMessageHandler(e){return t=>{const n=e.indexOf(t.origin)>-1,r="arcgis:auth:requestCredential"===t.data.type,o=this.tokenExpires.getTime()>Date.now();if(n&&r){let e={};if(o){const t=this.toCredential();t.server=t.server.replace("/sharing/rest",""),e={type:"arcgis:auth:credential",credential:t}}else e={type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Token was expired, and not returned to the child application"}};t.source.postMessage(e,t.origin)}}}getTokenForServer(e,t){const n=this.getServerRootUrl(e),r=this.federatedServers[n];return r&&r.expires&&r.expires.getTime()>Date.now()?Promise.resolve(r.token):(this._pendingTokenRequests[n]||(this._pendingTokenRequests[n]=this.fetchAuthorizedDomains().then((()=>S(`${n}/rest/info`,{credentials:this.getDomainCredentials(e)}).then((r=>{if(r.owningSystemUrl){if((0,N.XS)(r.owningSystemUrl,this.portal))return S(`${r.owningSystemUrl}/sharing/rest/info`,t);throw new w(`${e} is not federated with ${this.portal}.`,I.NOT_FEDERATED)}if(r.authInfo&&void 0!==this.federatedServers[n])return Promise.resolve({authInfo:r.authInfo});throw new w(`${e} is not federated with any portal and is not explicitly trusted.`,I.NOT_FEDERATED)})).then((e=>this.token&&this.tokenExpires.getTime()<Date.now()?this.server?this.refreshCredentials().then((()=>({token:this.token,expires:this.tokenExpires}))):this.refreshCredentials().then((()=>this.generateTokenForServer(e.authInfo.tokenServicesUrl,n))):this.generateTokenForServer(e.authInfo.tokenServicesUrl,n))).then((e=>(this.federatedServers[n]=e,delete this._pendingTokenRequests[n],e.token)))))),this._pendingTokenRequests[n])}generateTokenForServer(e,t){return S(e,{params:{token:this.token,serverUrl:t,expiration:this.tokenDuration}}).then((e=>({token:e.token,expires:new Date(e.expires-3e5)}))).catch((e=>{throw new w(e.message,I.GENERATE_TOKEN_FOR_SERVER_FAILED,e.response,e.url,e.options)}))}getFreshToken(e){return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshCredentials(e).then((()=>(this._pendingTokenRequests[this.portal]=null,this.token)))),this._pendingTokenRequests[this.portal])}refreshWithUsernameAndPassword(e){const t={username:this.username,password:this.password,expiration:this.tokenDuration,client:"referer",referer:this.referer?this.referer:"undefined"!=typeof window&&void 0!==window.document&&window.location&&window.location.origin?window.location.origin:f};return(this.server?S(`${this.getServerRootUrl(this.server)}/rest/info`).then((n=>S(n.authInfo.tokenServicesUrl,Object.assign({params:t},e)))):S(`${this.portal}/generateToken`,Object.assign({params:t},e))).then((e=>(this.updateToken(e.token,new Date(e.expires)),this))).catch((e=>{throw new w(e.message,I.TOKEN_REFRESH_FAILED,e.response,e.url,e.options)}))}refreshWithRefreshToken(e){if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()-864e5<Date.now())return this.exchangeRefreshToken(e);const t=Object.assign({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return R(`${this.portal}/oauth2/token`,t).then((e=>this.updateToken(e.token,e.expires))).catch((e=>{throw new w(e.message,I.TOKEN_REFRESH_FAILED,e.response,e.url,e.options)}))}updateToken(e,t){return this._token=e,this._tokenExpires=t,this}exchangeRefreshToken(e){const t=Object.assign({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return R(`${this.portal}/oauth2/token`,t).then((e=>(this._token=e.token,this._tokenExpires=e.expires,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this))).catch((e=>{throw new w(e.message,I.REFRESH_TOKEN_EXCHANGE_FAILED,e.response,e.url,e.options)}))}fetchAuthorizedDomains(){return this.server||!this.portal?Promise.resolve(this):this.getPortal().then((e=>(e.authorizedCrossOriginDomains&&e.authorizedCrossOriginDomains.length&&(this.trustedDomains=e.authorizedCrossOriginDomains.filter((e=>!e.startsWith("http://"))).map((e=>e.startsWith("https://")?e:`https://${e}`))),this)))}}function V(e){return console.log("DEPRECATED:, 'UserSession' is deprecated. Use 'ArcGISIdentityManager' instead."),new $(e)}function G(e,t,n="https://www.arcgis.com/sharing/rest"){return S(`${n}/oauth2/exchangeToken`,{method:"POST",params:{f:"json",client_id:t,token:e}}).then((e=>e.token))}function W(e,t,n="https://www.arcgis.com/sharing/rest"){return S(`${n}/oauth2/platformSelf?f=json`,{method:"POST",headers:{"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":t},params:{f:"json"}})}V.beginOAuth2=function(...e){return console.warn("DEPRECATED:, 'UserSession.beginOAuth2' is deprecated. Use 'ArcGISIdentityManager.beginOAuth2' instead."),$.beginOAuth2(...e)},V.completeOAuth2=function(...e){return console.warn("DEPRECATED:, 'UserSession.completeOAuth2()' is deprecated. Use 'ArcGISIdentityManager.completeOAuth2()' instead."),e.length<=1&&console.warn("WARNING:, 'UserSession.completeOAuth2()' is now async and returns a promise the resolves to an instance of `ArcGISIdentityManager`."),$.completeOAuth2(...e)},V.fromParent=function(...e){return console.warn("DEPRECATED:, 'UserSession.fromParent' is deprecated. Use 'ArcGISIdentityManager.fromParent' instead."),$.fromParent(...e)},V.authorize=function(...e){return console.warn("DEPRECATED:, 'UserSession.authorize' is deprecated. Use 'ArcGISIdentityManager.authorize' instead."),$.authorize(...e)},V.exchangeAuthorizationCode=function(...e){return console.warn("DEPRECATED:, 'UserSession.exchangeAuthorizationCode' is deprecated. Use 'ArcGISIdentityManager.exchangeAuthorizationCode' instead."),$.exchangeAuthorizationCode(...e)},V.fromCredential=function(...e){return console.log("DEPRECATED:, 'UserSession.fromCredential' is deprecated. Use 'ArcGISIdentityManager.fromCredential' instead."),console.warn("WARNING:, 'UserSession.fromCredential' now requires a `ServerInfo` object from the JS API as a second parameter."),$.fromCredential(...e)},V.deserialize=function(...e){return console.log("DEPRECATED:, 'UserSession.deserialize' is deprecated. Use 'ArcGISIdentityManager.deserialize' instead."),$.deserialize(...e)},function(e){e.Success="Succeeded",e.Failed="Failed",e.Waiting="Waiting",e.Cancelled="Cancelled",e.Cancelling="Cancelling",e.New="New",e.Executing="Executing",e.Submitted="Submitted",e.Failure="Failure",e.TimedOut="TimedOut",e.Error="Error",e.Status="Etatus",e.Unknown="Unknown"}(k||(k={}));var H=n(7380),q=n(5055);const z={pollingRate:2e3,startMonitoring:!1};class K{constructor(e){this.executePoll=async()=>{let e;try{e=await this.getJobInfo()}catch(e){return void this.emitter.emit(k.Error,e)}this.emitter.emit(k.Status,e),this.emitter.emit(e.status,e)};const{url:t,id:n,pollingRate:r,authentication:o}=Object.assign(Object.assign({},z),e);this.url=t,this.id=n,this.authentication=o,this._pollingRate=r,this.emitter=(0,H.A)(),e.startMonitoring&&this.startEventMonitoring(r)}static deserialize(e,t){const n=Object.assign(Object.assign(Object.assign({},z),JSON.parse(e)),t);return S(`${n.url}/jobs/${n.id}`,{authentication:n.authentication}).then((()=>new K(n)))}static fromExistingJob(e){const t=Object.assign(Object.assign({},z),e);return S(`${(0,C.T)(t.url.replace(/\/submitJob\/?/,""))}/jobs/${t.id}`,{authentication:t.authentication}).then((()=>new K(t)))}static submitJob(e){const{url:t,params:n,authentication:r,pollingRate:o,startMonitoring:i}=Object.assign(Object.assign({},z),e),s=(0,q.V)(n),a=(0,C.T)(t.replace(/\/submitJob\/?/,""));return S(a+"/submitJob",{params:s,authentication:r}).then((e=>new K({url:a,authentication:r,id:e.jobId,startMonitoring:i,pollingRate:o})))}get jobUrl(){return`${this.url}/jobs/${this.id}`}get isMonitoring(){return!!this.setIntervalHandler}get pollingRate(){return this._pollingRate}set pollingRate(e){this.stopEventMonitoring(),this.startEventMonitoring(e)}getJobInfo(){return S(this.jobUrl,{authentication:this.authentication}).then((e=>{const t=Object.assign({id:e.jobId,status:void 0},e);switch(delete t.jobId,delete t.jobStatus,e.jobStatus){case"esriJobCancelled":t.status=k.Cancelled;break;case"esriJobCancelling":t.status=k.Cancelling;break;case"esriJobNew":t.status=k.New;break;case"esriJobWaiting":t.status=k.Waiting;break;case"esriJobExecuting":t.status=k.Executing;break;case"esriJobSubmitted":t.status=k.Submitted;break;case"esriJobTimedOut":t.status=k.TimedOut;break;case"esriJobFailed":t.status=k.Failed;break;case"expectedFailure":t.status=k.Failure;break;case"esriJobSucceeded":t.status=k.Success}return t}))}on(e,t){this.emitter.on(e,t)}once(e,t){const n=r=>{this.emitter.off(e,n),t(r)};this.emitter.on(e,n),t.__arcgis_job_once_original_function__=n}off(e,t){t.__arcgis_job_once_original_function__?this.emitter.off(e,t.__arcgis_job_once_original_function__):this.emitter.off(e,t)}async getResult(e){return this.waitForCompletion().then((t=>S(this.jobUrl+"/"+t.results[e].paramUrl,{authentication:this.authentication})))}toJSON(){return{id:this.id,url:this.url,startMonitoring:this.isMonitoring,pollingRate:this.pollingRate}}serialize(){return JSON.stringify(this)}async waitForCompletion(){const e=await this.getJobInfo();return e.status===k.Success?Promise.resolve(e):e.status===k.Cancelling||e.status===k.Cancelled||e.status===k.Failed||e.status===k.Failure||e.status===k.TimedOut?(this.stopInternalEventMonitoring(),Promise.reject(new A("Job cancelled or failed.",e))):new Promise(((e,t)=>{this.startInternalEventMonitoring(),this.once(k.Cancelled,(e=>{this.stopInternalEventMonitoring(),t(new A("Job cancelled.",e))})),this.once(k.TimedOut,(e=>{this.stopInternalEventMonitoring(),t(new A("Job timed out.",e))})),this.once(k.Failed,(e=>{this.stopInternalEventMonitoring(),t(new A("Job failed.",e))})),this.once(k.Success,(t=>{this.stopInternalEventMonitoring(),e(t)}))}))}async getAllResults(){return this.waitForCompletion().then((e=>{const t=Object.keys(e.results),n=t.map((t=>S(this.jobUrl+"/"+e.results[t].paramUrl,{authentication:this.authentication}).then((e=>e))));return Promise.all(n).then((e=>t.reduce(((n,r,o)=>(n[t[o]]=e[o],n)),{})))}))}cancelJob(){return S(this.jobUrl+"/cancel",{authentication:this.authentication,params:{id:this.id,returnMessages:!1}}).then((e=>(this.emitter.emit("cancelled",e),e)))}startInternalEventMonitoring(e=z.pollingRate){this._pollingRate=e,this.isMonitoring||(this.setIntervalHandler=setInterval(this.executePoll,this.pollingRate))}stopInternalEventMonitoring(){this.isMonitoring&&!this.didUserEnableMonitoring&&clearTimeout(this.setIntervalHandler)}startEventMonitoring(e=z.pollingRate){this._pollingRate=e,this.didUserEnableMonitoring=!0,this.isMonitoring||(this.setIntervalHandler=setInterval(this.executePoll,this.pollingRate))}stopEventMonitoring(){this.isMonitoring&&this.didUserEnableMonitoring&&clearTimeout(this.setIntervalHandler)}}var J=n(9744)},6912:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},6917:(e,t,n)=>{"use strict";n.d(t,{R1:()=>i,sY:()=>s});var r=n(8972);const o=r.createContext(null);function i({data:e,children:t}){return r.createElement(o.Consumer,null,(n=>{let i=e;return n&&(i=Array.isArray(n)?n.concat(e):[n].concat(e)),r.createElement(o.Provider,{value:i},t)}))}o.Consumer;function s(e){function t(t){return r.createElement(o.Consumer,null,(n=>r.createElement(e,Object.assign({},t,{repeatedDataSource:n}))))}return t.displayName="RepeatedDataSourceContextConsumerWrapper",t}},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},6953:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},6962:(e,t,n)=>{"use strict";n.r(t),n.d(t,{findLocale:()=>S,getBrowserLanguage:()=>c,getDecimalSeparator:()=>y,getIntl:()=>m,getLocaleToLoad:()=>u,getTranslatedLocale:()=>d,isRTLLocale:()=>h,isSameLanguage:()=>p,loadLocaleMessages:()=>f,resetIntls:()=>v});var r=n(2089),o=n(7683),i=n(8857),s=n(1035),a=n(61),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function u(e,t){const n=d(e=e.toLowerCase(),t);if(n){if(n!==(t&&t[0]))return n}}function c(e){if(!e)return;const t=["language","browserLanguage","systemLanguage","userLanguage"];let n,r;if(Array.isArray(e.languages)&&e.languages.length>0&&(r=e.languages[0],r&&r.length))return r;for(n=0;n<t.length;n++)if(r=e[t[n]],r&&r.length)return r}function d(e,t=[]){if(e){if(window.jimuConfig.downloadLocales){const e=new Set(window.jimuConfig.downloadLocales);t=t.filter((t=>e.has(t)))}return S(e,t)}}function p(e,t){return e.split("-")[0]===t.split("-")[0]}function f(e,t){return l(this,void 0,void 0,(function*(){return yield(0,r.loadModule)(`${e}/${t}`)}))}function h(e){let t=!1;const n=["ar","he"];for(let r=0;r<n.length;r++)p(n[r],e)&&(t=!0);return t}let g={};function m(e="_jimu",t="runtime"){var n,r,l,u,c,d,p,f;const h=`${e}-${t}`;if(g[h])return g[h];const m=(0,o.MT)(),v=(0,s.Vp)().getState();if(!v)return null;let y;if("_jimu"===e)y=(0,i.E)({locale:v.appContext.locale,defaultLocale:v.appContext.locale,messages:v.appI18nMessages},m);else if("runtime"===t){const t=window.jimuConfig.isBuilder?null===(n=v.appStateInBuilder)||void 0===n?void 0:n.appConfig:v.appConfig,o=a.A.getInstance().getWidgetI18nMessagesByUri(null===(l=null===(r=null==t?void 0:t.widgets)||void 0===r?void 0:r[e])||void 0===l?void 0:l.uri);y=(0,i.E)({locale:v.appContext.locale,defaultLocale:v.appContext.locale,messages:o},m)}else{let t;if(window.jimuConfig.isBuilder){const n=null===(p=null===(d=null===(c=null===(u=v.appStateInBuilder)||void 0===u?void 0:u.appConfig)||void 0===c?void 0:c.widgets)||void 0===d?void 0:d[e])||void 0===p?void 0:p.manifest.name;t=null===(f=v.builder.widgetSettingI18nMessages)||void 0===f?void 0:f[n]}else t={};const n=Object.assign({},t,v.appI18nMessages);y=(0,i.E)({locale:v.appContext.locale,defaultLocale:v.appContext.locale,messages:n},m)}return g[h]=y,y}function v(){g={}}function y(e){return S(e,["ar","en","he","ja","ko","es-mx","th","zh","it-ch","de-ch"])?".":","}function S(e,t=[]){let n;if(e=e.toLowerCase(),t.includes(e))n=e;else{const r=e.split("-")[0];t.includes(r)?n=r:"nb"!==e&&"nn"!==e&&"nb"!==r&&"nn"!==r||!t.includes("no")||(n="no")}return n}},6984:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e,t){return e===t||e!=e&&t!=t}},7043:(e,t)=>{function n(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var r=/javascript\s*\:/gim;t.whiteList=n(),t.getDefaultWhiteList=n,t.onAttr=function(e,t,n){},t.onIgnoreAttr=function(e,t,n){},t.safeAttrValue=function(e,t){return r.test(t)?"":t}},7058:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(3537);function o(e,t){const n=(0,r.a)(e,t?.in),o=n.getMonth(),i=o-o%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}},7059:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(e,t,n)<0},7075:(e,t,n)=>{const r=n(3908),o=n(3904),{ANY:i}=o,s=n(8311),a=n(7638),l=n(5580),u=n(7059),c=n(5200),d=n(4089);e.exports=(e,t,n,p)=>{let f,h,g,m,v;switch(e=new r(e,p),t=new s(t,p),n){case">":f=l,h=c,g=u,m=">",v=">=";break;case"<":f=u,h=d,g=l,m="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,p))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,p)?s=e:g(e.semver,a.semver,p)&&(a=e)})),s.operator===m||s.operator===v)return!1;if((!a.operator||a.operator===m)&&h(e,a.semver))return!1;if(a.operator===v&&g(e,a.semver))return!1}return!0}},7271:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=Object.prototype;const o=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},7272:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},7332:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M0 6.5V0h9v6.5zM2.5 1H1v1.5h1.5zm1 0H5v1.5H3.5zm0 2.5H5v2H3.5zm2.5 0v2h2v-2zM6 1v1.5h2V1zM2.5 3.5v2H1v-2zM7 16V9.5h9V16zm2.5-5.5H8V13h1.5zm1 0H12V13h-1.5zm0 3.5H12v1h-1.5zm2.5 0v1h2v-1zm0-3.5V13h2v-2.5zM9.5 14v1H8v-1z" clip-rule="evenodd"></path><path fill="#000" d="M11.32 3h-1.5V2h1.5a2.5 2.5 0 0 1 2.5 2.5v1.793l1.329-1.329a.5.5 0 1 1 .707.708l-2.182 2.182a.5.5 0 0 1-.707 0l-2.183-2.182a.5.5 0 0 1 .708-.708l1.328 1.329V4.5a1.5 1.5 0 0 0-1.5-1.5M6.182 13h-1.5a1.5 1.5 0 0 1-1.5-1.5V9.707l1.328 1.329a.5.5 0 1 0 .708-.708L3.036 8.146a.5.5 0 0 0-.708 0L.146 10.328a.5.5 0 1 0 .708.708l1.328-1.329V11.5a2.5 2.5 0 0 0 2.5 2.5h1.5z"></path></svg>'},7350:(e,t,n)=>{var r=n(8221),o=n(3805);e.exports=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:i,maxWait:t,trailing:s})}},7374:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(1035),o=n(2089),i=n(9589),s=n(2159),a=n(9459),l=n(6962),u=n(4419),c=n(4902),d=n(4048);class p extends c.wJ{constructor(){super(...arguments),this.name="change view action"}getDefaultMessageActionConfig(){return{}}filterMessageDescription(e){return e.messageType===c.Go.DataRecordsSelectionChange}filterMessage(e){return!0}getSettingComponentUri(){return"change-section-view-action"}onExecute(e,t){const n=e;if(!n.records||0===n.records.length)return!0;let r;if(r=Array.isArray(t)&&t.length>0?t[t.length-1]:t,r){const{sectionId:e,viewId:t,useDataSources:o}=r;if((null==o?void 0:o.length)>0){const e=n.records[0].dataSource.id;if(!o.some((t=>t.dataSourceId===e||t.mainDataSourceId===e)))return!0}(0,d.changeView)(e,t)}return!0}}var f=n(6090),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class g{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return g.instance||(g.instance=new g,window._messageManager=g.instance),g.instance}getActions(){return this.actions}getWidgetActions(e){return this.actions.filter((t=>t.widgetId===e))}getAction(e,t){return this.actions.find((n=>n.widgetId===e&&n.name===t))}destroyWidgetActions(e){this.actions=this.actions.filter((t=>(t.widgetId===e&&t.destroy(),t.widgetId!==e)))}destroySectionActions(e){this.actions=this.actions.filter((t=>t.sectionId!==e||(t.destroy(),!1)))}registerWidgetActions(e,t){return h(this,void 0,void 0,(function*(){const n=[];return e.manifest.messageActions&&e.manifest.messageActions.forEach((r=>{const o=e.uri+"dist/"+r.uri;n.push(this.registerAction({id:`${e.id}-${r.name}`,name:r.name,uri:o,widgetId:e.id,appConfig:t,label:e.manifest.i18nMessages[`_action_${r.name}_label`]||r.label||r.name}))})),Promise.all(n)}))}registerSectionActions(e,t){return h(this,void 0,void 0,(function*(){const n=(0,l.getIntl)();return this.registerAction({id:`${e}-change-view-action`,name:"change-view",sectionId:e,appConfig:t,label:n.formatMessage({id:"messageAction_ChangeView",defaultMessage:u.A.messageAction_ChangeView}),ActionClass:p})}))}registerAction(e){return h(this,void 0,void 0,(function*(){let t=this.actions.find((t=>t.id===e.id));if(t)return Promise.resolve(t);return(()=>h(this,void 0,void 0,(function*(){return e.ActionClass?Promise.resolve(e.ActionClass):this.loadActionClass(e)})))().then((n=>h(this,void 0,void 0,(function*(){t=new n({id:e.id,name:e.name,widgetId:e.widgetId,sectionId:e.sectionId,label:e.label,intl:(0,l.getIntl)(e.widgetId,"runtime")});let r=[];if(n.versionManager&&e.appConfig){r=(0,s.getWidgetMessageActionJsons)(e.appConfig,e.widgetId,e.name).map((t=>h(this,void 0,void 0,(function*(){return this.upgradeActionConfig(t,n.versionManager,e.appConfig.widgets[e.widgetId].manifest.version)}))))}return Promise.all(r).then((()=>(this.actions.push(t),t)))}))))}))}upgradeActionConfig(e,t,n){return h(this,void 0,void 0,(function*(){const r=e.version,o=e.widgetId,s=e.config;return r||(e.version="1.0.0-beta2"),n===r?s:t?i.valid(r)&&i.valid(n)?t.upgrade(s,r,n,e.actionId).then((t=>{e.config=t,e.version=n})):(console.error("Bad widget action config version number, "+o+","+r+","+n),s):s}))}loadActionClass(e){return h(this,void 0,void 0,(function*(){const t=e.uri;return this.actionClassPromises[t]||(e.widgetId&&(yield this.loadDependency(e)),this.actionClassPromises[t]=(0,o.loadModule)(t).then((e=>e.default))),this.actionClassPromises[t]}))}loadDependency(e){return h(this,void 0,void 0,(function*(){var t;const{widgetId:n,appConfig:o}=e,i=null===(t=(o||(0,r.Vp)().getState().appConfig).widgets[n])||void 0===t?void 0:t.manifest;if(!i||!i.dependency)return Promise.resolve();const s="string"==typeof i.dependency?[i.dependency]:i.dependency;return(0,f.c)(s)}))}publishMessage(e){return h(this,void 0,void 0,(function*(){const t=(0,r.Vp)().getState().appConfig.messageConfigs,n=Object.keys(t||{});let o=null;for(let r=0;r<n.length;r++)if(t[n[r]].messageType===e.type&&t[n[r]].widgetId===e.widgetId){o=t[n[r]];break}if(o)for(let t=0;t<o.actions.length;t++){const n=o.actions[t],r=this.actions.find((e=>e.name===n.actionName&&(!(!n.widgetId||n.widgetId!==e.widgetId)||(!(!n.sectionId||n.sectionId!==e.sectionId)||!(n.widgetId||e.widgetId||n.sectionId)))));if(!r){console.error(`Not find action: ${n.actionName}`);break}if(!r.filterMessage(e))break;r.widgetId&&this.openWidget(r.widgetId);if(!(yield this.exeAction(r,e,n)))return void console.warn(`Action execute failed. id: ${r.id}`)}}))}openWidget(e){}exeAction(e,t,n){return h(this,void 0,void 0,(function*(){var r;(null===(r=n.useDataSources)||void 0===r?void 0:r.length)>0&&(yield Promise.all(n.useDataSources.asMutable({deep:!1}).map((e=>a.A.getInstance().createDataSourceByUseDataSource(e)))));const o=e.onExecute(t,n.config);return o&&o instanceof Promise?o.then((e=>e),(function(e){return h(this,void 0,void 0,(function*(){return console.error(e),Promise.resolve(!1)}))})):Promise.resolve(o)}))}}const m=g},7380:(e,t,n)=>{"use strict";function r(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}n.d(t,{A:()=>r})},7390:(e,t,n)=>{var r;!function(){"use strict";var o=function e(t){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:n})}"object"!=typeof(n=t)||Array.isArray(n)||null===n||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var a="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,a)))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var d=["setPrototypeOf"],p=(d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function f(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function h(e,t){return s(e,a,!0),e}function g(e,t){var n=e[t];s(e,t,(function(){return V(n.apply(e,arguments))}))}function m(e,t,n){var r=n&&n.deep;if(e in this&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=V.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=E.call(this);return o[e]=V(t),S(o)}d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),f.prototype=new Error,f.prototype.constructor=Error;var v=V([]);function y(e,t,n){var r=e[0];if(1===e.length)return m.call(this,r,t,n);var o,i=e.slice(1),s=this[r];if("object"==typeof s&&null!==s)o=V.setIn(s,i,t);else{var a=i[0];o=""!==a&&isFinite(a)?y.call(v,i,t):L.call(_,i,t)}if(r in this&&s===o)return this;var l=E.call(this);return l[r]=o,S(l)}function S(e){for(var t in p){if(p.hasOwnProperty(t))g(e,p[t])}o.use_static||(s(e,"flatMap",b),s(e,"asObject",A),s(e,"asMutable",E),s(e,"set",m),s(e,"setIn",y),s(e,"update",k),s(e,"updateIn",j),s(e,"getIn",U));for(var n=0,r=e.length;n<r;n++)e[n]=V(e[n]);return h(e)}function I(){return new Date(this.getTime())}function b(e){if(0===arguments.length)return this;var t,n=[],r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return S(n)}function w(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,n){"number"==typeof e&&(n[t]=e.toString())})),e=function(e,n){return-1!==t.indexOf(n)}}var n=i(this);for(var r in this)this.hasOwnProperty(r)&&!1===e(this[r],r)&&(n[r]=this[r]);return $(n)}function E(e){var t,n,r=[];if(e&&e.deep)for(t=0,n=this.length;t<n;t++)r.push(O(this[t]));else for(t=0,n=this.length;t<n;t++)r.push(this[t]);return r}function A(e){"function"!=typeof e&&(e=function(e){return e});var t,n={},r=this.length;for(t=0;t<r;t++){var o=e(this[t],t,this),i=o[0],s=o[1];n[i]=s}return $(n)}function O(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,a)||e instanceof Date?e:V.asMutable(e,{deep:!0})}function C(e,t){for(var n in e)Object.getOwnPropertyDescriptor(e,n)&&(t[n]=e[n]);return t}function T(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var n,r,o=Array.isArray(e),s=t&&t.deep,a=t&&t.mode||"merge",l=t&&t.merger;function d(e,r,o){var a,d=V(r[o]),p=l&&l(e[o],d,t),f=e[o];void 0===n&&void 0===p&&e.hasOwnProperty(o)&&u(d,f)||(u(f,a=void 0!==p?p:s&&c(f)&&c(d)?V.merge(f,d,t):d)&&e.hasOwnProperty(o)||(void 0===n&&(n=C(e,i(e))),n[o]=a))}if(o)for(var p=0,f=e.length;p<f;p++){var h=e[p];for(r in h)h.hasOwnProperty(r)&&d(void 0!==n?n:this,h,r)}else{for(r in e)Object.getOwnPropertyDescriptor(e,r)&&d(this,e,r);"replace"===a&&function(e,t){for(var r in e)t.hasOwnProperty(r)||(void 0===n&&(n=C(e,i(e))),delete n[r])}(this,e)}return void 0===n?this:$(n)}function x(e,t){var n=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return V.merge(this,e,{deep:n,mode:"replace"})}var R,P,D,_=V({});function L(e,t,n){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=e[0];if(1===e.length)return M.call(this,r,t,n);var o,s=e.slice(1),a=this[r];if(o=this.hasOwnProperty(r)&&"object"==typeof a&&null!==a?V.setIn(a,s,t):L.call(_,s,t),this.hasOwnProperty(r)&&a===o)return this;var l=C(this,i(this));return l[r]=o,$(l)}function M(e,t,n){var r=n&&n.deep;if(this.hasOwnProperty(e)&&(r&&this[e]!==t&&c(t)&&c(this[e])&&(t=V.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=C(this,i(this));return o[e]=V(t),$(o)}function k(e,t){var n=Array.prototype.slice.call(arguments,2),r=this[e];return V.set(this,e,t.apply(r,[r].concat(n)))}function N(e,t){for(var n=0,r=t.length;null!=e&&n<r;n++)e=e[t[n]];return n&&n==r?e:void 0}function j(e,t){var n=Array.prototype.slice.call(arguments,2),r=N(this,e);return V.setIn(this,e,t.apply(r,[r].concat(n)))}function U(e,t){var n=N(this,e);return void 0===n?t:n}function F(e){var t,n=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(n[t]=O(this[t]));else for(t in this)this.hasOwnProperty(t)&&(n[t]=this[t]);return n}function B(){return{}}function $(e){return o.use_static||(s(e,"merge",T),s(e,"replace",x),s(e,"without",w),s(e,"asMutable",F),s(e,"set",M),s(e,"setIn",L),s(e,"update",k),s(e,"updateIn",j),s(e,"getIn",U)),h(e)}function V(e,t,n){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===r)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(V);if(Array.isArray(e))return S(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||s(i,"asMutable",I),h(i);var i,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:B)();for(var c in e)Object.getOwnPropertyDescriptor(e,c)&&(u[c]=V(e[c],void 0,n));return $(u)}function G(e){return function(){var t=[].slice.call(arguments),n=t.shift();return e.apply(n,t)}}function W(e,t){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?t.apply(r,n):e.apply(r,n)}}return V.from=V,V.isImmutable=l,V.ImmutableError=f,V.merge=G(T),V.replace=G(x),V.without=G(w),V.asMutable=(R=F,P=E,D=I,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?P.apply(t,e):t instanceof Date?D.apply(t,e):R.apply(t,e)}),V.set=W(M,m),V.setIn=W(L,y),V.update=G(k),V.updateIn=G(j),V.getIn=G(U),V.flatMap=G(b),V.asObject=G(A),o.use_static||(V.static=e({use_static:!0})),Object.freeze(V),V}();void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},7405:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(2505),o=n(7271);const i=(0,n(367).A)(Object.keys,Object);var s=Object.prototype.hasOwnProperty;const a=function(e){if(!(0,o.A)(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t};var l=n(8446);const u=function(e){return(0,l.A)(e)?(0,r.A)(e):a(e)}},7414:(e,t,n)=>{const r=n(144);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},7442:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 3H3v10h5zM3 2H2v12h7V2H3m1.833 2.834h2.75v.916h-2.75zm2.75 1.833h-2.75v.916h2.75zm2.75 2.75h1.833v.916h-1.833zm1.833 1.833h-1.833v.917h1.833zM4.833 8.5h2.75v.917h-2.75zM14 7.583H9.416V8.5h3.667v4.583H9.416V14H14V7.583" clip-rule="evenodd"></path></svg>'},7631:(e,t,n)=>{const r=n(8311);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},7638:(e,t,n)=>{const r=n(8311);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},7683:(e,t,n)=>{"use strict";n.d(t,{F3:()=>f,GT:()=>p,J9:()=>l,JF:()=>u,MT:()=>c,V1:()=>a});var r=n(1635),o=n(4819),i=n(2587),s=n(9160);function a(e,t,n){if(void 0===n&&(n=Error),!e)throw new n(t)}function l(e,t,n){return void 0===n&&(n={}),t.reduce((function(t,r){return r in e?t[r]=e[r]:r in n&&(t[r]=n[r]),t}),{})}var u={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:function(e){0},onWarn:function(e){0}};function c(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function d(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}function p(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,n=Intl.ListFormat,s=Intl.DisplayNames,a=(0,o.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))}),{cache:d(e.dateTime),strategy:o.W.variadic}),l=(0,o.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,(0,r.fX)([void 0],t,!1)))}),{cache:d(e.number),strategy:o.W.variadic}),u=(0,o.B)((function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,(0,r.fX)([void 0],t,!1)))}),{cache:d(e.pluralRules),strategy:o.W.variadic});return{getDateTimeFormat:a,getNumberFormat:l,getMessageFormat:(0,o.B)((function(e,t,n,o){return new i.S(e,t,n,(0,r.Cl)({formatters:{getNumberFormat:l,getDateTimeFormat:a,getPluralRules:u}},o||{}))}),{cache:d(e.message),strategy:o.W.variadic}),getRelativeTimeFormat:(0,o.B)((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,(0,r.fX)([void 0],e,!1)))}),{cache:d(e.relativeTime),strategy:o.W.variadic}),getPluralRules:u,getListFormat:(0,o.B)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(n.bind.apply(n,(0,r.fX)([void 0],e,!1)))}),{cache:d(e.list),strategy:o.W.variadic}),getDisplayNames:(0,o.B)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(s.bind.apply(s,(0,r.fX)([void 0],e,!1)))}),{cache:d(e.displayNames),strategy:o.W.variadic})}}function f(e,t,n,r){var o,i=e&&e[t];if(i&&(o=i[n]),o)return o;r(new s.OC("No ".concat(t," format named: ").concat(n)))}},7707:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getProxyReferrers:()=>m,getProxyUrl:()=>p,getWhetherUseProxy:()=>d,isDataSourcePremium:()=>I,isDataSourceSubscriber:()=>S,isDataSourceSubscriberOrPremium:()=>b,isPremium:()=>y,isSubscriber:()=>v,isUtilityPremium:()=>E,isUtilitySubscriber:()=>w,registerProxyReferrer:()=>h,unregisterProxyReferrer:()=>g});var r=n(3676),o=n(5689),i=n(9133),s=n(9459),a=n(1636),l=n(9129),u=n(1035),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function d(){var e,t;return!(null===(t=null===(e=(0,u.Vp)().getState())||void 0===e?void 0:e.appContext)||void 0===t?void 0:t.isInBuilder)}function p(e){var t,n;const r=null===(n=null===(t=(0,u.Vp)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.appProxies;if(!e||!r)return null;const o=Object.values(r);for(let t=0;t<o.length;t++){const n=o[t],r=n.sourceUrl.replace(/\/*$/g,""),i=n.proxyUrl;if(r&&i&&0===e.indexOf(r)){return i+e.replace(r,"")}}return null}const f=[];function h(e){"string"!=typeof e||f.includes(e)||f.push(e)}function g(e){const t=f.findIndex((t=>t===e));t>-1&&f.splice(t,1)}function m(){return f}function v(e,t){return function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription")}(e)||function(e){return e&&A.some((t=>t.test(e)))}(t)}function y(e,t){return function(e){var t;return null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits")}(e)||function(e){return e&&O.some((t=>t.test(e)))}(t)}function S(e){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);if(e.itemId){const t=s.A.getInstance().getDataSource(e.id);let n;return n=(0,i.isItemMixin)(t)?t.fetchItemInfo():x(e.portalUrl,e.itemId),n.then((t=>v(t,e.url))).catch((e=>(console.error("Failed to check whether data source is subscriber.",e),Promise.resolve(!1))))}return Promise.resolve(v(null,e.url))}function I(e){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);if(e.itemId){const t=s.A.getInstance().getDataSource(e.id);let n;return n=(0,i.isItemMixin)(t)?t.fetchItemInfo():x(e.portalUrl,e.itemId),n.then((t=>y(t,e.url))).catch((e=>(console.error("Failed to check whether data source is premium.",e),Promise.resolve(!1))))}return Promise.resolve(y(null,e.url))}function b(e){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);if(e.itemId){const t=s.A.getInstance().getDataSource(e.id);let n;if((0,i.isItemMixin)(t))n=t.fetchItemInfo();else{const t=T(e.portalUrl,e.itemId);C[t]||(C[t]=x(e.portalUrl,e.itemId)),n=C[t]}return n.then((t=>v(t,e.url)||y(t,e.url))).catch((e=>(console.error("Failed to check whether data source is subscriber or premium.",e),Promise.resolve(!1))))}return Promise.resolve(v(null,e.url)||y(null,e.url))}function w(e){return c(this,void 0,void 0,(function*(){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);try{if(e.itemId){return v((yield l.A.getInstance().getUtility(e.id)).itemInfo,e.url)}return Promise.resolve(v(null,e.url))}catch(e){return console.error("Failed to check whether utility is subscriber.",e),Promise.resolve(!1)}}))}function E(e){return c(this,void 0,void 0,(function*(){if(!e||!e.itemId&&!e.url)return Promise.resolve(!1);try{if(e.itemId){return y((yield l.A.getInstance().getUtility(e.id)).itemInfo,e.url)}return Promise.resolve(y(null,e.url))}catch(e){return console.error("Failed to check whether utility is premium.",e),Promise.resolve(!1)}}))}const A=[/demographics\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/route(\w|-)*\.arcgis\.com/i,/logistics\w*\.arcgis\.com/i,/analysis\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com(?!.*\/ElevationSync\/)/i,/sentinel\w*\.arcgis\.com/i,/oceans\w*\.arcgis\.com/i,/tiledbasemaps\w*\.arcgis\.com/i,/landscape\w*\.arcgis\.com/i,/hydro\w*\.arcgis\.com/i,/earthobs\w*\.arcgis\.com/i,/livefeeds\w*\.arcgis\.com/i,/historical\w*\.arcgis\.com/i],O=[/traffic\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/naip\w*\.arcgis\.com/i,/demographics\w*\.arcgis\.com/i,/route(\w|-)*\.arcgis\.com/i],C={};function T(e,t){return`${e}-${t}`}function x(e,t){const n=T(e,t);return C[n]||(C[n]=(0,a.requestWrapper)(e,(n=>(0,r.getItem)(t,{portal:(0,o.getPortalRestUrl)(e),authentication:n})))),C[n]}},7763:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(3537);function o(e,t){const n=(0,r.a)(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}},7808:(e,t,n)=>{"use strict";n.r(t),n.d(t,{compatibleParseOldUrlRule:()=>O,encodeForCompatibleMode:()=>A,encodeRFC3986URIComponent:()=>y,filterWidgetsEnable:()=>p,filterWidgetsEnabledParams:()=>f,getAppConfig:()=>a,getFullEncodedUrlHashObject:()=>b,getFullEncodedUrlHashWidgetParams:()=>w,isDataSelectionEnable:()=>E,isWidgetEnable:()=>u,isWidgetParamsEnable:()=>c,isWidgetsHashParamsType:()=>d,parseDsQueryObject:()=>v,parseHashObjToStr:()=>g,parseHashObject:()=>S,parseHashStrToObj:()=>h,parseQueryObjToStr:()=>m,stringifyHashObject:()=>I,updateUrl:()=>l});var r=n(1035),o=n(7390),i=n(8798),s=n(6319);function a(){var e,t,n;return window.jimuConfig.isBuilder?null===(t=null===(e=(0,r.Vp)().getState())||void 0===e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig:null===(n=(0,r.Vp)().getState())||void 0===n?void 0:n.appConfig}function l(e,t){const n=window._jimuHistory;try{t?n.browserHistory.replace(e):n.browserHistory.push(e)}catch(e){console.error("Failed to change browser history",e)}}function u(e){var t,n;const r=a();let o=!1;if(null==r?void 0:r.widgets){const n=r.widgets.getIn([e]);(null===(t=null==n?void 0:n.manifest.urlParameters)||void 0===t?void 0:t.length)>0&&(o=!0)}if(!o)return!1;const i=null===(n=r.urlParams)||void 0===n?void 0:n.getIn(["widgets",e]);if(i){return!!i.isEnable}return!1}function c(e,t){var n;let r=!0;const o=null===(n=a().urlParams)||void 0===n?void 0:n.getIn(["widgets",e]);return r=null==o?void 0:o.getIn(["params",t]),void 0===r&&(r=!0),r}function d(e){return/^widget_/.test(e)}function p(e){let t=Object.keys(e);return t=t.filter((e=>!u(e))),e=e.without(t)}function f(e){for(const t of Object.keys(e)){let n=e[t],r=n&&Object.keys(n);r=null==r?void 0:r.filter((e=>!c(t,e))),n=null==n?void 0:n.without(r),n&&(e=e.setIn([t],n))}return e}function h(e){let t={};t=i.A.parse(e,{decode:!1});for(const e of Object.keys(t)){let n;e===s.bA.Data_s?(n=S(t[e],s.bA.Data_s),t=Object.assign(t,n)):d(e)&&(n=S(t[e],s.bA.Widgets),t[e]=n)}return t}function g(e){let t=e;for(const e of Object.keys(t))if(e===s.bA.Data_s){const n=t[e];t=t.setIn([e],n)}else if(d(e)){const n=I(t[e]);t=t.setIn([e],n)}let n=i.A.stringify(t,{skipNull:!0,skipEmptyString:!0,encode:!1});return n&&(n="#"+n),n}function m(e){let t=null;(null==e?void 0:e.data_filter)&&(t={data_filter:e.data_filter});let n=e;(null==n?void 0:n.data_filter)&&(n.without?n=n.without("data_filter"):delete n.data_filter);let r=i.A.stringify(n);return t&&(r=r+"&"+i.A.stringify(t,{encode:!1})),r}function v(e,t){let n=e;if(t){/^dataSource_[^%]*%3A/.test(e)&&(n=decodeURIComponent(e))}return S(n,s.bA.Widgets)}function y(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function S(e,t,n){"object"==typeof e&&(null==e?void 0:e.length)&&(null==e?void 0:e.length)>0&&(e=e[0]);let r=o({});if(t===s.bA.Data_s)return r.set(s.bA.Data_s,decodeURIComponent(e));const{compatibleMode:i=!0}=null!=n?n:{};i&&e&&(e=A(e));try{const t=null==e?void 0:e.split(",");null==t||t.forEach((e=>{const t=e.split(":"),n=t[0];let o=null;try{o=decodeURIComponent(t[1])}catch(e){console.warn(e)}r=r.set(n,o)}))}catch(e){console.warn(e)}return r}function I(e){let t="";try{let n=!0;for(const r of Object.keys(e))n||(t+=","),t+=r+":"+e[r],n=!1}catch(e){console.warn(e)}return t}function b(e){if(e)for(const t of Object.keys(e)){const n=e[t];if(t===s.bA.Data_s){const r=encodeURIComponent(n);e=e.setIn([t],r)}else if(d(t))for(const r of Object.keys(n)){const o=encodeURIComponent(n[r]);e=e.setIn([t,r],o)}}return e}function w(e){if(e)for(const t of Object.keys(e)){const n=e[t];e=e.setIn([t],encodeURIComponent(n))}return e}function E(){var e;const t=null===(e=a().urlParams)||void 0===e?void 0:e.getIn(["general","dataSelection","isEnable"]);return!(void 0!==t&&!t)}function A(e){let t=e;return t=function(e){let t=e;/^dataSource_[^%]*%3A/.test(e)&&(t=e.replace(/%3A/g,":"));return t}(t),t}function O(e){const t=["data_filter"],n={};for(const r in e){const o=e[r];if(t.includes(r))n[decodeURIComponent(r)]=o;else{const e=C(r,o);n[e.key]=e.value}}return n}function C(e,t){let n=null,r=null;try{n=decodeURIComponent(e);try{r=decodeURIComponent(t)}catch(e){console.warn(e)}}catch(e){console.warn(e)}return{key:n,value:r}}},7896:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 1.53V0H1v1.53h.07l5.374 5.288v6.121l2.26 2.224a.5.5 0 0 0 .852-.356V6.825l5.382-5.295zM2 1h12v.049L8.556 6.406l-.001 7.207-1.111-1.093V6.399L2 1.042z" clip-rule="evenodd"></path></svg>'},7927:e=>{"use strict";e.exports=function(e,t,n,r,o,i,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,s,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},8030:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#151515" fill-rule="evenodd" d="M3.793 14.8A9.2 9.2 0 0 1 0 14.089l1.01-5.97v1.866a.99.99 0 0 0 .55.88l-.435 2.572a9.5 9.5 0 0 0 2.668.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-.284-1.674c.393-.14.664-.501.688-.917v-.63a1.09 1.09 0 0 0-1.1-1h-.018l-.197-1.162V6a1 1 0 0 0-.326-.73l-.483-2.857a7.2 7.2 0 0 0-2.27-.4 5.9 5.9 0 0 0-2.367.435A7.8 7.8 0 0 1 5.294 3a11.4 11.4 0 0 1-2.359-.26L2.553 5H2.01a.97.97 0 0 0-.497.152l.62-3.664A10.4 10.4 0 0 0 5.294 2c2.688 0 2.721-.986 5.412-.986a8.2 8.2 0 0 1 3.161.674L16 14.29a6.62 6.62 0 0 0-3.793-1.09c-3.665 0-4.749 1.6-8.414 1.6M2.01 9.985h.785v-1.85h.011l1.407 1.85H5v-.3L3.563 7.877 5 6.2v-.18q.002-.01.004-.021h-.796L2.795 7.713V6H2.01zm11.99 0v-.628h-1.215V6H12v3.985zM6 6.02V10h.865V6.73l.013-.012L8.09 10h.865l1.188-3.282h.013V10H11V6.02H9.601l-1.07 3.02h-.014L7.446 6.02z" clip-rule="evenodd"></path></svg>'},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(null,arguments)}n.d(t,{A:()=>r})},8192:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(5157),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class i{constructor(){this.lastLocalState={},this.initialized=!1,this.restoreFunctions=[],this.shouldRestoreLocalState=!1}static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._appStateManager:(i.instance||(i.instance=new i,window._appStateManager=i.instance),i.instance)}static isSupportLocalState(){const e=!!window.indexedDB,t=!window.jimuConfig.isBuilder&&!window.jimuConfig.isSite&&!window.jimuConfig.isInBuilder;return e&&t}init(){return o(this,void 0,void 0,(function*(){if(this.initialized)return this;this.localStateCache=new r.IndexedDBCache("init","app_state_mananger","local_state"),yield this.localStateCache.init();const e=yield this.localStateCache.getAllKeys(),t=yield this.localStateCache.getAll();return e.forEach(((e,n)=>{const r=t[n];null!=r&&(this.lastLocalState[e]=r)})),Object.freeze(this.lastLocalState),this.initialized=!0,this}))}isLocalStateRestored(){return this.shouldRestoreLocalState}putLocalState(e,t){return o(this,void 0,void 0,(function*(){this.initialized&&(yield this.localStateCache.put(e,t))}))}getLocalState(e){return o(this,void 0,void 0,(function*(){if(this.initialized)return yield this.localStateCache.get(e)}))}getLastLocalState(e){if(this.initialized)return this.lastLocalState[e]}existLocalState(){return!!this.initialized&&Object.keys(this.lastLocalState).length>0}registerRestoreFunction(e){this.initialized&&(this.shouldRestoreLocalState?e(this.lastLocalState):this.restoreFunctions.includes(e)||this.restoreFunctions.push(e))}restoreLocalState(){if(this.initialized){this.shouldRestoreLocalState=!0;for(const e of this.restoreFunctions)e(this.lastLocalState)}}}const s=i},8221:(e,t,n)=>{var r=n(3805),o=n(124),i=n(9374),s=Math.max,a=Math.min;e.exports=function(e,t,n){var l,u,c,d,p,f,h=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=u;return l=u=void 0,h=t,d=e.apply(r,n)}function S(e){var n=e-f;return void 0===f||n>=t||n<0||m&&e-h>=c}function I(){var e=o();if(S(e))return b(e);p=setTimeout(I,function(e){var n=t-(e-f);return m?a(n,c-(e-h)):n}(e))}function b(e){return p=void 0,v&&l?y(e):(l=u=void 0,d)}function w(){var e=o(),n=S(e);if(l=arguments,u=this,f=e,n){if(void 0===p)return function(e){return h=e,p=setTimeout(I,t),g?y(e):d}(f);if(m)return clearTimeout(p),p=setTimeout(I,t),y(f)}return void 0===p&&(p=setTimeout(I,t)),d}return t=i(t)||0,r(n)&&(g=!!n.leading,c=(m="maxWait"in n)?s(i(n.maxWait)||0,t):c,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==p&&clearTimeout(p),h=0,l=f=u=p=void 0},w.flush=function(){return void 0===p?d:b(o())},w}},8249:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 2h14v12H1zm13 1H2v4h12zm0 5h-3v2h3zm0 3h-3v2h3zm-4 2v-2H6v2zm-5 0v-2H2v2zm-3-3h3V8H2zm8-2v2H6V8z" clip-rule="evenodd"></path></svg>'},8311:(e,t,n)=>{const r=/\s+/g;class o{constructor(e,t){if(t=s(t),e instanceof o)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new o(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!v(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&y(e[0])){this.set=[e];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&g)|(this.options.loose&&m))+":"+e,n=i.get(t);if(n)return n;const r=this.options.loose,o=r?c[d.HYPHENRANGELOOSE]:c[d.HYPHENRANGE];e=e.replace(o,P(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(c[d.COMPARATORTRIM],p),l("comparator trim",e),e=e.replace(c[d.TILDETRIM],f),l("tilde trim",e),e=e.replace(c[d.CARETTRIM],h),l("caret trim",e);let s=e.split(" ").map((e=>I(e,this.options))).join(" ").split(/\s+/).map((e=>R(e,this.options)));r&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(c[d.COMPARATORLOOSE]))))),l("range list",s);const u=new Map,y=s.map((e=>new a(e,this.options)));for(const e of y){if(v(e))return[e];u.set(e.value,e)}u.size>1&&u.has("")&&u.delete("");const S=[...u.values()];return i.set(t,S),S}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Range is required");return this.set.some((n=>S(n,t)&&e.set.some((e=>S(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(D(this.set[t],e,this.options))return!0;return!1}}e.exports=o;const i=new(n(8794)),s=n(8587),a=n(3904),l=n(7272),u=n(3908),{safeRe:c,t:d,comparatorTrimReplace:p,tildeTrimReplace:f,caretTrimReplace:h}=n(9718),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:m}=n(6874),v=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,S=(e,t)=>{let n=!0;const r=e.slice();let o=r.pop();for(;n&&r.length;)n=r.every((e=>o.intersects(e,t))),o=r.pop();return n},I=(e,t)=>(l("comp",e,t),e=A(e,t),l("caret",e),e=w(e,t),l("tildes",e),e=C(e,t),l("xrange",e),e=x(e,t),l("stars",e),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,w=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{const n=t.loose?c[d.TILDELOOSE]:c[d.TILDE];return e.replace(n,((t,n,r,o,i)=>{let s;return l("tilde",e,t,n,r,o,i),b(n)?s="":b(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:b(o)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:i?(l("replaceTilde pr",i),s=`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${o} <${n}.${+r+1}.0-0`,l("tilde return",s),s}))},A=(e,t)=>e.trim().split(/\s+/).map((e=>O(e,t))).join(" "),O=(e,t)=>{l("caret",e,t);const n=t.loose?c[d.CARETLOOSE]:c[d.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,o,i,s)=>{let a;return l("caret",e,t,n,o,i,s),b(n)?a="":b(o)?a=`>=${n}.0.0${r} <${+n+1}.0.0-0`:b(i)?a="0"===n?`>=${n}.${o}.0${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.0${r} <${+n+1}.0.0-0`:s?(l("replaceCaret pr",s),a="0"===n?"0"===o?`>=${n}.${o}.${i}-${s} <${n}.${o}.${+i+1}-0`:`>=${n}.${o}.${i}-${s} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${i}-${s} <${+n+1}.0.0-0`):(l("no pr"),a="0"===n?"0"===o?`>=${n}.${o}.${i}${r} <${n}.${o}.${+i+1}-0`:`>=${n}.${o}.${i}${r} <${n}.${+o+1}.0-0`:`>=${n}.${o}.${i} <${+n+1}.0.0-0`),l("caret return",a),a}))},C=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>T(e,t))).join(" ")),T=(e,t)=>{e=e.trim();const n=t.loose?c[d.XRANGELOOSE]:c[d.XRANGE];return e.replace(n,((n,r,o,i,s,a)=>{l("xRange",e,n,r,o,i,s,a);const u=b(o),c=u||b(i),d=c||b(s),p=d;return"="===r&&p&&(r=""),a=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&p?(c&&(i=0),s=0,">"===r?(r=">=",c?(o=+o+1,i=0,s=0):(i=+i+1,s=0)):"<="===r&&(r="<",c?o=+o+1:i=+i+1),"<"===r&&(a="-0"),n=`${r+o}.${i}.${s}${a}`):c?n=`>=${o}.0.0${a} <${+o+1}.0.0-0`:d&&(n=`>=${o}.${i}.0${a} <${o}.${+i+1}.0-0`),l("xRange return",n),n}))},x=(e,t)=>(l("replaceStars",e,t),e.trim().replace(c[d.STAR],"")),R=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(c[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),P=e=>(t,n,r,o,i,s,a,l,u,c,d,p)=>`${n=b(r)?"":b(o)?`>=${r}.0.0${e?"-0":""}`:b(i)?`>=${r}.${o}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=b(u)?"":b(c)?`<${+u+1}.0.0-0`:b(d)?`<${u}.${+c+1}.0-0`:p?`<=${u}.${c}.${d}-${p}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),D=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(l(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},8327:(e,t,n)=>{var r=n(6018).FilterCSS,o=n(2048),i=n(5930),s=i.parseTag,a=i.parseAttr,l=n(9349);function u(e){return null==e}function c(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=o.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map((function(e){return e.toLowerCase()})):t[n.toLowerCase()]=e[n];return t}(e.whiteList||e.allowList):e.whiteList=o.whiteList,e.onTag=e.onTag||o.onTag,e.onTagAttr=e.onTagAttr||o.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||o.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||o.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,e.escapeHtml=e.escapeHtml||o.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new r(e.css))}c.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,i=t.onIgnoreTag,c=t.onTagAttr,d=t.onIgnoreTagAttr,p=t.safeAttrValue,f=t.escapeHtml,h=this.cssFilter;t.stripBlankChar&&(e=o.stripBlankChar(e)),t.allowCommentTag||(e=o.stripCommentTag(e));var g=!1;t.stripIgnoreTagBody&&(g=o.StripTagBody(t.stripIgnoreTagBody,i),i=g.onIgnoreTag);var m=s(e,(function(e,t,o,s,g){var m={sourcePosition:e,position:t,isClosing:g,isWhite:Object.prototype.hasOwnProperty.call(n,o)},v=r(o,s,m);if(!u(v))return v;if(m.isWhite){if(m.isClosing)return"</"+o+">";var y=function(e){var t=l.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=l.trim(e.slice(0,-1))),{html:e,closing:n}}(s),S=n[o],I=a(y.html,(function(e,t){var n=-1!==l.indexOf(S,e),r=c(o,e,t,n);return u(r)?n?(t=p(o,e,t,h))?e+'="'+t+'"':e:u(r=d(o,e,t,n))?void 0:r:r}));return s="<"+o,I&&(s+=" "+I),y.closing&&(s+=" /"),s+=">"}return u(v=i(o,s,m))?f(s):v}),f);return g&&(m=g.remove(m)),m},e.exports=c},8335:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(8562),o=n(1917);const i=(0,r.A)(o.A,"Map")},8418:(e,t,n)=>{"use strict";e.exports=n(5160)},8427:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C1 1.567 4.134 0 8 0s7 1.567 7 3.5M2 5.304V6.5C2 7.692 4.615 9 8 9s6-1.308 6-2.5V5.304C12.775 6.32 10.546 7 8 7s-4.775-.68-6-1.696M8 10c2.546 0 4.775-.68 6-1.696V9.5c0 1.192-2.615 2.5-6 2.5s-6-1.308-6-2.5V8.304C3.225 9.32 5.454 10 8 10m6 1.304C12.775 12.32 10.546 13 8 13s-4.775-.68-6-1.696V12.5C2 13.692 4.615 15 8 15s6-1.308 6-2.5zM14 3.5C14 4.692 11.385 6 8 6S2 4.692 2 3.5 4.615 1 8 1s6 1.308 6 2.5" clip-rule="evenodd"></path></svg>'},8446:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(9610),o=n(5254);const i=function(e){return null!=e&&(0,o.A)(e.length)&&!(0,r.A)(e)}},8562:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(9610);const o=n(1917).A["__core-js_shared__"];var i,s=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";const a=function(e){return!!s&&s in e};var l=n(3149),u=n(1121),c=/^\[object .+?Constructor\]$/,d=Function.prototype,p=Object.prototype,f=d.toString,h=p.hasOwnProperty,g=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const m=function(e){return!(!(0,l.A)(e)||a(e))&&((0,r.A)(e)?g:c).test((0,u.A)(e))};const v=function(e,t){return null==e?void 0:e[t]};const y=function(e,t){var n=v(e,t);return m(n)?n:void 0}},8587:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},8629:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m1 0a3 3 0 1 1-6 0 3 3 0 0 1 6 0M0 14.09 1.2 7h1.014l-1.09 6.437a9.5 9.5 0 0 0 2.669.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a7.2 7.2 0 0 0-2.27-.399 5.9 5.9 0 0 0-2.367.434q-.165.06-.339.12V1.506a6.9 6.9 0 0 1 2.706-.493 8.2 8.2 0 0 1 3.161.674L16 14.29a6.62 6.62 0 0 0-3.793-1.089c-1.833 0-3.02.4-4.207.8s-2.375.8-4.207.8A9.2 9.2 0 0 1 0 14.09M10 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 1a2 2 0 1 0 0-4 2 2 0 0 0 0 4m-3.223.916 1.5-1-.554-.832-1.5 1zm.444-5.798 1.092.898-.635.773-1.093-.899zM5 11.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0m1 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" clip-rule="evenodd"></path></svg>'},8781:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(241);const o=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};var i=n(2049),s=n(1882),a=r.A?r.A.prototype:void 0,l=a?a.toString:void 0;const u=function e(t){if("string"==typeof t)return t;if((0,i.A)(t))return o(t,e)+"";if((0,s.A)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const c=function(e){return null==e?"":u(e)}},8794:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},8798:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r={};n.r(r),n.d(r,{exclude:()=>T,extract:()=>b,parse:()=>w,parseUrl:()=>A,pick:()=>C,stringify:()=>E,stringifyUrl:()=>O});const o="%[a-f0-9]{2}",i=new RegExp("("+o+")|([^%]+?)","gi"),s=new RegExp("("+o+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(1===e.length)return e;t=t||1;const n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function l(e){try{return decodeURIComponent(e)}catch{let t=e.match(i)||[];for(let n=1;n<t.length;n++)t=(e=a(t,n).join("")).match(i)||[];return e}}function u(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return decodeURIComponent(e)}catch{return function(e){const t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"};let n=s.exec(e);for(;n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{const e=l(n[0]);e!==n[0]&&(t[n[0]]=e)}n=s.exec(e)}t["%C2"]="\ufffd";const r=Object.keys(t);for(const n of r)e=e.replace(new RegExp(n,"g"),t[n]);return e}(e)}}function c(e,t){const n={};if(Array.isArray(t))for(const r of t){const t=Object.getOwnPropertyDescriptor(e,r);t?.enumerable&&Object.defineProperty(n,r,t)}else for(const r of Reflect.ownKeys(e)){const o=Object.getOwnPropertyDescriptor(e,r);if(o.enumerable){t(r,e[r],e)&&Object.defineProperty(n,r,o)}}return n}function d(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===e||""===t)return[];const n=e.indexOf(t);return-1===n?[]:[e.slice(0,n),e.slice(n+t.length)]}const p=e=>null==e,f=e=>encodeURIComponent(e).replaceAll(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),h=Symbol("encodeFragmentIdentifier");function g(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function m(e,t){return t.encode?t.strict?f(e):encodeURIComponent(e):e}function v(e,t){return t.decode?u(e):e}function y(e){return Array.isArray(e)?e.sort():"object"==typeof e?y(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function S(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function I(e,t,n){return"string"===n&&"string"==typeof e?e:"function"==typeof n&&"string"==typeof e?n(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"number"!==n||Number.isNaN(Number(e))||"string"!=typeof e||""===e.trim()?t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?Number(e):e:Number(e):"true"===e.toLowerCase()}function b(e){const t=(e=S(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function w(e,t){g((t={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,types:Object.create(null),...t}).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)]$/.exec(e),e=e.replace(/\[\d*]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[])$/.exec(e),e=e.replace(/\[]$/,""),t?void 0!==r[e]?r[e]=[...r[e],n]:r[e]=[n]:r[e]=n};case"colon-list-separator":return(e,n,r)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[...r[e],n]:r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const o="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!o&&v(n,e).includes(e.arrayFormatSeparator);n=i?v(n,e):n;const s=o||i?n.split(e.arrayFormatSeparator).map((t=>v(t,e))):null===n?n:v(n,e);r[t]=s};case"bracket-separator":return(t,n,r)=>{const o=/(\[])$/.test(t);if(t=t.replace(/\[]$/,""),!o)return void(r[t]=n?v(n,e):n);const i=null===n?[]:v(n,e).split(e.arrayFormatSeparator);void 0!==r[t]?r[t]=[...r[t],...i]:r[t]=i};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[...[n[e]].flat(),t]:n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const o of e.split("&")){if(""===o)continue;const e=t.decode?o.replaceAll("+"," "):o;let[i,s]=d(e,"=");void 0===i&&(i=e),s=void 0===s?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?s:v(s,t),n(v(i,t),s,r)}for(const[e,n]of Object.entries(r))if("object"==typeof n&&null!==n&&"string"!==t.types[e])for(const[r,o]of Object.entries(n)){const i=t.types[e]?t.types[e].replace("[]",""):void 0;n[r]=I(o,t,i)}else"object"==typeof n&&null!==n&&"string"===t.types[e]?r[e]=Object.values(n).join(t.arrayFormatSeparator):r[e]=I(n,t,t.types[e]);return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return e[t]=Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?y(n):n,e}),Object.create(null))}function E(e,t){if(!e)return"";g((t={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...t}).arrayFormatSeparator);const n=n=>t.skipNull&&p(e[n])||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[m(t,e),"[",o,"]"].join("")]:[...n,[m(t,e),"[",m(o,e),"]=",m(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[m(t,e),"[]"].join("")]:[...n,[m(t,e),"[]=",m(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[m(t,e),":list="].join("")]:[...n,[m(t,e),":list=",m(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,o)=>void 0===o||e.skipNull&&null===o||e.skipEmptyString&&""===o?r:(o=null===o?"":o,0===r.length?[[m(n,e),t,m(o,e)].join("")]:[[r,m(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,m(t,e)]:[...n,[m(t,e),"=",m(r,e)].join("")]}}(t),o={};for(const[t,r]of Object.entries(e))n(t)||(o[t]=r);const i=Object.keys(o);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const o=e[n];return void 0===o?"":null===o?m(n,t):Array.isArray(o)?0===o.length&&"bracket-separator"===t.arrayFormat?m(n,t)+"[]":o.reduce(r(n),[]).join("&"):m(n,t)+"="+m(o,t)})).filter((e=>e.length>0)).join("&")}function A(e,t){t={decode:!0,...t};let[n,r]=d(e,"#");return void 0===n&&(n=e),{url:n?.split("?")?.[0]??"",query:w(b(e),t),...t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:v(r,t)}:{}}}function O(e,t){t={encode:!0,strict:!0,[h]:!0,...t};const n=S(e.url).split("?")[0]||"";let r=E({...w(b(e.url),{sort:!1}),...e.query},t);r&&=`?${r}`;let o=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);if("string"==typeof e.fragmentIdentifier){const r=new URL(n);r.hash=e.fragmentIdentifier,o=t[h]?r.hash:`#${e.fragmentIdentifier}`}return`${n}${r}${o}`}function C(e,t,n){n={parseFragmentIdentifier:!0,[h]:!1,...n};const{url:r,query:o,fragmentIdentifier:i}=A(e,n);return O({url:r,query:c(o,t),fragmentIdentifier:i},n)}function T(e,t,n){return C(e,Array.isArray(t)?e=>!t.includes(e):(e,n)=>!t(e,n),n)}const x=r},8816:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M5 1H2v1h3zM0 14.09 1.2 7h1.014l-1.09 6.437a9.5 9.5 0 0 0 2.669.363 11 11 0 0 0 3.888-.748 12.8 12.8 0 0 1 4.526-.852 8.3 8.3 0 0 1 2.489.376l-1.72-10.163a7.2 7.2 0 0 0-2.27-.399 5.9 5.9 0 0 0-2.367.434q-.165.06-.339.12V1.506a6.9 6.9 0 0 1 2.706-.493 8.2 8.2 0 0 1 3.161.674L16 14.29a6.62 6.62 0 0 0-3.793-1.089c-1.833 0-3.02.4-4.207.8s-2.375.8-4.207.8A9.2 9.2 0 0 1 0 14.09M2 3h5v1H2zm6 3V5H2v1z" clip-rule="evenodd"></path></svg>'},8857:(e,t,n)=>{"use strict";n.d(t,{E:()=>B});var r=n(1635),o=n(4293),i=n(2587),s=n(9160),a=n(7683);function l(e,t){return Object.keys(e).reduce((function(n,o){return n[o]=(0,r.Cl)({timeZone:t},e[o]),n}),{})}function u(e,t){return Object.keys((0,r.Cl)((0,r.Cl)({},e),t)).reduce((function(n,o){return n[o]=(0,r.Cl)((0,r.Cl)({},e[o]||{}),t[o]||{}),n}),{})}function c(e,t){if(!t)return e;var n=i.S.formats;return(0,r.Cl)((0,r.Cl)((0,r.Cl)({},n),e),{date:u(l(n.date,t),l(e.date||{},t)),time:u(l(n.time,t),l(e.time||{},t))})}var d=function(e,t,n,i,l){var u=e.locale,d=e.formats,p=e.messages,f=e.defaultLocale,h=e.defaultFormats,g=e.fallbackOnEmptyString,m=e.onError,v=e.timeZone,y=e.defaultRichTextElements;void 0===n&&(n={id:""});var S=n.id,I=n.defaultMessage;(0,a.V1)(!!S,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var b=String(S),w=p&&Object.prototype.hasOwnProperty.call(p,b)&&p[b];if(Array.isArray(w)&&1===w.length&&w[0].type===o.ZE.literal)return w[0].value;if(!i&&w&&"string"==typeof w&&!y)return w.replace(/'\{(.*?)\}'/gi,"{$1}");if(i=(0,r.Cl)((0,r.Cl)({},y),i||{}),d=c(d,v),h=c(h,v),!w){if(!1===g&&""===w)return w;if((!I||u&&u.toLowerCase()!==f.toLowerCase())&&m(new s.sb(n,u)),I)try{return t.getMessageFormat(I,f,h,l).format(i)}catch(e){return m(new s.Ho('Error formatting default message for: "'.concat(b,'", rendering default message verbatim'),u,n,e)),"string"==typeof I?I:b}return b}try{return t.getMessageFormat(w,u,d,(0,r.Cl)({formatters:t},l||{})).format(i)}catch(e){m(new s.Ho('Error formatting message: "'.concat(b,'", using ').concat(I?"default message":"id"," as fallback."),u,n,e))}if(I)try{return t.getMessageFormat(I,f,h,l).format(i)}catch(e){m(new s.Ho('Error formatting the default message for: "'.concat(b,'", rendering message verbatim'),u,n,e))}return"string"==typeof w?w:"string"==typeof I?I:b},p=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function f(e,t,n,o){var i=e.locale,s=e.formats,l=e.onError,u=e.timeZone;void 0===o&&(o={});var c=o.format,d=(0,r.Cl)((0,r.Cl)({},u&&{timeZone:u}),c&&(0,a.F3)(s,t,c,l)),f=(0,a.J9)(o,p,d);return"time"!==t||f.hour||f.minute||f.second||f.timeStyle||f.dateStyle||(f=(0,r.Cl)((0,r.Cl)({},f),{hour:"numeric",minute:"numeric"})),n(i,f)}function h(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,l="string"==typeof o?new Date(o||0):o;try{return f(e,"date",t,a).format(l)}catch(t){e.onError(new s.pg("Error formatting date.",e.locale,t))}return String(l)}function g(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,l="string"==typeof o?new Date(o||0):o;try{return f(e,"time",t,a).format(l)}catch(t){e.onError(new s.pg("Error formatting time.",e.locale,t))}return String(l)}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=n[2],l=void 0===a?{}:a,u="string"==typeof o?new Date(o||0):o,c="string"==typeof i?new Date(i||0):i;try{return f(e,"dateTimeRange",t,l).formatRange(u,c)}catch(t){e.onError(new s.pg("Error formatting date time range.",e.locale,t))}return String(u)}function v(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,l="string"==typeof o?new Date(o||0):o;try{return f(e,"date",t,a).formatToParts(l)}catch(t){e.onError(new s.pg("Error formatting date.",e.locale,t))}return[]}function y(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=n[0],i=n[1],a=void 0===i?{}:i,l="string"==typeof o?new Date(o||0):o;try{return f(e,"time",t,a).formatToParts(l)}catch(t){e.onError(new s.pg("Error formatting time.",e.locale,t))}return[]}var S=n(1732),I=["style","type","fallback","languageDisplay"];function b(e,t,n,r){var o=e.locale,i=e.onError;Intl.DisplayNames||i(new S.IF('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',S.O4.MISSING_INTL_API));var l=(0,a.J9)(r,I);try{return t(o,l).of(n)}catch(e){i(new s.pg("Error formatting display name.",o,e))}}var w=["type","style"],E=Date.now();function A(e,t,n,r){void 0===r&&(r={});var o=O(e,t,n,r).reduce((function(e,t){var n=t.value;return"string"!=typeof n?e.push(n):"string"==typeof e[e.length-1]?e[e.length-1]+=n:e.push(n),e}),[]);return 1===o.length?o[0]:0===o.length?"":o}function O(e,t,n,o){var i=e.locale,l=e.onError;void 0===o&&(o={}),Intl.ListFormat||l(new S.IF('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',S.O4.MISSING_INTL_API));var u=(0,a.J9)(o,w);try{var c={},d=n.map((function(e,t){if("object"==typeof e){var n=function(e){return"".concat(E,"_").concat(e,"_").concat(E)}(t);return c[n]=e,n}return String(e)}));return t(i,u).formatToParts(d).map((function(e){return"literal"===e.type?e:(0,r.Cl)((0,r.Cl)({},e),{value:c[e.value]||e.value})}))}catch(e){l(new s.pg("Error formatting list.",i,e))}return n}var C=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function T(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var s=n.format,l=s&&(0,a.F3)(o,"number",s,i)||{};return t(r,(0,a.J9)(n,C,l))}function x(e,t,n,r){void 0===r&&(r={});try{return T(e,t,r).format(n)}catch(t){e.onError(new s.pg("Error formatting number.",e.locale,t))}return String(n)}function R(e,t,n,r){void 0===r&&(r={});try{return T(e,t,r).formatToParts(n)}catch(t){e.onError(new s.pg("Error formatting number.",e.locale,t))}return[]}var P=["type"];function D(e,t,n,r){var o=e.locale,i=e.onError;void 0===r&&(r={}),Intl.PluralRules||i(new S.IF('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',S.O4.MISSING_INTL_API));var l=(0,a.J9)(r,P);try{return t(o,l).select(n)}catch(e){i(new s.pg("Error formatting plural.",o,e))}return"other"}var _=["numeric","style"];function L(e,t,n,r,o){void 0===o&&(o={}),r||(r="second"),Intl.RelativeTimeFormat||e.onError(new S.IF('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',S.O4.MISSING_INTL_API));try{return function(e,t,n){var r=e.locale,o=e.formats,i=e.onError;void 0===n&&(n={});var s=n.format,l=!!s&&(0,a.F3)(o,"relative",s,i)||{};return t(r,(0,a.J9)(n,_,l))}(e,t,o).format(n,r)}catch(t){e.onError(new s.pg("Error formatting relative time.",e.locale,t))}return String(n)}function M(e){var t;e.onWarn&&e.defaultRichTextElements&&"string"==typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&e.onWarn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.github.io/docs/getting-started/message-distribution')}var k=n(1071),N=n(8972),j=n(4184);function U(e){return e?Object.keys(e).reduce((function(t,n){var r=e[n];return t[n]=(0,k.RK)(r)?(0,j.yU)(r):r,t}),{}):e}var F=function(e,t,n,o){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];var a=U(o),l=d.apply(void 0,(0,r.fX)([e,t,n,a],i,!1));return Array.isArray(l)?N.Children.toArray(l):l},B=function(e,t){var n=e.defaultRichTextElements,o=(0,r.Tt)(e,["defaultRichTextElements"]),i=U(n),l=function(e,t){var n=(0,a.GT)(t),o=(0,r.Cl)((0,r.Cl)({},a.JF),e),i=o.locale,l=o.defaultLocale,u=o.onError;return i?!Intl.NumberFormat.supportedLocalesOf(i).length&&u?u(new s.hr('Missing locale data for locale: "'.concat(i,'" in Intl.NumberFormat. Using default locale: "').concat(l,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(i).length&&u&&u(new s.hr('Missing locale data for locale: "'.concat(i,'" in Intl.DateTimeFormat. Using default locale: "').concat(l,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(u&&u(new s.uo('"locale" was not configured, using "'.concat(l,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),o.locale=o.defaultLocale||"en"),M(o),(0,r.Cl)((0,r.Cl)({},o),{formatters:n,formatNumber:x.bind(null,o,n.getNumberFormat),formatNumberToParts:R.bind(null,o,n.getNumberFormat),formatRelativeTime:L.bind(null,o,n.getRelativeTimeFormat),formatDate:h.bind(null,o,n.getDateTimeFormat),formatDateToParts:v.bind(null,o,n.getDateTimeFormat),formatTime:g.bind(null,o,n.getDateTimeFormat),formatDateTimeRange:m.bind(null,o,n.getDateTimeFormat),formatTimeToParts:y.bind(null,o,n.getDateTimeFormat),formatPlural:D.bind(null,o,n.getPluralRules),formatMessage:d.bind(null,o,n),$t:d.bind(null,o,n),formatList:A.bind(null,o,n.getListFormat),formatListToParts:O.bind(null,o,n.getListFormat),formatDisplayName:b.bind(null,o,n.getDisplayNames)})}((0,r.Cl)((0,r.Cl)((0,r.Cl)({},j.JF),o),{defaultRichTextElements:i}),t),u={locale:l.locale,timeZone:l.timeZone,fallbackOnEmptyString:l.fallbackOnEmptyString,formats:l.formats,defaultLocale:l.defaultLocale,defaultFormats:l.defaultFormats,messages:l.messages,onError:l.onError,defaultRichTextElements:i};return(0,r.Cl)((0,r.Cl)({},l),{formatMessage:F.bind(null,u,l.formatters),$t:F.bind(null,u,l.formatters)})}},8964:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m9.5.332-.641.189-7.5 2.5L1 3.126V12H0v1h7v2H2v1h11v-1H8v-2h8v-1H9.5V6H14v6h1V5H9.5zM8.5 12V1.67L2 3.874V12z" clip-rule="evenodd"></path></svg>'},8972:e=>{"use strict";e.exports=n},8996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},9042:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(3831),o=n(6489),i=n(7405);const s=function(e){return(0,r.A)(e,i.A,o.A)}},9129:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(3676),o=n(6888),i=n(1035),s=n(9359),a=n(6048),l=n(5689),u=n(1636),c=n(4820),d=n(2089),p=n(4502),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class h{static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._utilityManager:(h.instance||(h.instance=new h,window._utilityManager=h.instance),h.instance)}static isPrintingTask(e){var t;let n=!1,r=!1;return null===(t=e.parameters)||void 0===t||t.forEach((e=>{"web_map_as_json"===e.name.toLowerCase()&&"esriGPParameterDirectionInput"===e.direction&&(n=!0),"output_file"===e.name.toLowerCase()&&"GPDataFile"===e.dataType&&"esriGPParameterDirectionOutput"===e.direction&&(r=!0)})),n&&r}static getServiceInfo(e,t){return f(this,void 0,void 0,(function*(){let n=h.getInstance().getUrlUsedForRequest(e);const r={};if(n.includes("?")){const e=new URLSearchParams(n.split("?")[1]);n=n.split("?")[0];for(const[t,n]of e.entries())"f"!==t&&(r[t]=n)}return yield(0,u.requestWrapper)(e,(e=>f(this,void 0,void 0,(function*(){return yield o.request(n,{params:Object.assign(Object.assign({},r),{f:"json"}),authentication:e,httpMethod:"GET"})}))),1,t)}))}static getGPServerInfo(e,t){return f(this,void 0,void 0,(function*(){const n=yield h.getServiceInfo(e,t);if(!n)return null;const r=[];for(let t=0;t<n.tasks.length;t++){const o=n.tasks[t];try{const t=yield h.getServiceInfo(`${e}/${o}`),n={name:o};h.isPrintingTask(t)&&(n.isPrintingTask=!0),r.push(n)}catch(e){console.error(e),r.push({name:o})}}return{type:s.JX.GPServer,info:Object.assign(Object.assign({},n),{tasks:r})}}))}constructor(){this.portalUtilitiesPromise={},window.jimuConfig.isBuilder&&console.error("UtilityManager should not be created in builder"),(0,i.Yz)(this.onUtilitiesChange.bind(this),["appConfig","utilities"]),(0,i.Yz)(this.onResourceSessionsChange.bind(this),["resourceSessions"])}onUtilitiesChange(e,t){e&&t&&Object.keys(e).forEach((n=>{var r;const o=e[n];t[n]||o.portalUrl&&(null===(r=this.portalUtilitiesPromise[o.portalUrl])||void 0===r?void 0:r[o.itemId])&&delete this.portalUtilitiesPromise[o.portalUrl][o.itemId]}))}onResourceSessionsChange(e,t){for(const n of Object.keys(this.portalUtilitiesPromise||{})){const r=a.Cv.getInstance().getSessionKeyFromUrl(n),o=l.getStandardPortalUrl(r);e[o]!==t[o]&&delete this.portalUtilitiesPromise[n]}}urlExist(e){var t,n,r;const o=null!==(r=null===(n=null===(t=(0,i.Vp)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.utilities)&&void 0!==r?r:{};return Object.keys(o).some((t=>{const n=o[t];return"org"!==n.source&&!n.itemId&&n.url===e}))}itemExist(e,t){var n,r,o;const s=null!==(o=null===(r=null===(n=(0,i.Vp)().getState())||void 0===n?void 0:n.appConfig)||void 0===r?void 0:r.utilities)&&void 0!==o?o:{};return Object.keys(s).some((n=>{const r=s[n];return r.itemId===t&&r.portalUrl===e}))}getLabelOfUseUtility(e){var t,n;if(e.task)return e.task;const r=this.getUtilityJson(e.utilityId);return"org"===r.source&&r.index>=0?r.taskName:null!==(n=null!==(t=r.label)&&void 0!==t?t:r.name)&&void 0!==n?n:r.sourceLabel}getUrlUsedForRequest(e){return e}getUrlOfUseUtility(e){return f(this,void 0,void 0,(function*(){const{utilityId:t,task:n}=e,r=yield this.getUtility(t);let o;return o=n?`${r.url}/${n}`:r.url,this.getUrlUsedForRequest(o)}))}getIdOfOrgUtility(e,t,n,r){var o,s,a;const l=null!==(a=null===(s=null===(o=(0,i.Vp)().getState())||void 0===o?void 0:o.appConfig)||void 0===s?void 0:s.utilities)&&void 0!==a?a:{};let u=null;return Object.keys(l).some((o=>{const i=l[o];if("org"===i.source)if(n>=0){if(i.taskName===r&&i.url===t&&i.index>=0)return u=o,!0}else if(i.name===e&&i.url===t)return u=o,!0;return!1})),u}isUtilityUsed(e){var t,n;const r=null===(n=null===(t=(0,i.Vp)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.widgets;return Object.keys(null!=r?r:{}).some((t=>{var n;return(null!==(n=r[t].useUtilities)&&void 0!==n?n:[]).some((t=>t.utilityId===e))}))}getUtilityJson(e){var t,n,r;return null===(r=null===(n=null===(t=(0,i.Vp)().getState())||void 0===t?void 0:t.appConfig)||void 0===n?void 0:n.utilities)||void 0===r?void 0:r[e]}getUtilityFromJson(e){return f(this,void 0,void 0,(function*(){var t;if(!e)return null;const{id:n}=e;if(null==e.itemId){const r={utilityId:n,url:e.url};if(/\/rest\/services\/.*\/GPServer\/?$/.test(e.url))if((null===(t=e.tasks)||void 0===t?void 0:t.length)>0)r.tasks=[...e.tasks];else{const{info:t}=yield h.getGPServerInfo(e.url);r.tasks=t.tasks}return r}const{portalUrl:r,itemId:o}=e;if(this.portalUtilitiesPromise[r]||(this.portalUtilitiesPromise[r]={}),this.portalUtilitiesPromise[r][o]){const t=yield this.portalUtilitiesPromise[r][o];return(null==t?void 0:t.tasks)&&t.tasks.forEach((t=>{const n=e.tasks.find((e=>e.name===t.name));n&&"visible"in n&&(t.visible=n.visible)})),t}return yield this.createUtilityOfItem(e)}))}getUtility(e){return f(this,void 0,void 0,(function*(){const t=this.getUtilityJson(e),n=yield this.getUtilityFromJson(t);if(null==n)throw new Error(`Utility ${e} is not found`);return n}))}getUrlOfItem(e,t){return f(this,void 0,void 0,(function*(){const n=a.Cv.getInstance().getSessionByUrl(e);return yield r.getItem(t,{portal:(0,l.getPortalRestUrl)(e),authentication:n}).then((e=>e.url)).catch((n=>(console.error("Get url failed",e,t,n),null)))}))}utilityHasSignInError(e){var t;const n=null===(t=(0,i.Vp)().getState().appConfig.utilities)||void 0===t?void 0:t[e];if(n){const e=n.url,t=a.Cv.getInstance().getNoPermissionResourceInfoList()||{};if(Object.keys(t).find((t=>e.includes(t))))return!0}return!1}reportUtilityState(e,t,n=!1){if(window.jimuConfig.isBuilder){(0,d.getModuleSync)("jimu-for-builder").builderAppSync.publishUtilityStateChangeToApp(e,t,n)}else(0,i.Vp)().dispatch(c.utilityStateChange(e,t,n))}createUtilityOfItem(e){return f(this,void 0,void 0,(function*(){const{portalUrl:t,itemId:n,url:r,id:o,sourceLabel:i}=e,a={utilityId:o,url:r};return this.portalUtilitiesPromise[t][n]=this.fetchPortalItemUtility(e).then((t=>{var n;if(a.itemInfo=t,i!==t.title&&this.updateSourceLabelOfItem(e,t.title),/\/rest\/services\/.*\/GPServer\/?$/.test(r)){if((null===(n=e.tasks)||void 0===n?void 0:n.length)>0){const t=e.tasks.asMutable({deep:!0});return{type:s.JX.GPServer,info:{tasks:t}}}return h.getGPServerInfo(r)}})).then((e=>((null==e?void 0:e.info)&&(a.tasks=e.info.tasks),a))).catch((e=>(console.error("Create utility failed",t,n,e),null))),this.portalUtilitiesPromise[t][n]}))}updateSourceLabelOfItem(e,t){var n;const{id:r}=e;let o=null===(n=(0,i.Vp)().getState())||void 0===n?void 0:n.appConfig;o&&(o=o.setIn(["utilities",r,"sourceLabel"],t),(0,p.changeAppConfig)(o))}fetchPortalItemUtility(e){const{portalUrl:t,itemId:n}=e;if(!t||!n)return null;const o=a.Cv.getInstance().getSessionByUrl(t);return r.getItem(n,{portal:(0,l.getPortalRestUrl)(t),authentication:o})}checkUtilityStatus(e){return f(this,void 0,void 0,(function*(){try{const{portalUrl:t,itemId:n}=e;t&&n&&(yield this.fetchPortalItemUtility(e));const r=this.getUrlUsedForRequest(e.url);return yield h.getServiceInfo(r),this.reportUtilityState(e.id,!0),{success:!0}}catch(t){console.error(t);let n=!1;return("GWM_0003"===t.code||t.isSignInError)&&(n=!0),this.reportUtilityState(e.id,!1,n),{success:!1,isSignInError:n}}}))}}const g=h},9133:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NON_COUNT_AFFECTING_QUERY_PARAMS_KEYS:()=>jn,_getFixedLayerIdByLayerDefinition:()=>kt,areDatesInUnknownTimezone:()=>xn,areDerivedFromSameMain:()=>Qt,areFieldCodedValuesAffectedByTypeIdField:()=>bt,areQueryParamsEmpty:()=>Un,changeJSAPIGeometryTypeToRestAPIGeometryType:()=>v,changeJimuArcGISQueryToJSAPIQuery:()=>C,changeJimuRecordsToJSAPIGraphics:()=>y,changeJimuTimeToJSAPITimeExtent:()=>I,changeRestAPIGeometryTypeToJSAPIGeometryType:()=>m,changeToJSAPIGraphic:()=>A,changeToRestAPIFeature:()=>E,checkIsSuggestionRepeat:()=>Qe,containsNonLatinCharacter:()=>Q,convertFieldToJimuField:()=>ht,convertStringToNumber:()=>tt,createJSAPIFeatureLayerByDataSourceFromFeatureCollectionItem:()=>Tn,createJSAPIFeatureLayerByRecords:()=>h,createRestAPILayerByDataSource:()=>Cn,createRestFeatureLayerByRecords:()=>g,createSQLClause:()=>se,createSQLClauseSet:()=>ae,createSQLExpression:()=>le,dataSourceJsonCreator:()=>r,doesDsSupportQuery:()=>Fn,doesJSAPILayerSupportTime:()=>pn,ensureWhereClauseMatchesSubtype:()=>re,fetchAssociatedFeatureLayerDefinition:()=>Pe,fetchAssociatedFeatureLayerUrl:()=>De,fetchAssociatedFeatureServicePortalItem:()=>Le,fetchSuggestionByFullText:()=>ze,fetchSuggestionByWhere:()=>qe,filterAttachments:()=>ft,findAssociatedFeatureLayerUrl:()=>Me,findMapServiceDataSource:()=>vn,fixLayerId:()=>Dt,getArcGISSQL:()=>V,getAssumedAssociatedLayerUrl:()=>_e,getChildDataSourceId:()=>Ut,getChildDsJsonFromRootDs:()=>Dn,getCodedValueListForCodedValueOrSubtypeField:()=>It,getDataSourceIdByJSAPILayer:()=>zt,getDataSourceProxyUrl:()=>Be,getDataViewId:()=>tn,getDateFieldValue:()=>_n,getDateFieldValueWithoutTzOffset:()=>Ln,getDisplayValueForCodedValueOrSubtype:()=>yt,getDisplayValueForCodedValueOrSubtypeBatch:()=>St,getDisplayedSQLExpressionFromGroupSQLExpression:()=>ce,getDsIcon:()=>Ve,getDsTypeString:()=>$e,getExportOptions:()=>wn,getFieldInfoByFieldName:()=>vt,getFixedLayerIdByLayer:()=>_t,getFixedLayerIdByLayerDefinition:()=>Mt,getFullArcGISServiceUrl:()=>Fe,getJSAPILayer:()=>yn,getJimuDataSourceRelationship:()=>Nn,getJimuLayerIdByJSAPILayer:()=>qt,getLabelFromArcGISServiceUrl:()=>ke,getLayerDefinition:()=>In,getLayerDefinitionIntersection:()=>An,getLocalTimeOffset:()=>Z,getMainDataSourceId:()=>Zt,getMainOriginDataSource:()=>kn,getMergedSQLExpressions:()=>ue,getOriginDataLabel:()=>Ht,getPopupInfo:()=>bn,getPopupInfoIntersection:()=>En,getQueryParamsAndOptions:()=>Ft,getRealDataSourceId:()=>Gt,getRegOfSearchText:()=>Je,getRelatedMainDataSourceWithOriginInfo:()=>On,getRestAPILayer:()=>Sn,getRootDataSourceId:()=>en,getSQL:()=>et,getSQLExpressionFromGroupSQLExpression:()=>de,getSortedArrayByLabel:()=>jt,getSortedDataViewIds:()=>Bn,getSuggestionItem:()=>Ze,getSuggestions:()=>Ke,getTimeZoneOffsetByName:()=>Rn,getTimezoneAPIFromRuntime:()=>Pn,getUrlByLayer:()=>Vt,getUseDataSourceByDataSource:()=>Wt,getUseDataSourceByDataSourceId:()=>nn,getUsedFieldsFromFeatureLayerQueryParams:()=>Mn,getWhetherDataSourceHasSameSourceWithJSAPILayer:()=>Kt,getWhetherUseProxy:()=>c.getWhetherUseProxy,handleGlobalIdField:()=>$,isAGOLHostedService:()=>Pt,isDataView:()=>Xt,isDerivedFrom:()=>Yt,isFeatureLayerDsOrSceneLayerDsOrImageryLayer:()=>x,isItemMixin:()=>R,isJSAPILayerTypeSupported:()=>Nt,isNumericalField:()=>mt,isOwnerOrOrgAdminOfDataSource:()=>an,isSelectionView:()=>sn,isSupportedArcGISService:()=>je,isSupportedSingleArcGISLayerService:()=>Ue,isSupportedWholeArcGISService:()=>Ne,isWhereClauseEmpty:()=>ie,mapUseDataSource:()=>on,mapUseDataSources:()=>rn,mergeSubtypeSublayerWhereClausesToSubtypeGroupLayer:()=>ne,mergeTimeExtent:()=>fn,parserSQL:()=>W,queryAllAttachments:()=>pt,queryFeatureCountByField:()=>Bt,queryRecordsByFullText:()=>Ye,querySuggestions:()=>He,queryValueLabelsByFieldAndPageSize:()=>$t,selectBySelectionMode:()=>at,supportAttachment:()=>cn,supportReplica:()=>ln,supportSymbol:()=>un,supportTime:()=>dn});var r={};n.r(r),n.d(r,{createDataSourceJson:()=>he,createDataSourceJsonByItemData:()=>ye,createDataSourceJsonByItemInfo:()=>me,createDataSourceJsonByJSAPILayer:()=>ge,createDataSourceJsonByLayerDefinition:()=>Se,getDataSourceTypeFromArcGISWholeServiceUrl:()=>Ie});var o=n(6888),i=n(5074),s=n(3702),a=n(9459),l=n(508),u=n(1636),c=n(7707),d=n(3096),p=n(806),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function h(e,t,n,r){return f(this,void 0,void 0,(function*(){try{const o=yield function(e,t){return f(this,void 0,void 0,(function*(){var n,r,o,i;try{const s=yield y(t);if(!s)return null;const a=e.getSchema(),l=null===(n=null==a?void 0:a.fields)||void 0===n?void 0:n[e.getIdField()];if(!l)return null;const u=e.getLayerDefinition(),c=function(e,t,n){if(!e||!t)return null;return Object.keys(e).map((r=>{const o=function(e,t){var n,r;return{name:e.name,alias:e.alias,type:w(e.type,e.esriType),domain:b(null===(r=null===(n=null==t?void 0:t.fields)||void 0===n?void 0:n.find((t=>t.name===e.name)))||void 0===r?void 0:r.domain)}}(e[r],n);return o.name===t.name&&(o.type="oid"),o}))}(null==a?void 0:a.fields,l,u);if(!c)return null;const d=m(e.getGeometryType())||null,p={fields:c,objectIdField:l.name,source:s,geometryType:d,spatialReference:null===(r=e.getMainDataSource().layer)||void 0===r?void 0:r.spatialReference,fullExtent:null===(o=e.getMainDataSource().layer)||void 0===o?void 0:o.fullExtent,typeIdField:null==u?void 0:u.typeIdField,sourceJSON:u};let f;try{f=t.length>0?null===(i=t[0].feature.layer)||void 0===i?void 0:i.renderer:void 0}catch(e){}return f&&(p.renderer=f),p}catch(e){return console.error("Failed to get constructor options of JS API client-side feature layer.",e),null}}))}(e,t),i=new(yield(0,p.p)("esri/layers/FeatureLayer"))(Object.assign(Object.assign({},o),r)),s=!(null==r?void 0:r.popupTemplate)&&e.getPopupInfo();if(s){const e=yield(0,p.p)("esri/PopupTemplate");i.popupEnabled=!0,i.popupTemplate=e.fromJSON(s)}else i.popupEnabled=!!(null==r?void 0:r.popupTemplate);return i.title=e.getLabel()||e.getDataSourceJson().sourceLabel,{layer:i,sourceVersion:n}}catch(e){return console.error("Feature layer data source error: failed to create feature layer with source records. ",e),{layer:null,sourceVersion:n}}}))}function g(e,t,n){if(!e)return null;return{layer:{id:e.id,layerType:"ArcGISFeatureLayer",title:e.getLabel(),featureCollection:{layers:[{layerDefinition:e.getLayerDefinition(),popupInfo:e.getPopupInfo(),featureSet:{geometryType:e.getGeometryType(),features:S(t)}}]}},sourceVersion:n}}function m(e){return{esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"}[e]}function v(e){return{point:"esriGeometryPoint",multipoint:"esriGeometryMultipoint",polyline:"esriGeometryPolyline",polygon:"esriGeometryPolygon",extent:"esriGeometryEnvelope"}[e]}function y(e){return e?Promise.allSettled(e.filter((e=>null==e?void 0:e.feature)).map((e=>{if("esri.Graphic"===e.feature.declaredClass){const t=e.feature.clone();return t.attributes=Object.assign({},e.feature.attributes),t}return O(e.feature)}))).then((e=>e.filter((e=>"fulfilled"===e.status)).map((e=>e.value)))):Promise.resolve(null)}function S(e){return e?e.filter((e=>null==e?void 0:e.feature)).map((e=>"esri.Graphic"===e.feature.declaredClass?e.feature.toJSON():e.feature)):null}function I(e){const t=Array.isArray(e);let n;return(t||"number"==typeof e)&&(n={start:T(t?e[0]:e),end:T(t?e[1]:e)}),n}function b(e){var t,n;return e?"inherited"===e.type?{type:"inherited"}:"range"===e.type?{type:"range",minValue:null===(t=e.range)||void 0===t?void 0:t[0],maxValue:null===(n=e.range)||void 0===n?void 0:n[1]}:"codedValue"===e.type?{type:"coded-value",codedValues:e.codedValues}:null:null}function w(e,t){if(t)switch(t){case s.oX.Date:return"date";case s.oX.Double:return"double";case s.oX.GlobalID:return"global-id";case s.oX.GUID:return"guid";case s.oX.Integer:return"integer";case s.oX.OID:return"oid";case s.oX.Single:return"single";case s.oX.SmallInteger:return"small-integer";case s.oX.XML:return"xml";case s.oX.BigInteger:return"big-integer"}switch(e){case s.Eo.Number:return"double";case s.Eo.Date:return"date";default:return"string"}}function E(e){return"esri.Graphic"===e.declaredClass?e.toJSON():e}function A(e){return f(this,void 0,void 0,(function*(){return"esri.Graphic"===e.declaredClass?yield Promise.resolve(e):yield O(e)}))}function O(e){return f(this,void 0,void 0,(function*(){return yield(0,p.e)(["esri/Graphic"]).then((t=>{const n=t[0],r=Object.assign({},e);return r.attributes=Object.assign({},e.attributes),n.fromJSON(r)}))}))}function C(e,t){const n=(null==e?void 0:e.type)===l.hg.SceneLayer?null==e?void 0:e.getAssociatedDataSource():e;if(!n||!t)return null;const r=t.asMutable({deep:!0});return(0,p.e)(["esri/geometry/support/jsonUtils"]).then((o=>{var i,s,a,l,u;const c=o[0];if("number"==typeof t.pageSize){const e=null!==(i=t.page)&&void 0!==i?i:1;r.start=(e-1)*t.pageSize,r.num=t.pageSize,null!==n.getMaxRecordCount()&&(1===e?r.num=Math.min(n.getMaxRecordCount(),t.pageSize):e*t.pageSize>n.getMaxRecordCount()&&(r.num=n.getMaxRecordCount()-(e-1)*t.pageSize)),delete r.page,delete r.pageSize}return t.geometry&&(r.geometry=c.fromJSON(r.geometry)),t.geometryType&&delete r.geometryType,t.spatialRel&&(r.spatialRelationship={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within"}[r.spatialRel],delete r.spatialRel),t.units&&(r.units={esriSRUnit_StatuteMile:"miles",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_Meter:"meters",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}[r.units]),t.outSR&&("number"==typeof t.outSR?r.outSpatialReference={wkid:t.outSR}:r.outSpatialReference=t.outSR,delete r.outSR),n.getGDBVersion()&&(r.gdbVersion=n.getGDBVersion()),(null===(s=r.outStatistics)||void 0===s?void 0:s.length)||(null===(a=r.outFields)||void 0===a?void 0:a.length)||(r.outFields=[e.getIdField()]),(null===(l=r.objectIds)||void 0===l?void 0:l.length)&&(r.objectIds=r.objectIds.map((e=>+e)).filter((e=>!isNaN(e)))),null!=t.time&&(r.timeExtent=I(t.time)),delete r.time,(null===(u=r.outStatistics)||void 0===u?void 0:u.length)>0&&(r.outStatistics=r.outStatistics.map((e=>{var t;return"percentile_cont"===e.statisticType?e.statisticType="percentile-continuous":"percentile_disc"===e.statisticType&&(e.statisticType="percentile-discrete"),(null===(t=e.statisticParameters)||void 0===t?void 0:t.orderBy)&&(e.statisticParameters.orderBy=e.statisticParameters.orderBy.toUpperCase()),e}))),r}))}function T(e){return"number"==typeof e?new Date(e):null}function x(e){return(null==e?void 0:e.type)===l.hg.FeatureLayer||(null==e?void 0:e.type)===l.hg.SceneLayer||(null==e?void 0:e.type)===l.hg.ImageryLayer||(null==e?void 0:e.type)===l.hg.OrientedImageryLayer||(null==e?void 0:e.type)===l.hg.ImageryTileLayer}function R(e){const t=e;return!!((null==t?void 0:t.id)&&(null==t?void 0:t.getItemData)&&(null==t?void 0:t.getItemInfo)&&(null==t?void 0:t.fetchItemData)&&(null==t?void 0:t.fetchItemInfo))}var P=n(6962),D=n(7390),_=n(9875);const L=n(430),M=864e5,k=6e4,N=1e3,j={equals:{op:"= ?"},doesNotEqual:{op:"<> ?"},isAtLeast:{op:">= ?"},isAtMost:{op:"<= ?"},isLessThan:{op:"< ?"},isGreaterThan:{op:"> ?"},isBetween:{op:"BETWEEN ?",sep:" AND "},isNotBetween:{op:"NOT BETWEEN ?",sep:" AND "},contains:{op:"LIKE ?",mod:"%{0}%"},doesNotContain:{op:"NOT LIKE ?",mod:"%{0}%"},startsWith:{op:"LIKE ?",mod:"{0}%"},doesNotStartWith:{op:"NOT LIKE ?",mod:"{0}%"},endsWith:{op:"LIKE ?",mod:"%{0}"},doesNotEndWith:{op:"NOT LIKE ?",mod:"%{0}"},isAnyOf:{op:"IN ?",mod:"[{0}]",type:"IN"},isNoneOf:{op:"NOT IN ?",mod:"[{0}]",type:"IN"}};function U(e){let t="";switch(e){case i.a0.NumberOperatorIs:case i.a0.StringOperatorIs:case i.a0.DateOperatorIsOn:case i.a0.DateOnlyOperatorIsOn:case i.a0.TimeOnlyOperatorIsOn:case i.a0.NumberOperatorIsBlank:case i.a0.StringOperatorIsBlank:case i.a0.DateOperatorIsBlank:t="equals";break;case i.a0.NumberOperatorIsNot:case i.a0.StringOperatorIsNot:case i.a0.DateOperatorIsNotOn:case i.a0.DateOnlyOperatorIsNotOn:case i.a0.TimeOnlyOperatorIsNotOn:case i.a0.NumberOperatorIsNotBlank:case i.a0.StringOperatorIsNotBlank:case i.a0.DateOperatorIsNotBlank:t="doesNotEqual";break;case i.a0.NumberOperatorIsAtLeast:case i.a0.DateOperatorIsOnOrAfter:case i.a0.TimeOnlyOperatorIsOnOrAfter:t="isAtLeast";break;case i.a0.NumberOperatorIsAtMost:case i.a0.DateOperatorIsOnOrBefore:case i.a0.TimeOnlyOperatorIsOnOrBefore:t="isAtMost";break;case i.a0.NumberOperatorIsLessThan:case i.a0.DateOperatorIsBefore:case i.a0.DateOnlyOperatorIsBefore:case i.a0.TimeOnlyOperatorIsBefore:t="isLessThan";break;case i.a0.NumberOperatorIsGreaterThan:case i.a0.DateOperatorIsAfter:case i.a0.DateOnlyOperatorIsAfter:case i.a0.TimeOnlyOperatorIsAfter:t="isGreaterThan";break;case i.a0.NumberOperatorIsBetween:case i.a0.DateOperatorIsBetween:case i.a0.DateOnlyOperatorIsBetween:case i.a0.TimeOnlyOperatorIsBetween:t="isBetween";break;case i.a0.NumberOperatorIsNotBetween:case i.a0.DateOperatorIsNotBetween:case i.a0.DateOnlyOperatorIsNotBetween:case i.a0.TimeOnlyOperatorIsNotBetween:t="isNotBetween";break;case i.a0.NumberOperatorIsAnyOf:case i.a0.StringOperatorIsAnyOf:case i.a0.DateOperatorIsIn:t="isAnyOf";break;case i.a0.NumberOperatorIsNoneOf:case i.a0.StringOperatorIsNoneOf:case i.a0.DateOperatorIsNotIn:t="isNoneOf";break;case i.a0.StringOperatorContains:t="contains";break;case i.a0.StringOperatorDoesNotContain:t="doesNotContain";break;case i.a0.StringOperatorStartsWith:t="startsWith";break;case i.a0.StringOperatorEndsWith:t="endsWith";break;case i.a0.StringOperatorDoesNotStartWith:t="doesNotStartWith";break;case i.a0.StringOperatorDoesNotEndWith:t="doesNotEndWith"}return t}function F(e,t,n,r=!1,o=!1){if(e.includes("BLANK"))return n.fieldAlias+(e.includes("NOT")?" IS NOT NULL":" IS NULL");let s=U(e);if(e.includes("DATE")||e.includes("TIME"))switch(e){case i.a0.DateOperatorIsOn:case i.a0.DateOnlyOperatorIsOn:s=r?"is":o?"isAt":"isOn";break;case i.a0.DateOperatorIsNotOn:case i.a0.DateOnlyOperatorIsNotOn:s=r?"isNot":o?"isNotAt":"isNotOn";break;case i.a0.TimeOnlyOperatorIsOn:s="isAt";break;case i.a0.TimeOnlyOperatorIsNotOn:s="isNotAt";break;case i.a0.DateOperatorIsIn:s="isIn";break;case i.a0.DateOperatorIsNotIn:s="isNotIn";break;case i.a0.DateOperatorIsBefore:case i.a0.DateOnlyOperatorIsBefore:case i.a0.TimeOnlyOperatorIsBefore:s="isBefore";break;case i.a0.DateOperatorIsAfter:case i.a0.DateOnlyOperatorIsAfter:case i.a0.TimeOnlyOperatorIsAfter:s="isAfter";break;case i.a0.DateOperatorIsOnOrBefore:case i.a0.DateOnlyOperatorIsOnOrBefore:case i.a0.TimeOnlyOperatorIsOnOrBefore:s=o?"isAtOrBefore":"isOnOrBefore";break;case i.a0.DateOperatorIsOnOrAfter:case i.a0.DateOnlyOperatorIsOnOrAfter:case i.a0.TimeOnlyOperatorIsOnOrAfter:s=o?"isAtOrAfter":"isOnOrAfter";break;case i.a0.DateOperatorIsInTheLast:s="isInTheLast";break;case i.a0.DateOperatorIsNotInTheLast:s="isNotInTheLast";break;case i.a0.DateOperatorIsInTheNext:s="isInTheNext";break;case i.a0.DateOperatorIsNotInTheNext:s="isNotInTheNext"}return t.formatMessage({id:s+"ForDisplaySQL"},n)}var B;function $(e,t){const n=e.asMutable({deep:!0});let r=!1;return n.parts&&function e(n){n.parts.forEach((function(o,a){if(o.type===i.KI.Set)e(o);else{const e=o;if(e.customSQL)return;const l=t[e.jimuFieldName],u=e.valueOptions.value;if(l&&l.type===s.Eo.String&&(l.esriType===s.oX.GlobalID||l.esriType===s.oX.GUID)&&(null==u?void 0:u.length)>0&&[i.a0.StringOperatorIs,i.a0.StringOperatorIsNot,i.a0.StringOperatorIsAnyOf,i.a0.StringOperatorIsNoneOf,i.a0.StringOperatorStartsWith].includes(e.operator)){let t=[];u.forEach((e=>{const n=e.value;if(36!==n.length&&38!==n.length)t.push(null);else{t.push(e);const r=n.includes("{")?n.replace(/{(.*?)}/g,"$1"):`{${n}}`;t.push(Object.assign(Object.assign({},e),{value:r,label:r}))}})),t=t.filter((e=>null!==e)),0===t.length&&(t=null);const o=e.operator===i.a0.StringOperatorIs?i.a0.StringOperatorIsAnyOf:e.operator===i.a0.StringOperatorIsNot?i.a0.StringOperatorIsNoneOf:e.operator;let s=e.valueOptions;e.operator===i.a0.StringOperatorStartsWith&&(s=Object.assign(Object.assign({},s),{sourceType:i.Zc.MultipleSelectFromPredefined,inputEditor:"MULTIPLE_PREDEFINED_SELECTOR"}));const l=Object.assign(Object.assign({},e),{operator:o,valueOptions:Object.assign(Object.assign({},s),{value:t})});n.parts[a]=l,r=!0}}}))}(n),r?D(n):e}function V(e,t,n){var r,o;n=n||(0,P.getIntl)();const a={sqlExpression:e,sql:"",displaySQL:""};if(!e||!t)return a;const l=t.getSchema().fields,u=Pt(t.url),c=null===(o=(r=t).getLayerDefinition)||void 0===o?void 0:o.call(r),d=((null==(p=c)?void 0:p.version)||(null==p?void 0:p.currentVersion))>=10.2&&(null==p?void 0:p.useStandardizedQueries);var p;const f=function(e){let t=0;(null==e?void 0:e.dateFieldsTimeReference)&&"UTC"!==e.dateFieldsTimeReference.timeZone&&(t=60*(L[e.dateFieldsTimeReference.timeZone]||0)*60*1e3);return t}(c),h=xn(t),g=t.isSqlCaseSensitive,m=function e(r){if(!r.parts)return a;const o=r.logicalOperator?r.logicalOperator:i.Mg.And,c=[],p=[];r.parts.forEach((function(r){if(r.type===i.KI.Set){const t=e(r);t.sql&&c.push(G(t.sql)?t.sql:`(${t.sql})`),p.push(G(t.displaySQL)?t.displaySQL:`(${t.displaySQL})`)}else{const e=r;if(e.customSQL)return c.push(`(${e.customSQL})`),void p.push(`(${e.customSQL||e.customDisplaySQL})`);const o=l[e.jimuFieldName],a=o?o.type:null;if(!a)return;const m=e.valueOptions.value?e.valueOptions.value.asMutable({deep:!0}):null,v={fieldAlias:o.alias||o.name,value:"?",endValue:"?"};e.valueOptions.sourceType===i.Zc.Field?function(e){const{fields:t,fieldObj:n,clause:r,sqlList:o,displaySqlList:i,vals:s,labelValues:a,intl:l}=e;let u="",c="";const d=j[U(r.operator)];if(null!==s){u=s[0].value;const e=t[u],r=e.alias||e.name;a.value=r,a.endValue=r;const i=K(d.op,u);o.push("("+n.name+" "+i+")")}c=F(r.operator,l,a),i.push("("+c+")")}({fields:l,fieldObj:o,clause:e,sqlList:c,displaySqlList:p,vals:m,labelValues:v,intl:n}):a===s.Eo.Date?function(e){var t,n,r,o,s,a,l,u,c,d,p,f;const{fieldObj:h,clause:g,sqlList:m,displaySqlList:v,vals:y,labelValues:S,isDateInForUnknownTZ:I,timeZoneOffset:b,isHosted:w,useStandardizedQuery:E,dataSource:A,intl:O}=e;let C="",T="",x=!1,R=!1,P=g.valueOptions.inputEditor;if(null===y){if(g.operator.indexOf("BLANK")>0){const e=g.operator.indexOf("NOT")>0?"NOT ":"";m.push("("+h.name+" IS "+e+"NULL)")}"SIMPLE_SELECT"===P||"UNIQUE_PILL_WRAP_SELECTOR"===P?(null===(t=h.format)||void 0===t?void 0:t.dateFormat)&&h.format.dateFormat.includes("Time")&&(x=!0):x=P.includes("TIME")}else if("NUMBER_LIST_SELECTOR"===P&&null===y[0].value)S.endValue=O.formatMessage({id:y[0].label.toLowerCase()});else{y&&"NUMBER_LIST_SELECTOR"!==P&&"SIMPLE_SELECT"!==P&&"UNIQUE_PILL_WRAP_SELECTOR"!==P&&y.forEach((e=>{e&&"number"==typeof e.value&&(!I&&e.isUTC||(e.value=e.value+Z()))}));const e=E?"timestamp ":"";let t,v=null===(n=y[0])||void 0===n?void 0:n.value,T=!1;if("SIMPLE_SELECT"===P||"UNIQUE_PILL_WRAP_SELECTOR"===P){let e=B.DateTimeShort;P="DATE_TIME_PICKER",x=!0,(null===(r=h.format)||void 0===r?void 0:r.dateFormat)&&(h.format.dateFormat.includes("LongTime")?e=B.DateTimeLong:h.format.dateFormat.includes("Time")||(x=!1,P="DATE_PICKER",e=B.Date)),S.value=ee(new Date(_n(v,A)),P,null===(o=h.format)||void 0===o?void 0:o.dateFormat,O),v=te(v,e,I),t=v,T=!0}else if("NUMBER_LIST_SELECTOR"===P)v=null,S.value=y[0].value,S.endValue=O.formatMessage({id:y[0].label.toLowerCase()});else{const e=null===(s=y[1])||void 0===s?void 0:s.value;if(null===y[0])v=null;else if("string"==typeof v){R=!0,S.value=O.formatMessage({id:z(y[0].value)});const n=(0,_.getRealDateByVirtualDate)(v,O);v=te(n[0]||n,B.Date),void 0!==n.length?t=te(n[1],B.Date):e||(t=v,P="DATE_PICKER")}else x=P.includes("TIME"),S.value=ee(new Date(_n(v,A)),P,null===(a=h.format)||void 0===a?void 0:a.dateFormat,O),t=v;if(null===y[1])R=!1,t=null;else if(e){let n;if(R=!1,"string"==typeof e){n=O.formatMessage({id:z(y[1].value)});const r=(0,_.getRealDateByVirtualDate)(e,O);t=te(r[0]||r,B.Date),P="DATE_PICKER"}else n=ee(new Date(_n(e,A)),P,null===(l=h.format)||void 0===l?void 0:l.dateFormat,O),t=e;S.endValue=n}}const D=v?e+"'"+X(v,b,T&&I)+"'":null,L=t?e+"'"+function(e,t,n,r,o=!1){let i;"DATE_PICKER"===n||"DOUBLE_DATE_PICKER"===n||"DATE_RANGE_SELECTOR"===n?i=e+M:"DATE_TIME_PICKER"!==n&&"DOUBLE_DATE_TIME_PICKER"!==n||(i=r&&r.includes("LongTime")?e+N:e+k);return X(i,t,o)}(t,b,P,null===(u=h.format)||void 0===u?void 0:u.dateFormat,T&&I)+"'":null;switch(g.operator){case i.a0.DateOperatorIsOn:C="("+h.name+" BETWEEN "+D+" AND "+L+") AND "+h.name+" <> "+L;break;case i.a0.DateOperatorIsNotOn:C=h.name+" < "+D+" OR "+h.name+" >= "+L;break;case i.a0.DateOperatorIsBefore:C=h.name+" < "+D;break;case i.a0.DateOperatorIsAfter:C=h.name+" > "+L;break;case i.a0.DateOperatorIsOnOrBefore:C=h.name+" <= "+L;break;case i.a0.DateOperatorIsOnOrAfter:C=h.name+" >= "+D;break;case i.a0.DateOperatorIsInTheLast:C=h.name+" BETWEEN CURRENT_TIMESTAMP - "+H(y[0].value,null===(c=y[0])||void 0===c?void 0:c.label,w)+" AND CURRENT_TIMESTAMP";break;case i.a0.DateOperatorIsNotInTheLast:C=h.name+" NOT BETWEEN CURRENT_TIMESTAMP - "+H(y[0].value,null===(d=y[0])||void 0===d?void 0:d.label,w)+" AND CURRENT_TIMESTAMP";break;case i.a0.DateOperatorIsInTheNext:C=h.name+" BETWEEN CURRENT_TIMESTAMP AND CURRENT_TIMESTAMP + "+H(y[0].value,null===(p=y[0])||void 0===p?void 0:p.label,w);break;case i.a0.DateOperatorIsNotInTheNext:C=h.name+" NOT BETWEEN CURRENT_TIMESTAMP AND CURRENT_TIMESTAMP + "+H(y[0].value,null===(f=y[0])||void 0===f?void 0:f.label,w);break;case i.a0.DateOperatorIsBetween:case i.a0.DateOperatorIsIn:C=D&&L?"("+h.name+" BETWEEN "+D+" AND "+L+") AND "+h.name+" <> "+L:"";break;case i.a0.DateOperatorIsNotBetween:case i.a0.DateOperatorIsNotIn:C=D&&L?h.name+" < "+D+" OR "+h.name+" >= "+L:""}""!==C&&m.push(`(${C})`)}T=F(g.operator,O,S,R,x),v.push(`(${T})`)}({fieldObj:o,clause:e,sqlList:c,displaySqlList:p,vals:m,labelValues:v,isDateInForUnknownTZ:h,timeZoneOffset:f,isHosted:u,useStandardizedQuery:d,dataSource:t,intl:n}):a===s.Eo.DateOnly?function(e){var t,n,r,o,s;const{fieldObj:a,clause:l,sqlList:u,displaySqlList:c,vals:d,labelValues:p,intl:f}=e;let h="",g="",m=!1;const v=l.valueOptions.inputEditor;if(null===d){if(l.operator.indexOf("BLANK")>0){const e=l.operator.indexOf("NOT")>0?"NOT ":"";u.push("("+a.name+" IS "+e+"NULL)")}}else{let e,c=null===(t=d[0])||void 0===t?void 0:t.value;if("SIMPLE_SELECT"===v||"UNIQUE_PILL_WRAP_SELECTOR"===v)p.value=ee(new Date(c),"DATE_PICKER",null===(n=a.format)||void 0===n?void 0:n.dateFormat,f);else{const t=null===(r=d[1])||void 0===r?void 0:r.value;if(null===d[0])c=null;else if((0,_.isStrictYMDFormat)(c))p.value=ee(new Date(c),"DATE_PICKER",null===(o=a.format)||void 0===o?void 0:o.dateFormat,f),e=c;else{m=!0,p.value=f.formatMessage({id:z(d[0].value)});const n=(0,_.getRealDateByVirtualDate)(c,f);c=(0,_.getStrictYMDFormat)(n),t||(e=c)}if(null===d[1])m=!1,e=null;else if(t){let n;if(m=!1,(0,_.isStrictYMDFormat)(t))n=ee(new Date(t),"DATE_PICKER",null===(s=a.format)||void 0===s?void 0:s.dateFormat,f),e=t;else{n=f.formatMessage({id:z(d[1].value)});const r=(0,_.getRealDateByVirtualDate)(t,f);e=(0,_.getStrictYMDFormat)(r)}p.endValue=n}}const g=c?"'"+c+"'":null,y=e?"'"+e+"'":null;switch(l.operator){case i.a0.DateOnlyOperatorIsOn:h=a.name+" = DATE "+g;break;case i.a0.DateOnlyOperatorIsNotOn:h=a.name+" <> DATE "+g;break;case i.a0.DateOnlyOperatorIsBefore:h=a.name+" < DATE "+g;break;case i.a0.DateOnlyOperatorIsAfter:h=a.name+" > DATE "+g;break;case i.a0.DateOnlyOperatorIsOnOrBefore:h=a.name+" <= DATE "+g;break;case i.a0.DateOnlyOperatorIsOnOrAfter:h=a.name+" >= DATE "+g;break;case i.a0.DateOnlyOperatorIsBetween:h=g&&y?a.name+" BETWEEN DATE "+g+" AND DATE "+y:"";break;case i.a0.DateOnlyOperatorIsNotBetween:h=g&&y?a.name+" NOT BETWEEN DATE "+g+" AND DATE "+y:""}""!==h&&u.push(`(${h})`)}g=F(l.operator,f,p,m),c.push(`(${g})`)}({fieldObj:o,clause:e,sqlList:c,displaySqlList:p,vals:m,labelValues:v,intl:n}):a===s.Eo.TimeOnly?function(e){var t,n;const{fieldObj:r,clause:o,sqlList:s,displaySqlList:a,vals:l,labelValues:u,intl:c}=e;let d="",p="";const f=o.valueOptions.inputEditor;if(null===l){if(o.operator.indexOf("BLANK")>0){const e=o.operator.indexOf("NOT")>0?"NOT ":"";s.push("("+r.name+" IS "+e+"NULL)")}}else{let e,a=null===(t=l[0])||void 0===t?void 0:t.value;if("SIMPLE_SELECT"===f||"UNIQUE_PILL_WRAP_SELECTOR"===f)u.value=a;else{const t=null===(n=l[1])||void 0===n?void 0:n.value;null===l[0]?a=null:(u.value=a,e=a),null===l[1]?e=null:t&&(u.endValue=t,e=t)}const c=a?"'"+a+"'":null,p=e?"'"+e+"'":null;switch(o.operator){case i.a0.TimeOnlyOperatorIsOn:d=r.name+" = TIME "+c;break;case i.a0.TimeOnlyOperatorIsNotOn:d=r.name+" <> TIME "+c;break;case i.a0.TimeOnlyOperatorIsBefore:d=r.name+" < TIME "+c;break;case i.a0.TimeOnlyOperatorIsAfter:d=r.name+" > TIME "+c;break;case i.a0.TimeOnlyOperatorIsOnOrBefore:d=r.name+" <= TIME "+c;break;case i.a0.TimeOnlyOperatorIsOnOrAfter:d=r.name+" >= TIME "+c;break;case i.a0.TimeOnlyOperatorIsBetween:d=c&&p?r.name+" BETWEEN TIME "+c+" AND TIME "+p:"";break;case i.a0.TimeOnlyOperatorIsNotBetween:d=c&&p?r.name+" NOT BETWEEN TIME "+c+" AND TIME "+p:""}""!==d&&s.push(`(${d})`)}p=F(o.operator,c,u),a.push(`(${p})`)}({fieldObj:o,clause:e,sqlList:c,displaySqlList:p,vals:m,labelValues:v,intl:n}):function(e){const{fieldObj:t,clause:n,sqlList:r,displaySqlList:o,vals:a,labelValues:l,isHosted:u,useCaseSensitiveQuery:c,intl:d}=e;let p="",f="",h=!1;const g=j[U(n.operator)];let m=[];const v=[];let y=a;const S=[i.Zc.SingleSelectFromPredefined,i.Zc.MultipleSelectFromPredefined].includes(n.valueOptions.sourceType);S&&y&&(y=a.filter((e=>e.selected)),y=y.length>0?y:null);let I=i.Zc.MultipleSelectFromPredefined===n.valueOptions.sourceType&&[i.a0.StringOperatorStartsWith,i.a0.StringOperatorDoesNotStartWith,i.a0.StringOperatorEndsWith,i.a0.StringOperatorDoesNotEndWith,i.a0.StringOperatorContains,i.a0.StringOperatorDoesNotContain].includes(n.operator);if(null===y)"IN"===g.type&&(l.value="(?)");else{let e=!1;for(let r=0;r<y.length;r++){null!==y[r]&&y[r].value!==i.ol||(e=!0,y[r]={value:null,label:"?",alias:"?"});let o=y[r].value,a=S?y[r].alias:y[r].label;t.type===s.Eo.String&&(o=null!==o?J(o):null,h=c&&!n.caseSensitive),a=J(a),g.mod&&"IN"!==g.type&&(o=null!==o?Y(g.mod,[o]):null);let l="";t.type===s.Eo.String&&null!==o&&(l=u&&Q(o)?"N":"",o="'"+o+"'",a="'"+a+"'",h&&(o=null!==o?o.toLowerCase():null,a=a.toLowerCase()),l&&(o=l+o)),null!==o&&m.push(o),v.push(a)}if(e&&(m=[]),I=I&&m.length>1,I||!g.sep&&g.mod&&"IN"===g.type){const e=function(e){const t=[];return new Array(e).fill(1).forEach(((e,n)=>{t.push("{"+n+"}")})),"("+t.join(",")+")"}(m.length);p=I?"predefined":Y(e,m),l.value=Y(e,v)}else m.forEach(((e,t)=>{t>0&&(p+=g.sep),p+=e})),l.value=v[0],l.endValue=v[1]||l.endValue}const b=t.name;if(""!==p){const e=h?"LOWER("+b+")":b;if(I){const t=n.operator.includes("_NOT_")?" AND ":" OR ",o=m.map((t=>"("+e+" "+K(g.op,t)+")")).join(t);r.push(o)}else{const t=K(g.op,p);r.push("("+e+" "+t+")")}}else if(n.operator.indexOf("BLANK")>0){const e=n.operator.indexOf("NOT")>0?"NOT ":"";r.push("("+b+" IS "+e+"NULL)"),f="Null"}f=F(n.operator,d,l),o.push("("+f+")")}({fieldObj:o,clause:e,sqlList:c,displaySqlList:p,vals:m,labelValues:v,isHosted:u,useCaseSensitiveQuery:g,intl:n})}}));const m=n.formatMessage({id:o.toLowerCase()+"LowerCase"});return{sql:c.join(` ${o} `),displaySQL:p.join(` ${m} `)}}($(e,l)),v=""===(y=m.sql)||"()"===y?"":G(m.sql)?m.sql.slice(1,-1):m.sql;var y;return{sqlExpression:e.set("sql",v).set("displaySQL",m.displaySQL),sql:v,displaySQL:m.displaySQL}}function G(e){let t=!0;if(e.startsWith("(")&&e.endsWith(")")){const n=e.slice(1,-1);let r=0;for(let e=0;e<n.length&&("("===n[e]&&r++,")"===n[e]&&r--,!(r<0));e++);r<0&&(t=!1)}return t}function W(e){return null}function H(e,t,n){return n?q(e,t):function(e,t){let n="";t===_.TimeUnit.Year||t===_.TimeUnit.Month||t===_.TimeUnit.Week||t===_.TimeUnit.Day?n=`'${q(e,t)}' DAY`:t===_.TimeUnit.Hour?n=`'${e}' HOUR`:t===_.TimeUnit.Minute&&(n=`'${e}' MINUTE`);return"INTERVAL "+n}(e,t)}function q(e,t){let n=e;return t===_.TimeUnit.Year?n=365*e:t===_.TimeUnit.Month?n=30*e:t===_.TimeUnit.Week?n=7*e:t===_.TimeUnit.Hour?n=e/24:t===_.TimeUnit.Minute&&(n=e/1440),n=Math.round(1e6*n)/1e6,n}function z(e){return(e=e.toLowerCase()).replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}function K(e,t){return e.replace("?",(function(){return t}))}function J(e){return e.replace(/\'/g,"''")}function Y(e,t){return e.replace(/{([0-9]+)}/g,(function(e,n){return t[parseInt(n)]}))}function Q(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return!0;return!1}function X(e,t=0,n=!1){const r=new Date(e+t);return n?r.getFullYear()+"-"+("0"+(r.getMonth()+1)).slice(-2)+"-"+("0"+r.getDate()).slice(-2)+" "+("0"+r.getHours()).slice(-2)+":"+("0"+r.getMinutes()).slice(-2)+":"+("0"+r.getSeconds()).slice(-2):r.getUTCFullYear()+"-"+("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+("0"+r.getUTCDate()).slice(-2)+" "+("0"+r.getUTCHours()).slice(-2)+":"+("0"+r.getUTCMinutes()).slice(-2)+":"+("0"+r.getUTCSeconds()).slice(-2)}function Z(){const e=(new Date).getTimezoneOffset();return(e<0?1:-1)*(e<0?Math.abs(e)/60:e/60)*60*60*1e3}function ee(e,t,n,r){let o="";if(r){let i=_.DATE_TIME_DEFAULT_FORMAT.date,s=_.DATE_TIME_DEFAULT_FORMAT.time;if(n){const e=(0,_.getEsriDateFormat)(n);i=e.datePattern,s=t.includes("DATE_TIME_PICKER")?e.timePattern||s:""}else"DATE_PICKER"!==t&&"DOUBLE_DATE_PICKER"!==t||(s="");o=(0,_.formatDateValue)(e,r,i,s)}else"DATE_PICKER"===t||"DOUBLE_DATE_PICKER"===t?o=e.toLocaleDateString():"DATE_TIME_PICKER"!==t&&"DOUBLE_DATE_TIME_PICKER"!==t||(o=e.toLocaleDateString()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2));return o}function te(e,t,n=!1){return"number"!=typeof e&&"string"!=typeof e||("number"==typeof e&&n&&(e-=Z()),e=new Date(e)),e.setMilliseconds(0),t===B.Date?(e.setHours(0),e.setMinutes(0),e.setSeconds(0)):t===B.DateTimeShort&&e.setSeconds(0),e.getTime()}function ne(e,t,n){if(!e)return null;let r="";const o=Object.keys(n).map((t=>n[t]?(r+=r.length?`,${t}`:t,re(n[t],e,Number(t))):null));r=r.length?`${e} not in (${r})`:null;const i=oe(...o);return function(...e){const t=(null==e?void 0:e.filter((e=>!ie(e))))||[];return t.length>1?t.map((e=>`(${e})`)).join(" and "):t[0]}(t,oe(i,r))}function re(e,t,n){const r=`${t}=${n}`;return ie(e)?r:`(${r}) and (${e})`}function oe(...e){const t=(null==e?void 0:e.filter((e=>!ie(e))))||[];return t.length>1?t.map((e=>`(${e})`)).join(" or "):t[0]}function ie(e){return!e||/^[()]*$/.test(e.replace(/\s+/g,"").replace("1=1",""))}function se(e,t,n,r=!1){const o=t===i.a0.DateOperatorIsOn?"DATE_TIME_PICKER":"TEXT_BOX",s={type:i.KI.Single,jimuFieldName:e,operator:t,valueOptions:{isValid:!0,sourceType:i.Zc.UserInput,inputEditor:o,value:n},displayType:i.gQ.None};return r&&(s.caseSensitive=r),s}function ae(e,t){return{type:i.KI.Set,logicalOperator:e,parts:t}}function le(e,t,n){const r={sql:"1=1",displaySQL:"",logicalOperator:e,parts:t},o=V(D(r),n);return r.sql=o.sql,r.displaySQL=o.displaySQL,r}function ue(e,t,n=i.Mg.And){return le(n,e.filter((e=>e)).map((e=>({type:i.KI.Set,logicalOperator:e.logicalOperator,parts:e.parts}))),t)}function ce(e,t,n){if(!e||!t)return null;const r=e[0];let o=r.clause;const s=n(o.operator.toLowerCase().replace(/\_(\w)/g,((e,t)=>t.toUpperCase())));o.displayType===i.gQ.UseLabel&&null===o.displayLabel?o=o.set("displayLabel",s+" "+o.valueOptions.value.map((e=>e.label)).join(",")):o.displayType===i.gQ.UseAskForValue&&null===o.askForValueOptions.label&&(o=o.setIn(["askForValueOptions","label"],s));return D(le(r.logicalOperator,[o],t))}function de(e,t){var n;if(!e||!t)return null;let r=null;const o=null===(n=null==e?void 0:e.filter((e=>e.dataSourceId===t.id)))||void 0===n?void 0:n[0];if(o){const n=e[0].clause,i=[];o.fieldList.forEach((e=>{i.push(n.set("jimuFieldName",e))})),r=D(le(o.logicalOperator,i,t))}return r}!function(e){e.Date="DATE",e.DateTimeShort="DATE_TIME_SHORT",e.DateTimeLong="DATE_TIME_LONG"}(B||(B={}));var pe=n(4262);const fe=["id","url","itemId","portalUrl","type","geometryType","layerId"];function he(e,t,n,r,o,i){if(t)return ge(e,t,o,i);{let t,s;return n.data?t=ye(e,n.data,n.portalUrl,o,i):n.item&&(t=me(e,n.item,n.portalUrl,o,i)),r&&(s=Se(e,r.layerDefinition,r.url,o,i)),t&&s?s.merge(t):t||s}}function ge(e,t,n,r){var o,i,s,a,u,c;if(!e||!t)return null;let d,p,f,h=Vt(t);const g=t.type;switch(g){case l.QB.GroupLayer:d=l.hg.GroupLayer;break;case l.QB.FeatureLayer:d=l.hg.FeatureLayer,p=`${t.layerId}`,f=null===(o=t.sourceJSON)||void 0===o?void 0:o.geometryType;break;case l.QB.SceneLayer:d=l.hg.SceneLayer,p=`${t.layerId}`;break;case l.QB.MapImageLayer:case l.QB.TileLayer:d=l.hg.MapService;break;case l.QB.BuildingSceneLayer:d=l.hg.BuildingSceneLayer;break;case l.QB.BuildingGroupSubLayer:d=l.hg.BuildingGroupSubLayer;break;case l.QB.BuildingComponentSubLayer:d=l.hg.BuildingComponentSubLayer,p=`${t.id}`;break;case l.QB.ImageryLayer:d=l.hg.ImageryLayer;break;case l.QB.ImageryTileLayer:d=l.hg.ImageryTileLayer;break;case l.QB.ElevationLayer:d=l.hg.ElevationLayer;break;case l.QB.OrientedImageryLayer:d=l.hg.OrientedImageryLayer;break;case l.QB.SubtypeGroupLayer:d=l.hg.SubtypeGroupLayer,p=`${t.layerId}`,f=null===(i=t.sourceJSON)||void 0===i?void 0:i.geometryType;break;case l.QB.SubtypeSublayer:d=l.hg.SubtypeSublayer,p=`${t.parent.layerId}`,f=null===(s=t.parent.sourceJSON)||void 0===s?void 0:s.geometryType,h=Vt(t.parent);break;case l.QB.VectorTileLayer:case l.QB.KMLLayer:case l.QB.CSVLayer:case l.QB.GeoJSONLayer:case l.QB.WFSLayer:case l.QB.WMSLayer:case l.QB.WMTSLayer:break;default:const e=g;console.warn(`Unhandled case: ${e}`),d=null}let m;return d&&(m=D({id:e,type:d,sourceLabel:t.title||(null===(a=t.sourceJSON)||void 0===a?void 0:a.name)}),m=(null===(u=t.portalItem)||void 0===u?void 0:u.id)?m.set("portalUrl",null===(c=t.portalItem.portal)||void 0===c?void 0:c.url).set("itemId",t.portalItem.id):m,m=/^\d+$/.test(p)?m.set("layerId",p):m,m=h?m.set("url",h):m,m=f?m.set("geometryType",f):m,m=n?m.merge(n.without(...fe),{deep:!0}):m,m=r?m.set("schema",r):m),m}function me(e,t,n,r,o){var i,s,a,u,c;if(!e||!t)return null;let d,p,f;const h=t.type;switch(h){case l.Rf.WebMap:case l.Rf.WebScene:case l.Rf.CSV:case l.Rf.GeoJSON:case l.Rf.KML:case l.Rf.WFS:case l.Rf.WMS:case l.Rf.WMTS:case l.Rf.GroupLayer:d=l.hg[be(l.Rf,h)],f=null===(i=t.url)||void 0===i?void 0:i.replace(/^http:/,"https:").replace(/\/$/,"");break;case l.Rf.FeatureCollection:(null===(s=t.typeKeywords)||void 0===s?void 0:s.includes("Singlelayer"))?(d=l.hg.FeatureLayer,p="0"):d=l.hg.GroupLayer;break;case l.Rf.FeatureService:case l.Rf.MapService:case l.Rf.SceneService:case l.Rf.ImageService:case l.Rf.VectorTileService:if(Ne(t.url))d=Ie(t.url,{isTiledImagery:(g=t.typeKeywords,null==g?void 0:g.includes("Tiled Imagery")),isElevation3DLayer:ve(t.typeKeywords)});else if(Ue(t.url)){const e=Ie(Fe(t.url,!1));e===l.hg.FeatureService||e===l.hg.MapService?d=l.hg.FeatureLayer:e===l.hg.SceneService&&(d=l.hg.SceneLayer),p=d&&(null===(a=t.url)||void 0===a?void 0:a.replace(/\/$/,"").split("/").reverse()[0])}f=d===l.hg.VectorTileService?null===(u=t.url)||void 0===u?void 0:u.replace(/^http:/,"https:").replace(/\/$/,""):null===(c=t.url)||void 0===c?void 0:c.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"");break;case l.Rf.GeocodingService:case l.Rf.GeoenrichmentService:case l.Rf.GeometryService:case l.Rf.GeoprocessingService:case l.Rf.NetworkAnalysisService:break;default:const e=h;console.warn(`Unhandled case: ${e}`),d=null}var g;let m;return d&&(m=D({id:e,type:d,sourceLabel:t.title}),m=m.set("itemId",t.id),m=m.set("portalUrl",n),m=/^\d+$/.test(p)?m.set("layerId",p):m,m=f?m.set("url",f):m,m=r?m.merge(r.without(...fe),{deep:!0}):m,m=o?m.set("schema",o):m),m}function ve(e){return null==e?void 0:e.includes("Elevation 3D Layer")}function ye(e,t,n,r,o){var i;if(!e||!t)return null;let s,a;const u=t,c=u.layerType;switch(c){case l.fY.FeatureLayer:case l.fY.SceneLayer:case l.fY.SubtypeGroupLayer:s=l.hg[be(l.fY,c)],a=null===(i=u.url)||void 0===i?void 0:i.replace(/\/$/,"").split("/").reverse()[0];break;case l.fY.GroupLayer:case l.fY.MapService:s=l.hg[be(l.fY,c)];break;case l.fY.TiledMapService:s=l.hg.MapService;break;case l.fY.ImageService:s=l.hg.ImageryLayer;break;case l.fY.TiledImageService:s=l.hg.ImageryTileLayer;break;case l.fY.VectorTileService:case l.fY.CSV:case l.fY.GeoJSON:case l.fY.KML:case l.fY.WFS:case l.fY.WMS:break;default:const e=c;console.warn(`Unhandled case: ${e}`),s=null}let d;return s&&(d=D({id:e,type:s,sourceLabel:u.title}),d=d.set("itemId",u.itemId),d=d.set("portalUrl",n),d=/^\d+$/.test(a)?d.set("layerId",a):d,d=u.url?d.set("url",u.url.replace(/^http:/,"https:").replace(/\/$/,"")):d,d=r?d.merge(r.without(...fe),{deep:!0}):d,d=o?d.set("schema",o):d),d}function Se(e,t,n,r,o){if(!e||!t)return null;let i;if(Ne(n)){i=function(e,t,n){if(!e||!t||!n)return null;const r="Elevation"===n.cacheType?{isElevation3DLayer:!0}:(i=n.capabilities,(null==i?void 0:i.includes("TilesOnly"))?{isTiledImagery:!0}:null),o=Ie(t,r);var i;if(!o)return null;const s=D({id:e,type:o,url:Fe(t,!1),sourceLabel:ke(t)});return s}(e,Fe(n,!1,t),t)}else if(!n||Ue(n)){i=function(e,t,n){if(!e||!n)return null;let r;const o=n.type||n.layerType;switch(o){case l.Oh.GroupLayer:r=l.hg.GroupLayer;break;case l.Oh.FeatureLayer:r=n.subtypeField&&new RegExp(`${l.nS.FeatureService}(\\/\\d+)?\\/?$`).test(t)?l.hg.SubtypeGroupLayer:l.hg.FeatureLayer;break;case l.Oh.Table:r=l.hg.FeatureLayer;break;case l.Oh.OrientedImageryLayer:r=l.hg.OrientedImageryLayer;break;case l.Oh.SceneLayer3DObject:case l.Oh.SceneLayerPoint:r=l.hg.SceneLayer;break;case l.Oh.BuildingSceneLayer:r=l.hg.BuildingSceneLayer;break;case l.Oh.BuildingGroupSubLayer:r=l.hg.BuildingGroupSubLayer;break;case l.Oh.BuildingComponentSubLayer:r=l.hg.BuildingComponentSubLayer;break;default:const e=o;console.warn(`Unhandled case: ${e}`),r=null}let i;r&&(i=D({id:e,type:r,sourceLabel:n.name}),i=t?i.set("url",Fe(t,!0,n)):i,i=/^\d+$/.test(`${n.id}`)?i.set("layerId",`${n.id}`):i,i=n.geometryType?i.set("geometryType",n.geometryType):i);return i}(e,Fe(n,!0,t),t)}return i=r&&i?i.merge(r.without(...fe),{deep:!0}):i,i=o&&i?i.set("schema",o):i,i}function Ie(e,t){if(!Ne(e))return null;const n=e.split("?")[0].split("/"),r=Object.values(l.nS).find((e=>n.some((t=>e.toLowerCase()===t.toLowerCase()))));let o;switch(r){case l.nS.FeatureService:case l.nS.MapService:case l.nS.SceneService:case l.nS.VectorTileService:o=l.hg[be(l.nS,r)];break;case l.nS.ImageService:o=(null==t?void 0:t.isElevation3DLayer)?l.hg.ElevationLayer:(null==t?void 0:t.isTiledImagery)?l.hg.ImageryTileLayer:l.hg.ImageryLayer;break;default:const e=r;console.warn(`Unhandled case: ${e}`),o=null}return o}function be(e,t){var n;return null===(n=Object.entries(e).find((([e,n])=>n===t)))||void 0===n?void 0:n[0]}var we,Ee=n(3676),Ae=n(1035),Oe=n(5689),Ce=n(3484),Te=n(6048),xe=n(4419),Re=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function Pe(e,t,n,r){return Re(this,void 0,void 0,(function*(){return yield De(e,t,n,r).then((e=>Re(this,void 0,void 0,(function*(){return e?yield Ce.A.getInstance().fetchServiceInfo(e).then((e=>e.definition)).then((t=>t?{def:t,url:e}:null)):yield Promise.resolve(null)}))))}))}function De(e,t,n,r){return Re(this,void 0,void 0,(function*(){return e||n?n?yield Le(n,r).then((n=>Re(this,void 0,void 0,(function*(){if(!n)return yield Me(_e(e),e,t);const r=n.url;return yield Me(r,e,t)})))):yield Me(_e(e),e,t):yield Promise.resolve(null)}))}function _e(e){return Fe(e,!1).replace(`/${l.nS.SceneService}`,`/${l.nS.FeatureService}`)}function Le(e,t){return Re(this,void 0,void 0,(function*(){if(!e)return yield Promise.resolve(null);const n={id:e,relationshipType:"Service2Service",direction:"reverse",authentication:Te.Ay.getInstance().getSessionByUrl(t)};return yield(0,Ee.getRelatedItems)(n).then((e=>{var t;return(null===(t=null==e?void 0:e.relatedItems)||void 0===t?void 0:t.find((e=>e.type===l.Rf.FeatureService)))||null}))}))}function Me(e,t,n){return Re(this,void 0,void 0,(function*(){const r=Fe(t,!1),o=Fe(e,!1);return yield Promise.all([Ce.A.getInstance().fetchServiceInfo(r),Ce.A.getInstance().fetchServiceInfo(o)]).then((e=>{var t,r;const i=null===(t=e[0].definition)||void 0===t?void 0:t.layers,s=null===(r=e[1].definition)||void 0===r?void 0:r.layers;if(!Array.isArray(s))return null;const a=parseInt(n);if(Array.isArray(i))for(let e=0;e<Math.min(i.length,s.length);e++){if(i[e].id===a)return`${o}/${s[e].id}`}else if(a<s.length)return`${o}/${s[a].id}`;return null})).catch((e=>(console.debug("Can not find associated feature layer, ",t),null)))}))}function ke(e){if(!je(e))return"";const t=decodeURI(e).split("/"),n=t.findIndex((e=>Object.values(l.nS).some((t=>t.toLowerCase()===e.toLowerCase()))))-1;return t[n]}function Ne(e){return!(!je(e)||Ue(e))}function je(e,t){if(!e||!/^(http(s)?:)?\/\//.test(e))return!1;const n=Fe(e,!1),r=null==n?void 0:n.split("/");return!(!r||!Object.values(l.nS).some((e=>r[r.length-1].toLowerCase()===e.toLowerCase()))||t&&!t.some((e=>r[r.length-1].toLowerCase()===e.toLowerCase())))}function Ue(e){if(!je(e))return!1;return!!(e=e.split("?")[0]).split("/").find((e=>e.toLowerCase()===l.nS.SceneService.toLowerCase()))?/\/layers\/\d+\/?$/.test(e)||/\/sublayers\/\d+\/?$/.test(e):/\/\d+\/?$/.test(e)}function Fe(e,t,n){if(!e||t&&!n)return null;const r=e.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,"").split("/"),o=r.findIndex((e=>Object.values(l.nS).some((t=>t.toLowerCase()===e.toLowerCase()))));if(-1===o)return null;const i=r.slice(0,o+1).join("/");if(t){if(null==n.id)return null;return!!i.split("/").find((e=>e.toLowerCase()===l.nS.SceneService.toLowerCase()))?`${i}/layers/${n.id}`:`${i}/${n.id}`}return i}function Be(e){return(0,c.getProxyUrl)(e)}function $e(e,t){if(!e||!t)return"";const n=e;switch(n){case l.at.Error:return t.formatMessage({id:"widgetLoadError",defaultMessage:xe.A.widgetLoadError});case l.at.FeatureLayer:return t.formatMessage({id:"featureLayer",defaultMessage:xe.A.featureLayer});case l.at.FeatureService:return t.formatMessage({id:"featureService",defaultMessage:xe.A.featureService});case l.at.MapService:return t.formatMessage({id:"mapService",defaultMessage:xe.A.mapService});case l.at.GroupLayer:return t.formatMessage({id:"groupLayer",defaultMessage:xe.A.groupLayer});case l.at.Map:return t.formatMessage({id:"map",defaultMessage:xe.A.map});case l.at.SimpleLocal:return t.formatMessage({id:"simpleLocal",defaultMessage:xe.A.simpleLocal});case l.at.WebMap:return t.formatMessage({id:"webMap",defaultMessage:xe.A.webMap});case l.at.WebScene:return t.formatMessage({id:"webScene",defaultMessage:xe.A.webScene});case l.at.CSV:return t.formatMessage({id:"csv",defaultMessage:xe.A.csv});case l.at.SceneService:return t.formatMessage({id:"sceneService",defaultMessage:xe.A.sceneService});case l.at.SceneLayer:return t.formatMessage({id:"sceneLayer",defaultMessage:xe.A.sceneLayer});case l.at.ImageryLayer:return t.formatMessage({id:"imageryLayer",defaultMessage:xe.A.imageryLayer});case l.at.ImageryTileLayer:return t.formatMessage({id:"imageryTileLayer",defaultMessage:xe.A.imageryTileLayer});case l.at.ElevationLayer:return t.formatMessage({id:"elevationLayer",defaultMessage:xe.A.elevationLayer});case l.at.OrientedImageryLayer:return t.formatMessage({id:"orientedImageryLayer",defaultMessage:xe.A.orientedImageryLayer});case l.at.SubtypeGroupLayer:return t.formatMessage({id:"SubtypeGroupLayer",defaultMessage:xe.A.SubtypeGroupLayer});case l.at.SubtypeSublayer:return t.formatMessage({id:"SubtypeSublayer",defaultMessage:xe.A.SubtypeSublayer});case l.at.VectorTileService:return t.formatMessage({id:"vectorTileService",defaultMessage:xe.A.vectorTileService});case l.at.WFS:return t.formatMessage({id:"wfsLayer",defaultMessage:xe.A.wfsLayer});case l.at.WMS:return t.formatMessage({id:"wmsLayer",defaultMessage:xe.A.wmsLayer});case l.at.WMTS:return t.formatMessage({id:"wmtsLayer",defaultMessage:xe.A.wmtsLayer});case l.at.KML:return t.formatMessage({id:"kml",defaultMessage:xe.A.kml});case l.at.GeoJSON:return t.formatMessage({id:"geojson",defaultMessage:xe.A.geojson});case l.at.BuildingSceneLayer:return t.formatMessage({id:"buildingScene",defaultMessage:xe.A.buildingScene});case l.at.BuildingGroupSubLayer:return t.formatMessage({id:"buildingGroup",defaultMessage:xe.A.buildingGroup});case l.at.BuildingComponentSubLayer:return t.formatMessage({id:"buildingComponent",defaultMessage:xe.A.buildingComponent});default:throw new Error(`Unhandled case: ${n}`)}}function Ve(e){const t=e&&e.type,r=a.A.getInstance().getDataSource(null==e?void 0:e.id),o=function(e){if(e){if(e.toLowerCase().includes(we.Point.toLowerCase()))return we.Point;if(e.toLowerCase().includes(we.Polyline.toLowerCase()))return we.Polyline;if(e.toLowerCase().includes(we.Polygon.toLowerCase()))return we.Polygon}return null}(r?r.getGeometryType():null==e?void 0:e.geometryType),i=function(e){if(!e)return!1;const t=a.A.getInstance().getDataSource(e.id),n=t&&t.supportSpatialInfo&&!t.supportSpatialInfo();return n}(e),s=function(e,t,n){if(e===l.at.FeatureLayer)return n?`${e}_${l.Oh.Table}`:t?`${e}_${t}`:e;return e}(t,o,i);switch(s){case l.at.WebMap:return n(3195);case l.at.WebScene:return n(2529);case`${l.at.FeatureLayer}_${we.Point}`:return n(4203);case`${l.at.FeatureLayer}_${we.Polyline}`:return n(2773);case`${l.at.FeatureLayer}_${we.Polygon}`:return n(819);case`${l.at.FeatureLayer}_${l.Oh.Table}`:return n(8249);case l.at.FeatureLayer:return n(914);case l.at.FeatureService:return n(1330);case l.at.MapService:return n(2618);case l.at.GroupLayer:return n(2443);case l.at.SceneService:return n(8964);case l.at.SceneLayer:return n(7442);case l.at.CSV:return n(6374);case l.at.GeoJSON:return n(1219);case l.at.ImageryLayer:return n(4882);case l.at.ImageryTileLayer:return n(1539);case l.at.ElevationLayer:return n(4931);case l.at.OrientedImageryLayer:return n(4041);case l.at.KML:return n(8030);case l.at.VectorTileService:return n(5033);case l.at.WFS:return n(8816);case l.at.WMS:return n(8629);case l.at.WMTS:return n(133);case l.at.BuildingSceneLayer:return n(3509);case l.at.BuildingGroupSubLayer:return n(880);case l.at.BuildingComponentSubLayer:return n(2263);case l.at.SubtypeGroupLayer:return n(4558);case l.at.SubtypeSublayer:return n(4308);default:return n(8427)}}!function(e){e.Point="POINT",e.Polyline="POLYLINE",e.Polygon="POLYGON"}(we||(we={}));var Ge=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const We=10;function He(e){return Ge(this,void 0,void 0,(function*(){var t,n;const{searchFields:r,dataSource:o,maxSuggestions:i,searchText:a}=e;if(e.searchText=null==a?void 0:a.trim(),!r||0===(null==r?void 0:r.length)||!o)return[];return(null===(n=null===(t=o.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===n?void 0:n.supportsFullTextSearch)?function(e,t){return Ge(this,void 0,void 0,(function*(){var n;if(!t)return Promise.resolve({fields:[],fullTextField:[]});if(!e)return Promise.resolve({fields:t,fullTextField:[]});let r=(null===(n=e.getLayerDefinition())||void 0===n?void 0:n.indexes)||[];r=r.filter((e=>"FullText"===(null==e?void 0:e.indexType)));const o=[],i=[];return nt(e,t).forEach((e=>{if(e.esriType!==s.oX.GlobalID&&e.type===s.Eo.String){let t=!1;null==r||r.forEach((n=>{var r;(null===(r=n.fields)||void 0===r?void 0:r.split(", ").includes(e.name))&&(t=!0)})),t?i.push(e):o.push(e)}else o.push(e)})),Promise.resolve({fields:Xe(o),fullTextField:Xe(i)})}))}(o,r).then((t=>{const n=t.fields||[],r=t.fullTextField||[],o=[qe(Object.assign(Object.assign({},e),{searchFields:n})),ze(Object.assign(Object.assign({},e),{searchFields:r}))];return Promise.all(o).then((e=>{let t=e[0].concat(e[1]);return t=t.splice(0,i||We),Promise.resolve(t)}))})):qe(e,i)}))}function qe(e){return Ge(this,arguments,void 0,(function*(e,t=We){var n,r;const{searchText:o,searchFields:s,dataSource:a,extent:l}=e;if(!s||0===s.length)return Promise.resolve([]);const u=null===(r=null===(n=a.getLayerDefinition())||void 0===n?void 0:n.advancedQueryCapabilities)||void 0===r?void 0:r.supportsDistinct,c=et(o,s,a,!1,i.Mg.Or,i.a0.StringOperatorStartsWith),d={outFields:s,returnDistinctValues:!!u,returnGeometry:!1,orderByFields:null,where:c.sql||"1=0",sqlExpression:c};if(l){const e=l?l.toJSON():{};d.geometry=e}return Ke(d,e,t)}))}function ze(e){return Ge(this,void 0,void 0,(function*(){var t,n;const{searchText:r,searchFields:o,dataSource:i,extent:s}=e;if(!o||0===o.length)return Promise.resolve([]);const a=null===(n=null===(t=i.getLayerDefinition())||void 0===t?void 0:t.advancedQueryCapabilities)||void 0===n?void 0:n.supportsDistinct,l=i.getCurrentQueryParams(),u=function(e,t){var n;const r=[];return null===(n=null==t?void 0:t.split(" "))||void 0===n||n.forEach((t=>{if(t&&t.length>1){const n={onFields:e,searchTerm:t,searchType:"prefix"};r.push(n)}})),r}(o,r),c={fullText:u,where:l.where||"1=1",geometry:l.geometry,returnDistinctValues:!!a,orderByFields:null,returnGeometry:!1,outFields:o};if(s){const e=s?s.toJSON():{};c.geometry=e}return Ke(c,e,null,!0)}))}function Ke(e,t){return Ge(this,arguments,void 0,(function*(e,t,n=We,r=!1){const{searchText:o,dataSource:i,searchFields:s}=t;return(r?Ye(e,i):function(e,t){return Ge(this,void 0,void 0,(function*(){return t?yield t.query(e,{scope:l.pQ.InRuntimeView}).then((e=>Ge(this,void 0,void 0,(function*(){return yield function(e,t){return Ge(this,void 0,void 0,(function*(){return yield Promise.resolve((null==t?void 0:t.records)||[])}))}(0,e)})))):yield Promise.resolve([])}))}(e,i)).then((e=>Ge(this,void 0,void 0,(function*(){let t=[];return s.forEach((n=>{e.forEach((e=>{const s=P.getIntl();let a,l;if(r){a=i.buildRecord(e).getFormattedFieldValue(n,s)}else a=e.getFormattedFieldValue(n,s),l=e.getFieldValue(n);const u=function(e,t,n){const r=Je(e),o=tt(e);let i=(null==t?void 0:t.match(r))||`${n}`.match(r);if(o){const e=Je(`${o}`);i=i||(null==t?void 0:t.match(e))||`${n}`.match(e)}return i}(o,a,l);if(a&&!Qe(t,a)&&u){const e={suggestionHtml:Ze(a,o),suggestion:a,fieldName:n};t.push(e)}}))})),t=function(e,t){const n=e[0]?[e[0]]:[];for(let r=1;r<e.length;r++){const o=e[r];let i=!1;for(let e=0;e<n.length;e++)if(o[t]===n[e][t]){i=!0;break}i||n.push(o)}return n}(t,"suggestion"),n&&(t=t.splice(0,n)),Promise.resolve(t)})))).catch((e=>(console.error(e),Promise.resolve([]))))}))}function Je(e){const t=e.trim().split(/\s+/).filter((e=>e.length>0));return new RegExp(`(${t.join("|")})`,"gi")}function Ye(e,t){return Ge(this,void 0,void 0,(function*(){const n=t.getDataSourceJson().url;return u.requestWrapper(n,(t=>Ge(this,void 0,void 0,(function*(){return yield o.request(`${n}/query`,{params:e,authentication:t,httpMethod:"GET"}).then((e=>Promise.resolve((null==e?void 0:e.features)||[]))).catch((e=>Promise.resolve([])))}))))}))}function Qe(e,t){return e.filter((e=>t===(null==e?void 0:e.suggestion))).length>0}function Xe(e){return e?e.map((e=>e.name)):[]}function Ze(e,t){if(!t)return e;const n=Je(t);return e.match(n)?e.replace(n,"<strong >$&</strong>"):e}function et(e,t,n,r=!1,o=i.Mg.Or,a=i.a0.StringOperatorContains){if(e=null==e?void 0:e.trim(),t){const l=[];return nt(n,t).forEach((t=>{let o=e;const u=null==n?void 0:n.getFieldCodedValueList(null==t?void 0:t.name);if(u&&(null==u||u.forEach((e=>{o===(null==e?void 0:e.label)&&(o=null==e?void 0:e.value)}))),t.type===s.Eo.Number){const e=tt(o);e&&(o=e)}const c=(null==e?void 0:e.length)>0&&!isNaN(Number(o))&&isFinite(Number(o));if(t.type===s.Eo.Number&&!c)return!1;t.type===s.Eo.String&&t.esriType===s.oX.GlobalID&&(r=!0);const d=function(e,t,n=i.a0.StringOperatorContains){let r;e===s.Eo.Number?r=i.a0.NumberOperatorIs:e===s.Eo.String&&(r=t?i.a0.StringOperatorIs:n);return r}(t.type,r,a),p=t.type===s.Eo.Number?Number(o):o,f=se(null==t?void 0:t.name,d,[{value:p,label:p+""}],r);l.push(f)})),le(o,l,n)}}function tt(e){var t;if("string"!=typeof e)return e;const n=null!==(t=(0,Ae.Vp)().getState().appContext.locale)&&void 0!==t?t:"en";return e=(e="."===(P.getDecimalSeparator(n)||".")?e.replace(/,/g,""):e.replace(/\./g,"")).replace(/\s/g,""),Number(e)}function nt(e,t){var n;if(!e||!t)return[];const r=(null===(n=null==e?void 0:e.getSchema())||void 0===n?void 0:n.fields)||{},o=[];for(const e in r)t.includes(r[e].name)&&o.push(r[e]);return o}var rt=n(903),ot=n(4835),it=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const st={};function at(e){return it(this,void 0,void 0,(function*(){var t,n;(e=Object.assign({},e)).query=Object.assign({},e.query);let{widgetId:r,ds:o,query:i,selectionMode:s,signal:a,jimuLayerView:u,updateSelectionIfAborted:c}=e;if(!e.query.outSR){const t=function(e,t){var n,r,o,i;let s=null===(r=null===(n=e.layer)||void 0===n?void 0:n.spatialReference)||void 0===r?void 0:r.toJSON();!s&&t&&(s=null===(i=null===(o=t.layer)||void 0===o?void 0:o.spatialReference)||void 0===i?void 0:i.toJSON());return s}(o,u);t&&(e.query.outSR=t)}const d=i.outFields||[],p=o.getAllUsedFields()||[];let f=[];const h=u&&u.view;h&&(null===(t=h.availableFields)||void 0===t?void 0:t.length)>0&&(f=null===(n=h.availableFields)||void 0===n?void 0:n.slice()),f||(f=[]);let g=d.concat(p).concat(f);if(g=Array.from(new Set(g)),g.includes("*")&&(g=["*"]),i.outFields=g,!a){a=(new AbortController).signal}const m=o.id,y=st[m];if(y){const e=new Event("abort");y.dispatchEvent(e)}st[m]=a;const S=yield function(e){return it(this,void 0,void 0,(function*(){let t=[],{ds:n,query:r,selectionMode:o,signal:i,jimuLayerView:s,checkLayerVisibility:a,progressCallback:u}=e;return new Promise((e=>it(this,void 0,void 0,(function*(){if(r=Object.assign({},r),r.geometry&&(r.geometry.toJSON&&(r.geometry=r.geometry.toJSON()),!r.geometryType)){const e=!1,t=yield(0,ot.convertGeometryJsonToGeometryInstance)(r.geometry,e);if(t){const e=v(t.type);e&&(r.geometryType=e)}}const c=(0,rt.A)(r),d=D(c);let p=!1,f=!1;function h(){return{queryParams:d,records:t,isAborted:f}}function g(){if(!p){i&&i.removeEventListener("abort",m,!1),p=!0;const t=h();e(t)}}function m(){f=!0}function y(e){if(u){const t=.95*e,n=h();u(t,n)}}if(i&&i.addEventListener("abort",m,!1),a&&s&&!s.isLayerVisible())g();else{try{if(o===l.Xz.New){const e=yield n.queryAll(r,i,y);t=(null==e?void 0:e.records)||[]}else{const e=n.getSelectedRecords(),s=e.map((e=>e.getId())),a=yield n.queryIds(r),u=(null==a?void 0:a.ids)||[];if(f)return void g();if(o===l.Xz.AddToCurrent){const o=.1,a=1-o;y(o);const l={};s.forEach((e=>{l[e]=!0}));const c=u.filter((e=>!l[e]));if(c.length>0){const s=(0,rt.A)(r);delete s.geometry,delete s.where,s.objectIds=c;const l=yield n.queryAll(s,i,(e=>{y(o+a*e)})),u=(null==l?void 0:l.records)||[];t=[...e,...u]}else t=e}else{y(.5);const n={};u.forEach((e=>{n[e]=!0})),o===l.Xz.RemoveFromCurrent?t=e.filter((e=>{const t=e.getId();return!n[t]})):o===l.Xz.SelectFromCurrent&&(t=e.filter((e=>{const t=e.getId();return n[t]})))}}}catch(e){console.error("query features from server error by selection mode",e)}g()}}))))}))}(e),I=(null==S?void 0:S.records)||[],b={widgetId:r,records:I};if(I.length>0){let e=null;s===l.Xz.New&&(i.where||i.geometry)&&(e={},i.where&&(e.where=i.where),i.geometry&&(e.geometry=i.geometry),i.spatialRel&&(e.spatialRel=i.spatialRel)),e?b.queryParams=e:b.ids=I.map((e=>e.getId()))}let w=!0;return w=a===st[m]&&(!a.aborted||c()),w?o.selectRecords(b):null}))}var lt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const ut=n(430),ct=["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger","esriFieldTypeSingle","esriFieldTypeDouble"],dt=["esriFieldTypeGlobalID","esriFieldTypeGUID","esriFieldTypeString"];function pt(e){return lt(this,void 0,void 0,(function*(){return yield(0,u.requestWrapper)(e.url,(t=>lt(this,void 0,void 0,(function*(){const n=(null==t?void 0:t.token)?{httpMethod:"GET",params:{token:null==t?void 0:t.token}}:{httpMethod:"GET"};return e.url?yield(0,o.request)(`${e.url}/${e.featureId}/attachments`,n).then((e=>lt(this,void 0,void 0,(function*(){return yield Promise.resolve(e.attachmentInfos)})))):yield Promise.reject(new Error(null))}))),1)}))}function ft(e,t){return lt(this,void 0,void 0,(function*(){return yield(0,u.requestWrapper)(t.url,(n=>lt(this,void 0,void 0,(function*(){if(t&&t.attachmentTypes&&t.attachmentTypes.length>0){const r=[];for(let o=0;o<e.length;o++)t.attachmentTypes.includes(e[o].contentType)&&(e[o].url=`${t.url}/${t.featureId}/attachments/${e[o].id}`+((null==n?void 0:n.token)?`?token=${null==n?void 0:n.token}`:""),r.push(e[o]));return yield Promise.resolve(r)}for(let r=0;r<e.length;r++)e[r].url=`${t.url}/${t.featureId}/attachments/${e[r].id}`+((null==n?void 0:n.token)?`?token=${null==n?void 0:n.token}`:"");return yield Promise.resolve(e)}))),1)}))}function ht(e,t){let n;return ct.includes(e.type)?n=s.Eo.Number:dt.includes(e.type)?n=s.Eo.String:"esriFieldTypeDate"===e.type?n=s.Eo.Date:"esriFieldTypeDateOnly"===e.type?n=s.Eo.DateOnly:"esriFieldTypeTimeOnly"===e.type&&(n=s.Eo.TimeOnly),n?{jimuName:e.name,name:e.name,type:n,esriType:e.type,alias:(null==t?void 0:t.label)||e.alias,format:(null==t?void 0:t.format)||("esriFieldTypeOID"===e.type?{digitSeparator:!1,places:0}:null)}:null}function gt(e){return!e||"esriFieldTypeDate"===e.type||"esriFieldTypeDateOnly"===e.type||"esriFieldTypeTimeOnly"===e.type}function mt(e){return ct.includes(e)}function vt(e,t){let n=null;return e&&e.length>0&&e.some((e=>e.name===t&&(n=e,!0))),n}function yt(e,t,n){const r=n[t],o=e.subtypeField||e.typeIdField;let i,s;n.hasOwnProperty(o)&&(i=n[o]);const a=vt(e.fields,t);if(gt(a))return{isCodedValueOrSubtype:!1};s=null!=i?Ot(e,t,i,a):Tt(e,a);const l=At(r,s),u=[{value:n[t],label:l.displayValue}];return l.displayValue=xt(e,u,t)[0].label,l}function St(e,t,n){if(1===n.length){return[yt(e,t,n[0])]}const r=e.subtypeField||e.typeIdField;let o=null,i=null,s=[],a=[];const l=vt(e.fields,t);if(gt(l))return a;for(const u of n){const n=u,c=n[t];if(r===t)s=o||wt(e);else if(n.hasOwnProperty(r)){if(!i){i={},o=wt(e);for(const n of o){const r=n.value;i[r]=Ot(e,t,r,l)}}s=i[n[r]],s||(s=Et(l))}else s=Tt(e,l);const d=At(c,s);a.push(d)}return a=xt(e,a,t,"displayValue"),a}function It(e,t,n){let r=null;if(!e)return r;const o=vt(e.fields,t);if(gt(o))return r;const i=e.subtypeField||e.typeIdField,s=n?n[i]:null,a=n&&null!=s;if((null==i?void 0:i.toUpperCase())===t.toUpperCase()){if(r=wt(e),a){const e=At(s,r);r=[{value:e.value,label:e.displayValue}]}}else r=a?Ot(e,t,s,o):Tt(e,o);return r=xt(e,r,t),r}function bt(e,t){let n=!1;return e&&e.fields&&0!==e.fields.length?(t.some((t=>{var r,o;const i=e.fields.filter((e=>e.name===t))[0];if(!i)return!1;const a=(null===(o=null===(r=i.domain)||void 0===r?void 0:r.codedValues)||void 0===o?void 0:o.map((e=>e&&{value:e.code,label:e.name})))||[],l=It(e,t);if(null===l)return!1;if(a.length!==l.length)return n=!0,!0;{let e,t;return i.type===s.oX.String?(e=a.sort(((e,t)=>{var n;return null===(n=e.value)||void 0===n?void 0:n.localeCompare(t.value,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})})),t=l.sort(((e,t)=>{var n;return null===(n=e.value)||void 0===n?void 0:n.localeCompare(t.value,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))):(e=a.sort(((e,t)=>e.value-t.value)),t=l.sort(((e,t)=>e.value-t.value))),e.some(((e,r)=>(e.value!==t[r].value||e.label!==t[r].label)&&(n=!0,!0))),n}})),n):n}function wt(e){let t=null;const n=e.subtypeField||e.typeIdField,r=e.subtypes||e.types;return n&&(null==r?void 0:r.length)>0&&(t=[],Object.keys(r).forEach((e=>{var n;t.push({value:null!==(n=r[e].code)&&void 0!==n?n:r[e].id,label:r[e].name})}))),t}function Et(e){let t=null;if(!e)return t;const n=e.domain;return n&&"codedValue"===n.type&&n.codedValues&&n.codedValues.length>0&&(t=[],n.codedValues.forEach((e=>{t.push({value:e.code,label:e.name})}))),t}function At(e,t){let n={isCodedValueOrSubtype:!1,displayValue:e+""};t&&t.length>0&&t.some((t=>t.value===e&&(n={isCodedValueOrSubtype:!0,displayValue:t.label},!0)));return Object.assign(n,{value:e})}function Ot(e,t,n,r){let o=null;if(!(r=r||vt(e.fields,t)))return o;const i=e.subtypeField||e.typeIdField,s=e.subtypes||e.types;return i&&(null==s?void 0:s.length)>0?(s.some((e=>{var s;const a=null!==(s=e.code)&&void 0!==s?s:e.id;if(a===n){if(t===i)o=[{value:a,label:e.name}];else if(e.domains&&e.domains[t]){const n=e.domains[t];"inherited"===n.type?o=Et(r):n.codedValues&&n.codedValues.length>0&&(o=[],n.codedValues.forEach((e=>{o.push({value:e.code,label:e.name})})))}else e.domains&&(o=Et(r));return!0}return!1})),o||(o=Et(r))):o=Et(r),o}function Ct(e,t,n){return e[t]?n===e[t]||(e[t]=e[t]+", "+n):e[t]=n,e}function Tt(e,t){let n=null;if(!t)return n;const r=t.name;let o={},i=!0;const s=e.subtypeField||e.typeIdField,a=e.subtypes||e.types;s&&(null==a?void 0:a.length)>0?Object.keys(a).forEach((e=>{const n=a[e];if(n.domains&&n.domains[r]){const e=n.domains[r];if("inherited"===e.type){if(i){i=!1;const e=Et(t);null==e||e.forEach((e=>{o=Ct(o,e.value,e.label)}))}}else e.codedValues&&e.codedValues.length>0&&e.codedValues.forEach((e=>{o=Ct(o,e.code,e.name)}))}})):n=Et(t);const l=[];for(const e in o){const n=mt(t.type)?parseFloat(e):e;l.push({value:n,label:o[e]})}return l.length>0&&(n=l),n}function xt(e,t,n,r="label"){const o=function(e,t){let n=null,r=null;const o=Rt(e);let i;if(o)n={},r=o.uniqueValueInfos,i=o;else{const t=e;if(t.renderer){const e=Rt(t.sourceJSON),o=t.renderer.toJson();"uniqueValue"===o.type&&e&&e.field1===o.field1&&e.field2===o.field2?(n={},r=o.uniqueValueInfos,i=o):e&&(n={},r=e.uniqueValueInfos,i=e)}}if(r){let e=null;if(t===o.field1?e=0:t===o.field2?e=1:t===o.field3&&(e=2),null===e)return null;for(let t=0;t<r.length;t++){const o=r[t];if(i.field2){const t=o.value.split(","),r=o.label.split(",");n[t[e]]=r[e]}else n[o.value]=o.label}}return n}(e,n);if(o&&t)for(let e=0;e<t.length;e++)o[t[e].value]&&(t[e][r]=o[t[e].value]);return t}function Rt(e){var t,n;let r=null;return"uniqueValue"===(null===(n=null===(t=e.drawingInfo)||void 0===t?void 0:t.renderer)||void 0===n?void 0:n.type)&&(r=e.drawingInfo.renderer),r}function Pt(e){const t=(0,pe.getUrlHost)(e);if(!t)return!1;const n=t.endsWith(".arcgis.com"),r=t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")||/^[a-z\d-]+\.svcs(?:qa|dev)?\./.test(t);return n&&r}function Dt(e){return null==e?void 0:e.replace(/\s/g,"_")}function _t(e){var t,n;if(!e)return null;const r=null!==(n=null!==(t=e.id)&&void 0!==t?t:e.title)&&void 0!==n?n:e.name;return void 0===r?null:Dt(`${r}`)}function Lt(e){var t,n,r,o,i,s;if(!e)return null;const a=null!==(s=null!==(i=null!==(o=null!==(n=null===(t=e.source)||void 0===t?void 0:t.mapLayerId)&&void 0!==n?n:null===(r=e.sourceJSON)||void 0===r?void 0:r.id)&&void 0!==o?o:e.id)&&void 0!==i?i:e.title)&&void 0!==s?s:e.name;return void 0===a?null:Dt(`${a}`)}function Mt(e){var t,n;if(!e)return null;const r=null!==(n=null!==(t=e.id)&&void 0!==t?t:e.name)&&void 0!==n?n:e.title;return void 0===r?null:Dt(`${r}`)}function kt(e){var t;if(!e)return null;const n=null!==(t=e.name)&&void 0!==t?t:e.id;return void 0===n?null:Dt(`${n}`)}function Nt(e){return(null==e?void 0:e.type)&&Object.values(l.QB).some((t=>t===e.type))}function jt(e){return e.sort(((e,t)=>{var n;return null===(n=(null==e?void 0:e.getLabel)?e.getLabel():(null==e?void 0:e.label)||(null==e?void 0:e.sourceLabel))||void 0===n?void 0:n.localeCompare((null==t?void 0:t.getLabel)?t.getLabel():(null==t?void 0:t.label)||(null==t?void 0:t.sourceLabel),null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"})}))}function Ut(e,t){return`${e}-${t}`}function Ft(e){const{field:t,dataSource:n,dataSourceId:r,sqlExpression:o,queryScope:a=l.pQ.InConfigView,widgetId:u,sortOrder:c=l.Vh.Asc}=e,d=[{customSQL:`${t.name} IS NOT NULL`,customDisplaySQL:`${t.name} IS NOT NULL`}];t.type===s.Eo.String&&d.push({customSQL:`CHAR_LENGTH(${t.name}) > 0`,customDisplaySQL:`CHAR_LENGTH(${t.name}) > 0`});const p=le(i.Mg.And,d,n),f=o?ue([o,p],n,i.Mg.And):p,h=[`${t.name} ${c}`],g={queryParams:{where:f.sql,sqlExpression:f,returnGeometry:!1,outFields:[t.name],orderByFields:h,returnDistinctValues:!0},queryOptions:{scope:a,widgetId:u||"advanced_select_query"}};return u&&(g.queryOptions.excludeQuery={dataSourceId:r,widgetId:u}),g}function Bt(e){return lt(this,void 0,void 0,(function*(){const{field:t,dataSource:n}=e;if(!t)return 0;const r=n,o=Ft(Object.assign(Object.assign({},e),{dataSourceId:n.belongToDataSource.id}));return yield r.loadCount(o.queryParams,o.queryOptions).then((e=>e))}))}function $t(e){return lt(this,void 0,void 0,(function*(){const{field:t,dataSource:n,pageSize:r,sortType:o,sortOrder:i}=e,a=[];if(!t)return{list:a};const l=(0,P.getIntl)(),u=["undefined"];t.type===s.Eo.Number&&u.push("nan");const c=n,d=Ft(Object.assign(Object.assign({},e),{dataSourceId:n.belongToDataSource.id,sortOrder:i}));return d.queryParams.page=1,d.queryParams.pageSize=r,yield c.load(d.queryParams,d.queryOptions).then((e=>{const n={},r={};return e?(e.forEach((e=>{const o=e,i=o.feature.attributes[t.jimuName];if(!(i in n)&&(n[i]=!0,0===u.filter((e=>(i+"").trim().toLowerCase()===e)).length)){const e=o.getFormattedFieldValue(t.jimuName,l);t.type===s.Eo.Date?(e in r||a.push({value:i,label:e}),r[e]=!0):a.push({value:i,label:e})}})),"LABEL"===o&&a.sort(((e,t)=>e.label.localeCompare(t.label,null===window||void 0===window?void 0:window.locale,{numeric:!0,sensitivity:"base"}))),{list:a,recordLength:t.type===s.Eo.Date?e.length:a.length}):null}))}))}function Vt(e){let t=null==e?void 0:e.url;return t?(t=null!==e.layerId&&void 0!==e.layerId?e.type===l.QB.SceneLayer?e.url+"/layers/"+e.layerId:e.url+"/"+e.layerId:e.url,t=t.replace(/^http:/,"https:"),t):null}function Gt(e,t){const n=a.A.getInstance();let r;return r=t?e.dataViewId?n.getLocalDataSourceId(n.getDataViewDataSourceId(e.mainDataSourceId,e.dataViewId),t):n.getLocalDataSourceId(e.mainDataSourceId,t):e.dataSourceId,r}function Wt(e){var t;return e?{dataSourceId:e.id,mainDataSourceId:e.getMainDataSource().id,dataViewId:e.dataViewId,rootDataSourceId:null===(t=e.getRootDataSource())||void 0===t?void 0:t.id}:null}function Ht(e){return lt(this,void 0,void 0,(function*(){var t;const n=null==e?void 0:e.getDataSourceJson();if(null==n?void 0:n.sourceLabel)return n.sourceLabel;const r=(null==e?void 0:e.getServiceDefinition)?e.getServiceDefinition():null===(t=null==e?void 0:e.getLayerDefinition)||void 0===t?void 0:t.call(e),o=null==e?void 0:e.layer;let i=null==r?void 0:r.name;return o?i=o.title||i:(null==n?void 0:n.itemId)&&!e.parentDataSource&&e.fetchItemInfo&&(i=yield e.fetchItemInfo().then((e=>(null==e?void 0:e.title)||i)).catch((e=>(console.warn("Can not get item info. ",e,n.itemId,n.portalUrl),i)))),i}))}function qt(e){var t;let n,r=e;for(;null===(t=null==r?void 0:r.declaredClass)||void 0===t?void 0:t.includes("layer");)n=n?`${Dt(r.id+"")}-${n}`:Dt(r.id+""),r=r.parent;return n}function zt(e,t){if(!e)return null;const n=e.getMainDataSource(),r=e=>{var t,r;return!e||(n.map?!(null===(r=null===(t=null==e?void 0:e.declaredClass)||void 0===t?void 0:t.toLowerCase())||void 0===r?void 0:r.includes("layer")):n.layer&&`${e.id}`==`${n.layer.id}`||Kt(n,e))};let o,i=t;for(;!r(i);)o="esri.layers.support.Sublayer"===i.declaredClass?o?`${Lt(i)}-${o}`:Lt(i):o?`${_t(i)}-${o}`:_t(i),i=i.parent;return o?`${n.id}-${o}`:n.id}function Kt(e,t){var n,r,o;if(!e||!t)return!1;const i=e.getMainDataSource();if(t[s.yC.EXB_DATA_SOURCE_ID_SET_TO_CREATED_JS_API_LAYER])return t[s.yC.EXB_DATA_SOURCE_ID_SET_TO_CREATED_JS_API_LAYER]===i.id;if(null===(n=t.portalItem)||void 0===n?void 0:n.id){if(t.portalItem.id===i.itemId){if(t.url)return Jt(i,t);return!t.parent||!(null===(o=null===(r=t.parent.declaredClass)||void 0===r?void 0:r.toLowerCase())||void 0===o?void 0:o.includes("layer"))||`${t.layerId}`===i.jimuChildId}return!1}return t.url?Jt(i,t):i.layer?`${t.id}`===i.layer.id:`${t.id}`===i.jimuChildId}function Jt(e,t){if(!(null==e?void 0:e.url)||!(null==t?void 0:t.url))return!1;if(e.type===l.hg.SubtypeSublayer){return Vt(t.parent)===e.url&&t.subtypeCode===e.getSubtypeCode()}return Vt(t)===e.url}function Yt(e,t){const n=(null==e?void 0:e.split("-"))||[],r=(null==t?void 0:t.split("-"))||[];return Xt(t)&&r.length-1===n.length&&n.every(((e,t)=>r[t]===e))}function Qt(e,t){if(!e||!t)return!1;const n=Xt(e),r=Xt(t);if(n&&r)return e.replace(/-[^-]+$/,"")===t.replace(/-[^-]+$/,"");if(n||r){return Yt(n?t:e,n?e:t)}return e===t}function Xt(e){return e&&[/-dataView_\d+$/,new RegExp(`-${d.SELECTION_DATA_VIEW_ID}$`),new RegExp(`-${d.DATA_VIEW_ID_FOR_NO_SELECTION}$`),new RegExp(`-${d.OUTPUT_DATA_VIEW_ID}$`)].some((t=>t.test(e)))}function Zt(e){return Xt(e)?e.replace(/-[^-]+$/,""):e}function en(e){const t=null==e?void 0:e.split("-");return(null==t?void 0:t.length)>1?t[0]:null}function tn(e){return Xt(e)?e.split("-").pop():null}function nn(e){return{dataSourceId:e,mainDataSourceId:Zt(e),dataViewId:tn(e),rootDataSourceId:en(e)}}function rn(e,t){if(!(null==t?void 0:t.length)||!e)return{isChanged:!1,useDataSources:t};const n=t.asMutable().map((t=>on(e,t)));return{isChanged:n.some((e=>e.isChanged)),useDataSources:n.map((e=>e.useDataSource))}}function on(e,t){var n,r;if(!t||!e)return{isChanged:!1,useDataSource:t};let o=!1,i=(null===(r=(n=t).asMutable)||void 0===r?void 0:r.call(n,{deep:!0}))||t;const s=t.mainDataSourceId,a=e[s];return a&&a!==s&&(o=!0,i=function(e,t,n){const r=Object.assign(Object.assign({},e),{dataSourceId:e.dataSourceId.replace(t,n),mainDataSourceId:n}),o=n.split("-");o.length>1&&(r.rootDataSourceId=o[0]);return r}(i,s,a)),{isChanged:o,useDataSource:i}}function sn(e){return(null==e?void 0:e.split("-").reverse()[0])===d.SELECTION_DATA_VIEW_ID}function an(e){return lt(this,void 0,void 0,(function*(){var t,n,r,o,i,s,a;if(!e)return!1;try{const l=(0,Ae.Vp)().getState().user;if(!l)return!1;const c=(null===(n=null===(t=e.getLayerDefinition)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.serviceItemId)||(null===(a=null===(s=null===(i=null===(o=(r=e).getAssociatedDataSource)||void 0===o?void 0:o.call(r))||void 0===i?void 0:i.getLayerDefinition)||void 0===s?void 0:s.call(i))||void 0===a?void 0:a.serviceItemId),d=(0,Ae.Vp)().getState().portalUrl;let p=c===e.itemId&&d===e.portalUrl?e.getItemInfo():null,f=!1;if(window.jimuConfig.isInPortal||window.jimuConfig.isDevEdition&&!(0,Oe.isAGOLDomain)(d)?f=e.portalUrl===d:c&&(p=(null==p?void 0:p.contentOrigin)?p:yield(0,u.requestWrapper)(d,(e=>(0,Ee.getItem)(c,{portal:(0,Oe.getPortalRestUrl)(d),authentication:e}))).catch((e=>(console.log("Failed to get item info via app portal url. ",e),null))),f="self"===(null==p?void 0:p.contentOrigin)),f){const e="org_admin"===l.role,t=l.username===(null==p?void 0:p.owner);return!(!e&&!t)}return!1}catch(e){return console.log("Failed to get whether user is the owner of the item, or the admin of the org the item belongs to, ",e),!1}}))}function ln(e){return lt(this,void 0,void 0,(function*(){var t,n;if(!e)return!1;if(e.isDataView||e.isLocal)return e.getMainDataSource().supportReplica();if(e.url){const r=e.getLayerDefinition();return!(!(null===(t=r.capabilities)||void 0===t?void 0:t.includes("Sync"))&&!(null===(n=r.capabilities)||void 0===n?void 0:n.includes("Extract")))||an(e)}return!1}))}function un(e){return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportSymbol():!(e.getDataSourceJson().isDataInDataSourceInstance||!e.layer))}function cn(e){var t;return!!e&&(e.isDataView||e.isLocal?e.getMainDataSource().supportAttachment():null===(t=e.getLayerDefinition())||void 0===t?void 0:t.hasAttachments)}function dn(e){var t,n,r,o,i,s,a,u;if((null==e?void 0:e.type)!==l.hg.FeatureLayer&&(null==e?void 0:e.type)!==l.hg.MapService&&(null==e?void 0:e.type)!==l.hg.SubtypeGroupLayer&&(null==e?void 0:e.type)!==l.hg.ImageryLayer&&(null==e?void 0:e.type)!==l.hg.ImageryTileLayer)return!1;if(e.isDataView||e.isLocal)return e.getMainDataSource().supportTime();if(e.type===l.hg.FeatureLayer||e.type===l.hg.ImageryLayer||e.type===l.hg.ImageryTileLayer||e.type===l.hg.SubtypeGroupLayer?null===(n=null===(t=e.getLayerDefinition())||void 0===t?void 0:t.timeInfo)||void 0===n?void 0:n.timeExtent:null===(o=null===(r=e.getServiceDefinition())||void 0===r?void 0:r.timeInfo)||void 0===o?void 0:o.timeExtent){let t=e;(null===(i=e.getDataSourceJson().url)||void 0===i?void 0:i.split("/").some((e=>e.toLowerCase()===l.nS.MapService.toLowerCase())))&&(t=vn(e)||t);const n=gn(null===(u=null===(a=null===(s=e.getRootDataSource())||void 0===s?void 0:s.map)||void 0===a?void 0:a.resourceInfo)||void 0===u?void 0:u.operationalLayers,t);return!n||!1!==n.timeAnimation}return!1}function pn(e){var t;if("sublayer"!==(null==e?void 0:e.type)&&(null==e?void 0:e.type)!==l.QB.FeatureLayer&&(null==e?void 0:e.type)!==l.QB.MapImageLayer&&(null==e?void 0:e.type)!==l.QB.SubtypeGroupLayer&&(null==e?void 0:e.type)!==l.QB.ImageryLayer&&(null==e?void 0:e.type)!==l.QB.ImageryTileLayer)return!1;let n=e,r=e;for(;r.parent;)r=r.parent,"sublayer"===n.type&&(n=n.parent);const o=null==r?void 0:r.resourceInfo,i=((null==o?void 0:o.operationalLayers)||[]).concat((null==o?void 0:o.tables)||[]);if(!(null===(t=n.timeInfo)||void 0===t?void 0:t.toJSON().timeExtent))return!1;const s=mn(i,n);return s&&!1!==s.timeAnimation}function fn(e,t){if(-1===e||-1===t)return-1;if(null==e||null==t)return e||t;const n="number"==typeof e,r="number"==typeof t,o=Array.isArray(e),i=Array.isArray(t);if(n&&r)return e===t?e:-1;if(n&&i||o&&r){const r=n?e:t,i=o?e:t,s=hn(i),a=hn(i,!1);return r>=s&&r<=a?r:-1}if(o&&i){const n=Math.max(hn(e),hn(t)),r=Math.min(hn(e,!1),hn(t,!1));return n>r?-1:[n===-1/0?null:n,r===1/0?null:r]}return-1}function hn(e,t=!0){return t?"number"==typeof(null==e?void 0:e[0])?e[0]:-1/0:"number"==typeof(null==e?void 0:e[1])?e[1]:1/0}function gn(e,t){let n=null;return t?(null==e||e.some((e=>{var r;return(null==e?void 0:e.id)!==(null===(r=t.getSchema())||void 0===r?void 0:r.childId)&&(null==e?void 0:e.id)!==t.jimuChildId||(n=e),n||"GroupLayer"!==(null==e?void 0:e.layerType)||(n=gn(null==e?void 0:e.layers,t)),!!n})),n):n}function mn(e,t){let n=null;return t?(null==e||e.some((e=>((null==e?void 0:e.id)===t.id&&(n=e),n||"GroupLayer"!==(null==e?void 0:e.layerType)||(n=mn(null==e?void 0:e.layers,t)),!!n))),n):n}function vn(e){let t=e,n=null;for(;t;){if(t.type===l.hg.MapService){n=t;break}t=t.parentDataSource}return n}function yn(e){var t,n,r;const o=On(e);return o?o.type!==e.type?null===(r=null===(n=(t=o).getAssociatedDataSource)||void 0===n?void 0:n.call(t))||void 0===r?void 0:r._layer:o._layer:null}function Sn(e){var t,n,r,o;const i=On(e);if(!i)return null;if(!i._restLayer){const e={id:i.id,layerType:"ArcGISFeatureLayer",url:i.url,itemId:i.itemId,layerDefinition:i.getLayerDefinition(),popupInfo:i.getPopupInfo(),title:i.getLabel()};if(!i.url&&!i.itemId&&!i.getDataSourceJson().isDataInDataSourceInstance){const s=i.getRootDataSource();if(null===(n=null===(t=null==s?void 0:s.map)||void 0===t?void 0:t.resourceInfo)||void 0===n?void 0:n.operationalLayers){const t=gn(null===(o=null===(r=null==s?void 0:s.map)||void 0===r?void 0:r.resourceInfo)||void 0===o?void 0:o.operationalLayers,i);(null==t?void 0:t.featureCollection)&&(e.featureCollection=t.featureCollection)}}i._restLayer=e}return i._restLayer}function In(e){const t=On(e);return Object.assign(Object.assign({},null==e?void 0:e.layerDefinition),null==t?void 0:t.layerDefinition)}function bn(e){const t=On(e);return(null==t?void 0:t.popupInfo)||function(e){var t,n,r,o;if(!e)return null;let i;if(e.layer)i=null===(t=e.layer.popupTemplate)||void 0===t?void 0:t.toJSON();else if(R(e)){const t=e.getItemData(),r=null===(n=null==t?void 0:t.layers)||void 0===n?void 0:n.find((t=>`${t.id}`===e.getDataSourceJson().layerId));i=null==r?void 0:r.popupInfo}if(null===(r=null==i?void 0:i.fieldInfos)||void 0===r?void 0:r.length){const t=(null===(o=e.getSchema())||void 0===o?void 0:o.fields)||{};i.fieldInfos=i.fieldInfos.filter((e=>e.fieldName.startsWith("expression/")||Object.keys(t).some((n=>t[n].name===e.fieldName))))}return i}(t)}function wn(e){const t=On(e);return null==t?void 0:t.getDataSourceJson().exportOptions}function En(e,t){var n,r;if(!e||!t)return null;const o=Object.values((null===(n=t.getDataSourceJson().schema)||void 0===n?void 0:n.fields)||{}),i=null===(r=e.fieldInfos)||void 0===r?void 0:r.filter((e=>o.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.fieldName)))));return Object.assign(Object.assign({},e),{fieldInfos:i})}function An(e,t){var n,r;if(!e||!t)return null;const o=Object.values((null===(n=t.getDataSourceJson().schema)||void 0===n?void 0:n.fields)||{}),i=null===(r=e.fields)||void 0===r?void 0:r.filter((e=>o.some((t=>(null==t?void 0:t.name)===(null==e?void 0:e.name)))));return Object.assign(Object.assign({},e),{fields:i,geometryType:null,typeIdField:null})}function On(e){var t;if(!e)return null;if(e.getDataSourceJson().isOutputFromWidget&&!e.getDataSourceJson().schema&&1===(null===(t=e.getDataSourceJson().originDataSources)||void 0===t?void 0:t.length)){const t=e.getOriginDataSources()[0];if(x(t))return On(t)}return e.getMainDataSource()}function Cn(e){var t;return(null==e?void 0:e.type)!==l.hg.FeatureLayer?null:e.getDataSourceJson().isDataInDataSourceInstance?null===(t=g(e,e.getSourceRecords()))||void 0===t?void 0:t.layer:Object.assign({},e.restLayer)}function Tn(e){return lt(this,void 0,void 0,(function*(){return(null==e?void 0:e.itemId)&&(null==e?void 0:e.portalUrl)?yield(0,p.e)(["esri/layers/Layer","esri/portal/PortalItem"]).then((t=>lt(this,void 0,void 0,(function*(){const n=t[0],r=t[1];return yield n.fromPortalItem({portalItem:new r({id:e.itemId,portal:{url:e.portalUrl}})}).then((t=>lt(this,void 0,void 0,(function*(){return(null==t?void 0:t.type)===l.QB.FeatureLayer?yield Promise.resolve(t):(null==t?void 0:t.type)===l.QB.GroupLayer?yield t.loadAll().then((t=>lt(this,void 0,void 0,(function*(){const n=t.layers.toArray().find((t=>`${t.layerId}`===e.layerId||Dt(t.title)===Dt(e.getMainDataSource().getDataSourceJson().sourceLabel)));return(null==n?void 0:n.type)===l.QB.FeatureLayer?Promise.resolve(n):Promise.reject(new Error("Feature layer data source error: failed to create feature layer with specific layer id."))})))):void 0}))))})))):yield Promise.resolve(null)}))}function xn(e){var t,n,r;const o=e;return(null===(t=o.layer)||void 0===t?void 0:t.datesInUnknownTimezone)||(null===(r=null===(n=o.getLayerDefinition)||void 0===n?void 0:n.call(o))||void 0===r?void 0:r.datesInUnknownTimezone)}function Rn(e){let t=0;if(null===e)return t;if(t=ut[e],void 0===t){const n=/([-+]?\d+(\.\d+)?)/,r=new Intl.DateTimeFormat("en-us",{timeZone:e,timeZoneName:"shortOffset"}).formatToParts(new Date).find((({type:e})=>"timeZoneName"===e)).value.match(n);t=r?parseFloat(r[0]):0}return 60*t*60*1e3}function Pn(e){let t="";return t="unknown"===e||ut[e]||null===e?"unknown":"device"===e?"system":e,t}function Dn(e,t){const n=[t];let r=e;for(;r;)r.jimuChildId&&n.push(r.jimuChildId),r=r.parentDataSource;const o=n.reverse();let i=(e.getRootDataSource()||e).getDataSourceJson();for(const e of o){if(!i.childDataSourceJsons)return{};i=i.childDataSourceJsons[e]}return i}function _n(e,t){const n=t.getTimezone();if("unknown"===n)e-=Z();else if("device"!==n){const t=Rn(n);e=e-Z()+t}return e}function Ln(e,t){const n=t.getTimezone();if("unknown"===n)e+=Z();else if("device"!==n){const t=Rn(n);e=e+Z()-t}return e}function Mn(e,t,n){var r;if(!t||!e)return[];if("feature"===n&&(null===(r=e.outFields)||void 0===r?void 0:r.includes("*")))return["*"];const o=Object.values(t.getSchema().fields||{}).map((e=>e.jimuName)),i=o.filter((t=>{var n,r;return null===(r=null===(n=e.where)||void 0===n?void 0:n.split(" "))||void 0===r?void 0:r.some((e=>null==e?void 0:e.includes(t)))})),s=o.filter((t=>{var n;return null===(n=e.orderByFields)||void 0===n?void 0:n.some((e=>{var n;return null===(n=null==e?void 0:e.split(" "))||void 0===n?void 0:n.includes(t)}))})),a=o.filter((t=>{var n;return null===(n=e.groupByFieldsForStatistics)||void 0===n?void 0:n.some((e=>e===t))})),l=o.filter((t=>{var n;return null===(n=e.outStatistics)||void 0===n?void 0:n.some((e=>e.onStatisticField===t))}));let u=[];if("count"===n||"id"===n||"extent"===n)u=Array.from(new Set([...i,...s,...a,...l]));else if("feature"===n){const t=e.outFields||[];u=Array.from(new Set([...t,...i,...s,...a,...l]))}return u.length===o.length&&(u=["*"]),u}function kn(e){let t=e;const n=t.getDataSourceJson();n.isOutputFromWidget&&!n.schema&&(t=t.getOriginDataSources()[0]||t);return!t.isDataView&&!t.isLocal||(t=t.getMainDataSource()||t),t}function Nn(e,t){var n;const r=kn(e).getRootDataSource(),o=kn(t).getRootDataSource();if(r.id!==o.id)return null;const{relationships:i=[],id:s}=(null===(n=null==e?void 0:e.getLayerDefinition)||void 0===n?void 0:n.call(e))||{},{relationships:a=[],id:l}=t.getLayerDefinition()||{},u=i.find((e=>e.relatedTableId===l)),c=a.find((e=>e.relatedTableId===s));if(!u||!c)return null;const d="number"==typeof(null==u?void 0:u.relationshipTableId)&&"number"==typeof(null==c?void 0:c.relationshipTableId);return{keyField:null==u?void 0:u.keyField,relatedKeyField:null==c?void 0:c.keyField,hasRelationshipTable:d}}const jn=["page","pageSize","returnGeometry","outFields","returnZ","returnM","sqlExpression","notAddFieldsToClient","disableClientQuery"];function Un(e){if(!e)return!0;const t=e.without(...jn);if(0===Object.keys(t).length)return!0;const n="string"==typeof t.where?t.where.replace(/\s+/g,"").replace(/\(/g,"").replace(/\)/g,""):null;return 1===Object.keys(t).length&&["","1=1"].some((e=>e===n))}function Fn(e){var t;return!!(null==e?void 0:e.query)&&Object.keys((null===(t=null==e?void 0:e.getSchema())||void 0===t?void 0:t.fields)||{}).length>0}function Bn(e){var t,n;if(!e)return[];const r=a.A.getInstance(),o=null===(t=r.getDataSource(e))||void 0===t?void 0:t.getMainDataSource();if(!o)return[];const i=o.getDataSourceJson(),s=Object.values(null!==(n=null==i?void 0:i.dataViews)&&void 0!==n?n:{}).map((e=>r.getDataViewDataSourceId(o.id,e.id)));return s.push(o.id),s.push(r.getDataViewDataSourceId(o.id,d.SELECTION_DATA_VIEW_ID)),s}},9146:(e,t,n)=>{"use strict";function r(e,t,n){const r=Object.assign(Object.assign({params:{}},n),e);return r.params=t.reduce(((t,n)=>((e[n]||"boolean"==typeof e[n]||"number"==typeof e[n]&&0===e[n])&&(t[n]=e[n]),t)),r.params),["params","httpMethod","rawResponse","authentication","hideToken","portal","credentials","maxUrlLength","headers","signal","suppressWarnings","request"].reduce(((e,t)=>(r[t]&&(e[t]=r[t]),e)),{})}n.d(t,{O:()=>r})},9160:(e,t,n)=>{"use strict";n.d(t,{Ho:()=>c,OC:()=>s,hr:()=>l,pg:()=>u,sb:()=>d,uo:()=>a});var r,o=n(1635);!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(r||(r={}));var i=function(e){function t(n,r,o){var i=this,s=o?o instanceof Error?o:new Error(String(o)):void 0;return(i=e.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,"\n").concat(s?"\n".concat(s.message,"\n").concat(s.stack):""))||this).code=n,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(i,t),i}return(0,o.C6)(t,e),t}(Error),s=function(e){function t(t,n){return e.call(this,r.UNSUPPORTED_FORMATTER,t,n)||this}return(0,o.C6)(t,e),t}(i),a=function(e){function t(t,n){return e.call(this,r.INVALID_CONFIG,t,n)||this}return(0,o.C6)(t,e),t}(i),l=function(e){function t(t,n){return e.call(this,r.MISSING_DATA,t,n)||this}return(0,o.C6)(t,e),t}(i),u=function(e){function t(t,n,o){var i=e.call(this,r.FORMAT_ERROR,"".concat(t,"\nLocale: ").concat(n,"\n"),o)||this;return i.locale=n,i}return(0,o.C6)(t,e),t}(i),c=function(e){function t(t,n,r,o){var i=e.call(this,"".concat(t,"\nMessageID: ").concat(null==r?void 0:r.id,"\nDefault Message: ").concat(null==r?void 0:r.defaultMessage,"\nDescription: ").concat(null==r?void 0:r.description,"\n"),n,o)||this;return i.descriptor=r,i.locale=n,i}return(0,o.C6)(t,e),t}(u),d=function(e){function t(t,n){var o=e.call(this,r.MISSING_TRANSLATION,'Missing message: "'.concat(t.id,'" for locale "').concat(n,'", using ').concat(t.defaultMessage?"default message (".concat("string"==typeof t.defaultMessage?t.defaultMessage:t.defaultMessage.map((function(e){var t;return null!==(t=e.value)&&void 0!==t?t:JSON.stringify(e)})).join(),")"):"id"," as fallback."))||this;return o.descriptor=t,o}return(0,o.C6)(t,e),t}(i)},9174:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(2089),o=n(1035),i=n(2159),s=n(5001),a=n(6962),l=n(4820),u=n(6090),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function d(e,t){var n,r,i,s,a,l;const u=t.widgetId;if(!t.supportProviderWidget&&e===u)return!1;const c=null===(n=(0,o.Vp)().getState().appConfig)||void 0===n?void 0:n.widgets[e];if(!c)return!1;const d=c.dataActions;if(null===(i=null===(r=null==d?void 0:d[t.name])||void 0===r?void 0:r.enabled)||void 0===i||i){const e=null===(a=null===(s=null==d?void 0:d[t.name])||void 0===s?void 0:s.actions)||void 0===a?void 0:a[u];return null===(l=null==e?void 0:e.enabled)||void 0===l||l}return!1}class p{constructor(){this.actions=[],this.actionClassPromises={}}static getInstance(){return p.instance||(p.instance=new p,window._dataActionManager=p.instance),p.instance}getActions(){return this.actions}getSupportedActions(e,t,n){return c(this,void 0,void 0,(function*(){var r,s;const a={},l=(0,o.Vp)().getState().appConfig,u=null===(r=(null==l?void 0:l.widgets[e]).manifest)||void 0===r?void 0:r.excludeDataActions,p=(0,i.getAllWidgetsInSameRootContainer)(e),f=[];for(const t of this.actions){let n=!1;if(t.widgetId){const r=null===(s=(0,o.Vp)().getState().appConfig)||void 0===s?void 0:s.widgets[t.widgetId];n=this.isActionExcluded(`${r.manifest.name}.${t.name}`,u)||!d(e,t)}else n=(null==u?void 0:u.includes(t.name))||!d(e,t);n||f.push(t)}return yield Promise.all(f.map((r=>c(this,void 0,void 0,(function*(){let o=!1;try{o=yield this.testActionSupportData(r,t,n,e)}catch(t){console.error("testActionSupportData error",r,n,e),o=!1}o&&(r.widgetId&&!p.includes(r.widgetId)||(a[r.name]||(a[r.name]=[]),a[r.name].push(r)))}))))),a}))}isActionExcluded(e,t=[]){const n=e.split(".");if(2!==n.length)return!0;const r=`${n[0]}.*`;return t.some((t=>t===e||t===r))}registerWidgetActions(e,t){return c(this,void 0,void 0,(function*(){const n=[];if(!e.uri)return n;const r=r=>c(this,void 0,void 0,(function*(){var o;const s=e.uri+"dist/"+r.uri,a=`${e.id}-${r.name}`,l=yield this.registerAction({id:a,name:r.name,uri:s,widgetId:e.id,label:null!==(o=e.manifest.i18nMessages[`_action_${r.name}_label`])&&void 0!==o?o:r.label,icon:`${(0,i.getWidgetContext)(e.uri).folderUrl}dist/${r.icon}`,appConfig:t});l&&n.push(l)}));if(e.manifest.dataActions)for(let t=0;t<e.manifest.dataActions.length;t++){const n=e.manifest.dataActions[t];yield r(n)}return n}))}registerAction(e){return c(this,void 0,void 0,(function*(){const t=this.actions.find((t=>t.id===e.id));if(t)return t;const n=()=>c(this,void 0,void 0,(function*(){return e.ActionClass?e.ActionClass:this.loadActionClass(e)}));try{const t=new(yield n())({id:e.id,name:e.name,label:e.label,icon:e.icon,widgetId:e.widgetId,intl:(0,a.getIntl)(e.widgetId,"runtime")});return this.actions.push(t),t}catch(t){console.error(`Action class ${e.uri} load failed.`,t)}return null}))}executeDataAction(e,t,n,r,o){return c(this,void 0,void 0,(function*(){return e.widgetId&&this.openWidget(e.widgetId),e.onExecute(t,n,r,o)}))}openWidget(e){const t=(0,r.getModuleSync)("jimu-layouts/layout-runtime"),n=(0,o.Vp)().getState(),i=n.appConfig,a=n.browserSizeMode,u=t.searchUtils.getParentWidgetIdOfContent(i,e,s.K.Widget,a);u&&(i.widgets[u].manifest.properties.isWidgetController?(0,o.Vp)().dispatch((0,l.openWidget)(e)):this.openWidget(u))}destroyWidgetActions(e){this.actions=this.actions.filter((t=>(t.widgetId===e&&t.destroy(),t.widgetId!==e)))}loadActionClass(e){return c(this,void 0,void 0,(function*(){const t=e.uri;return this.actionClassPromises[t]||(e.widgetId&&(yield this.loadDependency(e)),this.actionClassPromises[t]=(0,r.loadModule)(t).then((e=>e.default))),this.actionClassPromises[t]}))}loadDependency(e){return c(this,void 0,void 0,(function*(){var t;const{widgetId:n,appConfig:r}=e,i=null===(t=(r||(0,o.Vp)().getState().appConfig).widgets[n])||void 0===t?void 0:t.manifest;if(!i||!i.dependency)return Promise.resolve();const s="string"==typeof i.dependency?[i.dependency]:i.dependency;return(0,u.c)(s)}))}testActionSupportData(e,t,n,r){return c(this,void 0,void 0,(function*(){return e.isSupported(t,n,r)}))}}},9325:(e,t,n)=>{var r=n(4840),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},9349:e=>{e.exports={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}}},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9359:(e,t,n)=>{"use strict";var r,o,i,s,a,l,u,c,d,p,f,h,g,m,v;n.d(t,{$4:()=>o,AV:()=>f,JX:()=>h,Kk:()=>r,Lm:()=>a,M_:()=>p,Qw:()=>i,al:()=>s,bH:()=>u,g6:()=>l,gS:()=>v,gv:()=>g,lB:()=>d,oM:()=>c,pg:()=>m}),function(e){e.Page="pages",e.Dialog="dialogs",e.Header="header",e.Footer="footer",e.View="views",e.ScreenPanel="screens_panel",e.ScreenMain="screens_main"}(r||(r={})),function(e){e.Page="pages",e.View="view",e.Widget="widget",e.Screen="screen",e.Dialog="dialog",e.Header="header",e.Footer="footer"}(o||(o={})),function(e){e[e.Row=0]="Row",e[e.Column=1]="Column",e[e.Tab=2]="Tab",e[e.Plain=3]="Plain"}(i||(i={})),function(e){e.Fade="FADE",e.Cover="COVER",e.Push="PUSH"}(s||(s={})),function(e){e.Top="TOP",e.Upper="UPPER",e.Lower="LOWER",e.Bottom="BOTTOM"}(a||(a={})),function(e){e.Normal="NORMAL",e.Folder="FOLDER",e.Link="LINK"}(l||(l={})),function(e){e.FitWindow="FIT_WINDOW",e.AutoScroll="AUTO_SCROLL"}(u||(u={})),function(e){e.Fixed="FIXED",e.Anchored="ANCHORED"}(c||(c={})),function(e){e.NoButton="NO_BUTTON",e.ButtonInline="BUTTON_INLINE",e.ButtonBlock="BUTTON_BLOCK"}(d||(d={})),function(e){e.TopLeft="TOP_LEFT",e.TopRight="TOP_RIGHT",e.BottomLeft="BOTTOM_LEFT",e.BottomRight="BOTTOM_RIGHT",e.TopCenter="TOP_CENTER",e.BottomCenter="BOTTOM_CENTER",e.MiddleLeft="MIDDLE_LEFT",e.MiddleRight="MIDDLE_RIGHT",e.MiddleCenter="MIDDLE_CENTER"}(p||(p={})),function(e){e.CSV="CSV",e.JSON="JSON",e.GeoJSON="GeoJSON",e.Item="Item",e.Shapefile="Shapefile",e.FileGDB="FGDB",e.KML="KML"}(f||(f={})),function(e){e.GeoEnrichment="GEOENRICH",e.Geometry="GEOMETRY",e.GeoCoding="GEOCODING",e.Printing="PRINTING",e.Routing="ROUTING",e.GPServer="GPSERVER",e.GPTask="GPTask"}(h||(h={})),function(e){e.Device="DEVICE",e.Specific="SPECIFIC",e.Data="DATA"}(g||(g={})),function(e){e.Required="REQUIRED",e.Optional="OPTIONAL"}(m||(m={})),function(e){e.Horizontal="HORIZONTAL",e.Vertical="VERTICAL"}(v||(v={}))},9374:(e,t,n)=>{var r=n(4128),o=n(3805),i=n(4394),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?u(e.slice(2),n?2:8):s.test(e)?NaN:+e}},9459:(e,t,n)=>{"use strict";n.d(t,{A:()=>I,z:()=>S});var r=n(1035),o=n(508),i=n(2910),s=n(3610),a=n(2089),l=n(4820),u=n(4022),c=n(6480),d=n(3096),p=n(4502),f=n(5689),h=n(476),g=n(7390),m=n(3484),v=n(6048),y=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class S{static getInstance(){return window.jimuConfig.isBuilder?window._appWindow&&window._appWindow._dataSourceManager:(S.instance||(S.instance=new S,window._dataSourceManager=S.instance),S.instance)}constructor(){this.dataSources={},this.dataSourcesCreatePromise={},this.dataSourceFactories={},this.childDataSourcesPendedByTime=[],this.throttleDispatchPendedNotCreatedStatus=(0,u.A)(this.dispatchPendedNotCreatedStatus.bind(this),200,{leading:!1,trailing:!0}),this.throttleDispatchPendedCreatedStatus=(0,u.A)(this.dispatchPendedCreatedStatus.bind(this),200,{leading:!1,trailing:!0}),this.traversedDataSourceIdsByTime=new Set([]),this.notCreatedDataSourceIds=new Set([]),this.createdDataSourceIds=new Set([]),this.doNotBatchStatusDataSourceIds=new Set([]),window.jimuConfig.isBuilder?console.error("DataSourceManager should not be created in builder"):((0,r.Yz)(this.onStoreDataSourcesChange.bind(this),["appConfig","dataSources"]),(0,r.Yz)(this.onStoreResourceSessionsChange.bind(this),["resourceSessions"]))}getDataSource(e){return this.dataSources[e]}getDataViewDataSource(e,t){return this.dataSources[this.getDataViewDataSourceId(e,t)]}getDataSources(){return this.dataSources}getDataSourcesAsArray(){return Object.keys(this.dataSources).map((e=>this.dataSources[e]))}setDataSource(e,t){this.dataSources[e]=t}destroyAllDataSources(){Object.keys(this.dataSources).forEach((e=>{this.destroyDataSource(e)})),this.dataSourcesCreatePromise={}}destroyDataSource(e){var t;(null===(t=this.dataSources[e])||void 0===t?void 0:t.type)===o.hg.Error&&this.destroyDataSource(this.restoreErrorDataSourceId(e)),this.dataSources[e]?((0,r.Vp)().dispatch((0,l.clearDataSourceInfo)(e)),this.dataSources[e].getDataViews().forEach((e=>{this.destroyDataSource(e.id)})),this.dataSources[e].getLocalDataSources().forEach((e=>{this.destroyDataSource(e.id)})),this.getDataSourcesAsArray().forEach((t=>{t.getOriginDataSources().find((t=>t===this.dataSources[e]))&&this.destroyDataSource(t.id)})),this.dataSources[e].destroy(),delete this.dataSources[e],delete this.dataSourcesCreatePromise[e]):this.dataSourcesCreatePromise[e]&&((0,r.Vp)().dispatch((0,l.clearDataSourceInfo)(e)),delete this.dataSourcesCreatePromise[e]),this.doNotBatchStatusDataSourceIds.delete(e),this.traversedDataSourceIdsByTime.delete(e),this.notCreatedDataSourceIds.delete(e),this.createdDataSourceIds.delete(e)}getConfiguredDataSources(){return Object.keys(this.dataSources).filter((e=>!this.dataSources[e].getDataSourceJson().isOutputFromWidget)).map((e=>this.getDataSource(e))).filter((e=>{var t,n;return null===(t=this.getAppConfig().dataSources)||void 0===t?void 0:t[(null===(n=e.getRootDataSource())||void 0===n?void 0:n.id)||e.id]}))}getWidgetGeneratedDataSources(){const e={},t=this.getAppConfig();return Object.keys(t.widgets).filter((e=>t.widgets[e].outputDataSources)).forEach((n=>{e[n]=t.widgets[n].outputDataSources.asMutable().map((e=>this.getDataSource(e)))})),e}createAllDataSources(){const e=this.getAppConfig()&&this.getAppConfig().dataSources,t=[];return e&&Object.keys(e).forEach((e=>{this.dataSources[e]||t.push(this.createDataSource(e).then((e=>e.isDataSourceSet()&&!e.getRootDataSource()?e.childDataSourcesReady().then((()=>e)):e)).catch((t=>(console.error("Create data source failed",e,t),Promise.resolve(null)))))})),Promise.all(t).then((e=>Promise.all(this.getDataSourcesAsArray().filter((e=>e.getMainDataSource().id===e.id)).map((e=>this.createDataViews(e)))).then((()=>e))))}createAllDataSourcesByTime(){return y(this,arguments,void 0,(function*(e=30,t=1e3){for(;!this.areAllDataSourcesCreated();){const n=this.getDataSourcesAsArray().filter((e=>e.type!==o.hg.Error&&e.getMainDataSource().id===e.id&&!this.traversedDataSourceIdsByTime.has(e.id))).reverse();n.length?this.createDataSourcesAndTheirDataViewsByUseDataSources(this.getChildUseDataSourcesFromParentDss(e,n)):this.createDataSourcesAndTheirDataViewsByUseDataSources(this.getRootUseDataSourcesFromConfig(e)),yield this.delay(t)}this.getDataSourcesAsArray().forEach((e=>{e.query&&Object.keys(e.getDataSourceJson().dataViews||{}).some((t=>!this.getDataViewDataSource(e.id,t)))&&this.createDataViews(e)}))}))}delay(e){return new Promise((t=>{const n=setTimeout((()=>{clearTimeout(n),t()}),e)}))}areAllDataSourcesCreated(){var e,t;return!Object.keys(null!==(t=null===(e=this.getAppConfig())||void 0===e?void 0:e.dataSources)&&void 0!==t?t:{}).some((e=>{var t,n;const i=this.getDataSource(e);return(null==i?void 0:i.isDataSourceSet())?!i.areChildDataSourcesCreated():![o.e3.Created,o.e3.CreateError].includes(null===(n=null===(t=(0,r.Vp)().getState().dataSourcesInfo)||void 0===t?void 0:t[e])||void 0===n?void 0:n.instanceStatus)}))}getChildUseDataSourcesFromParentDss(e,t){const n=t.reduce(((e,t)=>t.isDataSourceSet()?e.concat(t.getChildDataSourceIds().map((e=>({dataSourceId:e,mainDataSourceId:e,rootDataSourceId:(t.getRootDataSource()||t).id})))):e),[]).filter((e=>!this.dataSourcesCreatePromise[e.dataSourceId]&&!this.childDataSourcesPendedByTime.some((t=>t.dataSourceId===e.dataSourceId))));return n.unshift(...this.childDataSourcesPendedByTime.splice(0)),n.length>e?this.childDataSourcesPendedByTime.push(...n.splice(e,n.length-e)):n.length<e&&n.push(...this.getRootUseDataSourcesFromConfig(e-n.length)),n}getRootUseDataSourcesFromConfig(e){const t=this.getAppConfig()&&this.getAppConfig().dataSources,n=[];return Object.keys(t).some((r=>(this.dataSourcesCreatePromise[r]||n.push({dataSourceId:t[r].id,mainDataSourceId:t[r].id}),n.length===e))),n}createDataSourcesAndTheirDataViewsByUseDataSources(e){return(null==e?void 0:e.length)?Promise.all(e.map((e=>this.createDataSourceAndItsDataViewsByUseDataSource(e,!0)))).then((e=>e.filter((e=>!!e)))):Promise.resolve([])}createDataViews(e){return Object.keys(e.getDataSourceJson().dataViews||{}).map((t=>this.createDataView(e,t)))}createDataSource(e,t,n,i){let s,a;if("string"==typeof e){let t=this.getAppConfig().dataSources[e];if(!t&&!i)throw Error("Can not create data source."+e);a=e,t=t||g({id:a}),s={dataSourceJson:t,dataSourceManager:this,id:a}}else if(e.dataSourceJson||e.belongToDataSource)s=e,a=s.dataSourceJson?s.dataSourceJson.id:s.belongToDataSource.getMainDataSource().id,s.dataViewId&&(t=s.dataViewId,delete s.dataViewId),s.localId&&(n=s.localId,delete s.localId),s.dataSourceManager=this,s.id=a;else{const t=e;a=t.id,s={dataSourceJson:t,dataSourceManager:this,id:a}}const u=e=>this.dataSourcesCreatePromise[e]?this.dataSourcesCreatePromise[e]:this.createDataSource(e),c=(e,t)=>{const n=this.getDataViewDataSourceId(e,t);return this.getDataSource(n)?Promise.resolve(this.getDataSource(n)):u(a).then((e=>this.createDataView(e,t)))};return t&&n?c(a,t).then((e=>this.createLocalDataSource(e,n))):t?c(a,t):n?u(a).then((e=>this.createLocalDataSource(e,n))):this.createOriginDataSources(s.dataSourceJson).catch((t=>(console.error("Create origin data source error.",e,t),(0,r.Vp)().dispatch((0,l.dataSourceInstanceStatusChanged)(a,o.e3.CreateError)),Promise.reject(new o.yR(a,t))))).then((()=>this.dataSourcesCreatePromise[a]?this.dataSourcesCreatePromise[a]:(this.dispatchNotCreatedStatus(a),this.dataSourcesCreatePromise[a]=new Promise(((e,t)=>{i?t(new o.yR(a,"Create error outside createDataSource method.")):e(this.createDataSourceObj(s))})).then((e=>e.ready().then((()=>e.fetchSchema())).then((t=>{var n,r,o;e.setFetchedSchema(t),0===Object.keys(e.getSchema()).length&&this.initSchema(e,t);const i=[];if(Object.keys((null===(n=e.getSchema())||void 0===n?void 0:n.fields)||{}).length){const t=this.createDataViewObj(e,d.SELECTION_DATA_VIEW_ID);i.push(t);if(!!(null===(o=null===(r=e.getDataSourceJson())||void 0===r?void 0:r.dataViews)||void 0===o?void 0:o[d.DATA_VIEW_ID_FOR_NO_SELECTION])){const t=this.createDataViewObj(e,d.DATA_VIEW_ID_FOR_NO_SELECTION);i.push(t)}}return i.reduce(((e,t)=>e.then((()=>t.ready().then((()=>{this.afterCreate(t)}))))),Promise.resolve()).then((()=>{if(this.afterCreate(e),e.getDataSourceJson().isOutputFromWidget){const t=this.createDataViewObj(e,d.OUTPUT_DATA_VIEW_ID);this.afterCreate(t)}return e}))})))).catch((t=>{const n=a&&(null==s?void 0:s.dataSourceJson),i=["not-authenticated","abort"],u=(null==t?void 0:t.isSignInError)||i.some((e=>{var n,r,o;return null===(o=null===(r=null===(n=null==t?void 0:t.name)||void 0===n?void 0:n.toLowerCase)||void 0===r?void 0:r.call(n))||void 0===o?void 0:o.includes(e)}))||i.some((e=>{var n,r,o;return null===(o=null===(r=null===(n=null==t?void 0:t.message)||void 0===n?void 0:n.toLowerCase)||void 0===r?void 0:r.call(n))||void 0===o?void 0:o.includes(e)}))||Object.keys(v.Ay.getInstance().getNoPermissionResourceInfoList()||{}).some((e=>{var t,n;return(null===(t=s.dataSourceJson.url)||void 0===t?void 0:t.includes(e))||(null===(n=s.dataSourceJson.portalUrl)||void 0===n?void 0:n.includes(e))||e.includes(s.dataSourceJson.itemId)}));if(n&&u){const e=this.getErrorDataSourceId(a),t=Object.assign(Object.assign({},s),{id:e,dataSourceJson:s.dataSourceJson.set("id",e).set("type",o.hg.Error)});this.dataSourcesCreatePromise[e]=this.createDataSourceObj(t).then((t=>(this.dataSources[e]=t,t)))}return console.warn("Create data source error.",e,t),(0,r.Vp)().dispatch((0,l.dataSourceInstanceStatusChanged)(a,o.e3.CreateError)),Promise.reject(new o.yR(a,t))})),this.dataSourcesCreatePromise[s.dataSourceJson.id])))}createDataSourceAndWaitForChildrenReady(e){return y(this,void 0,void 0,(function*(){const t=yield this.createDataSource(e);return(null==t?void 0:t.isDataSourceSet())&&(yield t.childDataSourcesReady()),t}))}createDataView(e,t){const n=this.getDataViewDataSourceId(e.id,t);if(this.getDataSource(n))return this.getDataSource(n);try{const n=this.createDataViewObj(e,t);return this.afterCreate(n),n}catch(n){return(0,r.Vp)().dispatch((0,l.dataSourceInstanceStatusChanged)(this.getDataViewDataSourceId(e.id,t),o.e3.CreateError)),null}}createLocalDataSource(e,t){const n=this.getLocalDataSourceId(e.id,t);return this.getDataSource(n)?this.getDataSource(n):this.createLocalDataSourceObj(e,t)}afterCreate(e){var t,n,r,o;this.dataSources[e.id]=e,this.dispatchCreatedStatus(e.id),e.isDataSourceSet()&&0===(null===(t=e.getChildIds())||void 0===t?void 0:t.length)&&e.setChildDataSourcesCreated(!0);const i=e.getMainDataSource().id;if(e.id!==i&&e.dataViewId!==d.SELECTION_DATA_VIEW_ID&&e.dataViewId!==d.DATA_VIEW_ID_FOR_NO_SELECTION&&(null===(n=e.getMainDataSource().getSelectedRecordIds())||void 0===n?void 0:n.length)>0){const t=null===(o=null===(r=e.getMainDataSource().getSelectOptionsFromInfo())||void 0===r?void 0:r.asMutable)||void 0===o?void 0:o.call(r,{deep:!0});e.updateSelectionInfo(Object.assign(Object.assign({},t),{ids:e.getMainDataSource().getSelectedRecordIds()}),e.getMainDataSource())}}dispatchNotCreatedStatus(e){this.doNotBatchStatusDataSourceIds.has(e)?(0,r.Vp)().dispatch((0,l.dataSourceInstanceStatusChanged)(e,o.e3.NotCreated)):(this.notCreatedDataSourceIds.add(e),this.throttleDispatchPendedNotCreatedStatus())}dispatchCreatedStatus(e){const t=this.getDefaultDataSourceStatus(e);if(this.doNotBatchStatusDataSourceIds.has(e)||t===o.e3.NotReady){const n=(0,r.Vp)().getState().dataSourcesInfo[e];(0,r.Vp)().dispatch((0,l.updateDataSourceInfo)(e,g(Object.assign(Object.assign({},null!=n?n:{}),{instanceStatus:o.e3.Created,status:t,countStatus:t}))))}else this.createdDataSourceIds.add(e),this.throttleDispatchPendedCreatedStatus()}dispatchPendedNotCreatedStatus(){if(this.notCreatedDataSourceIds.size){let e={};this.notCreatedDataSourceIds.forEach((t=>{var n;const i=null===(n=(0,r.Vp)().getState().dataSourcesInfo[t])||void 0===n?void 0:n.asMutable({deep:!0});(null==i?void 0:i.instanceStatus)||(e=Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},null!=i?i:{}),{instanceStatus:o.e3.NotCreated})}))})),Object.keys(e).length>0&&(0,r.Vp)().dispatch((0,l.batchUpdateDataSourceInfo)(g(e))),this.notCreatedDataSourceIds.clear()}}dispatchPendedCreatedStatus(){if(this.createdDataSourceIds.size){let e={};this.createdDataSourceIds.forEach((t=>{var n;const i=null===(n=(0,r.Vp)().getState().dataSourcesInfo[t])||void 0===n?void 0:n.asMutable({deep:!0}),s=o.e3.Unloaded;e=Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},null!=i?i:{}),{instanceStatus:o.e3.Created,status:(null==i?void 0:i.status)||s,countStatus:(null==i?void 0:i.countStatus)||s})})})),(0,r.Vp)().dispatch((0,l.batchUpdateDataSourceInfo)(g(e))),this.createdDataSourceIds.forEach((e=>{var t,n;return null===(n=null===(t=this.getDataSource(e).parentDataSource)||void 0===t?void 0:t.updateAreChildDataSourcesCreated)||void 0===n?void 0:n.call(t)})),this.createdDataSourceIds.clear()}}getDefaultDataSourceStatus(e){const t=this.getDataSource(e);if(!t)return;const n=t.belongToDataSource&&t.belongToDataSource.getStatus(),r=n&&n!==o.e3.NotReady;return t.getDataSourceJson().isOutputFromWidget&&!r?o.e3.NotReady:o.e3.Unloaded}getDataViewDataSourceId(e,t){return`${e}-${t}`}getLocalDataSourceId(e,t){return`${e}-${t}`}createDataSourceByUseDataSource(e,t,n){n||this.doNotBatchStatusDataSourceIds.add(e.dataSourceId);const r=this.getAppConfig().dataSources;return r[e.mainDataSourceId]?e.dataViewId?e.dataViewId===d.SELECTION_DATA_VIEW_ID||e.dataViewId===d.OUTPUT_DATA_VIEW_ID||r[e.mainDataSourceId].dataViews[e.dataViewId]?this.createDataSource(e.mainDataSourceId,e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new o.yR(e.dataSourceId,"Can not find data source."))):this.createDataSource(e.mainDataSourceId,null,t):r[e.rootDataSourceId]?this.createDataSource(e.rootDataSourceId).then((t=>t.isDataSourceSet()&&t.createDataSourceById(e.mainDataSourceId))).then((()=>{const n=this.getDataSource(e.mainDataSourceId);return n?e.dataViewId?e.dataViewId===d.SELECTION_DATA_VIEW_ID||n.getDataSourceJson().dataViews[e.dataViewId]?this.createDataSource(n.getDataSourceJson(),e.dataViewId,t):(console.error(`Can not find data view: ${e.mainDataSourceId}, ${e.dataViewId}`),Promise.reject(new o.yR(e.dataSourceId,"Can not find data source."))):t?this.createDataSource(n.getDataSourceJson(),null,t):n:Promise.reject(new o.yR(e.dataSourceId,"Can not find data source."))})):(console.error("Can not find data source:",e.dataSourceId),Promise.reject(new o.yR(e.dataSourceId,"Can not find data source.")))}createDataSourceAndItsDataViewsByUseDataSource(e,t){return this.createDataSourceByUseDataSource(e,null,t).then((e=>(this.createDataViews(e),e))).catch((e=>null))}createOriginDataSources(e){return e.isOutputFromWidget&&e.originDataSources&&e.originDataSources.length>0?Promise.all(e.originDataSources.asMutable().map((e=>this.createDataSourceByUseDataSource(e)))).then((()=>Promise.resolve())):Promise.resolve()}initSchema(e,t){e.setFetchedSchema(t);const n=e.getDataSourceJson().schema;if(e.getDataSourceJson().isOutputFromWidget)if(e.getDataSourceJson().schema)e.setSchema(e.getDataSourceJson().schema);else if(e.getDataSourceJson().originDataSources&&e.getDataSourceJson().originDataSources.length>0)if(1===e.getDataSourceJson().originDataSources.length){const t=this.getDataSource(e.getDataSourceJson().originDataSources[0].dataSourceId);e.setSchema(t&&t.getSchema())}else console.error("Data source created from more than one data source must save the schema in app config.");else console.error("Data source without origin data source must save the schema in app config.");else{if((0,r.Vp)().getState().appConfig.dataSources[e.id]&&(null==t?void 0:t.label)&&t.label!==e.getDataSourceJson().sourceLabel){const n=(0,r.Vp)().getState().appConfig.setIn(["dataSources",e.id,"sourceLabel"],t.label);(0,p.changeAppConfig)(n)}const o=this.mergeSchema(e,n,t);e.setSchema(o)}}mergeSchema(e,t,n){if(e.isDataSourceSet()){if(!t)return n;let r=t;const o=e.getReversedConfigSchema();return Object.keys(n.childSchemas).forEach((i=>{if(o.childSchemas[i])o.childSchemas[i].forEach((t=>{r=r.setIn(["childSchemas",t.jimuChildId],e.getChildDataSource(t.jimuChildId).getSchema())}));else{if(t.childSchemas[i])return void console.warn("Layer existed, please re-map the data source.",e.id,i);r=r.setIn(["childSchemas",i],n.childSchemas[i])}})),Object.keys(t.childSchemas).forEach((e=>{const r=t.childSchemas[e].childId;n.childSchemas[r]||console.error("Used data is not found.",r)})),r}return this.mergeOneSchema(e,t,n)}mergeOneSchema(e,t,n){if(!t)return n;let r=t;const o=e.getReversedConfigSchema();return(null==n?void 0:n.fields)&&Object.keys(n.fields).forEach((i=>{if(o.fields[i])o.fields[i].forEach((e=>{r.fields[e.jimuName].alias||(r=r.setIn(["fields",e.jimuName,"alias"],n.fields[i].alias))}));else{if(t.fields[i])return void console.warn("Field name existed, please re-map the data source.",e.id,i);const o=n.fields[i];r=r.setIn(["fields",i],o)}})),(null==t?void 0:t.fields)&&Object.keys(t.fields).forEach((e=>{const r=t.fields[e].name;(null==n?void 0:n.fields)&&!n.fields[r]&&console.error("Used field is not found.",r)})),r}getDataSourceFactory(e){try{let t=this.getDataSourceFactorySync(e);if(t)return Promise.resolve(t);const n=this.getDataSourceFactoryUri(e);return(0,a.loadModule)(n).then((e=>(t=new e.default,this.dataSourceFactories[n]=t,t)))}catch(e){return Promise.reject(e)}}getDataSourceFactoryUri(e){const t=i.A.getInstance().getExtensions(s.ExtensionPoints.DataSourceFactoryUri).filter((t=>t.getFactoryUri(e)))[0];if(!t)throw Error("Unknown data source type:"+e);return t.getFactoryUri(e)}getDataSourceFactorySync(e){const t=this.getDataSourceFactoryUri(e),n=this.dataSourceFactories[t];if(n)return n}createDataSourceObj(e){return this.getDataSourceFactory(e.dataSourceJson.type).then((t=>{let n;try{n=t.createDataSource(e)}catch(t){return console.error("Create data source error.",e.dataSourceJson,t),Promise.reject(new Error(t))}return Promise.resolve(n)}))}createDataViewObj(e,t){const n=this.getDataSourceFactoryUri(e.type),r=this.dataSourceFactories[n];if(!r)throw Error("Data source is not created");return r.createDataSource({id:this.getDataViewDataSourceId(e.id,t),dataViewId:t,belongToDataSource:e,dataSourceManager:this})}createLocalDataSourceObj(e,t){const n=this.getDataSourceFactoryUri(e.type),i=this.dataSourceFactories[n];if(!i)throw Error("Data source is not created");let s=null;try{s=i.createDataSource({id:this.getLocalDataSourceId(e.id,t),dataViewId:e.isDataView?e.dataViewId:null,localId:t,belongToDataSource:e,dataSourceManager:this}),this.afterCreate(s)}catch(n){console.error("Create local data source error.",e.id,t,n),(0,r.Vp)().dispatch((0,l.dataSourceInstanceStatusChanged)(this.getLocalDataSourceId(e.id,t),o.e3.CreateError))}return s}getAppConfig(){return(0,r.Vp)().getState().appConfig}onStoreDataSourcesChange(e,t){e&&t&&Object.keys(e).forEach((n=>{if(t[n]){if(t[n]&&e[n]){const e=t[n],r=this.getDataSource(n);r&&(r.type!==e.type?(0,c.A)((()=>{this.destroyDataSource(n),this.createDataSource(n).then((e=>{this.createDataViews(e)}))})):this.updateDataSourceByDataSourceJson(r,e))}}else(0,c.A)((()=>{this.destroyDataSource(n)}))})),window.jimuConfig.isInBuilder&&e&&t&&Object.keys(t).forEach((t=>{var n;const o=(0,r.Vp)().getState();e[t]||(null===(n=o.dataSourcesInfo[t])||void 0===n?void 0:n.instanceStatus)||this.createDataSource(t).then((e=>{this.createDataViews(e)}))}))}onStoreResourceSessionsChange(e,t){(0,c.A)((()=>y(this,void 0,void 0,(function*(){const n=[],r=[];this.getDataSourcesAsArray().forEach((i=>{var s;if(i.getMainDataSource().id!==i.id)return;const a=i.getDataSourceJson().url&&(null===(s=m.A.getInstance().getServerInfoByServiceUrl(i.getDataSourceJson().url))||void 0===s?void 0:s.owningSystemUrl),l=i.getDataSourceJson().url&&h.getServerRootUrl(i.getDataSourceJson().url),u=f.getStandardPortalUrl(a||l),c=i.getDataSourceJson().portalUrl&&f.getPlatformUrlByOrgUrl(i.getDataSourceJson().portalUrl),d=f.getStandardPortalUrl(c);if(!u&&!d)return;const p=u&&(null==e?void 0:e[u])!==(null==t?void 0:t[u]),v=d&&(null==e?void 0:e[d])!==(null==t?void 0:t[d]);if(p||v){p&&m.A.getInstance().clearServiceInfo(i.getDataSourceJson().url);const e=i.getRootDataSource();let t;if((null==e?void 0:e.type)===o.hg.WebMap||(null==e?void 0:e.type)===o.hg.WebScene)n.some((t=>t.id===e.id))||n.push(e),t=g({dataSourceId:e.id,mainDataSourceId:e.id});else{n.some((e=>e.id===i.id))||n.push(i);const r=i.type===o.hg.Error?this.restoreErrorDataSourceId(i.id):i.id;t=g({dataSourceId:r,mainDataSourceId:r,rootDataSourceId:null==e?void 0:e.id})}r.some((e=>e.dataSourceId===t.dataSourceId))||r.push(t)}})),yield Promise.all(n.map((e=>e.isDataSourceSet()?e.areSomeChildDataSourcesPending().then((t=>t&&n.splice(n.indexOf(e),1))):Promise.resolve()))),n.forEach((e=>{this.destroyDataSource(e.id)})),r.forEach((e=>{this.createDataSourceByUseDataSource(e).then((e=>e.isDataSourceSet()?e.childDataSourcesReady().then((()=>e)):e))}))}))))}getErrorDataSourceId(e){return`error${e.charAt(0).toUpperCase()}${e.slice(1)}`}restoreErrorDataSourceId(e){const t=e.replace(/^error/,"");return`${t.charAt(0).toLowerCase()}${t.slice(1)}`}updateDataSourceByDataSourceJson(e,t){var n,r;if(t&&!(0,p.isDeepEqual)(e.getDataSourceJson(),t)){if((0,p.isDeepEqual)(e.getDataSourceJson().query,null==t?void 0:t.query)||(0,c.A)((()=>{e.clearRecords(),e.clearSelection()})),e.getDataSourceJson().dataViews!==(null==t?void 0:t.dataViews)){const n=e.getDataSourceJson().dataViews,r=null==t?void 0:t.dataViews;n&&r&&Object.keys(n).forEach((o=>{if(r[o]){if(r[o]&&n[o]){const n=this.getDataViewDataSourceId(e.id,o),r=this.getDataSource(n);r&&((0,p.isDeepEqual)(r.getDataSourceJson().dataViews[o],t.dataViews[o])||(0,c.A)((()=>{r.clearRecords(),r.clearSelection()})))}}else(0,c.A)((()=>{this.destroyDataSource(this.getDataViewDataSourceId(e.id,o))}))}))}let o;if(e.isDataSourceSet()&&e.getDataSourceJson().childDataSourceJsons!==(null==t?void 0:t.childDataSourceJsons)&&e.getChildDataSources().forEach((e=>{var n;this.updateDataSourceByDataSourceJson(e,null===(n=null==t?void 0:t.childDataSourceJsons)||void 0===n?void 0:n[e.jimuChildId])})),(null===(n=e.getDataSourceJson().originDataSources)||void 0===n?void 0:n.length)===(null===(r=null==t?void 0:t.originDataSources)||void 0===r?void 0:r.length)){o=!e.getDataSourceJson().originDataSources||e.getDataSourceJson().originDataSources.every((e=>(null==t?void 0:t.originDataSources)&&(null==t?void 0:t.originDataSources.some((t=>t.dataSourceId===e.dataSourceId)))))}else o=!1;const i=t&&(e.getDataSourceJson().schema!==t.schema||!o||e.getDataSourceJson().itemId!==t.itemId||e.getDataSourceJson().portalUrl!==t.portalUrl||e.getDataSourceJson().url!==t.url);e.setDataSourceJson(t),i&&(e.getDataSourceJson().isDataInDataSourceInstance?(e.clearSourceRecordsNotAddVersion(),this.initSchema(e,null)):(e.clearRecordsNotAddVersion(),e.fetchSchema().then((t=>{this.initSchema(e,t),e.addVersion()})))),(0,c.A)((()=>{e.addVersion()}))}}}const I=S},9469:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});const r=function(){this.__data__=[],this.size=0};var o=n(6984);const i=function(e,t){for(var n=e.length;n--;)if((0,o.A)(e[n][0],t))return n;return-1};var s=Array.prototype.splice;const a=function(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():s.call(t,n,1),--this.size,!0)};const l=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]};const u=function(e){return i(this.__data__,e)>-1};const c=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r,d.prototype.delete=a,d.prototype.get=l,d.prototype.has=u,d.prototype.set=c;const p=d},9589:(e,t,n)=>{const r=n(9718),o=n(6874),i=n(3908),s=n(1123),a=n(144),l=n(6953),u=n(7414),c=n(3007),d=n(1832),p=n(2938),f=n(6254),h=n(4493),g=n(1729),m=n(560),v=n(9970),y=n(1763),S=n(909),I=n(3927),b=n(4277),w=n(5580),E=n(7059),A=n(4641),O=n(3999),C=n(4089),T=n(5200),x=n(2111),R=n(6170),P=n(3904),D=n(8311),_=n(7638),L=n(7631),M=n(9628),k=n(270),N=n(1261),j=n(3874),U=n(7075),F=n(5571),B=n(5342),$=n(6780),V=n(2525),G=n(5032);e.exports={parse:a,valid:l,clean:u,inc:c,diff:d,major:p,minor:f,patch:h,prerelease:g,compare:m,rcompare:v,compareLoose:y,compareBuild:S,sort:I,rsort:b,gt:w,lt:E,eq:A,neq:O,gte:C,lte:T,cmp:x,coerce:R,Comparator:P,Range:D,satisfies:_,toComparators:L,maxSatisfying:M,minSatisfying:k,minVersion:N,validRange:j,outside:U,gtr:F,ltr:B,intersects:$,simplifyRange:V,subset:G,SemVer:i,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:o.SEMVER_SPEC_VERSION,RELEASE_TYPES:o.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},9592:(e,t,n)=>{"use strict";n.d(t,{A:()=>Z});var r=n(2080);const o=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var i=n(2851),s=n(2031),a=n(7405);const l=function(e,t){return e&&(0,s.A)(t,(0,a.A)(t),e)};var u=n(9999);const c=function(e,t){return e&&(0,s.A)(t,(0,u.A)(t),e)};var d=n(154),p=n(9759),f=n(6489);const h=function(e,t){return(0,s.A)(e,(0,f.A)(e),t)};var g=n(6912),m=n(5647),v=n(3153);const y=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,g.A)(t,(0,f.A)(e)),e=(0,m.A)(e);return t}:v.A;const S=function(e,t){return(0,s.A)(e,y(e),t)};var I=n(9042),b=n(3831);const w=function(e){return(0,b.A)(e,u.A,y)};var E=n(2434),A=Object.prototype.hasOwnProperty;const O=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&A.call(e,"index")&&(n.index=e.index,n.input=e.input),n};var C=n(565);const T=function(e,t){var n=t?(0,C.A)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var x=/\w*$/;const R=function(e){var t=new e.constructor(e.source,x.exec(e));return t.lastIndex=e.lastIndex,t};var P=n(241),D=P.A?P.A.prototype:void 0,_=D?D.valueOf:void 0;const L=function(e){return _?Object(_.call(e)):{}};var M=n(1801);const k=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return(0,C.A)(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return T(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,M.A)(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return R(e);case"[object Symbol]":return L(e)}};var N=n(407),j=n(2049),U=n(1200),F=n(3098);const B=function(e){return(0,F.A)(e)&&"[object Map]"==(0,E.A)(e)};var $=n(2789),V=n(4841),G=V.A&&V.A.isMap;const W=G?(0,$.A)(G):B;var H=n(3149);const q=function(e){return(0,F.A)(e)&&"[object Set]"==(0,E.A)(e)};var z=V.A&&V.A.isSet;const K=z?(0,$.A)(z):q;var J="[object Arguments]",Y="[object Function]",Q="[object Object]",X={};X[J]=X["[object Array]"]=X["[object ArrayBuffer]"]=X["[object DataView]"]=X["[object Boolean]"]=X["[object Date]"]=X["[object Float32Array]"]=X["[object Float64Array]"]=X["[object Int8Array]"]=X["[object Int16Array]"]=X["[object Int32Array]"]=X["[object Map]"]=X["[object Number]"]=X[Q]=X["[object RegExp]"]=X["[object Set]"]=X["[object String]"]=X["[object Symbol]"]=X["[object Uint8Array]"]=X["[object Uint8ClampedArray]"]=X["[object Uint16Array]"]=X["[object Uint32Array]"]=!0,X["[object Error]"]=X[Y]=X["[object WeakMap]"]=!1;const Z=function e(t,n,s,f,g,m){var v,y=1&n,b=2&n,A=4&n;if(s&&(v=g?s(t,f,g,m):s(t)),void 0!==v)return v;if(!(0,H.A)(t))return t;var C=(0,j.A)(t);if(C){if(v=O(t),!y)return(0,p.A)(t,v)}else{var T=(0,E.A)(t),x=T==Y||"[object GeneratorFunction]"==T;if((0,U.A)(t))return(0,d.A)(t,y);if(T==Q||T==J||x&&!g){if(v=b||x?{}:(0,N.A)(t),!y)return b?S(t,c(v,t)):h(t,l(v,t))}else{if(!X[T])return g?t:{};v=k(t,T,y)}}m||(m=new r.A);var R=m.get(t);if(R)return R;m.set(t,v),K(t)?t.forEach((function(r){v.add(e(r,n,s,r,t,m))})):W(t)&&t.forEach((function(r,o){v.set(o,e(r,n,s,o,t,m))}));var P=A?b?w:I.A:b?u.A:a.A,D=C?void 0:P(t);return o(D||t,(function(r,o){D&&(r=t[o=r]),(0,i.A)(v,o,e(r,n,s,o,t,m))})),v}},9610:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(2383),o=n(3149);const i=function(e){if(!(0,o.A)(e))return!1;var t=(0,r.A)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},9628:(e,t,n)=>{const r=n(3908),o=n(8311);e.exports=(e,t,n)=>{let i=null,s=null,a=null;try{a=new o(t,n)}catch(e){return null}return e.forEach((e=>{a.test(e)&&(i&&-1!==s.compare(e)||(i=e,s=new r(i,n)))})),i}},9635:(e,t,n)=>{"use strict";n.d(t,{A_:()=>c,G:()=>h,Hv:()=>p,ZQ:()=>g,hs:()=>a,x_:()=>d});var r=n(5566);function o(e,t=!1){var n;const r={};e.color&&(r.color=e.color),e.bg&&(r.backgroundColor=e.bg);const o=e.border;var i;return(null==o?void 0:o.width)&&(r.borderWidth=o.width,r.borderStyle=null!==(n=o.type)&&void 0!==n?n:t?"dashed":"solid"),(null==o?void 0:o.color)&&(r.borderColor=o.color),e.borderRadius&&(r.borderRadius=e.borderRadius),e.shadow&&(r.boxShadow=e.shadow),e.bold?r.fontWeight="bold":e.fontWeight&&(r.fontWeight=e.fontWeight),(e.decoration||e.underline||e.strike)&&(r.textDecoration=e.decoration||((i=e)?i.underline&&i.strike?"underline line-through":i.underline?"underline":i.strike?"line-through":"none":"none")),r.fontStyle=e.italic?"italic":"normal",r}const i=(e,t)=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==e.paddingY&&{paddingTop:e.paddingY,paddingBottom:e.paddingY}),void 0!==e.paddingX&&{paddingLeft:e.paddingX,paddingRight:e.paddingX}),e.fontSize&&{fontSize:e.fontSize}),e.lineHeight&&{lineHeight:e.lineHeight}),e.borderRadius&&{borderRadius:e.borderRadius}),e.fontSize&&{fontSize:e.fontSize}),{"> .icon-btn-sizer":Object.assign({},"string"==typeof e.lineHeight&&{minWidth:e.lineHeight,minHeight:e.lineHeight})}),void 0!==e.paddingY&&{paddingTop:e.paddingY,paddingBottom:e.paddingY}),void 0!==e.paddingX&&{paddingLeft:e.paddingX,paddingRight:e.paddingX}),t&&{"&.icon-btn":{lineHeight:1,padding:"4px"}});function s(e,t=!1){if(!e)return{};const{default:n,hover:r,active:i,disabled:s}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n&&o(n,t)),r&&{'&:hover:not(.active), &[aria-expanded="true"]':Object.assign({},o(r,t))}),i&&{"&:not(:disabled):not(.disabled).active":Object.assign({},o(i,t)),"&:not(:disabled):not(.disabled)":{cursor:"pointer"}}),s&&{"&.disabled, &:disabled":Object.assign(Object.assign({},o(s,t)),{"&:hover":Object.assign({},o(s,t))})})}const a=(e,t)=>{var n;const{type:r,variant:o,color:i,asLink:a,dashed:l}=e,u=((e,t,n,r)=>{if(r||"link"===e)return"link";if(!e&&!t)return"default";if(t){if("contained"===t){if(!n||"default"===n)return"default";if("primary"===n)return"primary";if("danger"===n||"error"===n)return"danger"}else if("outlined"===t){if("primary"===n)return"secondary"}else if("text"===t&&(!n||"default"===n))return"tertiary"}else if(e)return e})(r,o,i,a),c=u?null===(n=t.variants)||void 0===n?void 0:n[u]:null;return c?s(c,l):null};function l(e,t){const n=e?t?"left":"right":"bottom";return Object.assign({},["top","bottom","left","right"].reduce(((e,t)=>(n!==t&&(e[`border${u(t)}Width`]="0 !important"),e)),{}))}function u(e){return e.charAt(0).toUpperCase()+e.slice(1)}const c=(e,t)=>{var n;const a=e.tabs,c=e.underline,d=e.pills,p=e.vertical,f=e.right,h=e.iconOnly,g=e.type||(c?"underline":a?"tabs":d?"pills":"default"),m=null===(n=null==t?void 0:t.variants)||void 0===n?void 0:n[g],v=[];return m&&((null==m?void 0:m.root)&&v.push(function(e,t){var n,r,i,s,a,l,u;const c=e.vertical,d=null===(n=e.showText)||void 0===n||n,p=e.textAlign,f=e.iconPosition,h=null!==(i=null!==(r=e.gap)&&void 0!==r?r:t.gutter)&&void 0!==i?i:0,g=null!==(s=null==t?void 0:t.size)&&void 0!==s?s:{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({".jimu-button.nav-link-caret-btn":{border:"none"}},o(t.root)),h&&(c?{".nav-item + .nav-item":{marginTop:h},".nav-item ul.dropdown-menu-inline":{marginTop:h}}:{".nav-item + .nav-item":{marginLeft:h}})),t.icon&&{".jimu-icon, .left-icon":{marginRight:d?null!==(a=null==t?void 0:t.icon.spacing)&&void 0!==a?a:".5rem":"unset"},".right-icon, .right-icon.jimu-icon":{marginLeft:d?null!==(l=null==t?void 0:t.icon.spacing)&&void 0!==l?l:".5rem":"unset",marginRight:d?"auto":"unset"}}),"above"===f&&t.icon&&{".jimu-icon":{marginLeft:"auto",marginRight:"auto",marginBottom:d?null!==(u=t.icon.spacing)&&void 0!==u?u:".5rem":"unset"}}),t.icon&&{".nav-link-caret-btn":{margin:`-.3125rem ${t.icon.spacing}`}}),c&&g&&{".nav-link.with-caret":{position:"relative",paddingRight:null==g?void 0:g.paddingX,".nav-link-caret-btn":Object.assign(Object.assign({position:"absolute"},"right"===p?{left:g.paddingX}:{right:g.paddingX}),{height:"20px",width:"20px",borderRadius:"0",top:"calc(50% - 10px)",bottom:"calc(50% - 10px)",padding:"0",margin:"0",display:"inline-flex",alignItems:"center",justifyContent:"center"})},".nav-link.padding-plus-20":Object.assign({},"right"===p?{paddingLeft:`calc(${g.paddingX} + 20px)`}:{paddingRight:`calc(${g.paddingX} + 20px)`})})}(e,m)),v.push(function(e,t,n,o,a){var c,d,p,f,h,g;const{root:m,item:v,size:y}=t;return Object.assign(Object.assign(Object.assign({".nav-item > .nav-link":Object.assign(Object.assign({},v&&s(v)),y&&i(y,a)),".nav-item > .nav-link.with-caret":{paddingRight:"0px"}},"pills"===e&&{"&.nav-pills":Object.assign({},l(n,o))}),"tabs"===e&&{"&.nav-tabs":Object.assign(Object.assign({},l(n,o)),{".nav-item":Object.assign(Object.assign(Object.assign({userSelect:"none"},!n&&{marginBottom:`-${null===(c=null==m?void 0:m.border)||void 0===c?void 0:c.width}`}),n&&{["margin"+(o?"Left":"Right")]:`-${null===(d=null==m?void 0:m.border)||void 0===d?void 0:d.width}`}),{".nav-link":Object.assign(Object.assign(Object.assign({},!n&&Object.assign(Object.assign({},(null==m?void 0:m.borderRadius)&&(0,r.Vq)("top",null==m?void 0:m.borderRadius)),{"&.active":{borderBottomColor:"transparent !important"}})),n&&Object.assign({},(null==m?void 0:m.borderRadius)&&(0,r.Vq)(o?"right":"left",null==m?void 0:m.borderRadius))),{"&.active, &.disabled":{cursor:"default"}})}),".dropdown-menu":Object.assign({marginTop:`-${null===(p=null==m?void 0:m.border)||void 0===p?void 0:p.width}`},(0,r.Vq)("top",0))})}),"underline"===e&&{"&.nav-underline":Object.assign(Object.assign(Object.assign({},l(n,o)),{".nav-item":Object.assign({},!n&&{marginBottom:`-${null===(f=null==m?void 0:m.border)||void 0===f?void 0:f.width}`}),".nav-link":Object.assign(Object.assign({},l(n,o)),{'&:not(:disabled):not(.disabled):active, &[aria-expanded="true"]':{borderBottomColor:"transparent"}})}),n&&{".nav-item":{["margin"+(o?"Left":"Right")]:"-1px"},".nav-link":{[`border${u(o?"left":"right")}Width`]:`${null===(g=null===(h=null==v?void 0:v.active)||void 0===h?void 0:h.border)||void 0===g?void 0:g.width} !important`}})})}(g,m,p,f,h))),v.length?v:null};const d=(e,t)=>{var n;const{type:r,variant:i}=e,a=i?"text"===i?"tertiary":"default":null!=r?r:"default",l=null===(n=null==t?void 0:t.variants)||void 0===n?void 0:n[a],u=[];return l&&((null==l?void 0:l.root)&&u.push(o(l.root)),(null==l?void 0:l.item)&&u.push(function(e){return{".jimu-btn.previous, .jimu-btn.next":s(e)}}(l.item))),u.length?u:null};const p=(e,t)=>{var n,r,o;const i=null!==(n=null==e?void 0:e.type)&&void 0!==n?n:"default",a=null===(o=null===(r=null==t?void 0:t.variants)||void 0===r?void 0:r[i])||void 0===o?void 0:o.button,l=[];return a&&l.push(function(e){return{".jimu-btn.page-link":s(e)}}(a)),l.length?l:null};function f(e,t){const{default:n,hover:r}=e;return Object.assign(Object.assign(Object.assign({visibility:t?"hidden":"visible"},o(n)),{boxSizing:"border-box",transition:"color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out"}),r&&{"&:hover":Object.assign({},o(r))})}const h=(e,t,n)=>{var i,s,a,l;const u=null!==(i=e.size)&&void 0!==i?i:"default",c=null!==(s=e.hideThumb)&&void 0!==s&&s,d=null===(a=null==t?void 0:t.sizes)||void 0===a?void 0:a[u],p=null===(l=null==t?void 0:t.variants)||void 0===l?void 0:l.default,h=[];return p&&((null==p?void 0:p.root)&&h.push(o(p.root)),h.push(function(e,t,n){const{track:r,thumb:i,progress:s}=e;return{'&[type="range"]':Object.assign(Object.assign(Object.assign(Object.assign({},i&&{"&::-webkit-slider-thumb":Object.assign({WebkitAppearance:"none"},f(i,t)),"&::-moz-range-thumb":Object.assign({MozAppearance:"none"},f(i,t))}),r&&{"&::-webkit-slider-runnable-track":Object.assign(Object.assign({},o(r)),(null==s?void 0:s.default)&&{background:`linear-gradient(to ${n?"left":"right"}, ${s.default.bg}, ${s.default.bg}) ${r.bg} no-repeat left`,backgroundSize:"50% 100%, 100% 100%"}),"&::-moz-range-track":Object.assign({},o(r))}),(null==s?void 0:s.default)&&{"&::-moz-range-progress":Object.assign({},o(s.default))}),(null==i?void 0:i.focus)&&{"&:focus":{"&::-webkit-slider-thumb":{boxShadow:i.focus.shadow},"&::-moz-range-thumb":{boxShadow:i.focus.shadow}}})}}(p,c,n))),d&&h.push(function(e){const{root:t,thumb:n}=e;return Object.assign(Object.assign({},t&&{"&::-webkit-slider-runnable-track":{height:t},"&::-moz-range-track":{height:t},"&::-moz-range-progress":{height:t}}),n&&{height:n,"&::-webkit-slider-thumb":{width:n,height:n,marginTop:`-${(0,r.Dy)(`(${n} - ${t}) * 0.5`)}`},"&::-moz-range-thumb":{width:n,height:n,marginTop:`-${(0,r.Dy)(`(${n} - ${t}) * 0.5`)}`}})}(d)),h.length?h:null},g=(e,t={})=>{const n=e.theme;return Object.assign(Object.assign(Object.assign(Object.assign({color:t.color||n.sys.color.surface.backgroundText,background:t.bg||n.sys.color.surface.background},t.border&&{border:`${t.border.color} solid ${t.border.width}`}),void 0!==t.paddingY&&{paddingTop:t.paddingY,paddingBottom:t.paddingY}),void 0!==t.paddingX&&{paddingLeft:t.paddingX,paddingRight:t.paddingX}),t.boxShadow&&{boxShadow:t.boxShadow})}},9718:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:o,MAX_LENGTH:i}=n(6874),s=n(7272),a=(t=e.exports={}).re=[],l=t.safeRe=[],u=t.src=[],c=t.safeSrc=[],d=t.t={};let p=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[f,o]],g=(e,t,n)=>{const r=(e=>{for(const[t,n]of h)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),o=p++;s(e,o,t),d[e]=o,u[o]=t,c[o]=r,a[o]=new RegExp(t,n?"g":void 0),l[o]=new RegExp(r,n?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),g("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${u[d.NUMERICIDENTIFIER]}|${u[d.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NUMERICIDENTIFIERLOOSE]}|${u[d.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${f}+`),g("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),g("FULL",`^${u[d.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),g("LOOSE",`^${u[d.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),g("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?`+`(?:${u[d.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",u[d.COERCE],!0),g("COERCERTLFULL",u[d.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},9744:(e,t,n)=>{"use strict";function r(e,t){return(...n)=>{const r="object"==typeof n[n.length-1]?Object.assign(Object.assign({},e),n.pop()):e;return t(...n,r)}}n.d(t,{t:()=>r})},9749:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)}},9759:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},9875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DATE_TIME_DEFAULT_ESRI_FORMAT:()=>h,DATE_TIME_DEFAULT_FORMAT:()=>g,ESRI_DATE_FORMAT_MAP:()=>f,TimeUnit:()=>o,VirtualDateType:()=>r,formatDate:()=>O,formatDateTime:()=>A,formatDateValue:()=>S,formatDateValueByEsriFormat:()=>v,formatTime:()=>C,formatTimeValueByEsriFormat:()=>y,getDateByStrictYMDFormat:()=>R,getDateOptions:()=>w,getDateTimeOptions:()=>b,getEsriDateFormat:()=>m,getIntlOptions:()=>I,getRealDateByVirtualDate:()=>P,getStrictYMDFormat:()=>x,getTimeOption:()=>E,isStrictYMDFormat:()=>T});var r,o,i=n(337),s=n(4352),a=n(7763),l=n(1580),u=n(4501),c=n(7058),d=n(228),p=n(4169);!function(e){e.Now="NOW",e.Min="MIN",e.Max="MAX",e.Today="TODAY",e.Tomorrow="TOMORROW",e.Yesterday="YESTERDAY",e.ThisWeek="THIS_WEEK",e.ThisMonth="THIS_MONTH",e.ThisQuarter="THIS_QUARTER",e.ThisYear="THIS_YEAR"}(r||(r={})),function(e){e.Minute="MINUTE",e.Hour="HOUR",e.Day="DAY",e.Week="WEEK",e.Month="MONTH",e.Year="YEAR"}(o||(o={}));const f={shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},h="shortDateLongTime24",g={date:"yyyy/MM/dd",time:"H:mm",dateTime:"yyyy/MM/dd H:mm"};function m(e){let t;return t=e&&"object"==typeof e?e:f[e],t||(console.warn(`Invalid data format ${e}`),null)}function v(e,t,n){const r=m(t);return r?S(e,n,null==r?void 0:r.datePattern,null==r?void 0:r.timePattern):n.formatDate(e,{dateStyle:"short",timeStyle:"short"})}function y(e,t,n){if(!e)return"";const r=e.split(":"),o=new Date(2e3,0,1,parseInt(r[0]),parseInt(r[1]),r[2]?parseInt(r[2]):0),i=m(t);return(null==i?void 0:i.timePattern)?C(o,i.timePattern,n):n.formatDate(o,{timeStyle:"medium"})}function S(e,t,n,r){if(!e)return"";if("number"==typeof e&&(e=new Date(e)),!n&&!r)return t.formatDate(e);return A(e,{datePattern:n,timePattern:r},t)}const I=e=>{const t=m(e);if(!t)return;const n=w(t.datePattern),r=w(t.timePattern);return Object.assign(Object.assign({},n),r)},b=e=>{const t=e.datePattern?w(e.datePattern):{},n=e.timePattern?E(e.timePattern):{};return Object.assign(Object.assign({},t),n)},w=e=>{const t={};if(e.includes("y")&&(t.year="numeric"),e.includes("MMMM")?t.month="long":e.includes("MMM")?t.month="short":e.includes("MM")?t.month="2-digit":e.includes("M")&&(t.month="numeric"),e.includes("d")&&(t.day="numeric"),e.includes("EEEE")&&(t.weekday="long"),0!==Object.keys(t).length)return t;console.warn(`Invalid date pattern ${e}`)},E=(e,t)=>{const n={};if(e.toLowerCase().includes("h")&&(n.hour="numeric"),e.includes("mm")&&(n.minute="2-digit"),e.includes("ss")&&(n.second="2-digit"),t&&e.includes("a")&&(n.hour12=!0),0!==Object.keys(n).length)return n;console.warn(`Not support time pattern ${e}`)};function A(e,t,n){if(!e)return null;const r=b(t);return n.formatDate(e,r)}function O(e,t,n){if(!e)return null;const r=w(t);return n.formatDate(e,r)}function C(e,t,n){if(!e)return null;const r=E(t,!1);return n.formatDate(e,r)}function T(e){return/^\d{4}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])$/.test(e)}function x(e){return"number"==typeof e&&(e=new Date(e)),`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}-${("0"+e.getDate()).slice(-2)}`}function R(e){const t=e.split("-");return new Date(parseInt(t[0]),parseInt(t[1])-1,parseInt(t[2]))}function P(e,t){let n=null;const o=new Date;o.setHours(0,0,0,0);const f=o.getTime(),h=864e5;switch(e){case r.Today:n=o;break;case r.Yesterday:n=new Date(f-h);break;case r.Tomorrow:n=new Date(f+h);break;case r.ThisWeek:n=[(0,i.k)(o,{locale:t.locale}),(0,s.$)(o,{locale:t.locale})];break;case r.ThisMonth:n=[(0,a.w)(o),(0,l.p)(o)];break;case r.ThisQuarter:n=[(0,u.a)(o),(0,c.j)(o)];break;case r.ThisYear:n=[(0,d.D)(o),(0,p.Q)(o)]}return n}},9883:(e,t,n)=>{"use strict";function r(e){console&&console.warn&&console.warn.apply(console,[e])}n.d(t,{R:()=>r})},9970:(e,t,n)=>{const r=n(560);e.exports=(e,t,n)=>r(t,e,n)},9999:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(2505),o=n(3149),i=n(7271);const s=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var a=Object.prototype.hasOwnProperty;const l=function(e){if(!(0,o.A)(e))return s(e);var t=(0,i.A)(e),n=[];for(var r in e)("constructor"!=r||!t&&a.call(e,r))&&n.push(r);return n};var u=n(8446);const c=function(e){return(0,u.A)(e)?(0,r.A)(e,!0):l(e)}}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);s.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,s.d(o,i),o},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{"use strict";s.r(a),s.d(a,{APP_FRAME_NAME_IN_BUILDER:()=>Os.mX,AbstractDataAction:()=>vu,AbstractMessageAction:()=>Xl.wJ,AdvancedExpressionPartType:()=>Es,AjaxState:()=>Os.kd,AllDataSourceTypes:()=>Ts.at,AnimationComponent:()=>yS,AnimationContext:()=>By,AnimationDirection:()=>Ny,AnimationEffectType:()=>ky,AnimationPlayMode:()=>jy,AnimationStartMode:()=>Uy,AnimationTriggerType:()=>Ly,AnimationType:()=>My,AppDialog:()=>qS,AppKeyboardComponent:()=>gf,AppMode:()=>Os.$0,AppRoot:()=>Xf,AppStateManager:()=>fu.A,AppType:()=>Ff,AppVersionManager:()=>tu,ArcGISDependencyDefineExtension:()=>OI,ArcadeContentAllKeys:()=>la,ArcadeContentCapability:()=>ra,ArcadeContentResolverComponent:()=>Ah,ArcadeContentStyleKeys:()=>aa,ArcadeContentValueKeys:()=>sa,ArcadeProfileContextProvider:()=>vh,ArcadeProfileType:()=>ua,BaseVersionManager:()=>eu,BaseWidget:()=>iu,BrowserSizeMode:()=>Os.rH,ButtonClickMessage:()=>Xl.kc,CONSTANTS:()=>oa,CacheProvider:()=>Hm,ClauseCascade:()=>el.Kh,ClauseDisplayType:()=>el.gQ,ClauseLabelDisplay:()=>el.ee,ClauseLogic:()=>el.Mg,ClauseOperator:()=>el.a0,ClauseSourceType:()=>el.Zc,ClauseType:()=>el.KI,ConfigManager:()=>du,ContainerType:()=>Ql.Kk,DEFAULT_ANIMATION_PROPS:()=>Vy,DEFAULT_HOVER_PROPS:()=>eS,DataActionManager:()=>ef.A,DataLevel:()=>mu,DataRecordSetChangeMessage:()=>Xl.Dk,DataRecordsSelectionChangeMessage:()=>Xl.w5,DataSourceComponent:()=>nh,DataSourceError:()=>Ts.yR,DataSourceFilterChangeMessage:()=>Xl.HX,DataSourceManager:()=>Cs.A,DataSourceSelectionMode:()=>Ts.Xz,DataSourceSelectionTypes:()=>Zm.h5,DataSourceStatus:()=>Ts.e3,DataSourceTypes:()=>Ts.hg,DataSourcesChangeMessage:()=>Xl.q0,DataSourcesChangeType:()=>Xl.V6,DialogInteractionType:()=>Ql.lB,DialogMode:()=>Ql.oM,DummyDataAction:()=>yu,DummyMessageAction:()=>Xl.I9,DynamicIconPosition:()=>Ja,DynamicStyleConditionOperator:()=>za,DynamicStyleConditionSourceType:()=>Ka,DynamicStyleCustomExpressionSourceType:()=>qa,DynamicStyleCustomStatisticsMethod:()=>Wa,DynamicStyleReferenceValueSourceType:()=>Ha,DynamicStyleResolverComponent:()=>Vh,DynamicStyleSourceType:()=>Qa,DynamicStyleType:()=>Ya,EConsentMode:()=>Ql.pg,ECookieBannerLayout:()=>Ql.gS,EMPTY_OPTION_VALUE:()=>el.ol,ESRI_DATE_FORMAT_ARRAY:()=>Os.Bz,ESRI_OBJECTID_TYPE:()=>Rs,EXPRESSION_LOAD_PREFIX:()=>Ps,ErrorBoundary:()=>Yf,EsriFieldType:()=>Os.oX,ExBAddedJSAPIProperties:()=>Os.yC,ExportCSV:()=>Du,ExportFormat:()=>Ql.AV,ExportGeoJSON:()=>Vu,ExportJson:()=>Ou,ExpressionFunctions:()=>ms,ExpressionPartType:()=>gs,ExpressionResolverComponent:()=>xh,ExpressionResolverErrorCode:()=>Oh,ExtensionManager:()=>lu.A,ExtentChangeMessage:()=>Xl.QX,ExternalResolvablePromise:()=>cI.G,FixedPosition:()=>Ql.M_,FocusVisibility:()=>qp,FormattedDate:()=>Pl,FormattedMessage:()=>kl,FormattedNumber:()=>_l,FormattedPlural:()=>jl,FormattedRelativeTime:()=>Hl,FormattedTime:()=>Dl,Global:()=>qm,GridItemType:()=>Ql.Qw,GuideLevels:()=>rf,GuideManager:()=>af,GuideTypes:()=>Zp,HashParamsType:()=>Zm.bA,HoverType:()=>Zy,INTERACTIVE_CLASS:()=>$p,IdManager:()=>nf.A,ImageDisplayQualityMode:()=>nv,ImageDisplayQualityValue:()=>rv,Immutable:()=>y,IntersectionContext:()=>$y,IntlProvider:()=>zl.A,JSAPILayerTypes:()=>Ts.iy,JimuCoreDataSourceFactoryUriExtension:()=>iy,JimuFieldType:()=>Os.Eo,JimuMapViewStatus:()=>Uf,KEYBOARD_NAV_CLASS:()=>Bp,Keyboard:()=>hf,LayoutItemType:()=>ia.K,LayoutParentType:()=>Ql.$4,LayoutType:()=>ia.p,LinkType:()=>Os.J,LoadingHandler:()=>hy,LocationChangeMessage:()=>Xl.R,MessageActionConnectionType:()=>ql,MessageCarryData:()=>Xl.vQ,MessageManager:()=>au.A,MessageType:()=>Xl.Go,MultipleDataSourceComponent:()=>oh,MutableStoreManager:()=>Rd.A,OneByOneAnimation:()=>IS,OpenTypes:()=>Os.qZ,OrderRule:()=>el.zd,PageMode:()=>Ql.bH,PagePart:()=>Os.xH,PageType:()=>Ql.g6,ParentAnimationMode:()=>Fy,QueryScope:()=>Ts.pQ,RawIntlProvider:()=>Ol.Kq,React:()=>f,ReactDOM:()=>h,ReactDOMClient:()=>m,ReactRedux:()=>v,ReactResizeDetector:()=>L,RecordSetChangeType:()=>Xl.It,RepeatedDataSourceProvider:()=>Yl.R1,ResolveExpressionErrorCode:()=>Ds,ResourceType:()=>Os.vt,ScreenTransitionType:()=>Ql.al,ScreenTriggerType:()=>Ql.Lm,SelectDataRecordMessage:()=>Xl.jq,ServiceManager:()=>tf.A,SessionChangedReasonType:()=>$i.t4,SessionManager:()=>$i.Ay,SetFilter:()=>Kp,SignInErrorCode:()=>$i.Ag,SqlExpressionMode:()=>el.Yu,SqlQuerySortOrder:()=>Ts.Vh,StatisticType:()=>As,StringSelectionChangeMessage:()=>Xl.zd,SupportedItemTypes:()=>Ts.Rf,SupportedJSAPILayerTypes:()=>Ts.QB,SupportedLayerServiceTypes:()=>Ts.Oh,SupportedLayerTypesInWebMapSpec:()=>Ts.fY,SupportedServerTypes:()=>Ts.nS,SupportedUtilityType:()=>Ql.JX,ThemeCommonColorKeys:()=>Jm,ThemeContext:()=>Bm,ThemeFontVariantKeys:()=>Km,ThemeProvider:()=>$m,ThemeThemeAlertColorKeys:()=>Ym,ThemeThemeColorKeys:()=>Xm,ThemeThemeMainColorKeys:()=>Qm,TimezoneConfig:()=>Ql.gv,TrackingManager:()=>Vf,TransitionContainer:()=>lI,TransitionDirection:()=>zS,TransitionType:()=>KS,USER_SETTING_FILE_KEY:()=>ev,UrlGeneralConfig:()=>Zm.Wy,UrlInfoPartType:()=>tv,UrlManager:()=>gu,UrlProtocol:()=>Os.cy,UtilityManager:()=>pu.A,ViewChangeMessage:()=>Xl.r2,WidgetManager:()=>su.A,WidgetState:()=>Os.YG,WidgetType:()=>Os.xO,WidgetVersionManager:()=>ru,_ExpressionResolverComponent:()=>Th,appActions:()=>Ci,appConfigUtils:()=>Li,arcadeContentUtils:()=>i,cancelablePromise:()=>d,clamp:()=>sI,classNames:()=>b(),createAppStore:()=>Bi.pq,createEmotionCache:()=>zm,createIntl:()=>Kl.E,createIntlCache:()=>Jl.MT,createSelector:()=>kI,css:()=>xd,dataSourceUtils:()=>ls,dateUtils:()=>xs,defaultMessages:()=>Gi.A,dynamicStyleUtils:()=>c,esri:()=>FI,expressionUtils:()=>l,extensionSpec:()=>Ss,focusElementInKeyboardMode:()=>Hp,geometryUtils:()=>ys,getAnimationEffect:()=>Xy,getAppStore:()=>Bi.Vp,getHoverEffect:()=>pS,getHoverStyle:()=>fS,getIndexFromProgress:()=>iI,getMessageTypeLabel:()=>Xl.oj,getNextAnimationId:()=>Qy,getTransition:()=>aI,groupExpressionPartsByFunction:()=>Ys,hooks:()=>p,i18n:()=>Vi,indexedDBUtils:()=>Za,init:()=>uy,injectIntl:()=>Ol.Ay,invariant:()=>T,isDirectionalTransition:()=>uI,isIntegerProgress:()=>oI,isKeyboardMode:()=>Wp,jimuHistory:()=>bs,jsx:()=>Cd,keyMap:()=>Ni,keyboardUtils:()=>n,loadArcGISJSAPIModule:()=>bu.p,loadArcGISJSAPIModules:()=>bu.e,loadDependencies:()=>gy.c,loadDependency:()=>gy.W,lodash:()=>UI,messageActionUtils:()=>u,moduleLoader:()=>Is,observeStore:()=>Bi.Yz,polished:()=>BI,portalUrlUtils:()=>Pi,portalUtils:()=>_i,privilegeUtils:()=>r,proxyUtils:()=>vs,queryString:()=>O.A,requestUtils:()=>ws,resolveExpression:()=>na,saveAs:()=>Yr.saveAs,semver:()=>E,serviceUrlUtils:()=>Di,sharedThemeUtils:()=>us,spring:()=>e,styled:()=>Wm,translatedLocales:()=>ay,urlManagerUtils:()=>Ri,urlUtils:()=>xi,useIntersection:()=>gS,useIntl:()=>Cl,useTheme:()=>Vm,utilityUtils:()=>o,utils:()=>Ti,uuidv1:()=>w.A,version:()=>jI,withRepeatedDataSource:()=>Yl.sY,withTheme:()=>Gm,xss:()=>A});var e={};s.r(e),s.d(e,{Any:()=>sn,BailSignal:()=>kn,Controller:()=>rr,FrameValue:()=>Fn,Globals:()=>Z,Interpolation:()=>Rr,Spring:()=>Cr,SpringContext:()=>dr,SpringRef:()=>fr,SpringValue:()=>qn,Trail:()=>Tr,Transition:()=>xr,a:()=>Jr,animated:()=>Jr,config:()=>wn,createInterpolator:()=>Ve,easings:()=>Je,inferTo:()=>gn,interpolate:()=>Mr,to:()=>Lr,update:()=>kr,useChain:()=>bn,useInView:()=>Or,useIsomorphicLayoutEffect:()=>Nt,useReducedMotion:()=>Vt,useResize:()=>Er,useScroll:()=>wr,useSpring:()=>gr,useSpringRef:()=>vr,useSpringValue:()=>yr,useSprings:()=>hr,useTrail:()=>Sr,useTransition:()=>Ir});var t={};s.r(t),s.d(t,{addAttachment:()=>eo,addFeatures:()=>Zr,addToServiceDefinition:()=>to,applyEdits:()=>no,createFeatureService:()=>ro,decodeValues:()=>io,deleteAttachments:()=>lo,deleteFeatures:()=>ao,getAllLayersAndTables:()=>fo,getAttachments:()=>ho,getFeature:()=>yo,getLayer:()=>oo,getService:()=>go,getServiceAdminInfo:()=>mo,getViewSources:()=>vo,parseServiceUrl:()=>po,queryFeatures:()=>So,queryRelated:()=>Io,updateAttachment:()=>wo,updateFeatures:()=>bo,updateServiceDefinition:()=>Eo});var n={};s.r(n),s.d(n,{triggerEvent:()=>ji});var r={};s.r(r),s.d(r,{CheckTarget:()=>Ui,InvalidInfo:()=>Fi,canCreateItem:()=>ts,canPublishFeatures:()=>ns,checkAccess:()=>qi,checkExbAccess:()=>Ki,getAccessCapabilities:()=>zi,getPortalVersion:()=>Ji,isItemInTheUpdatedGroup:()=>as,isPortal1061OrBefore:()=>Yi,isPortal1080OrBefore:()=>Qi,shouldCheckAppAccess:()=>os});var o={};s.r(o),s.d(o,{addNewUtilityByUrl:()=>cs,checkIsUrlExist:()=>ds,getUtilityIdbyServiceUrl:()=>ps});var i={};s.r(i),s.d(i,{canAddNewDataSourcesProfileArcadeContent:()=>pa,doesWidgetHaveRepeatDataSource:()=>da,getCopiedArcadeContentConfig:()=>ga,getCopiedArcadeContentScript:()=>ma,getWidgetRestAvailableArcadeContentCount:()=>fa,validateArcadeScriptResult:()=>va});var l={};s.r(l),s.d(l,{arcadeConfigToExpression:()=>Ga,generateFieldsForUseDataSourcesByExpressionParts:()=>Ta,getArcadeConfig:()=>Va,getDataSourceIdsFromExpression:()=>Ua,getPercentileParams:()=>Fa,getSingleStringExpressionText:()=>ka,getUseDataSourcesByExpressionParts:()=>xa,getUseDataSourcesWithoutFields:()=>Na,getWhetherExpressionValid:()=>Pa,getWhetherFieldInDs:()=>_a,isSingleArcadeExpression:()=>La,isSingleStringExpression:()=>Ma,mapExpression:()=>$a,mergeUseDataSources:()=>Ra,replaceDataSourceId:()=>Ba,whetherHasFieldsInUseDataSources:()=>ja});var u={};s.r(u),s.d(u,{formatValue:()=>tl,getSqlExpressionWidthMessageFieldValues:()=>nl});var c={};s.r(c),s.d(c,{generateFieldsForUseDataSourcesByDynamicStyle:()=>vl,getCopiedDynamicStyleConfig:()=>Il,getExpressionReturnType:()=>al,getSupportedConditionSourceTypesByRefValueExpressionAndOperator:()=>pl,isArcadeExpression:()=>il,isAttributeExpression:()=>rl,isCommonExpression:()=>sl,isStatisticsExpression:()=>ol,updateDynamicStyleWhenUseDataSourcesChange:()=>yl,validateConditionInfo:()=>fl,validateConditionValueOptions:()=>hl});var d={};s.r(d),s.d(d,{CancelablePromise:()=>Fd,cancelable:()=>$d,default:()=>Bd,isCancelablePromise:()=>Vd});var p={};s.r(p),s.d(p,{useArcgisArcadeEditor:()=>Np,useCancelablePromiseMaker:()=>Cp,useCheckSmallBrowserSizeMode:()=>Op,useControlled:()=>wp,useDebounceCallback:()=>Pp,useEffectOnce:()=>Sp,useEffectWithPreviousValues:()=>xp,useEventCallback:()=>bp,useFirstMountState:()=>vp,useForkRef:()=>gp,useForwardRef:()=>mp,useLatest:()=>hp,useLoadArcGISJSAPI:()=>kp,useLoadArcGISJSAPIModule:()=>Mp,useLoadedModule:()=>_p,useLoadedModuleComponent:()=>Lp,usePrevious:()=>Tp,useTranslation:()=>fp,useUnmount:()=>Ip,useUpdateEffect:()=>yp,useWidgetActived:()=>Ap,useWidgetSelected:()=>Ep});var f=s(8972),h=s(2581),g=s(5338),m=s.t(g,2),v=s(1468),y=s(7390),S=s.n(y),I=s(6942),b=s.n(I),w=s(6028),E=s(9589),A=s(4005),O=s(8798),C=s(5566),T=s(7927),x=s(8221),R=s(7350);function P({skipOnMount:e=!1,refreshMode:t,refreshRate:n=1e3,refreshOptions:r,handleWidth:o=!0,handleHeight:i=!0,targetRef:s,observerOptions:a,onResize:l}={}){const u=(0,f.useRef)(e),c=(e=>{const t=f.useRef(e);return f.useEffect((()=>{t.current=e})),f.useMemo((()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)}),[])})(l),[d,p]=(0,f.useState)({width:void 0,height:void 0}),{refProxy:h,refElement:g}=(e=>{const[t,n]=f.useState((null==e?void 0:e.current)||null);e&&setTimeout((()=>{e.current!==t&&n(e.current)}),0);const r=f.useMemo((()=>new Proxy((e=>{e!==t&&n(e)}),{get:(e,n)=>"current"===n?t:e[n],set:(e,t,r)=>("current"===t?n(r):e[t]=r,!0)})),[t]);return{refProxy:r,refElement:t,setRefElement:n}})(s),{box:m}=a||{},v=(0,f.useCallback)((e=>{if(!o&&!i)return;if(u.current)return void(u.current=!1);e.forEach((e=>{const t=((e,t)=>"border-box"===t?{width:e.borderBoxSize[0].inlineSize,height:e.borderBoxSize[0].blockSize}:"content-box"===t?{width:e.contentBoxSize[0].inlineSize,height:e.contentBoxSize[0].blockSize}:{width:e.contentRect.width,height:e.contentRect.height})(e,m);p((n=>((e,t)=>o&&e.width!==t.width||i&&e.height!==t.height)(n,t)?(null==c||c({width:t.width,height:t.height,entry:e}),t):n))}))}),[o,i,u,m]),y=(0,f.useCallback)(((e,t,n,r)=>{switch(t){case"debounce":return x(e,n,r);case"throttle":return R(e,n,r);default:return e}})(v,t,n,r),[v,t,n,r]);return(0,f.useEffect)((()=>{let e;return g?(e=new window.ResizeObserver(y),e.observe(g,a)):(d.width||d.height)&&(null==c||c({width:null,height:null,entry:null}),p({width:void 0,height:void 0})),()=>{var t,n,r;null===(t=null==e?void 0:e.disconnect)||void 0===t||t.call(e),null===(r=(n=y).cancel)||void 0===r||r.call(n)}}),[y,g]),Object.assign({ref:h},d)}const{useState:D,useEffect:_}=f,L=function(e){const{onResize:t,targetRef:n,refreshMode:r,refreshRate:o,handleWidth:i,handleHeight:s}=e,[a,l]=D({});return _((()=>{a&&Object.keys(a).length&&t(a)}),[a]),P({onResize:e=>{l(e)},targetRef:n,refreshMode:r,refreshRate:o,handleWidth:i,handleHeight:s}),null};var M=Y(),k=e=>q(e,M),N=Y();k.write=e=>q(e,N);var j=Y();k.onStart=e=>q(e,j);var U=Y();k.onFrame=e=>q(e,U);var F=Y();k.onFinish=e=>q(e,F);var B=[];k.setTimeout=(e,t)=>{const n=k.now()+t,r=()=>{const e=B.findIndex((e=>e.cancel==r));~e&&B.splice(e,1),W-=~e?1:0},o={time:n,handler:e,cancel:r};return B.splice($(n),0,o),W+=1,z(),o};var $=e=>~(~B.findIndex((t=>t.time>e))||~B.length);k.cancel=e=>{j.delete(e),U.delete(e),F.delete(e),M.delete(e),N.delete(e)},k.sync=e=>{H=!0,k.batchedUpdates(e),H=!1},k.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,k.onStart(n)}return r.handler=e,r.cancel=()=>{j.delete(n),t=null},r};var V="undefined"!=typeof window?window.requestAnimationFrame:()=>{};k.use=e=>V=e,k.now="undefined"!=typeof performance?()=>performance.now():Date.now,k.batchedUpdates=e=>e(),k.catch=console.error,k.frameLoop="always",k.advance=()=>{"demand"!==k.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):J()};var G=-1,W=0,H=!1;function q(e,t){H?(t.delete(e),e(0)):(t.add(e),z())}function z(){G<0&&(G=0,"demand"!==k.frameLoop&&V(K))}function K(){~G&&(V(K),k.batchedUpdates(J))}function J(){const e=G;G=k.now();const t=$(G);t&&(Q(B.splice(0,t),(e=>e.handler())),W-=t),W?(j.flush(),M.flush(e?Math.min(64,G-e):16.667),U.flush(),N.flush(),F.flush()):G=-1}function Y(){let e=new Set,t=e;return{add(n){W+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(W-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,W-=t.size,Q(t,(t=>t(n)&&e.add(t))),W+=e.size,t=e)}}}function Q(e,t){e.forEach((e=>{try{t(e)}catch(e){k.catch(e)}}))}var X=Object.defineProperty,Z={};function ee(){}((e,t)=>{for(var n in t)X(e,n,{get:t[n],enumerable:!0})})(Z,{assign:()=>he,colors:()=>de,createStringInterpolator:()=>ae,skipAnimation:()=>pe,to:()=>le,willAdvance:()=>fe});var te={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function ne(e,t){if(te.arr(e)){if(!te.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var re=(e,t)=>e.forEach(t);function oe(e,t,n){if(te.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var ie=e=>te.und(e)?[]:te.arr(e)?e:[e];function se(e,t){if(e.size){const n=Array.from(e);e.clear(),re(n,t)}}var ae,le,ue=(e,...t)=>se(e,(e=>e(...t))),ce=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),de=null,pe=!1,fe=ee,he=e=>{e.to&&(le=e.to),e.now&&(k.now=e.now),void 0!==e.colors&&(de=e.colors),null!=e.skipAnimation&&(pe=e.skipAnimation),e.createStringInterpolator&&(ae=e.createStringInterpolator),e.requestAnimationFrame&&k.use(e.requestAnimationFrame),e.batchedUpdates&&(k.batchedUpdates=e.batchedUpdates),e.willAdvance&&(fe=e.willAdvance),e.frameLoop&&(k.frameLoop=e.frameLoop)},ge=new Set,me=[],ve=[],ye=0,Se={get idle(){return!ge.size&&!me.length},start(e){ye>e.priority?(ge.add(e),k.onStart(Ie)):(be(e),k(Ee))},advance:Ee,sort(e){if(ye)k.onFrame((()=>Se.sort(e)));else{const t=me.indexOf(e);~t&&(me.splice(t,1),we(e))}},clear(){me=[],ge.clear()}};function Ie(){ge.forEach(be),ge.clear(),k(Ee)}function be(e){me.includes(e)||we(e)}function we(e){me.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(me,(t=>t.priority>e.priority)),0,e)}function Ee(e){const t=ve;for(let n=0;n<me.length;n++){const r=me[n];ye=r.priority,r.idle||(fe(r),r.advance(e),r.idle||t.push(r))}return ye=0,(ve=me).length=0,(me=t).length>0}var Ae="[-+]?\\d*\\.?\\d+",Oe=Ae+"%";function Ce(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Te=new RegExp("rgb"+Ce(Ae,Ae,Ae)),xe=new RegExp("rgba"+Ce(Ae,Ae,Ae,Ae)),Re=new RegExp("hsl"+Ce(Ae,Oe,Oe)),Pe=new RegExp("hsla"+Ce(Ae,Oe,Oe,Ae)),De=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,_e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Le=/^#([0-9a-fA-F]{6})$/,Me=/^#([0-9a-fA-F]{8})$/;function ke(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ne(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=ke(o,r,e+1/3),s=ke(o,r,e),a=ke(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*s)<<16|Math.round(255*a)<<8}function je(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Ue(e){return(parseFloat(e)%360+360)%360/360}function Fe(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Be(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function $e(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Le.exec(e))?parseInt(t[1]+"ff",16)>>>0:de&&void 0!==de[e]?de[e]:(t=Te.exec(e))?(je(t[1])<<24|je(t[2])<<16|je(t[3])<<8|255)>>>0:(t=xe.exec(e))?(je(t[1])<<24|je(t[2])<<16|je(t[3])<<8|Fe(t[4]))>>>0:(t=De.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Me.exec(e))?parseInt(t[1],16)>>>0:(t=_e.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Re.exec(e))?(255|Ne(Ue(t[1]),Be(t[2]),Be(t[3])))>>>0:(t=Pe.exec(e))?(Ne(Ue(t[1]),Be(t[2]),Be(t[3]))|Fe(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;return`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`}var Ve=(e,t,n)=>{if(te.fun(e))return e;if(te.arr(e))return Ve({range:e,output:t,extrapolate:n});if(te.str(e.output[0]))return ae(e);const r=e,o=r.output,i=r.range||[0,1],s=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,s,a,l){let u=l?l(e):e;if(u<t){if("identity"===s)return u;"clamp"===s&&(u=t)}if(u>n){if("identity"===a)return u;"clamp"===a&&(u=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?u=-u:n===1/0?u-=t:u=(u-t)/(n-t);u=i(u),r===-1/0?u=-u:o===1/0?u+=r:u=u*(o-r)+r;return u}(e,i[t],i[t+1],o[t],o[t+1],l,s,a,r.map)}};var Ge=1.70158,We=1.525*Ge,He=Ge+1,qe=2*Math.PI/3,ze=2*Math.PI/4.5,Ke=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},Je={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>He*e*e*e-Ge*e*e,easeOutBack:e=>1+He*Math.pow(e-1,3)+Ge*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-We)/2:(Math.pow(2*e-2,2)*((We+1)*(2*e-2)+We)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*qe),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*qe)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*ze)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*ze)/2+1,easeInBounce:e=>1-Ke(1-e),easeOutBounce:Ke,easeInOutBounce:e=>e<.5?(1-Ke(1-2*e))/2:(1+Ke(2*e-1))/2,steps:(e,t="end")=>n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e,o="end"===t?Math.floor(r):Math.ceil(r);return i=0,s=1,a=o/e,Math.min(Math.max(a,i),s);var i,s,a}},Ye=Symbol.for("FluidValue.get"),Qe=Symbol.for("FluidValue.observers"),Xe=e=>Boolean(e&&e[Ye]),Ze=e=>e&&e[Ye]?e[Ye]():e,et=e=>e[Qe]||null;function tt(e,t){const n=e[Qe];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var nt=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");rt(this,e)}},rt=(e,t)=>at(e,Ye,t);function ot(e,t){if(e[Ye]){let n=e[Qe];n||at(e,Qe,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function it(e,t){const n=e[Qe];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Qe]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var st,at=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),lt=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ut=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ct=new RegExp(`(${lt.source})(%|[a-z]+)`,"i"),dt=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,pt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,ft=e=>{const[t,n]=ht(e);if(!t||ce())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&pt.test(n)?ft(n):n||e},ht=e=>{const t=pt.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},gt=(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,mt=e=>{st||(st=de?new RegExp(`(${Object.keys(de).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>Ze(e).replace(pt,ft).replace(ut,$e).replace(st,$e))),n=t.map((e=>e.match(lt).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>Ve({...e,output:t})));return e=>{const n=!ct.test(t[0])&&t.find((e=>ct.test(e)))?.replace(lt,"");let o=0;return t[0].replace(lt,(()=>`${r[o++](e)}${n||""}`)).replace(dt,gt)}},vt="react-spring: ",yt=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${vt}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},St=yt(console.warn);function It(){St(`${vt}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var bt,wt=yt(console.warn);function Et(e){return te.str(e)&&("#"==e[0]||/\d/.test(e)||!ce()&&pt.test(e)||e in(de||{}))}var At=new WeakMap,Ot=e=>e.forEach((({target:e,contentRect:t})=>At.get(e)?.forEach((e=>e(t)))));var Ct,Tt=new Set,xt=e=>(Tt.add(e),Ct||(Ct=(()=>{const e=()=>{Tt.forEach((e=>e({width:window.innerWidth,height:window.innerHeight})))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})()),()=>{Tt.delete(e),!Tt.size&&Ct&&(Ct(),Ct=void 0)}),Rt=(e,{container:t=document.documentElement}={})=>t===document.documentElement?xt(e):function(e,t){bt||"undefined"!=typeof ResizeObserver&&(bt=new ResizeObserver(Ot));let n=At.get(t);return n||(n=new Set,At.set(t,n)),n.add(e),bt&&bt.observe(t),()=>{const n=At.get(t);n&&(n.delete(e),!n.size&&bt&&bt.unobserve(t))}}(e,t),Pt={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},Dt=class{constructor(e,t){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=e=>{const t=this.info[e],{length:n,position:r}=Pt[e];var o,i,s;t.current=this.container[`scroll${r}`],t.scrollLength=this.container[`scroll${n}`]-this.container[`client${n}`],t.progress=(o=0,i=t.scrollLength,s=t.current,i-o==0?1:(s-o)/(i-o))},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=t,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},_t=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,kt=e=>e===document.documentElement?window:e;var Nt=ce()?f.useEffect:f.useLayoutEffect,jt=()=>{const e=(0,f.useRef)(!1);return Nt((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function Ut(){const e=(0,f.useState)()[1],t=jt();return()=>{t.current&&e(Math.random())}}var Ft=e=>(0,f.useEffect)(e,Bt),Bt=[];function $t(e){const t=(0,f.useRef)();return(0,f.useEffect)((()=>{t.current=e})),t.current}var Vt=()=>{const[e,t]=(0,f.useState)(null);return Nt((()=>{const e=window.matchMedia("(prefers-reduced-motion)"),n=e=>{t(e.matches),he({skipAnimation:e.matches})};return n(e),e.addEventListener?e.addEventListener("change",n):e.addListener(n),()=>{e.removeEventListener?e.removeEventListener("change",n):e.removeListener(n)}}),[]),e},Gt=Symbol.for("Animated:node"),Wt=e=>e&&e[Gt],Ht=(e,t)=>{return n=e,r=Gt,o=t,Object.defineProperty(n,r,{value:o,writable:!0,configurable:!0});var n,r,o},qt=e=>e&&e[Gt]&&e[Gt].getPayload(),zt=class{constructor(){Ht(this,this)}getPayload(){return this.payload||[]}},Kt=class extends zt{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,te.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new Kt(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return te.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,te.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Jt=class extends Kt{constructor(e){super(0),this._string=null,this._toString=Ve({output:[e,e]})}static create(e){return new Jt(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(te.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Ve({output:[this.getValue(),e]})),this._value=0,super.reset()}},Yt={dependencies:null},Qt=class extends zt{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return oe(this.source,((n,r)=>{var o;(o=n)&&o[Gt]===o?t[r]=n.getValue(e):Xe(n)?t[r]=Ze(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&re(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return oe(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Yt.dependencies&&Xe(e)&&Yt.dependencies.add(e);const t=qt(e);t&&re(t,(e=>this.add(e)))}},Xt=class extends Qt{constructor(e){super(e)}static create(e){return new Xt(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(Zt)),!0)}};function Zt(e){return(Et(e)?Jt:Kt).create(e)}function en(e){const t=Wt(e);return t?t.constructor:te.arr(e)?Xt:Et(e)?Jt:Kt}var tn=(e,t)=>{const n=!te.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,f.forwardRef)(((r,o)=>{const i=(0,f.useRef)(null),s=n&&(0,f.useCallback)((e=>{i.current=function(e,t){e&&(te.fun(e)?e(t):e.current=t);return t}(o,e)}),[o]),[a,l]=function(e,t){const n=new Set;Yt.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new Qt(e),Yt.dependencies=null,[e,n]}(r,t),u=Ut(),c=()=>{const e=i.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,a.getValue(!0)))&&u()},d=new nn(c,l),p=(0,f.useRef)();Nt((()=>(p.current=d,re(l,(e=>ot(e,d))),()=>{p.current&&(re(p.current.deps,(e=>it(e,p.current))),k.cancel(p.current.update))}))),(0,f.useEffect)(c,[]),Ft((()=>()=>{const e=p.current;re(e.deps,(t=>it(t,e)))}));const h=t.getComponentProps(a.getValue());return f.createElement(e,{...h,ref:s})}))},nn=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&k.write(this.update)}};var rn=Symbol.for("AnimatedComponent"),on=e=>te.str(e)?e:e&&te.str(e.displayName)?e.displayName:te.fun(e)&&e.name||null,sn=class{};function an(e,...t){return te.fun(e)?e(...t):e}var ln=(e,t)=>!0===e||!!(t&&e&&(te.fun(e)?e(t):ie(e).includes(t))),un=(e,t)=>te.obj(e)?t&&e[t]:e,cn=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,dn=e=>e,pn=(e,t=dn)=>{let n=fn;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const o of n){const n=t(e[o],o);te.und(n)||(r[o]=n)}return r},fn=["config","onProps","onStart","onChange","onPause","onResume","onRest"],hn={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function gn(e){const t=function(e){const t={};let n=0;if(oe(e,((e,r)=>{hn[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return oe(e,((e,r)=>r in t||(n[r]=e))),n}return{...e}}function mn(e){return e=Ze(e),te.arr(e)?e.map(mn):Et(e)?Z.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function vn(e){for(const t in e)return!0;return!1}function yn(e){return te.fun(e)||te.arr(e)&&te.obj(e[0])}function Sn(e,t){e.ref?.delete(e),t?.delete(e)}function In(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}function bn(e,t,n=1e3){Nt((()=>{if(t){let r=0;re(e,((e,o)=>{const i=e.current;if(i.length){let s=n*t[o];isNaN(s)?s=r:r=s,re(i,(e=>{re(e.queue,(e=>{const t=e.delay;e.delay=e=>s+an(t||0,e)}))})),e.start()}}))}else{let t=Promise.resolve();re(e,(e=>{const n=e.current;if(n.length){const r=n.map((e=>{const t=e.queue;return e.queue=[],t}));t=t.then((()=>(re(n,((e,t)=>re(r[t]||[],(t=>e.queue.push(t))))),Promise.all(e.start()))))}}))}}))}var wn={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},En={...wn.default,mass:1,damping:1,easing:Je.linear,clamp:!1},An=class{constructor(){this.velocity=0,Object.assign(this,En)}};function On(e,t){if(te.und(t.decay)){const n=!te.und(t.tension)||!te.und(t.friction);!n&&te.und(t.frequency)&&te.und(t.damping)&&te.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var Cn=[],Tn=class{constructor(){this.changed=!1,this.values=Cn,this.toValues=null,this.fromValues=Cn,this.config=new An,this.immediate=!1}};function xn(e,{key:t,props:n,defaultProps:r,state:o,actions:i}){return new Promise(((s,a)=>{let l,u,c=ln(n.cancel??r?.cancel,t);if(c)f();else{te.und(n.pause)||(o.paused=ln(n.pause,t));let e=r?.pause;!0!==e&&(e=o.paused||ln(e,t)),l=an(n.delay||0,t),e?(o.resumeQueue.add(p),i.pause()):(i.resume(),p())}function d(){o.resumeQueue.add(p),o.timeouts.delete(u),u.cancel(),l=u.time-k.now()}function p(){l>0&&!Z.skipAnimation?(o.delayed=!0,u=k.setTimeout(f,l),o.pauseQueue.add(d),o.timeouts.add(u)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(d),o.timeouts.delete(u),e<=(o.cancelId||0)&&(c=!0);try{i.start({...n,callId:e,cancel:c},s)}catch(e){a(e)}}}))}var Rn=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?_n(e.get()):t.every((e=>e.noop))?Pn(e.get()):Dn(e.get(),t.every((e=>e.finished))),Pn=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Dn=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),_n=e=>({value:e,cancelled:!0,finished:!1});function Ln(e,t,n,r){const{callId:o,parentId:i,onRest:s}=t,{asyncTo:a,promise:l}=n;return i||e!==a||t.reset?n.promise=(async()=>{n.asyncId=o,n.asyncTo=e;const u=pn(t,((e,t)=>"onRest"===t?void 0:e));let c,d;const p=new Promise(((e,t)=>(c=e,d=t))),f=e=>{const t=o<=(n.cancelId||0)&&_n(r)||o!==n.asyncId&&Dn(r,!1);if(t)throw e.result=t,d(e),e},h=(e,t)=>{const i=new kn,s=new Nn;return(async()=>{if(Z.skipAnimation)throw Mn(n),s.result=Dn(r,!1),d(s),s;f(i);const a=te.obj(e)?{...e}:{...t,to:e};a.parentId=o,oe(u,((e,t)=>{te.und(a[t])&&(a[t]=e)}));const l=await r.start(a);return f(i),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let g;if(Z.skipAnimation)return Mn(n),Dn(r,!1);try{let t;t=te.arr(e)?(async e=>{for(const t of e)await h(t)})(e):Promise.resolve(e(h,r.stop.bind(r))),await Promise.all([t.then(c),p]),g=Dn(r.get(),!0,!1)}catch(e){if(e instanceof kn)g=e.result;else{if(!(e instanceof Nn))throw e;g=e.result}}finally{o==n.asyncId&&(n.asyncId=i,n.asyncTo=i?a:void 0,n.promise=i?l:void 0)}return te.fun(s)&&k.batchedUpdates((()=>{s(g,r,r.item)})),g})():l}function Mn(e,t){se(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var kn=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Nn=class extends Error{constructor(){super("SkipAnimationSignal")}},jn=e=>e instanceof Fn,Un=1,Fn=class extends nt{constructor(){super(...arguments),this.id=Un++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Wt(this);return e&&e.getValue()}to(...e){return Z.to(this,e)}interpolate(...e){return It(),Z.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){tt(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Se.sort(this),tt(this,{type:"priority",parent:this,priority:e})}},Bn=Symbol.for("SpringPhase"),$n=e=>(1&e[Bn])>0,Vn=e=>(2&e[Bn])>0,Gn=e=>(4&e[Bn])>0,Wn=(e,t)=>t?e[Bn]|=3:e[Bn]&=-3,Hn=(e,t)=>t?e[Bn]|=4:e[Bn]&=-5,qn=class extends Fn{constructor(e,t){if(super(),this.animation=new Tn,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!te.und(e)||!te.und(t)){const n=te.obj(e)?{...e}:{...t,from:e};te.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Vn(this)||this._state.asyncTo)||Gn(this)}get goal(){return Ze(this.animation.to)}get velocity(){const e=Wt(this);return e instanceof Kt?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return $n(this)}get isAnimating(){return Vn(this)}get isPaused(){return Gn(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:o}=r;const{config:i}=r,s=qt(r.to);!s&&Xe(r.to)&&(o=ie(Ze(r.to))),r.values.forEach(((a,l)=>{if(a.done)return;const u=a.constructor==Jt?1:s?s[l].lastPosition:o[l];let c=r.immediate,d=u;if(!c){if(d=a.lastPosition,i.tension<=0)return void(a.done=!0);let t=a.elapsedTime+=e;const n=r.fromValues[l],o=null!=a.v0?a.v0:a.v0=te.arr(i.velocity)?i.velocity[l]:i.velocity;let s;const p=i.precision||(n==u?.005:Math.min(1,.001*Math.abs(u-n)));if(te.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*t);d=n+o/(1-e)*(1-r),c=Math.abs(a.lastPosition-d)<=p,s=o*r}else{s=null==a.lastVelocity?o:a.lastVelocity;const t=i.restVelocity||p/10,r=i.clamp?0:i.bounce,l=!te.und(r),f=n==u?a.v0>0:n<u;let h,g=!1;const m=1,v=Math.ceil(e/m);for(let e=0;e<v&&(h=Math.abs(s)>t,h||(c=Math.abs(u-d)<=p,!c));++e){l&&(g=d==u||d>u==f,g&&(s=-s*r,d=u));s+=(1e-6*-i.tension*(d-u)+.001*-i.friction*s)/i.mass*m,d+=s*m}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,a.durationProgress>0&&(a.elapsedTime=i.duration*a.durationProgress,t=a.elapsedTime+=e)),r=(i.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,a.durationProgress=r),d=n+i.easing(r)*(u-n),s=(d-a.lastPosition)/e,c=1==r}a.lastVelocity=s,Number.isNaN(d)&&(console.warn("Got NaN while animating:",this),c=!0)}s&&!s[l].done&&(c=!1),c?a.done=!0:t=!1,a.setValue(d,i.round)&&(n=!0)}));const a=Wt(this),l=a.getValue();if(t){const e=Ze(r.to);l===e&&!n||i.decay?n&&i.decay&&this._onChange(l):(a.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return k.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Vn(this)){const{to:e,config:t}=this.animation;k.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return te.und(e)?(n=this.queue||[],this.queue=[]):n=[te.obj(e)?e:{...t,to:e}],Promise.all(n.map((e=>this._update(e)))).then((e=>Rn(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Mn(this._state,e&&this._lastCallId),k.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=te.obj(n)?n[t]:n,(null==n||yn(n))&&(n=void 0),r=te.obj(r)?r[t]:r,null==r&&(r=void 0);const o={to:n,from:r};return $n(this)||(e.reverse&&([n,r]=[r,n]),r=Ze(r),te.und(r)?Wt(this)||this._set(n):this._set(r)),o}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,pn(e,((e,t)=>/^on/.test(t)?un(e,n):e))),Zn(this,e,"onProps"),er(this,"onProps",e,this);const o=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return xn(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{Gn(this)||(Hn(this,!0),ue(i.pauseQueue),er(this,"onPause",Dn(this,zn(this,this.animation.to)),this))},resume:()=>{Gn(this)&&(Hn(this,!1),Vn(this)&&this._resume(),ue(i.resumeQueue),er(this,"onResume",Dn(this,zn(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((n=>{if(e.loop&&n.finished&&(!t||!n.noop)){const t=Kn(e);if(t)return this._update(t,!0)}return n}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(_n(this));const r=!te.und(e.to),o=!te.und(e.from);if(r||o){if(!(t.callId>this._lastToId))return n(_n(this));this._lastToId=t.callId}const{key:i,defaultProps:s,animation:a}=this,{to:l,from:u}=a;let{to:c=l,from:d=u}=e;!o||r||t.default&&!te.und(c)||(c=d),t.reverse&&([c,d]=[d,c]);const p=!ne(d,u);p&&(a.from=d),d=Ze(d);const f=!ne(c,l);f&&this._focus(c);const h=yn(t.to),{config:g}=a,{decay:m,velocity:v}=g;(r||o)&&(g.velocity=0),t.config&&!h&&function(e,t,n){n&&(On(n={...n},t),t={...n,...t}),On(e,t),Object.assign(e,t);for(const t in En)null==e[t]&&(e[t]=En[t]);let{frequency:r,damping:o}=e;const{mass:i}=e;te.und(r)||(r<.01&&(r=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*o*i/r)}(g,an(t.config,i),t.config!==s.config?an(s.config,i):void 0);let y=Wt(this);if(!y||te.und(c))return n(Dn(this,!0));const S=te.und(t.reset)?o&&!t.default:!te.und(d)&&ln(t.reset,i),I=S?d:this.get(),b=mn(c),w=te.num(b)||te.arr(b)||Et(b),E=!h&&(!w||ln(s.immediate||t.immediate,i));if(f){const e=en(c);if(e!==y.constructor){if(!E)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(b)}}const A=y.constructor;let O=Xe(c),C=!1;if(!O){const e=S||!$n(this)&&p;(f||e)&&(C=ne(mn(I),b),O=!C),(ne(a.immediate,E)||E)&&ne(g.decay,m)&&ne(g.velocity,v)||(O=!0)}if(C&&Vn(this)&&(a.changed&&!S?O=!0:O||this._stop(l)),!h&&((O||Xe(l))&&(a.values=y.getPayload(),a.toValues=Xe(c)?null:A==Jt?[1]:ie(b)),a.immediate!=E&&(a.immediate=E,E||S||this._set(l)),O)){const{onRest:e}=a;re(Xn,(e=>Zn(this,t,e)));const r=Dn(this,zn(this,l));ue(this._pendingCalls,r),this._pendingCalls.add(n),a.changed&&k.batchedUpdates((()=>{a.changed=!S,e?.(r,this),S?an(s.onRest,r):a.onStart?.(r,this)}))}S&&this._set(I),h?n(Ln(t.to,t,this._state,this)):O?this._start():Vn(this)&&!f?this._pendingCalls.add(n):n(Pn(I))}_focus(e){const t=this.animation;e!==t.to&&(et(this)&&this._detach(),t.to=e,et(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Xe(t)&&(ot(t,this),jn(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Xe(e)&&it(e,this)}_set(e,t=!0){const n=Ze(e);if(!te.und(n)){const e=Wt(this);if(!e||!ne(n,e.getValue())){const r=en(n);e&&e.constructor==r?e.setValue(n):Ht(this,r.create(n)),e&&k.batchedUpdates((()=>{this._onChange(n,t)}))}}return Wt(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,er(this,"onStart",Dn(this,zn(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),an(this.animation.onChange,e,this)),an(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Wt(this).reset(Ze(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),Vn(this)||(Wn(this,!0),Gn(this)||this._resume())}_resume(){Z.skipAnimation?this.finish():Se.start(this)}_stop(e,t){if(Vn(this)){Wn(this,!1);const n=this.animation;re(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),tt(this,{type:"idle",parent:this});const r=t?_n(this.get()):Dn(this.get(),zn(this,e??n.to));ue(this._pendingCalls,r),n.changed&&(n.changed=!1,er(this,"onRest",r,this))}}};function zn(e,t){const n=mn(t);return ne(mn(e.get()),n)}function Kn(e,t=e.loop,n=e.to){const r=an(t);if(r){const o=!0!==r&&gn(r),i=(o||e).reverse,s=!o||o.reset;return Jn({...e,loop:t,default:!1,pause:void 0,to:!i||yn(n)?n:void 0,from:s?e.from:void 0,reset:s,...o})}}function Jn(e){const{to:t,from:n}=e=gn(e),r=new Set;return te.obj(t)&&Qn(t,r),te.obj(n)&&Qn(n,r),e.keys=r.size?Array.from(r):null,e}function Yn(e){const t=Jn(e);return te.und(t.default)&&(t.default=pn(t)),t}function Qn(e,t){oe(e,((e,n)=>null!=e&&t.add(n)))}var Xn=["onStart","onRest","onChange","onPause","onResume"];function Zn(e,t,n){e.animation[n]=t[n]!==cn(t,n)?un(t[n],e.key):void 0}function er(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var tr=["onStart","onChange","onRest"],nr=1,rr=class{constructor(e,t){this.id=nr++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];te.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Jn(e)),this}start(e){let{queue:t}=this;return e?t=ie(e).map(Jn):this.queue=[],this._flush?this._flush(this,t):(cr(this,t),or(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;re(ie(t),(t=>n[t].stop(!!e)))}else Mn(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(te.und(e))this.start({pause:!0});else{const t=this.springs;re(ie(e),(e=>t[e].pause()))}return this}resume(e){if(te.und(e))this.start({pause:!1});else{const t=this.springs;re(ie(e),(e=>t[e].resume()))}return this}each(e){oe(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,o=this._changed.size>0;(r&&!this._started||o&&!this._started)&&(this._started=!0,se(e,(([e,t])=>{t.value=this.get(),e(t,this,this._item)})));const i=!r&&this._started,s=o||i&&n.size?this.get():null;o&&t.size&&se(t,(([e,t])=>{t.value=s,e(t,this,this._item)})),i&&(this._started=!1,se(n,(([e,t])=>{t.value=s,e(t,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}k.onFrame(this._onFrame)}};function or(e,t){return Promise.all(t.map((t=>ir(e,t)))).then((t=>Rn(e,t)))}async function ir(e,t,n){const{keys:r,to:o,from:i,loop:s,onRest:a,onResolve:l}=t,u=te.obj(t.default)&&t.default;s&&(t.loop=!1),!1===o&&(t.to=null),!1===i&&(t.from=null);const c=te.arr(o)||te.fun(o)?o:void 0;c?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):re(tr,(n=>{const r=t[n];if(te.fun(r)){const o=e._events[n];t[n]=({finished:e,cancelled:t})=>{const n=o.get(r);n?(e||(n.finished=!1),t&&(n.cancelled=!0)):o.set(r,{value:null,finished:e||!1,cancelled:t||!1})},u&&(u[n]=t[n])}}));const d=e._state;t.pause===!d.paused?(d.paused=t.pause,ue(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),f=!0===t.cancel||!0===cn(t,"cancel");(c||f&&d.asyncId)&&p.push(xn(++e._lastAsyncId,{props:t,state:d,actions:{pause:ee,resume:ee,start(t,n){f?(Mn(d,e._lastAsyncId),n(_n(e))):(t.onRest=a,n(Ln(c,t,d,e)))}}})),d.paused&&await new Promise((e=>{d.resumeQueue.add(e)}));const h=Rn(e,await Promise.all(p));if(s&&h.finished&&(!n||!h.noop)){const n=Kn(t,s,o);if(n)return cr(e,[n]),ir(e,n,!0)}return l&&k.batchedUpdates((()=>l(h,e,e.item))),h}function sr(e,t){const n={...e.springs};return t&&re(ie(t),(e=>{te.und(e.keys)&&(e=Jn(e)),te.obj(e.to)||(e={...e,to:void 0}),ur(n,e,(e=>lr(e)))})),ar(e,n),n}function ar(e,t){oe(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,ot(t,e))}))}function lr(e,t){const n=new qn;return n.key=e,t&&ot(n,t),n}function ur(e,t,n){t.keys&&re(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function cr(e,t){re(t,(t=>{ur(e.springs,t,(t=>lr(t,e)))}))}var dr=({children:e,...t})=>{const n=(0,f.useContext)(pr),r=t.pause||!!n.pause,o=t.immediate||!!n.immediate;t=function(e,t){const[n]=(0,f.useState)((()=>({inputs:t,result:e()}))),r=(0,f.useRef)(),o=r.current;let i=o;if(i){const n=Boolean(t&&i.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,i.inputs));n||(i={inputs:t,result:e()})}else i=n;return(0,f.useEffect)((()=>{r.current=i,o==n&&(n.inputs=n.result=void 0)}),[i]),i.result}((()=>({pause:r,immediate:o})),[r,o]);const{Provider:i}=pr;return f.createElement(i,{value:t},e)},pr=function(e,t){return Object.assign(e,f.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(dr,{});dr.Provider=pr.Provider,dr.Consumer=pr.Consumer;var fr=()=>{const e=[],t=function(t){wt(`${vt}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const r=[];return re(e,((e,o)=>{if(te.und(t))r.push(e.start());else{const i=n(t,e,o);i&&r.push(e.start(i))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return re(e,(e=>e.pause(...arguments))),this},t.resume=function(){return re(e,(e=>e.resume(...arguments))),this},t.set=function(t){re(e,((e,n)=>{const r=te.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){const n=[];return re(e,((e,r)=>{if(te.und(t))n.push(e.start());else{const o=this._getProps(t,e,r);o&&n.push(e.start(o))}})),n},t.stop=function(){return re(e,(e=>e.stop(...arguments))),this},t.update=function(t){return re(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return te.fun(e)?e(n,t):e};return t._getProps=n,t};function hr(e,t,n){const r=te.fun(t)&&t;r&&!n&&(n=[]);const o=(0,f.useMemo)((()=>r||3==arguments.length?fr():void 0),[]),i=(0,f.useRef)(0),s=Ut(),a=(0,f.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=sr(e,t);return i.current>0&&!a.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?or(e,t):new Promise((r=>{ar(e,n),a.queue.push((()=>{r(or(e,t))})),s()}))}})),[]),l=(0,f.useRef)([...a.ctrls]),u=[],c=$t(e)||0;function d(e,n){for(let o=e;o<n;o++){const e=l.current[o]||(l.current[o]=new rr(null,a.flush)),n=r?r(o,e):t[o];n&&(u[o]=Yn(n))}}(0,f.useMemo)((()=>{re(l.current.slice(e,c),(e=>{Sn(e,o),e.stop(!0)})),l.current.length=e,d(c,e)}),[e]),(0,f.useMemo)((()=>{d(0,Math.min(c,e))}),n);const p=l.current.map(((e,t)=>sr(e,u[t]))),h=(0,f.useContext)(dr),g=$t(h),m=h!==g&&vn(h);Nt((()=>{i.current++,a.ctrls=l.current;const{queue:e}=a;e.length&&(a.queue=[],re(e,(e=>e()))),re(l.current,((e,t)=>{o?.add(e),m&&e.start({default:h});const n=u[t];n&&(In(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Ft((()=>()=>{re(a.ctrls,(e=>e.stop(!0)))}));const v=p.map((e=>({...e})));return o?[v,o]:v}function gr(e,t){const n=te.fun(e),[[r],o]=hr(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,o]:r}var mr=()=>fr(),vr=()=>(0,f.useState)(mr)[0],yr=(e,t)=>{const n=function(e){const t=(0,f.useRef)(null);return null===t.current&&(t.current=e()),t.current}((()=>new qn(e,t)));return Ft((()=>()=>{n.stop()})),n};function Sr(e,t,n){const r=te.fun(t)&&t;r&&!n&&(n=[]);let o,i=!0;const s=hr(e,((e,n)=>{const s=r?r(e,n):t;return o=s.ref,i=i&&s.reverse,s}),n||[{}]);if(Nt((()=>{re(s[1].current,((e,t)=>{const n=s[1].current[t+(i?1:-1)];In(e,o),e.ref?n&&e.update({to:n.springs}):n?e.start({to:n.springs}):e.start()}))}),n),r||3==arguments.length){const e=o??s[1];return e._getProps=(t,n,r)=>{const o=te.fun(t)?t(r,n):t;if(o){const t=e.current[r+(o.reverse?1:-1)];return t&&(o.to=t.springs),o}},s}return s[0]}function Ir(e,t,n){const r=te.fun(t)&&t,{reset:o,sort:i,trail:s=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:u,ref:c,config:d}=r?r():t,p=(0,f.useMemo)((()=>r||3==arguments.length?fr():void 0),[]),h=ie(e),g=[],m=(0,f.useRef)(null),v=o?null:m.current;Nt((()=>{m.current=g})),Ft((()=>(re(g,(e=>{p?.add(e.ctrl),e.ctrl.ref=p})),()=>{re(m.current,(e=>{e.expired&&clearTimeout(e.expirationId),Sn(e.ctrl,p),e.ctrl.stop(!0)}))})));const y=function(e,{key:t,keys:n=t},r){if(null===n){const t=new Set;return e.map((e=>{const n=r&&r.find((n=>n.item===e&&"leave"!==n.phase&&!t.has(n)));return n?(t.add(n),n.key):br++}))}return te.und(n)?e:te.fun(n)?e.map(n):ie(n)}(h,r?r():t,v),S=o&&m.current||[];Nt((()=>re(S,(({ctrl:e,item:t,key:n})=>{Sn(e,p),an(u,t,n)}))));const I=[];if(v&&re(v,((e,t)=>{e.expired?(clearTimeout(e.expirationId),S.push(e)):~(t=I[t]=y.indexOf(e.key))&&(g[t]=e)})),re(h,((e,t)=>{g[t]||(g[t]={key:y[t],item:e,phase:"mount",ctrl:new rr},g[t].ctrl.item=e)})),I.length){let e=-1;const{leave:n}=r?r():t;re(I,((t,r)=>{const o=v[r];~t?(e=g.indexOf(o),g[e]={...o,item:h[t]}):n&&g.splice(++e,0,o)}))}te.fun(i)&&g.sort(((e,t)=>i(e.item,t.item)));let b=-s;const w=Ut(),E=pn(t),A=new Map,O=(0,f.useRef)(new Map),C=(0,f.useRef)(!1);re(g,((e,n)=>{const o=e.key,i=e.phase,u=r?r():t;let p,f;const h=an(u.delay||0,o);if("mount"==i)p=u.enter,f="enter";else{const e=y.indexOf(o)<0;if("leave"!=i)if(e)p=u.leave,f="leave";else{if(!(p=u.update))return;f="update"}else{if(e)return;p=u.enter,f="enter"}}if(p=an(p,e.item,n),p=te.obj(p)?gn(p):{to:p},!p.config){const t=d||E.config;p.config=an(t,e.item,n,f)}b+=s;const g={...E,delay:h+b,ref:c,immediate:u.immediate,reset:!1,...p};if("enter"==f&&te.und(g.from)){const o=r?r():t,i=te.und(o.initial)||v?o.from:o.initial;g.from=an(i,e.item,n)}const{onResolve:S}=g;g.onResolve=e=>{an(S,e);const t=m.current,n=t.find((e=>e.key===o));if(n&&(!e.cancelled||"update"==n.phase)&&n.ctrl.idle){const e=t.every((e=>e.ctrl.idle));if("leave"==n.phase){const t=an(a,n.item);if(!1!==t){const r=!0===t?0:t;if(n.expired=!0,!e&&r>0)return void(r<=2147483647&&(n.expirationId=setTimeout(w,r)))}}e&&t.some((e=>e.expired))&&(O.current.delete(n),l&&(C.current=!0),w())}};const I=sr(e.ctrl,g);"leave"===f&&l?O.current.set(e,{phase:f,springs:I,payload:g}):A.set(e,{phase:f,springs:I,payload:g})}));const T=(0,f.useContext)(dr),x=$t(T),R=T!==x&&vn(T);Nt((()=>{R&&re(g,(e=>{e.ctrl.start({default:T})}))}),[T]),re(A,((e,t)=>{if(O.current.size){const e=g.findIndex((e=>e.key===t.key));g.splice(e,1)}})),Nt((()=>{re(O.current.size?O.current:A,(({phase:e,payload:t},n)=>{const{ctrl:r}=n;n.phase=e,p?.add(r),R&&"enter"==e&&r.start({default:T}),t&&(In(r,t.ref),!r.ref&&!p||C.current?(r.start(t),C.current&&(C.current=!1)):r.update(t))}))}),o?void 0:n);const P=e=>f.createElement(f.Fragment,null,g.map(((t,n)=>{const{springs:r}=A.get(t)||t.ctrl,o=e({...r},t.item,t,n);return o&&o.type?f.createElement(o.type,{...o.props,key:te.str(t.key)||te.num(t.key)?t.key:t.ctrl.id,ref:o.ref}):o})));return p?[P,p]:P}var br=1;var wr=({container:e,...t}={})=>{const[n,r]=gr((()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...t})),[]);return Nt((()=>{const t=((e,{container:t=document.documentElement}={})=>{let n=Mt.get(t);n||(n=new Set,Mt.set(t,n));const r=new Dt(e,t);if(n.add(r),!_t.has(t)){const e=()=>(n?.forEach((e=>e.advance())),!0);_t.set(t,e);const r=kt(t);window.addEventListener("resize",e,{passive:!0}),t!==document.documentElement&&Lt.set(t,Rt(e,{container:t})),r.addEventListener("scroll",e,{passive:!0})}const o=_t.get(t);return k(o),()=>{k.cancel(o);const e=Mt.get(t);if(!e)return;if(e.delete(r),e.size)return;const n=_t.get(t);_t.delete(t),n&&(kt(t).removeEventListener("scroll",n),window.removeEventListener("resize",n),Lt.get(t)?.())}})((({x:e,y:t})=>{r.start({scrollX:e.current,scrollXProgress:e.progress,scrollY:t.current,scrollYProgress:t.progress})}),{container:e?.current||void 0});return()=>{re(Object.values(n),(e=>e.stop())),t()}}),[]),n},Er=({container:e,...t})=>{const[n,r]=gr((()=>({width:0,height:0,...t})),[]);return Nt((()=>{const t=Rt((({width:e,height:t})=>{r.start({width:e,height:t,immediate:0===n.width.get()||0===n.height.get()})}),{container:e?.current||void 0});return()=>{re(Object.values(n),(e=>e.stop())),t()}}),[]),n},Ar={any:0,all:1};function Or(e,t){const[n,r]=(0,f.useState)(!1),o=(0,f.useRef)(),i=te.fun(e)&&e,s=i?i():{},{to:a={},from:l={},...u}=s,c=i?t:e,[d,p]=gr((()=>({from:l,...u})),[]);return Nt((()=>{const e=o.current,{root:t,once:i,amount:s="any",...u}=c??{};if(!e||i&&n||"undefined"==typeof IntersectionObserver)return;const d=new WeakMap,f=new IntersectionObserver((e=>{e.forEach((e=>{const t=d.get(e.target);if(e.isIntersecting!==Boolean(t))if(e.isIntersecting){const t=(a&&p.start(a),r(!0),i?void 0:()=>{l&&p.start(l),r(!1)});te.fun(t)?d.set(e.target,t):f.unobserve(e.target)}else t&&(t(),d.delete(e.target))}))}),{root:t&&t.current||void 0,threshold:"number"==typeof s||Array.isArray(s)?s:Ar[s],...u});return f.observe(e),()=>f.unobserve(e)}),[c]),i?[o,d]:[o,n]}function Cr({children:e,...t}){return e(gr(t))}function Tr({items:e,children:t,...n}){const r=Sr(e.length,n);return e.map(((e,n)=>{const o=t(e,n);return te.fun(o)?o(r[n]):o}))}function xr({items:e,children:t,...n}){return Ir(e,n)(t)}var Rr=class extends Fn{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Ve(...t);const n=this._get(),r=en(n);Ht(this,r.create(n))}advance(e){const t=this._get();ne(t,this.get())||(Wt(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Dr(this._active)&&_r(this)}_get(){const e=te.arr(this.source)?this.source.map(Ze):ie(Ze(this.source));return this.calc(...e)}_start(){this.idle&&!Dr(this._active)&&(this.idle=!1,re(qt(this),(e=>{e.done=!1})),Z.skipAnimation?(k.batchedUpdates((()=>this.advance())),_r(this)):Se.start(this))}_attach(){let e=1;re(ie(this.source),(t=>{Xe(t)&&ot(t,this),jn(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){re(ie(this.source),(e=>{Xe(e)&&it(e,this)})),this._active.clear(),_r(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=ie(this.source).reduce(((e,t)=>Math.max(e,(jn(t)?t.priority:0)+1)),0))}};function Pr(e){return!1!==e.idle}function Dr(e){return!e.size||Array.from(e).every(Pr)}function _r(e){e.idle||(e.idle=!0,re(qt(e),(e=>{e.done=!0})),tt(e,{type:"idle",parent:e}))}var Lr=(e,...t)=>new Rr(e,t),Mr=(e,...t)=>(It(),new Rr(e,t));Z.assign({createStringInterpolator:mt,to:(e,t)=>new Rr(e,t)});var kr=Se.advance,Nr=/^--/;function jr(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||Nr.test(e)||Fr.hasOwnProperty(e)&&Fr[e]?(""+t).trim():t+"px"}var Ur={};var Fr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Br=["Webkit","Ms","Moz","O"];Fr=Object.keys(Fr).reduce(((e,t)=>(Br.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),Fr);var $r=/^(matrix|translate|scale|rotate|skew)/,Vr=/^(translate)/,Gr=/^(rotate|skew)/,Wr=(e,t)=>te.num(e)&&0!==e?e+t:e,Hr=(e,t)=>te.arr(e)?e.every((e=>Hr(e,t))):te.num(e)?e===t:parseFloat(e)===t,qr=class extends Qt{constructor({x:e,y:t,z:n,...r}){const o=[],i=[];(e||t||n)&&(o.push([e||0,t||0,n||0]),i.push((e=>[`translate3d(${e.map((e=>Wr(e,"px"))).join(",")})`,Hr(e,0)]))),oe(r,((e,t)=>{if("transform"===t)o.push([e||""]),i.push((e=>[e,""===e]));else if($r.test(t)){if(delete r[t],te.und(e))return;const n=Vr.test(t)?"px":Gr.test(t)?"deg":"";o.push(ie(e)),i.push("rotate3d"===t?([e,t,r,o])=>[`rotate3d(${e},${t},${r},${Wr(o,n)})`,Hr(o,0)]:e=>[`${t}(${e.map((e=>Wr(e,n))).join(",")})`,Hr(e,t.startsWith("scale")?1:0)])}})),o.length&&(r.transform=new zr(o,i)),super(r)}},zr=class extends nt{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return re(this.inputs,((n,r)=>{const o=Ze(n[0]),[i,s]=this.transforms[r](te.arr(o)?o:n.map(Ze));e+=" "+i,t=t&&s})),t?"none":e}observerAdded(e){1==e&&re(this.inputs,(e=>re(e,(e=>Xe(e)&&ot(e,this)))))}observerRemoved(e){0==e&&re(this.inputs,(e=>re(e,(e=>Xe(e)&&it(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),tt(this,e)}};Z.assign({batchedUpdates:h.unstable_batchedUpdates,createStringInterpolator:mt,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var Kr=((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new Qt(e),getComponentProps:r=e=>e}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=e=>{const t=on(e)||"Anonymous";return(e=te.str(e)?i[e]||(i[e]=tn(e,o)):e[rn]||(e[rn]=tn(e,o))).displayName=`Animated(${t})`,e};return oe(e,((t,n)=>{te.arr(e)&&(n=on(t)),i[n]=i(t)})),{animated:i}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:r,style:o,children:i,scrollTop:s,scrollLeft:a,viewBox:l,...u}=t,c=Object.values(u),d=Object.keys(u).map((t=>n||e.hasAttribute(t)?t:Ur[t]||(Ur[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==i&&(e.textContent=i);for(const t in o)if(o.hasOwnProperty(t)){const n=jr(t,o[t]);Nr.test(t)?e.style.setProperty(t,n):e.style[t]=n}d.forEach(((t,n)=>{e.setAttribute(t,c[n])})),void 0!==r&&(e.className=r),void 0!==s&&(e.scrollTop=s),void 0!==a&&(e.scrollLeft=a),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new qr(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Jr=Kr.animated,Yr=s(4213),Qr=s(6888),Xr=s(3676);function Zr(e){const t=`${(0,Qr.cleanUrl)(e.url)}/addFeatures`,n=(0,Qr.appendCustomParams)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object.assign({},e.params)});return(0,Qr.request)(t,n)}function eo(e){const t=Object.assign({params:{}},e);return t.params.attachment=e.attachment,(0,Qr.request)(`${(0,Qr.cleanUrl)(t.url)}/${t.featureId}/addAttachment`,t)}function to(e,t){const n=`${(0,Qr.cleanUrl)(e).replace("/rest/services","/rest/admin/services")}/addToDefinition`;return t.params=Object.assign({addToDefinition:{}},t.params),t.layers&&t.layers.length>0&&(t.params.addToDefinition.layers=t.layers),t.tables&&t.tables.length>0&&(t.params.addToDefinition.tables=t.tables),(0,Qr.request)(n,t)}function no(e){const t=`${(0,Qr.cleanUrl)(e.url)}/applyEdits`,n=(0,Qr.appendCustomParams)(e,["adds","updates","deletes","useGlobalIds","attachments","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:Object.assign({},e.params)});return(0,Qr.request)(t,n)}function ro(e){return(0,Xr.determineOwner)(e).then((t=>{const n=Object.assign(Object.assign({},e),{rawResponse:!1}),r=`${`${(0,Xr.getPortalUrl)(e)}/content/users/${t}`}${n.folderId&&"/"!==n.folderId?"/"+n.folderId:""}/createService`;return n.params=Object.assign({createParameters:n.item,outputType:"featureService"},n.params),(0,Qr.request)(r,n)}))}function oo(e){return(0,Qr.request)((0,Qr.cleanUrl)(e.url),e)}function io(e){let t;return t=e.fields?Promise.resolve(e.fields):oo({url:e.url}).then((e=>e.fields)),t.then((t=>{const n=function(e){return e.reduce(((e,t)=>{const n=t.domain;return n&&"codedValue"===n.type&&(e[t.name]=n),e}),{})}(t);if(Object.keys(n).length<1)return e.queryResponse;const r=e.queryResponse.features.map((e=>{const t={};for(const r in e.attributes){if(!Object.prototype.hasOwnProperty.call(e.attributes,r))continue;const o=e.attributes[r],i=n[r];t[r]=null!==o&&i?so(o,i):o}return Object.assign(Object.assign({},e),{attributes:t})}));return Object.assign(Object.assign({},e.queryResponse),{features:r})}))}function so(e,t){const n=t.codedValues.find((t=>e===t.code));return n?n.name:e}function ao(e){const t=`${(0,Qr.cleanUrl)(e.url)}/deleteFeatures`,n=(0,Qr.appendCustomParams)(e,["where","objectIds","gdbVersion","returnEditMoment","rollbackOnFailure"],{params:Object.assign({},e.params)});return(0,Qr.request)(t,n)}function lo(e){const t=Object.assign({params:{}},e);return t.params.attachmentIds=e.attachmentIds,(0,Qr.request)(`${(0,Qr.cleanUrl)(t.url)}/${t.featureId}/deleteAttachments`,t)}var uo=s(1635);const co=new RegExp(/.+(?:map|feature|image)server/i);function po(e){const t=e.match(co);return t?t[0]:function(e){const t=e.split("?")[0];return(0,Qr.cleanUrl)(t)}(e)}function fo(e){const{url:t}=e,n=(0,uo.Tt)(e,["url"]),r=`${po(t)}/layers`;return(0,Qr.request)(r,n)}function ho(e){const t=Object.assign({httpMethod:"GET"},e);return(0,Qr.request)(`${(0,Qr.cleanUrl)(t.url)}/${t.featureId}/attachments`,t)}function go(e){return(0,Qr.request)((0,Qr.cleanUrl)(e.url),e)}function mo(e,t){const n=e.replace("/rest/services","/rest/admin/services");return(0,Qr.request)(n,{authentication:t,params:{f:"json"}})}function vo(e,t){return(0,Qr.request)(`${e}/sources`,{authentication:t})}function yo(e){const t=`${(0,Qr.cleanUrl)(e.url)}/${e.id}`,n=Object.assign({httpMethod:"GET"},e);return(0,Qr.request)(t,n).then((e=>n.rawResponse?e:e.feature))}function So(e){const t=(0,Qr.appendCustomParams)(e,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:Object.assign({where:"1=1",outFields:"*"},e.params)});return(0,Qr.request)(`${(0,Qr.cleanUrl)(e.url)}/query`,t)}function Io(e){const t=(0,Qr.appendCustomParams)(e,["objectIds","relationshipId","definitionExpression","outFields"],{httpMethod:"GET",params:Object.assign({definitionExpression:"1=1",outFields:"*",relationshipId:0},e.params)});return(0,Qr.request)(`${(0,Qr.cleanUrl)(e.url)}/queryRelatedRecords`,t)}function bo(e){const t=`${(0,Qr.cleanUrl)(e.url)}/updateFeatures`,n=(0,Qr.appendCustomParams)(e,["features","gdbVersion","returnEditMoment","rollbackOnFailure","trueCurveClient"],{params:Object.assign({},e.params)});return(0,Qr.request)(t,n)}function wo(e){const t=Object.assign({params:{}},e);return t.params.attachment=e.attachment,t.params.attachmentId=e.attachmentId,(0,Qr.request)(`${(0,Qr.cleanUrl)(t.url)}/${t.featureId}/updateAttachment`,t)}function Eo(e,t){const n=`${(0,Qr.cleanUrl)(e).replace("/rest/services","/rest/admin/services")}/updateDefinition`;return t.params=Object.assign({updateDefinition:{}},t.params),t.updateDefinition&&(t.params.updateDefinition=t.updateDefinition),(0,Qr.request)(n,t)}var Ao={exports:{}},Oo={},Co={exports:{}},To={};function xo(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var Ro=/javascript\s*\:/gim;To.whiteList=xo(),To.getDefaultWhiteList=xo,To.onAttr=function(e,t,n){},To.onIgnoreAttr=function(e,t,n){},To.safeAttrValue=function(e,t){return Ro.test(t)?"":t};var Po={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}};var Do=function(e,t){";"!==(e=Po.trimRight(e))[e.length-1]&&(e+=";");var n=e.length,r=!1,o=0,i=0,s="";function a(){if(!r){var n=Po.trim(e.slice(o,i)),a=n.indexOf(":");if(-1!==a){var l=Po.trim(n.slice(0,a)),u=Po.trim(n.slice(a+1));if(l){var c=t(o,s.length,l,u,n);c&&(s+=c+"; ")}}}o=i+1}for(;i<n;i++){var l=e[i];if("/"===l&&"*"===e[i+1]){var u=e.indexOf("*/",i+2);if(-1===u)break;o=(i=u+1)+1,r=!1}else"("===l?r=!0:")"===l?r=!1:";"===l?r||a():"\n"===l&&a()}return Po.trim(s)},_o=To,Lo=Do;function Mo(e){return null==e}function ko(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).whiteList=e.whiteList||_o.whiteList,e.onAttr=e.onAttr||_o.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||_o.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||_o.safeAttrValue,this.options=e}ko.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onAttr,o=t.onIgnoreAttr,i=t.safeAttrValue,s=Lo(e,(function(e,t,s,a,l){var u=n[s],c=!1;if(!0===u?c=u:"function"==typeof u?c=u(a):u instanceof RegExp&&(c=u.test(a)),!0!==c&&(c=!1),a=i(s,a)){var d,p={position:t,sourcePosition:e,source:l,isWhite:c};return c?Mo(d=r(s,a,p))?s+":"+a:d:Mo(d=o(s,a,p))?void 0:d}}));return s};var No=ko;!function(e,t){var n=To,r=No;for(var o in(t=e.exports=function(e,t){return new r(t).process(e)}).FilterCSS=r,n)t[o]=n[o]}(Co,Co.exports);var jo={indexOf:function(e,t){var n,r;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var r,o;if(Array.prototype.forEach)return e.forEach(t,n);for(r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Uo=Co.exports.FilterCSS,Fo=Co.exports.getDefaultWhiteList,Bo=jo;function $o(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Vo=new Uo;function Go(e){return e.replace(Wo,"&lt;").replace(Ho,"&gt;")}var Wo=/</g,Ho=/>/g,qo=/"/g,zo=/&quot;/g,Ko=/&#([a-zA-Z0-9]*);?/gim,Jo=/&colon;?/gim,Yo=/&newline;?/gim,Qo=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Xo=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Zo=/u\s*r\s*l\s*\(.*/gi;function ei(e){return e.replace(qo,"&quot;")}function ti(e){return e.replace(zo,'"')}function ni(e){return e.replace(Ko,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function ri(e){return e.replace(Jo,":").replace(Yo," ")}function oi(e){for(var t="",n=0,r=e.length;n<r;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Bo.trim(t)}function ii(e){return e=oi(e=ri(e=ni(e=ti(e))))}function si(e){return e=Go(e=ei(e))}Oo.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},Oo.getDefaultWhiteList=$o,Oo.onTag=function(e,t,n){},Oo.onIgnoreTag=function(e,t,n){},Oo.onTagAttr=function(e,t,n){},Oo.onIgnoreTagAttr=function(e,t,n){},Oo.safeAttrValue=function(e,t,n,r){if(n=ii(n),"href"===t||"src"===t){if("#"===(n=Bo.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(Qo.lastIndex=0,Qo.test(n))return""}else if("style"===t){if(Xo.lastIndex=0,Xo.test(n))return"";if(Zo.lastIndex=0,Zo.test(n)&&(Qo.lastIndex=0,Qo.test(n)))return"";!1!==r&&(n=(r=r||Vo).process(n))}return n=si(n)},Oo.escapeHtml=Go,Oo.escapeQuote=ei,Oo.unescapeQuote=ti,Oo.escapeHtmlEntities=ni,Oo.escapeDangerHtml5Entities=ri,Oo.clearNonPrintableCharacter=oi,Oo.friendlyAttrValue=ii,Oo.escapeAttrValue=si,Oo.onIgnoreTagStripAll=function(){return""},Oo.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var n=!Array.isArray(e),r=[],o=!1;return{onIgnoreTag:function(i,s,a){if(function(t){return!!n||-1!==Bo.indexOf(e,t)}(i)){if(a.isClosing){var l="[/removed]",u=a.position+10;return r.push([!1!==o?o:a.position,u]),o=!1,l}return o||(o=a.position),"[removed]"}return t(i,s,a)},remove:function(e){var t="",n=0;return Bo.forEach(r,(function(r){t+=e.slice(n,r[0]),n=r[1]})),t+=e.slice(n)}}},Oo.stripCommentTag=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var o=e.indexOf("--\x3e",r);if(-1===o)break;n=o+3}return t},Oo.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))}))).join("")},Oo.cssFilter=Vo,Oo.getDefaultCSSWhiteList=Fo;var ai={},li=jo;function ui(e){var t,n=li.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=li.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function ci(e){return"</"===e.slice(0,2)}var di=/[^a-zA-Z0-9\\_:.-]/gim;function pi(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}}function fi(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"'"===n||'"'===n?t:-1}}function hi(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}}function gi(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}ai.parseTag=function(e,t,n){var r="",o=0,i=!1,s=!1,a=0,l=e.length,u="",c="";e:for(a=0;a<l;a++){var d=e.charAt(a);if(!1===i){if("<"===d){i=a;continue}}else if(!1===s){if("<"===d){r+=n(e.slice(o,a)),i=a,o=a;continue}if(">"===d){r+=n(e.slice(o,i)),u=ui(c=e.slice(i,a+1)),r+=t(i,r.length,u,c,ci(c)),o=a+1,i=!1;continue}if('"'===d||"'"===d)for(var p=1,f=e.charAt(a-p);""===f.trim()||"="===f;){if("="===f){s=d;continue e}f=e.charAt(a-++p)}}else if(d===s){s=!1;continue}}return o<e.length&&(r+=n(e.substr(o))),r},ai.parseAttr=function(e,t){var n=0,r=0,o=[],i=!1,s=e.length;function a(e,n){if(!((e=(e=li.trim(e)).replace(di,"").toLowerCase()).length<1)){var r=t(e,n||"");r&&o.push(r)}}for(var l=0;l<s;l++){var u,c=e.charAt(l);if(!1!==i||"="!==c)if(!1===i||l!==r)if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===i){if(-1===(u=pi(e,l))){a(li.trim(e.slice(n,l))),i=!1,n=l+1;continue}l=u-1;continue}if(-1===(u=hi(e,l-1))){a(i,gi(li.trim(e.slice(n,l)))),i=!1,n=l+1;continue}}else;else{if(-1===(u=e.indexOf(c,l+1)))break;a(i,li.trim(e.slice(r+1,u))),i=!1,n=(l=u)+1}else i=e.slice(n,l),n=l+1,r='"'===e.charAt(n)||"'"===e.charAt(n)?n:fi(e,l+1)}return n<e.length&&(!1===i?a(e.slice(n)):a(i,gi(li.trim(e.slice(n))))),li.trim(o.join(" "))};var mi=Co.exports.FilterCSS,vi=Oo,yi=ai,Si=yi.parseTag,Ii=yi.parseAttr,bi=jo;function wi(e){return null==e}function Ei(e){(e=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=vi.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map((function(e){return e.toLowerCase()})):t[n.toLowerCase()]=e[n];return t}(e.whiteList||e.allowList):e.whiteList=vi.whiteList,e.onTag=e.onTag||vi.onTag,e.onTagAttr=e.onTagAttr||vi.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||vi.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||vi.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||vi.safeAttrValue,e.escapeHtml=e.escapeHtml||vi.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new mi(e.css))}Ei.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,n=t.whiteList,r=t.onTag,o=t.onIgnoreTag,i=t.onTagAttr,s=t.onIgnoreTagAttr,a=t.safeAttrValue,l=t.escapeHtml,u=this.cssFilter;t.stripBlankChar&&(e=vi.stripBlankChar(e)),t.allowCommentTag||(e=vi.stripCommentTag(e));var c=!1;t.stripIgnoreTagBody&&(c=vi.StripTagBody(t.stripIgnoreTagBody,o),o=c.onIgnoreTag);var d=Si(e,(function(e,t,c,d,p){var f={sourcePosition:e,position:t,isClosing:p,isWhite:Object.prototype.hasOwnProperty.call(n,c)},h=r(c,d,f);if(!wi(h))return h;if(f.isWhite){if(f.isClosing)return"</"+c+">";var g=function(e){var t=bi.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=bi.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=bi.trim(e.slice(0,-1))),{html:e,closing:n}}(d),m=n[c],v=Ii(g.html,(function(e,t){var n=-1!==bi.indexOf(m,e),r=i(c,e,t,n);return wi(r)?n?(t=a(c,e,t,u))?e+'="'+t+'"':e:wi(r=s(c,e,t,n))?void 0:r:r}));return d="<"+c,v&&(d+=" "+v),g.closing&&(d+=" /"),d+=">"}return wi(h=o(c,d,f))?l(d):h}),l);return c&&(d=c.remove(d)),d};var Ai=Ei;!function(e,t){var n=Oo,r=ai,o=Ai;function i(e,t){return new o(t).process(e)}(t=e.exports=i).filterXSS=i,t.FilterXSS=o,function(){for(var e in n)t[e]=n[e];for(var o in r)t[o]=r[o]}(),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(Ao,Ao.exports);var Oi=function(){function e(e,t){var n,r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,n,o){return"a"===e&&"href"===t||("img"===e||"source"===e)&&"src"===t?r.sanitizeUrl(n):Ao.exports.safeAttrValue(e,t,n,o)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"},e&&!t?n=e:e&&t?(n=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach((function(t){"whiteList"===t?n.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]):n[t]=e[t]}))):(n=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=n,this._xssFilter=new Ao.exports.FilterXSS(n)}return e.prototype.sanitize=function(e,t){switch(void 0===t&&(t={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,t);default:if(t.allowUndefined&&void 0===e)return;return null}},e.prototype.sanitizeUrl=function(e,t){var n=(null!=t?t:{}).isProtocolRequired,r=void 0===n||n,o=this._trim(e.substring(0,e.indexOf(":"))),i="/"===e,s=/^#/.test(e),a=o&&this.allowedProtocols.indexOf(o.toLowerCase())>-1;return i||s||a?Ao.exports.escapeAttrValue(e):o||r?"":Ao.exports.escapeAttrValue("https://".concat(e))},e.prototype.sanitizeHTMLAttribute=function(e,t,n,r){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(e,t,n,r):Ao.exports.safeAttrValue(e,t,n,r)},e.prototype.validate=function(e,t){void 0===t&&(t={});var n=this.sanitize(e,t);return{isValid:e===n,sanitized:n}},e.prototype.encodeHTML=function(e){var t=this;return String(e).replace(/[&<>"'\/]/g,(function(e){return t._entityMap[e]}))},e.prototype.encodeAttrValue=function(e){var t=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,(function(n,r){return t.test(n)?n:"&#x".concat(Number(e.charCodeAt(r)).toString(16),";")}))},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach((function(e){Object.keys(e).forEach((function(n){Array.isArray(e[n])&&Array.isArray(t[n])?t[n]=t[n].concat(e[n]):t[n]=e[n]}))})),t},e.prototype._iterateOverObject=function(e,t){var n=this;void 0===t&&(t={});try{var r=!1,o=void 0;if(Array.isArray(e))o=e.reduce((function(e,o){var i=n.validate(o,t);return i.isValid?e.concat([o]):(r=!0,e.concat([i.sanitized]))}),[]);else{if(!function(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e)){if(t.allowUndefined&&void 0===e)return;return null}o=Object.keys(e).reduce((function(o,i){var s=e[i],a=n.validate(s,t);return a.isValid?o[i]=s:(r=!0,o[i]=a.sanitized),o}),{})}return r?o:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}(),Ci=s(4820),Ti=s(4502),xi=s(4262),Ri=s(7808),Pi=s(5689),Di=s(476),_i=s(4649),Li=s(2159);const Mi={ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",ControlLeft:"control",ControlRight:"control"},ki=e=>"code"in e?!!Mi[e.code]:["Shift","Control","Alt","Meta"].includes(e.key),Ni={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"};function ji(e){if("undefined"==typeof window)return;let t=e.key;navigator.userAgent.includes("Edge")&&(ki(e)||Ni[e.keyCode]||(t="key"+t));const n=new KeyboardEvent(e.type,{key:t+"-manual",code:e.code,location:e.location,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,repeat:e.repeat,charCode:e.charCode,keyCode:e.keyCode,which:e.which});document.dispatchEvent(n)}var Ui,Fi,Bi=s(1035),$i=s(6048),Vi=s(6962),Gi=s(4419),Wi=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.AppList="AppList",e.Builder="Builder",e.Experience="Experience"}(Ui||(Ui={})),function(e){e.InvalidUserLevel="InvalidUserLevel",e.InvalidPrivilege="InvalidPrivilege",e.InvalidLicense="InvalidLicense",e.InvalidAppBlockedByOrg="InvalidAppBlockedByOrg",e.InvalidResourceExperience="InvalidResourceExperience",e.InvalidResourceItem="InvalidResourceItem",e.InvalidResourcePermission="InvalidResourcePermission",e.InvalidResourcePermissionForReadOnly="InvalidResourcePermissionForReadOnly",e.NullInfo=""}(Fi||(Fi={}));const Hi="OAUTH_0070";function qi(e){return Wi(this,void 0,void 0,(function*(){return yield Ki(e).then((e=>e.valid))}))}function zi(e){return Wi(this,void 0,void 0,(function*(){return yield ss(e).then((e=>Wi(this,void 0,void 0,(function*(){return yield Xi(e)}))))}))}function Ki(e,t){return Wi(this,void 0,void 0,(function*(){return yield ss(e).then((n=>Wi(this,void 0,void 0,(function*(){const r=function(e,t){return Wi(this,void 0,void 0,(function*(){const n=function(){const e=(0,Bi.Vp)().getState();return e.appId||e.queryObject.id}(),r={valid:!0,isExperience:!0,isValidItem:!0,hasPermissionToAccess:!0,viewOnly:!1};return e===Ui.AppList||window.jimuConfig.isDevEdition?yield Promise.resolve(r):n?/\.json$/.test(n)||/^https/.test(n)?yield Promise.resolve(r):yield rs(n).then((n=>Wi(this,void 0,void 0,(function*(){var o;if(!n||"Web Experience"!==n.type&&"Web Experience Template"!==n.type)return r.valid=!1,r.isExperience=!1,r;{const i=!!(0,Bi.Vp)().getState().queryObject.template;if(e===Ui.Builder&&!i){const e=yield es(),i=!!window.jimuConfig.isInPortal||"self"===n.contentOrigin,s=!!e&&("org_admin"===e.role&&(null===(o=e.privileges)||void 0===o?void 0:o.includes("portal:admin:updateItems")))&&i,a=n.owner===(null==e?void 0:e.username),l=yield as(n.id);s||a||l||t||(r.valid=!1,r.hasPermissionToAccess=!1)}return n.origin&&(r.viewOnly=!0),r}})))).catch((e=>(e&&"CONT_0001"===e.code?(r.valid=!1,r.isValidItem=!1):(r.valid=!1,r.hasPermissionToAccess=!1),r))):yield Promise.resolve(r)}))}(e,t),o=function(e){return Wi(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition||e!==Ui.Builder&&e!==Ui.AppList?Promise.resolve(!0):yield es().then((e=>!(!e||!e.orgId))).catch((()=>!1))}))}(e),i=function(e){return Wi(this,void 0,void 0,(function*(){return yield Yi().then((t=>Wi(this,void 0,void 0,(function*(){return window.jimuConfig.isDevEdition&&t&&(e===Ui.Builder||e===Ui.AppList)?yield function(){return Wi(this,void 0,void 0,(function*(){return yield es().then((e=>!(!e||"2"!==e.level))).catch((()=>!1))}))}():yield Promise.resolve(!0)}))))}))}(e),s=function(e,t){return Wi(this,void 0,void 0,(function*(){return yield Xi(t).then((t=>{const n={valid:!1,capabilities:t,invalidInfo:Fi.NullInfo,invalidMessage:""};if(window.jimuConfig.isDevEdition){if(e===Ui.AppList)return n.valid=t.canCreateExperience,n;if(e===Ui.Builder)return n.valid=t.canCreateExperience,n;if(e===Ui.Experience)return n.valid=!0,n}else{if(e===Ui.AppList)return n.valid=!0,n;if(e===Ui.Builder)return n.valid=t.canCreateExperience,n;if(e===Ui.Experience)return n.valid=!0,n}}))}))}(e,n),a=function(e,t){return Wi(this,void 0,void 0,(function*(){const n=(0,Bi.Vp)().getState();return window.jimuConfig.isDevEdition?yield Promise.resolve({valid:!0,viewOnly:!1}):e===Ui.Builder||e===Ui.AppList?yield Promise.resolve(t):n.appId?/^\/templates\/.*\.json$/.test(n.appId)?yield Promise.resolve({valid:!0,viewOnly:!1}):yield function(e){return Wi(this,void 0,void 0,(function*(){return yield rs(e).then((e=>e&&"public"===e.access))}))}(n.appId).then((e=>e&&(t.valid||t.messageCode!==Hi)?{valid:!0,viewOnly:!1}:t)).catch((e=>({valid:!0,viewOnly:!1}))):Promise.resolve({valid:!0,viewOnly:!1})}))}(e,n);return yield Promise.all([r,o,i,s,a])})))).then((t=>{const[n,r,o,i,s]=t,a={valid:n.valid&&r&&o&&i.valid&&s.valid&&(e!==Ui.Builder||!n.viewOnly&&!s.viewOnly),capabilities:{canViewExperience:o&&i.capabilities.canViewExperience&&s.valid,canCreateExperience:!n.viewOnly&&o&&i.capabilities.canCreateExperience&&s.valid&&!s.viewOnly,canUpdateExperience:!n.viewOnly&&o&&i.capabilities.canUpdateExperience&&s.valid&&!s.viewOnly,canDeleteExperience:!n.viewOnly&&o&&i.capabilities.canDeleteExperience&&s.valid&&!s.viewOnly,canShareExperience:!n.viewOnly&&o&&i.capabilities.canShareExperience&&s.valid&&!s.viewOnly,canEditFeature:i.capabilities.canEditFeature},invalidInfo:Fi.NullInfo,invalidMessage:""};return a.invalidInfo=function(e,t,n,r,o,i){let s=Fi.NullInfo;s=r?i.valid?!o.valid||!n||e===Ui.Builder&&i.viewOnly?Fi.InvalidPrivilege:t.valid&&e===Ui.Builder&&t.viewOnly?Fi.InvalidResourcePermissionForReadOnly:t.valid?Fi.NullInfo:t.isExperience?t.isValidItem?Fi.InvalidResourcePermission:Fi.InvalidResourceItem:Fi.InvalidResourceExperience:i.messageCode===Hi?Fi.InvalidAppBlockedByOrg:Fi.InvalidLicense:Fi.InvalidUserLevel;return s}(e,n,r,o,i,s),a.invalidMessage=function(e,t){const n=(0,Vi.getIntl)(),r=Zi();let o="";r?t===Fi.InvalidLicense?e===Ui.Builder||e===Ui.AppList?o=n.formatMessage({id:"essentialAppsLicenseErrorForBuilder",defaultMessage:Gi.A.essentialAppsLicenseErrorForBuilder}):e===Ui.Experience&&(o=n.formatMessage({id:"essentialAppsLicenseErrorForApp",defaultMessage:Gi.A.essentialAppsLicenseErrorForApp})):t===Fi.InvalidAppBlockedByOrg?e===Ui.Builder||e===Ui.AppList?o=n.formatMessage({id:"blockedByAdminErrorForBuilder",defaultMessage:Gi.A.blockedByAdminErrorForBuilder}):e===Ui.Experience&&(o=n.formatMessage({id:"blockedByAdminErrorForApp",defaultMessage:Gi.A.blockedByAdminErrorForApp})):t===Fi.InvalidPrivilege?o=window.jimuConfig.isDevEdition?n.formatMessage({id:"roleError2",defaultMessage:Gi.A.roleError2}):n.formatMessage({id:"noEditContentPrivilegesError",defaultMessage:Gi.A.noEditContentPrivilegesError}):t===Fi.InvalidUserLevel?o=n.formatMessage({id:"roleError",defaultMessage:Gi.A.roleError}):t===Fi.InvalidResourceExperience?o=n.formatMessage({id:"invalidResourceExperience",defaultMessage:Gi.A.invalidResourceExperience}):t===Fi.InvalidResourceItem?o=n.formatMessage({id:"invalidResourceItem",defaultMessage:Gi.A.invalidResourceItem}):t===Fi.InvalidResourcePermission?o=n.formatMessage({id:"invalidResourcePermission",defaultMessage:Gi.A.invalidResourcePermission}):t===Fi.InvalidResourcePermissionForReadOnly&&(o=n.formatMessage({id:"invalidResourcePermissionForReadOnly",defaultMessage:Gi.A.invalidResourcePermissionForReadOnly})):o=t===Fi.InvalidResourceExperience?n.formatMessage({id:"invalidResourceExperience",defaultMessage:Gi.A.invalidResourceExperience}):t===Fi.InvalidResourceItem?n.formatMessage({id:"invalidResourceItem",defaultMessage:Gi.A.invalidResourceItem}):"";return o}(e,a.invalidInfo),a}))}))}function Ji(){return Wi(this,void 0,void 0,(function*(){return yield function(){return Wi(this,void 0,void 0,(function*(){const e=(0,Bi.Vp)().getState(),t=e.portalSelf,n=e.portalUrl;return t?yield Promise.resolve(t):n?yield(0,_i.initPortalSelf)(n):yield Promise.resolve(null)}))}().then((e=>e&&e.isPortal?e.currentVersion:null)).catch((e=>null))}))}function Yi(){return Wi(this,void 0,void 0,(function*(){const e=yield Ji();return!!e&&Number(e)<=6.1}))}function Qi(){return Wi(this,void 0,void 0,(function*(){const e=yield Ji();return!!e&&Number(e)<=7.3}))}function Xi(e){return Wi(this,void 0,void 0,(function*(){const t={canViewExperience:!0,canCreateExperience:!1,canUpdateExperience:!1,canDeleteExperience:!1,canShareExperience:!1,canEditFeature:!1};return yield ts().then((n=>Wi(this,void 0,void 0,(function*(){const r=n&&e.valid&&!e.viewOnly;return t.canCreateExperience=r,t.canUpdateExperience=r,t.canDeleteExperience=r,t.canShareExperience=r,yield function(){return Wi(this,void 0,void 0,(function*(){return yield es().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("features:user:edit")))).catch((()=>!0))}))}()})))).then((e=>(t.canEditFeature=e,t)))}))}function Zi(){return $i.Ay.getInstance().getMainSession()}function es(){return Wi(this,void 0,void 0,(function*(){const e=Zi();return e?yield e.getUser().then((e=>e)).catch((t=>Wi(this,void 0,void 0,(function*(){return console.log(t&&t.message,`You are currently signed in as: '${e.username}'.`),yield Promise.reject(new Error(null))})))):(console.log("The user has not signed in."),yield Promise.reject(new Error(null)))}))}function ts(){return Wi(this,void 0,void 0,(function*(){return yield es().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:user:createItem")))).catch((()=>!1))}))}function ns(){return Wi(this,void 0,void 0,(function*(){return yield es().then((e=>!!(e&&e.privileges&&e.privileges.indexOf&&e.privileges.includes("portal:publisher:publishFeatures")))).catch((()=>!1))}))}function rs(e){return Wi(this,void 0,void 0,(function*(){const t=Zi(),n=(0,Bi.Vp)().getState().appInfo;return n&&n.name?yield Promise.resolve(n):yield(0,_i.getAppInfo)(e).then((e=>e)).catch((e=>Wi(this,void 0,void 0,(function*(){return console.log(e&&e.message,`You are currently signed in as: '${null==t?void 0:t.username}'.`),yield Promise.reject(e)}))))}))}function os(e){return Wi(this,void 0,void 0,(function*(){return!window.jimuConfig.isDevEdition||(e===Ui.Builder||e===Ui.AppList)&&!(yield Yi())}))}let is=null;function ss(e){return Wi(this,void 0,void 0,(function*(){const t=(0,Bi.Vp)().getState().portalUrl,n=(yield Qi())?"arcgisWebApps":"experienceBuilder";return is||(is=(yield os(e))?yield function(e,t){return Wi(this,void 0,void 0,(function*(){const n={valid:!1,viewOnly:!1,messageCode:""},r=$i.Ay.getInstance().getSessionByUrl(e);if(r){const e=`${r.portal}/oauth2/validateAppAccess?client_id=${t}`;return yield(0,Qr.request)(e,{authentication:r}).then((e=>(!1===e.valid?(n.messageCode=e.messageCode||"",console.log("not-authorized",`You are currently signed in as: '${r.username}'.`)):(n.valid=!0,n.viewOnly=!!e.viewOnlyUserTypeApp),n))).catch((e=>Wi(this,void 0,void 0,(function*(){return console.log(e&&e.message,`You are currently signed in as: '${r.username}'.`),yield Promise.resolve(n)}))))}return yield Promise.resolve(n)}))}(t,n):yield Promise.resolve({valid:!0,viewOnly:!1})),is}))}function as(e,t){return Wi(this,void 0,void 0,(function*(){return es().then((n=>{var r;const o=t||Zi(),i=null===(r=null==n?void 0:n.groups)||void 0===r?void 0:r.filter((e=>e.capabilities.indexOf("updateitemcontrol")>-1));return(null==i?void 0:i.length)>0&&(0,Xr.getItemGroups)(e,{authentication:o}).then((e=>{const t=[].concat(e.admin).concat(e.member).concat(e.other);return i.some((e=>t.some((t=>t.id===e.id))))}))})).catch((e=>!1))}))}var ls=s(9133),us=s(4962);function cs(e,t,n,r){let o=y(e);const i=null==e?void 0:e.utilities;if(ds(i,t))return{id:ps(i,t),appConfig:e};{const e={id:fs(),type:n,source:"custom",url:t,label:r||hs(t)};return o=o.setIn(["utilities",e.id],e),{id:e.id,appConfig:null==o?void 0:o.asMutable({deep:!0})}}}const ds=(e,t)=>{var n;const r=null===(n=Object.keys(e||{}))||void 0===n?void 0:n.map((t=>{var n;return null===(n=e[t])||void 0===n?void 0:n.url}));return null==r?void 0:r.includes(t)},ps=(e,t)=>{var n;let r;return null===(n=Object.keys(e||{}))||void 0===n||n.forEach((n=>{var o,i;(null===(o=e[n])||void 0===o?void 0:o.url)===t&&(r=null===(i=e[n])||void 0===i?void 0:i.id)})),r},fs=()=>Li.getUniqueId("utility"),hs=e=>{var t;const n=e.match(/\/(\w*)\/(?:GP|NA|Geoenrichment|Geometry|Geocode)Server\/?(\w*)?\/?/);return 3===(null==n?void 0:n.length)?null!==(t=n[2])&&void 0!==t?t:n[1]:""};var gs,ms,vs=s(7707),ys=s(4835),Ss=s(3610),Is=s(2089),bs=s(4048),ws=s(1636);!function(e){e.String="STRING",e.Number="NUMBER",e.Field="FIELD",e.Function="FUNCTION",e.Operator="OPERATOR",e.Order="ORDER",e.Unknown="UNKNOWN"}(gs||(gs={})),function(e){e.Average="AVERAGE",e.Count="COUNT",e.Sum="SUM",e.Max="MAX",e.Min="MIN",e.StandardDeviation="STANDARD_DEVIATION",e.PercentileDiscrete="PERCENTILE_DISCRETE",e.PercentileContinuous="PERCENTILE_CONTINUOUS"}(ms||(ms={}));const Es=Object.assign(Object.assign({},gs),{Arcade:"ARCADE"});var As,Os=s(3702),Cs=s(9459),Ts=s(508),xs=s(9875);!function(e){e.Count="count",e.Sum="sum",e.Min="min",e.Max="max",e.Avg="avg",e.Stddev="stddev",e.percentile_disc="percentile_disc",e.percentile_cont="percentile_cont"}(As||(As={}));const Rs="esriFieldTypeOID",Ps="EXPRESSION_RESOLVER";var Ds;!function(e){e.ParamType="INVALID_PARAM_TYPE",e.ParamNumber="INVALID_NUMBER_OF_PARAMS",e.FuncType="INVALID_FUNCTION_TYPE",e.NeedRecord="NEED_RECORD",e.NeedDataSource="NEED_DATA_SOURCE"}(Ds||(Ds={}));var _s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function Ls(e,t,n,r,o){const i=[];return e.forEach((e=>{if(e.type===gs.Number||e.type===gs.String||e.type===gs.Field)i.push(e);else if(e.type===gs.Operator){const s=i.pop(),a=i.pop(),l=e.exp;let u=!1;(Xs(a,o)||Xs(s,o))&&(u=!0);const c=function(e,t,n){switch(n){case"*":return Fs(e)&&Fs(t)?parseFloat(e)*parseFloat(t):"";case"/":return Fs(e)&&Fs(t)?parseFloat(e)/parseFloat(t):"";case"-":return Fs(e)&&Fs(t)?parseFloat(e)-parseFloat(t):"";default:return Fs(e)&&Fs(t)?parseFloat(e)+parseFloat(t):`${e}${t}`}}(Ms(a,t,n,u,r),Ms(s,t,n,u,r),l);i.push(Qs(c))}})),Ms(i.pop(),t,n,o,r)}function Ms(e,t,n,r,o){if(e.type===gs.Field)return ks(e,t,n,r,o);if(e.type===gs.Number){return r?(0,Vi.getIntl)().formatNumber(parseFloat(e.exp),o):parseFloat(e.exp)}return e.type===gs.String?e.exp.replace(/^"/,"").replace(/"$/,""):void 0}function ks(e,t,n,r,o){let i="";const s=function(e,t,n){var r,o,i,s;if(t)return null===(r=t[e.dataSourceId])||void 0===r?void 0:r[0];let a;const l=ls.isSelectionView(null==e?void 0:e.dataSourceId),u=Cs.A.getInstance().getDataSource(null==e?void 0:e.dataSourceId);a=e.isFromRepeatedDataSourceContext?Array.isArray(n)?null===(o=n[0])||void 0===o?void 0:o.record:null===(i=n)||void 0===i?void 0:i.record:l?(null==u?void 0:u.useNoSelectionView())?u.getSourceRecords()[0]:null==u?void 0:u.getMainDataSource().getSelectedRecords()[0]:null==u?void 0:u.getRecords()[0];if((null==u?void 0:u.type)===Ts.hg.BuildingComponentSubLayer){const e=u.getAssociatedDataSource();a=(null===(s=null==e?void 0:e.getRecords())||void 0===s?void 0:s.find((e=>e.getId()===a.getId())))||a}return a}(e,t,n);if(!s||!0===s.fake)throw new Error(Ds.NeedRecord);if(!function(e){return!(!e||!e.getData||"function"!=typeof e.getData)}(s))return i;const a=e.jimuFieldName;return i=r?o&&Vs(e)?(0,Vi.getIntl)().formatNumber(s.getFieldValue(a),o):s.getFormattedFieldValue(a,(0,Vi.getIntl)()):s.getFieldValue(a),null!=i?i:""}function Ns(e,t,n,r){if(Object.values(ms).some((t=>t===e.exp))){const o=e.exp;return function(e,t,n,r,o){return _s(this,void 0,void 0,(function*(){var i,s,a;if(null==e?void 0:e.length){let l;if(!((null===(i=e[0])||void 0===i?void 0:i.type)===gs.Field))return Promise.reject(new Error(Ds.ParamType));if(l=n?yield function(e,t,n){const r=$s(e,t);if(!r)return Promise.reject(new Error(Ds.ParamType));const o=n[e[0].dataSourceId];if(!o||0===o.length)return Promise.reject(new Error(Ds.NeedRecord));const i=js(o,e[0],t);if(!Array.isArray(i))return Promise.reject(i);return Promise.resolve(Ks(i,t,Fa(e,t)))}(e,t,n):function(e){return ls.isSelectionView(null==e?void 0:e.dataSourceId)}(e[0])?t!==ms.Min&&t!==ms.Max||!Ws(e[0])&&!Hs(e[0])?yield function(e,t){const n=$s(e,t);if(!n)return Promise.reject(new Error(Ds.ParamType));const r=Cs.A.getInstance().getDataSource(e[0].dataSourceId),o=r.useNoSelectionView()?r.getSourceRecords():r.getMainDataSource().getSelectedRecords();if(!o||0===o.length)return Promise.reject(new Error(Ds.NeedRecord));const i=js(o,e[0],t);if(!Array.isArray(i))return Promise.reject(i);return Promise.resolve(Ks(i,t,Fa(e,t)))}(e,t):yield Us(e,t):function(e){return!!(null==e?void 0:e.isFromRepeatedDataSourceContext)}(e[0])?yield function(e,t,n){const r=$s([e],t);if(!r)return Promise.reject(new Error(Ds.ParamType));if(t===ms.Count)return Promise.resolve(1);{const t=ks(e,null,n,!1,null);return Promise.resolve(t)}}(e[0],t,r):yield Us(e,t),o&&"number"==typeof l&&t!==ms.Count&&Gs(e[0])){const t=zs(e[0]),n=Cs.A.getInstance().getDataSource(null===(s=e[0])||void 0===s?void 0:s.dataSourceId),r=n?ls.getDateFieldValue(l,n):l;l=xs.formatDateValueByEsriFormat(r,null===(a=null==t?void 0:t.format)||void 0===a?void 0:a.dateFormat,(0,Vi.getIntl)())}return l}return Promise.reject(new Error(Ds.ParamNumber))}))}(o===ms.Count?function(e,t){let n=null;const r=Cs.A.getInstance().getDataSource(t);if(e&&0!==e.length)n=e;else if(r){const e=r&&r.getSchema(),o=e&&e.fields&&Object.keys(e.fields).find((t=>e.fields[t].esriType===Rs)),i=e&&e.fields&&e.fields[o];if(i)n=[{type:gs.Field,jimuFieldName:i.jimuName,dataSourceId:t,exp:`{${i.alias||i.name}}`}];else if(e&&e.fields&&Object.keys(e.fields).length>0){const r=Object.keys(e.fields)[0],o=e.fields[r];o&&(n=[{type:gs.Field,jimuFieldName:o.jimuName,dataSourceId:t,exp:`{${o.alias||o.name}}`}])}}return n}(e.parts,e.dataSourceId):e.parts,o,t,n,r)}return Promise.reject(new Error(Ds.FuncType))}function js(e,t,n){let r=e.map((e=>e.getFieldValue(t.jimuFieldName)));return r=r.filter((e=>null!==e)),0===r.length&&[ms.Max,ms.Min].some((e=>e===n))&&Gs(t)?Ds.NeedRecord:r}function Us(e,t){return _s(this,void 0,void 0,(function*(){if(!$s(e,t))return Promise.reject(new Error(Ds.ParamType));const n=yield function(e,t){if(!(null==e?void 0:e.length)||!t)return Promise.resolve(null);const n=e[0],r=Cs.A.getInstance().getDataSource(n.dataSourceId),o=function(e,t){const n=`${Ps}-${t}-${e.jimuFieldName}`;return n}(n,t),i=Cs.A.getInstance().createLocalDataSource(r,o);if(r&&r.load){const s=function(e,t){if(!(null==e?void 0:e.length))return null;const n=Cs.A.getInstance().getDataSource(e[0].dataSourceId),r=n&&n.getSchema(),o=r&&r.fields&&r.fields[e[0].jimuFieldName];if(t===ms.Count&&(null==o?void 0:o.name)!==n.getIdField())return{returnGeometry:!1,returnDistinctValues:!0,returnCountOnly:!0,outFields:[null==o?void 0:o.name],where:"1=1",orderByFields:void 0,returnIdsOnly:!1};{const n=function(e,t){return`${t||"objectId"}_${e}`}(t,o&&o.jimuName),r=Fa(e,t);r&&(r.value=r.value/100);return{returnGeometry:!1,where:"1=1",outStatistics:[{onStatisticField:o&&o.name,outStatisticFieldName:n,statisticType:Bs(t),statisticParameters:r}]}}}(e,t);return(s.returnCountOnly?i.loadCount(s,{widgetId:o}):i.load(s,{widgetId:o})).then((e=>{var o,s,a,l,u;let c;if("number"==typeof e)c=[e];else{const t=e,n=t&&t[0]&&t[0].getData()||{};c=Object.keys(n).filter((e=>e!==i.getIdField())).map(((e,t)=>n[e]))}if(t===ms.Count){const e=r.isDataView?(null===(s=null===(o=r.getMainDataSource())||void 0===o?void 0:o.getDataSourceJson())||void 0===s?void 0:s.dataViews)&&(null===(a=r.getMainDataSource().getDataSourceJson().dataViews[r.dataViewId])||void 0===a?void 0:a.maximum):null===(u=null===(l=r.getDataSourceJson())||void 0===l?void 0:l.query)||void 0===u?void 0:u.maximum;"number"==typeof e&&(c[0]=Math.min(c[0],e))}return[ms.Max,ms.Min].some((e=>e===t))&&Gs(n)&&c.some((e=>!Fs(e)))?Promise.reject(new Error(Ds.NeedDataSource)):"number"!=typeof c[0]&&[ms.Average,ms.Sum,ms.Count].includes(t)?0:c[0]}))}return Promise.reject(new Error(Ds.NeedDataSource))}(e,t);return Promise.resolve(n)}))}function Fs(e){return!isNaN(parseFloat(e))&&isFinite(e)&&"[object Number]"===Object.prototype.toString.call(e)}function Bs(e){switch(e){case ms.Average:return As.Avg;case ms.Count:return As.Count;case ms.Sum:return As.Sum;case ms.Max:return As.Max;case ms.Min:return As.Min;case ms.StandardDeviation:return As.Stddev;case ms.PercentileDiscrete:return As.percentile_disc;case ms.PercentileContinuous:return As.percentile_cont;default:throw new Error(`Unhandled case: ${e}`)}}function $s(e,t){var n;if(!(null==e?void 0:e.length))return!1;const r=e[0],o=Cs.A.getInstance().getDataSource(r.dataSourceId),i=null==o?void 0:o.getSchema(),s=r.jimuFieldName,a=null===(n=null==i?void 0:i.fields)||void 0===n?void 0:n[s];return t===ms.Count?!!a:t===ms.Min||t===ms.Max?(null==a?void 0:a.type)===Os.Eo.Number||(null==a?void 0:a.type)===Os.Eo.Date||(null==a?void 0:a.type)===Os.Eo.DateOnly||(null==a?void 0:a.type)===Os.Eo.TimeOnly:t===ms.PercentileContinuous||t===ms.PercentileDiscrete?(null==a?void 0:a.type)===Os.Eo.Number&&e.some((e=>e.type===gs.Number)):(null==a?void 0:a.type)===Os.Eo.Number}function Vs(e){var t;if(!e||e.type!==gs.Field)return!1;const n=Cs.A.getInstance().getDataSource(e.dataSourceId),r=null==n?void 0:n.getSchema(),o=e.jimuFieldName,i=null===(t=null==r?void 0:r.fields)||void 0===t?void 0:t[o],s=!(!n||!ls.getCodedValueListForCodedValueOrSubtypeField(n.getLayerDefinition(),e.jimuFieldName));return(null==i?void 0:i.type)===Os.Eo.Number&&!s}function Gs(e){if(!e||e.type!==gs.Field)return!1;const t=zs(e);return(null==t?void 0:t.type)===Os.Eo.Date}function Ws(e){if(!e||e.type!==gs.Field)return!1;const t=zs(e);return(null==t?void 0:t.type)===Os.Eo.DateOnly}function Hs(e){if(!e||e.type!==gs.Field)return!1;const t=zs(e);return(null==t?void 0:t.type)===Os.Eo.TimeOnly}function qs(e){if(!e||e.type!==gs.Field)return!1;const t=zs(e);return(null==t?void 0:t.type)===Os.Eo.Number}function zs(e){var t;if(!e||e.type!==gs.Field)return null;const n=Cs.A.getInstance().getDataSource(e.dataSourceId),r=null==n?void 0:n.getSchema(),o=e.jimuFieldName;return null===(t=null==r?void 0:r.fields)||void 0===t?void 0:t[o]}function Ks(e,t,n){if(!e||0===e.length||t!==ms.Count&&e.some((e=>!Fs(e))))return 0;switch(t){case ms.Average:return e.length?e.reduce(((e,t)=>e+t),0)/e.length:0;case ms.Sum:return e.reduce(((e,t)=>e+t),0);case ms.Count:return Array.from(new Set(e)).length;case ms.Max:return Math.max.apply(null,e);case ms.Min:return Math.min.apply(null,e);case ms.StandardDeviation:return function(e){if(!(null==e?void 0:e.length)||e.length<2)return 0;const t=e.reduce(((e,t)=>e+t),0)/e.length;return Math.sqrt(e.map((e=>Math.pow(e-t,2))).reduce(((e,t)=>e+t),0)/(e.length-1))}(e);case ms.PercentileDiscrete:return Js(e,n);case ms.PercentileContinuous:return Js(e,n,!0);default:throw new Error(`Unhandled case: ${t}`)}}function Js(e,t,n=!1){if(!(null==e?void 0:e.length)||!(null==t?void 0:t.value))return 0;const r=e.sort(((e,n)=>"DESC"===t.orderBy?n-e:e-n));if(n){const e=t.value/100*(r.length-1),n=Math.floor(e),o=Math.ceil(e);if(n===o)return r[n];{const t=r[n];return t+(r[o]-t)*(e-n)/(o-n)}}return r[Math.ceil(t.value/100*r.length)-1]}function Ys(e){let t=[];const n=[];return e&&e.forEach(((r,o)=>{if(r&&!n.some((e=>e===o)))if(r.type!==gs.Function)t=t.concat(r);else if(n.push(o),e[o+1]&&e[o+1].type===gs.Operator&&"("===e[o+1].exp){const i=e.slice(o+2);let s=0,a=0;for(let e=0;e<i.length;e++){if(0===a&&i[e].type===gs.Operator&&")"===i[e].exp){s=e;break}a>0&&i[e].type===gs.Operator&&")"===i[e].exp?a--:i[e].type===gs.Operator&&"("===i[e].exp&&a++}const l=s+o+2;if(l>=o+2){const i=e.slice(o+2,l);for(let e=o+1;e<=l;e++)n.push(e);t=t.concat(Object.assign(Object.assign({},r),{parts:Ys(i)}))}else console.warn("Can not match parentheses")}else t=t.concat(r)})),t}function Qs(e){return Fs(e)?{exp:`${e}`,type:gs.Number}:{exp:`"${e.replace(/^"/,"").replace(/"$/,"")}"`,type:gs.String}}function Xs(e,t){var n;const r=t?Vs:qs;return e.type===gs.String||e.type===gs.Field&&Cs.A.getInstance().getDataSource(e.dataSourceId)&&!r(e)||e.type===gs.Function&&e.exp!==ms.Count&&Gs(null===(n=e.parts)||void 0===n?void 0:n[0])}function Zs(e){var t;return e.type===gs.Field&&Gs(e)||e.type===gs.Function&&e.exp!==ms.Count&&Gs(null===(t=e.parts)||void 0===t?void 0:t[0])}function ea(e){if(La(e))return e.parts[0].valueType;const t=Ys(null==e?void 0:e.parts);return 1===t.length&&t.every((e=>Zs(e)))?Os.Eo.Date:1===t.length&&t.every((e=>{return(t=e).type===gs.Field&&Ws(t)||t.type===gs.Function&&t.exp!==ms.Count&&Ws(null===(n=t.parts)||void 0===n?void 0:n[0]);var t,n}))?Os.Eo.DateOnly:1===t.length&&t.every((e=>{return(t=e).type===gs.Field&&Hs(t)||t.type===gs.Function&&t.exp!==ms.Count&&Hs(null===(n=t.parts)||void 0===n?void 0:n[0]);var t,n}))?Os.Eo.TimeOnly:t.every((e=>{return(t=e).type===gs.Number||t.type===gs.Field&&qs(t)||t.type===gs.Function&&(t.exp===ms.Count||qs(null===(n=t.parts)||void 0===n?void 0:n[0]));var t,n}))?Os.Eo.Number:Os.Eo.String}var ta=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function na(e,t,n,r){return ta(this,void 0,void 0,(function*(){const o=e&&e.parts&&e.parts.slice();if(!o)return yield Promise.resolve("");const i=Ys(o);if(!r&&1===i.length&&Zs(i[0])){if(i[0].type===gs.Function)return Ns(i[0],t,n,!1).then((e=>e?new Date(e):""));if(i[0].type===gs.Field){const e=ks(i[0],t,n,!1,null);return Promise.resolve(e?new Date(e):"")}}const s=function(e){const t=[],n=[];for(e.forEach(((e,r)=>{if(e.type===gs.Number||e.type===gs.String||e.type===gs.Field||e.type===gs.Function)t.push(e);else if(e.type===gs.Operator)if("("===e.exp)n.push(e);else if(")"===e.exp){let e=n.pop();for(;"("!==e.exp;)t.push(e),e=n.pop()}else if("+"===e.exp||"-"===e.exp){for(;n.length>0&&("+"===n[n.length-1].exp||"-"===n[n.length-1].exp||"*"===n[n.length-1].exp||"/"===n[n.length-1].exp);)t.push(n.pop());n.push(e)}else if("*"===e.exp||"/"===e.exp){for(;n.length>0&&("*"===n[n.length-1].exp||"/"===n[n.length-1].exp);)t.push(n.pop());n.push(e)}}));n.length>0;)t.push(n.pop());return t}(i);return Promise.all(s.map((e=>e.type===gs.Function?Ns(e,t,n,!0).then((e=>Qs(e))):Promise.resolve(e)))).then((o=>{const i=Ls(o,t,n,e.numberFormat,r);return r?`${null!=i?i:""}`:null!=i?i:""}))}))}var ra,oa=s(3096),ia=s(5001);!function(e){e.Value="VALUE",e.Style="STYLE"}(ra||(ra={}));const sa=["value"],aa=["background","text","border","borderRadius","icon"],la=sa.concat(aa);var ua;function ca(){const e=(0,Bi.Vp)().getState();return window.jimuConfig.isBuilder?null==e?void 0:e.appStateInBuilder:e}function da(e){var t,n,r,o,i,s;let a=!1;try{if(!e)return!1;let l=null;const u=(0,Is.getModuleSync)("jimu-layouts/layout-runtime").searchUtils,c=ca(),d=null==c?void 0:c.appConfig,p=null==c?void 0:c.browserSizeMode;if(d&&(p&&(l=u.getParentWidgetIdOfContent(d,e,ia.K.Widget,p)),l||(l=u.getParentWidgetIdOfContent(d,e,ia.K.Widget,d.mainSizeMode))),l){const e=null===(t=null==d?void 0:d.widgets)||void 0===t?void 0:t[l];(null===(r=null===(n=null==e?void 0:e.manifest)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.canProvideRepeatDataSource)&&(a=!0)}if(!a){const t=null===(o=null==d?void 0:d.widgets)||void 0===o?void 0:o[e];(null===(s=null===(i=null==t?void 0:t.manifest)||void 0===i?void 0:i.properties)||void 0===s?void 0:s.canProvideRepeatDataSource)&&(a=!0)}}catch(e){console.error("isWidgetInList error",e)}return a}function pa(e){var t;try{const n=ca(),r=null==n?void 0:n.appConfig;if(!r)return!1;if(da(e))return!0;let o=0;const i=(0,Li.getAllWidgetsInSameRootContainer)(e);for(let e=0;e<i.length;e++){const n=i[e],s=null===(t=r.widgets)||void 0===t?void 0:t[n];if(o+=ha(s),o>=oa.MAX_DATA_SOURCES_PROFILE_ARCADE_CONTENT_PER_PAGE)return!1}return!0}catch(e){return console.error("canAddNewDataSourcesProfileArcadeContent error",e),!1}}function fa(e){var t;try{const n=ca(),r=null==n?void 0:n.appConfig;if(!r)return 0;if(da(e))return 1/0;let o=0;const i=(0,Li.getAllWidgetsInSameRootContainer)(e);for(let e=0;e<i.length;e++){const n=i[e],s=null===(t=r.widgets)||void 0===t?void 0:t[n];o+=ha(s)}return oa.MAX_DATA_SOURCES_PROFILE_ARCADE_CONTENT_PER_PAGE-o}catch(e){return console.error("getWidgetRestAvailableArcadeContentCount error",e),0}}function ha(e){var t;let n=0;const r=null==e?void 0:e.config,o=null===(t=null==r?void 0:r.asMutable)||void 0===t?void 0:t.call(r,{deep:!0});if(o){let e=JSON.stringify(o);e=e.replace(/%22/g,'"');n=function(e){const t=new RegExp(`(['"])(${oa.DATA_SOURCES_PROFILE_ARCADE_CONTENT_ID_PREFIX}[\\w-]+)\\1`,"gi"),n=[...e.matchAll(t)],r=new Set(n.map((e=>e[2])));return Array.from(r)}(e).length}return n}function ga(e,t,n){if(!e||!n)return n;const r=n.asMutable({deep:!0});r.scriptContent=ma(e,t,n.scriptContent);const o=null==r?void 0:r.useDataSources;return(null==o?void 0:o.length)>0&&o.forEach(((t,n)=>{const r=ls.mapUseDataSource(e,t);if(r.isChanged){const e=r.useDataSource||t;o[n]=e}})),y(r)}function ma(e,t,n){n||(n="");const r=null==t?void 0:t.useDataSources;return e&&(null==r?void 0:r.length)>0?(null==r||r.forEach((t=>{var r;const o=null==t?void 0:t.dataSourceId;if(o){const i=ls.mapUseDataSource(e,t),s=null===(r=null==i?void 0:i.useDataSource)||void 0===r?void 0:r.dataSourceId;s&&o!==s&&(n=n.replace(new RegExp(`"${o}"`,"g"),`"${s}"`).replace(new RegExp(`'${o}'`,"g"),`'${s}'`))}})),n):n}function va(e,t){const n=[];let r={valid:!0,invalidKeys:n,validValue:e};try{if(wa(e)){const t=[];ba(e,la);const o=function(){let e=["fit","fill","center","tile","stretch"],t=["solid","dashed","dotted","double"],n=["px","rem","em","vw","%"];try{const r=(0,Is.getModuleSync)("jimu-ui"),o=null==r?void 0:r.FillType,i=null==r?void 0:r.NormalLineType,s=null==r?void 0:r.DistanceUnits;o&&(e=[o.FIT,o.FILL,o.CENTER,o.TILE,o.STRETCH]),i&&(t=[i.SOLID,i.DASHED,i.DOTTED,i.DOUBLE]),s&&(n=[s.PIXEL,s.REM,s.EM,s.VW,s.PERCENTAGE])}catch(e){console.error("get jimu-ui module error",e)}e||(e=["fit","fill","center","tile","stretch"]);t||(t=["solid","dashed","dotted","double"]);n||(n=["px","rem","em","vw","%"]);const r={background:{name:"background",type:"dictionary",properties:[{name:"color",type:"text"},{name:"fillType",type:"text",enums:e},{name:"image",type:"text"}]},text:{name:"text",type:"dictionary",properties:[{name:"size",type:"number"},{name:"color",type:"text"},{name:"bold",type:"boolean"},{name:"italic",type:"boolean"},{name:"underline",type:"boolean"},{name:"strike",type:"boolean"}]},border:{name:"border",type:"dictionary",properties:[{name:"border",type:"dictionary",properties:[{name:"type",type:"text",enums:t},{name:"color",type:"text"},{name:"width",type:"number"}]},{name:"borderLeft",type:"dictionary",properties:[{name:"type",type:"text",enums:t},{name:"color",type:"text"},{name:"width",type:"number"}]},{name:"borderRight",type:"dictionary",properties:[{name:"type",type:"text",enums:t},{name:"color",type:"text"},{name:"width",type:"number"}]},{name:"borderTop",type:"dictionary",properties:[{name:"type",type:"text",enums:t},{name:"color",type:"text"},{name:"width",type:"number"}]},{name:"borderBottom",type:"dictionary",properties:[{name:"type",type:"text",enums:t},{name:"color",type:"text"},{name:"width",type:"number"}]}]},borderRadius:{name:"borderRadius",type:"dictionary",properties:[{name:"unit",type:"text",enums:n},{name:"number",type:"array",elementType:{type:"number"},minCount:0,maxCount:1/0}]},icon:{name:"icon",type:"dictionary",properties:[{name:"name",type:"text"},{name:"position",type:"text",enums:["LEFT","RIGHT"]},{name:"size",type:"number"},{name:"color",type:"text"}]}};return r}();la.forEach((i=>{if(i in e)if("value"===i)"number"==typeof(s=e[i])||"string"==typeof s||s instanceof Date||(e[i]=null,r.valid=!1);else{const s=ya(o[i],e[i],t,n);e[i]=null==s?void 0:s.validValue;(null==s?void 0:s.valid)||(r.valid=!1)}var s}))}else r={valid:!1,invalidKeys:n,validValue:null};const o=r.validValue;o&&(null==t?void 0:t.length)>0&&ba(o,t)}catch(e){r={valid:!1,invalidKeys:n,validValue:null},console.error("validateArcadeScriptResult error",e)}const o=null==r?void 0:r.validValue,i=null==o?void 0:o.borderRadius;return i&&!i.unit&&(o.borderRadius=null),r||(r={valid:!1,invalidKeys:n,validValue:null}),r.invalidKeys||(r.invalidKeys=n),n.length>0&&(r.valid=!1),r.validValue&&Ia(r.validValue),r}function ya(e,t,n,r){var o;n=n?n.slice():[],r||(r=[]);let i=null;if(!e)return i={valid:!1,validValue:null},null;const s=e.type;if("dictionary"===s)if(wa(t)){const o=e.properties,s=o.map((e=>e.name));ba(t,s);let a=!0;o.forEach((o=>{const i=o.name;if(i in t){const s=ya(o,t[i],n.concat(e.name),r);t[i]=s.validValue,s.valid||(a=!1)}})),i={valid:a,validValue:t}}else i={valid:!1,validValue:null},Sa(n,e.name,r);else if("text"===s){const o=e.enums,s=(null==o?void 0:o.length)>0?function(e,t){return Oa(e)&&t.includes(e)}(t,o):Aa(t);s?i={valid:!0,validValue:t}:(i={valid:!1,validValue:null},Sa(n,e.name,r))}else if("number"===s)Ea(t)?i={valid:!0,validValue:t}:(i={valid:!1,validValue:null},Sa(n,e.name,r));else if("boolean"===s)Ca(t)?i={valid:!0,validValue:t}:(i={valid:!1,validValue:null},Sa(n,e.name,r));else if("array"===s){const s=e.minCount,a=e.maxCount,l=null===(o=e.elementType)||void 0===o?void 0:o.type;let u=!1;if(Array.isArray(t)){const e=t.length;(!(s>=0)||e>=s)&&(!(a>=0)||e<=a)&&(u=!(e>0)||("text"===l?t.every((e=>Oa(e))):"number"===l?t.every((e=>Ea(e))):"boolean"===l&&t.every((e=>Ca(e)))))}u?i={valid:!0,validValue:t}:(i={valid:!1,validValue:null},Sa(n,e.name,r))}return i||(i={valid:!1,validValue:null}),i}function Sa(e,t,n){const r=e.concat(t).join(".");n.push(r)}function Ia(e){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach&&e.forEach((e=>{Ia(e)}));else{Object.keys(e).forEach((t=>{const n=e[t];""===n||null==n?delete e[t]:Ia(n)}))}}function ba(e,t){Object.keys(e).forEach((n=>{t.includes(n)||delete e[n]}))}function wa(e){if(!e)return!1;if("object"!=typeof e||null===e)return!1;if(e.declaredClass)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function Ea(e){return"number"==typeof e&&!Number.isNaN(e)}function Aa(e){return"string"==typeof e}function Oa(e){return Aa(e)&&!!e}function Ca(e){return"boolean"==typeof e}function Ta(e,t){if(!t||0===t.length)return t;if(!e||0===e.length)return Na(t);const n=Na(t).asMutable({deep:!0});return e.forEach((e=>{var r,o;if(null===(r=null==e?void 0:e.useDataSources)||void 0===r?void 0:r.length){e.useDataSources.forEach((e=>{var r;if(null===(r=null==e?void 0:e.fields)||void 0===r?void 0:r.length){const r=e.dataSourceId&&t.asMutable({deep:!0}).findIndex((t=>t.dataSourceId===e.dataSourceId));n[r]&&(n[r]=Object.assign(Object.assign({},n[r]),{fields:Array.from(new Set((n[r].fields||[]).concat(e.fields)))}))}}))}else if((null==e?void 0:e.dataSourceId)&&(null==e?void 0:e.jimuFieldName)){let r;const i=e;r=(0,ls.isSelectionView)(i.dataSourceId)?i.dataSourceId&&t.asMutable({deep:!0}).findIndex((e=>e.mainDataSourceId===i.dataSourceId.replace(new RegExp(`-${oa.SELECTION_DATA_VIEW_ID}$`),""))):i.dataSourceId&&t.asMutable({deep:!0}).findIndex((e=>e.dataSourceId===i.dataSourceId)),n[r]&&!(null===(o=n[r].fields)||void 0===o?void 0:o.some((e=>e===i.jimuFieldName)))&&(n[r]=Object.assign(Object.assign({},n[r]),{fields:(n[r].fields||[]).concat(i.jimuFieldName)}))}})),y(n)}function xa(e){if(!e||0===e.length)return null;const t=[];return e.forEach((e=>{if(null==e?void 0:e.dataSourceId){const n=t.findIndex((t=>t.dataSourceId===e.dataSourceId));-1===n?t.push(Object.assign(Object.assign({},ls.getUseDataSourceByDataSourceId(e.dataSourceId)),{fields:e.jimuFieldName?[e.jimuFieldName]:[]})):e.jimuFieldName&&!t[n].fields.some((t=>t===e.jimuFieldName))&&t[n].fields.push(e.jimuFieldName)}})),y(t)}function Ra(e=y([]),t=y([])){let n=y([]),r=y({});const o=y(e.concat(t)),i={};return o.forEach((e=>{i[e.dataSourceId]||(i[e.dataSourceId]=o.filter((t=>e.dataSourceId===t.dataSourceId)))})),Object.keys(i).forEach((e=>{r=y({}),i[e].forEach((e=>{r=function(e,t){if(!e||!t)return e||t;if(e.dataSourceId&&t.dataSourceId&&e.dataSourceId!==t.dataSourceId)return console.warn("can not merge data sources with different id"),null;if(!e.dataSourceId&&!t.dataSourceId)return e;if(e.fields&&t.fields){const n=Array.from(new Set(e.fields.asMutable().concat(t.fields.asMutable())));return e.merge(t.asMutable({deep:!0})).set("fields",n)}return e.merge(t.asMutable({deep:!0}))}(r,e)})),n=y(n.concat(r))})),n}function Pa(e){if(!e||!e.parts)return!0;const t=e.parts.filter((e=>!!e)),n=t.some((e=>e.type===gs.Unknown));if(n)return!1;const r=t.filter((e=>e.type===gs.Operator&&"("===e.exp)).length===t.filter((e=>e.type===gs.Operator&&")"===e.exp)).length;if(!r)return!1;const o=t.filter((e=>!(e.type===gs.Operator&&("("===e.exp||")"===e.exp||/^\s*$/.test(e.exp))||e.type===gs.Function)));let i=!0;for(let e=0;e<o.length;e++)if((e%2==0||e===o.length-1)&&o[e].type===gs.Operator||e%2==1&&o[e].type!==gs.Operator){i=!1;break}if(!i)return!1;let s=!0;for(let e=0;e<t.length;e++)if(t[e].type===gs.Function&&!Da(t[e])||t[e].type===gs.Field&&!_a(t[e].dataSourceId,t[e].jimuFieldName,t[e].exp.replace(/^\{/,"").replace(/\}$/,""))){s=!1;break}if(!s)return!1;const a=Ys(t),l=!a.some((e=>e.type===gs.Operator&&","===e.exp));if(!l)return!1;const u=a.every((e=>{var t;if(e.type===gs.Function){if(e.exp===ms.Count){if(e.parts&&1===e.parts.length&&e.parts[0].type===gs.Field){const t=Cs.A.getInstance().getDataSource(e.parts[0].dataSourceId),n=t&&t.getSchema(),r=e.parts[0].jimuFieldName;return!!(n&&n.fields&&n.fields[r])}return(!e.parts||0===e.parts.length)&&!!e.dataSourceId}if(e.exp===ms.PercentileContinuous||e.exp===ms.PercentileDiscrete){if((null===(t=e.parts)||void 0===t?void 0:t.length)>2){const t=Cs.A.getInstance().getDataSource(e.parts[0].dataSourceId),n=t&&t.getSchema(),r=e.parts[0].jimuFieldName,o=n&&n.fields&&n.fields[r];if(o&&o.type===Os.Eo.Number){const t=e.parts.find((e=>e.type===gs.Number));if(!t)return!1;const n=parseInt(t.exp);return!(n<0||n>100)&&e.parts.filter((e=>!/^\s*$/.test(null==e?void 0:e.exp))).every(((e,t)=>{if(t%2==1)return","===e.exp;{const n=[gs.Field,gs.Number,gs.Order];return e.type===n[t/2]}}))}return!1}return!1}if(Object.keys(ms).some((t=>e.exp===ms[t]))){if(e.parts&&1===e.parts.length&&e.parts[0].type===gs.Field){const t=e.exp===ms.Min||e.exp===ms.Max,n=Cs.A.getInstance().getDataSource(e.parts[0].dataSourceId),r=n&&n.getSchema(),o=e.parts[0].jimuFieldName,i=r&&r.fields&&r.fields[o],s=i&&i.type===Os.Eo.Number,a=i&&i.type===Os.Eo.Date;return s||t&&a}return!1}return!1}return!0}));return!n&&r&&i&&s&&l&&u}function Da(e){return!(!e||e.type!==gs.Function)&&Object.keys(ms).some((t=>ms[t]===e.exp))}function _a(e,t,n){if(!e||!t)return!1;const r=Cs.A.getInstance().getDataSource(e),o=r&&r.getSchema&&r.getSchema(),i=o&&o.fields;return!!i&&!(!i[t]||n!==(i[t].alias||i[t].name))}function La(e){var t,n;return 1===(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)&&(null===(n=e.parts[0])||void 0===n?void 0:n.type)===Es.Arcade}!function(e){e.FeatureProfile="FEATURE_PROFILE",e.DataSourcesProfile="DATASOURCES_PROFILE"}(ua||(ua={}));const Ma=e=>{var t,n;return 1===(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)&&(null===(n=e.parts[0])||void 0===n?void 0:n.type)===gs.String},ka=e=>{var t,n,r;return Ma(e)?null===(r=null===(n=null===(t=e.parts)||void 0===t?void 0:t[0])||void 0===n?void 0:n.exp)||void 0===r?void 0:r.replace(/(^\"|\"$)/g,""):""},Na=e=>null==e?void 0:e.map((e=>null==e?void 0:e.set("fields",[]).asMutable({deep:!0}))),ja=e=>null==e?void 0:e.some((e=>{var t;return!!(null===(t=e.fields)||void 0===t?void 0:t.length)}));function Ua(e){return(null==e?void 0:e.parts)?Array.from(new Set(e.parts.map((e=>null==e?void 0:e.dataSourceId)).filter((e=>!!e)))):[]}function Fa(e,t){if(t!==ms.PercentileContinuous&&t!==ms.PercentileDiscrete)return null;const n=e.find((e=>e.type===gs.Number)),r=e.find((e=>e.type===gs.Order));return n?{value:parseFloat(n.exp),orderBy:null==r?void 0:r.exp}:{value:0}}function Ba(e,t,n,r,o){var i;const s=(null===(i=null==e?void 0:e.asMutable)||void 0===i?void 0:i.call(e,{deep:!0}))||e;if(!s||!s.parts)return s;const a=s.parts.map((e=>{if(e.dataSourceId===t){const t=Object.assign(Object.assign({},e),{dataSourceId:n});return e.isFromRepeatedDataSourceContext&&!(e=>{var t,r,i,s;if(e&&o){const a=Is.getModuleSync("jimu-layouts/layout-runtime"),l=null===(t=null==a?void 0:a.searchUtils)||void 0===t?void 0:t.getParentWidgetIdOfContent(o,e,ia.K.Widget,null===(r=null==a?void 0:a.utils)||void 0===r?void 0:r.getCurrentSizeMode());if(l){const e=null===(i=o.widgets)||void 0===i?void 0:i[l];if(null===(s=null==e?void 0:e.useDataSources)||void 0===s?void 0:s.some((e=>e.dataSourceId===n)))return!0}}return!1})(r)&&delete t.isFromRepeatedDataSourceContext,t}return e}));return Object.assign(Object.assign({},s),{parts:a})}function $a(e,t,n){var r,o;return(null===(r=null==t?void 0:t.parts)||void 0===r?void 0:r.length)&&e?La(t)?function(e,t,n){var r,o,i,s;if(!(null===(r=null==t?void 0:t.parts)||void 0===r?void 0:r.length)||!e)return{isChanged:!1,expression:null===(o=null==t?void 0:t.asMutable)||void 0===o?void 0:o.call(t,{deep:!0})};let a=!1;const l=null===(i=null==t?void 0:t.asMutable)||void 0===i?void 0:i.call(t,{deep:!0});return null===(s=null==l?void 0:l.parts)||void 0===s||s.forEach((t=>{var r;if(t){const o=t.exp;t.exp=ma(e,n,o),t.exp!==o&&(a=!0),(null===(r=t.useDataSources)||void 0===r?void 0:r.length)>0&&t.useDataSources.forEach(((n,r)=>{const o=ls.mapUseDataSource(e,n);if(o.isChanged){a=!0;const e=o.useDataSource||n;t.useDataSources[r]=e}}))}})),{isChanged:a,expression:l}}(e,t,n):function(e,t){var n,r;if(!(null===(n=null==t?void 0:t.parts)||void 0===n?void 0:n.length)||!e)return{isChanged:!1,expression:null===(r=null==t?void 0:t.asMutable)||void 0===r?void 0:r.call(t,{deep:!0})};let o=!1;const i=t.parts.asMutable({deep:!0});return t.parts.forEach(((t,n)=>{if(!t.dataSourceId)return;const r=Object.keys(e).find((e=>(0,ls.areDerivedFromSameMain)(t.dataSourceId,e))),s=e[r];s&&s!==r&&(o=!0,i[n]=Object.assign(Object.assign({},i[n]),{dataSourceId:t.dataSourceId.replace(r,s)}))})),{isChanged:o,expression:Object.assign(Object.assign({},t),{parts:i})}}(e,t):{isChanged:!1,expression:null===(o=null==t?void 0:t.asMutable)||void 0===o?void 0:o.call(t,{deep:!0})}}function Va(e){return La(e)?y({id:e.id,title:e.name||"",scriptContent:e.parts[0].exp,valueType:e.parts[0].valueType,icons:[]}):null}function Ga(e){var t;return e?{id:e.id,name:e.title,parts:[{type:Es.Arcade,exp:e.scriptContent,valueType:e.valueType,useDataSources:null===(t=e.useDataSources)||void 0===t?void 0:t.asMutable({deep:!0})}]}:{name:"",parts:[]}}var Wa,Ha,qa,za,Ka,Ja,Ya,Qa,Xa,Za=s(5157),el=s(5074);function tl(e,t){return t===Os.Eo.Number?Number.isNaN(Number(e))?null:`${e}`:t===Os.Eo.Date?Number.isNaN(Number(e))?`${e}`:Number(e):t===Os.Eo.DateOnly||t===Os.Eo.TimeOnly||t===Os.Eo.String?null===e?null:`${e}`:void 0}function nl(e,t,n,r){if(t.type===Os.Eo.Date){const r=e.map((e=>ls.createSQLClause(t.jimuName,el.a0.DateOperatorIsOn,[{value:e,label:e+"",isUTC:!0}]))),o=ls.createSQLClauseSet(el.Mg.Or,r);return ls.createSQLExpression(el.Mg.Or,[o],n)}if(t.type===Os.Eo.DateOnly||t.type===Os.Eo.TimeOnly){const r=e.map((e=>{const n=t.type===Os.Eo.DateOnly?el.a0.DateOnlyOperatorIsOn:el.a0.TimeOnlyOperatorIsOn;return ls.createSQLClause(t.jimuName,n,[{value:e,label:e+""}])})),o=ls.createSQLClauseSet(el.Mg.Or,r);return ls.createSQLExpression(el.Mg.Or,[o],n)}{let o;switch(t.type){case Os.Eo.Number:o=el.a0.NumberOperatorIsAnyOf;break;case Os.Eo.String:o=el.a0.StringOperatorIsAnyOf}const i=[],s=[];if(e.forEach((e=>{if(null!==e)s.push({value:e,label:e+""});else{const e=`(${t.jimuName} IN (null))`;i.push({customSQL:e,customDisplaySQL:e})}})),s.length>0){const e=ls.createSQLClause(t.jimuName,o,s,r);i.push(e)}return ls.createSQLExpression(el.Mg.Or,i,n)}}function rl(e){const t=null==e?void 0:e.parts;if(1===(null==t?void 0:t.length)){const e=t[0];if((null==e?void 0:e.type)===gs.Field)return!0}return!1}function ol(e){var t,n,r,o,i,s;const a=null==e?void 0:e.parts;return 4===(null==a?void 0:a.length)&&(null===(t=a[0])||void 0===t?void 0:t.type)===gs.Function&&(null===(n=a[1])||void 0===n?void 0:n.type)===gs.Operator&&"("===(null===(r=a[1])||void 0===r?void 0:r.exp)&&(null===(o=a[2])||void 0===o?void 0:o.type)===gs.Field&&(null===(i=a[3])||void 0===i?void 0:i.type)===gs.Operator&&")"===(null===(s=a[3])||void 0===s?void 0:s.exp)}function il(e){const t=null==e?void 0:e.parts;if(1===(null==t?void 0:t.length)){const e=t[0];if((null==e?void 0:e.type)===Es.Arcade)return!0}return!1}function sl(e){var t;return(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)>0&&!rl(e)&&!ol(e)&&!il(e)}function al(e){if(e)try{return ea(e)}catch(t){return console.error("getExpressionReturnType error",e,t),null}return null}!function(e){e.Average="AVERAGE",e.Count="COUNT",e.Sum="SUM",e.Max="MAX",e.Min="MIN"}(Wa||(Wa={})),function(e){e.ImportFromDynamicContent="IMPORT_FROM_DYNAMIC_CONTENT",e.CustomAttribute="CUSTOM_ATTRIBUTE",e.CustomStatistics="CUSTOM_STATISTICS"}(Ha||(Ha={})),function(e){e.CustomAttribute="CUSTOM_ATTRIBUTE",e.CustomStatistics="CUSTOM_STATISTICS"}(qa||(qa={})),function(e){e.StringOperatorIs="STRING_OPERATOR_IS",e.StringOperatorIsNot="STRING_OPERATOR_IS_NOT",e.StringOperatorContains="STRING_OPERATOR_CONTAINS",e.StringOperatorIsBlank="STRING_OPERATOR_IS_BLANK",e.StringOperatorIsNotBlank="STRING_OPERATOR_IS_NOT_BLANK",e.NumberOperatorIs="NUMBER_OPERATOR_IS",e.NumberOperatorIsNot="NUMBER_OPERATOR_IS_NOT",e.NumberOperatorIsGreaterThan="NUMBER_OPERATOR_IS_GREATER_THAN",e.NumberOperatorIsLessThan="NUMBER_OPERATOR_IS_LESS_THAN",e.NumberOperatorIsBetween="NUMBER_OPERATOR_IS_BETWEEN"}(za||(za={})),function(e){e.UserInput="USER_INPUT",e.Field="FIELD",e.Unique="UNIQUE",e.Statistics="STATISTICS"}(Ka||(Ka={})),function(e){e.Left="LEFT",e.Right="RIGHT"}(Ja||(Ja={})),function(e){e.Background="BACKGROUND",e.Text="TEXT",e.Border="BORDER",e.BorderRadius="BorderRadius",e.Icon="ICON"}(Ya||(Ya={})),function(e){e.Condition="CONDITION",e.Arcade="ARCADE"}(Qa||(Qa={})),function(e){e.Attribute="Attribute",e.Statistics="Statistics",e.Arcade="Arcade",e.Common="Common"}(Xa||(Xa={}));const ll={[za.StringOperatorIs]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Unique]},[za.StringOperatorIsNot]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Unique]},[za.StringOperatorContains]:{supportedConditionSourceTypes:[Ka.UserInput]},[za.StringOperatorIsBlank]:{supportedConditionSourceTypes:[]},[za.StringOperatorIsNotBlank]:{supportedConditionSourceTypes:[]},[za.NumberOperatorIs]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Unique,Ka.Statistics]},[za.NumberOperatorIsNot]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Unique,Ka.Statistics]},[za.NumberOperatorIsGreaterThan]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Unique,Ka.Statistics]},[za.NumberOperatorIsLessThan]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Unique,Ka.Statistics]},[za.NumberOperatorIsBetween]:{supportedConditionSourceTypes:[Ka.UserInput]}},ul={[za.NumberOperatorIs]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsNot]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsGreaterThan]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsLessThan]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsBetween]:{supportedConditionSourceTypes:[Ka.UserInput]}},cl={[za.StringOperatorIs]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field]},[za.StringOperatorIsNot]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field]},[za.StringOperatorContains]:{supportedConditionSourceTypes:[Ka.UserInput]},[za.StringOperatorIsBlank]:{supportedConditionSourceTypes:[]},[za.StringOperatorIsNotBlank]:{supportedConditionSourceTypes:[]},[za.NumberOperatorIs]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsNot]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsGreaterThan]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsLessThan]:{supportedConditionSourceTypes:[Ka.UserInput,Ka.Field,Ka.Statistics]},[za.NumberOperatorIsBetween]:{supportedConditionSourceTypes:[Ka.UserInput]}};function dl(e,t){let n=null;const r=function(e,t){if(!e||!t)return null;let n=null;return e===Xa.Attribute?n=ll[t]:e===Xa.Statistics?n=ul[t]:(e===Xa.Arcade||e===Xa.Common)&&(n=cl[t]),n}(e,t);return r&&r.supportedConditionSourceTypes&&(n=r.supportedConditionSourceTypes.slice()),n||(n=[]),n}function pl(e,t){let n=null;if(e&&t){const r=function(e){if(e){if(rl(e))return Xa.Attribute;if(ol(e))return Xa.Statistics;if(il(e))return Xa.Arcade;if(sl(e))return Xa.Common}return null}(e);r&&t&&(n=dl(r,t))}return n||(n=[]),n}function fl(e,t){if(t){const{operator:n,sourceType:r,valueOptions:o}=t;if(n){const t=function(e,t,n){if(t){if(t===za.StringOperatorIsBlank||t===za.StringOperatorIsNotBlank)return!0;const r=pl(e,t);return r.length>=0?r.includes(n):!n}return!1}(e,n,r);if(t){return hl(n,r,o)}}}return!1}function hl(e,t,n){const r=e===za.NumberOperatorIs||e===za.NumberOperatorIsNot||e===za.NumberOperatorIsGreaterThan||e===za.NumberOperatorIsLessThan;if(!t)return!0;if(t===Ka.UserInput){if(e===za.StringOperatorIs||e===za.StringOperatorIsNot||e===za.StringOperatorContains)return gl(n);if(r)return ml(n);if(e===za.NumberOperatorIsBetween)return function(e){if(e){const t=e.value;if(t&&2===t.length){return t.every((e=>!(!e||"number"!=typeof e.value)))}}return!1}(n)}else if(t===Ka.Unique){if(e===za.StringOperatorIs||e===za.StringOperatorIsNot)return gl(n);if(r)return ml(n)}else if(t===Ka.Field){if(e===za.StringOperatorIs||e===za.StringOperatorIsNot||r)return function(e){if(e&&e.expression&&rl(e.expression))return!0;return!1}(n)}else if(t===Ka.Statistics&&r)return function(e){if(e&&e.expression&&ol(e.expression))return!0;return!1}(n);return!1}function gl(e){if(e){const t=e.value;if(t&&1===t.length){const e=t[0];if(e&&e.value)return!0}}return!1}function ml(e){if(e){const t=e.value;if(t&&1===t.length){const e=t[0];if(e&&"number"==typeof e.value)return!0}}return!1}function vl(e,t){if(!e||!t||0===t.length)return t;let n=t;return n=e.sourceType===Qa.Arcade?function(e,t){const n=null==e?void 0:e.useDataSources;if((null==n?void 0:n.length)>0)return t||(t=y([])),Ra(t,n);return t}(e.arcadeConfig,t):function(e,t){if(!e||!t||0===t.length)return t;const n=[],{refValueInfo:r,items:o}=e,i=null==r?void 0:r.expression;i&&n.push(i);(null==o?void 0:o.length)>0&&o.forEach((e=>{var t,r;const o=null===(r=null===(t=null==e?void 0:e.condition)||void 0===t?void 0:t.valueOptions)||void 0===r?void 0:r.expression;o&&n.push(o)}));const s=[];n.length>0&&n.forEach((e=>{const t=null==e?void 0:e.parts;(null==t?void 0:t.length)>0&&t.forEach((e=>{e&&s.push(e)}))}));const a=Ta(s,t);return a}(e.conditionConfig,t),n||(n=t),n}function yl(e,t,n,r){if(!r||!n||0===n.length)return null;const o=[],i=[];(null==t?void 0:t.length)>0&&t.forEach((e=>{const t=null==e?void 0:e.dataSourceId;t&&o.push(t)})),(null==n?void 0:n.length)>0&&n.forEach((e=>{const t=null==e?void 0:e.dataSourceId;t&&i.push(t)}));const{deleted:s}=(0,Ti.diffArrays)(!0,o,i);if(0===s.length)return r;return 1===(null==t?void 0:t.length)&&1===(null==n?void 0:n.length)?function(e,t,n,r){if(!t||!n||!r)return null;const o=t.mainDataSourceId,i=t.dataSourceId,s=n.mainDataSourceId,a=n.dataSourceId;if(!(o&&i&&s&&a))return null;if(a===i)return r;if(s!==o)return null;const l=r.sourceType;if(l!==Qa.Arcade&&l!==Qa.Condition)return null;const u=r.asMutable({deep:!0}),c=function(e,t){const n=da(e);return n?t:null}(e,u.arcadeConfig),d=function(e,t,n){if(n){const{expressionParts:r,hasArcadeExpression:o}=Sl(n);if(o)return null;r.forEach((n=>{n&&n.dataSourceId&&n.dataSourceId===e&&(n.dataSourceId=t)}))}return n}(i,a,u.conditionConfig);let p=null;l===Qa.Arcade?c&&(p={sourceType:l,arcadeConfig:c,conditionConfig:d}):l===Qa.Condition&&d&&(p={sourceType:l,arcadeConfig:c,conditionConfig:d});return p?y(p):null}(e,t[0],n[0],r):function(e,t){if(!t||!e||0===e.length)return null;const n=t.sourceType;if(n!==Qa.Arcade&&n!==Qa.Condition)return null;const r=t.asMutable({deep:!0}),o=null,i=function(e,t){if(t){const{expressionParts:n,hasArcadeExpression:r}=Sl(t);if(r)return null;let o=[];n.length>0&&n.forEach((e=>{const t=null==e?void 0:e.dataSourceId;t&&o.push(t)})),o=Array.from(new Set(o));let i=[];e.forEach((e=>{if(e){const t=e.dataSourceId;if(t&&(i.push(t),t===e.mainDataSourceId&&!e.dataViewId)){const t=`${e.mainDataSourceId}-${oa.SELECTION_DATA_VIEW_ID}`;i.push(t)}}})),i=Array.from(new Set(i));return o.every((e=>i.includes(e)))?t:null}return null}(e,r.conditionConfig);let s=null;n===Qa.Arcade?o&&(s={sourceType:n,arcadeConfig:o,conditionConfig:i}):n===Qa.Condition&&i&&(s={sourceType:n,arcadeConfig:o,conditionConfig:i});return s?y(s):null}(n,r)}function Sl(e){const t=[],n=[];let r=!1;if(e){const{refValueInfo:n,items:r}=e;(null==n?void 0:n.expression)&&t.push(n.expression),(null==r?void 0:r.length)>0&&r.forEach((e=>{var n,r;const o=null===(r=null===(n=null==e?void 0:e.condition)||void 0===n?void 0:n.valueOptions)||void 0===r?void 0:r.expression;o&&t.push(o)}))}t.length>0&&(r=t.some((e=>il(e))),t.forEach((e=>{const t=null==e?void 0:e.parts;(null==t?void 0:t.length)>0&&n.push(...t)})));return{expressions:t,expressionParts:n,hasArcadeExpression:r}}function Il(e,t,n){if(e&&n){if(n.arcadeConfig){const r=ga(e,t,n.arcadeConfig);n=n.set("arcadeConfig",r)}if(n.conditionConfig){const r=function(e,t,n){if(!e||!n)return n;const r=n.asMutable({deep:!0}),{refValueInfo:o,items:i}=r;(null==o?void 0:o.expression)&&(o.expression=bl(e,t,o.expression));(null==i?void 0:i.length)>0&&i.forEach((n=>{var r;const o=null===(r=null==n?void 0:n.condition)||void 0===r?void 0:r.valueOptions;(null==o?void 0:o.expression)&&(o.expression=bl(e,t,o.expression))}));return y(r)}(e,t,n.conditionConfig);n=n.set("conditionConfig",r)}}return n}function bl(e,t,n){if(!e||!n)return n;const r=$a(e,y(n),t);let o=r.isChanged?r.expression:n;return o||(o=n),o}var wl,El,Al=s(4184),Ol=s(6417);function Cl(){var e=f.useContext(Ol.ob);return(0,Al.HM)(e),e}!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(wl||(wl={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(El||(El={}));var Tl=function(e){var t=Cl(),n=e.value,r=e.children,o=(0,uo.Tt)(e,["value","children"]);return r(t.formatNumberToParts(n,o))};Tl.displayName="FormattedNumberParts";function xl(e){var t=function(t){var n=Cl(),r=t.value,o=t.children,i=(0,uo.Tt)(t,["value","children"]),s="string"==typeof r?new Date(r||0):r;return o("formatDate"===e?n.formatDateToParts(s,i):n.formatTimeToParts(s,i))};return t.displayName=El[e],t}function Rl(e){var t=function(t){var n=Cl(),r=t.value,o=t.children,i=(0,uo.Tt)(t,["value","children"]),s=n[e](r,i);if("function"==typeof o)return o(s);var a=n.textComponent||f.Fragment;return f.createElement(a,null,s)};return t.displayName=wl[e],t}Tl.displayName="FormattedNumberParts";var Pl=Rl("formatDate"),Dl=Rl("formatTime"),_l=Rl("formatNumber");Rl("formatList"),Rl("formatDisplayName"),xl("formatDate"),xl("formatTime");function Ll(e){var t=Cl(),n=t.formatMessage,r=t.textComponent,o=void 0===r?f.Fragment:r,i=e.id,s=e.description,a=e.defaultMessage,l=e.values,u=e.children,c=e.tagName,d=void 0===c?o:c,p=n({id:i,description:s,defaultMessage:a},l,{ignoreTag:e.ignoreTag});return"function"==typeof u?u(Array.isArray(p)?p:[p]):d?f.createElement(d,null,f.Children.toArray(p)):f.createElement(f.Fragment,null,p)}Ll.displayName="FormattedMessage";var Ml=f.memo(Ll,(function(e,t){var n=e.values,r=(0,uo.Tt)(e,["values"]),o=t.values,i=(0,uo.Tt)(t,["values"]);return(0,Al.bN)(o,n)&&(0,Al.bN)(r,i)}));Ml.displayName="MemoizedFormattedMessage";const kl=Ml;var Nl=function(e){var t=Cl(),n=t.formatPlural,r=t.textComponent,o=e.value,i=e.other,s=e.children,a=e[n(o,e)]||i;return"function"==typeof s?s(a):r?f.createElement(r,null,a):a};Nl.displayName="FormattedPlural";const jl=Nl;var Ul=3600;function Fl(e){var t=Math.abs(e);return t<60?"second":t<Ul?"minute":t<86400?"hour":"day"}function Bl(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return Ul;default:return 86400}}var $l=["second","minute","hour"];function Vl(e){return void 0===e&&(e="second"),$l.indexOf(e)>-1}var Gl=function(e){var t=Cl(),n=t.formatRelativeTime,r=t.textComponent,o=e.children,i=n(e.value||0,e.unit,(0,uo.Tt)(e,["children","value","unit"]));return"function"==typeof o?o(i):r?f.createElement(r,null,i):f.createElement(f.Fragment,null,i)},Wl=function(e){var t=e.value,n=void 0===t?0:t,r=e.unit,o=void 0===r?"second":r,i=e.updateIntervalInSeconds,s=(0,uo.Tt)(e,["value","unit","updateIntervalInSeconds"]);(0,Al.V1)(!i||!(!i||!Vl(o)),"Cannot schedule update with unit longer than hour");var a,l=f.useState(),u=l[0],c=l[1],d=f.useState(0),p=d[0],h=d[1],g=f.useState(0),m=g[0],v=g[1];o===u&&n===p||(h(n||0),c(o),v(Vl(o)?function(e,t){if(!e)return 0;switch(t){case"second":return e;case"minute":return 60*e;default:return e*Ul}}(n,o):0)),f.useEffect((function(){function e(){clearTimeout(a)}if(e(),!i||!Vl(o))return e;var t=m-i,n=Fl(t);if("day"===n)return e;var r=Bl(n),s=t-t%r,l=s>=m?s-r:s,u=Math.abs(l-m);return m!==l&&(a=setTimeout((function(){return v(l)}),1e3*u)),e}),[m,i,o]);var y=n||0,S=o;if(Vl(o)&&"number"==typeof m&&i){var I=Bl(S=Fl(m));y=Math.round(m/I)}return f.createElement(Gl,(0,uo.Cl)({value:y,unit:S},s))};Wl.displayName="FormattedRelativeTime";const Hl=Wl;var ql,zl=s(2265),Kl=s(8857),Jl=s(7683),Yl=s(6917),Ql=s(9359),Xl=s(4902);!function(e){e.UseLayersRelationship="USE_LAYERS_RELATIONSHIP",e.SetCustomFields="SET_CUSTOM_FIELDS"}(ql||(ql={}));var Zl=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class eu{upgrade(e,t,n,r){return Zl(this,void 0,void 0,(function*(){const o=this.checkVersions(t,n);if(!o)return e;const[i,s]=o;if(i===s)return this.versions[s].upgrader(e,r);const a=e,l=this.versions.slice(i+1,s+1).filter((e=>null==e?void 0:e.upgrader));return l.reduce(((e,t)=>Zl(this,void 0,void 0,(function*(){const n=yield e;return t.upgrader(n,r)}))),Promise.resolve(a))}))}checkVersions(e,t){if(!E.valid(e)||!E.valid(t))return!1;if(!this.checkVersion())return!1;const n=this.getVersionIndex(e),r=this.getVersionIndex(t);return n>r?(console.error("New version should higher than old version."),!1):n===r?!!this.versions[r]&&[n,r]:[n,r]}getVersionIndex(e){const t=this.versions.findIndex((t=>E.eq(e,t.version)));if(t>-1)return t;for(let t=0;t<this.versions.length-1;t++)if(E.gt(e,this.versions[t].version)&&E.lt(e,this.versions[t+1].version))return t;return E.lt(e,this.versions[0].version)?-1:E.gt(e,this.versions[this.versions.length-1].version)?this.versions.length:void 0}checkVersion(){for(let e=0;e<this.versions.length-1;e++){if(!E.valid(this.versions[e].version))return console.error("Invalid version.",this.versions[e].version),!1;if(E.gt(this.versions[e].version,this.versions[e+1].version))return console.error("Version order error.",this.versions[e].version,this.versions[e+1]),!1}return!0}}class tu extends eu{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"First release.",upgrader:e=>{let t=e;return delete t.widgetsManifest,t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{var n;const r=e.widgets[t];"widgets/common/controller/"===r.uri&&(null===(n=r.layouts)||void 0===n?void 0:n.openwidget)&&(r.layouts._openwidget=r.layouts.openwidget,delete r.layouts.openwidget)})),e))(t),t=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var n,r;Object.keys(null!==(r=null===(n=e.layouts[t])||void 0===n?void 0:n.content)&&void 0!==r?r:{}).forEach((n=>{var r,o,i,s;const a=e.layouts[t].content[n];if(null===(r=null==a?void 0:a.setting)||void 0===r?void 0:r.fitContainer){a.setting.heightMode="fit";const e=null!==(o=a.setting.autoProps)&&void 0!==o?o:{};e.height="STRETCH",a.setting.autoProps=e,delete a.setting.fitContainer}if(null===(i=null==a?void 0:a.setting)||void 0===i?void 0:i.autoHeight){const e=null!==(s=a.setting.autoProps)&&void 0!==s?s:{},t=a.bbox;null!=t.top&&null!=t.bottom?e.height="STRETCH":e.height="AUTO",a.setting.autoProps=e,delete a.setting.autoHeight}}))})),e})(t),t}},{version:"1.1.0",description:"1.1.0",upgrader:e=>Zl(this,void 0,void 0,(function*(){const t=e=>{var t;return Object.keys(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var n;const r=null===(n=e.messageConfigs[t])||void 0===n?void 0:n.actions,o=e.widgets||{};r&&r.forEach((e=>{var t,n,r,i,s,a;if("widgets/common/list/"===(null===(t=o[null==e?void 0:e.widgetId])||void 0===t?void 0:t.uri)){if(e.config=e.config||{},e.config.actionUseDataSource&&e.config.actionUseDataSource.dataSourceId){const t=null===(n=e.config.actionUseDataSource)||void 0===n?void 0:n.fields;e.config.actionUseDataSource=null===(r=o[e.widgetId])||void 0===r?void 0:r.useDataSources[0],e.config.actionUseDataSource.fields=t}if(e.config.messageUseDataSource&&e.config.messageUseDataSource.dataSourceId)if("widgets/common/list/"===(null===(i=o[null==e?void 0:e.messageWidgetId])||void 0===i?void 0:i.uri)){const t=null===(s=e.config.messageUseDataSource)||void 0===s?void 0:s.fields;e.config.messageUseDataSource=null===(a=o[e.messageWidgetId])||void 0===a?void 0:a.useDataSources[0],e.config.messageUseDataSource.fields=t}else e.config.messageUseDataSource.mainDataSourceId=e.config.messageUseDataSource.dataSourceId;e.actionId=e.actionId.replace(`${e.widgetId}-filter`,"filter-data-record-action"),e.actionName=e.actionName.replace("filter","filter data record action"),e.version="1.1.0",delete e.widgetId}}))})),e},n=(e,t,n,r)=>{var o;return Object.keys(null!==(o=e.widgets)&&void 0!==o?o:{}).forEach((o=>{const i=(e,t,n)=>{const o=(null==t?void 0:t.parts)&&(null==t?void 0:t.parts[e]);if(!o)return null;if(o.type===gs.Field){const i=e>0?t.parts[e-1]:null,s=e>1?t.parts[e-2]:null,a=t.parts[e+1];if((null==s?void 0:s.type)===gs.Function&&"("===(null==i?void 0:i.exp)&&")"===(null==a?void 0:a.exp))return o;if(n&&o.dataSourceId===n)o.isFromRepeatedDataSourceContext=!0;else if(o.dataSourceId&&!o.isFromRepeatedDataSourceContext){const e=0===o.dataSourceId.split("-").reverse()[0].indexOf(r)?o.dataSourceId.split("-").reverse().slice(1).reverse().join("-"):o.dataSourceId;o.dataSourceId=`${e}-${oa.SELECTION_DATA_VIEW_ID}`}}return o},s=(e,t)=>{var r,o,s,a;if("widgets/common/image/"===e.uri||"widgets/common/button/"===e.uri){let n=[];n="widgets/common/image/"===e.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],n.forEach((n=>{var r,o,s;const a=n.split("."),l=1===a.length?(null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.functionConfig)&&e.config.functionConfig[a[0]]:(null===(o=null==e?void 0:e.config)||void 0===o?void 0:o.functionConfig)&&e.config.functionConfig[a[0]]&&e.config.functionConfig[a[0]][a[1]];null===(s=null==l?void 0:l.parts)||void 0===s||s.forEach(((e,n)=>{i(n,l,t)}))}))}else"widgets/common/embed/"===e.uri?null===(s=null===(o=null===(r=null==e?void 0:e.config)||void 0===r?void 0:r.expression)||void 0===o?void 0:o.parts)||void 0===s||s.forEach(((n,r)=>{i(r,e.config.expression,t)})):"widgets/common/text/"===e.uri&&(null===(a=e.config)||void 0===a?void 0:a.text)&&(e.config.text=n.editExpressionPart(e.config.text,((e,n)=>i(e,n,t))));return e};let a=e.widgets[o];if("widgets/common/list/"===a.uri){t.getChildrenContents(e,o,ia.K.Widget,!0).forEach((t=>{const n=(null==a?void 0:a.useDataSources)&&a.useDataSources[0]&&a.useDataSources[0].dataSourceId;e.widgets[t]=s(e.widgets[t],n)}))}else a=s(a)})),e};return Promise.all([(0,Is.loadModule)("jimu-layouts/layout-runtime"),(0,Is.loadModule)("jimu-ui")]).then((r=>{const[o,i]=r;let s=e;return s=(e=>{var t;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((t=>{var n;const r=e.dataSources[t];"FEATURE_QUERY"===r.type?r.type=Ts.hg.FeatureLayer:r.isOutputFromWidget&&(null===(n=null==r?void 0:r.originDataSources)||void 0===n||n.forEach((e=>{e.mainDataSourceId=e.dataSourceId})))})),e})(s),s=((e,r,o)=>{var i;const s=(0,Vi.getIntl)().formatMessage({id:"upgradedFrom"}),a="_from_10_";return Object.keys(null!==(i=e.widgets)&&void 0!==i?i:{}).forEach((t=>{var n;const o=e.widgets[t];(null!==(n=o.useDataSources)&&void 0!==n?n:[]).forEach(((n,i)=>{var l,u,c,d,p,f;if(n.query||"widgets/arcgis/feature-info/"===o.uri&&(null===(l=o.config)||void 0===l?void 0:l.limitGraphics)||"widgets/common/list/"===o.uri){const l=`${a}${t}_${i}`,h=e.dataSources||{},g={id:l,label:s,where:null===(u=n.query)||void 0===u?void 0:u.where,orderBy:null===(d=null===(c=n.query)||void 0===c?void 0:c.orderBy)||void 0===d?void 0:d.filter((e=>!!(null==e?void 0:e.jimuFieldName))),maximum:"widgets/arcgis/feature-info/"===o.uri?null===(p=o.config)||void 0===p?void 0:p.maxGraphics:"widgets/common/list/"===o.uri&&(null===(f=o.config)||void 0===f?void 0:f.maxItems)},m=n.dataSourceId,v=n.rootDataSourceId,y=`${m}-${l}`;if(n.dataSourceId=y,n.mainDataSourceId=m,n.dataViewId=l,r.getChildrenContents(e,t,ia.K.Widget,!0).forEach((t=>{var n;const r=e.widgets[t];if((null!==(n=r.useDataSources)&&void 0!==n?n:[]).forEach(((e,t)=>{e.dataSourceId===m&&(e.dataSourceId=y,e.mainDataSourceId=m,e.dataViewId=l)})),"widgets/common/image/"===r.uri||"widgets/common/button/"===r.uri){let e=[];e="widgets/common/image/"===r.uri?["altTextExpression","srcExpression","toolTipExpression","linkParam.expression"]:["textExpression","toolTipExpression","linkParam.expression"],e.forEach((e=>{var t,n,o;const i=e.split("."),s=1===i.length?(null===(t=null==r?void 0:r.config)||void 0===t?void 0:t.functionConfig)&&r.config.functionConfig[i[0]]:(null===(n=null==r?void 0:r.config)||void 0===n?void 0:n.functionConfig)&&r.config.functionConfig[i[0]]&&r.config.functionConfig[i[0]][i[1]];null===(o=null==s?void 0:s.parts)||void 0===o||o.forEach((e=>{e.dataSourceId===m&&(e.dataSourceId=y)}))}))}else"widgets/common/text/"===r.uri&&(r.config.text=r.config.text.replace(new RegExp(m,"g"),y))})),h[m])h[m].dataViews?h[m].dataViews[l]=g:h[m].dataViews={[l]:g};else if(h[v]){const e=m.substr(v.length+1);h[v].childDataSourceJsons?h[v].childDataSourceJsons[e]?h[v].childDataSourceJsons[e].dataViews?h[v].childDataSourceJsons[e].dataViews[l]=g:h[v].childDataSourceJsons[e].dataViews={[l]:g}:h[v].childDataSourceJsons[e]={id:m,dataViews:{[l]:g}}:h[v].childDataSourceJsons={[e]:{id:m,dataViews:{[l]:g}}}}else console.error("bad config ds.",n);Object.keys(h).forEach((e=>{h[e].originDataSources&&h[e].originDataSources.forEach((e=>{e.dataSourceId===m&&(e.dataSourceId=y,e.mainDataSourceId=m,e.dataViewId=l)}))})),delete n.query}else n.mainDataSourceId||(n.mainDataSourceId=n.dataSourceId)}))})),t(n(e,r,o,a))})(s,o.searchUtils,i.richTextUtils),s=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var n;const r=e.layouts[t],o=null==r?void 0:r.type;Object.keys(null!==(n=null==r?void 0:r.content)&&void 0!==n?n:{}).forEach((e=>{var t,n,i,s,a,l;const u=r.content[e],c=null!==(n=null===(t=u.setting)||void 0===t?void 0:t.autoProps)&&void 0!==n?n:{};!0===c.width?(o===ia.p.FixedLayout?c.left||c.right?c.width="AUTO":c.width="STRETCH":c.width="AUTO",u.setting.autoProps=c):!1===c.width&&(c.width="CUSTOM",u.setting.autoProps=c),!0===(null===(i=u.setting)||void 0===i?void 0:i.fitContainer)?c.height="STRETCH":!1===(null===(s=u.setting)||void 0===s?void 0:s.fitContainer)&&(null===(a=u.bbox)||void 0===a?void 0:a.height)?c.height="CUSTOM":!0===c.height?(o===ia.p.FixedLayout?c.top||c.bottom?c.height="AUTO":c.height="STRETCH":c.height="AUTO",u.setting.autoProps=c):!1===c.height&&(c.height="CUSTOM",u.setting.autoProps=c),(null===(l=u.setting)||void 0===l?void 0:l.heightMode)&&null==c.height&&("auto"===u.setting.heightMode?(c.height="AUTO",u.setting.autoProps=c):"fit"===u.setting.heightMode?(c.height="STRETCH",u.setting.autoProps=c):"fixed"===u.setting.heightMode&&(c.height="CUSTOM",u.setting.autoProps=c))}))})),e})(s),s}))}))},{version:"1.2.0",description:"1.2.0",upgrader:e=>{let t=e;return t=(e=>(Object.keys(e.pages).forEach((t=>{e.pages[t].icon&&(e.pages[t].icon.properties.color=null)})),e))(t),t=(e=>{if(!e.dialogs)return e;let t=0,n=0;Object.keys(e.dialogs).forEach((r=>{const o=e.dialogs[r];o.mode===Ql.oM.Fixed?o.index=t++:o.index=n++,o.dialogBackground?""===o.dialogBackground.color&&(o.dialogBackground.color="rgba(0,0,0,0)"):o.dialogBackground={color:"rgba(0,0,0,0)",fillType:"fit",image:{url:""}},o.mode===Ql.oM.Fixed&&o.confirmBeforeClose?(o.interactionType=Ql.lB.ButtonInline,o.interactionStyles=o.confirmationStyle,o.alwaysShowConfirmation=!1):(o.interactionType=null,o.interactionStyles=null),delete o.confirmationStyle}));const r={};return Object.keys(e.dialogs).sort().forEach((t=>{r[t]=e.dialogs[t]})),e.dialogs=r,e})(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const n=e.layouts[t];(null==n?void 0:n.type)===ia.p.FixedLayout&&Object.keys(n.content||{}).forEach((e=>{var t,r;const o=n.content[e];!0===(null===(t=o.setting)||void 0===t?void 0:t.hCenter)&&(o.bbox||(o.bbox={}),o.bbox.left="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.left=!1,o.setting.autoProps.right=!0):o.setting.autoProps={left:!1,right:!0}:o.setting={autoProps:{left:!1,right:!0}}),!0===(null===(r=o.setting)||void 0===r?void 0:r.vCenter)&&(o.bbox||(o.bbox={}),o.bbox.top="50%",o.setting?o.setting.autoProps?(o.setting.autoProps.top=!1,o.setting.autoProps.bottom=!0):o.setting.autoProps={top:!1,bottom:!0}:o.setting={autoProps:{top:!1,bottom:!0}})}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const n=e.layouts[t];(null==n?void 0:n.type)===ia.p.FlowLayout&&Object.keys(n.content||{}).forEach((e=>{var t,r,o;const i=n.content[e];!0===(null===(t=i.setting)||void 0===t?void 0:t.isFloating)&&(+(null===(r=i.bbox)||void 0===r?void 0:r.width)>0&&(i.bbox.width=`${i.bbox.width}px`),+(null===(o=i.bbox)||void 0===o?void 0:o.height)>0&&(i.bbox.height=`${i.bbox.height}px`))}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const n=e.layouts[t];Object.keys(n.content||{}).forEach((t=>{var r,o,i,s,a;const l=n.content[t];if(l.type===ia.K.Widget){const t=e.widgets[l.widgetId];0===(null===(r=null==t?void 0:t.uri)||void 0===r?void 0:r.indexOf("widgets/common/card"))&&("AUTO"===(null===(i=null===(o=l.setting)||void 0===o?void 0:o.autoProps)||void 0===i?void 0:i.width)&&(l.setting.autoProps.width="CUSTOM",l.bbox||(l.bbox={}),l.bbox.width=`${t.config.widgetWidth}px`),"AUTO"===(null===(a=null===(s=l.setting)||void 0===s?void 0:s.autoProps)||void 0===a?void 0:a.height)&&(l.setting.autoProps.height="CUSTOM",l.bbox||(l.bbox={}),l.bbox.height=`${t.config.widgetHeight}px`))}}))})),e))(t),t=(e=>(Object.keys(e.layouts).forEach((t=>{const n=e.layouts[t];Object.keys(n.content||{}).forEach((t=>{var r,o;const i=n.content[t];if(i.type===ia.K.Widget){const t=e.widgets[i.widgetId];if(0===(null===(r=null==t?void 0:t.uri)||void 0===r?void 0:r.indexOf("widgets/layout/column"))){const n=null===(o=t.layouts)||void 0===o?void 0:o.DEFAULT;n&&Object.keys(n).forEach((r=>{var o,i,s,a,l,u,c,d;const p=n[r],f=e.layouts[p];f.setting||(f.setting={}),f.setting.space=(null===(i=null===(o=t.config)||void 0===o?void 0:o.space)||void 0===i?void 0:i.distance)||(null===(s=t.config)||void 0===s?void 0:s.space),f.setting.padding=null===(l=null===(a=t.config)||void 0===a?void 0:a.style)||void 0===l?void 0:l.padding,f.setting.justifyContent=null===(c=null===(u=t.config)||void 0===u?void 0:u.style)||void 0===c?void 0:c.justifyContent,f.setting.overflowY=null===(d=t.config)||void 0===d?void 0:d.style.overflowY}))}}}))})),e))(t),t}},{version:"1.3.0",description:"1.3.0",upgrader:e=>e},{version:"1.4.0",description:"1.4.0",upgrader:e=>{let t=e;return t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{const n=e.widgets[t];if("widgets/common/filter/"===n.uri&&n.useDataSources){const r={};n.useDataSources.forEach((e=>{if(e.dataSourceId in r){const t=r[e.dataSourceId].fields||[],n=e.fields||[];r[e.dataSourceId].fields=Array.from(new Set(t.concat(n))).sort()}else r[e.dataSourceId]=e})),e.widgets[t].useDataSources=Object.keys(r).map((e=>r[e]))}})),e))(t),t=(e=>e.dialogs?(Object.keys(e.dialogs).forEach((t=>{const n=e.dialogs[t],r={width:n.width,height:n.height,aspectRatio:!!n.aspectRatio};delete n.width,delete n.height,delete n.aspectRatio,n.mode===Ql.oM.Fixed&&(r.position=n.position,delete n.position),n.sizeMode={},n.sizeMode[Os.rH.Large]=r})),e):e)(t),t=(e=>{var t;const n=["widgets/arcgis/feature-info/","widgets/arcgis/query/","widgets/common/chart/","widgets/common/list/","widgets/common/table/"];return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{const r=e.widgets[t];n.includes(r.uri)&&(r.enableDataAction=!1)})),e})(t),t}},{version:"1.5.0",description:"1.5.0",upgrader:e=>{let t=e;return t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{var n,r;const o=e.widgets[t];if(0===(null===(n=null==o?void 0:o.uri)||void 0===n?void 0:n.indexOf("widgets/layout/row"))){const t=null===(r=o.layouts)||void 0===r?void 0:r.DEFAULT;t&&Object.keys(t).forEach((n=>{var r,i,s,a,l,u;const c=t[n],d=e.layouts[c];d&&(d.setting||(d.setting={}),d.setting.style||(d.setting.style={}),d.setting.space=null!==(s=null===(i=null===(r=o.config)||void 0===r?void 0:r.space)||void 0===i?void 0:i.distance)&&void 0!==s?s:null===(a=o.config)||void 0===a?void 0:a.space,d.setting.style.padding=null===(u=null===(l=o.config)||void 0===l?void 0:l.style)||void 0===u?void 0:u.padding,o.config={})}))}})),e})(t),t=(e=>{var t,n;const r=t=>{Object.keys(null!=t?t:{}).forEach((n=>{var r;const o=t[n],i=e.layouts[o];if(i){const e=null!==(r=i.setting)&&void 0!==r?r:{};e.lockDescendants=!0,i.setting=e}}))};return r(null===(t=e.header)||void 0===t?void 0:t.layout),r(null===(n=e.footer)||void 0===n?void 0:n.layout),e})(t),t=(e=>{var t;return Object.keys(null!==(t=e.widgets)&&void 0!==t?t:{}).forEach((t=>{var n,r;const o=e.widgets[t];if(0===(null===(n=null==o?void 0:o.uri)||void 0===n?void 0:n.indexOf("widgets/layout/column"))){const t=null===(r=o.layouts)||void 0===r?void 0:r.DEFAULT;t&&Object.keys(t).forEach((n=>{const r=t[n],o=e.layouts[r];o&&!o.type&&(o.type=ia.p.ColumnLayout)}))}})),e})(t),t}},{version:"1.6.0",description:"1.6.0",upgrader:e=>{const t=e.customTheme;if(!t)return e;const n=t.sharedThemeVariables;delete t.sharedThemeVariables;let r=e;r.customTheme=t,r.sharedThemeVariables=n;return r=(e=>{var t;return Object.values(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var n;"DATA_RECORDS_SELECTION_CHANGE"===(null==t?void 0:t.messageType)&&(null!==(n=t.actions)&&void 0!==n?n:[]).forEach((n=>{var r,o,i,s,a;if(!("zoomToFeature"!==(null==n?void 0:n.actionName)&&"panTo"!==n.actionName||(null===(r=null==n?void 0:n.config)||void 0===r?void 0:r.useDataSources)&&0!==(null===(i=null===(o=null==n?void 0:n.config)||void 0===o?void 0:o.useDataSources)||void 0===i?void 0:i.length))){const r=e.widgets[t.widgetId];if(n.config||(n.config={}),"widgets/arcgis/query/"===r.uri){const e=null!==(s=r.outputDataSources)&&void 0!==s?s:[];n.config.useDataSources=e.map((e=>({dataSourceId:e,mainDataSourceId:e,rootDataSourceId:null}))),n.config.useDataSource=n.config.useDataSources[0]}else{const e=null!==(a=r.useDataSources)&&void 0!==a?a:[];n.config.useDataSources=e.map((e=>({dataSourceId:e.dataSourceId,mainDataSourceId:e.mainDataSourceId,rootDataSourceId:e.rootDataSourceId})))}}}))})),e})(r),r}},{version:"1.7.0",description:"1.7.0",upgrader:e=>{const t=function(e,t){let n;return"page"===t?n=e.pages:"view"===t?n=e.views:"dialog"===t&&(n=e.dialogs),n?(Object.keys(n).forEach((e=>{Object.keys(n).some((t=>t===e||(n[t].label===n[e].label&&(n[e].label+=" "),!1)))})),n):null};let n=e;return n=(e=>{var t,n;return Object.keys(null!==(t=e.dataSources)&&void 0!==t?t:{}).forEach((t=>{var n;const r=e.dataSources[t];r.isOutputFromWidget&&Object.values(null!==(n=e.widgets)&&void 0!==n?n:{}).find((e=>{var t;return"widgets/common/list/"===e.uri&&(null===(t=e.outputDataSources)||void 0===t?void 0:t.includes(r.id))}))&&delete e.dataSources[t]})),Object.keys(null!==(n=e.widgets)&&void 0!==n?n:{}).forEach((t=>{const n=e.widgets[t];"widgets/common/list/"===n.uri&&Array.isArray(n.outputDataSources)&&delete n.outputDataSources})),e})(n),n=(e=>(e.pages=t(e,"page"),e.dialogs&&(e.dialogs=t(e,"dialog")),e.views&&(e.views=t(e,"view")),e))(n),n=(e=>{var t;return Object.values(null!==(t=e.messageConfigs)&&void 0!==t?t:{}).forEach((t=>{var n;"DATA_SOURCE_FILTER_CHANGE"===(null==t?void 0:t.messageType)&&(null!==(n=t.actions)&&void 0!==n?n:[]).forEach((n=>{var r;if("zoomToFeature"===(null==n?void 0:n.actionName)||"panTo"===n.actionName){const o=e.widgets[t.widgetId];n.config||(n.config={});const i=(null!==(r=o.useDataSources)&&void 0!==r?r:[]).filter((e=>{var t;return null===(t=n.config.useDataSources)||void 0===t?void 0:t.find((t=>t.mainDataSourceId===e.mainDataSourceId))}));n.config.useDataSources=i||[]}}))})),e})(n),n}},{version:"1.8.0",description:"1.8.0",upgrader:e=>{let t=e;return t=(e=>e.dialogs?(Object.keys(e.dialogs).forEach((t=>{const n=e.dialogs[t];n.mode===Ql.oM.Anchored&&(n.closeWhenClickOverlay=!0)})),e):e)(t),t}},{version:"1.9.0",description:"1.9.0",upgrader:e=>(e=>{function t(t,n,r){var o;let i;if(ds(null==e?void 0:e.utilities,t))i=ps(null==e?void 0:e.utilities,t);else{const s=cs(e,t,n,r);i=s.id,e.utilities=null===(o=s.appConfig)||void 0===o?void 0:o.utilities}return{utilityId:i}}const n=e.widgets||{};return Object.keys(n).forEach((r=>{var o,i,s,a,l,u,c,d,p,f,h,g,m,v,y,S,I;const b="widgets/arcgis/directions/"===(null===(o=null==n?void 0:n[r])||void 0===o?void 0:o.uri),w="widgets/common/search/"===(null===(i=null==n?void 0:n[r])||void 0===i?void 0:i.uri);if(b||w){const o=w?null===(a=null===(s=null==n?void 0:n[r])||void 0===s?void 0:s.config)||void 0===a?void 0:a.datasourceConfig:null===(c=null===(u=null===(l=null==n?void 0:n[r])||void 0===l?void 0:l.config)||void 0===u?void 0:u.searchConfig)||void 0===c?void 0:c.dataConfig,i=null==o?void 0:o.map((e=>((null==e?void 0:e.geocodeURL)&&(e.useUtility=t(e.geocodeURL,Ql.JX.GeoCoding,e.label),null==e||delete e.geocodeURL),e)));if(b){let n;o&&(e.widgets[r].config.searchConfig.dataConfig=i.map((e=>(null==e||delete e.outputDataSourceId,null==e||delete e.useDataSource,e)))),n=(null===(d=e.widgets[r].config.routeConfig)||void 0===d?void 0:d.routeServiceUrl)?null===(m=e.widgets[r].config.routeConfig)||void 0===m?void 0:m.routeServiceUrl:(null===(g=null===(h=null===(f=null===(p=(0,Bi.Vp)().getState())||void 0===p?void 0:p.portalSelf)||void 0===f?void 0:f.helperServices)||void 0===h?void 0:h.route)||void 0===g?void 0:g.url)||"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",e.widgets[r].config.routeConfig={useUtility:t(n,Ql.JX.Routing)},e.widgets[r].useUtilities=[null===(v=e.widgets[r].config.routeConfig)||void 0===v?void 0:v.useUtility].concat(null===(S=null===(y=e.widgets[r].config.searchConfig)||void 0===y?void 0:y.dataConfig)||void 0===S?void 0:S.map((e=>null==e?void 0:e.useUtility))).filter((e=>!!e))}else o&&(e.widgets[r].config.datasourceConfig=i),e.widgets[r].useUtilities=null===(I=e.widgets[r].config.datasourceConfig)||void 0===I?void 0:I.map((e=>null==e?void 0:e.useUtility)).filter((e=>!!e))}})),e})(e)},{version:"1.10.0",description:"1.10.0",upgrader:e=>{const t=(e,t)=>t.map((t=>{if((null==e?void 0:e.dataSourceId)===(null==t?void 0:t.dataSourceId)){const n=(null==e?void 0:e.fields)||[],r=(null==t?void 0:t.fields)||[],o=Array.from(new Set(r.concat(n)));t.fields=o}return t})),n=(e,t)=>{var n;return(null===(n=null==t?void 0:t.filter((t=>(null==e?void 0:e.dataSourceId)===(null==t?void 0:t.dataSourceId))))||void 0===n?void 0:n.length)>0};let r=(e=>{const t=(e,t)=>{if(!(e.isOutputFromWidget&&e.isDataInDataSourceInstance))return!1;return(e=>{var t,n,r,o,i,s,a,l;if(!e)return!1;const u=null===(r=null===(n=null===(t=e.config.webChart)||void 0===t?void 0:t.series)||void 0===n?void 0:n[0])||void 0===r?void 0:r.type;if(!["barSeries","lineSeries","pieSeries"].includes(u))return!1;let c=null===(i=null===(o=e.config.webChart)||void 0===o?void 0:o.dataSource)||void 0===i?void 0:i.query;return null==c&&(c=null===(l=null===(a=null===(s=e.config.webChart)||void 0===s?void 0:s.series)||void 0===a?void 0:a[0])||void 0===l?void 0:l.query),null==(null==c?void 0:c.groupByFieldsForStatistics)&&null!=(null==c?void 0:c.outStatistics)})(Object.values(t).find((t=>{var n;return(null===(n=t.outputDataSources)||void 0===n?void 0:n[0])===e.id&&"widgets/common/chart/"===t.uri})))},n={jimuName:"name",type:Os.Eo.String,esriType:Os.oX.String,name:"name",alias:"Name",format:null},r={jimuName:"value",type:Os.Eo.Number,esriType:Os.oX.Double,name:"value",alias:"Value",format:{digitSeparator:!0,places:3}},o=e.dataSources;return((e,n)=>!!e&&Object.values(e).some((e=>t(e,n))))(o,e.widgets)?(Object.values(o).forEach((o=>{if(t(o,e.widgets)){const e=o.schema,t=e.fields[e.idField],i={[t.jimuName]:t,name:n,value:r};e.fields=i}})),e):e})(e);return r=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((n=>{var r,o,i,s,a,l,u,c,d;"widgets/common/print/"===(null===(r=null==t?void 0:t[n])||void 0===r?void 0:r.uri)&&((null===(i=null===(o=null==e?void 0:e.widgets)||void 0===o?void 0:o[n])||void 0===i?void 0:i.style)||(e.widgets[n].style={}),(null===(l=null===(a=null===(s=null==e?void 0:e.widgets)||void 0===s?void 0:s[n])||void 0===a?void 0:a.style)||void 0===l?void 0:l.background)||(e.widgets[n].style.background={color:"var(--ref-palette-white)",fillType:"fill"}),(null===(d=null===(c=null===(u=null==e?void 0:e.widgets)||void 0===u?void 0:u[n])||void 0===c?void 0:c.style)||void 0===d?void 0:d.border)||(e.widgets[n].style.border={color:"var(--ref-palette-neutral-500)",type:"solid",width:"1px"}))})),e})(r),r=(e=>{const r=e.widgets||{};return Object.keys(r).forEach((e=>{var o,i,s;if("widgets/common/search/"===(null===(o=null==r?void 0:r[e])||void 0===o?void 0:o.uri)){const o=(null===(s=null===(i=r[e])||void 0===i?void 0:i.config)||void 0===s?void 0:s.datasourceConfig)||[];let a=[];null==o||o.forEach((e=>{const r=null==e?void 0:e.useDataSource;if(r){n(r,a)?a=t(r,a):a.push(r)}})),r[e].useDataSources=a}})),e})(r),r}},{version:"1.12.0",description:"1.12.0",upgrader:e=>{let t=(e=>{var t;return Object.keys(null!==(t=null==e?void 0:e.layouts)&&void 0!==t?t:{}).forEach((t=>{var n;const r=e.layouts[t];r.type===ia.p.GridLayout&&Object.keys(null!==(n=r.content)&&void 0!==n?n:{}).forEach((e=>{const t=r.content[e],n=t.setting;null!=(null==n?void 0:n.type)?(t.gridType=n.type,delete n.type):t.gridType=Ql.Qw.Plain,null!=(null==n?void 0:n.parent)&&(t.parent=n.parent,delete n.parent),(null==n?void 0:n.children)&&(t.children=n.children,delete n.children),(null==n?void 0:n.active)>=0&&(t.activeTab=n.active,delete n.active),(null==n?void 0:n.size)>=0&&(t.bbox={width:n.size},delete n.size)}))})),e})(e);return t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((e=>{var n;if("widgets/arcgis/map-layers/"===(null===(n=null==t?void 0:t[e])||void 0===n?void 0:n.uri)){t[e].enableDataAction=!1}})),e})(t),t}},{version:"1.13.0",description:"1.13.0",upgrader:e=>{let t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((n=>{var r,o,i,s,a;const l="widgets/common/list/"===(null===(r=null==t?void 0:t[n])||void 0===r?void 0:r.uri),u="widgets/common/card/"===(null===(o=null==t?void 0:t[n])||void 0===o?void 0:o.uri),c="widgets/arcgis/bookmark/"===(null===(i=null==t?void 0:t[n])||void 0===i?void 0:i.uri);(u||l||c)&&(null===(a=null===(s=null==t?void 0:t[n])||void 0===s?void 0:s.layouts)||void 0===a?void 0:a.REGULAR)&&(e.widgets[n].layouts.DEFAULT=t[n].layouts.REGULAR,delete t[n].layouts.REGULAR,t[n].layouts=(e=>{const t={};(null==e?void 0:e.DEFAULT)&&(t.DEFAULT=e.DEFAULT);for(const n in e)"DEFAULT"!==n&&(t[n]=e[n]);return t})(t[n].layouts),u?(e.widgets[n].config.DEFAULT=t[n].config.REGULAR,delete t[n].config.REGULAR):l&&(e.widgets[n].config.cardConfigs.DEFAULT=t[n].config.cardConfigs.REGULAR,delete t[n].config.cardConfigs.REGULAR))})),e})(e);t=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{const n=e.widgets[t];if("widgets/common/controller/"===n.uri&&n.layouts._openwidget){Object.values(n.layouts._openwidget).forEach((t=>{e.layouts[t]&&delete e.layouts[t]})),delete n.layouts._openwidget}})),e))(t);return t=(e=>{const t=e.widgets||{};return Object.keys(t).forEach((e=>{const n=t[e];n&&"widgets/arcgis/arcgis-map/"===n.uri&&(n.enableDataAction=!1)})),e})(t),t}},{version:"1.14.0",description:"1.14.0",upgrader:e=>Zl(this,void 0,void 0,(function*(){const{getJimuFieldNamesBySqlExpression:t}=yield(0,Is.loadModule)("jimu-ui/basic/sql-expression-runtime"),n=e=>{const n=[],r=null==e?void 0:e.actionUseDataSource,o=null==e?void 0:e.messageUseDataSource;if(o&&n.push(o),r){const o=(null==e?void 0:e.sqlExprObj)||null,i=t(y(o))||[],s=(null==r?void 0:r.fields)||[],a=y(r).set("fields",Array.from(new Set(s.concat(i))));n.push(a)}return n};let r=(e=>{var t;return Object.keys(null!==(t=e.layouts)&&void 0!==t?t:{}).forEach((t=>{var n,r,o;const i=e.layouts[t];if(i.type===ia.p.GridLayout){const e=null===(r=null===(n=i.setting)||void 0===n?void 0:n.expandable)||void 0===r||r;Object.keys(null!==(o=i.content)&&void 0!==o?o:{}).forEach((t=>{const n=i.content[t];n.gridType===Ql.Qw.Plain&&(n.expandable=e)}))}})),e})(e);return r=(e=>{const t={};return Object.keys(e.dialogs).forEach((n=>{e.dialogs[n].mode===Ql.oM.Fixed&&(e.dialogs[n].blockPage=!0),t[n]=e.dialogs[n]})),e})(r),(e=>{var t;let r=!1;const o=(null==e?void 0:e.messageConfigs)||{};return null===(t=Object.keys(o))||void 0===t||t.forEach((e=>{var t;((null===(t=o[e])||void 0===t?void 0:t.actions)||[]).forEach((e=>{if((null==e?void 0:e.config)&&!(null==e?void 0:e.useDataSources)){n(null==e?void 0:e.config).length>0&&(r=!0)}}))})),r})(r)&&(r=(e=>{var t;const r=(null==e?void 0:e.messageConfigs)||{};return null===(t=Object.keys(r))||void 0===t||t.forEach((e=>{var t;const o=((null===(t=r[e])||void 0===t?void 0:t.actions)||[]).map((e=>{if((null==e?void 0:e.config)&&!(null==e?void 0:e.useDataSources)){const t=n(null==e?void 0:e.config);return t.length>0&&(e.useDataSources=t),e}return e}));r[e].actions=o})),e.messageConfigs=r,e})(r)),r}))},{version:"1.15.0",description:"1.15.0",upgrader:e=>{const t=(e,t)=>null==t?void 0:t.some((t=>t.dataSourceId===e.dataSourceId));let n=(e=>(e.widgets&&Object.keys(e.widgets).forEach((n=>{var r;let o=!1;const i=e.widgets[n];if("widgets/common/print/"===i.uri){const s=(null==i?void 0:i.useDataSources)||[];((null===(r=i.config)||void 0===r?void 0:r.printCustomTemplate)||[]).forEach((e=>{const n=(null==e?void 0:e.reportOptions)||{},r=(null==n?void 0:n.reportSectionOverrides)||{};Object.keys(r).forEach((e=>{var n,i;const a=null===(i=null===(n=r[e])||void 0===n?void 0:n.exbDatasource)||void 0===i?void 0:i[0];a&&!t(a,s)&&(s.push(a),o=!0)}))})),o&&(e.widgets[n].useDataSources=s)}})),e))(e);return n=(e=>(e.dialogs&&Object.keys(e.dialogs).forEach((t=>{const n=e.dialogs[t];Object.keys(n.sizeMode).forEach((e=>{const t=n.sizeMode[e];if(t)if(n.mode===Ql.oM.Fixed){const r={widthMode:"CUSTOM",heightMode:"CUSTOM",width:t.width,height:t.height};switch(t.position){case"CENTER":r.position="MIDDLE_CENTER";break;case"LEFT":r.position="MIDDLE_LEFT",r.height="100%";break;case"RIGHT":r.position="MIDDLE_RIGHT",r.height="100%";break;case"TOP":r.position="TOP_CENTER",r.width="100%";break;case"BOTTOM":r.position="BOTTOM_CENTER",r.width="100%"}n.sizeMode[e]=r}else delete n.sizeMode[e].aspectRatio}))})),e))(n),n=(e=>{const t=null==e?void 0:e.messageConfigs;if(!t)return e;let n=!1;return Object.keys(t).forEach((e=>{const r=t[e];if(r.messageType===Xl.Go.ExtentChange){let o=r.actions;o&&(o=o.map((e=>("filter data record action"===e.actionName&&(null==e?void 0:e.config)&&!Array.isArray(e.config)&&(e.config=[e.config],n=!0),e)))),n&&(t[e].actions=o)}(r.actions||[]).forEach((e=>{var t,n;(null===(t=e.config)||void 0===t?void 0:t.enabledDataRelationShip)&&!(null===(n=e.config)||void 0===n?void 0:n.connectionType)&&(e.config.connectionType=ql.SetCustomFields)}))})),n&&(e.messageConfigs=t),e})(n),n=(e=>{const t={};return Object.values(e.widgets).forEach((e=>{var n,r;"widgets/common/chart/"===e.uri&&(null===(n=e.outputDataSources)||void 0===n?void 0:n.length)&&(null===(r=e.useDataSources)||void 0===r?void 0:r.length)&&(t[e.outputDataSources[0]]=e.useDataSources)})),Object.entries(t).forEach((([t,n])=>{if(e.dataSources[t]){n[0].dataSourceId!==e.dataSources[t].originDataSources[0].dataSourceId&&(e.dataSources[t].originDataSources=n)}})),e})(n),n=(e=>(e.widgets&&Object.keys(e.widgets).forEach((t=>{const n=e.widgets[t];if("widgets/common/list/"===n.uri||"widgets/common/card/"===n.uri){const r=(null==n?void 0:n.layouts)||{};Object.keys(r).forEach((n=>{var o,i;const s=(null==r?void 0:r[n])||{};(null===(o=Object.keys(s))||void 0===o?void 0:o.length)>0&&Object.keys(s).forEach((r=>{s[r]||delete e.widgets[t].layouts[n][r]})),0===(null===(i=Object.keys(s))||void 0===i?void 0:i.length)&&delete e.widgets[t].layouts[n]}))}})),e))(n),n}},{version:"1.17.0",description:"1.17.0",upgrader:e=>(e=>{const t=e.widgets||{};return Object.keys(t).forEach((e=>{const n=t[e];"widgets/arcgis/oriented-imagery/"===n.uri&&(n.uri="widgets/arcgis/classic-oriented-imagery/")})),e})(e)},{version:"1.18.0",description:"1.18.0",upgrader:e=>{let t=(e=>{if(!e.dataSources)return e;for(const t of Object.keys(e.dataSources)){const n=e.dataSources[t];"building-scene"===n.type&&(n.type=Ts.hg.BuildingSceneLayer),"building-component"===n.type&&(n.type=Ts.hg.BuildingComponentSubLayer),"building-group"===n.type&&(n.type=Ts.hg.BuildingGroupSubLayer)}return e})(e);return t=(e=>{var t,n,r;if(!e.dataSources)return e;for(const o of Object.keys(e.dataSources)){const i=e.dataSources[o],s=null===(t=null==i?void 0:i.schema)||void 0===t?void 0:t.fields;o.includes("output_config_default_geocode_utility")&&(null==s?void 0:s.objectid)&&(null==s?void 0:s.default_address)&&((null===(n=s.objectid)||void 0===n?void 0:n.esriType)||(i.schema.fields.objectid=Object.assign(Object.assign({},s.objectid),{esriType:Os.oX.OID})),(null===(r=s.default_address)||void 0===r?void 0:r.esriType)||(i.schema.fields.default_address=Object.assign(Object.assign({},s.default_address),{esriType:Os.oX.String})))}return e})(t),t}}]}}var nu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class ru extends eu{widgetUpgrade(e,t,n,r){return nu(this,void 0,void 0,(function*(){const o=this.checkVersions(t,n);if(!o)return e;const[i,s]=o;if(i===s)return this.runWidgetUpgrader(this.versions[s],e,r);const a=e,l=this.versions.slice(i+1,s+1).filter((e=>null==e?void 0:e.upgrader));return l.reduce(((e,t)=>nu(this,void 0,void 0,(function*(){const n=yield e;return this.runWidgetUpgrader(t,n,r)}))),Promise.resolve(a))}))}runWidgetUpgrader(e,t,n){return nu(this,void 0,void 0,(function*(){if(e.upgradeFullInfo)return e.upgrader(t,n);{const r=yield e.upgrader(t.widgetJson.config,n);return{widgetJson:t.widgetJson.set("config",r),outputDataSourceJsons:t.outputDataSourceJsons}}}))}}class ou extends f.PureComponent{}const iu=ou;var su=s(61),au=s(7374),lu=s(2910),uu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const cu=s(147);window.jimuConfig.exbVersion=cu.exbVersion;class du{static getInstance(e){return du.instance||(du.instance=new du(e),window._configManager=du.instance),du.instance}constructor(e){this.intl=e.intl}loadAppConfig(){return uu(this,void 0,void 0,(function*(){return this.loadAndProcessAppConfig().then((e=>{this.updateAppInfoForDeployedApp(e.attributes);return y(e)}))}))}setAppConfig(e){return uu(this,void 0,void 0,(function*(){const t=yield this.processRawConfig(e),n=(0,Bi.Vp)(),r=n.getState();if(r.appRuntimeInfo.currentPageId&&!t.pages[r.appRuntimeInfo.currentPageId]){const e=Object.keys(t.pages).find((e=>t.pages[e].isDefault));(0,bs.changePage)(e)}n.dispatch((0,Ci.appConfigChanged)(y(t)))}))}loadAndProcessAppConfig(){return uu(this,void 0,void 0,(function*(){return(0,Bi.Vp)().getState().appConfig?Promise.resolve((0,Bi.Vp)().getState().appConfig.asMutable({deep:!0})):this.loadRawAppConfig().then((e=>uu(this,void 0,void 0,(function*(){return e.__not_publish?Promise.reject(new Error("notPublishError")):(this.addWebmapOrWebsceneToAppConfig(e),this.upgradeAppConfig(e))})))).then((e=>uu(this,void 0,void 0,(function*(){return this.initPortalAndWebTier(e)})))).then((e=>uu(this,void 0,void 0,(function*(){return this.processRawConfig(e)})))).then((e=>uu(this,void 0,void 0,(function*(){return this.applyAppConfigProcessorExtension(e)})))).then((e=>(window.jimuConfig.isInBuilder||(0,Bi.Vp)().getState().portalUrl&&(0,_i.initPortalSelf)((0,Bi.Vp)().getState().portalUrl),e)))}))}initPortalAndWebTier(e){return uu(this,void 0,void 0,(function*(){const t=(0,Bi.Vp)().getState();if(window.jimuConfig.isInBuilder||$i.Ay.getInstance().getMainSession())return Promise.resolve(e);if(e.attributes.portalUrl)if(t.portalUrl){if((0,Pi.isPlatformUrl)(t.portalUrl))(0,Bi.Vp)().dispatch((0,Ci.setPortalInfo)({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId}));else if(!t.portalUrl)return console.error("portalUrl is required."),Promise.reject(e)}else(0,Bi.Vp)().dispatch((0,Ci.setPortalInfo)({portalUrl:e.attributes.portalUrl,clientId:e.attributes.clientId}));if(window.jimuConfig.isDevEdition||window.jimuConfig.isInPortal){const t=(0,Bi.Vp)().getState();return this.handleWebTierAndUpdatePortalAndInitSession(t.portalUrl,t.clientId,t.isWebTier).then((()=>e))}if(window.jimuConfig.isOutOfExb){const t=(0,Pi.fixPortalUrlProtocol)(e.attributes.portalUrl);return this.handleWebTierAndUpdatePortalAndInitSession(t,e.attributes.clientId,!!e.attributes.isWebTier).then((()=>e))}return Promise.resolve(e)}))}upgradeAppConfig(e){return uu(this,void 0,void 0,(function*(){return E.valid(e.exbVersion)&&E.valid(cu.exbVersion)?(e.originExbVersion=e.exbVersion,E.lt(e.exbVersion,cu.exbVersion)?(new tu).upgrade(e,e.exbVersion,cu.exbVersion,"app").then((e=>(e.exbVersion=cu.exbVersion,e))):(e.exbVersion,cu.exbVersion,Promise.resolve(e))):Promise.reject(new Error(this.intl.formatMessage({id:"badVersion",defaultMessage:Gi.A.badVersion})))}))}handleWebTierAndUpdatePortalAndInitSession(e,t,n){return uu(this,void 0,void 0,(function*(){if(n)return this.checkWebTierAndUpdatePortalAndInitSession(e,t);if(null==n)return this.checkWebTierAndUpdatePortalAndInitSession(e,t);{(0,Bi.Vp)().dispatch((0,Ci.setPortalInfo)({isWebTier:!1}));const e=$i.Ay.getInstance();return e.getMainSession()?Promise.resolve():e.initSession()}}))}checkWebTierAndUpdatePortalAndInitSession(e,t){return uu(this,void 0,void 0,(function*(){const t=$i.Ay.getInstance();return t.getSessionFromWebTierPortal(e).then((e=>{let n=!1;return e?(n=!0,(0,Bi.Vp)().dispatch((0,Ci.setPortalInfo)({isWebTier:n})),t.initSession(),t.getMainSession()?n:(t.writeAuthInfo(e),t.initSession().then((()=>n)))):(n=!1,(0,Bi.Vp)().dispatch((0,Ci.setPortalInfo)({isWebTier:n})),t.initSession().then((()=>n)))}))}))}processRawConfig(e){return uu(this,void 0,void 0,(function*(){if(this.processAppConfigAfterLoad(e),e.sections){const t=Object.keys(e.sections);for(const n of t)au.A.getInstance().registerSectionActions(n,e)}return this.loadAllWidgetsManifest(e).then((e=>(this.addDefaultLabelAndIcon(e),e)))}))}updateAppInfoForDeployedApp(e){if(window.jimuConfig.isOutOfExb){const t={name:e.title,description:e.description,snippet:e.description,thumbnail:e.thumbnail};(0,Bi.Vp)().dispatch((0,Ci.appInfoChanged)(t))}}loadRawAppConfig(){return uu(this,void 0,void 0,(function*(){const e=lu.A.getInstance().getExtensions(Ss.ExtensionPoints.AppConfigService)[0];return e?e.loadAppConfig():this.loadAppConfigWithDefault()}))}loadAppConfigWithDefault(){return uu(this,void 0,void 0,(function*(){const e=(0,Bi.Vp)().getState();if(!e.appContext.isBuilder){const e=(0,xi.getAppIdPageIdFromUrl)().appId;if(e)return window.jimuConfig.isDevEdition?this.loadAppConfigFromLocalServer(e):this.loadAppConfigFromPortal(e)}let t=e.queryObject.config;t||(t=e.queryObject.mode?`${e.queryObject.mode}.json`:"config.json");const n=t.split(":");if(2===n.length&&"item"===n[0])return this.loadAppConfigFromPortal(n[1]);if((0,xi.isAbsoluteUrl)(t)&&!(0,Pi.isAGOLDomain)(t.trim())){const e="Only *.arcgis.com is allowed.";return console.error(e),Promise.reject({message:e})}return window.fetch(t).then((e=>uu(this,void 0,void 0,(function*(){return e.json()}))))}))}addWebmapOrWebsceneToAppConfig(e){if(window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder)return;const t="template"===window.jimuConfig.appFolderName,n=(0,Bi.Vp)().getState().queryObject;(0,Li.addWebmapOrWebsceneToAppConfig)(e,null==n?void 0:n.webmap,null==n?void 0:n.webscene,t)}loadAppConfigFromLocalServer(e){return uu(this,void 0,void 0,(function*(){const t=(0,Bi.Vp)().getState().queryObject.draft,n="true"===t||"1"===t?`${window.jimuConfig.mountPath}apps/${e}/resources/config/config.json`:`${window.jimuConfig.mountPath}apps/${e}/config.json`;return window.fetch(n).then((e=>{if(404===e.status){const e=this.intl.formatMessage({id:"invalidResourceItem",defaultMessage:Gi.A.invalidResourceItem});return Promise.reject(Error(e))}return e.json()}))}))}loadAppConfigFromPortal(e){return uu(this,void 0,void 0,(function*(){const t=$i.Ay.getInstance(),n=(new Date).getTime(),r=(0,Bi.Vp)().getState().queryObject.draft;return"true"===r||"1"===r?(0,Qr.request)(`${(0,Pi.getPortalRestUrl)((0,Bi.Vp)().getState().portalUrl)}/content/items/${e}/resources/config/config.json`,{authentication:t.getSessionByUrl((0,Bi.Vp)().getState().portalUrl),httpMethod:"GET",params:{timestamp:n}}).catch((t=>{if("CONT_0001"===t.code||"CONT_009431"===t.code){const e=this.intl.formatMessage({id:"invalidResourceItem",defaultMessage:Gi.A.invalidResourceItem});return Promise.reject(Error(e))}return this._handleAuthError(t,e)})):(0,Xr.getItemData)(e,{portal:(0,Pi.getPortalRestUrl)((0,Bi.Vp)().getState().portalUrl),authentication:t.getSessionByUrl((0,Bi.Vp)().getState().portalUrl)}).catch((t=>uu(this,void 0,void 0,(function*(){if("CONT_0001"===t.code||"CONT_009431"===t.code){const e=this.intl.formatMessage({id:"invalidResourceItem",defaultMessage:Gi.A.invalidResourceItem});return Promise.reject(Error(e))}return this._handleAuthError(t,e)}))))}))}_handleAuthError(e,t){return uu(this,void 0,void 0,(function*(){const n=!!(0,Ti.isInIFrame)();return $i.Ay.getInstance().handleAuthError(e,n).then((()=>uu(this,void 0,void 0,(function*(){return n?((0,_i.removeAppInfo)(t),(0,_i.clearPortalSelf)(),Ki(Ui.Experience).then((e=>{if(e.valid){const e=document.getElementById("app").style;null==e||e.removeProperty("z-index"),(0,Bi.Vp)().dispatch((0,Ci.hasPrivilegeChanged)("",!0))}else(0,Bi.Vp)().dispatch((0,Ci.hasPrivilegeChanged)(e.invalidMessage))})).catch((e=>{console.error(e),(0,Bi.Vp)().dispatch((0,Ci.hasPrivilegeChanged)(e.message))})),(0,_i.initPortalSelf)((0,Bi.Vp)().getState().portalUrl),(0,_i.getAppInfo)(t).then((e=>((0,Bi.Vp)().dispatch((0,Ci.appInfoChanged)(e)),e))),this.loadAppConfigFromPortal(t)):Promise.reject({})}))))}))}applyAppConfigProcessorExtension(e){return uu(this,void 0,void 0,(function*(){const t=lu.A.getInstance().getExtensions(Ss.ExtensionPoints.AppConfigProcessor)[0];return t?t.process(e):Promise.resolve(e)}))}loadAllWidgetsManifest(e){return uu(this,void 0,void 0,(function*(){const t=su.A.getInstance(),n=(0,Li.getAllWidgets)(e).map(((n,r)=>uu(this,void 0,void 0,(function*(){const r=n;if(r.uri||r.itemId)return r.itemId&&(r.uri=yield t.getWidgetUriByItemId(r.itemId)),e.useCachedManifest&&e.widgetsManifest[r.uri]?(r.manifest=e.widgetsManifest[r.uri],yield t.processWidgetManifest(r),void(yield t.registerManifestProps(n,e))):t.loadWidgetManifest(r.uri,!r.itemId).then((n=>uu(this,void 0,void 0,(function*(){return r.manifest=n,t.processWidgetManifest(r).then((()=>uu(this,void 0,void 0,(function*(){return t.registerManifestProps(r,e)}))))}))),(e=>uu(this,void 0,void 0,(function*(){console.error(e);return r.manifest={i18nMessages:{},properties:{}},Promise.resolve()}))))}))));return Promise.all(n).then((t=>e))}))}processAppConfigAfterLoad(e){this.cleanConfig(e),this.handleEmbedMode(e),this.addDefaultValues(e),this.fixAllIds(e),this.processWidgets(e),this.fixThemeUri(e),this.addDefaultPageStructure(e),this.buildAppStructure(e)}cleanConfig(e){const t=e.widgets||{};Object.keys(t).forEach((n=>{var r,o;const i=t[n];if("widgets/common/controller/"===(null==i?void 0:i.uri)){const i=t[n];Object.keys(null!==(o=null===(r=i.layouts)||void 0===r?void 0:r._openwidget)&&void 0!==o?o:{}).forEach((t=>{const n=i.layouts._openwidget[t],r=e.layouts[n];r&&(r.content={},r.order=[])}))}(null==i?void 0:i.parent)&&delete i.parent,(null==i?void 0:i.layouts)&&(Object.keys(i.layouts).forEach((t=>{const n=i.layouts[t];Object.keys(null!=n?n:{}).forEach((t=>{const r=n[t];e.layouts[r]||delete n[t]})),i.layouts[t]&&0===Object.keys(i.layouts[t]).length&&delete i.layouts[t]})),0===Object.keys(i.layouts).length&&delete i.layouts)})),e.layouts.undefined&&delete e.layouts.undefined}handleEmbedMode(e){const t=(0,Bi.Vp)().getState().queryObject.embedded;"true"!==t&&"1"!==t||Object.keys(e.pages).forEach((t=>{e.pages[t].header=!1,e.pages[t].footer=!1}))}buildAppStructure(e){var t,n,r,o;const i=(t,n,r)=>{var o,i;if((null===(i=null===(o=t.parent)||void 0===o?void 0:o[n])||void 0===i?void 0:i.length)>0){t.parent[n]=t.parent[n].filter((t=>{var n,r;return null!=(null===(r=null===(n=e.layouts[t.layoutId])||void 0===n?void 0:n.content)||void 0===r?void 0:r[t.layoutItemId])}));if(!t.parent[n].some((e=>e.layoutId===r.layoutId&&e.layoutItemId===r.layoutItemId))){t.parent[n].push(r)}}else t.parent?t.parent[n]=[r]:t.parent={[n]:[r]}},s=(t,n,r)=>{Object.keys(null!=t?t:{}).forEach((o=>{const a=t[o],l=e.layouts[a];l&&(l.parent={id:n,type:r},((t,n,r)=>{var o;Object.keys(null!==(o=n.content)&&void 0!==o?o:{}).forEach((o=>{const a=n.content[o];switch(a.type){case ia.K.Widget:{const n=e.widgets[a.widgetId];n?(i(n,r,{layoutId:t,layoutItemId:o}),n.layouts&&Object.values(n.layouts).forEach((e=>{s(e,a.widgetId,Ql.$4.Widget)}))):a.widgetId&&delete a.widgetId;break}case ia.K.Section:{const n=e.sections[a.sectionId];i(n,r,{layoutId:t,layoutItemId:o}),n.views.forEach((t=>{const r=e.views[t];r.parent=n.id,s(r.layout,t,Ql.$4.View)}));break}case ia.K.ScreenGroup:{const n=e.screenGroups[a.screenGroupId];n.parent?n.parent[r]={layoutId:t,layoutItemId:o}:n.parent={[r]:{layoutId:t,layoutItemId:o}},n.screens.forEach((t=>{var r;const o=e.screens[t];o.parent=n.id,s(o.main.layout,t,Ql.$4.Screen),(null===(r=o.panel)||void 0===r?void 0:r.layout)&&s(o.panel.layout,t,Ql.$4.Screen)}));break}}}))})(a,l,o))}))};Object.values(null!==(t=e.pages)&&void 0!==t?t:{}).forEach((e=>{s(e.layout,e.id,Ql.$4.Page)})),Object.values(null!==(n=e.dialogs)&&void 0!==n?n:{}).forEach((e=>{s(e.layout,e.id,Ql.$4.Dialog)})),(null===(r=e.header)||void 0===r?void 0:r.layout)&&s(e.header.layout,"",Ql.$4.Header),(null===(o=e.footer)||void 0===o?void 0:o.layout)&&s(e.footer.layout,"",Ql.$4.Footer)}addDefaultPageStructure(e){e.pageStructure||(e.pageStructure=[],Object.keys(e.pages).forEach((t=>{e.pageStructure.push({[t]:[]})})))}fixAllIds(e){this.fixId(e.pages),this.fixId(e.widgets),this.fixId(e.sections),this.fixId(e.views),this.fixId(e.dialogs),this.fixId(e.messageConfigs),this.fixId(e.dataSources),(0,Li.fixLayoutIds)(e)}fixId(e){e&&Object.keys(e).forEach((t=>{"string"!=typeof e[t]&&(e[t].id=t)}))}processWidgets(e){Object.keys(e.widgets).forEach((t=>{const n=e.widgets[t];n.uri&&!/\/$/.test(n.uri)&&(n.uri=n.uri+"/");const r=(0,Li.getWidgetContext)(n.uri);n.context=r,n.originVersion=n.version}))}fixThemeUri(e){/\/$/.test(e.theme)||(e.theme=e.theme+"/")}addDefaultValues(e){return e.attributes||(e.attributes={}),e.widgets||(e.widgets={}),e.widgetsManifest||(e.widgetsManifest={}),e.views||(e.views={}),e.sections||(e.sections={}),e.dialogs||(e.dialogs={}),e.pages||(e.pages={}),e.layouts||(e.layouts={}),e.dataSources||(e.dataSources={}),e.messageConfigs||(e.messageConfigs={}),this.addDefaultPageVisible(e),e}addDefaultPageVisible(e){Object.keys(e.pages).forEach((t=>{void 0===e.pages[t].isVisible&&(e.pages[t].isVisible=!0)}))}addDefaultLabelAndIcon(e){this.addPageLabel(e),Object.keys(e.dialogs||{}).forEach((t=>{e.dialogs[t].label||(e.dialogs[t].label=(0,Li.getUniqueLabel)(e,"dialog",this.intl.formatMessage({id:"dialog",defaultMessage:Gi.A.dialog})))})),e.layouts&&Object.keys(e.layouts).filter((t=>e.layouts[t].type===ia.p.FlowLayout)).forEach((t=>{const n=e.layouts[t];Object.keys(n.content||{}).filter((e=>n.content[e].type===ia.K.Widget)).map((e=>n.content[e].widgetId)).forEach((t=>{const n=e.widgets[t];if(n&&!n.label&&"widgets/layout/row/"===n.uri){const t=this.intl.formatMessage({id:"block",defaultMessage:Gi.A.block});n.label=(0,Li.getUniqueLabel)(e,"widget",t)}}))})),(0,Li.getAllWidgets)(e).forEach((t=>{(0,Li.addWidgetDefaultLabelAndIcon)(e,t)})),Object.keys(e.sections||{}).forEach((t=>{const n=e.sections[t];n.label||(n.label=(0,Li.getUniqueLabel)(e,"section",this.intl.formatMessage({id:"section",defaultMessage:Gi.A.section})))})),Object.keys(e.views||{}).forEach((t=>{var n,r,o,i,s;const a=e.views[t];if(!a.label){if("tab"===e.template){const t=Object.values(a.layout||{})[0];if(t){const l=null===(i=null===(o=Object.values((null===(r=null===(n=e.layouts)||void 0===n?void 0:n[t])||void 0===r?void 0:r.content)||{}))||void 0===o?void 0:o[0])||void 0===i?void 0:i.widgetId;if(l){const t=null===(s=e.widgets)||void 0===s?void 0:s[l];if(null==t?void 0:t.label)return void(a.label=t.label)}}}a.label=(0,Li.getUniqueLabel)(e,"view",this.intl.formatMessage({id:"view",defaultMessage:Gi.A.view}))}})),Object.keys(e.screenGroups||{}).forEach((t=>{const n=e.screenGroups[t];n.label||(n.label=(0,Li.getUniqueLabel)(e,"screenGroup",this.intl.formatMessage({id:"screenGroup",defaultMessage:Gi.A.screenGroup})))})),Object.keys(e.screens||{}).forEach((t=>{const n=e.screens[t];n.label||(n.label=(0,Li.getUniqueLabel)(e,"screen",this.intl.formatMessage({id:"screen",defaultMessage:Gi.A.screen})))})),(0,Li.addLayoutLabel)(e)}addPageLabel(e){e.pageStructure&&e.pageStructure.forEach((t=>{const n=Object.keys(t)[0];e.pages[n]&&!e.pages[n].label&&(e.pages[n].label=(0,Li.getUniqueLabel)(e,"page",this.intl.formatMessage({id:"page",defaultMessage:Gi.A.page}))),t[n].forEach((t=>{e.pages[t]&&!e.pages[t].label&&(e.pages[t].label=(0,Li.getUniqueLabel)(e,"page",this.intl.formatMessage({id:"page",defaultMessage:Gi.A.page})))}))}))}}var pu=s(9129),fu=s(8192);class hu{static getInstance(){return hu.instance||(hu.instance=new hu,window._urlManager=hu.instance),hu.instance}init(e){let t=O.A.parse(window.location.search,{decode:!1});t=(0,Ri.compatibleParseOldUrlRule)(t),e.dispatch(Ci.queryObjectChanged(t));const n=(0,Ri.parseHashStrToObj)(window.location.hash);return e.dispatch(Ci.urlHashObjectChanged(n)),t.__env__&&("prod"===window.jimuConfig.hostEnv?console.warn("The __env__ query parameter is only valid in dev and qa environments."):window.jimuConfig.hostEnv=t.__env__),{queryObject:t,urlHashObject:n}}changePage(e){(0,bs.changePage)(e)}changeView(e,t){(0,bs.changeView)(e,t)}changeDialog(e){(0,bs.changeDialog)(e)}getQueryObject(){return(0,Bi.Vp)().getState().queryObject}changeQueryObject(e,t){const{replaceHistory:n=!1,isReplaceQueryObject:r=!1}=null!=t?t:{};(0,bs.changeQueryObject)(e,n,r)}getHashObject(){var e,t;return window.jimuConfig.isBuilder?null===(e=(0,Bi.Vp)().getState())||void 0===e?void 0:e.appStateInBuilder.urlHashObject:null===(t=(0,Bi.Vp)().getState())||void 0===t?void 0:t.urlHashObject}changeUrlHashObject(e,t){(0,bs.changeUrlHashObject)(e,t)}setWidgetUrlParams(e,t,n){var r,o;const{isReplaceHashObject:i=!1}=null!=n?n:{};if((0,Ri.isWidgetEnable)(e)){let n=y.from({});i||(n=null!==(o=null===(r=(0,Bi.Vp)().getState().urlHashObject)||void 0===r?void 0:r.getIn([e]))&&void 0!==o?o:y.from({}),n=(0,Ri.getFullEncodedUrlHashWidgetParams)(n)),n=y.from(null!=n?n:{});const s={};if(t)for(const e of Object.keys(t)){const n=t[e],r=null==n;s[e]=r?null:encodeURIComponent(n)}n=n.merge(s),null==t&&(n=null),this.setHashObject(y.from({[e]:n}),i)}}setHashObject(e,t=!1){let n=(0,Ri.filterWidgetsEnable)(e);n=(0,Ri.filterWidgetsEnabledParams)(n),(0,bs.changeUrlHashObject)(n,{isReplaceHashObject:t})}changeHashObjectByDataSourceSelection(e,t){return!!(0,Ri.isDataSelectionEnable)()&&((0,bs.changeHashObjectByDataSourceSelection)(e,t),!0)}}const gu=hu;var mu;!function(e){e.DataSource="DATA_SOURCE",e.Records="RECORDS"}(mu||(mu={}));class vu{constructor(e){e.id&&(this.id=e.id),e.name&&(this.name=e.name),e.label&&(this.label=e.label),e.icon&&(this.icon=e.icon),e.index&&(this.index=e.index),e.widgetId&&(this.widgetId=e.widgetId),e.intl&&(this.intl=e.intl)}destroy(){return null}getLabel(e){return this.label}}class yu extends vu{isSupported(e,t,n){return Promise.resolve(!0)}onExecute(e,t,n){return Promise.resolve(!0)}}var Su=s(6420),Iu=s.n(Su),bu=s(806),wu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Eu extends vu{constructor(e){super(e),this.icon=Iu()}isFeatureCollectionDataSource(e){const t=e.getDataSourceJson();return t.type===Ts.hg.FeatureLayer&&!t.url}isSupported(e,t){return wu(this,void 0,void 0,(function*(){if(e.length>1&&t!==mu.Records)return!1;for(let n=0;n<e.length;n++){if(yield this.dataSourceAllowExport(e[n],t))return!0}return!1}))}dataSourceAllowExport(e,t){return wu(this,void 0,void 0,(function*(){const{dataSource:n}=e;if(null==n||"function"!=typeof n.query||n.getStatus()===Ts.e3.NotReady)return!1;if(!Object.keys(n.getSchema()||{}).length)return!1;if(n.useNoSelectionView())return!1;const r=n;return!!(yield r.allowToExportData())&&(t!==mu.Records||this.getLocalRecrods(e).length>0)}))}checkPrivilegeAsync(){return Promise.resolve(!0)}confirm(e,t){return wu(this,void 0,void 0,(function*(){if(e.getDataSourceJson().isDataInDataSourceInstance||t===mu.Records)return{needed:!1};let n=e.count;if(null==n){const t=e;if("function"==typeof t.queryCount){n=(yield t.queryCount({})).count}}if(n>1e4){const e=(0,Vi.getIntl)();return{needed:!0,content:{title:e.formatMessage({id:"largeWarningTitle"}),content:e.formatMessage({id:"largeWarningContent"}),okLabel:e.formatMessage({id:"export"}),cancelLabel:e.formatMessage({id:"cancel"})}}}return{needed:!1}}))}getExportFileName(e){return e.getLabel()||e.getDataSourceJson().sourceLabel}getLocalRecrods(e){return e.records}getSpatialReferenceFromRecord(e){const t=e.getGeometry();if(t)return t.spatialReference}getRecords(e,t){return wu(this,arguments,void 0,(function*(e,t,n=!0){const r=e;try{const e={returnGeometry:n};null!=t?e.outFields=t:(e.outFields=["*"],e.notAddFieldsToClient=!0);return(yield r.queryAll(e)).records}catch(e){return console.error("query failed",e),[]}}))}processGeometryAndBuffer(e,t,n){return wu(this,void 0,void 0,(function*(){if(e&&(t>0||t<0)){let r;switch(n){case"esriSRUnit_Meter":r="meters";break;case"esriSRUnit_Foot":r="feet";break;case"esriSRUnit_Kilometer":r="kilometers";break;case"esriSRUnit_StatuteMile":r="miles";break;case"esriSRUnit_NauticalMile":case"esriSRUnit_USNauticalMile":r="nautical-miles"}if(null!=r){const n=(yield(0,bu.p)("esri/geometry/support/jsonUtils")).fromJSON(e);return[(yield(0,ys.createBuffer)(n,[t],r)).toJSON(),"esriGeometryPolygon"]}}return[e,e?(0,Ti.getGeometryType)(e):void 0]}))}tryCreateReplica(e,t,n,r){return wu(this,void 0,void 0,(function*(){const o=e.url;if(/rest\/services\/.*\/FeatureServer/.test(o)){const i=/rest\/services\/.*\/FeatureServer\/([0-9]+)/,s=o.match(i);if(2===(null==s?void 0:s.length)){const i=s[1],a="/FeatureServer",l=o.lastIndexOf(a),u=o.substring(0,l+a.length),c=$i.Ay.getInstance().getSessionByUrl(o),d=e.getCurrentQueryParams();try{let o=`${u}/createReplica`;(null==c?void 0:c.token)&&(o=`${o}?token=${c.token}`);const s={where:null==d?void 0:d.where,useGeometry:null!=r&&r||null!=(null==d?void 0:d.geometry),queryOption:"useFilter"};(null==n?void 0:n.length)>0&&(s.fields=n.join(","));const[a,l]=yield this.processGeometryAndBuffer(null==d?void 0:d.geometry,null==d?void 0:d.distance,null==d?void 0:d.units),p=yield(0,Qr.request)(o,{authentication:c,httpMethod:"POST",params:{layers:+i,layerQueries:{[i]:s},geometry:a,geometryType:l,replicaName:this.getExportFileName(e),transportType:"esriTransportTypeUrl",returnAttachments:!1,returnAttachmentsDataByUrl:!0,async:!0,syncModel:"none",targetType:"client",syncDirection:"download",attachmentsSyncDirection:"none",dataFormat:t,exportFieldDomainDescription:!0,f:"json"}}),f=null==p?void 0:p.statusUrl;if(f)return new Promise(((e,t)=>{const n=setInterval((()=>{(0,Qr.request)(f,{authentication:c,httpMethod:"GET"}).then((r=>{if("Completed"===r.status){const o=null==r?void 0:r.resultUrl;o?(null==c?void 0:c.token)?e(`${o}?token=${c.token}`):e(o):t(new Error("no result url found")),clearInterval(n)}else"Failed"!==r.status&&"CompletedWithErrors"!==r.status||(clearInterval(n),t(new Error("createReplica job failed")))})).catch((e=>{clearInterval(n),t(new Error(e))}))}),1e3)}))}catch(e){console.warn("createReplica not supported",e)}}}return Promise.reject(new Error("failed"))}))}saveAsLocalFile(e,t){if((0,Ti.isInIFrame)()){const n=(0,xi.getFolder)((0,Is.resolveModuleFullPath)("jimu-core")),r=`${window.location.origin}${n}/download.html`,o=window.open(r,"_blank","popup,width=320,height=320");o.onload=()=>{o.postMessage({fileName:t,blob:e},window.location.origin)}}else(0,Yr.saveAs)(e,t)}}var Au=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Ou extends Eu{constructor(e){super(e),this.icon=Iu()}isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return Au(this,void 0,void 0,(function*(){return!!(yield n.isSupported.call(this,e,t))&&e.every((e=>{var t,n;const{dataSource:r}=e,o=null===(n=(t=r).getExportOptions)||void 0===n?void 0:n.call(t);return!o||(null==o.formats||o.formats.includes(Ql.AV.JSON))}))}))}onExecute(e,t){return Au(this,void 0,void 0,(function*(){if(e.length>1)return this.batchExport(e);const n=e[0],{dataSource:r}=n,o=yield this.confirm(r,t);if(o.needed){const{ConfirmDialog:e}=yield(0,Is.loadModule)("jimu-ui");return f.createElement(e,{level:"info",title:o.content.title,hasNotShowAgainOption:!1,content:o.content.content,confirmLabel:o.content.okLabel,cancelLabel:o.content.cancelLabel,onConfirm:()=>{this.doExport(n,t)}})}return this.doExport(n,t)}))}processDataRecord(e,t){const n=e.toJson();if((null==n?void 0:n.attributes)&&(null==t?void 0:t.length)>0&&"*"!==t[0]){const e=n.attributes;n.attributes={},Object.keys(null!=e?e:{}).forEach((r=>{t.includes(r)&&(n.attributes[r]=e[r])}))}return n}exportRecords(e,t,n){const r=t.map((e=>this.processDataRecord(e,n))),o=new Blob([JSON.stringify(r)],{type:"text/plain;charset=utf-8"});this.saveAsLocalFile(o,`${this.getExportFileName(e)}.json`)}batchExport(e){return Au(this,void 0,void 0,(function*(){const{JSZip:t}=yield(0,Is.loadModule)("jimu-core/jszip"),n=new t;for(const t of e){const{dataSource:e,fields:r}=t;if(yield this.dataSourceAllowExport(t,mu.Records)){const o=this.getLocalRecrods(t).map((e=>this.processDataRecord(e,r))),i=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8"});n.file(`${this.getExportFileName(e)}.json`,i)}}return n.generateAsync({type:"blob"}).then((e=>{this.saveAsLocalFile(e,"json_datasets.zip")})),!0}))}doExport(e,t){return Au(this,void 0,void 0,(function*(){const{dataSource:n,fields:r}=e;if(t===mu.Records)return this.exportRecords(n,this.getLocalRecrods(e),r),!0;try{const e=yield this.tryCreateReplica(n,"json",r);return window.open(e,"_blank"),!0}catch(e){}const o=yield this.getRecords(n,r);return this.exportRecords(n,o),!0}))}}function Cu(){var e;const t=null!==(e=(0,Bi.Vp)().getState().appContext.locale)&&void 0!==e?e:"en",[,n]=(0,Ti.formatNumber)(123456789.12345678,!1);return","===Vi.getDecimalSeparator(t)||n.includes(",")?";":","}function Tu(e){return e.replace(/\r\n?/g,"\n").replace(/\n/g," ")}function xu(e,t,n){return t.find(((t,r)=>{var o;return(null!==(o=null==n?void 0:n[r])&&void 0!==o?o:t)===e}))?xu(`_${e}`,t,n):e}function Ru(e,t,n){let r,o;const i=e.getSchema();if(null!=(null==i?void 0:i.fields))r=null!=n?n:Object.keys(i.fields),r=r.filter((e=>null!=i.fields[e])),o=r.map((e=>i.fields[e].alias));else{const e=t[0];r=null!=n?n:Object.keys(e.getData())}const s=e.getIdField();if(s&&r.includes(s)){const e=r.indexOf(s);if(r.splice(e,1),r.unshift(s),o){const t=o.splice(e,1)[0];o.unshift(t)}}const a=function(e){return"esriGeometryPoint"===e.getGeometryType()}(e);let l=function(e,t,n){const r=Cu();let o="",i=!1,s=!1;if(e.forEach(((n,a)=>{var l;let u=null!==(l=null==t?void 0:t[a])&&void 0!==l?l:n;u.includes(r)&&(u=`"${u}"`),i=i||"x"===u,s=s||"y"===u,a!==e.length-1?o+=`${u}${r}`:o+=u})),n){const n=xu("x",e,t),i=xu("y",e,t);o+=`${r}${n}${r}${i}`}return`${o}\r\n`}(r,o,a);return t.forEach((e=>{l+=function(e,t,n){const r=Vi.getIntl(),o=Cu();let i="";if(t.forEach(((n,s)=>{var a;let l=null!==(a=e.getFormattedFieldValue(n,r))&&void 0!==a?a:"";l.includes('"')&&(l=l.replace(/"/g,'""')),l.includes(o)&&(l=`"${l}"`),s!==t.length-1?i+=Tu(`${l}${o}`):i+=Tu(l)})),n){const t=e.getGeometry();if(t){const[e,n]=(0,Ti.formatNumber)(t.x,!1),[r,s]=(0,Ti.formatNumber)(t.y,!1);i+=`${o}${e}${n}${o}${r}${s}`}}return`${i}\r\n`}(e,r,a)})),new Blob(["\ufeff",l],{type:"text/plain;charset=utf-8"})}var Pu=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Du extends Eu{isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return Pu(this,void 0,void 0,(function*(){return!!(yield n.isSupported.call(this,e,t))&&e.every((e=>{var t,n;const{dataSource:r}=e,o=null===(n=(t=r).getExportOptions)||void 0===n?void 0:n.call(t);return!o||(null==o.formats||o.formats.includes(Ql.AV.CSV))}))}))}onExecute(e,t){return Pu(this,void 0,void 0,(function*(){if(e.length>1)return this.batchExport(e);const n=e[0],{dataSource:r}=n,o=yield this.confirm(r,t);if(o.needed){const{ConfirmDialog:e}=yield(0,Is.loadModule)("jimu-ui");return f.createElement(e,{level:"info",title:o.content.title,hasNotShowAgainOption:!1,content:o.content.content,confirmLabel:o.content.okLabel,cancelLabel:o.content.cancelLabel,onConfirm:()=>{this.doExport(n,t)}})}return this.doExport(n,t)}))}exportRecords(e,t,n){const r=Ru(e,t,n);this.saveAsLocalFile(r,`${this.getExportFileName(e)}.csv`)}batchExport(e){return Pu(this,void 0,void 0,(function*(){const{JSZip:t}=yield(0,Is.loadModule)("jimu-core/jszip"),n=new t;for(const t of e){const{dataSource:e,fields:r}=t;if(yield this.dataSourceAllowExport(t,mu.Records)){const o=Ru(e,this.getLocalRecrods(t),r);n.file(`${this.getExportFileName(e)}.csv`,o)}}return n.generateAsync({type:"blob"}).then((e=>{this.saveAsLocalFile(e,"csv_datasets.zip")})),!0}))}doExport(e,t){return Pu(this,void 0,void 0,(function*(){const{dataSource:n,fields:r}=e;if(t===mu.Records)return this.exportRecords(n,this.getLocalRecrods(e),r),!0;try{const e=yield this.tryCreateReplica(n,"csv",r);return window.open(e,"_blank"),!0}catch(e){}const o=yield this.getRecords(n,r);return this.exportRecords(n,o,r),!0}))}}var _u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function Lu(e){let t=0,n=0;const r=e.length;let o,i=e[n];for(;n<r-1;n++)o=e[n+1],t+=(o[0]-i[0])*(o[1]+i[1]),i=o;return t>=0}function Mu(e,t,n,r){const o=(r[0]-n[0])*(e[1]-n[1])-(r[1]-n[1])*(e[0]-n[0]),i=(t[0]-e[0])*(e[1]-n[1])-(t[1]-e[1])*(e[0]-n[0]),s=(r[1]-n[1])*(t[0]-e[0])-(r[0]-n[0])*(t[1]-e[1]);if(0!==s){const e=o/s,t=i/s;if(e>=0&&e<=1&&t>=0&&t<=1)return!0}return!1}function ku(e,t){for(let n=0;n<e.length-1;n++)for(let r=0;r<t.length-1;r++)if(Mu(e[n],e[n+1],t[r],t[r+1]))return!0;return!1}function Nu(e,t){const n=ku(e,t),r=function(e,t){let n=!1;for(let r=-1,o=e.length,i=o-1;++r<o;i=r)(e[r][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[r][1])&&t[0]<(e[i][0]-e[r][0])*(t[1]-e[r][1])/(e[i][1]-e[r][1])+e[r][0]&&(n=!n);return n}(e,t[0]);return!(n||!r)}function ju(e){var t;let n={};const r=e;"number"==typeof(null==r?void 0:r.x)&&"number"==typeof(null==r?void 0:r.y)&&(n.type="Point",n.coordinates=[r.x,r.y],"number"==typeof r.z&&n.coordinates.push(r.z));const o=e;(null==o?void 0:o.points)&&(n.type="MultiPoint",n.coordinates=o.points.slice(0));const i=e;(null==i?void 0:i.paths)&&(1===i.paths.length?(n.type="LineString",n.coordinates=i.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=i.paths.slice(0)));const s=e;(null==s?void 0:s.rings)&&(n=function(e){const t=[],n=[];let r,o,i;for(let r=0;r<e.length;r++){const o=(function(e,t){for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((s=e[r].slice(0))[0],s[s.length-1])||s.push(s[0]),s);if(!(o.length<4))if(Lu(o)){const e=[o.slice().reverse()];t.push(e)}else n.push(o.slice().reverse())}var s;const a=[];for(;n.length;){i=n.pop();let e=!1;for(r=t.length-1;r>=0;r--)if(o=t[r][0],Nu(o,i)){t[r].push(i),e=!0;break}e||a.push(i)}for(;a.length;){i=a.pop();let e=!1;for(r=t.length-1;r>=0;r--)if(o=t[r][0],ku(o,i)){t[r].push(i),e=!0;break}e||t.push([i.reverse()])}return 1===t.length?{type:"Polygon",coordinates:t[0]}:{type:"MultiPolygon",coordinates:t}}(s.rings.slice(0)));const a=e;return"number"==typeof(null==a?void 0:a.xmin)&&"number"==typeof(null==a?void 0:a.ymin)&&"number"==typeof(null==a?void 0:a.xmax)&&"number"==typeof(null==a?void 0:a.ymax)&&(n.type="Polygon",n.coordinates=[[[a.xmax,a.ymax],[a.xmin,a.ymax],[a.xmin,a.ymin],[a.xmax,a.ymin],[a.xmax,a.ymax]]]),(null===(t=null==e?void 0:e.spatialReference)||void 0===t?void 0:t.wkid)&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n}function Uu(e,t,n,r){const o={},i=e.getGeometry(),s=e.getData();if((i||s)&&(o.type="Feature",o.geometry=i?ju(i):null,s&&(null==r?void 0:r.length)>0&&"*"!==r[0]?(o.properties={},Object.keys(s).forEach((t=>{var i;r.includes(t)&&(o.properties[t]=null!==(i=e.getFormattedFieldValue(t,n))&&void 0!==i?i:"")}))):o.properties=s?function(e,t,n){var r;const o={};for(const i in t)t.hasOwnProperty(i)&&(o[i]=null!==(r=e.getFormattedFieldValue(i,n))&&void 0!==r?r:"");return o}(e,s,n):null,s))try{o.id=function(e,t){const n=t?[t,"OBJECTID","FID"]:["OBJECTID","FID"];for(let t=0;t<n.length;t++){const r=n[t];if(r in e&&("string"==typeof e[r]||"number"==typeof e[r]))return e[r]}throw Error("No valid id attribute found")}(s,t)}catch(e){}return JSON.stringify(o.geometry)===JSON.stringify({})&&(o.geometry=null),o}function Fu(e,t,n){const r={},o=Vi.getIntl();r.type="FeatureCollection",r.features=[];for(let i=0;i<e.length;i++)r.features.push(Uu(e[i],t,o,n));return r}function Bu(e){return _u(this,void 0,void 0,(function*(){if(!e||0===e.length)return e;try{const t=yield(0,bu.p)("esri/geometry/SpatialReference");return yield(0,ys.projectDataRecordsToSpatialReference)(e,t.WGS84)}catch(e){console.error(e)}return e}))}var $u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Vu extends Eu{isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return $u(this,void 0,void 0,(function*(){const r=e[0],{dataSource:o}=r;return!(!(yield n.isSupported.call(this,e,t))||null==o.getGeometryType())&&e.every((e=>{var t,n;const{dataSource:r}=e,o=null===(n=(t=r).getExportOptions)||void 0===n?void 0:n.call(t);return!o||(null==o.formats||o.formats.includes(Ql.AV.GeoJSON))}))}))}onExecute(e,t){return $u(this,void 0,void 0,(function*(){if(e.length>1)return this.batchExport(e);const n=e[0],{dataSource:r}=n,o=yield this.confirm(r,t);if(o.needed){const{ConfirmDialog:e}=yield(0,Is.loadModule)("jimu-ui");return f.createElement(e,{level:"info",title:o.content.title,hasNotShowAgainOption:!1,content:o.content.content,confirmLabel:o.content.okLabel,cancelLabel:o.content.cancelLabel,onConfirm:()=>{this.doExport(n,t)}})}return this.doExport(n,t)}))}exportRecords(e,t,n){return $u(this,void 0,void 0,(function*(){var r;const o=Fu(yield Bu(t),null===(r=e.getSchema())||void 0===r?void 0:r.idField,n),i=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8"});this.saveAsLocalFile(i,`${this.getExportFileName(e)}.geojson`)}))}batchExport(e){return $u(this,void 0,void 0,(function*(){var t;const{JSZip:n}=yield(0,Is.loadModule)("jimu-core/jszip"),r=new n;for(const n of e){const{dataSource:e,fields:o}=n;if(yield this.dataSourceAllowExport(n,mu.Records)){const i=Fu(yield Bu(this.getLocalRecrods(n)),null===(t=e.getSchema())||void 0===t?void 0:t.idField,o),s=new Blob([JSON.stringify(i)],{type:"text/plain;charset=utf-8"});r.file(`${this.getExportFileName(e)}.geojson`,s)}}return r.generateAsync({type:"blob"}).then((e=>{this.saveAsLocalFile(e,"geojson_datasets.zip")})),!0}))}doExport(e,t){return $u(this,void 0,void 0,(function*(){const{dataSource:n,fields:r}=e;if(t===mu.Records)return this.exportRecords(n,this.getLocalRecrods(e),r),!0;try{const e=yield this.tryCreateReplica(n,"geojson",r);return window.open(e,"_blank"),!0}catch(e){}const o=yield this.getRecords(n,r);return this.exportRecords(n,o),!0}))}}var Gu=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Wu=Math.abs,Hu=String.fromCharCode,qu=Object.assign;function zu(e){return e.trim()}function Ku(e,t,n){return e.replace(t,n)}function Ju(e,t){return e.indexOf(t)}function Yu(e,t){return 0|e.charCodeAt(t)}function Qu(e,t,n){return e.slice(t,n)}function Xu(e){return e.length}function Zu(e){return e.length}function ec(e,t){return t.push(e),e}var tc=1,nc=1,rc=0,oc=0,ic=0,sc="";function ac(e,t,n,r,o,i,s){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:tc,column:nc,length:s,return:""}}function lc(e,t){return qu(ac("",null,null,"",null,null,0),e,{length:-e.length},t)}function uc(){return ic=oc>0?Yu(sc,--oc):0,nc--,10===ic&&(nc=1,tc--),ic}function cc(){return ic=oc<rc?Yu(sc,oc++):0,nc++,10===ic&&(nc=1,tc++),ic}function dc(){return Yu(sc,oc)}function pc(){return oc}function fc(e,t){return Qu(sc,e,t)}function hc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gc(e){return tc=nc=1,rc=Xu(sc=e),oc=0,[]}function mc(e){return sc="",e}function vc(e){return zu(fc(oc-1,Ic(91===e?e+2:40===e?e+1:e)))}function yc(e){for(;(ic=dc())&&ic<33;)cc();return hc(e)>2||hc(ic)>3?"":" "}function Sc(e,t){for(;--t&&cc()&&!(ic<48||ic>102||ic>57&&ic<65||ic>70&&ic<97););return fc(e,pc()+(t<6&&32==dc()&&32==cc()))}function Ic(e){for(;cc();)switch(ic){case e:return oc;case 34:case 39:34!==e&&39!==e&&Ic(ic);break;case 40:41===e&&Ic(e);break;case 92:cc()}return oc}function bc(e,t){for(;cc()&&e+ic!==57&&(e+ic!==84||47!==dc()););return"/*"+fc(t,oc-1)+"*"+Hu(47===e?e:cc())}function wc(e){for(;!hc(dc());)cc();return fc(e,oc)}var Ec="-ms-",Ac="-moz-",Oc="-webkit-",Cc="comm",Tc="rule",xc="decl",Rc="@keyframes";function Pc(e,t){for(var n="",r=Zu(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function Dc(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case xc:return e.return=e.return||e.value;case Cc:return"";case Rc:return e.return=e.value+"{"+Pc(e.children,r)+"}";case Tc:e.value=e.props.join(",")}return Xu(n=Pc(e.children,r))?e.return=e.value+"{"+n+"}":""}function _c(e){return mc(Lc("",null,null,null,[""],e=gc(e),0,[0],e))}function Lc(e,t,n,r,o,i,s,a,l){for(var u=0,c=0,d=s,p=0,f=0,h=0,g=1,m=1,v=1,y=0,S="",I=o,b=i,w=r,E=S;m;)switch(h=y,y=cc()){case 40:if(108!=h&&58==Yu(E,d-1)){-1!=Ju(E+=Ku(vc(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:E+=vc(y);break;case 9:case 10:case 13:case 32:E+=yc(h);break;case 92:E+=Sc(pc()-1,7);continue;case 47:switch(dc()){case 42:case 47:ec(kc(bc(cc(),pc()),t,n),l);break;default:E+="/"}break;case 123*g:a[u++]=Xu(E)*v;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:-1==v&&(E=Ku(E,/\f/g,"")),f>0&&Xu(E)-d&&ec(f>32?Nc(E+";",r,n,d-1):Nc(Ku(E," ","")+";",r,n,d-2),l);break;case 59:E+=";";default:if(ec(w=Mc(E,t,n,u,c,o,a,S,I=[],b=[],d),i),123===y)if(0===c)Lc(E,t,w,w,I,i,d,a,b);else switch(99===p&&110===Yu(E,3)?100:p){case 100:case 108:case 109:case 115:Lc(e,w,w,r&&ec(Mc(e,w,w,0,0,o,a,S,o,I=[],d),b),o,b,d,a,r?I:b);break;default:Lc(E,w,w,w,[""],b,0,a,b)}}u=c=f=0,g=v=1,S=E="",d=s;break;case 58:d=1+Xu(E),f=h;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==uc())continue;switch(E+=Hu(y),y*g){case 38:v=c>0?1:(E+="\f",-1);break;case 44:a[u++]=(Xu(E)-1)*v,v=1;break;case 64:45===dc()&&(E+=vc(cc())),p=dc(),c=d=Xu(S=E+=wc(pc())),y++;break;case 45:45===h&&2==Xu(E)&&(g=0)}}return i}function Mc(e,t,n,r,o,i,s,a,l,u,c){for(var d=o-1,p=0===o?i:[""],f=Zu(p),h=0,g=0,m=0;h<r;++h)for(var v=0,y=Qu(e,d+1,d=Wu(g=s[h])),S=e;v<f;++v)(S=zu(g>0?p[v]+" "+y:Ku(y,/&\f/g,p[v])))&&(l[m++]=S);return ac(e,t,n,0===o?Tc:a,l,u,c)}function kc(e,t,n){return ac(e,t,n,Cc,Hu(ic),Qu(e,2,-2),0)}function Nc(e,t,n,r){return ac(e,t,n,xc,Qu(e,0,r),Qu(e,r+1,-1),r)}var jc=function(e,t,n){for(var r=0,o=0;r=o,o=dc(),38===r&&12===o&&(t[n]=1),!hc(o);)cc();return fc(e,oc)},Uc=function(e,t){return mc(function(e,t){var n=-1,r=44;do{switch(hc(r)){case 0:38===r&&12===dc()&&(t[n]=1),e[n]+=jc(oc-1,t,n);break;case 2:e[n]+=vc(r);break;case 4:if(44===r){e[++n]=58===dc()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Hu(r)}}while(r=cc());return e}(gc(e),t))},Fc=new WeakMap,Bc=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Fc.get(n))&&!r){Fc.set(e,!0);for(var o=[],i=Uc(t,o),s=n.props,a=0,l=0;a<i.length;a++)for(var u=0;u<s.length;u++,l++)e.props[l]=o[a]?i[a].replace(/&\f/g,s[u]):s[u]+" "+i[a]}}},$c=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Vc(e,t){switch(function(e,t){return 45^Yu(e,0)?(((t<<2^Yu(e,0))<<2^Yu(e,1))<<2^Yu(e,2))<<2^Yu(e,3):0}(e,t)){case 5103:return Oc+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Oc+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Oc+e+Ac+e+Ec+e+e;case 6828:case 4268:return Oc+e+Ec+e+e;case 6165:return Oc+e+Ec+"flex-"+e+e;case 5187:return Oc+e+Ku(e,/(\w+).+(:[^]+)/,Oc+"box-$1$2"+Ec+"flex-$1$2")+e;case 5443:return Oc+e+Ec+"flex-item-"+Ku(e,/flex-|-self/,"")+e;case 4675:return Oc+e+Ec+"flex-line-pack"+Ku(e,/align-content|flex-|-self/,"")+e;case 5548:return Oc+e+Ec+Ku(e,"shrink","negative")+e;case 5292:return Oc+e+Ec+Ku(e,"basis","preferred-size")+e;case 6060:return Oc+"box-"+Ku(e,"-grow","")+Oc+e+Ec+Ku(e,"grow","positive")+e;case 4554:return Oc+Ku(e,/([^-])(transform)/g,"$1"+Oc+"$2")+e;case 6187:return Ku(Ku(Ku(e,/(zoom-|grab)/,Oc+"$1"),/(image-set)/,Oc+"$1"),e,"")+e;case 5495:case 3959:return Ku(e,/(image-set\([^]*)/,Oc+"$1$`$1");case 4968:return Ku(Ku(e,/(.+:)(flex-)?(.*)/,Oc+"box-pack:$3"+Ec+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Oc+e+e;case 4095:case 3583:case 4068:case 2532:return Ku(e,/(.+)-inline(.+)/,Oc+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Xu(e)-1-t>6)switch(Yu(e,t+1)){case 109:if(45!==Yu(e,t+4))break;case 102:return Ku(e,/(.+:)(.+)-([^]+)/,"$1"+Oc+"$2-$3$1"+Ac+(108==Yu(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ju(e,"stretch")?Vc(Ku(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Yu(e,t+1))break;case 6444:switch(Yu(e,Xu(e)-3-(~Ju(e,"!important")&&10))){case 107:return Ku(e,":",":"+Oc)+e;case 101:return Ku(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Oc+(45===Yu(e,14)?"inline-":"")+"box$3$1"+Oc+"$2$3$1"+Ec+"$2box$3")+e}break;case 5936:switch(Yu(e,t+11)){case 114:return Oc+e+Ec+Ku(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Oc+e+Ec+Ku(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Oc+e+Ec+Ku(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Oc+e+Ec+e+e}return e}var Gc=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case xc:e.return=Vc(e.value,e.length);break;case Rc:return Pc([lc(e,{value:Ku(e.value,"@","@"+Oc)})],r);case Tc:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Pc([lc(e,{props:[Ku(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Pc([lc(e,{props:[Ku(t,/:(plac\w+)/,":"+Oc+"input-$1")]}),lc(e,{props:[Ku(t,/:(plac\w+)/,":-moz-$1")]}),lc(e,{props:[Ku(t,/:(plac\w+)/,Ec+"input-$1")]})],r)}return""}))}}],Wc=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,o,i=e.stylisPlugins||Gc,s={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var l,u,c,d,p=[Dc,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],f=(u=[Bc,$c].concat(i,p),c=Zu(u),function(e,t,n,r){for(var o="",i=0;i<c;i++)o+=u[i](e,t,n,r)||"";return o});o=function(e,t,n,r){l=n,function(e){Pc(_c(e),f)}(e?e+"{"+t.styles+"}":t.styles),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new Gu({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return h.sheet.hydrate(a),h},Hc=s(8168),qc=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}},zc=s(4146),Kc=s.n(zc);function Jc(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}var Yc=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Qc=function(e,t,n){Yc(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}};var Xc={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Zc(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var ed=!1,td=/[A-Z]|^ms/g,nd=/_EMO_([^_]+?)_([^]*?)_EMO_/g,rd=function(e){return 45===e.charCodeAt(1)},od=function(e){return null!=e&&"boolean"!=typeof e},id=Zc((function(e){return rd(e)?e:e.replace(td,"-$&").toLowerCase()})),sd=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(nd,(function(e,t,n){return ud={name:t,styles:n,next:ud},t}))}return 1===Xc[e]||rd(e)||"number"!=typeof t||0===t?t:t+"px"},ad="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function ld(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var o=n;if(1===o.anim)return ud={name:o.name,styles:o.styles,next:ud},o.name;var i=n;if(void 0!==i.styles){var s=i.next;if(void 0!==s)for(;void 0!==s;)ud={name:s.name,styles:s.styles,next:ud},s=s.next;return i.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=ld(e,t,n[o])+";";else for(var i in n){var s=n[i];if("object"!=typeof s){var a=s;null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":od(a)&&(r+=id(i)+":"+sd(i,a)+";")}else{if("NO_COMPONENT_SELECTOR"===i&&ed)throw new Error(ad);if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var l=ld(e,t,s);switch(i){case"animation":case"animationName":r+=id(i)+":"+l+";";break;default:r+=i+"{"+l+"}"}}else for(var u=0;u<s.length;u++)od(s[u])&&(r+=id(i)+":"+sd(i,s[u])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var a=ud,l=n(e);return ud=a,ld(e,t,l)}}var u=n;if(null==t)return u;var c=t[u];return void 0!==c?c:u}var ud,cd=/label:\s*([^\s;{]+)\s*(;|$)/g;function dd(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";ud=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=ld(n,t,i)):o+=i[0];for(var s=1;s<e.length;s++){if(o+=ld(n,t,e[s]),r)o+=i[s]}cd.lastIndex=0;for(var a,l="";null!==(a=cd.exec(o));)l+="-"+a[1];var u=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+l;return{name:u,styles:o,next:ud}}var pd=!!f.useInsertionEffect&&f.useInsertionEffect,fd=pd||function(e){return e()},hd=pd||f.useLayoutEffect,gd=f.createContext("undefined"!=typeof HTMLElement?Wc({key:"css"}):null),md=gd.Provider,vd=function(e){return(0,f.forwardRef)((function(t,n){var r=(0,f.useContext)(gd);return e(t,r,n)}))},yd=f.createContext({}),Sd=qc((function(e){return qc((function(t){return function(e,t){return"function"==typeof t?t(e):(0,Hc.A)({},e,t)}(e,t)}))}));var Id,bd,wd={}.hasOwnProperty,Ed="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ad=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Yc(t,n,r),fd((function(){return Qc(t,n,r)})),null},Od=vd((function(e,t,n){var r=e.css;"string"==typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var o=e[Ed],i=[r],s="";"string"==typeof e.className?s=Jc(t.registered,i,e.className):null!=e.className&&(s=e.className+" ");var a=dd(i,void 0,f.useContext(yd));s+=t.key+"-"+a.name;var l={};for(var u in e)wd.call(e,u)&&"css"!==u&&u!==Ed&&(l[u]=e[u]);return l.className=s,n&&(l.ref=n),f.createElement(f.Fragment,null,f.createElement(Ad,{cache:t,serialized:a,isStringTag:"string"==typeof o}),f.createElement(o,l))})),Cd=function(e,t){var n=arguments;if(null==t||!wd.call(t,"css"))return f.createElement.apply(void 0,n);var r=n.length,o=new Array(r);o[0]=Od,o[1]=function(e,t){var n={};for(var r in t)wd.call(t,r)&&(n[r]=t[r]);return n[Ed]=e,n}(e,t);for(var i=2;i<r;i++)o[i]=n[i];return f.createElement.apply(null,o)};Id=Cd||(Cd={}),bd||(bd=Id.JSX||(Id.JSX={}));var Td=vd((function(e,t){var n=dd([e.styles],void 0,f.useContext(yd)),r=f.useRef();return hd((function(){var e=t.key+"-global",o=new t.sheet.constructor({key:e,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),i=!1,s=document.querySelector('style[data-emotion="'+e+" "+n.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),null!==s&&(i=!0,s.setAttribute("data-emotion",e),o.hydrate([s])),r.current=[o,i],function(){o.flush()}}),[t]),hd((function(){var e=r.current,o=e[0];if(e[1])e[1]=!1;else{if(void 0!==n.next&&Qc(t,n.next,!0),o.tags.length){var i=o.tags[o.tags.length-1].nextElementSibling;o.before=i,o.flush()}t.insert("",n,o,!1)}}),[t,n.name]),null}));function xd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return dd(t)}var Rd=s(2733);function Pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dd(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function _d(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Md(e,t,"get"))}function Ld(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Md(e,t,"set"),n),n}function Md(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var kd="undefined"!=typeof Symbol?Symbol.toStringTag:"@@toStringTag",Nd=new WeakMap,jd=new WeakMap;class Ud{constructor(e){var{executor:t=()=>{},internals:n=qd(),promise:r=new Promise(((e,r)=>t(e,r,(e=>{n.onCancelList.push(e)}))))}=e;Dd(this,Nd,{writable:!0,value:void 0}),Dd(this,jd,{writable:!0,value:void 0}),Pd(this,kd,"CancelablePromise"),this.cancel=this.cancel.bind(this),Ld(this,Nd,n),Ld(this,jd,r||new Promise(((e,r)=>t(e,r,(e=>{n.onCancelList.push(e)})))))}then(e,t){return Wd(_d(this,jd).then(Gd(e,_d(this,Nd)),Gd(t,_d(this,Nd))),_d(this,Nd))}catch(e){return Wd(_d(this,jd).catch(Gd(e,_d(this,Nd))),_d(this,Nd))}finally(e,t){return t&&_d(this,Nd).onCancelList.push(e),Wd(_d(this,jd).finally(Gd((()=>{if(e)return t&&(_d(this,Nd).onCancelList=_d(this,Nd).onCancelList.filter((t=>t!==e))),e()}),_d(this,Nd))),_d(this,Nd))}cancel(){_d(this,Nd).isCanceled=!0;var e=_d(this,Nd).onCancelList;for(var t of(_d(this,Nd).onCancelList=[],e))if("function"==typeof t)try{t()}catch(e){console.error(e)}}isCanceled(){return!0===_d(this,Nd).isCanceled}}class Fd extends Ud{constructor(e){super({executor:e})}}Pd(Fd,"all",(function(e){return Hd(e,Promise.all(e))})),Pd(Fd,"allSettled",(function(e){return Hd(e,Promise.allSettled(e))})),Pd(Fd,"any",(function(e){return Hd(e,Promise.any(e))})),Pd(Fd,"race",(function(e){return Hd(e,Promise.race(e))})),Pd(Fd,"resolve",(function(e){return $d(Promise.resolve(e))})),Pd(Fd,"reject",(function(e){return $d(Promise.reject(e))})),Pd(Fd,"isCancelable",Vd);const Bd=Fd;function $d(e){return Wd(e,qd())}function Vd(e){return e instanceof Fd||e instanceof Ud}function Gd(e,t){if(e)return n=>{if(!t.isCanceled){var r=e(n);return Vd(r)&&t.onCancelList.push(r.cancel),r}return n}}function Wd(e,t){return new Ud({internals:t,promise:e})}function Hd(e,t){var n=qd();return n.onCancelList.push((()=>{for(var t of e)Vd(t)&&t.cancel()})),new Ud({internals:n,promise:t})}function qd(){return{isCanceled:!1,onCancelList:[]}}var zd=s(2851),Kd=s(2031),Jd=s(5208),Yd=s(6984),Qd=s(8446),Xd=s(5353),Zd=s(3149);const ep=function(e,t,n){if(!(0,Zd.A)(n))return!1;var r=typeof t;return!!("number"==r?(0,Qd.A)(n)&&(0,Xd.A)(t,n.length):"string"==r&&t in n)&&(0,Yd.A)(n[t],e)};const tp=function(e){return(0,Jd.A)((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,s&&ep(n[0],n[1],s)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var a=n[r];a&&e(t,a,r,i)}return t}))};var np=s(7271),rp=s(7405),op=Object.prototype.hasOwnProperty;const ip=tp((function(e,t){if((0,np.A)(t)||(0,Qd.A)(t))(0,Kd.A)(t,(0,rp.A)(t),e);else for(var n in t)op.call(t,n)&&(0,zd.A)(e,n,t[n])}));var sp=s(4741),ap=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const{useRef:lp,useEffect:up,useMemo:cp,useCallback:dp,useState:pp}=f,fp=(e,t,n)=>{const r=Cl(),o=f.useMemo((()=>{const r=null==e&&null==t&&null==n?[Gi.A]:[e,t,n].filter((e=>null!=e));return ip({},...r)}),[e,t,n]);return dp(((e,t)=>r.formatMessage({id:e,defaultMessage:o[e]},t)),[r,o])},hp=e=>{const t=lp(e);return t.current=e,t},gp=(e,t,n)=>cp((()=>null==e&&null==t?null:r=>{(0,Ti.setRef)(e,r),(0,Ti.setRef)(t,r),(0,Ti.setRef)(n,r)}),[e,t,n]),mp=e=>{const t=lp(null),n=gp(t,e);return[t,dp((e=>{(0,Ti.setRef)(n,e)}),[n])]},vp=()=>{const e=lp(!0);return e.current?(e.current=!1,!0):e.current},yp=(e,t)=>{const n=vp();up((()=>{if(!n)return e()}),t)},Sp=e=>{up(e,[])},Ip=e=>{const t=lp(e);t.current=e,Sp((()=>()=>t.current()))},bp=e=>{const t=f.useRef(e);return up((()=>{t.current=e})),f.useCallback(((...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n(...e)}),[])},wp=({controlled:e,default:t})=>{const{current:n}=lp(void 0!==e),[r,o]=pp(t);return[n?e:r,f.useCallback((e=>{n||o(e)}),[]),n]},Ep=e=>(0,v.useSelector)((t=>(0,Ti.isWidgetSelected)(e,t))),Ap=e=>(0,v.useSelector)((t=>{var n,r;return(null===(r=null===(n=t.widgetsRuntimeInfo)||void 0===n?void 0:n[e])||void 0===r?void 0:r.state)===Os.YG.Active})),Op=()=>(0,v.useSelector)((e=>e.browserSizeMode))===Os.rH.Small,Cp=()=>{const e=lp([]);up((()=>function(){e.current.forEach((e=>{e.cancel()})),e.current=[]}),[]);return dp((t=>{const n=$d(t);return e.current.push(n),n}),[])},Tp=e=>{const t=lp();return up((()=>{t.current=e})),t.current},xp=(e,t)=>{const n=hp(e),r=hp(t),o=f.useRef(t);f.useEffect((()=>{const e=o.current;n.current(e),o.current=r.current}),t)},Rp={leading:!0,trailing:!1},Pp=(e,t=200,n=Rp)=>{const r=hp(t),o=hp(n),i=bp(e),s=f.useMemo((()=>(0,sp.A)(i,r.current,o.current)),[i,r,o]);return f.useEffect((()=>()=>{s.cancel()}),[s]),s},Dp={},_p=e=>{const[t,n]=f.useState(!1),r=f.useRef(null);return f.useEffect((()=>{Dp[e]?(r.current=Dp[e],n(!0)):(0,Is.loadModule)(e).then((t=>{Dp[e]=t,r.current=t,n(!0)})).catch((e=>{console.error(e)}))}),[]),[t,r.current]},Lp=(e,t)=>{const[n,r]=_p(e),o=null==r?void 0:r[t];return r&&!o&&console.error(`The component ${t} is not found in the module ${e}`),[n,o]},Mp=e=>{const[t,n]=f.useState(!1),r=f.useRef(null);return f.useEffect((()=>{(0,bu.p)(e).then((e=>{e&&(r.current=e,n(!0))})).catch((e=>{console.error("loadArcGISJSAPIModule error",e)}))}),[e]),[t,r.current]},kp=()=>{const[e]=Mp("esri/kernel");return e},Np=()=>{const[e,t]=f.useState(!1),n=f.useRef(null);return f.useEffect((()=>{!function(){ap(this,void 0,void 0,(function*(){let e=null;try{yield(0,bu.p)("esri/kernel"),yield function(){return ap(this,void 0,void 0,(function*(){var e;try{if(!(null===(e=window.jimuConfig)||void 0===e?void 0:e.isBuilder))return;const[t,n,r,o,i,s,a,l]=yield(0,bu.e)(["esri/geometry/Geometry","esri/geometry/Extent","esri/geometry/Mesh","esri/geometry/Multipoint","esri/geometry/Point","esri/geometry/Polygon","esri/geometry/Polyline","esri/geometry/Circle"]),u="esri.geometry.Extent",c="esri.geometry.Mesh",d="esri.geometry.Multipoint",p="esri.geometry.Point",f="esri.geometry.Polygon",h="esri.geometry.Polyline",g="esri.geometry.Circle";function m(e,t){Object.defineProperty(e,Symbol.hasInstance,{value(e){try{const n=null==e?void 0:e.declaredClass;return!(!n||!t.includes(n))||Function.prototype[Symbol.hasInstance].call(this,e)}catch(e){return!1}}})}m(t,["esri.geometry.Geometry",u,c,d,p,f,h,g]),m(n,[u]),m(r,[c]),m(o,[d]),m(i,[p]),m(s,[f,g]),m(a,[h]),m(l,[g])}catch(v){console.error("overrideGeometryInstanceof error",v)}}))}();const t=yield(0,Is.loadModule)("arcgis-coding-components");e=null==t?void 0:t.ArcgisArcadeEditor}catch(e){console.error("load ArcgisArcadeEditor error",e)}e&&(n.current=e,t(!0))}))}()}),[]),[e,n.current]};var jp=s(7896),Up=s.n(jp);const{useEffect:Fp}=f,Bp="jimu-keyboard-nav",$p="jimu-interactive-node";function Vp(e){if(Gp(document.body,e),window.jimuConfig.isBuilder){const t=document.querySelector(`iframe[name="${Os.mX}"]`);Gp((null==t?void 0:t.contentDocument.body)||(null==t?void 0:t.contentWindow.document.body),e)}else if(window.jimuConfig.isInBuilder){Gp(window.parent.document.body,e)}}function Gp(e,t){e&&(t?e.classList.add(Bp):e.classList.remove(Bp))}function Wp(){return document.body.classList.contains(Bp)}function Hp(e,t=!1){e&&(t||Wp())&&("focus"in e&&"function"==typeof e.focus?e.focus():console.warn("The element does not have a focus method."))}function qp(e){return Fp((()=>{function e(e){e.target!==document.activeElement&&Wp()&&Vp(!1)}function t(t){t.target.nodeName&&"html"===t.target.nodeName.toLowerCase()||(e(t),n())}function n(){document.removeEventListener("mousedown",t),document.removeEventListener("mouseup",t),document.removeEventListener("pointerdown",t),document.removeEventListener("pointerup",t),document.removeEventListener("touchmove",t),document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t)}function r(e){"Tab"===e.key&&(Wp()||Vp(!0))}return document.addEventListener("keydown",r,!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("mousedown",t),document.addEventListener("mouseup",t),document.addEventListener("pointerdown",t),document.addEventListener("pointerup",t),document.addEventListener("touchmove",t),document.addEventListener("touchstart",t),document.addEventListener("touchend",t),()=>{document.removeEventListener("keydown",r,!0),document.removeEventListener("mousedown",e,!0),document.removeEventListener("pointerdown",e,!0),document.removeEventListener("touchstart",e,!0),n()}}),[]),f.createElement(f.Fragment,null,e.children)}const zp={boundary:document.body,fallbackPlacements:["right","left","top"]};class Kp extends vu{constructor(e){super(e),this.icon=Up();(0,Bi.Yz)(this.onDsInfoChange.bind(this),["dataSourcesInfo"])}isSupported(e,t,n){const r=e[0].dataSource;if(e.length>1||!Object.keys(r.getSchema()||{}).length)return Promise.resolve(!1);const o=t===mu.DataSource&&[Ts.at.FeatureLayer,Ts.at.SceneLayer,Ts.at.BuildingComponentSubLayer,Ts.at.OrientedImageryLayer,Ts.at.ImageryLayer,Ts.at.SubtypeGroupLayer,Ts.at.SubtypeSublayer].includes(r.type)&&r.getStatus()!==Ts.e3.NotReady;return Promise.resolve(o)}onExecute(e,t,n){const r=e[0];this._version||(this._version=0);const o={name:this.name,version:this._version++,activeRef:document.querySelector(".active-data-action-item"),dataSet:r,widgetId:n};return Promise.resolve(Cd(Qp,Object.assign({},o)))}onDsInfoChange(e,t){const n=Rd.A.getInstance(),r=n.getStateValue(["dataActions",this.name])||{},o=Object.keys(r).filter((e=>r[e])).map((e=>r[e]&&e)),i=Object.keys(t).map((e=>e));o.filter((e=>!i.includes(e))).forEach((e=>{n.updateStateValue("dataActions",`${this.name}.${e}`,null)}))}}const Jp={width:335,height:300},Yp={width:350,height:444},Qp=e=>{const{version:t,dataSet:n,name:r,widgetId:o,activeRef:i}=e,{dataSource:s}=n,[a,l]=_p("jimu-ui"),[u,c]=_p("jimu-ui/advanced/sql-expression-builder"),{FloatingPanel:d,Switch:p,Label:h,Badge:g,Icon:m,Loading:v}=l||{},{SqlExpressionBuilder:S}=c||{},I=r+"-"+s.id,b=Xp(),[w,E]=f.useState(Yp),[A,O]=f.useState(!0),T=(e=s.id)=>{var t;return(null===(t=Rd.A.getInstance().getStateValue(["dataActions",r]))||void 0===t?void 0:t[e])||y({})},x=T(s.id),[R,P]=f.useState(x.applied||!1),D=Tp(R),[_,L]=f.useState(x.expression||null);f.useEffect((()=>{const e=T(s.id);L((null==e?void 0:e.expression)||null),P((null==e?void 0:e.applied)||!1),O(!0)}),[t,s.id]),f.useEffect((()=>{var e,t;const n=!D!=!R;if(R){const e=(0,ls.getArcGISSQL)(_,s);M(e,n)}else{const r=null===(t=null===(e=s.getInfo().widgetQueries)||void 0===e?void 0:e[I])||void 0===t?void 0:t.where;r&&""!==r&&M({sql:"",sqlExpression:null},n)}N()}),[R]);const M=(e,t=!1)=>{const n={where:e.sql||"1=1",sqlExpression:e.sql?e.sqlExpression:null};null==s||s.updateQueryParams(n,I),t&&au.A.getInstance().publishMessage(new Xl.HX(o,[s.id]))},k=()=>{O(!1),N(),setTimeout((()=>{Hp(i)}),10)},N=()=>{if(!a)return;const e=T(),t=Cd(g,{color:"primary",dot:!0,className:"mr-2",hideBadge:!(R&&_)},Cd(m,{icon:Up()})),n=e.set("applied",R).set("expression",_).set("icon",t);Rd.A.getInstance().updateStateValue("dataActions",`${r}.${s.id}`,n)},j=s.getLabel();return Cd(f.Fragment,null,a&&Cd(d,{version:t,open:A,headerTitle:b("dataAction_SetFilter"),onHeaderClose:k,minSize:Jp,onResize:e=>{E(e)},dragBounds:"body",defaultSize:w,reference:i,flipOptions:zp,toggle:(e,t)=>{"clickOutside"!==t&&k()}},Cd("div",{className:"set-filter-container h-100 p-4"},u?Cd(f.Fragment,null,Cd(h,{className:"d-flex justify-content-between"},Cd("span",{title:j,css:xd`
                    overflow: hidden;
                    text-overflow: ellipsis;
                    display: -webkit-box;
                    -webkit-box-orient: vertical;
                    word-break: break-word;
                    -webkit-line-clamp: 1;
                    font-size: ${(0,C.D0)(14)};
                  `},j),Cd(p,{checked:R,onChange:()=>{P(!R)}})),Cd("div",{className:"mt-4",css:xd`
      height: calc(100% - 40px);
      .sql-expression-list{
        height: calc(100% - 48px) !important;
      }
    `},Cd(S,{dataSource:s,mode:el.Yu.Simple,widgetId:I,expression:_,noScrollForList:!0,queryScope:Ts.pQ.InRuntimeView,onChange:e=>{if(L(e),R){const t=(0,ls.getArcGISSQL)(e,s);M(t,!0)}}}))):Cd(v,{type:l.LoadingType.Secondary}))))},Xp=()=>{const e=Cl();return f.useCallback(((t,n)=>e.formatMessage({id:t,defaultMessage:Gi.A[t]},n)),[e])};var Zp,ef=s(9174),tf=s(3484),nf=s(4990);!function(e){e.Config="CONFIG",e.Program="PROGRAM"}(Zp||(Zp={}));var rf,of=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.Common="COMMON",e.Widget="WIDGET",e.Template="TEMPLATE",e.App="APP",e.Builder="BUILDER"}(rf||(rf={}));const sf={"insert-widget":"InsertWidgetGuide","ds-selection":"DataSourceSelectionGuide","guide-component":"GuideComponent","opening-tour":"OnboardingGuide","express-mode":"ExpressModeGuide","general-express-mode":"GeneralExpressModeGuide","express-welcome-introduction":"ExpressWelcomeIntroductionGuide","express-add-data":"ExpressAddDataGuide","express-app-setting":"ExpressAppSettingGuide","express-general-setting":"ExpressGeneralSettingGuide","express-map-widget":"ExpressMapWidgetGuide","express-message-action":"ExpressMessageActionGuide","express-placeholder":"ExpressPlaceHolderGuide","express-section":"ExpressSectionGuide","express-theme":"ExpressThemeGuide","express-title":"ExpressTitleGuide","express-widget-controller":"ExpressWidgetControllerGuide","express-window":"ExpressWindowGuide","express-sidebar":"ExpressSidebarGuide","express-grid":"ExpressGridGuide"};class af{constructor(){this.guides={},this.guideTriggerRef=null}static getInstance(){return af.instance||(af.instance=new af,window._guideManager=af.instance),af.instance}getAppConfig(){return(0,Bi.Vp)().getState().appConfig}getModuleUri(e){let t,n=e.id;n.lastIndexOf("/")===n.length-1&&(n=n.substring(0,n.lastIndexOf("/")));const{type:r,level:o}=e;return r===Zp.Program?o===rf.Builder||o===rf.Common?t="jimu-for-builder/guides":o===rf.Widget?t=`${n}/dist/guide/guide`:rf.App:r===Zp.Config&&(t=`${n}/dist/guide/steps.json`),t}loadGuideModule(e){return of(this,void 0,void 0,(function*(){let{uri:t,type:n,level:r}=e;if(!t&&(t=this.getModuleUri(e),!t))throw new Error("Guide URI is missing");return yield(0,Is.loadModule)(t).then((o=>of(this,void 0,void 0,(function*(){var i;let s,a={};if(r===rf.Widget&&(a=yield this.loadWidgetTranslationByUri(e.id)),n===Zp.Program){if(s=sf[e.id]?null==o?void 0:o[sf[e.id]]:null==o?void 0:o.default,!s)throw new Error("Guide module could not be loaded");return{guide:s,messages:a}}if(n===Zp.Config){const n=`${e.id}/dist/guide/translations`,r=yield this.loadGuideTranslation(n,["en"]),s=(0,Ti.replaceI18nPlaceholdersInObject)(null==o?void 0:o.default,Vi.getIntl(),r).steps;if(!s)throw new Error("Steps data is missing or invalid");t.startsWith("/")&&(t=t.substring(1));const l=t.replace("steps.json","assets");return this.replaceStepsAssetsPath(s,l),this.guides["guide-component"]||(yield this.registerGuide({id:"guide-component",type:Zp.Program,level:rf.Common})),{steps:s,guide:null===(i=this.guides["guide-component"])||void 0===i?void 0:i.module,messages:a}}})))).catch((e=>{throw console.error("Error loading guide module:",e),new Error(e)}))}))}replaceStepsAssetsPath(e,t){return e.map((e=>{var n,r;if("steps"in e){const n=e,r=n.steps,o=this.replaceStepsAssetsPath(r,t);return n.steps=o,n}return(null===(r=null===(n=e.content)||void 0===n?void 0:n.image)||void 0===r?void 0:r.src)&&(e.content.image.src=`${t}/${e.content.image.src}`),e}))}loadGuideTranslation(e,t){return of(this,void 0,void 0,(function*(){let n=(0,Bi.Vp)().getState().appContext.locale;return n=(0,Vi.getLocaleToLoad)(n,t),n?(0,Vi.loadLocaleMessages)(`${e}`,n).catch((e=>of(this,void 0,void 0,(function*(){return console.error("Load widget translation error",e),Promise.resolve({})})))):Promise.resolve({})}))}loadWidgetTranslationByUri(e){return of(this,void 0,void 0,(function*(){const t=yield su.A.getInstance().loadWidgetManifest(e,!0),n=yield su.A.getInstance().loadWidgetTranslation(e,t);return Promise.resolve(n)}))}registerGuide(e){return of(this,void 0,void 0,(function*(){if(!e)return null;if(this.guides[null==e?void 0:e.id])return this.guides[e.id];if(e.module)return this.guides[e.id]=e,this.guides[e.id];const t=yield this.loadGuideModule(e);return t?(this.guides[e.id]=Object.assign(Object.assign({},e),{module:t.guide,steps:t.steps,messages:t.messages}),this.guides[e.id]):null}))}getGuideById(e){return this.guides[e]||null}destroyGuide(e){delete this.guides[e]}startGuide(e){return of(this,arguments,void 0,(function*(e,t=!1,n){this.guideTriggerRef=n||null;if(!this.getGuideById(e.id)){if(!(yield this.registerGuide(e)))return void console.error("Guide not found")}if(t){if(!(yield this.shouldShowGuide(e)))return}(0,Bi.Vp)().dispatch((0,Ci.CurrentGuideChange)(e.id,t))}))}shouldShowGuide(e){return of(this,void 0,void 0,(function*(){var t,n;if(e.level===rf.App){const t=(0,Ti.readLocalStorage)("guide");if(t){if(t.split(",").includes(e.id))return Promise.resolve(!1)}}else{const r=yield(0,Is.loadModule)("jimu-for-builder/service");if(!(null===(t=null==r?void 0:r.userServices)||void 0===t?void 0:t.initUserResource))return Promise.resolve(!1);const o=yield r.userServices.initUserResource();if(!(null==o?void 0:o.success))return Promise.resolve(!1);const i=yield r.userServices.getUserResource();if(void 0!==(null===(n=null==i?void 0:i.showGuides)||void 0===n?void 0:n[e.id])&&!i.showGuides[e.id])return Promise.resolve(!1)}return Promise.resolve(!0)}))}stopGuide(){(0,Bi.Vp)().dispatch((0,Ci.CurrentGuideChange)(null,!1)),this.guideTriggerRef&&this.guideTriggerRef.current&&Hp(this.guideTriggerRef.current),this.guideTriggerRef=null}showTemplateGuide(){return of(this,void 0,void 0,(function*(){var e;const t=null===(e=this.getAppConfig())||void 0===e?void 0:e.template;if(t){const e=yield this.loadTemplateGuide(t,"app");e&&this.startGuide(e,!0)}}))}loadTemplateGuide(e,t){return of(this,void 0,void 0,(function*(){const n=Is.resolveModuleFullPath("templates/"),r=yield fetch(`${n}templates-info.json`).then((e=>e.json()));if(r[t]){const o=r[t].filter((t=>t.name===e));if(o.length>0){const e=o[0],t=`${n}${e.type}/${e.name}`;if(null==e?void 0:e.hasGuide){const n={id:t,type:e.guideType,level:rf.Template};return Promise.resolve(n)}}}return Promise.resolve(null)}))}updateGuideViewedStatus(e){return of(this,arguments,void 0,(function*(e,t=!1){if(e.level===rf.App){const n=(0,Ti.readLocalStorage)("guide");if(n){const r=n.split(","),o=r.indexOf(e.id);t?-1===o&&r.push(e.id):-1!==o&&r.splice(o,1),(0,Ti.setLocalStorage)("guide",r.join(","))}else t&&(0,Ti.setLocalStorage)("guide",e.id)}else{(yield(0,Is.loadModule)("jimu-for-builder/service")).userServices.updateUserResource({showGuides:{[e.id]:t}})}}))}}const lf=e=>!(!e||e instanceof Document||!e.tagName)&&("BUTTON"===e.tagName||"INPUT"===e.tagName||"SELECT"===e.tagName||"TEXTAREA"===e.tagName||"DIV"===e.tagName&&"true"===e.contentEditable||"SPAN"===e.tagName&&"true"===e.contentEditable||["ANALYSIS-LAYER-INPUT-POPOVER","ARCGIS-ITEM-BROWSER-SEARCH","CALCITE-INPUT-TEXT","CALCITE-LIST","ARCGIS-BA-SEARCH","CALCITE-INPUT-NUMBER","CALCITE-AUTOCOMPLETE","ARCGIS-EDITOR-VARIABLES","ARCGIS-LANGUAGE-API-PANEL","ARCGIS-ARCADE-SUGGESTIONS"].includes(e.tagName)),uf=e=>lf(e.target||e.nativeEvent.target),cf=e=>{let t="";const n=[];if(navigator.userAgent.includes("Edge")&&e.key.includes("-manual"))t=e.key.replace("-manual","");else if("code"in e)t=Ni[e.code]?Ni[e.code]:e.code;else{const n=e.which;t=String.fromCharCode(n).toLowerCase(),Ni[n]&&(t=Ni[n])}return e.metaKey&&n.push("command"),e.ctrlKey&&n.push("Ctrl"),e.shiftKey&&n.push("Shift"),e.altKey&&n.push("Alt"),n.push(t),n.join("+")},df=e=>{console.log(":keyboard event:",e)};const pf=function(e="keydown",t=null){if("undefined"==typeof window)return null;const n={};let r=null,o=null;null===t&&(t=window.document);const i=!lf(t);function s(e){if(ki(e))return;if(i&&uf(e))return;o&&o(e);const t=cf(e),s=n[t.toLowerCase()]||[];if("function"==typeof r){const n=s.length>0;r(t,n,e)}s.length&&e.preventDefault();let a=!0;for(let t=s.length-1;t>=0&&(s[t]&&(a=!!s[t](e)),a);t--);return!!a&&void 0}function a(){t.addEventListener(e,s)}return a(),{subscribe:function(e,t){return(e=e.toLowerCase()).replace(/\s/,""),void 0===n[e]&&(n[e]=[]),n[e].push(t),{unsubscribe:()=>{const r=n[e].indexOf(t);n[e].splice(r,1)}}},setMonitor:function(e=null){r=!0===e?df:e},startListening:a,stopListening:function(){t.removeEventListener(e,s)},setKeyboardTriggerFunction:function(e){o=e}}};class ff extends f.PureComponent{constructor(e){super(e),this.subs=[],this.keyboardListener=pf(e.eventName,this.props.element),this.props.onKeyboardTrigger&&this.keyboardListener.setKeyboardTriggerFunction(this.props.onKeyboardTrigger)}componentDidMount(){const{bindings:e,monitor:t}=this.props;Object.keys(e).forEach((t=>{const n=e[t],r=this.keyboardListener.subscribe(t,n);this.subs.push(r)})),t&&this.keyboardListener.setMonitor(t)}componentWillUnmount(){this.subs.forEach((e=>{e.unsubscribe()}))}render(){return null}}ff.defaultProps={eventName:"keydown",bindings:{},monitor:null};const hf=ff;class gf extends f.PureComponent{constructor(){super(...arguments),this.onKeyboardTrigger=e=>{e.key.includes("-manual")||Is.getJimuForBuilderModules().appBuilderSync.letBuilderResponseToKeyboard(e)},this.isMac=()=>{var e,t;return"macOS"===(null===(t=null===(e=window.jimuUA)||void 0===e?void 0:e.os)||void 0===t?void 0:t.name)}}render(){return this.isMac()?f.createElement(hf,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"command+keys":()=>!1}}):f.createElement(hf,{onKeyboardTrigger:this.onKeyboardTrigger,bindings:{"ctrl+keys":()=>!1}})}}function mf(){const e=(0,v.useSelector)((e=>{var t;return null===(t=e.appInfo)||void 0===t?void 0:t.name})),t=(0,v.useSelector)((e=>{var t;const n=null===(t=e.appConfig)||void 0===t?void 0:t.pages[e.appRuntimeInfo.currentPageId];return n?n.isDefault?null:n.label:null}));return(0,f.useEffect)((()=>{if(e){const n=t?`${t} | ${e}`:e;document.title=n}}),[e,t]),null}function vf(e){const t=(0,v.useSelector)((e=>{var t,n;return null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.attributes)||void 0===n?void 0:n.favicon}));return(0,f.useEffect)((()=>{var n,r,o;const i=document.querySelector('link[rel="shortcut icon"]');if(i)if(null===(n=null==t?void 0:t.properties)||void 0===n?void 0:n.isUploaded)i.href=(0,Li.processResourceUrl)(null===(r=null==t?void 0:t.properties)||void 0===r?void 0:r.path);else{let n=null==t?void 0:t.svg;if(!n)return;let r=null===(o=null==t?void 0:t.properties)||void 0===o?void 0:o.color;const{isCSSVariable:s,getThemeColorValue:a}=(0,Ti.getJimuThemeModule)();if(s(r)&&(r=a(r,e.themeVariables)),r){const e=(new DOMParser).parseFromString(n,"image/svg+xml");e.querySelectorAll("svg,path").forEach((e=>{e.setAttribute("fill",r)}));n=(new XMLSerializer).serializeToString(e)}const l=new Blob([n],{type:"image/svg+xml"});i.href=window.URL.createObjectURL(l)}}),[t,e.themeVariables]),null}var yf=s(5737),Sf=s.n(yf),If=s(3001),bf=s.n(If),wf=s(8996),Ef=s.n(wf);function Af(e){return xd`
    .permission-banner-list {
      width: auto;
      align-items: stretch;
      flex-direction: column;
      font-size: 13px;
      .banner-list-panel {
        color: ${e.sys.color.surface.paperText};
        margin-left: 27px;
      }
      .warning-icon {
        position: absolute;
        left: 10px;
        width: 24px;
        height: 24px;
        color: var(--sys-color-warning-dark) !important;
      }
      .banner-list-item {
      }
      .banner-list-item-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1px;
        position: relative;
        .item-info {
          flex-grow: 2;
          .fold-btn {
            position: absolute;
            left: -22px;
            .directional {
              width: 8px;
              height: 8px;
              color: var(--ref-palette-neutral-1000) !important;
            }
          }
        }
        .item-link {
          display: block;
          color: var(--sys-color-primary-light);
          max-width: 160px;
          white-space: nowrap;
          text-overflow: ellipsis;
          overflow: hidden;
        }
        .item-link.sub-item-link {
          max-width: 315px;
        }
        .item-operation {
          display: flex;
          align-items: center;
        }

        .button-separator {
          height: 18px;
          margin: 0 8px;
          border-right-width: 1px;
          border-right-style: solid;
          border-right-color: var(--ref-palette-neutral-700)
        }
      }
      .user-name {
        max-width: 315px;
        font-size: 12px;
        font-style: italic;
        color: var(--ref-palette-neutral-900);
        white-space: nowrap;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      .ignore-all-btn {
        width: 100%;
        height: 26px;
        margin-top: 10px;
      }
      .left-part {
        display: block !important
      }
    }`}function Of(e){const[t,n]=(0,f.useState)({}),r=(0,f.useCallback)((()=>{$i.Cv.getInstance().ignoreFromNoPermissionResourceInfoList()}),[]),o=(0,f.useCallback)(((e,r)=>{const o=Object.assign({},t);o[r]=e,n(o)}),[t]),{Alert:i,Button:s,Icon:a}=(0,Is.getModuleSync)("jimu-ui"),{theme:l,intl:u}=e,c=function(){const e={},t=$i.Cv.getInstance(),n=$i.Cv.getInstance().getNoPermissionResourceInfoList();return Object.entries(n).forEach((n=>{const r=n[0],o=n[1];if(!o.ignored){let n;n=t.getServerKeyFromUrl(r)?o.owningSystemUrl?(0,Pi.getStandardPortalUrl)(o.owningSystemUrl):(0,Di.getServerRootUrl)(r):(0,Pi.getStandardPortalUrl)(r),e[n]||(e[n]=[]),n!==r&&e[n].push(r)}})),e}();return Cd("div",{css:Af(l)},Cd(i,{form:"basic",type:"info",open:Object.keys(c).length>0,className:"permission-banner-list p-4",closable:!1,withIcon:!1,style:{borderColor:l.sys.color.divider.secondary,backgroundColor:l.sys.color.surface.overlay}},Cd("div",{className:"banner-list-panel"},Cd(a,{className:"warning-icon",icon:Ef()}),Cd(kl,{id:"signInBannerListWarning",defaultMessage:Gi.A.signInBannerListWarning}),Cd("div",{className:"mt-4"},Object.entries(c).map(((e,n)=>{const r=e[0],i=e[1];return Cd("div",{key:n},Cd(Cf,{url:r,resourceUrl:i[0],theme:l,intl:u,key:n,hasSubItems:i.length>0,isUnFold:t[r],foldBtnClick:o}),t[r]&&i.map(((e,t)=>Cd(Tf,{url:e,theme:l,intl:u,key:t}))))}))),s&&Cd(s,{className:"ignore-all-btn",variant:"outlined",size:"sm",onClick:r},e.intl.formatMessage({id:"signInBannerIgnoreAll",defaultMessage:Gi.A.signInBannerIgnoreAll})))))}function Cf(e){var t,n;const{url:r,resourceUrl:o,theme:i,intl:s,hasSubItems:a,isUnFold:l,foldBtnClick:u}=e,c=(0,f.useCallback)((()=>{const e=$i.Cv.getInstance();let t;t=(0,Di.isServerUrl)(o)&&(0,Di.getServerRootUrl)(o)===r?o:r,e.signInByResourceUrl(t,null,!0)}),[r,o]),d=(0,f.useCallback)((()=>{$i.Cv.getInstance().ignoreFromNoPermissionResourceInfoList(r)}),[r]),p=(0,f.useCallback)((()=>{u(!l,r)}),[r,l,u]),{Button:h,Icon:g}=(0,Is.getModuleSync)("jimu-ui"),m=(null===(t=$i.Cv.getInstance().getSessionByUrl(r))||void 0===t?void 0:t.username)||(null===(n=$i.Cv.getInstance().getSessionByUrl(`${r}/rest/services`))||void 0===n?void 0:n.username),v=s.formatMessage({id:"currentData",defaultMessage:"current"}),y=m?s.formatMessage({id:"switch",defaultMessage:"Switch"}):s.formatMessage({id:"signIn",defaultMessage:"Sign in"}),S=s.formatMessage({id:"signInBannerIgnore",defaultMessage:Gi.A.signInBannerIgnore});return Cd("div",{className:"banner-list-item"},Cd("div",{className:"banner-list-item-content",css:Af(i)},Cd("div",{className:"item-info"},Cd("div",null,a&&h&&Cd(h,{className:"fold-btn",size:"sm",type:"tertiary",icon:!0,onClick:p},Cd(g,l?{className:"directional",icon:Sf()}:{className:"directional",icon:bf()})),Cd("a",{className:"item-link",href:r,target:"_blank",rel:"noopener noreferrer",title:r},r))),Cd("div",{className:"item-operation"},h&&Cd(h,{size:"sm",type:"tertiary",title:y,onClick:c},Cd("div",{className:"text-truncate"},y)),Cd("div",{className:"button-separator",style:{}}),h&&Cd(h,{size:"sm",type:"tertiary",title:S,onClick:d},Cd("div",{className:"text-truncate"},S)))),m&&Cd("div",{className:"user-name"},`${v}:${m}`))}function Tf(e){const{url:t,theme:n}=e;return Cd("div",{className:"banner-list-item-content",css:Af(n)},Cd("a",{className:"item-link sub-item-link",href:t,target:"_blank",rel:"noopener noreferrer",title:t},t))}const xf=e=>xd`
    color: ${e.sys.color.surface.paperText};
    border-color: ${e.sys.color.divider.secondary};
    background-color: ${e.sys.color.surface.overlay};
    .experience-state-restore-buttons {
      display: flex;
      justify-content: end;
      gap: 8px;
    }
  `,Rf=f.memo((e=>{const{theme:t}=e,{Alert:n,Button:r}=(0,Is.getModuleSync)("jimu-ui"),[o,i]=f.useState(!1),[s,a]=f.useState(!1),l=fp(Gi.A),u=f.useCallback((()=>{window.jimuConfig.isInBuilder||(fu.A.getInstance().restoreLocalState(),a(!1))}),[]),c=f.useCallback((()=>{window.jimuConfig.isInBuilder||(a(!1),(0,bs.putBrowserHistoryLocalState)())}),[]),d=f.useCallback((()=>{i(!0)}),[]),p=f.useCallback((()=>{i(!1)}),[]);return f.useEffect((()=>{var e;!!(null===(e=(0,Bi.Vp)().getState().appConfig.appStateConfig)||void 0===e?void 0:e.allowRestoreState)&&fu.A.isSupportLocalState()&&fu.A.getInstance().init().then((e=>{e.registerRestoreFunction(bs.restoreBrowserHistoryLocalState);const t=e.existLocalState();a(t)}))}),[]),f.useEffect((()=>{let e;return s&&!o&&(e=window.setTimeout((()=>{a(!1),(0,bs.putBrowserHistoryLocalState)()}),1e4)),()=>{window.clearTimeout(e)}}),[s,o]),s&&Cd(n,{className:"experience-state-restore p-4",form:"basic",type:"info",closable:!1,withIcon:!1,fullWidth:!0,title:l("restoreState"),css:xf(t),onMouseEnter:d,onMouseLeave:p},Cd("div",{className:"experience-state-restore-tips"},l("restoreStateTips")),Cd("div",{className:"experience-state-restore-buttons"},Cd(r,{variant:"contained",color:"primary",size:"sm",onClick:u},l("restoreStateAccept")),Cd(r,{variant:"outlined",size:"sm",onClick:c},l("signInBannerIgnore"))))})),Pf=e=>xd`
    position: fixed;
    z-index: 999;
    right: ${e?"2px":"var(--sys-spacing-4)"};
    bottom: ${e?"2px":"var(--sys-spacing-4)"};
    width: ${e?"auto":"400px"};
    left: ${e?"2px":"auto"};
    max-height: 100vh;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: var(--sys-spacing-2);
  `,Df=f.memo((e=>{var t;const{theme:n,intl:r,noPermissionResourceChangedFlag:o}=e,i=(0,Bi.Vp)().getState().browserSizeMode===Os.rH.Small,s=!window.jimuConfig.isBuilder&&!window.jimuConfig.isInBuilder&&n&&!(null===(t=(0,Bi.Vp)().getState().appConfig.permission)||void 0===t?void 0:t.blockPermissionBanner)&&Cd(Of,{noPermissionResourceChangedFlag:o,theme:n,intl:r}),a=fu.A.isSupportLocalState()&&n&&Cd(Rf,{theme:n});return(s||a)&&Cd("div",{css:Pf(i)},s,a)}));function _f(e){const{oauthErrorCode:t,fromUrl:n,intl:r,theme:o}=e,i=(0,f.useCallback)((()=>{var e,t;$i.Cv.getInstance().signIn({fromUrl:n||(null===(e=window.location)||void 0===e?void 0:e.href),popup:!1,desUrl:null===(t=(0,Bi.Vp)().getState())||void 0===t?void 0:t.portalUrl})}),[n]),{Button:s}=(0,Is.getModuleSync)("jimu-ui"),a=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"white":"black",l=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"#232323":"#f0f0f0";let u="";switch(t){case"OAUTH_0020":u=r.formatMessage({id:"publicUserError",defaultMessage:Gi.A.publicUserError});break;case"OAUTH_0033":u=r.formatMessage({id:"essentialAppsLicenseErrorForBuilder",defaultMessage:Gi.A.essentialAppsLicenseErrorForBuilder});break;default:u=r.formatMessage({id:"signInErrorDefault",defaultMessage:Gi.A.signInErrorDefault})}return Cd("div",{css:xd`
    .oauth-error-page {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      .sign-in-btn {
        padding: 0.25rem 1rem;
        font-size: 14px;
        user-select: none;
        line-height: 1.5;
        border-radius: 2px;
        color: #fff;
        background: #007f94;
        border-width: 1px;
        border-style: solid;
        border-color: #007f94;
        margin-top: 20px;
        outline: none;
        min-width: 241px;
        height: 49px;
        margin: 79px 35px;
        cursor: pointer;
      }
    }`},Cd("div",{id:"oauthError",className:"oauth-error-page",style:{color:a,backgroundColor:l}},Cd("div",{id:"foo",dangerouslySetInnerHTML:{__html:u}}),Cd("div",{style:{display:"flex"}},s&&Cd(s,{className:"sign-in-btn",size:"lg",onClick:i},r.formatMessage({id:"signIn",defaultMessage:"Sign in"})))))}"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0});const Lf={w3c:{title:"title",description:"snippet",keywords:"typeKeywords",image_src:"thumbnail"},twitter:{title:"title",description:"snippet",image:"thumbnail"},og:{title:"title",description:"snippet",url:"itemUrl",image:"thumbnail"}};function Mf(e){if(e){if(!window.URL||"function"!=typeof window.URL)return function(e){let t=e.split("?");if(1===t.length||0===t[1].length)return e;let n=t[1].split("#");n[1]&&n[1].length?(t[1]=n[0],n=n[1]):n="";const r=t[1].split("&"),o=r.map((e=>{const t=e.split("=");return"token"==t[0]?[]:t})).reduce(((e,t)=>(e.length&&(e+="&"),t.length&&(e+=t.join("=")),e)),"");let i=t[0];o&&o.length&&(i+="?"+o);n&&n.length&&(i+="#"+n);return i}(e);try{const t=new URL(e);return t.searchParams.has("token")&&t.searchParams.delete("token"),t.toString()}catch(t){return console.log(`can not parse ${e} into a valid URL`),""}}}function kf(e){const t=document.createElement("meta");for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];t.setAttribute(n,r)}document.head.appendChild(t)}const Nf=function({profiles:e="w3c,twitter,og",mapping:t,item:n,imageSrc:r,noindex:o}){if(n&&o&&"function"==typeof o&&o(n))return void kf({name:"robots",content:"noindex"});e=e.toLowerCase().split(",").map((e=>e.trim()));const i=function(e){return Object.keys(e).reduce(((t,n)=>(t[n]=Object.assign({},e[n]),t)),{})}(Lf);if(r&&(i.w3c.image_src=r,i.twitter.image=r,i.og.image=r),t)for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];i[e]?Object.assign(i[e],n):i[e]=n}e.forEach((e=>{"w3c"==e?function(e,t){if(["title","description","keywords"].forEach((n=>{const r=t[n];let o=e[r];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&kf({name:n,content:o})})),null!=e[t.image_src]){const n=Mf(e[t.image_src]);if(""!=n){const e=document.createElement("link");e.setAttribute("rel","image_src"),e.setAttribute("href",n),document.head.appendChild(e)}}}(n,i[e]):"twitter"==e?function(e,t){kf({name:"twitter:card",content:"summary"}),kf({name:"twitter:site",content:"@arcgisonline"});for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];let o="image"==n?Mf(e[r]):e[r];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&""!==o&&kf({name:`twitter:${n}`,content:o})}}(n,i[e]):"og"==e?function(e,t){for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];let o="image"==n?Mf(e[r]):e[r];Array.isArray(o)&&(o=o.join(",")),void 0!==o&&""!==o&&kf({property:`og:${n}`,content:o})}}(n,i[e]):i[e]&&i[e].insert&&"function"==typeof i[e].insert&&i[e].insert(n,i[e])}))};function jf(){const e=(0,v.useSelector)((e=>e.appInfo)),t=(0,v.useSelector)((e=>e.portalUrl)),n=(0,Pi.getPlatformUrlByOrgUrl)(t),r=(0,v.useSelector)((e=>{var t;const n=null===(t=e.appConfig)||void 0===t?void 0:t.pages[e.appRuntimeInfo.currentPageId];return n?n.isDefault?null:n.label:null}));return(0,f.useEffect)((()=>{if(!e||!e.name)return;const t=r?`${r} | ${e.name}`:e.name;let o=e.set("title",t);o=window.jimuConfig.isOutOfExb?o.set("thumbnail",`${(0,xi.getAbsoluteRootUrl)()}${o.thumbnail}`):window.jimuConfig.isDevEdition?o.set("thumbnail",`${location.origin}${window.jimuConfig.mountPath}apps/${e.id}/${o.thumbnail}`):o.set("thumbnail",`${n}/sharing/rest/content/items/${e.id}/info/${e.thumbnail}`),Nf({item:o})})),null}var Uf,Ff,Bf=s(2786),$f=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Vf{static getInstance(){return Vf.instance||(Vf.instance=new Vf),Vf.instance}constructor(){this.initialize=e=>$f(this,void 0,void 0,(function*(){var t;if(e&&e.enable){console.log("Start to init the tracking instance");const n={plugins:[]},{Telemetry:r,GoogleAnalytics:o}=yield(0,Is.loadModule)("jimu-core/telemetry"),i=null===(t=null==e?void 0:e.google)||void 0===t?void 0:t.measurementId;if(i){const e=new o({measurementIds:[i]});n.plugins.push(e)}this.telemetry=new r(n);try{return(0,Bf.isAllowedToTrack)()||this.telemetry.disableTracker("googleAnalytics"),yield this.telemetry.init(),console.log("Tracking instance initialization finished"),this}catch(e){console.error("Tracking instance initialization failed",e)}}})),(0,Bi.Yz)(this.onAnalyticChange.bind(this),["appConfig","analytics"]),(0,Bi.Yz)(this.onCookieConsentModeChange.bind(this),["appConfig","cookieBanner","consentMode"])}onAnalyticChange(e=y({}),t=y({})){t.enable!==e.enable&&t.enable&&this.initialize(t)}onCookieConsentModeChange(e,t){(0,Bf.isAllowedToTrack)()?this.telemetry&&this.telemetry.enableTracker("googleAnalytics"):this.telemetry&&this.telemetry.disableTracker("googleAnalytics")}logPageView(){this.telemetry.logPageView(window.location.pathname)}}function Gf(){const e=(0,v.useSelector)((e=>e.appId)),t=(0,v.useSelector)((e=>e.appRuntimeInfo.currentPageId)),n=(0,v.useSelector)((e=>{var t;return(null===(t=e.appInfo)||void 0===t?void 0:t.type)===Ff.Template}));return(0,f.useEffect)((()=>{if(window.jimuConfig.isBuilder||window.jimuConfig.isSite)return;let r="";const o=`${window.location.protocol}//${window.location.host}`;let i;e?i=`${o}${(0,xi.getAppUrl)({id:e,type:n?"template":"app"})}`:(i=`${o}${window.jimuConfig.mountPath}`,i.endsWith("/")&&(i=i.slice(0,-1))),r=t?(0,xi.getCanonicalPageUrl)(i,t):i;const s=document.querySelector("head title");if(!s||!s.nextSibling)return;let a=document.querySelector('link[rel="canonical"]');a||(a=document.createElement("link"),a.setAttribute("rel","canonical"),document.head.insertBefore(a,s.nextSibling)),a.setAttribute("href",r)}),[e,t,n]),null}!function(e){e.Loading="LOADING",e.Loaded="LOADED",e.Failed="FAILED"}(Uf||(Uf={})),function(e){e.Experience="Web Experience",e.Template="Web Experience Template"}(Ff||(Ff={}));var Wf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function Hf(e){const{portalInfo:t,intl:n,theme:r}=e,{portalUrl:o}=t,[i,s]=(0,f.useState)(!1),a=(0,f.useRef)(null),l=$i.Cv.getInstance(),u=(0,f.useCallback)((()=>Wf(this,void 0,void 0,(function*(){const e=a.current.value,t=yield(e=>(0,Qr.request)((0,Pi.getPortalSelfInfoUrl)(e),{httpMethod:"GET"}).then((e=>Number(null==e?void 0:e.currentVersion))).catch((e=>(console.warn(e),null))))(o);(0,Li.setConnectionInfoToAppConfig)(o,e,t),(0,Bi.Vp)().dispatch(Ci.removeFromRegisterClientIdList(o)),l.onClientIdDialogFinished(o,e)}))),[o,l]),c=(0,f.useCallback)((()=>{(0,Is.getModuleSync)("jimu-for-builder").builderAppSync.publishSetClientIdAlertIsCancelled(o),(0,Bi.Vp)().dispatch(Ci.removeFromRegisterClientIdList(o)),l.onClientIdDialogFinished(o,null,new Error("setting clientId is cancelled."))}),[o,l]),d=(0,f.useCallback)((()=>{const e=a.current.value;return(0,_i.validateClientId)(o,e).then((e=>(s(e),{valid:e})))}),[o]),{AlertPopup:p,TextInput:h}=(0,Is.getModuleSync)("jimu-ui"),g=n.formatMessage({id:"setClientIdMessage1",defaultMessage:Gi.A.setClientIdMessage1},{register:n.formatMessage({id:"registerText",defaultMessage:Gi.A.registerText})});return Cd("div",null,Cd(p,{isOpen:!0,title:"",disableOK:!i,onClickOk:u,onClickClose:c},Cd("div",{style:{color:r.ref.palette.black,fontSize:(0,C.D0)(16)}},Cd("p",null,g),Cd("p",null,Cd(kl,{id:"arcgisEnterpriseText",defaultMessage:Gi.A.arcgisEnterpriseText})),Cd("p",{style:{color:r.ref.palette.neutral[900]}},o),Cd("p",null,Cd(kl,{id:"setClientIdMessage2",defaultMessage:Gi.A.setClientIdMessage2})),Cd(h,{css:xd`.input-wrapper {background-color: var(--ref-palette-neutral-400)}`,checkValidityOnAccept:d,ref:a}))))}var qf=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const zf=s(147).exbVersion;class Kf extends f.PureComponent{constructor(e){super(e),this.getKeyboardComponent=()=>{if(window.jimuConfig.isBuilder){const e=(0,Is.getModuleSync)("jimu-for-builder").BuilderKeyboardComponent;return Cd(e,null)}return window.jimuConfig.isInBuilder?Cd(gf,null):null},this.renderCookieBanner=e=>{if(window.jimuConfig.isBuilder||window.jimuConfig.isSite)return null;const{CookieBanner:t}=this.getJimuUI();return t?Cd(t,{theme:e}):null},this.renderVersionRemind=()=>{const{isVersionAlertOpened:e}=this.state,{appConfigVersion:t}=this.props,{Alert:n}=this.getJimuUI(),r=(0,Bi.Vp)().getState(),o=null==r?void 0:r.appInfo,i=E.lt(zf,t);if(window.jimuConfig.isBuilder||!i||!e)return null;const s="Web Experience Template"===(null==o?void 0:o.type);return Cd(n,{className:"w-100 position-absolute version-remind",open:e,onClose:this.onVersionRemindClose,closable:!0,style:{zIndex:2}},s?this.props.intl.formatMessage({id:"templateVersionRemind",defaultMessage:Gi.A.templateVersionRemind}):this.props.intl.formatMessage({id:"experienceVersionRemind",defaultMessage:Gi.A.experienceVersionRemind}))},this.renderGuideRenderer=()=>{var e;const t=null===(e=(0,Is.getModuleSync)("jimu-ui/basic/guide"))||void 0===e?void 0:e.GuideRenderer;return t?Cd(t,null):null},this.onVersionRemindClose=()=>{this.setState({isVersionAlertOpened:!1})},this.onGoToAnotherExperienceBtnClick=()=>{var e;if(window.jimuConfig.isInPortal){const t=null===(e=(0,Bi.Vp)().getState())||void 0===e?void 0:e.portalUrl;location.href=`${t}/apps/experiencebuilder/`}else location.href="/"},this.onSwitchAccountBtnClick=()=>{$i.Ay.getInstance().switchAccount()},this.onSignInBtnClick=()=>{var e,t;$i.Ay.getInstance().signIn({fromUrl:null===(e=window.location)||void 0===e?void 0:e.href,popup:!1,desUrl:null===(t=(0,Bi.Vp)().getState())||void 0===t?void 0:t.portalUrl,forceLogin:!0})},this.onDismiss=()=>{var e;this.props.dispatch(Ci.userLocaleChanged(!1)),window.jimuConfig.isBuilder&&(null===(e=window._appWindow)||void 0===e?void 0:e._appStore)&&(window._appWindow._appStore.dispatch({type:"SET_HAS_NEW_VERSION",hasNew:!1}),window._appWindow._appStore.dispatch({type:"USER_LOCALE_CHANGED",isChanged:!1}))},this.reload=()=>{window.location.reload()};const t={},n=this.getPageId();t.pageStatus=y(n?{[n]:!0}:{}),t.preloadWidgetsLoaded=!1,t.isVersionAlertOpened=!0,this.state=t,this.onDismiss=this.onDismiss.bind(this),this.reload=this.reload.bind(this),Cs.A.getInstance()}getLayoutEntryPath(){let e;return e=window.jimuConfig.isInBuilder?"jimu-layouts/layout-builder":"jimu-layouts/layout-runtime",e}getPageRenderClass(){return(0,Is.getModuleSync)(this.getLayoutEntryPath())?(0,Is.getModuleSync)(this.getLayoutEntryPath()).PageRenderer:(console.error("Please init jimu-layouts."),null)}getJimuUI(){return(0,Is.getModuleSync)("jimu-ui")?(0,Is.getModuleSync)("jimu-ui"):(console.error("Please init jimu-ui."),null)}componentDidMount(){du.getInstance({intl:this.props.intl}).loadAppConfig().then((e=>(this.props.dispatch(Ci.appConfigLoaded(e)),window.jimuConfig.isInBuilder&&(0,Is.getModuleSync)("jimu-for-builder").appBuilderSync.publishAppStateChangeToBuilder(),e))).then((e=>{const t=(0,xi.getSectionNavInfoFromQueryObject)(this.props.queryObject,e);return Object.keys(t).forEach((e=>{this.props.dispatch(Ci.sectionNavInfoChanged(e,t[e]))})),this.props.dispatch(Ci.currentPageChanged(this.getPageId())),this.addA11yKeyboardEvent(e,this.props.queryObject),e})).then((e=>(this.loadPreloadWidgets(e).then((()=>{(0,Ti.showApp)(),window.jimuConfig.isInBuilder&&(window.parent.isExpressBuilder&&this.selectMapWidget(e),Cs.A.getInstance().createAllDataSourcesByTime())})).catch((e=>{console.error("Initializing theme manager failed.",e),this.props.dispatch(Ci.loadAppConfigFailed({message:(null==e?void 0:e.message)||"",type:"ArcGISAuthError"===(null==e?void 0:e.name)?e.name:"CommonError",code:null==e?void 0:e.code}))})),e))).then((e=>{var t,n;const r="true"===(null===(t=this.props.queryObject)||void 0===t?void 0:t.draft)||"1"===(null===(n=this.props.queryObject)||void 0===n?void 0:n.draft);return!window.jimuConfig.isInBuilder&&e.analytics&&e.analytics.enable&&!r&&Vf.getInstance().initialize(null==e?void 0:e.analytics).then((e=>{e.logPageView()})),e})).catch((e=>{console.error("Load app config error.",e),this.props.dispatch(Ci.loadAppConfigFailed({message:(null==e?void 0:e.message)||"",type:"ArcGISAuthError"===(null==e?void 0:e.name)?e.name:"CommonError",code:null==e?void 0:e.code}))}))}componentWillUnmount(){const e=document.getElementById("jimu-base-style");e&&e.remove()}selectMapWidget(e){const t=this.getPageId();if(!e.pages[t])return;const n=(0,Is.getModuleSync)("jimu-layouts/layout-runtime"),r=n.searchUtils.getMapWidgets(e,e.mainSizeMode,Ql.Kk.Page,t);if(0===r.length||0===r[0].maps.length)return;const o=r[0].maps[0];if(!e.widgets[o])return;const i=n.searchUtils.getLayoutInfosHoldContent(e,ia.K.Widget,o,e.mainSizeMode);0!==i.length&&this.props.dispatch(Ci.selectionChanged(i[0]))}loadPreloadWidgets(e){return qf(this,void 0,void 0,(function*(){var t;const n=[],r=(null===(t=e.preloadWidgets)||void 0===t?void 0:t.asMutable())||[];return Object.keys(e.widgets).forEach((t=>{const o=e.widgets[t];n.includes(o.uri)&&!r.includes(o.uri)&&r.push(o.uri)})),0===r.length?(this.setState({preloadWidgetsLoaded:!0}),Promise.resolve()):Promise.all(r.map((e=>qf(this,void 0,void 0,(function*(){return yield su.A.getInstance().loadWidgetClassByUri(e)}))))).then((()=>{this.setState({preloadWidgetsLoaded:!0})}))}))}componentDidUpdate(){const e=this.getPageId();let t=this.state.pageStatus;e&&!t[e]&&(Object.keys(t).forEach((e=>{t=t.set(e,!1)})),this.setState({pageStatus:t.set(e,!0)}))}addA11yKeyboardEvent(e,t){if(window.jimuConfig.isInBuilder){const e=document.body;e.setAttribute("tabindex","0"),e.style.outlineOffset="-2px",e.addEventListener("keydown",(e=>{if(("BODY"===e.target.tagName||e.target.classList.contains("app-dialog-modal"))&&"Tab"===e.key&&!e.shiftKey&&(0,Bi.Vp)().getState().appRuntimeInfo.appMode===Os.$0.Design){e.preventDefault();Hp(window.parent.document.querySelector("div.builder-dynamic-setting .jimu-btn"),!0)}}))}else{const n=(0,Ti.getParentWindow)();if(!window.jimuConfig.isBuilder&&window.location!==(null==n?void 0:n.location)&&"true"===(null==t?void 0:t.disable_window_focus)&&e.dialogs){const e=document.body;e.setAttribute("tabindex","0"),e.addEventListener("focus",(t=>{if("BODY"===t.target.tagName){e.setAttribute("tabindex","-1");const n=document.querySelectorAll(".app-dialog-modal");n.length&&(t.preventDefault(),Hp(n[n.length-1],!0))}}))}}}getPageId(){if(!this.props.pages)return null;const e=(0,xi.getAppIdPageIdFromUrl)();if(e.pageId&&this.props.pages[e.pageId])return e.pageId;return Object.keys(this.props.pages).find((e=>this.props.pages[e].isDefault))}getDialogId(){return this.props.dialogJson&&(window.jimuConfig.isInBuilder||this.props.dialogJson.mode!==Ql.oM.Anchored)?window.jimuConfig.isInBuilder&&this.props.dialogJson.mode===Ql.oM.Anchored&&this.props.currentDialogId&&this.props.currentDialogId!==(0,xi.getDialogIdFromIdOrLabel)(this.props.queryObject.dlg,(0,Bi.Vp)().getState().appConfig)?null:this.props.dialogJson.id:null}render(){var e;const{pageStatus:t}=this.state,n=this.getPageRenderClass(),r=this.getJimuUI();if(this.props.loadAppConfigError){(0,Ti.showApp)();if("notPublishError"===(null===(e=this.props.loadAppConfigError)||void 0===e?void 0:e.message)){const e=this.props.intl.formatMessage({id:"notPublishError",defaultMessage:Gi.A.notPublishError});return Cd("div",{id:"not-publish-error",style:{width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},dangerouslySetInnerHTML:{__html:e}})}}if(this.props.queryObject.oauth_error_code)return(0,Ti.showApp)(),this.renderOAuthError();if(!this.props.hasPrivilege)return(0,Ti.showApp)(),this.renderPrivilegeError();if(!this.props.appConfigLoaded||!n||!this.state.preloadWidgetsLoaded||(0,Ti.isDeepEqual)(this.props.themeVariables,{}))return null;const o=this.getPageId();if(!o)return console.error("No page to render."),null;if(!this.props.pages[o])return console.error("Invalid page id.",o),null;if(this.props.pages[o].type===Ql.g6.Folder)return console.error("This is a folder."),null;if(this.props.pages[o].linkUrl)return window.location.assign(this.props.pages[o].linkUrl),null;const i=r.Loading;return Cd(f.Fragment,null,Cd(mf,null),Cd(vf,{themeVariables:this.props.themeVariables}),Cd(jf,null),Cd(Gf,null),this.renderReloadAlert(this.props.themeVariables),this.renderSetClientIdAlert(this.props.themeVariables),this.renderVersionRemind(),Cd(Df,{theme:this.props.themeVariables,intl:this.props.intl,noPermissionResourceChangedFlag:this.props.noPermissionResourceChangedFlag}),this.renderGuideRenderer(),Cd(n,{pageStatus:t,dialogId:this.getDialogId()}),Cd("div",{id:"jimu-overlays-container"}),this.getKeyboardComponent(),i&&this.props.isBusy&&Cd(i,{type:this.props.loadingType,text:this.props.loadingText}),this.renderCookieBanner(this.props.themeVariables))}renderOAuthError(){var e,t;return Cd(_f,{oauthErrorCode:null===(e=this.props.queryObject)||void 0===e?void 0:e.oauth_error_code,fromUrl:null===(t=this.props.queryObject)||void 0===t?void 0:t.fromUrl,theme:this.props.themeVariables,intl:this.props.intl})}renderPrivilegeError(){const{Button:e}=this.getJimuUI(),t=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"white":"black",n=window.jimuConfig.isBuilder||window.jimuConfig.isSite?"#232323":"#f0f0f0";document.getElementById("app").style.zIndex="800";const r="INVALID_TOKEN"===this.props.privilegeError,o=r?this.props.intl.formatMessage({id:"signInErrorInvalidToken",defaultMessage:Gi.A.signInErrorInvalidToken}):this.props.privilegeError,i={padding:"0.25rem 1rem",fontSize:"14px",userSelect:"none",lineHeight:1.5,borderRadius:"2px",color:"#fff",background:"#007f94",borderWidth:"1px",borderStyle:"solid",borderColor:"#007f94",marginTop:"20px",outline:"none",minWidth:"241px",height:"49px",margin:"79px 35px",cursor:"pointer"},s=$i.Ay.getInstance().getMainSession();return Cd("div",{id:"privilegeError",style:{width:"100vw",height:"100vh",color:t,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"20px",backgroundColor:n}},Cd("div",{id:"foo",dangerouslySetInnerHTML:{__html:o}}),Cd("div",{style:{display:"flex"}},e&&!r&&s&&Cd(e,{size:"lg",style:i,onClick:this.onGoToAnotherExperienceBtnClick},this.props.intl.formatMessage({id:"goToAnotherExperienceBtn",defaultMessage:Gi.A.goToAnotherExperienceBtn})),!window.jimuConfig.isInPortal&&!r&&s&&e&&Cd(e,{size:"lg",style:i,onClick:this.onSwitchAccountBtnClick},this.props.intl.formatMessage({id:"switchAccountBtn",defaultMessage:Gi.A.switchAccountBtn})),e&&r&&Cd(e,{size:"lg",style:i,onClick:this.onSignInBtnClick},this.props.intl.formatMessage({id:"signIn",defaultMessage:"Sign in"}))))}renderSetClientIdAlert(e){const t=this.props.portalsNeedToRegisterClientId&&this.props.portalsNeedToRegisterClientId[0];return window.jimuConfig.isBuilder&&(null==t?void 0:t.portalUrl)&&Cd(Hf,{portalInfo:t,theme:e,intl:this.props.intl})}renderReloadAlert(e){if(window.jimuConfig.isInBuilder||window.jimuConfig.isSite&&"landing"===this.getPageId())return null;if(!this.props.userLocaleChanged)return null;const{Alert:t,Button:n}=this.getJimuUI();return Cd(t,{form:"basic",type:"info",open:this.props.userLocaleChanged,onClose:this.onDismiss,className:"pl-4 pr-4",closable:!0,css:xd`
          position: absolute;
          z-index: 999;
          width: 100% !important;
          padding-top: 11px;
          padding-bottom: 11px;
          font-size: 1rem;
        `},Cd(kl,{id:"userLocaleChangeMsg",defaultMessage:Gi.A.userLocaleChangeMsg}),Cd(n,{size:"sm",type:"primary",className:"ml-4",onClick:this.reload,style:{minWidth:(0,C.D0)(78),height:(0,C.D0)(26),marginTop:(0,C.D0)(-2)}},Cd(kl,{id:"doUpdate",defaultMessage:Gi.A.doUpdate})))}}const Jf=(0,Ol.Ay)((0,v.connect)((e=>{var t;return e.appConfig?{appConfigLoaded:!0,customTheme:e.appConfig.customTheme,pages:e.appConfig.pages,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,isBusy:e.appRuntimeInfo.isBusy,loadingType:e.appRuntimeInfo.loadingType,loadingText:e.appRuntimeInfo.loadingText,dialogJson:e.appConfig.dialogs?e.appConfig.dialogs[(0,xi.getDialogIdFromIdOrLabel)(e.queryObject.dlg,e.appConfig)]:null,currentDialogId:e.appRuntimeInfo.currentDialogId,userLocaleChanged:e.userLocaleChanged,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,portalsNeedToRegisterClientId:e.portalsNeedToRegisterClientId,noPermissionResourceChangedFlag:e.noPermissionResourceChangedFlag,loadAppConfigError:null,appConfigVersion:null===(t=e.appConfig)||void 0===t?void 0:t.exbVersion}:{appConfigLoaded:!1,customTheme:null,pages:null,appPath:e.appPath,queryObject:e.queryObject,isRTL:e.appContext.isRTL,loadingType:null,loadingText:null,isBusy:e.appRuntimeInfo.isBusy,dialogJson:null,currentDialogId:null,userLocaleChanged:!1,hasPrivilege:e.hasPrivilege,privilegeError:e.privilegeError,portalsNeedToRegisterClientId:e.portalsNeedToRegisterClientId,noPermissionResourceChangedFlag:e.noPermissionResourceChangedFlag,loadAppConfigError:e.loadAppConfigError,appConfigVersion:null}}))((e=>{var t,n;const r=null===(n=null===(t=(0,Ti.getJimuThemeModule)())||void 0===t?void 0:t.useTheme)||void 0===n?void 0:n.call(t,!1);return Cd(Kf,Object.assign({},e,{themeVariables:r}))})));class Yf extends f.Component{constructor(e){super(e),this.state={error:null}}componentDidCatch(e,t){this.setState({error:e})}render(){return this.state.error?f.createElement("h1",null,this.state.error.message):this.props.children}}const Qf=(0,v.connect)((e=>({locale:e.appContext.locale,defaultLocale:e.appContext.locale,messages:e.appI18nMessages})))(zl.A);function Xf(){const e=f.useMemo((()=>{var e;return null===(e=(0,Ti.getJimuThemeModule)())||void 0===e?void 0:e.ThemeManager}),[]);return f.createElement(v.Provider,{store:(0,Bi.Vp)()},f.createElement(Yf,null,f.createElement(bs.HistoryProvider,null,f.createElement(Qf,null,f.createElement(e,null,f.createElement(qp,null,f.createElement(Jf,null)))))))}const Zf=["widgetQueries","sourceVersion","gdbVersion","needRefresh"];class eh extends f.PureComponent{componentDidMount(){var e,t,n,r;if(this.createDataSource(),this.props.dataSource&&this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),(null===(e=this.props.dataSource)||void 0===e?void 0:e.isDataSourceSet())&&this.props.onAllChildDataSourcesCreated&&this.props.dataSource.childDataSourcesReady().then((()=>{this.props.onAllChildDataSourcesCreated(this.props.dataSource)})),this.props.dataSourceInfo&&this.props.onDataSourceInfoChange&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo),this.props.dataSourceInfo&&this.props.onQueryRequired){const e=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,null,this.props.belongToDataSourceInfo,null,this.props.belongToBelongToDataSourceInfo,null);(e.queryRequiredInfo||e.prevQueryRequiredInfo)&&this.props.onQueryRequired(e.queryRequiredInfo)}(null===(n=null===(t=this.props.dataSourceInfo)||void 0===t?void 0:t.selectedIds)||void 0===n?void 0:n.length)>0&&this.props.onSelectionChange&&this.props.onSelectionChange(this.props.dataSourceInfo.selectedIds),(null===(r=this.props.dataSourceInfo)||void 0===r?void 0:r.status)&&this.props.onDataSourceStatusChange&&this.props.onDataSourceStatusChange(this.props.dataSourceInfo.status),this.doQuery()}componentDidUpdate(e){var t,n,r,o,i,s,a,l,u;if(this.createDataSource(),(!e.dataSource&&this.props.dataSource||e.dataSource&&this.props.dataSource&&e.dataSource.id!==this.props.dataSource.id)&&(this.props.onDataSourceCreated&&this.props.onDataSourceCreated(this.props.dataSource),this.props.onAllChildDataSourcesCreated&&this.props.dataSource.isDataSourceSet()&&this.props.dataSource.childDataSourcesReady().then((()=>{this.props.onAllChildDataSourcesCreated(this.props.dataSource)}))),this.props.onDataSourceInfoChange&&e.dataSourceInfo!==this.props.dataSourceInfo&&this.props.onDataSourceInfoChange(this.props.dataSourceInfo,e.dataSourceInfo),(e.dataSourceInfo!==this.props.dataSourceInfo||e.belongToDataSourceInfo!==this.props.belongToDataSourceInfo||e.belongToBelongToDataSourceInfo!==this.props.belongToBelongToDataSourceInfo)&&this.props.onQueryRequired){const t=this.getChangedQueryRequiredInfo(this.props.dataSourceInfo,e.dataSourceInfo,this.props.belongToDataSourceInfo,e.belongToDataSourceInfo,this.props.belongToBelongToDataSourceInfo,e.belongToBelongToDataSourceInfo);(t.queryRequiredInfo||t.prevQueryRequiredInfo)&&this.props.onQueryRequired(t.queryRequiredInfo,t.prevQueryRequiredInfo)}this.props.onDataSourceSchemaChange&&e.dataSourceSchema!==this.props.dataSourceSchema&&this.props.onDataSourceSchemaChange(this.props.dataSourceSchema,e.dataSourceSchema),this.props.onSelectionChange&&!this.areSelectedIdsSame(null===(t=e.dataSourceInfo)||void 0===t?void 0:t.selectedIds,null===(n=this.props.dataSourceInfo)||void 0===n?void 0:n.selectedIds)&&this.props.onSelectionChange(null===(r=this.props.dataSourceInfo)||void 0===r?void 0:r.selectedIds,null===(o=e.dataSourceInfo)||void 0===o?void 0:o.selectedIds),this.props.onDataSourceStatusChange&&(null===(i=e.dataSourceInfo)||void 0===i?void 0:i.status)!==(null===(s=this.props.dataSourceInfo)||void 0===s?void 0:s.status)&&this.props.onDataSourceStatusChange(null===(a=this.props.dataSourceInfo)||void 0===a?void 0:a.status,null===(l=e.dataSourceInfo)||void 0===l?void 0:l.status),e.forceRefreshVersion!==this.props.forceRefreshVersion&&"number"==typeof this.props.forceRefreshVersion&&(null===(u=this.props.dataSource)||void 0===u||u.addSourceVersion()),this.doQuery(),this.handleAutoRefresh()}areSelectedIdsSame(e,t){const n=e=>!e||0===e.length;return n(e)&&n(t)||e===t}render(){const{useDataSource:e,dataSource:t,dataSourceInfo:n,children:r,query:o,errorString:i}=this.props;return e&&n?n.instanceStatus===Ts.e3.CreateError?null!=i?i:null:t&&r?"function"==typeof r?r(t,n,o):r:null:null}doQuery(){if(!this.props.dataSource)return;const{dataSource:e,query:t,queryCount:n,queryAll:r,widgetId:o,localId:i,queryScope:s,queryAllSignal:a,queryAllProgress:l}=this.props,u=e;if(!u.load||!u.query)return;if(!t)return;const c={widgetId:o||i,scope:s};if(r?u.loadAll(t,a,l,c):u.load(t,c),n){const e=Object.assign({},t);u.loadCount(e,c)}}handleAutoRefresh(){if(!this.props.dataSource)return;const e=this.props.dataSource;e.stopAutoRefresh&&e.startAutoRefresh&&((window.jimuConfig.isBuilder||window.jimuConfig.isInBuilder)&&this.props.appMode===Os.$0.Design?e.stopAutoRefresh():e.startAutoRefresh())}createDataSource(){this.props.useDataSource&&this.props.dataSourceManager.createDataSourceByUseDataSource(this.props.useDataSource,this.props.localId).then((e=>null)).catch((e=>{var t,n;if(!this.props.dataSource)if(e.dataSourceId===this.props.useDataSource.dataSourceId||e.dataSourceId===this.props.useDataSource.rootDataSourceId||e.dataSourceId===this.props.useDataSource.mainDataSourceId)this.props.onCreateDataSourceFailed&&this.props.onCreateDataSourceFailed(e);else{const r=null===(t=e.dataSourceId)||void 0===t?void 0:t.split("-"),o=null===(n=this.props.useDataSource.dataSourceId)||void 0===n?void 0:n.split("-");(null==r?void 0:r.every(((e,t)=>(null==o?void 0:o[t])===e)))&&this.props.onCreateDataSourceFailed&&this.props.onCreateDataSourceFailed(e)}}))}getChangedQueryRequiredInfo(e,t,n,r,o,i){const s=Zf.filter((e=>"needRefresh"!==e)),a=this.getChangedInfo(e,t,Zf),l=this.getChangedInfo(n,r,s),u=this.getChangedInfo(o,i,s),c={queryRequiredInfo:null,prevQueryRequiredInfo:null},d=this.getDsAndBelongToDsIds();return this.setChangedInfoToResult(d.dsId,a.info,!1,c),this.setChangedInfoToResult(d.belongToDsId,l.info,!1,c),this.setChangedInfoToResult(d.belongToBelongToDsId,u.info,!1,c),this.setChangedInfoToResult(d.dsId,a.prevInfo,!0,c),this.setChangedInfoToResult(d.belongToDsId,l.prevInfo,!0,c),this.setChangedInfoToResult(d.belongToBelongToDsId,u.prevInfo,!0,c),c}setChangedInfoToResult(e,t,n,r){if(e&&t){const o=n?"prevQueryRequiredInfo":"queryRequiredInfo";r[o]||(r[o]={}),r[o][e]=t}}getChangedInfo(e,t,n){const r={};return null==n||n.forEach((n=>{(null==e?void 0:e[n])!==(null==t?void 0:t[n])&&(r.info=r.info?r.info.set(n,null==e?void 0:e[n]):y({[n]:null==e?void 0:e[n]}),r.prevInfo=r.prevInfo?r.prevInfo.set(n,null==t?void 0:t[n]):y({[n]:null==t?void 0:t[n]}))})),r}getDsAndBelongToDsIds(){var e,t,n,r,o,i;return{dsId:null===(e=this.props.dataSource)||void 0===e?void 0:e.id,belongToDsId:null===(n=null===(t=this.props.dataSource)||void 0===t?void 0:t.belongToDataSource)||void 0===n?void 0:n.id,belongToBelongToDsId:null===(i=null===(o=null===(r=this.props.dataSource)||void 0===r?void 0:r.belongToDataSource)||void 0===o?void 0:o.belongToDataSource)||void 0===i?void 0:i.id}}}const th=(0,v.connect)(((e,t)=>{var n,r,o;const i=Cs.A.getInstance(),s=window.jimuConfig.isBuilder?e.appStateInBuilder:e;if(!s||!t.useDataSource&&!t.dataSource)return{dataSourceInfo:null,dataSourceJson:null,dataSourceSchema:null,rootDataSourceJson:null,dataSource:null,dataSourceManager:i,belongToDataSourceInfo:null,appMode:null};const a=t.dataSource?(0,ls.getUseDataSourceByDataSource)(t.dataSource):t.useDataSource,l=(0,ls.getRealDataSourceId)(a,t.localId),u=i.getDataSource(a.rootDataSourceId);let c=i.getDataSource(l);return a.rootDataSourceId&&!u&&(c=null),{dataSourceInfo:s.dataSourcesInfo[l],dataSourceJson:(null===(n=null==c?void 0:c.getMainDataSource())||void 0===n?void 0:n.getDataSourceJson())||s.appConfig.dataSources[a.mainDataSourceId],dataSourceSchema:(null==c?void 0:c.getSchema())||(null===(r=s.appConfig.dataSources[a.mainDataSourceId])||void 0===r?void 0:r.schema),rootDataSourceJson:(null==u?void 0:u.getDataSourceJson())||s.appConfig.dataSources[a.rootDataSourceId],dataSource:c,dataSourceManager:i,belongToDataSourceInfo:(null==c?void 0:c.isDataView)||(null==c?void 0:c.isLocal)?s.dataSourcesInfo[c.belongToDataSource.id]:null,belongToBelongToDataSourceInfo:(null==c?void 0:c.isLocal)&&(null===(o=c.belongToDataSource)||void 0===o?void 0:o.isDataView)?s.dataSourcesInfo[c.belongToDataSource.belongToDataSource.id]:null,appMode:s.appRuntimeInfo.appMode}}))(eh),nh=th;class rh extends f.PureComponent{constructor(){super(...arguments),this.handleDataSourceCreated=()=>{const{onDataSourceCreated:e=()=>null}=this.props;e(this.getDataSources())},this.handleDataSourceInfoChange=()=>{const{onDataSourceInfoChange:e=()=>null}=this.props;e(this.getDataSourcesInfo())},this.getDataSources=()=>{const{useDataSources:e=[]}=this.props,t={},n=Cs.A.getInstance();return e.forEach((e=>{t[e.dataSourceId]=n.getDataSource(e.dataSourceId)})),t},this.getDataSourcesInfo=()=>{const{useDataSources:e=[]}=this.props,t={};return e.forEach((e=>{t[e.dataSourceId]=this.props[e.dataSourceId]})),t},this.MemoDataSourceComponents=f.memo((({useDataSources:e,queries:t,widgetId:n,localId:r})=>e?f.createElement(f.Fragment,null,e.asMutable().map(((e,o)=>f.createElement(nh,{key:o,useDataSource:e,query:null==t?void 0:t[e.dataSourceId],widgetId:n,localId:r,onDataSourceCreated:this.handleDataSourceCreated,onDataSourceInfoChange:this.handleDataSourceInfoChange})))):null))}render(){const{useDataSources:e,queries:t,widgetId:n,localId:r,children:o}=this.props,i=this.MemoDataSourceComponents,s=f.createElement(i,{useDataSources:e,queries:t,widgetId:n,localId:r});return o?f.createElement(f.Fragment,null,s,"function"==typeof o?o(this.getDataSources(),this.getDataSourcesInfo()):o):s}}const oh=(0,v.connect)(((e,t)=>{const n={},r=window.jimuConfig.isBuilder?e.appStateInBuilder:e;return t.useDataSources&&t.useDataSources.forEach((e=>{const o=(0,ls.getRealDataSourceId)(e,t.localId);Cs.A.getInstance().getDataSource(o)&&(n[o]=r.dataSourcesInfo[o])})),n}))(rh);var ih=s(743),sh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function ah(e){var t,n;let r="";const o="system",i=function(){const e=(0,Bi.Vp)().getState();return window.jimuConfig.isBuilder?null==e?void 0:e.appStateInBuilder:e}(),s=null===(n=null===(t=null==i?void 0:i.appConfig)||void 0===t?void 0:t.attributes)||void 0===n?void 0:n.timezone;if(s){if(s.type===Ql.gv.Device)r=o;else if(s.type===Ql.gv.Specific)r=s.value;else if(s.type===Ql.gv.Data){const t=[];e.forEach((e=>{if(e&&e.getTimezone){let n=e.getTimezone();n&&("device"===n&&(n=o),t.includes(n)||t.push(n))}})),r=1===t.length?t[0]:o}}else r=o;return r||(r=o),r}function lh(e,t){return sh(this,void 0,void 0,(function*(){let n=null,r=null;yield ph(0);const o=null==t?void 0:t.dataSourceId,i=Cs.A.getInstance().getDataSource(o),s=null==t?void 0:t.record,a=yield function(e,t,n){return sh(this,void 0,void 0,(function*(){let r=null;if(n&&!n.fake){const e=yield ls.changeJimuRecordsToJSAPIGraphics([n]);(null==e?void 0:e.length)>0&&(r=e[0])}else if(e){const e={},n=null==t?void 0:t.getSchema(),o=null==n?void 0:n.fields;o&&Object.keys(o).forEach((t=>{e[t]=null}));r=new(yield(0,bu.p)("esri/Graphic"))({geometry:null,attributes:e})}return r}))}(e,i,s);n=yield function(e,t,n){return sh(this,void 0,void 0,(function*(){const r={name:"$feature",type:"feature"},o={variables:[r]};if(e){let e=null==n?void 0:n.layer;if(e||t&&(t.layer?e=t.layer:t.createJSAPILayerByDataSource&&(e=yield t.createJSAPILayerByDataSource())),e){e.load&&!e.loaded&&(yield e.load());const t=r;t.description="The feature passed to the script during execution.",t.definition=e}else o.variables=[];o.bundles=["core"]}return o}))}(e,i,a),r=function(e){return{$feature:e}}(a);const l=ah([i]);return{type:ua.FeatureProfile,profile:n,profileVariableInstances:r,timeZone:l}}))}function uh(e){return{name:e,type:"dictionary",properties:[{name:"layer",type:"featureSet"},{name:"queryParams",type:"dictionary",properties:[{name:"where",type:"text"},{name:"outFields",type:"array",elementType:{type:"text"}},{name:"orderByFields",type:"array",elementType:{type:"text"}},{name:"objectIds",type:"array",elementType:{type:"text"}},{name:"geometry",type:"geometry"},{name:"spatialRelationship",type:"text"},{name:"distance",type:"number"},{name:"units",type:"text"},{name:"returnGeometry",type:"boolean"},{name:"geometryPrecision",type:"number"},{name:"outStatistics",type:"array",elementType:{type:"dictionary",properties:[{name:"statisticType",type:"text"},{name:"onStatisticField",type:"text"},{name:"outStatisticFieldName",type:"text"},{name:"statisticParameters",type:"dictionary",properties:[{name:"value",type:"number"},{name:"orderBy",type:"text"}]}]}},{name:"groupByFieldsForStatistics",type:"array",elementType:{type:"text"}},{name:"returnZ",type:"boolean"},{name:"returnM",type:"boolean"},{name:"gdbVersion",type:"text"},{name:"sqlFormat",type:"text"},{name:"returnDistinctValues",type:"boolean"},{name:"timeExtent",type:"dictionary",properties:[{name:"start",type:"date"},{name:"end",type:"date"}]}]},{name:"selectedFeatures",type:"featureSet"},{name:"loadedFeatures",type:"featureSet"},{name:"loadedFields",type:"array",elementType:{type:"text"}}]}}function ch(e){return sh(this,void 0,void 0,(function*(){const t={layer:null,queryParams:{},selectedFeatures:null,loadedFeatures:null,loadedFields:[]};try{yield ph(0);const n=e.getAllUsedFields(),r="*"===n?["*"]:n,o=e.getSelectedRecords(),i=e.getAllLoadedRecords(),s=!1,a=e.createJSAPILayerByDataSource(e,s),l=dh(e,o),u=dh(e,i),c=function(e){return sh(this,void 0,void 0,(function*(){let t=e.getCurrentQueryParams()||{};t=Object.assign({},t);const n=y(t);let r=null;const o=yield ls.changeJimuArcGISQueryToJSAPIQuery(e,n);if("esri.rest.support.Query"===o.declaredClass)r=o;else{r=new(yield(0,bu.p)("esri/rest/support/Query"))(o)}const i=r.geometry||null,s=r.toJSON()||{};r.spatialRelationship&&(s.spatialRelationship=r.spatialRelationship),delete s.outSpatialReference,i&&(s.geometry=i),s.where=function(e){let t=e=e||"";t=t.trim();for(;t.startsWith("(")&&t.endsWith(")");)t=t.slice(1,-1).trim();return t&&"1=1"!==t?e:""}(s.where);const a=s.timeExtent;a&&("number"==typeof a.start&&(a.start=new Date(a.start)),"number"==typeof a.end&&(a.end=new Date(a.end)));const l=s.objectIds;Array.isArray(l)&&(null==l?void 0:l.length)>0&&l.forEach(((e,t)=>{"number"==typeof e&&(l[t]=e.toString())}));const u=uh(e.id).properties.find((e=>"queryParams"===e.name)).properties.map((e=>e.name));return Object.keys(s).forEach((e=>{u.includes(e)||delete s[e]})),s}))}(e),[d,p,f,h]=yield Promise.all([a,l,u,c]);t.layer=d,t.queryParams=h,t.selectedFeatures=p,t.loadedFeatures=f,t.loadedFields=r}catch(e){console.error("createSingleDataSourceProfileVariableInstances error",e)}return t}))}function dh(e,t){return sh(this,void 0,void 0,(function*(){var n,r;let o=null;try{t||(t=[]);let i=null;if((null==t?void 0:t.length)>0){const e=t[0],o=null===(r=null===(n=null==e?void 0:e.feature)||void 0===n?void 0:n.geometry)||void 0===r?void 0:r.spatialReference;if(o){const e=o;i=e.declaredClass&&e.toJSON?e.toJSON():o}}const s=yield ls.createJSAPIFeatureLayerByRecords(e,t);o=null==s?void 0:s.layer,o&&!o.spatialReference&&i&&(o.spatialReference=i)}catch(e){console.error("createJSAPIFeatureLayerByRecords error",e)}return o}))}function ph(e){return new Promise((t=>{setTimeout((()=>{t()}),e)}))}const fh=(0,Ol.Ay)((function(e){const t=e.usedForArcadeEditor,n=e.onProfileContextChange,r=e.repeatedDataSource,[o,i]=f.useState(null),s=f.useRef(0);return f.useEffect((()=>{n&&n(o)}),[o,n]),f.useEffect((()=>{s.current++;const e=s.current;lh(t,r).then((t=>{e===s.current&&i(t)})).catch((e=>{console.error("createFeatureProfileContext error",e)}))}),[t,r]),f.createElement("div",{className:"feature-profile-context-provider d-none"})}));var hh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const gh=[Ts.hg.FeatureLayer,Ts.hg.OrientedImageryLayer,Ts.hg.SubtypeGroupLayer,Ts.hg.SubtypeSublayer];const mh=(0,Ol.Ay)((0,Yl.sY)((function(e){const t=e.usedForArcadeEditor,n=e.onProfileContextChange,r=e.widgetId,o=e.useDataSources,i=f.useMemo((()=>{const e=[];return o&&o.length>0&&o.forEach((t=>{e.push(t)})),e}),[o]),s=f.useRef({}),[a,l]=f.useState({}),u=f.useMemo((()=>{if(!i.every((e=>{const t=null==e?void 0:e.dataSourceId;return!t||t in a})))return null;const e={};Object.keys(a).forEach((t=>{const n=a[t],r=null==n?void 0:n.profileVariableInstances;r&&(e[t]=r)}));const n=Object.keys(e),r=function(e,t){const n={variables:[{name:"$dataSources",type:"dictionary",properties:t.map((e=>uh(e)))}]};return e&&(n.bundles=["core","data-access"]),n}(t,n),o=Cs.z.getInstance(),s=ah(n.map((e=>o.getDataSource(e))));return{type:ua.DataSourcesProfile,profile:r,profileVariableInstances:{$dataSources:e},timeZone:s}}),[a,i,t]);f.useEffect((()=>{n&&n(u)}),[n,u]);const c=f.useCallback(((e,t)=>{l((n=>Object.assign({},n,{[e]:t})))}),[]),d=f.useCallback((e=>{const t=null==e?void 0:e.dataSourceId;if(!t)return;const n=function(e){const t=null==e?void 0:e.dataSourceId;if(t){const e=Cs.z.getInstance().getDataSource(t);if(e&&function(e){if(e){const t=e.type;return gh.includes(t)}return!1}(e))return e}return null}(e);if(!n)return void c(t,null);const r=s.current;"number"==typeof r[t]?r[t]++:r[t]=1;const o=r[t];(function(e){return hh(this,void 0,void 0,(function*(){const t=yield ch(e);return{dataSource:e,profileVariableInstances:t}}))})(n).then((e=>{o===r[t]&&c(t,e)})).catch((e=>{console.error("createSingleArcadeDataSourceInfo error",e),o===r[t]&&c(t,null)}))}),[c]),p=f.useRef({});p.current=f.useMemo((()=>{const e={};return(null==i?void 0:i.length)>0&&i.forEach((t=>{const n=t.dataSourceId;n&&(e[n]=(0,sp.A)(d,300))})),e}),[d,i]);const h=f.useCallback((e=>{const t=null==e?void 0:e.dataSourceId;if(t){const n=p.current,r=n&&n[t];r?r(e):(console.error("can not find debounce method tryUpdateSingleArcadeDataSourceInfo"),d(e))}}),[d]),g=f.useCallback(((e,t)=>{h(e)}),[h]),m=f.useCallback(((e,t)=>{console.error("DataSourcesProfileContextProvider onCreateDataSourceFailed",t);const n=null==e?void 0:e.dataSourceId;n&&c(n,null)}),[c]),v=f.useCallback(((e,t,n)=>{h(e)}),[h]),y=f.useCallback(((e,t,n)=>{h(e)}),[h]),S=f.useCallback(((e,t,n)=>{t===Ts.e3.Loaded&&n===Ts.e3.Loading&&h(e)}),[h]),I=f.useMemo((()=>i.map((e=>f.createElement(th,{key:null==e?void 0:e.dataSourceId,widgetId:r,useDataSource:e,onDataSourceCreated:t=>{g(e,t)},onCreateDataSourceFailed:t=>{m(e,t)},onQueryRequired:(t,n)=>{v(e,t,n)},onSelectionChange:(t,n)=>{y(e,t,n)},onDataSourceStatusChange:(t,n)=>{S(e,t,n)}})))),[m,g,S,v,y,i,r]);return f.createElement("div",{className:"datasources-profile-context-provider d-none"},I)})));const vh=(0,Ol.Ay)((0,Yl.sY)((function(e){const t=e.usedForArcadeEditor,n=e.onProfileContextChange,r=e.widgetId,o=e.useDataSources,i=f.useMemo((()=>o||S()([])),[o]),s=e.repeatedDataSource,a=f.useMemo((()=>{var e;const n=!!(null===(e=window.jimuConfig)||void 0===e?void 0:e.isBuilder);return t&&n&&da(r)}),[t,r]),l=f.useMemo((()=>{let e="";return 1===(null==i?void 0:i.length)&&(e=i[0].dataSourceId),e||(e=""),e}),[i]),[u,c]=f.useState();f.useEffect((()=>{if(a&&l){const e=Cs.A.getInstance().getDataSource(l);(null==e?void 0:e.query)&&e.query({page:1,pageSize:1,outFields:["*"],returnGeometry:!0}).then((e=>{var t;if((null===(t=null==e?void 0:e.records)||void 0===t?void 0:t.length)>0){const t=null==e?void 0:e.records[0];c(t)}else c(null)})).catch((e=>{console.error("ds.query() error in ArcadeProfileContextProvider",e),c(null)}))}}),[l,a]);const d=f.useMemo((()=>{let e=null;if(s)e=s;else if(a){e={widgetId:r,dataSourceId:l,recordIndex:1,record:u||{fake:!0}}}return e}),[l,u,a,s,r]),p=d?ua.FeatureProfile:ua.DataSourcesProfile,h=p===ua.FeatureProfile,g=p===ua.DataSourcesProfile,m=f.useCallback((e=>{n&&n(e)}),[n]);return f.createElement("div",{className:"arcade-profile-context-provider d-none"},h&&f.createElement(fh,{usedForArcadeEditor:t,repeatedDataSource:d,onProfileContextChange:m}),g&&f.createElement(mh,{usedForArcadeEditor:t,widgetId:r,useDataSources:i,onProfileContextChange:m}))})));var yh=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const Sh={};let Ih=0;const bh={};function wh(e){if(!e)return!1;if("object"!=typeof e||null===e)return!1;if(e.declaredClass)return!1;const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}function Eh(e){return null==e||"string"==typeof e||"number"==typeof e||e instanceof Date}const Ah=(0,Ol.Ay)((0,Yl.sY)((function(e){const t=e.onChange,n=f.useRef(null);n.current=t;const r=e.capabilities,o=f.useMemo((()=>{let e=(null==r?void 0:r.length)>0?r.slice():[ra.Value,ra.Style];const t=e.join()||"null",n=bh[t];return n?e=n:bh[t]=e,e}),[r]),i=e.widgetId,s=e.useDataSources,a=f.useMemo((()=>s||S()([])),[s]),l=e.config,u=f.useRef(null);u.current||(Ih++,u.current=`${i}_${Ih}`);const[c,d]=f.useState(null),p=f.useRef(null),h=f.useRef(0);Ip((()=>{const e=u.current;e&&delete Sh[e]}));const g=f.useCallback((e=>{d(e)}),[]);return f.useEffect((()=>{h.current++;const e=h.current;(function(e,t,n,r){return yh(this,void 0,void 0,(function*(){let o=null;try{const i=null==r?void 0:r.scriptContent,s=null==r?void 0:r.icons,a=null==t?void 0:t.profile,l=null==t?void 0:t.profileVariableInstances,u=(null==t?void 0:t.timeZone)||"system";if(i&&a){const t=yield function(e,t,n){return yh(this,void 0,void 0,(function*(){if(!t||!n)return null;const r=Sh[e];if(r){const e=r.arcadeScript,o=r.profile;if(e&&o){const i=t===e,s=n===o||(0,ih.A)(n,o);if(i&&s)return r.promise}}const o={arcadeScript:t,profile:n,promise:null};return Sh[e]=o,o.promise=function(e,t){return yh(this,void 0,void 0,(function*(){const n=yield(0,bu.p)("esri/arcade");return yield n.createArcadeExecutor(e,t)}))}(t,n),o.promise}))}(e,i,a);if(t&&l){const e={timeZone:u};o=function(e,t,n){let r=null;const o=t.includes(ra.Value),i=t.includes(ra.Style);if(null==e)r=null;else if(wh(e)){const t=e.value;delete e.value;const s=i?aa:[],a=va(e,(o?sa:[]).concat(s)).validValue;if(r=a||{},o){(Eh(t)?t:null)&&(r.value=t)}if(wh(r.background)){const e=function(e,t){var n;let r=null;if(e){r={},e.color&&(r.color=e.color),e.fillType&&(r.fillType=e.fillType);const o=e.image;if(o){let e="";const i=o.toLocaleLowerCase();if(0===i.indexOf("http://")||0===i.indexOf("https://"))e=o;else if((null==t?void 0:t.length)>0){const r=t.find((e=>(null==e?void 0:e.name)===o));e=null===(n=null==r?void 0:r.data)||void 0===n?void 0:n.svg}e&&(r.image={url:e,originalUrl:e})}0===Object.keys(r).length&&(r=null)}return r}(a.background,n);r.background=e}if(wh(r.icon)){const e=function(e,t){let n=null;if(e){n={},e.position&&(n.position=e.position),e.color&&(n.color=e.color),"number"==typeof e.size&&(n.size=e.size);const r=e.name;if(r&&(null==t?void 0:t.length)>0){const e=t.find((e=>(null==e?void 0:e.name)===r));e&&e.data&&(n.data=e.data)}0===Object.keys(n).length&&(n=null)}return n}(a.icon,n);r.icon=e}if(wh(r.text)){const e=function(e){let t=null;if(e){t=e;const n=e.size;"number"==typeof n?t.size=`${n}px`:delete t.size}return t}(a.text);r.text=e}if(wh(r.border)){const e=function(e){function t(e){e&&wh(e)&&"number"==typeof e.width&&(e.width=`${e.width}px`)}if(e){const{border:n,borderLeft:r,borderRight:o,borderTop:i,borderBottom:s}=e;n&&t(n),r&&t(r),o&&t(o),i&&t(i),s&&t(s)}return e}(r.border);r.border=e}}else r=o&&Eh(e)?{value:e}:null;r||(r={});return r}(yield t.executeAsync(l,e),n,s)}}}catch(e){console.warn("resolveArcadeContent error",e)}o||(o={});return S()(o)}))})(u.current,c,o,l).then((t=>{var r,o,i;if(e===h.current){const e=null!==(o=null===(r=p.current)||void 0===r?void 0:r.asMutable({deep:!0}))&&void 0!==o?o:null,s=null!==(i=null==t?void 0:t.asMutable({deep:!0}))&&void 0!==i?i:null;p.current=t;Ti.isDeepEqual(e,s)||n.current&&n.current(t)}})).catch((e=>{console.warn("resolveArcadeContent error",e)}))}),[o,l,c]),f.createElement("div",{className:"arcade-content-resolver-component d-none"},f.createElement(vh,{usedForArcadeEditor:!1,widgetId:i,useDataSources:a,onProfileContextChange:g}))})));var Oh,Ch=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.Failed="RESOLVE_FAILED",e.NotMatched="DATA_SOURCES_IN_EXPRESSION_CANNOT_MATCH_DATA_SOURCES_IN_USE"}(Oh||(Oh={}));class Th extends f.PureComponent{constructor(e){super(e),this.__unmount=!1,this.__resolveCount=1,this.getWhetherExpressionsAreSame=(e,t)=>(0,ih.A)(e,t),this.getWhetherDsInfosAreSame=(e,t,n)=>{if(!n)return!0;if(e||t){if(e&&t){if(Object.keys(e).length!==Object.keys(t).length)return!1;{const r=this.getUseSelectionDsIdsFromExpression(n).map((e=>{var t;return null===(t=Cs.A.getInstance().getDataSource(e))||void 0===t?void 0:t.getMainDataSource()}));return!Object.keys(e).some((n=>{var o,i;const s=Cs.A.getInstance().getDataSource(n);return!(s&&r.some((e=>(null==e?void 0:e.id)===s.getMainDataSource().id))?(0,ih.A)(e[n],t[n]):(0,ih.A)(null===(o=e[n])||void 0===o?void 0:o.without("selectedIds"),null===(i=t[n])||void 0===i?void 0:i.without("selectedIds")))}))}}return!1}return!0},this.getUseSelectionDsIdsFromExpression=e=>{const t=this.getWhetherIsMultipleExpression(e);let n=[];if(!e)return n;if(t){const t=e;Object.keys(t).forEach((e=>{n=n.concat(this.getUseSelectionDsIdsFromSingleExpression(t[e]))}))}else n=n.concat(this.getUseSelectionDsIdsFromSingleExpression(e));return Array.from(new Set(n))},this.getUseSelectionDsIdsFromSingleExpression=e=>{let t=[];return e&&e.parts?(e.parts.forEach((e=>{ls.isSelectionView(null==e?void 0:e.dataSourceId)&&(t=t.concat(e.dataSourceId))})),Array.from(new Set(t))):t},this.getWhetherUseDssAreSame=(e,t)=>!e&&!t||!(!e||!t)&&(e.length===t.length&&!e.some(((n,r)=>{var o,i;return!(0,ih.A)(null===(o=e[r])||void 0===o?void 0:o.without("fields"),null===(i=t[r])||void 0===i?void 0:i.without("fields"))}))),this.getWhetherIsMultipleExpression=e=>!!e&&!(Object.keys(e).includes("name")&&Object.keys(e).includes("parts")&&Array.isArray(e.parts)),this.resolveExpressions=(e,t,n,r,o)=>{if(!e)return Promise.resolve("");if(this.getWhetherIsMultipleExpression(e)){const i=e;Object.keys(i).forEach((e=>{this.resolveSingleExpression(i[e],t,n,o).then((t=>{if(!this.__unmount&&r===this.__resolveCount)if(o){const n=this.resultsCache;this.resultsCache=Object.assign(Object.assign({},n),{[e]:{isSuccessful:!0,value:t}}),this.setState({results:this.resultsCache})}else{const n=this.originResultsCache;this.originResultsCache=Object.assign(Object.assign({},n),{[e]:{isSuccessful:!0,value:t}}),this.setState({originResults:this.originResultsCache})}})).catch((t=>{const n=o?this.resultsCache:this.originResultsCache;this.__unmount||r!==this.__resolveCount||(o?(this.resultsCache=Object.assign(Object.assign({},n),{[e]:{isSuccessful:!1,value:"string"==typeof t?t:null==t?void 0:t.message}}),this.setState({results:this.resultsCache})):(this.originResultsCache=Object.assign(Object.assign({},n),{[e]:{isSuccessful:!1,value:"string"==typeof t?t:null==t?void 0:t.message}}),this.setState({originResults:this.originResultsCache})))}))}))}else this.resolveSingleExpression(e,t,n,o).then((e=>{this.__unmount||r!==this.__resolveCount||(o?(this.resultsCache={isSuccessful:!0,value:e},this.setState({results:this.resultsCache})):(this.originResultsCache={isSuccessful:!0,value:e},this.setState({originResults:this.originResultsCache})))})).catch((e=>{this.__unmount||r!==this.__resolveCount||(o?(this.resultsCache={isSuccessful:!1,value:"string"==typeof e?e:null==e?void 0:e.message},this.setState({results:this.resultsCache})):(this.originResultsCache={isSuccessful:!1,value:"string"==typeof e?e:null==e?void 0:e.message},this.setState({originResults:this.originResultsCache})))}))},this.resolveSingleExpression=(e,t,n,r)=>{const o=this.getWhetherExpressionDssInUseDss(e,t),i=n&&this.getWhetherExpressionDssInRecords(e,n);return o||i?na(e,n,this.props.repeatedDataSource,r).catch((e=>Ch(this,void 0,void 0,(function*(){return yield Promise.reject(new Error(Oh.Failed))})))):Promise.reject(new Error(Oh.NotMatched))},this.onDataSourceCreated=e=>{if(e){const t={};Object.keys(e).forEach((n=>{n&&e[n]&&(t[n]=e[n].getInfo())})),this.setState({infos:t})}},this.onDataSourceInfoChange=e=>{this.getWhetherDsInfosAreSame(e,this.state.infos,this.props.expression)||this.setState({infos:e})},this.getWhetherExpressionDssInUseDss=(e,t)=>!e||!e.parts||!e.parts.some((e=>e&&e.dataSourceId&&!this.getWhetherDsIdInUseDss(e.dataSourceId,t))),this.getWhetherDsIdInUseDss=(e,t)=>{if(!e)return!1;if(e.split("-").reverse()[0]===oa.SELECTION_DATA_VIEW_ID){const n=e.replace(/-dataView_\d{1,}/,"").replace(`-${oa.SELECTION_DATA_VIEW_ID}`,"");return null==t?void 0:t.some((e=>e.mainDataSourceId===n))}return null==t?void 0:t.some((t=>t.dataSourceId===e))},this.getWhetherExpressionDssInRecords=(e,t)=>!e||!e.parts||!e.parts.some((e=>(null==e?void 0:e.dataSourceId)&&!(null==t?void 0:t[e.dataSourceId]))),this.getLocalDataSources=e=>{let t=y([]);return e&&0!==e.length?(e.forEach((e=>{const n=Cs.A.getInstance().getDataSource(e.dataSourceId);n&&n.getAllDerivedDataSources().forEach((e=>{var r;if((null==e?void 0:e.isLocal)&&(null===(r=null==e?void 0:e.id)||void 0===r?void 0:r.includes(`${n.id}-${Ps}`))){const n=e.getRootDataSource(),r=e.getMainDataSource();t=t.concat({dataSourceId:e.id,rootDataSourceId:n&&n.id,mainDataSourceId:r&&r.id,dataViewId:e.dataViewId})}}))})),t):t},this.getQueries=(e,t)=>{const n={};if(!e||!t)return n;const r=this.getWhetherIsMultipleExpression(t)?Object.values(t):[t];let o=[];r.forEach((e=>{var t;(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)>0&&(o=o.concat(Ys(e.parts)))}));return e.filter((e=>!!e)).filter((e=>e.dataViewId!==oa.SELECTION_DATA_VIEW_ID&&o.some((t=>t.dataSourceId===e.dataSourceId&&t.type===gs.Field&&!t.isFromRepeatedDataSourceContext)))).forEach((e=>{n[e.dataSourceId]={}})),n},this.onArcadeResolveValueChange=e=>{if(null!=(null==e?void 0:e.value))if(this.props.onOriginResolveValueChange)this.setState({originResults:{isSuccessful:!0,value:e.value.asMutable?e.value.asMutable():e.value}});else{const t=typeof e.value,n="string"===t?e.value:"number"===t?e.value+"":this.props.intl.formatDate(e.value,{dateStyle:"short",timeStyle:"short"});this.setState({results:{isSuccessful:!0,value:n}})}else this.props.onOriginResolveValueChange?this.setState({originResults:{isSuccessful:!1,value:Oh.Failed}}):this.setState({results:{isSuccessful:!1,value:Oh.Failed}})};const t=La(e.expression);this.state={results:null,originResults:null,infos:null,isArcade:t,allUseDataSources:this.props.useDataSources&&!t?this.getAllUseDataSources(this.props.useDataSources,this.props.expression):this.props.useDataSources,queries:this.props.useDataSources&&!t?this.getQueries(this.props.useDataSources,this.props.expression):null}}componentDidMount(){this.__unmount=!1,this.state.isArcade||this.resolveExpressions(this.props.expression,this.props.useDataSources,this.props.records,this.__resolveCount,!this.props.onOriginResolveValueChange)}componentWillUnmount(){this.__unmount=!0}componentDidUpdate(e,t){const n=this.getWhetherExpressionsAreSame(this.props.expression,e.expression);if(n||this.setState({isArcade:La(this.props.expression)}),this.props.onChange&&t.results!==this.state.results&&null!==this.state.results&&this.props.onChange(this.state.results),this.props.onOriginResolveValueChange&&t.originResults!==this.state.originResults&&null!==this.state.originResults&&this.props.onOriginResolveValueChange(this.state.originResults),!this.state.isArcade&&(this.state.infos===t.infos&&this.props.records===e.records&&n&&this.props.repeatedDataSource===e.repeatedDataSource&&this.getWhetherUseDssAreSame(this.props.useDataSources,e.useDataSources)||(this.__resolveCount++,this.resolveExpressions(this.props.expression,this.props.useDataSources,this.props.records,this.__resolveCount,!this.props.onOriginResolveValueChange)),this.props.useDataSources)){(this.getWhetherNewLocalDssCreated(this.props.onOriginResolveValueChange?t.originResults:t.results,this.props.onOriginResolveValueChange?this.state.originResults:this.state.results)||e.useDataSources!==this.props.useDataSources||e.expression!==this.props.expression)&&this.setState({allUseDataSources:this.getAllUseDataSources(this.props.useDataSources,this.props.expression)}),e.useDataSources===this.props.useDataSources&&e.expression===this.props.expression||this.setState({queries:this.getQueries(this.props.useDataSources,this.props.expression)})}}getWhetherNewLocalDssCreated(e,t){if(this.getWhetherIsMultipleExpression(this.props.expression)){const n=!e||Object.values(e).some((e=>"object"==typeof e&&!(null==e?void 0:e.isSuccessful))),r=t&&!Object.values(t).some((e=>"object"==typeof e&&!(null==e?void 0:e.isSuccessful)));return n&&r}{const n=!e||!e.isSuccessful,r=t&&t.isSuccessful;return n&&r}}getAllUseDataSources(e,t){const n=this.getLocalDataSources(e);let r=n.length>0?e.concat(n):e;if(this.getWhetherIsMultipleExpression(t)){const e=t;Object.keys(e).forEach((t=>{r=this.updateUseDssByExpression(r,e[t])}))}else r=this.updateUseDssByExpression(r,t);return r}updateUseDssByExpression(e,t){var n;if(!e||!t)return e;let r=e;return null===(n=t.parts)||void 0===n||n.forEach(((e,n)=>{var o,i;if(ls.isSelectionView(e.dataSourceId)&&!r.some((t=>t.dataSourceId===e.dataSourceId))){const t=r.find((t=>t.mainDataSourceId===e.dataSourceId.replace(new RegExp(`-${oa.SELECTION_DATA_VIEW_ID}$`),"")));t&&(r=r.concat(y(t).merge({dataSourceId:e.dataSourceId,dataViewId:oa.SELECTION_DATA_VIEW_ID}).without("fields")))}if(e.type===gs.Function){const e=null===(o=t.parts[n+2])||void 0===o?void 0:o.dataSourceId,s=Cs.A.getInstance().getDataSource(e),a=null==s?void 0:s.getMainDataSource(),l=a&&r.some((e=>e.dataSourceId===a.id));a&&!l&&(r=r.concat(y({dataSourceId:a.id,mainDataSourceId:a.id,rootDataSourceId:null===(i=a.getRootDataSource())||void 0===i?void 0:i.id})))}})),r}getLocalLoadId(){return"EXPRESSION_RESOLVER"}render(){if(!this.props.expression||!this.props.useDataSources&&!this.props.records)return null;const e=()=>"function"==typeof this.props.children?this.props.children(this.state.results):this.props.children;return this.props.records?f.createElement("div",null,e()):f.createElement(f.Fragment,null,f.createElement(oh,{useDataSources:this.state.allUseDataSources,onDataSourceCreated:this.state.isArcade?void 0:this.onDataSourceCreated,onDataSourceInfoChange:this.state.isArcade?void 0:this.onDataSourceInfoChange,queries:this.state.queries,widgetId:this.getLocalLoadId()},e),this.state.isArcade&&f.createElement(Ah,{widgetId:this.props.widgetId,useDataSources:this.props.useDataSources,capabilities:[ra.Value],config:Va(this.props.expression),onChange:this.onArcadeResolveValueChange}))}}const xh=(0,Ol.Ay)((0,Yl.sY)(Th));var Rh,Ph;function Dh(e){if(e){if(e===Ka.UserInput||e===Ka.Unique)return Rh.ClauseValuePair;if(e===Ka.Field||e===Ka.Statistics)return Rh.Expression}return null}!function(e){e.ClauseValuePair="ClauseValuePair",e.Expression="Expression"}(Rh||(Rh={})),function(e){e.Normal="Normal",e.Preview="Preview",e.None="None"}(Ph||(Ph={}));const _h="refValue";function Lh(e){return!!(e&&e.expression&&e.expressionReturnType)}function Mh(e){return`condition_${e}`}function kh(e,t,n){var r;let o=null;const i=null==t?void 0:t.condition,s=Dh(null==i?void 0:i.sourceType);if(i)if(s===Rh.ClauseValuePair)o=null===(r=null==i?void 0:i.valueOptions)||void 0===r?void 0:r.value;else if(s===Rh.Expression){const r=Nh(e,n,Mh(t.id));if(null!=r){const e=[{value:r,label:String(r)}];o=y(e)}}return o}function Nh(e,t,n){let r=null;if(t&&n){const o=t[n];if(o&&o.isSuccessful){const t=o.value;"string"==typeof t&&e===Os.Eo.String?r=t:"number"==typeof t&&e===Os.Eo.Number&&(isNaN(t)||(r=t))}}return r}function jh(e,t,n){var r,o;const i=Uh(e),s=e,a=t.operator,l=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.value,u=Uh(l),c=l,d=null===(o=null==n?void 0:n[1])||void 0===o?void 0:o.value;if(![za.StringOperatorIsBlank,za.StringOperatorIsNotBlank].includes(a)&&Fh(n))return!1;let p=!1;return a===za.StringOperatorIs?p=i===u:a===za.StringOperatorIsNot?p=i!==u:a===za.StringOperatorContains?p="string"==typeof i&&i.includes(u):a===za.StringOperatorIsBlank?p=Fh(i):a===za.StringOperatorIsNotBlank?p=!Fh(i):a===za.NumberOperatorIs?p=s===c:a===za.NumberOperatorIsNot?p=s!==c:a===za.NumberOperatorIsGreaterThan?p=s>c:a===za.NumberOperatorIsLessThan?p=s<c:a===za.NumberOperatorIsBetween&&(p=s>=c&&s<=d),p}function Uh(e){return"string"==typeof e?e.toLowerCase():e}function Fh(e){return null==e||""===e}const Bh=(0,Ol.Ay)((0,Yl.sY)((function(e){const t=e.widgetId,n=e.useDataSources,r=e.repeatedDataSource,o=e.conditionStyleConfig,i=e.onChange,s=f.useRef(null);s.current=i;const a=null==o?void 0:o.refValueInfo,l=null==a?void 0:a.expression,u=null==o?void 0:o.items,c=f.useMemo((()=>{const e=[];return(null==u?void 0:u.length)>0&&u.forEach((t=>{const n=null==t?void 0:t.condition;if(n){fl(l,n)&&e.push(t)}})),y(e)}),[u,l]),d=f.useMemo((()=>{const e={arcadeExpression:null,expressionMap:null},t={};return Lh(a)&&(il(a.expression)?e.arcadeExpression=a.expression:t[_h]=a.expression),(null==c?void 0:c.length)>0&&c.forEach((e=>{var n;const r=null==e?void 0:e.condition;if(r){if(Dh(null==r?void 0:r.sourceType)===Rh.Expression){const o=null===(n=null==r?void 0:r.valueOptions)||void 0===n?void 0:n.expression;if(o){const n=Mh(e.id);t[n]=o}}}})),Object.keys(t).length>=1?e.expressionMap=y(t):e.expressionMap=null,e}),[a,c]),[p,h]=f.useState(),[g,m]=f.useState(),S=f.useCallback((e=>{h(e)}),[]),I=f.useCallback((e=>{m(e)}),[]),b=v.useSelector((e=>{var n;const o=(null===(n=window.jimuConfig)||void 0===n?void 0:n.isBuilder)?null==e?void 0:e.appStateInBuilder:e,i=function(e,t,n){var r,o,i,s;if(e){const a=null===(o=null===(r=e.previewConditionInfo)||void 0===r?void 0:r[t])||void 0===o?void 0:o.conditionId;if("number"==typeof a){if(!n)return{parseMode:Ph.Preview,conditionId:a};{const t=n.widgetId;if(t){const r=null===(s=null===(i=e.previewRepeatedRecordInfo)||void 0===i?void 0:i[t])||void 0===s?void 0:s.recordIndex;if("number"==typeof r&&r>=0)return n.recordIndex===r?{parseMode:Ph.Preview,conditionId:a}:{parseMode:Ph.None,conditionId:a}}}}}return{parseMode:Ph.Normal,conditionId:null}}(null==o?void 0:o.dynamicStyleState,t,r)||{parseMode:Ph.Normal,conditionId:null},{parseMode:s,conditionId:a}=i;return`${s},${a}`})),w=!!((null==n?void 0:n.length)>0&&o&&d.arcadeExpression),E=!!((null==n?void 0:n.length)>0&&o&&d.expressionMap);return f.useEffect((()=>{const e={};E&&g&&Object.assign(e,g),w&&(e[_h]=p);let t=Ph.Normal,n=null;if(b){const e=b.split(",");2===e.length&&(t=e[0],n=parseInt(e[1]))}const r=function(e,t,n,r,o,i){if(o===Ph.Normal){const t=null==e?void 0:e.expressionReturnType;if(Lh(e)&&t&&(null==n?void 0:n.length)>0){const e=function(e,t){const n=Nh(e,t,_h);return n}(t,r);if(null==e)return null;for(let o=0;o<n.length;o++){const i=n[o];if(i){if(jh(e,i.condition,kh(t,i,r)))return i.style}}}}else if(o===Ph.Preview){if((null==t?void 0:t.length)>0)for(let e=0;e<t.length;e++){const n=t[e];if(n){const e=n.id;if(!Fh(e)&&e===i)return n.style}}}else if(o===Ph.None)return null;return null}(a,u,c,e,t,n)||null;s.current&&s.current(r)}),[u,p,g,b,a,w,E,c]),f.createElement("div",{className:"condition-style-resolver-component d-none"},w&&f.createElement(xh,{widgetId:t,useDataSources:n,expression:d.arcadeExpression,onOriginResolveValueChange:S}),E&&f.createElement(xh,{widgetId:t,useDataSources:n,expression:d.expressionMap,onOriginResolveValueChange:I}))})));function $h(e){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach&&e.forEach((e=>{$h(e)}));else{Object.keys(e).forEach((t=>{const n=e[t];""===n||null==n?delete e[t]:$h(n)}))}}const Vh=(0,Ol.Ay)((0,Yl.sY)((function(e){const t=e.widgetId,n=e.useDataSources,r=e.dynamicStyleConfig,o=e.onChange,i=(null==r?void 0:r.sourceType)===Qa.Arcade,s=null==r?void 0:r.conditionConfig,a=null==r?void 0:r.arcadeConfig,l=f.useRef(null),u=f.useCallback((e=>{e?e.asMutable||(e=y(e)):e=y({});const t=e.asMutable({deep:!0});$h(t),e=y(t);const n=l.current||null;if(l.current=e,o){const r=(null==n?void 0:n.asMutable({deep:!0}))||null;Ti.isDeepEqual(r,t)||o(e)}}),[o]),c=f.useRef();c.current=u;const d=f.useCallback((e=>{u(e)}),[u]),p=f.useCallback((e=>{u(e)}),[u]),h=(null==n?void 0:n.length)>0&&!!r;return f.useEffect((()=>{if(c.current){const e=y({});c.current(e)}}),[h]),f.createElement("div",{className:"dynamic-style-resolver d-none"},h&&i&&f.createElement(Ah,{capabilities:[ra.Style],widgetId:t,useDataSources:n,config:a,onChange:d}),h&&!i&&f.createElement(Bh,{widgetId:t,useDataSources:n,conditionStyleConfig:s,onChange:p}))})));var Gh=s(6480),Wh=s(3538),Hh=s(3467),qh=s(4022);const zh=function(e,t,n,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n};const Kh=function(e){return function(t){return null==e?void 0:e[t]}}({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var Jh=s(8781),Yh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qh=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const Xh=function(e){return(e=(0,Jh.A)(e))&&e.replace(Yh,Kh).replace(Qh,"")};var Zh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const eg=function(e){return e.match(Zh)||[]};var tg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const ng=function(e){return tg.test(e)};var rg="\\ud800-\\udfff",og="\\u2700-\\u27bf",ig="a-z\\xdf-\\xf6\\xf8-\\xff",sg="A-Z\\xc0-\\xd6\\xd8-\\xde",ag="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",lg="["+ag+"]",ug="\\d+",cg="["+og+"]",dg="["+ig+"]",pg="[^"+rg+ag+ug+og+ig+sg+"]",fg="(?:\\ud83c[\\udde6-\\uddff]){2}",hg="[\\ud800-\\udbff][\\udc00-\\udfff]",gg="["+sg+"]",mg="(?:"+dg+"|"+pg+")",vg="(?:"+gg+"|"+pg+")",yg="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Sg="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ig="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",bg="[\\ufe0e\\ufe0f]?",wg=bg+Ig+("(?:\\u200d(?:"+["[^"+rg+"]",fg,hg].join("|")+")"+bg+Ig+")*"),Eg="(?:"+[cg,fg,hg].join("|")+")"+wg,Ag=RegExp([gg+"?"+dg+"+"+yg+"(?="+[lg,gg,"$"].join("|")+")",vg+"+"+Sg+"(?="+[lg,gg+mg,"$"].join("|")+")",gg+"?"+mg+"+"+yg,gg+"+"+Sg,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ug,Eg].join("|"),"g");const Og=function(e){return e.match(Ag)||[]};const Cg=function(e,t,n){return e=(0,Jh.A)(e),void 0===(t=n?void 0:t)?ng(e)?Og(e):eg(e):e.match(t)||[]};var Tg=RegExp("['\u2019]","g");const xg=function(e){return function(t){return zh(Cg(Xh(t).replace(Tg,"")),e,"")}};const Rg=xg((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));const Pg=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};const Dg=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Pg(e,t,n)};var _g=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Lg=function(e){return _g.test(e)};const Mg=function(e){return e.split("")};var kg="\\ud800-\\udfff",Ng="["+kg+"]",jg="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Ug="\\ud83c[\\udffb-\\udfff]",Fg="[^"+kg+"]",Bg="(?:\\ud83c[\\udde6-\\uddff]){2}",$g="[\\ud800-\\udbff][\\udc00-\\udfff]",Vg="(?:"+jg+"|"+Ug+")"+"?",Gg="[\\ufe0e\\ufe0f]?",Wg=Gg+Vg+("(?:\\u200d(?:"+[Fg,Bg,$g].join("|")+")"+Gg+Vg+")*"),Hg="(?:"+[Fg+jg+"?",jg,Bg,$g,Ng].join("|")+")",qg=RegExp(Ug+"(?="+Ug+")|"+Hg+Wg,"g");const zg=function(e){return e.match(qg)||[]};const Kg=function(e){return Lg(e)?zg(e):Mg(e)};const Jg=function(e){return function(t){t=(0,Jh.A)(t);var n=Lg(t)?Kg(t):void 0,r=n?n[0]:t.charAt(0),o=n?Dg(n,1).join(""):t.slice(1);return r[e]()+o}}("toUpperCase");const Yg=function(e){return Jg((0,Jh.A)(e).toLowerCase())};const Qg=xg((function(e,t,n){return t=t.toLowerCase(),e+(n?Yg(t):t)}));var Xg=s(903),Zg=s(9592);const em=function(e){return(0,Zg.A)(e,4)};var tm=s(9749),nm=s(751);const rm=(0,Jd.A)((function(e,t,n){return(0,tm.A)(e,(0,nm.A)(t)||0,n)}));var om=s(2080),im=s(2528);const sm=function(e,t,n){(void 0!==n&&!(0,Yd.A)(e[t],n)||void 0===n&&!(t in e))&&(0,im.A)(e,t,n)};const am=function(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++o];if(!1===n(i[l],l,i))break}return t}}();var lm=s(154),um=s(1801),cm=s(9759),dm=s(407),pm=s(5175),fm=s(2049),hm=s(3098);const gm=function(e){return(0,hm.A)(e)&&(0,Qd.A)(e)};var mm=s(1200),vm=s(9610),ym=s(2383),Sm=s(5647),Im=Function.prototype,bm=Object.prototype,wm=Im.toString,Em=bm.hasOwnProperty,Am=wm.call(Object);const Om=function(e){if(!(0,hm.A)(e)||"[object Object]"!=(0,ym.A)(e))return!1;var t=(0,Sm.A)(e);if(null===t)return!0;var n=Em.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&wm.call(n)==Am};var Cm=s(4749);const Tm=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var xm=s(9999);const Rm=function(e){return(0,Kd.A)(e,(0,xm.A)(e))};const Pm=function(e,t,n,r,o,i,s){var a=Tm(e,n),l=Tm(t,n),u=s.get(l);if(u)sm(e,n,u);else{var c=i?i(a,l,n+"",e,t,s):void 0,d=void 0===c;if(d){var p=(0,fm.A)(l),f=!p&&(0,mm.A)(l),h=!p&&!f&&(0,Cm.A)(l);c=l,p||f||h?(0,fm.A)(a)?c=a:gm(a)?c=(0,cm.A)(a):f?(d=!1,c=(0,lm.A)(l,!0)):h?(d=!1,c=(0,um.A)(l,!0)):c=[]:Om(l)||(0,pm.A)(l)?(c=a,(0,pm.A)(a)?c=Rm(a):(0,Zd.A)(a)&&!(0,vm.A)(a)||(c=(0,dm.A)(l))):d=!1}d&&(s.set(l,c),o(c,l,r,i,s),s.delete(l)),sm(e,n,c)}};const Dm=function e(t,n,r,o,i){t!==n&&am(n,(function(s,a){if(i||(i=new om.A),(0,Zd.A)(s))Pm(t,n,a,r,e,o,i);else{var l=o?o(Tm(t,a),s,a+"",t,n,i):void 0;void 0===l&&(l=s),sm(t,a,l)}}),xm.A)};const _m=tp((function(e,t,n){Dm(e,t,n)}));var Lm=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Mm=Zc((function(e){return Lm.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),km=function(e){return"theme"!==e},Nm=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?Mm:km},jm=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},Um=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Yc(t,n,r),fd((function(){return Qc(t,n,r)})),null},Fm=function e(t,n){var r,o,i=t.__emotion_real===t,s=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,o=n.target);var a=jm(t,n,i),l=a||Nm(s),u=!l("as");return function(){var c=arguments,d=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&d.push("label:"+r+";"),null==c[0]||void 0===c[0].raw)d.push.apply(d,c);else{var p=c[0];d.push(p[0]);for(var h=c.length,g=1;g<h;g++)d.push(c[g],p[g])}var m=vd((function(e,t,n){var r=u&&e.as||s,i="",c=[],p=e;if(null==e.theme){for(var h in p={},e)p[h]=e[h];p.theme=f.useContext(yd)}"string"==typeof e.className?i=Jc(t.registered,c,e.className):null!=e.className&&(i=e.className+" ");var g=dd(d.concat(c),t.registered,p);i+=t.key+"-"+g.name,void 0!==o&&(i+=" "+o);var m=u&&void 0===a?Nm(r):l,v={};for(var y in e)u&&"as"===y||m(y)&&(v[y]=e[y]);return v.className=i,n&&(v.ref=n),f.createElement(f.Fragment,null,f.createElement(Um,{cache:t,serialized:g,isStringTag:"string"==typeof r}),f.createElement(r,v))}));return m.displayName=void 0!==r?r:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=s,m.__emotion_styles=d,m.__emotion_forwardProp=a,Object.defineProperty(m,"toString",{value:function(){return"."+o}}),m.withComponent=function(t,r){return e(t,(0,Hc.A)({},n,r,{shouldForwardProp:jm(m,r,!0)})).apply(void 0,d)},m}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Fm[e]=Fm(e)}));const Bm=yd,$m=function(e){var t=f.useContext(yd);return e.theme!==t&&(t=Sd(t)(e.theme)),f.createElement(yd.Provider,{value:t},e.children)},Vm=function(){return f.useContext(yd)},Gm=function(e){var t,n,r=e.displayName||e.name||"Component",o=f.forwardRef((function(t,n){var r=f.useContext(yd);return f.createElement(e,(0,Hc.A)({theme:r,ref:n},t))}));return o.displayName="WithTheme("+r+")",t=o,n=e,Kc()(t,n)},Wm=Fm,Hm=md,qm=Td,zm=Wc;var Km,Jm,Ym,Qm,Xm,Zm=s(6319);!function(e){e.Display1="display1",e.Display2="display2",e.Display3="display3",e.Display4="display4",e.Display5="display5",e.Display6="display6",e.Body1="body1",e.Body2="body2",e.Caption1="caption1",e.Caption2="caption2"}(Km||(Km={})),function(e){e.White="white",e.Black="black",e.Transparent="transparent"}(Jm||(Jm={})),function(e){e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(Ym||(Ym={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark"}(Qm||(Qm={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Dark="dark",e.Success="success",e.Info="info",e.Warning="warning",e.Danger="danger"}(Xm||(Xm={}));const ev="exb_user_settings";var tv,nv,rv;!function(e){e.Urlinfo="URLINFO"}(tv||(tv={})),function(e){e.Original="ORIGINAL",e.High="HIGH",e.Medium="MEDIUM",e.Low="LOW",e.Fuzzy="FUZZY"}(nv||(nv={})),function(e){e[e.Original=99.99]="Original",e[e.High=66.66]="High",e[e.Medium=33.33]="Medium",e[e.Low=0]="Low"}(rv||(rv={}));var ov=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class iv extends Eu{isSupported(e,t){return ov(this,void 0,void 0,(function*(){if(!e.length)return!1;for(const n of e){if(yield this.isDataSetSupportExportItem(n,t))return!0}return!1}))}isDataSetSupportExportItem(e,t){return ov(this,void 0,void 0,(function*(){var n,r;if(null==e.dataSource||e.dataSource.getStatus()===Ts.e3.NotReady||t===mu.DataSource&&"function"!=typeof e.dataSource.query||t===mu.Records&&!(null===(n=e.records)||void 0===n?void 0:n.length)||!Object.keys(e.dataSource.getSchema()||{}).length)return!1;const o=e.dataSource,i=e.dataSource.itemId&&!this.isFeatureCollectionDataSource(e.dataSource),s=o.url||i,a=t===mu.DataSource&&s,l=!!o.allowToExportData&&(yield o.allowToExportData()),u=yield this.checkRenderPrivilege(),c=null===(r=o.getExportOptions)||void 0===r?void 0:r.call(o);let d=!0;return c&&(d=null==c.formats||c.formats.includes(Ql.AV.Item)),!a&&l&&u&&d}))}addItem(e,t){return ov(this,arguments,void 0,(function*(e,t,n={},r){return r?(0,Xr.createItemInFolder)(Object.assign(Object.assign({},n),{item:e,folderId:r,authentication:t})):(0,Xr.createItem)(Object.assign(Object.assign({},n),{item:e,authentication:t}))}))}createItem(e,t){return ov(this,void 0,void 0,(function*(){try{const n=$i.Cv.getInstance(),r=(0,Bi.Vp)().getState().portalUrl,o=n.getSessionByUrl(r);return(yield this.addItem(e,o,null,t)).id}catch(e){console.error(e)}return null}))}createServiceItem(e,t,n){return ov(this,void 0,void 0,(function*(){const{dataSource:r}=e,o={title:t,type:"Feature Service",url:r.url};if("function"==typeof r.getLayerDefinition){const e=r.getLayerDefinition(),t=e.extent;e.spatialReference&&(o.spatialReference=e.spatialReference),e.extent&&(o.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]])}return this.createItem(o,n)}))}getFieldDomain(e,t,n){if(e.domain)return e.domain;const r=null==t?void 0:t.getFieldCodedValueList(null==e?void 0:e.name);if(!(null==r?void 0:r.length))return;const o=n.map((t=>t.getFieldValue(e.jimuName||e.name)));return{codedValues:r.filter((e=>o.includes(e.value))).map((e=>({code:e.value,name:e.label}))),type:"codedValue"}}getFieldForLayerDefinition(e,t,n){return{name:e.name,type:e.esriType,alias:e.alias,format:e.format,domain:this.getFieldDomain(e,t,n)}}getLayerForFeatureCollection(e,t,n,r){return ov(this,arguments,void 0,(function*(e,t,n,r,o=!0){var i,s,a,l,u,c,d,p,f,h,g,m;const{dataSource:v,fields:y}=e;let S;S=t===mu.Records?e.records:yield this.getAllFeatureCollection(v,y,o);const I=v.getSchema(),b=(null==y?void 0:y.length)?y:Object.keys(null==I?void 0:I.fields)||[],w=v.getGeometryType(),E=null===(s=(i=v).getLayerDefinition)||void 0===s?void 0:s.call(i),A={name:I.label||v.getLabel(),type:w?"Feature Layer":"Table",geometryType:w,fields:b.map((e=>{var t,n,r;const o=Object.assign(Object.assign({},(null===(t=I.fields[e])||void 0===t?void 0:t.asMutable({deep:!0}))||{}),(null===(r=null===(n=null==E?void 0:E.fields)||void 0===n?void 0:n.find)||void 0===r?void 0:r.call(n,(t=>t.name===e)))||{});return this.getFieldForLayerDefinition(o,v,S)})),objectIdField:I.idField};let O=!1;const C=null===(l=null===(a=v.layer)||void 0===a?void 0:a.renderer)||void 0===l?void 0:l.toJSON(),T=null==E?void 0:E.drawingInfo,x=C?{renderer:C}:T||null;if(x){const e=(0,Xg.A)(x);if(e.renderer){const t=[];switch(e.renderer.type){case"classBreaks":case"class-breaks":case"heatmap":e.renderer.field&&t.push(e.renderer.field);break;case"uniqueValue":case"unique-value":e.renderer.field1&&t.push(e.renderer.field1),e.renderer.field2&&t.push(e.renderer.field2),e.renderer.field3&&t.push(e.renderer.field3)}const n=[];if(t.forEach((e=>{var t;const r=null===(t=I.fields[e])||void 0===t?void 0:t.asMutable({deep:!0});A.fields.find((t=>t.name===e))||(n.push(r.name),A.fields.push(this.getFieldForLayerDefinition(r,v,S)))})),n.length)try{const e={outFields:n,returnGeometry:o};yield v.load(e,{widgetId:`${r}_export_to_item_data_action`,refresh:!0}),O=!0}catch(e){console.log(e)}}(null===(c=null===(u=null==e?void 0:e.renderer)||void 0===u?void 0:u.visualVariables)||void 0===c?void 0:c.length)&&(e.renderer.visualVariables=e.renderer.visualVariables.filter((e=>"sizeInfo"!==e.type))),A.drawingInfo=e}const R=yield n.convertDataRecordSetToFeatureSet({name:e.name,dataSource:v,records:O?S.map((e=>{var t;const n=e.getId();return n&&null!==(t=v.getRecordById(n))&&void 0!==t?t:e})):S,fields:A.fields.map((e=>e.name))});A.spatialReference=R.spatialReference;const P=null===(p=(d=v).getCurrentQueryParams)||void 0===p?void 0:p.call(d);(null==P?void 0:P.where)&&(A.definitionExpression=P.where,A.defaultVisibility=!0);const D=null===(h=(f=v).getPopupInfo)||void 0===h?void 0:h.call(f);return(null===(g=null==D?void 0:D.fieldInfos)||void 0===g?void 0:g.length)&&(null===(m=A.fields)||void 0===m?void 0:m.length)&&(D.fieldInfos=D.fieldInfos.filter((e=>A.fields.find((t=>t.name===e.fieldName))))),{popupInfo:D,layerDefinition:A,featureSet:R.toJSON()}}))}createFeatureCollectionItem(e,t,n,r,o){return ov(this,arguments,void 0,(function*(e,t,n,r,o,i=!0){const s=yield Promise.allSettled(e.map((e=>this.isDataSetSupportExportItem(e,t)))),a=e.filter(((e,t)=>!("fulfilled"!==s[t].status||!s[t].value))),{featureUtils:l}=yield(0,Is.loadModule)("jimu-arcgis"),u=(yield Promise.allSettled(a.map((e=>this.getLayerForFeatureCollection(e,t,l,o,i))))).map((e=>"fulfilled"===e.status?e.value:null)).filter((e=>!!e)),c={layers:u},d=u.length>1?["Feature Collection"]:["Feature Collection","Singlelayer"];u.every((e=>{var t;return"Table"===(null===(t=null==e?void 0:e.layerDefinition)||void 0===t?void 0:t.type)}))&&d.push("Table");const p={title:n,type:"Feature Collection",typeKeywords:d,text:JSON.stringify(c)};return this.createItem(p,r)}))}checkPrivilegeAsync(){return ov(this,void 0,void 0,(function*(){const e=$i.Cv.getInstance();if(!(yield e.getUserInfo()))try{yield e.signIn()}catch(e){return!1}const t=yield ts(),n=yield ns();return t&&n}))}checkRenderPrivilege(){return ov(this,void 0,void 0,(function*(){const e=$i.Cv.getInstance();if(!(yield e.getUserInfo()))return!0;const t=yield ts(),n=yield ns();return t&&n}))}getAllFeatureCollection(e,t){return ov(this,arguments,void 0,(function*(e,t,n=!0){const r=e;if("function"==typeof r.queryCount){const e=(yield r.queryCount({})).count;return yield this.query(r,e,t,n)}return[]}))}query(e,t){return ov(this,arguments,void 0,(function*(e,t,n=null,r=!0){const o=Math.ceil(t/1e3);let i=[];for(let t=1;t<=o;t++){const o={page:t,pageSize:1e3,returnGeometry:r};null!=n&&(o.outFields=n);const s=yield e.query(o);i=i.concat(s.records)}return i}))}}var sv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class av extends iv{constructor(e){super(e),this.icon=Iu()}onExecute(e,t,n){return sv(this,void 0,void 0,(function*(){if(!(yield this.checkPrivilegeAsync()))return!1;const{AddItemDialog:r}=yield(0,Is.loadModule)("jimu-ui"),o=1===e.length?`${e[0].dataSource.getLabel()}`:"Feature collection",i=document.querySelector(".active-data-action-item");return f.createElement(r,{defaultName:o,keepOpenAfterConfirm:!0,reference:i,onConfirm:(r,o)=>this.handleConfirm(e,t,r,o,n)})}))}handleConfirm(e,t,n,r,o){return sv(this,void 0,void 0,(function*(){try{const i=yield this.createFeatureCollectionItem(e,t,n,r,o);if(i)return i}catch(e){console.error(e)}return""}))}}var lv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class uv extends iv{constructor(e){super(e),this.icon=Iu()}isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return lv(this,void 0,void 0,(function*(){if(e.length>1)return!1;const r=e[0].dataSource;if(!(!!r.allowToExportData&&(yield r.allowToExportData()))||!r.getExportOptions||null==r.getGeometryType())return!1;const o=r.getExportOptions();return!(o&&null!=o.formats&&!o.formats.includes(Ql.AV.Shapefile))&&(t===mu.Records||t===mu.DataSource&&this.isFeatureCollectionDataSource(r)?n.isSupported.call(this,e,t):r.supportReplica())}))}onExecute(e,t,n){return lv(this,void 0,void 0,(function*(){var r;const{dataSource:o}=e[0];if(t===mu.DataSource&&!this.isFeatureCollectionDataSource(o)){try{const e=yield this.tryCreateReplica(o,"shapefile",null,!0);return window.open(e,"_blank"),!0}catch(e){console.error(e)}return}if(!(yield this.checkPrivilegeAsync()))return!1;const{ExportDataDialog:i}=yield(0,Is.loadModule)("jimu-ui"),s=1===e.length?`${e[0].dataSource.getLabel()}`:"Feature collection",a=document.querySelector(".active-data-action-item"),l=this.getLocalRecrods(e[0]),u=l.length>0?this.getSpatialReferenceFromRecord(l[0]):null,c=null===(r=o.getMainDataSource())||void 0===r?void 0:r.getLayerDefinition(),d=(null==c?void 0:c.sourceSpatialReference)||(null==c?void 0:c.spatialReference);return f.createElement(i,{defaultName:s,format:"Shapefile",reference:a,sourceWkid:null==u?void 0:u.wkid,targetWkid:null==d?void 0:d.wkid,keepOpenAfterConfirm:!0,onConfirm:(r,o)=>this.handleConfirm(e,t,r,o,n)})}))}handleConfirm(e,t,n,r,o){return lv(this,void 0,void 0,(function*(){try{const i=yield this.createFeatureCollectionItem(e,t,n,r,o);if(i)return i}catch(e){console.error(e)}return""}))}}var cv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class dv extends iv{constructor(e){super(e),this.icon=Iu()}isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return cv(this,void 0,void 0,(function*(){if(e.length>1)return!1;const r=e[0].dataSource;if(!(!!r.allowToExportData&&(yield r.allowToExportData()))||!r.getExportOptions)return!1;const o=r.getExportOptions();return!(o&&null!=o.formats&&!o.formats.includes(Ql.AV.FileGDB))&&(t===mu.Records||t===mu.DataSource&&this.isFeatureCollectionDataSource(r)?n.isSupported.call(this,e,t):r.supportReplica())}))}onExecute(e,t,n){return cv(this,void 0,void 0,(function*(){var r;const{dataSource:o,fields:i}=e[0];if(t===mu.DataSource&&!this.isFeatureCollectionDataSource(o)){try{const e=yield this.tryCreateReplica(o,"filegdb",i);return window.open(e,"_blank"),!0}catch(e){console.error(e)}return}if(!(yield this.checkPrivilegeAsync()))return!1;const{ExportDataDialog:s}=yield(0,Is.loadModule)("jimu-ui"),a=1===e.length?`${e[0].dataSource.getLabel()}`:"Feature collection",l=document.querySelector(".active-data-action-item"),u=this.getLocalRecrods(e[0]),c=u.length>0?this.getSpatialReferenceFromRecord(u[0]):null,d=null===(r=o.getMainDataSource())||void 0===r?void 0:r.getLayerDefinition(),p=(null==d?void 0:d.sourceSpatialReference)||(null==d?void 0:d.spatialReference);return f.createElement(s,{defaultName:a,format:"File Geodatabase",reference:l,sourceWkid:null==c?void 0:c.wkid,targetWkid:null==p?void 0:p.wkid,keepOpenAfterConfirm:!0,onConfirm:(r,o)=>this.handleConfirm(e,t,r,o,n)})}))}handleConfirm(e,t,n,r,o){return cv(this,void 0,void 0,(function*(){try{const i=yield this.createFeatureCollectionItem(e,t,n,r,o);if(i)return i}catch(e){console.error(e)}return""}))}}var pv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class fv extends iv{constructor(e){super(e),this.icon=Iu()}isSupported(e,t){const n=Object.create(null,{isSupported:{get:()=>super.isSupported}});return pv(this,void 0,void 0,(function*(){if(e.length>1)return!1;const r=e[0].dataSource;if(!(!!r.allowToExportData&&(yield r.allowToExportData()))||!r.getExportOptions||null==r.getGeometryType())return!1;const o=r.getExportOptions();return!(o&&null!=o.formats&&!o.formats.includes(Ql.AV.KML))&&(t===mu.Records||t===mu.DataSource&&this.isFeatureCollectionDataSource(r)?n.isSupported.call(this,e,t):r.supportReplica())}))}onExecute(e,t,n){return pv(this,void 0,void 0,(function*(){var r;const{dataSource:o,fields:i}=e[0];if(t===mu.DataSource&&!this.isFeatureCollectionDataSource(o)){try{const e=yield this.tryCreateReplica(o,"kml",i,!0);return window.open(e,"_blank"),!0}catch(e){console.error(e)}return}if(!(yield this.checkPrivilegeAsync()))return!1;const{ExportDataDialog:s}=yield(0,Is.loadModule)("jimu-ui"),a=1===e.length?`${e[0].dataSource.getLabel()}`:"Feature collection",l=document.querySelector(".active-data-action-item"),u=this.getLocalRecrods(e[0]),c=u.length>0?this.getSpatialReferenceFromRecord(u[0]):null,d=null===(r=o.getMainDataSource())||void 0===r?void 0:r.getLayerDefinition(),p=(null==d?void 0:d.sourceSpatialReference)||(null==d?void 0:d.spatialReference);return f.createElement(s,{defaultName:a,format:"KML",reference:l,sourceWkid:null==c?void 0:c.wkid,targetWkid:null==p?void 0:p.wkid,keepOpenAfterConfirm:!0,onConfirm:(r,o)=>this.handleConfirm(e,t,r,o,n)})}))}handleConfirm(e,t,n,r,o){return pv(this,void 0,void 0,(function*(){try{const i=yield this.createFeatureCollectionItem(e,t,n,r,o);if(i)return i}catch(e){console.error(e)}return""}))}}var hv=s(4747),gv=s.n(hv),mv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const vv=["count","countEmpty","sum","min","max","avg","stddev"],yv=["count","sum","min","max","avg","stddev"],Sv=e=>{const t=e.length;if(t<=1)return 0;let n=0;e.forEach((function(e){n+=e}));const r=n/t;let o=0;return e.forEach((function(e){o+=Math.pow(e-r,2)})),Math.sqrt(1/(t-1)*o)},Iv=e=>{var t,n;const r=Object.values((null===(t=e.dataSource.getSchema())||void 0===t?void 0:t.fields)||{});let o=r.filter((e=>e.esriType!==Os.oX.OID&&e.type===Os.Eo.Number)).map((e=>e.name)),i=e.fields||[];if(1===i.length){(null===(n=r.find((e=>e.name===i[0])))||void 0===n?void 0:n.esriType)===Os.oX.OID&&(i=[])}return i.length>0&&(o=o.filter((e=>i.includes(e)))),o};var bv=s(4682),wv=s.n(bv),Ev=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Av extends vu{constructor(e){super(e),this.dataStatisticsPopperRef={},this.isWatchingDataSetsChange=!0,this.icon=gv()}loadModules(){return Ev(this,void 0,void 0,(function*(){const{FloatingPanel:e,Label:t,Loading:n,LoadingType:r,Icon:o}=yield(0,Is.loadModule)("jimu-ui");this._modules={FloatingPanel:e,Label:t,Loading:n,LoadingType:r,Icon:o}}))}isSupported(e,t){return Ev(this,void 0,void 0,(function*(){const n=1===e.length&&Pv(e[0],t);return n&&!this._modules&&(yield this.loadModules()),n}))}onExecute(e,t,n,r){this._version||(this._version=0);const o=Object.assign({version:this._version++,iconRef:document.querySelector(".active-data-action-item")||{getBoundingClientRect:()=>({width:0,height:0,left:document.body.clientWidth/2,top:document.body.clientHeight/2-Cv.height/2}),isVirtualElement:!0},dataSet:e[0],dataLevel:t},this._modules);return this.dataStatisticsPopperRef[n]=f.createRef(),Promise.resolve(Cd(xv,Object.assign({ref:this.dataStatisticsPopperRef[n]},o)))}onDataSetsChange(e,t){var n,r,o;const i=null===(n=this.dataStatisticsPopperRef[t])||void 0===n?void 0:n.current;1===e.length&&i&&(null===(o=(r=this.dataStatisticsPopperRef[t].current).updateDataSet)||void 0===o||o.call(r,e[0]))}}const Ov={width:335,height:300},Cv={width:350,height:320},Tv=xd`
  .component-field-selector {
    .ds-name {
      padding: 0 !important;
      margin-bottom: 8px;
      .option-label {
        display: none;
      }
      .mt-2 {
        display: none;
      }
    }
  }
`,xv=f.forwardRef(((e,t)=>{const{FloatingPanel:n,Label:r,Loading:o,LoadingType:i,Icon:s,version:a,iconRef:l,dataSet:u,dataLevel:c}=e,[d,p]=f.useState(u),h=f.useCallback((e=>{d.records.map((e=>e.getId())).join(",")!==e.records.map((e=>e.getId())).join(",")&&p(e)}),[d.records]);f.useImperativeHandle(t,(()=>({updateDataSet:h,dataLevel:c})),[c,h]);const g=fp(Gi.A),m=f.useRef(null),[v,y]=f.useState(!1);f.useEffect((()=>{I()}),[]);const I=()=>Ev(void 0,void 0,void 0,(function*(){const{FieldSelector:e}=yield(0,Is.loadModule)("jimu-ui/advanced/data-source-selector");m.current=e,y(!0)})),[b,w]=f.useState(Cv),[E,A]=f.useState(!0);f.useEffect((()=>{A(!0)}),[a]);const O=()=>{A(!1)},T=[d.dataSource],x=S()([Os.Eo.Number]),[R,P]=f.useState(S()([])),[D,_]=f.useState({}),[L,M]=f.useState(!1),k=Cl(),N=f.useRef(null),j=f.useCallback(((e,t)=>Ev(void 0,void 0,void 0,(function*(){M(!0);try{let n;if(c===mu.DataSource){if(N.current===t)return;n=yield((e,t)=>mv(void 0,void 0,void 0,(function*(){var n,r;const o=yv.map((e=>({statisticType:e,onStatisticField:t,outStatisticFieldName:e}))),i=e.getRealQueryParams({},"query"),s=e.query({outStatistics:o,where:i.where}),a=e.queryCount({where:i.where}),[l,u]=yield Promise.all([s,a]),c=null==l?void 0:l.records,d=(null===(r=null===(n=null==c?void 0:c[0])||void 0===n?void 0:n.feature)||void 0===r?void 0:r.attributes)||{count:0};return d.count<u.count&&(d.countEmpty=u.count-d.count),d})))(e.dataSource,t),N.current=t}else c===mu.Records&&(n=((e,t)=>{const n={count:0,countEmpty:null,sum:0,min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY,avg:0,stddev:0},r=[];return e.forEach((function(e){const o=e.getFieldValue(t);"number"==typeof o?(n.count++,n.sum+=o,n.min>o&&(n.min=o),n.max<o&&(n.max=o),r.push(o)):n.countEmpty=(n.countEmpty||0)+1})),0===n.count?(n.sum=null,n.min=null,n.max=null,n.avg=null,n.stddev=null):(n.avg=n.sum/n.count,n.stddev=Sv(r)),n})(e.records,t));const r={};vv.forEach((e=>{const t=n[e];"number"==typeof t&&(r[e]=k.formatNumber(t))})),_(r)}catch(e){_(null)}finally{M(!1)}}))),[c,k]),U=f.useCallback(((e,t)=>{var n;const r=null===(n=null==e?void 0:e[0])||void 0===n?void 0:n.name;P(S()([r]))}),[]),F=f.useMemo((()=>{var e;const t=Iv(d),n=Object.values((null===(e=d.dataSource.getSchema())||void 0===e?void 0:e.fields)||{}).map((e=>e.name)).filter((e=>!t.includes(e)));return S()(n)}),[d]),B=m.current;return f.useEffect((()=>{const e=R[0];d&&e&&j(d,e)}),[d,j,R]),Cd(n,{version:a,open:E,headerTitle:g("dataAction_DataStatistics"),onHeaderClose:O,minSize:Ov,onResize:e=>{w(e)},dragBounds:"body",defaultSize:b,reference:l,toggle:(e,t)=>{"clickOutside"!==t&&O()},className:"data-statistics-popper",css:Tv},Cd("div",{className:"h-100 p-4 position-relative overflow-auto"},v?Cd(f.Fragment,null,Cd(r,{css:xd`
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          `,title:T[0].getLabel(),"aria-label":T[0].getLabel()},T[0].getLabel()),Cd(B,{dataSources:T,types:x,selectedFields:R,hiddenFields:F,useDropdown:!0,isDataSourceDropDownHidden:1===T.length,placeholder:g("pleaseSelectAField"),className:"h-auto mb-4",onChange:U}),D&&!L&&Cd("div",null,Object.keys(D).map((e=>Cd(r,{className:"d-flex justify-content-between",key:e},Cd("span",{css:xd`
              width: ${(0,C.D0)(150)};
              flex-shrink: 0;
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            `},g(`${e}Label`)),Cd("span",{css:xd`
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
            `,title:D[e]},D[e]))))),!D&&!L&&Cd(r,null,Cd(s,{icon:wv(),color:"var(--sys-color-error-main)"}),Cd("span",{className:"ml-2"},g("error"))),L&&Cd(o,{type:i.Secondary})):Cd(o,{type:i.Secondary})))})),Rv=[Ts.hg.FeatureLayer,Ts.hg.SceneLayer,Ts.hg.BuildingComponentSubLayer,Ts.hg.OrientedImageryLayer,Ts.hg.ImageryLayer,Ts.hg.SubtypeGroupLayer,Ts.hg.SubtypeSublayer],Pv=(e,t)=>{const n=Iv(e);let r=Rv.includes(e.dataSource.type)&&n.length>0&&e.dataSource.getStatus()!==Ts.e3.NotReady;if(!r)return r;let o=!1;if(t===mu.DataSource&&"getCapabilities"in e.dataSource){o=e.dataSource.getCapabilities().getQueryCapabilities().supportsStatistics}return(t===mu.Records&&0===e.records.length||t===mu.DataSource&&!o)&&(r=!1),r};var Dv=s(7332),_v=s.n(Dv),Lv=s(2943),Mv=s.n(Lv);const kv=xd`
&.ds-item {
  height: 32px;
  .ds-item-label-container {
    max-width: calc(100% - 20px);
    .ds-item-label {
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      margin-bottom: 0;
    }
    .record-count {
      border-radius: 4px;
      color: var(--sys-color-action-text);
      background: var(--sys-color-action-hover);
      padding: 1px 4px 0px 4px;
      line-height: 16px;
      font-size: 12px;
    }
  }
}
`;function Nv(e){const{label:t,count:n,onSelect:r,uiComponents:o}=e,{Label:i,Button:s,Icon:a}=o;return Cd("div",{className:"ds-item w-100 d-flex justify-content-between align-items-center",css:kv},Cd("div",{className:"ds-item-label-container d-flex align-items-center"},Cd(i,{className:"ds-item-label ml-2",title:t},t),Cd("div",{className:"record-count ml-2"},null!=n?n:"...")),Cd(s,{type:"tertiary",size:"sm",icon:!0,disabled:!n,onClick:r},Cd(a,{icon:Mv(),size:16})))}var jv=s(6300),Uv=s.n(jv);const Fv=xd`
  border: none;
  .jimu-btn.expanded {
    align-self: flex-start;
  }
  .esri-feature.esri-widget {
    background-color: transparent;
  }
  .esri-feature__title {
    font-size: 14px;
    height: 16px;
    font-weight: 500;
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .esri-feature__content-element {
    padding: 0;
    margin-bottom: 0;
    margin-top: var(--sys-spacing-1);
  }
  .esri-feature__loading-container {
    display: none;
  }
  .feature-info-widget {
    max-width: calc(100% - 20px);
  }
`;function Bv(e){const{graphic:t,popupTemplate:n,uiComponents:r}=e,[o,i]=f.default.useState(!1),s=f.default.useRef(null),a=f.default.useRef(null);Sp((()=>{(0,bu.e)(["esri/widgets/Feature"]).then((e=>{var r;const[o]=e,i=document&&document.createElement("div");i.className="jimu-widget",null===(r=a.current)||void 0===r||r.appendChild(i);const l=s.current;l&&!l.destroyed&&l.destroy(),t.popupTemplate=n,s.current=new o({container:i,defaultPopupTemplateEnabled:!0,graphic:t,visibleElements:{title:!0,content:{fields:!1},lastEditedInfo:!1}})}))})),f.default.useEffect((()=>{s.current&&(s.current.visibleElements={title:!0,content:{fields:o},lastEditedInfo:!1})}),[o]);const l=f.default.useCallback((e=>{e.stopPropagation(),i((e=>!e))}),[]),{Button:u,jimuUIMessages:c,Icon:d}=r,p=fp(c);return Cd("div",{className:"feature-info-component d-flex align-items-center p-2",css:Fv},Cd(u,{"aria-label":p(o?"collapse":"expand"),className:b()("p-0 jimu-outline-inside",{expanded:o}),type:"tertiary",icon:!0,size:"sm",onClick:l},Cd(d,o?{icon:Sf(),size:"s"}:{icon:bf(),size:"s",autoFlip:!0})),Cd("div",{className:"feature-info-widget flex-grow-1",ref:a}))}var $v,Vv=s(597),Gv=s.n(Vv),Wv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.Single="SINGLE",e.Multiple="MULTIPLE"}($v||($v={}));const Hv=xd`
  .related-records-header {
    height: 32px;
    .related-records-title {
      overflow:hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    .related-record-select {
      .jimu-dropdown-button {
        .related-record-select-icon {
          display: block !important;
          margin-right: 0;
        }
        .related-record-select-text {
          display: none;
        }
      }
      .jimu-dropdown-menu {
        max-width: 100vw !important;
      }
    }
  }
  .related-records-container {
    gap: var(--sys-spacing-2);
    .related-record {
      border: 1px solid var(--sys-color-divider-primary);
    }
    .related-record-selected {
      border-color: var(--sys-color-primary-main);
    }
  }
`;function qv(e){var t,n;const{widgetId:r,relatedDs:o,relatedIds:i,version:s,dataViewInfo:a,showBack:l,onBack:u,uiComponents:c}=e,[d,p]=f.default.useState(!1),[h,g]=f.default.useState($v.Single),m=f.default.useCallback((e=>{g(e.target.value)}),[]),[y,I]=f.default.useState(null);f.default.useEffect((()=>{if(!i||0===i.length)return;const e=`related_popper_${s}`,t=o.getLocalDataSource(e);function n(e){const t=o.getIdField();e.updateQueryParams({where:`${t} in (${i.join(",")})`},"related-records"),I(e),a[s]||(a[s]=[]),a[s].push(e)}t?n(t):Cs.A.getInstance().createDataSource(S()({id:o.id}),null,e).then((e=>{n(e)}))}),[o,r,i,a,s]);const[w,E]=f.default.useState(null),A=v.useSelector((e=>{var t,n,r;return null===(r=null===(n=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==y?void 0:y.id])||void 0===n?void 0:n.widgetQueries)||void 0===r?void 0:r[`setFilter-${null==y?void 0:y.id}`]}));f.default.useEffect((()=>{var e;if(A&&"1=1"!==A.where){const t=null==y?void 0:y.getRealQueryParams({returnIdsOnly:!0},"query");p(!0),null===(e=null==y?void 0:y.query(t))||void 0===e||e.then((e=>{var t,n;E(null===(n=null===(t=null==e?void 0:e.records)||void 0===t?void 0:t.map)||void 0===n?void 0:n.call(t,(e=>e.getId())))})).catch((e=>{console.error(e),E(null)})).finally((()=>{p(!1)}))}else E(null)}),[A,y]);const[O,C]=f.default.useState([]),T=f.default.useMemo((()=>[]),[]),x=(null===(n=null===(t=v.useSelector((e=>{var t,n,r;return(null===(r=null===(n=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[null==y?void 0:y.id])||void 0===n?void 0:n.selectedIds)||void 0===r?void 0:r.join(","))||""})))||void 0===t?void 0:t.split)||void 0===n?void 0:n.call(t,","))||T,R=o.getLabel(),P=f.default.useMemo((()=>{const e=o.getAllUsedFields(),t=o.getLayerDefinition().fields.map((e=>e.name));return"*"===e?t:e}),[o]),D=f.default.useMemo((()=>{if(!y)return[];const e=Array.isArray(w)?O.filter((e=>w.includes(e.getId()))):O,t=e.filter((e=>x.includes(e.getId())));return[{dataSource:y,type:t.length>0?"selected":"loaded",records:t.length>0?t:e,name:R,fields:P}]}),[y,w,O,R,P,x]),_=f.default.useCallback(((e,...t)=>Wv(this,[e,...t],void 0,(function*(e,t=!1){if(y&&i){p(!0);try{const n=y.getRecords(),r=n.map((e=>e.getId())),s=new Set(r),a=i.filter((e=>!s.has(e)&&(!w||w.includes(e)))).slice(0,e);let l,u;if(a.length>0){const e={where:`${o.getIdField()} in (${a.join(",")})`,outFields:P,returnGeometry:!0},t=yield y.query(e);l=(null==t?void 0:t.records)||[]}else l=[];u=t?n.filter((e=>i.includes(e.getId()))).concat(l):n.concat(l),y.setRecords(u),C(y.getRecords())}catch(e){console.error(e)}finally{p(!1)}}}))),[w,y,o,i,P]),L=(0,sp.A)((e=>{if(O.length>=i.length||w&&O.length>w.length)return;const t=e.target;t.scrollHeight===t.clientHeight+t.scrollTop&&_(20)}),100);f.default.useEffect((()=>{_(20,!0)}),[_]);const M=Array.isArray(w)?O.filter((e=>w.includes(e.getId()))):O,k=f.default.useCallback((e=>{const t=e.getId();let n=x;h===$v.Single?n=1===x.length&&x.includes(t)?[]:[t]:h===$v.Multiple&&(x.includes(t)?n=n.filter((e=>e!==t)):n.push(t));const o=O.filter((e=>n.includes(e.getId())));y.selectRecords({widgetId:r,records:o})}),[O,y,x,h,r]),N=f.default.useMemo((()=>{var e;const t=Object.values(o.getSchema().fields),n=t.map((e=>e.name)),r=o.getPopupInfo();let i=((null==r?void 0:r.fieldInfos)||[]).filter((e=>e.visible&&n.includes(e.fieldName))).map((e=>({fieldName:e.fieldName,label:e.label})));0===i.length&&(i=t.filter((e=>P.includes(e.name))).map((e=>({fieldName:e.name,label:e.alias}))));const s=null===(e=o.getLayerDefinition())||void 0===e?void 0:e.displayField,a=o.getIdField(),l=P.find((e=>e===s||/(name|title|label|id)/i.test(e)||e===a));return{title:`${l}: {${l}}`,content:[{type:"fields"}],fieldInfos:i}}),[o,P]),{Loading:j,LoadingType:U,Button:F,Select:B,Icon:$,DataActionList:V,DataActionListStyle:G}=c,W=fp(Gi.A);return Cd("div",{className:"related-records h-100 d-flex flex-column",css:Hv},d&&Cd(j,{type:U.Secondary}),Cd("div",{className:"related-records-header flex-shrink-0 d-flex justify-content-between align-items-center"},Cd("div",{className:"related-records-title flex-grow-1"},l&&Cd(F,{className:"p-0 mr-2",size:"sm",type:"tertiary",icon:!0,onClick:u},Cd($,{icon:Uv(),autoFlip:!0})),R),Cd("div",{className:"d-flex align-items-center"},Cd(B,{className:"related-record-select",value:h,size:"sm",appendToBody:!1,onChange:m,title:W("selectionMode")},Cd("option",{key:$v.Single,value:$v.Single},Cd($,{className:"related-record-select-icon d-none",size:12,icon:Gv()}),Cd("span",{className:"related-record-select-text"},W("selectionModeSingle"))),Cd("option",{key:$v.Multiple,value:$v.Multiple},Cd($,{className:"related-record-select-icon d-none",size:12,icon:Gv()}),Cd("span",{className:"related-record-select-text"},W("selectionModeMultiple")))),Cd(V,{widgetId:r,dataSets:D,listStyle:G.Dropdown,buttonSize:"sm",buttonType:"tertiary"}))),Cd("div",{className:"related-records-container d-flex flex-column flex-grow-1 overflow-auto p-1",role:"listbox",onScroll:L},M.map((e=>{const t=e.getId(),n=(x||[]).includes(t);return Cd("div",{key:t,className:b()("related-record",{"related-record-selected":n}),onClick:()=>{k(e)}},Cd(Bv,{graphic:e.feature,popupTemplate:N,uiComponents:c}))}))))}function zv(e){const{widgetId:t,dataSource:n,records:r,version:o,dataViewInfo:i,uiComponents:s}=e,[a,l]=f.default.useState(!1),[u,c]=f.default.useState([]),[d,p]=f.default.useState(y({})),[h,g]=f.default.useState(null),m=f.default.useMemo((()=>(0,ls.getMainOriginDataSource)(n)),[n]);f.default.useEffect((()=>{l(!0),m.createRelatedDataSources().then((e=>{c(e)})).catch((()=>{c([])})).finally((()=>{l(!1)}))}),[m]),f.default.useEffect((()=>{const e=r.map((e=>e.getId()));for(const t of u)p((e=>e.set(t.id,null))),null==n||n.queryRelatedRecords(t,e,{outFields:[n.getIdField()],returnGeometry:!1}).then((e=>{const n=e.reduce(((e,t)=>{const n=t.relatedRecords.map((e=>e.getId())).filter((t=>!e.includes(t)));return e.concat(n)}),[]);p((e=>e.set(t.id,n)))}))}),[n,r,u]),f.default.useEffect((()=>{var e;1===u.length&&(null===(e=d[u[0].id])||void 0===e?void 0:e.length)>0&&g(u[0])}),[u,d]);const v=f.default.useCallback((e=>{g(e)}),[]),S=f.default.useCallback((()=>{g(null)}),[]),{Loading:I,LoadingType:w}=s;return Cd(f.default.Fragment,null,Cd(I,{type:w.Secondary,className:b()({"d-none":!a})}),Cd("div",{className:b()({"d-none":!!h||a})},u.map((e=>{var t;return Cd(Nv,{key:e.id,label:e.getLabel(),count:null===(t=d[e.id])||void 0===t?void 0:t.length,onSelect:()=>{v(e)},uiComponents:s})}))),h&&Cd(qv,{widgetId:t,relatedDs:h,relatedIds:d[h.id],version:o,dataViewInfo:i,showBack:u.length>1,onBack:S,uiComponents:s}))}var Kv=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class Jv extends vu{constructor(e){super(e),this.relatedDataPopperRef={},this.isWatchingDataSetsChange=!0,this.icon=_v()}loadModules(){return Kv(this,void 0,void 0,(function*(){const{FloatingPanel:e,Loading:t,LoadingType:n,Label:r,Button:o,Select:i,Icon:s,DataActionList:a,DataActionListStyle:l,CollapsablePanel:u,defaultMessages:c}=yield(0,Is.loadModule)("jimu-ui");this._modules={FloatingPanel:e,Loading:t,LoadingType:n,Label:r,Button:o,Select:i,Icon:s,DataActionList:a,DataActionListStyle:l,CollapsablePanel:u,jimuUIMessages:c}}))}isSupported(e,t){return Kv(this,void 0,void 0,(function*(){const n=e.some((e=>ey(e,t)))&&1===e.length;return n&&!this._modules&&(yield this.loadModules()),n}))}onExecute(e,t,n,r){var o,i;this._version||(this._version=0);const s={version:this._version++,dataViewInfo:Jv.dataViewInfo,iconRef:document.querySelector(".active-data-action-item")||{getBoundingClientRect:()=>({width:0,height:0,left:document.body.clientWidth/2,top:document.body.clientHeight/2-Xv.height/2})},dataSet:e[0],widgetId:n,uiComponents:this._modules},a=null===(i=null===(o=e[0])||void 0===o?void 0:o.dataSource)||void 0===i?void 0:i.id,l=f.createRef();return this.relatedDataPopperRef[`${n}-${a}`]=l,Promise.resolve(Cd(Zv,Object.assign({ref:l},s)))}onDataSetsChange(e,t){var n,r,o,i;const s=null===(r=null===(n=e[0])||void 0===n?void 0:n.dataSource)||void 0===r?void 0:r.id,a=null===(o=this.relatedDataPopperRef[`${t}-${s}`])||void 0===o?void 0:o.current;1===e.length&&a&&(null===(i=a.updateDataSet)||void 0===i||i.call(a,e[0]))}}Jv.dataViewInfo={};const Yv=Jv,Qv={width:350,height:350},Xv={width:350,height:450},Zv=f.forwardRef(((e,t)=>{const{uiComponents:n,version:r,dataViewInfo:o,iconRef:i,widgetId:s,dataSet:a}=e,[l,u]=f.useState(a),c=f.useCallback((e=>{l.records.map((e=>e.getId())).join(",")!==e.records.map((e=>e.getId())).join(",")&&u(e)}),[l.records]);f.useImperativeHandle(t,(()=>({updateDataSet:c})),[c]);const{FloatingPanel:d}=n,[p,h]=f.useState(Xv),[g,m]=f.useState(!0);f.useEffect((()=>{m(!0)}),[r]);const v=f.useCallback((()=>{(o[r]||[]).forEach((e=>{Cs.A.getInstance().destroyDataSource(e.id)})),delete o[r]}),[o,r]);f.useEffect((()=>v),[v]);const y=()=>{m(!1),v()},S=fp(Gi.A);return Cd(d,{version:r,open:g,headerTitle:S("dataAction_RelatedData"),onHeaderClose:y,minSize:Qv,onResize:e=>{h(e)},dragBounds:"body",defaultSize:p,reference:i,toggle:(e,t)=>{"clickOutside"!==t&&y()},className:"related-data-popper"},Cd("div",{className:"h-100 p-4 position-relative overflow-auto"},Cd(zv,{widgetId:s,dataSource:l.dataSource,records:l.records,version:r,dataViewInfo:o,uiComponents:n})))})),ey=(e,t)=>{var n,r,o;const i=(0,ls.getMainOriginDataSource)(e.dataSource),s=[Ts.hg.FeatureLayer].includes(i.type),a=[Ts.hg.FeatureService,Ts.hg.WebMap,Ts.hg.WebScene].includes(null===(n=i.getRootDataSource())||void 0===n?void 0:n.type),l=((null===(o=null===(r=null==i?void 0:i.getLayerDefinition)||void 0===r?void 0:r.call(i))||void 0===o?void 0:o.relationships)||[]).length>0,u=i.getStatus()!==Ts.e3.NotReady,c=t===mu.Records,d=i.getDataSourceJson(),p=d.isOutputFromWidget&&!d.schema,f=!d.isOutputFromWidget;return s&&a&&l&&u&&c&&(f||p)};var ty=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class ny extends Xl.wJ{constructor(){super(...arguments),this.name="filter data record action",this.actionQuerySQLExpression={},this.concatQuerySqlExpressionOfSameAction=(e,t)=>{var n;let r=null;const o=e.widgetId,i=Cs.A.getInstance().getDataSource(t),s=(null===(n=this.actionQuerySQLExpression)||void 0===n?void 0:n[t])||{};return Object.keys(s).forEach((e=>{const t=s[e];e!==o&&s&&(r=r?ls.getMergedSQLExpressions([r,t],i,el.Mg.And):t)})),r},this.getQuerySqlExpressionWidthOtherQuery=(e,t,n,r)=>{const o=Cs.A.getInstance().getDataSource(t),i=this.concatQuerySqlExpressionOfSameAction(e,t);return r?i:(i&&(n=n?ls.getMergedSQLExpressions([n,i],o,el.Mg.And):i),n)},this.getQueryWhenUseDataRelationShip=(e,t,n)=>ty(this,void 0,void 0,(function*(){var r;const o=Cs.A.getInstance().getDataSource(t.messageUseDataSource.mainDataSourceId),i=t.actionUseDataSource.dataSourceId;let s,a=!1,l=!1,u=null,c=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=o.getSchema(),t=o.getIdField();u=null===(r=null==e?void 0:e.fields)||void 0===r?void 0:r[t],c=u}else{let e,r;if(t.connectionType===ql.UseLayersRelationship){const t=(0,ls.getJimuDataSourceRelationship)(o,n);t&&(e=t.keyField,r=t.relatedKeyField)}else e=t.messageUseDataSource.fields[0],r=t.actionUseDataSource.fields[0];u=o.getSchema().fields[e],c=n.getSchema().fields[r]}if(u&&c){const r=u.jimuName,i=u.type,d=c.type,p=e;let f=[];if(t.connectionType===ql.UseLayersRelationship)f=(yield null==o?void 0:o.queryRelatedFieldValues(p.records||[],n,c.name))||[],f=f.map((e=>tl(e,d))),0===f.length&&p.records.length>0&&(f=["-1"],c=n.getSchema().fields[n.getIdField()]);else for(let e=0;e<p.records.length;e++){const t=tl(p.records[e].getData()[r],d);f.includes(`${t}`)||f.push(t)}i!==Os.Eo.Number&&d===Os.Eo.Number&&p.records.length>0&&0===f.length&&(a=!0),f.length>0?s=nl(f,c,n):l=!0}if(e.records.length>0){const e=t.sqlExprObj?(0,ls.getArcGISSQL)(t.sqlExprObj,n).sqlExpression:null;e&&(s=s?ls.getMergedSQLExpressions([s,e],n,el.Mg.And):e)}else l=!0;return UI.setValue(this.actionQuerySQLExpression,`${i}.${e.widgetId}`,s),s=this.getQuerySqlExpressionWidthOtherQuery(e,i,s,l),{where:a?"1 = 2":null==s?void 0:s.sql,returnGeometry:!0,sqlExpression:a?null:s}})),this.getQueryWhenNotUseDataRelationShip=(e,t,n)=>{const r=t.actionUseDataSource.dataSourceId;let o=null,i=!1;if(e.records.length>0){const e=t.sqlExprObj?(0,ls.getArcGISSQL)(t.sqlExprObj,n).sqlExpression:null;e&&(o=e)}else i=!0;return UI.setValue(this.actionQuerySQLExpression,`${r}.${e.widgetId}`,o),o=this.getQuerySqlExpressionWidthOtherQuery(e,r,o,i),{where:null==o?void 0:o.sql,returnGeometry:!0,sqlExpression:o}}}filterMessageDescription(e){return(0,Bi.Vp)().getState().appRuntimeInfo.appMode===Os.$0.Express?e.messageType===Xl.Go.ExtentChange:e.messageType===Xl.Go.DataRecordsSelectionChange||e.messageType===Xl.Go.SelectDataRecord||e.messageType===Xl.Go.ExtentChange}filterMessage(e){return!0}getSettingComponentUri(e,t){return"filter-data-record-action"}onRemoveListen(e,t){if(this.lastMessage&&this.lastMessage.type===e&&this.lastMessage.widgetId===t){if(this.lastActionConfig&&this.lastActionConfig.actionUseDataSource&&this.lastActionConfig.actionUseDataSource.dataSourceId){const e=Cs.A.getInstance().getDataSource(this.lastActionConfig.actionUseDataSource.dataSourceId);e&&this.lastMessage.type===Xl.Go.DataRecordsSelectionChange&&e.updateQueryParams(null,this.id),e&&this.lastMessage.type===Xl.Go.ExtentChange&&this.lastMessage.stationary&&e.updateQueryParams(null,this.id),this.lastActionConfig=null}this.lastMessage=null}}onExecuteWithActionConfigItem(e,t){return ty(this,void 0,void 0,(function*(){switch(this.lastMessage=e,this.lastActionConfig=t,e.type){case Xl.Go.DataRecordsSelectionChange:let n=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const r=Cs.A.getInstance(),o=r.getDataSource(t.messageUseDataSource.mainDataSourceId),i=t.actionUseDataSource.dataSourceId;let s=r.getDataSource(i);s||(s=yield r.createDataSourceByUseDataSource(t.actionUseDataSource)),o&&s&&(n=t.enabledDataRelationShip?yield this.getQueryWhenUseDataRelationShip(e,t,s):this.getQueryWhenNotUseDataRelationShip(e,t,s),s.updateQueryParams(n,this.id))}return Promise.resolve(!0);case Xl.Go.ExtentChange:if(t&&e.stationary&&t.actionUseDataSource){const n=Cs.A.getInstance(),r=t.actionUseDataSource.dataSourceId;let o=n.getDataSource(r);o||(o=yield n.createDataSourceByUseDataSource(t.actionUseDataSource));let i=null;if(o){const n=null==e?void 0:e.extent;let s=null,a=!1;const l=t.sqlExprObj?(0,ls.getArcGISSQL)(t.sqlExprObj,o).sqlExpression:null;l?s=l:a=!0;const u=t.enableQueryWithCurrentExtent?n.toJSON():{};UI.setValue(this.actionQuerySQLExpression,`${r}.${e.widgetId}`,s),s=this.getQuerySqlExpressionWidthOtherQuery(e,r,s,a),i={geometry:u,where:null==s?void 0:s.sql,returnGeometry:!0,sqlExpression:s},o.updateQueryParams(i,this.id)}}return Promise.resolve(!0)}}))}onExecute(e,t){return ty(this,void 0,void 0,(function*(){if(Array.isArray(t)){const n=t.map((t=>this.onExecuteWithActionConfigItem(e,t))),r=yield Promise.all(n);let o=!0;return r.forEach((e=>{o=o&&e})),Promise.resolve(o)}return this.onExecuteWithActionConfigItem(e,t)}))}}var ry=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};class oy extends Xl.wJ{constructor(){super(...arguments),this.name="select data record action"}filterMessageDescription(e){return(0,Bi.Vp)().getState().appRuntimeInfo.appMode!==Os.$0.Express&&(e.messageType===Xl.Go.DataRecordsSelectionChange||e.messageType===Xl.Go.SelectDataRecord)}filterMessage(e){return!0}getSettingComponentUri(e,t){return"select-data-record-action"}onExecute(e,t){return ry(this,void 0,void 0,(function*(){var n;const r=Cs.A.getInstance(),o=r.getDataSource(null===(n=null==t?void 0:t.actionUseDataSource)||void 0===n?void 0:n.dataSourceId),i=o?o.getAllUsedFields():[];if(e.type===Xl.Go.DataRecordsSelectionChange){let n=null;if(t&&t.messageUseDataSource&&t.actionUseDataSource){if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId)return!0;if(e.records.length>0&&e.records[0].dataSource.getMainDataSource().id!==t.messageUseDataSource.mainDataSourceId)return yield Promise.resolve(!0);const o=r.getDataSource(t.messageUseDataSource.mainDataSourceId);let s=!1,a=r.getDataSource(t.actionUseDataSource.mainDataSourceId);if(a||(yield r.createDataSourceByUseDataSource(t.actionUseDataSource),a=r.getDataSource(t.actionUseDataSource.mainDataSourceId)),0===e.records.length)return a&&a.selectRecordsByIds([]),yield Promise.resolve(!0);if(o&&a){if(t.enabledDataRelationShip){let r,l=null,u=null;if(t.messageUseDataSource.mainDataSourceId===t.actionUseDataSource.mainDataSourceId){const e=o.getSchema(),t=e&&e.fields&&Object.keys(e.fields).find((t=>"esriFieldTypeOID"===e.fields[t].esriType));l=e&&e.fields&&e.fields[t],u=l}else{let e,n;if(t.connectionType===ql.UseLayersRelationship){const t=(0,ls.getJimuDataSourceRelationship)(o,a);t&&(e=t.keyField,n=t.relatedKeyField)}else e=t.messageUseDataSource.fields[0],n=t.actionUseDataSource.fields[0];l=o.getSchema().fields[e],u=a.getSchema().fields[n]}let c=!1;if(l&&u){const n=l.name,i=l.type,d=u.type,p=e;let f=[];if(t.connectionType===ql.UseLayersRelationship)f=(yield null==o?void 0:o.queryRelatedFieldValues(p.records||[],a,u.name))||[],f=f.map((e=>tl(e,d))),0===f.length&&(f=["-1"],u=a.getSchema().fields[a.getIdField()]);else for(let e=0;e<p.records.length;e++){const t=tl(p.records[e].getData()[n],d);f.includes(`${t}`)||f.push(t)}i!==Os.Eo.Number&&d===Os.Eo.Number&&0===f.length&&(s=!0),f.length>0?r=nl(f,u,a):c=!0}if(e.records.length>0){const e=t.sqlExprObj?(0,ls.getArcGISSQL)(t.sqlExprObj,a).sqlExpression:null;e&&(r=r?ls.getMergedSQLExpressions([r,e],a,el.Mg.And):e)}else c=!0;n={outFields:i,where:c?"":null==r?void 0:r.sql,returnGeometry:!0,sqlExpression:c?null:r}}else{let r=null,o=!1;if(e.records.length>0){const e=t.sqlExprObj?(0,ls.getArcGISSQL)(t.sqlExprObj,a).sqlExpression:null;e&&(r=e)}else o=!0;n={outFields:i,where:o?"":null==r?void 0:r.sql,returnGeometry:!0,sqlExpression:o?null:r}}if(s)return a.clearSelection(),!0;a.query(n).then((e=>{const t=e&&e.records;if(t&&t.length>0){const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r.getId())}setTimeout((()=>{a.selectRecordsByIds(e,t)}),200)}else a.clearSelection()}))}}return Promise.resolve(!0)}}))}}class iy{constructor(){this.id="jimu-core-ds-factory"}getFactoryUri(e){if(Object.keys(Ts.hg).map((e=>Ts.hg[e])).includes(e))return"jimu-data-source"}}var sy=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const ay=["en","ar","bg","bs","ca","cs","da","de","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw"],ly=(0,Bi.pq)();function uy(){return sy(this,void 0,void 0,(function*(){const{queryObject:e,urlHashObject:t}=gu.getInstance().init(ly);return function(){const e=$i.Ay.getInstance(),t=self.fetch;if(self.rawFetch=t,!t)return void console.warn("browser does not support fetch");function n(e){const t=e.resource;return t instanceof Request?t.url:t instanceof URL?t.href:e.resource}function r(e,t){const n=e.resource;if(n instanceof Request){const r=new Request(t,n);e.resource=r}else n instanceof URL?e.resource=new URL(t):e.resource=t;return e}function o(e){if((0,vs.getWhetherUseProxy)()){const t=n(e),o=(0,vs.getProxyUrl)(t);o&&o!==t&&(e=r(e,o))}return e}function i(t){return sy(this,void 0,void 0,(function*(){t.options||(t.options={});let o=n(t);const{portalUrl:i,isWebTier:s}=(0,Bi.Vp)().getState();if(s&&(0,Pi.isSamePortalUrl)(o,i))t.options.credentials="include";else if(e.isTrustedServer(o)){const n=new URLSearchParams(o).get("token"),r=e.getSessionByUrl(o);if(!n)if(r&&r.token)o=xi.appendQueryParam(o,"token",r.token);else if("include"!==t.options.credentials){const t=yield e.getSessionFromWebTierServer(o);t&&t.token&&(o=xi.appendQueryParam(o,"token",t.token))}t.options.credentials="include"}return r(t,o)}))}self.fetch=function(e,n){return sy(this,void 0,void 0,(function*(){let r={resource:e,options:n};return r=o(r),r=yield i(r),r.options||(r.options={}),t(r.resource,r.options)}))}}(),ly.subscribe((()=>{window._appState=(0,Bi.Vp)().getState()})),window._am=()=>{const e=(0,Bi.Vp)().getState().asMutable({deep:!0});return window._appState=e,e},window.addEventListener&&(window.addEventListener("online",(()=>ly.dispatch(Ci.networkStatusChanged(!1)))),window.addEventListener("offline",(()=>ly.dispatch(Ci.networkStatusChanged(!0)))),window.addEventListener("resize",(0,sp.A)(fy,100)),fy()),window.runtimeInfo={widgets:{},animationPlayId:0},Promise.allSettled||function(){function e(e){return sy(this,void 0,void 0,(function*(){const t=e.map((e=>sy(this,void 0,void 0,(function*(){return yield e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({status:"rejected",reason:e})))}))));return Promise.all(t)}))}Promise.allSettled=e}(),Rd.A.getInstance(),window.jimuConfig.isBuilder||(tf.A.getInstance(),pu.A.getInstance()),function(){return sy(this,void 0,void 0,(function*(){if(window.jimuConfig.isInBuilder){yield(0,Is.loadModule)("jimu-layouts/layout-builder");const e=yield(0,Is.loadModule)("jimu-for-builder");yield(0,Is.loadModule)("jimu-for-builder/templates");const t=e.appBuilderSync;t.listenBuilderEvents(),t.publishAppIsLoadedToBuilder();const n=(0,sp.A)(t.publishAppStateChangeToBuilder,200);return(0,Bi.Yz)(((e,t)=>{e&&t&&n()})),Promise.resolve()}return Promise.resolve()}))}().then(py).then(cy).then((t=>{var n;const r=null===(n=function(e,t){const n=e.locale||t||(0,Vi.getBrowserLanguage)(window.navigator);return n}(e,t))||void 0===n?void 0:n.toLowerCase(),o=(0,Vi.getTranslatedLocale)(r,ay)||"en";return function(e){if(window.locale=e,"undefined"==typeof document)return;const t=document.getElementsByTagName("html")[0];t.setAttribute("lang",e),(0,Vi.isRTLLocale)(e)?(t.setAttribute("dir","rtl"),t.className+=" esriRtl jimu-rtl",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:"")):(t.setAttribute("dir","ltr"),t.className+=" esriLtr jimu-ltr",t.className+=" "+e+" "+(-1!==e.indexOf("-")?e.split("-")[0]:""))}(r),function(e,t){const n={isInPortal:window.jimuConfig.isInPortal,isInBuilder:window.jimuConfig.isInBuilder,isBuilder:window.jimuConfig.isBuilder,isSite:window.jimuConfig.isSite,locale:e,translatedLocale:t,isRTL:(0,Vi.isRTLLocale)(e),isTouchDevice:Ti.isTouchDevice(),jimuConfig:window.jimuConfig};ly.dispatch(Ci.initAppContext(n))}(r,o),function(){sy(this,void 0,void 0,(function*(){const{appId:e}=xi.getAppIdPageIdFromUrl();return!window.jimuConfig.isInBuilder&&e?yield _i.getAppInfo(e).then((e=>{if(!window.jimuConfig.isDevEdition&&e&&"Web Experience"!==e.type&&"Web Experience Template"!==e.type){const e=(0,Vi.getIntl)().formatMessage({id:"invalidResourceExperience",defaultMessage:Gi.A.invalidResourceExperience});(0,Bi.Vp)().dispatch(Ci.hasPrivilegeChanged(e))}else(0,Bi.Vp)().dispatch(Ci.appInfoChanged(e));return e})).catch((e=>{const t=(0,Vi.getIntl)().formatMessage({id:"invalidResourceItem",defaultMessage:Gi.A.invalidResourceItem});return(0,Bi.Vp)().dispatch(Ci.hasPrivilegeChanged(t)),Promise.resolve({})})):Promise.resolve({})}))}(),o})).then((n=>sy(this,void 0,void 0,(function*(){ly.dispatch(Ci.networkStatusChanged(!(window.navigator&&window.navigator.onLine))),function(e){const{appId:t}=xi.getAppIdPageIdFromUrl();t?ly.dispatch(Ci.appIdChanged(t)):e.config&&ly.dispatch(Ci.appIdChanged(e.config));ly.dispatch(Ci.appRuntimeInfoInit({appMode:Os.$0.Run,activePagePart:Os.xH.Body,isPrintPreview:"true"===e.print_preview||"1"===e.print_preview}))}(e),function(e,t){const n=xi.getDataSourceInfosFromUrlParams(e,t);Object.keys(n).forEach((e=>{const t=n[e];t.filter&&(0,Bi.Vp)().dispatch(Ci.updateWidgetQuery(e,"_filterInUrl",t.filter)),t.gdbVersion&&(0,Bi.Vp)().dispatch(Ci.changeDataSourceGDBVersion(e,t.gdbVersion))}))}(e,t),yield function(e){return sy(this,void 0,void 0,(function*(){return"en"===e?yield Promise.resolve(Gi.A):(e=(0,Vi.getLocaleToLoad)(e,ay))?yield(0,Vi.loadLocaleMessages)("jimu-core/lib/translations",e).then((e=>e)):Promise.resolve(Gi.A)}))}(n).then((e=>sy(this,void 0,void 0,(function*(){return e&&ly.dispatch(Ci.i18nMessagesLoaded("jimu-core",e)),function(e){ef.A.getInstance().registerAction({id:"export-json",name:"export",label:dy({id:"dataAction_ExportJson",defaultMessage:Gi.A.dataAction_ExportJson},e),ActionClass:Ou}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"export-csv",name:"export",label:dy({id:"dataAction_ExportCSV",defaultMessage:Gi.A.dataAction_ExportCSV},e),ActionClass:Du}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"export-geojson",name:"export",label:dy({id:"dataAction_ExportGeoJson",defaultMessage:Gi.A.dataAction_ExportGeoJson},e),ActionClass:Vu}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"export-item",name:"export",label:dy({id:"dataAction_ExportItem",defaultMessage:Gi.A.dataAction_ExportItem},e),ActionClass:av}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"export-shp",name:"export",label:dy({id:"dataAction_ExportShp",defaultMessage:Gi.A.dataAction_ExportShp},e),ActionClass:uv}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"export-gdb",name:"export",label:dy({id:"dataAction_ExportGDB",defaultMessage:Gi.A.dataAction_ExportGDB},e),ActionClass:dv}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"export-kml",name:"export",label:dy({id:"dataAction_ExportKML",defaultMessage:Gi.A.dataAction_ExportKML},e),ActionClass:fv}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"set-filter",name:"setFilter",label:dy({id:"dataAction_SetFilter",defaultMessage:Gi.A.dataAction_SetFilter},e),ActionClass:Kp}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"data-statistics",name:"dataStatistics",label:dy({id:"dataAction_DataStatistics",defaultMessage:Gi.A.dataAction_DataStatistics},e),ActionClass:Av}).catch((e=>{console.error(e)})),ef.A.getInstance().registerAction({id:"related-data",name:"relatedData",label:dy({id:"dataAction_RelatedData",defaultMessage:Gi.A.dataAction_RelatedData},e),ActionClass:Yv}).catch((e=>{console.error(e)}))}(e),function(e){au.A.getInstance().registerAction({id:"filter-data-record-action",label:dy({id:"messageAction_FilterDataRecord",defaultMessage:Gi.A.messageAction_FilterDataRecord},e),ActionClass:ny}).catch((e=>{console.error(e)})),au.A.getInstance().registerAction({id:"select-data-record-action",label:dy({id:"messageAction_SelectDataRecord",defaultMessage:Gi.A.messageAction_SelectDataRecord},e),ActionClass:oy}).catch((e=>{console.error(e)}))}(e),lu.A.getInstance().registerExtension({epName:Ss.ExtensionPoints.DataSourceFactoryUri,extension:new iy}),window.jimuConfig.isInBuilder?(window.parent.isExpressBuilder?(0,Bi.Vp)().dispatch(Ci.appModeChanged(Os.$0.Express)):(0,Bi.Vp)().dispatch(Ci.appModeChanged(Os.$0.Design)),yield(0,Is.getModuleSync)("jimu-for-builder").loadI18nMessage(),yield(0,Is.getModuleSync)("jimu-for-builder/templates").init(),Promise.resolve()):Promise.resolve()}))))}))))}))}function cy(){return sy(this,void 0,void 0,(function*(){return ly.getState().user?(Ti.readLocalStorage(oa.USER_LOCALE_KEY)!==ly.getState().user.culture&&Ti.setLocalStorage(oa.USER_LOCALE_KEY,ly.getState().user.culture),yield Promise.resolve(ly.getState().user.culture)):$i.Ay.getInstance().getMainSession()?null!==Ti.readLocalStorage(oa.USER_LOCALE_KEY)?"null"===Ti.readLocalStorage(oa.USER_LOCALE_KEY)?Promise.resolve(""):($i.Ay.getInstance().getUserInfo(),yield Promise.resolve(Ti.readLocalStorage(oa.USER_LOCALE_KEY))):yield $i.Ay.getInstance().getUserInfo().then((e=>e.culture)):null}))}function dy(e,t){return t&&t[e.id]?t[e.id]:e.defaultMessage}function py(){return sy(this,void 0,void 0,(function*(){return yield function(){return sy(this,void 0,void 0,(function*(){let e;if(window.jimuConfig.isInPortal)return e=(0,Pi.getPortalUrlFromLocation)(),Promise.resolve({portalUrl:e,clientId:"experienceBuilder"});if(window.jimuConfig.isOutOfExb)return yield Promise.resolve(null);const t=window.jimuConfig.hostEnv||"dev";if(!window.jimuConfig.isDevEdition){const e="arcgis.com";let n;switch(t){case"prod":n="www";break;case"dev":n="devext";break;case"qa":n="qaext"}return Promise.resolve({portalUrl:`https://${n}.${e}`,clientId:"experienceBuilder"})}const n=`${xi.getFixedRootPath()}builder/setting.json`;return yield window.fetch(n).then((e=>sy(this,void 0,void 0,(function*(){return yield e.json()})))).then((e=>{const n=e.devEnv[t];return n&&(n.portalUrl=(0,Pi.fixPortalUrlProtocol)(n.portalUrl)),n}),(e=>sy(this,void 0,void 0,(function*(){return console.error("Get setting.json error.",e),yield Promise.resolve(null)}))))}))}().then((e=>sy(this,void 0,void 0,(function*(){return e?window.jimuConfig.isInBuilder?yield Promise.resolve(null):((0,Bi.Vp)().dispatch(Ci.setPortalInfo({portalUrl:e.portalUrl,clientId:e.clientId,isWebTier:e.isWebTier})),void(yield $i.Ay.getInstance().initSession())):(console.warn("No portal info."),yield Promise.resolve(null))}))))}))}function fy(){if("undefined"==typeof document)return;const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=Ti.getBrowserSizeMode({width:e,height:t});(0,Bi.Vp)().getState().browserSizeMode!==n&&(0,Bi.Vp)().dispatch(Ci.browserSizeModeChanged(n));const r=.01*t,o=.01*e;document.documentElement.style.setProperty("--vh",`${r}px`),document.documentElement.style.setProperty("--vw",`${o}px`)}function hy(e){return e.error?f.createElement("div",null,"Error! ",f.createElement("button",{onClick:e.retry},"Retry")):e.pastDelay?f.createElement("div",null,"Loading..."):null}var gy=s(6090),my=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};function vy(e){e((0,Ci.selectionChanged)(null))}function yy(){return my(this,void 0,void 0,(function*(){return window.jimuConfig.isInBuilder?yield(0,Is.loadModule)("jimu-layouts/layout-builder"):yield(0,Is.loadModule)("jimu-layouts/layout-runtime")}))}function Sy(e,t){return t.toFixed("px"===e?0:1)+e}var Iy=s(1767);function by(e){return"object"==typeof e?`${e.distance}${e.unit}`:e}function wy(e){let t="unset";if(e&&e.image){switch(e.fillType){case"fit":t="contain";break;case"fill":t="cover";break;case"stretch":t="100% 100%";break;default:t="auto"}return t}return t}function Ey(e){return e&&e.color&&e.width?`${by(e.width)} ${e.type} ${e.color}`:"none"}function Ay(e){var t;const{dialogBackground:n,border:r,borderTop:o,borderBottom:i,borderLeft:s,borderRight:a,borderRadius:l,boxShadow:u}=e;let c="unset",d="unset";if(l){const e=l.number[0],t=void 0!==l.number[1]?l.number[1]:e,n=void 0!==l.number[2]?l.number[2]:e,r=void 0!==l.number[3]?l.number[3]:e;c=`${e}${l.unit} ${t}${l.unit}`,d=`${n}${l.unit} ${r}${l.unit}`}const p=(0,Iy.PS)(null===(t=null==n?void 0:n.image)||void 0===t?void 0:t.url);return{backgroundColor:n&&n.color?n.color:"transparent",backgroundImage:p?`url(${p})`:"unset",backgroundRepeat:n&&n.image&&"tile"===n.fillType?"repeat":"no-repeat",backgroundSize:wy(n),borderStyle:Ey(r),borderTopStyle:Ey(o),borderBottomStyle:Ey(i),borderLeftStyle:Ey(s),borderRightStyle:Ey(a),borderRadiusTopStyle:c,borderRadiusBottomStyle:d,borderRadiusStyle:l?`${c} ${d}`:"unset",boxShadowStyle:u&&u.color?`${by(u.offsetX)} ${by(u.offsetY)}\n      ${by(u.blur)} ${by(u.spread)} ${u.color}`:"none"}}const Oy="shadow-none",Cy="shadow-sm",Ty="shadow",xy="shadow-lg";function Ry(e){var t;return(null===(t=e.boxShadow)||void 0===t?void 0:t.presetStyle)&&(e=e.set("boxShadow",function(e){if(e===Oy)return null;const t={offsetX:"0px",offsetY:"0px",blur:"0px",spread:"0px",color:""};switch(e){case Cy:t.blur="6px",t.spread="2px",t.color="rgba(0,0,0,0.15)";break;case Ty:t.blur="10px",t.spread="4px",t.color="rgba(0,0,0,0.2)";break;case xy:t.blur="20px",t.spread="6px",t.color="rgba(39,60,70,0.2)"}return t}(e.boxShadow.presetStyle))),e}function Py(e,t,n,r){e=Ry(e);const{borderRadius:o,interactionType:i}=e,s=Ay(e),a=e.overlayColor||(e.isOpenerDlg?"var(--ref-palette-neutral-1200)":"transparent"),l=`app-dialog-wrap-${e.id}`,u=o&&i?`${s.borderRadiusTopStyle} 0 0`:s.borderRadiusStyle,c=o?`0 0 ${s.borderRadiusBottomStyle}`:"unset";return xd`
    body {

      @keyframes aBlink {
        from { background-color: var(--sys-color-error-dark); }
        50% { background-color: var(--sys-color-error-dark); }
        51%{background-color: transparent;}
        to { background-color: transparent; }
      }

      .app-dialog-wrap{
        &.${l}{
          /** hide it until animation plays. */
          display: ${t?"inherit":"none"};
          &.no-backdrop {
            pointer-events: none;
            .modal-content {
              pointer-events: auto;
            }
          }
          .app-dialog {
            margin: 0!important;
            max-width: 100vw;
            max-height: 100vh;

            .app-dialog-content {
              border: none;
              box-shadow: unset;
              background-color: transparent;
              border-radius:  ${s.borderRadiusStyle};

              &.overflow-visible{
                overflow: visible;
              }

              .app-dialog-animation-content {
                flex-shrink: 0;
                border-top: ${s.borderTopStyle};
                border-bottom: ${s.borderBottomStyle};
                border-left: ${s.borderLeftStyle};
                border-right: ${s.borderRightStyle};
                border: ${"none"===s.borderStyle?null:s.borderStyle};
                border-radius:  ${s.borderRadiusStyle};
                box-shadow: ${s.boxShadowStyle};
                background-color: ${s.backgroundColor};
                background-image: ${s.backgroundImage};
                background-position: center center;
                background-repeat: ${s.backgroundRepeat};
                background-size: ${s.backgroundSize};

                .dialog-content{
                  padding: 0;
                  border-radius:  ${u};
                }

                .dialog-footer{
                  overflow-x: auto;
                  border-radius:  ${c};
                  user-select: none;
                  &.has-mask {
                    pointer-events: none;
                    user-select: none;
                    .btn {
                      pointer-events: none;
                    }
                  }

                  .cbx-animation{
                    margin-right: 0.5rem;
                    width: 16px;
                    height: 16px;
                    border: 2px solid var(--ref-palette-neutral-600);
                    animation: aBlink 500ms infinite;
                  }
                  .btn {
                    min-width: 6.25rem;
                  }
                }
              }
            }
          }
          .app-dialog-backdrop{
            background-color: ${a};
          }
        }
      }
    }
  `}function Dy(e,t,n){let r=null;if("CUSTOM"===e.heightMode){const n="%"===(e.height.includes("%")?"%":"px")?t*parseFloat(e.height.split("%")[0])/100+"px":e.height;parseFloat(n)>t&&(r=n)}if(n){r=`calc(100% - ${n===Ql.lB.ButtonBlock?95:n===Ql.lB.ButtonInline?64:59}px)`}return xd`
    &.app-dialog{
      .app-dialog-content { /** modal-content */
        max-width: 100vw;
        max-height: 100vh;
        ${function(e){let t,n,r;switch(null==e?void 0:e.position){case Ql.M_.TopLeft:t=xd`top: 0; left: 0; bottom: auto; right: auto;`;break;case Ql.M_.TopRight:t=xd`top: 0; left: auto; bottom: auto; right: 0;`;break;case Ql.M_.BottomLeft:t=xd`top: auto; left: 0; bottom: 0; right: auto;`;break;case Ql.M_.BottomRight:t=xd`top: auto; left: auto; bottom: 0; right: 0;`;break;case Ql.M_.TopCenter:t=xd`top: 0; left: 50%; bottom: auto; right: auto;`;break;case Ql.M_.BottomCenter:t=xd`top: auto; left: 50%; bottom: 0; right: auto;`;break;case Ql.M_.MiddleLeft:t=xd`top: 50%; left: 0; bottom: auto; right: auto;`;break;case Ql.M_.MiddleRight:t=xd`top: 50%; left: auto; bottom: auto; right: 0;`;break;case Ql.M_.MiddleCenter:t=xd`top: 50%; left: 50%; bottom: auto; right: auto;`;break;default:t=xd`top: 0; left: 0; bottom: auto; right: auto;`}"STRETCH"===e.widthMode&&(n=xd`width:auto;left:${e.left};right:${e.right};`);"STRETCH"===e.heightMode&&(r=xd`height:auto;top:${e.top};bottom:${e.bottom};`);return xd`
    position: fixed;
    ${t}
    width: ${null==e?void 0:e.width};
    height: ${null==e?void 0:e.height};
    ${n};
    ${r}
    overflow: visible;
    z-index: 2;
  `}(e)}
        height: ${"CUSTOM"===e.heightMode&&e.height};
        /* transition: height 0.3s ease-in-out; */
        transform: ${function(e){if(null==e)return null;const{position:t,offsetX:n=0,offsetY:r=0}=e;let o;"STRETCH"!==e.widthMode&&(0!==n&&(o=`translateX(${n}px)`),t!==Ql.M_.TopCenter&&t!==Ql.M_.MiddleCenter&&t!==Ql.M_.BottomCenter||(o=null!=o?`${o} translateX(-50%)`:"translateX(-50%)"));"STRETCH"!==e.heightMode&&(0!==r&&(o=null!=o?`${o} translateY(${r}px)`:`translateY(${r}px)`),t!==Ql.M_.MiddleLeft&&t!==Ql.M_.MiddleCenter&&t!==Ql.M_.MiddleRight||(o=null!=o?`${o} translateY(-50%)`:"translateY(-50%)"));return o}(e)};
        .app-dialog-resize-container {
          width: 100%;
          height: 100%;

          .app-dialog-animation-content {
            width: 100%;
            height: 100%;
            overflow-y: auto;
            .modal-body { /** dialog-content, it might have scrolling-bar in height */
              width: 100%;
              height: 100%;
              height: ${r};
            }
          }
        }
      }
    }
  `}function _y(e,t){var n;const r=Ay(e=Ry(e)),o="transparent"===r.backgroundColor?"var(--ref-palette-neutral-200)":r.backgroundColor,i=null===(n=e.boxShadow)||void 0===n?void 0:n.color,s=e.border&&e.border.width&&e.border.color,a=e.borderTop&&e.borderTop.width&&e.borderTop.color,l=e.borderBottom&&e.borderBottom.width&&e.borderBottom.color,u=e.borderLeft&&e.borderLeft.width&&e.borderLeft.color,c=e.borderRight&&e.borderRight.width&&e.borderRight.color,d="12px";let p=t.height,f=null,h=null;s&&(f=e.border.color,h=e.border.width,p=`calc(${p} - ${h} - ${h})`);return xd`
    &.app-dialog{
      /* margin: 0.5rem !important; */
      margin: 0 !important;
      background-color: transparent;
      border: none;
      box-shadow: unset;

      &.dialog-animation-playing{
        .jimu-popper--arrow{
          visibility: hidden !important;
        }

        .popper-box{
          overflow: visible !important; /*for animation is playing*/
        }
      }
      &.dialog-animation-end{
        .app-dialog-animation-content {
          border-radius: ${r.borderRadiusStyle};
        }

        &[data-popper-placement^="top"] .jimu-popper--arrow{
          &::before{
            border-top-color: ${f};
          }
          &::after{
            border-top-color: ${o};
            bottom: ${h};
          }
        }

        &[data-popper-placement^="bottom"] .jimu-popper--arrow{
          &::before{
            border-bottom-color: ${f};
          }
          &::after{
            border-bottom-color: ${o};
            top: ${h};
          }
        }

        &[data-popper-placement^="left"] .jimu-popper--arrow{
          &::before{
            border-left-color: ${f};
          }
          &::after{
            border-left-color: ${o};
            right: ${h};
          }
        }

        &[data-popper-placement^="right"] .jimu-popper--arrow{
          &::before{
            border-right-color: ${f};
          }
          &::after{
            border-right-color: ${o};
            left: ${h};
          }
        }
      }

      .popper-box{
        max-width: calc(100vw - ${d});
        max-height: calc(100vh - ${d});
        width: ${t.width};
        height: ${t.height};
        border-radius:  ${r.borderRadiusStyle};
      }

      .app-dialog-animation-content{
        height: 100%;
        box-shadow: ${i?r.boxShadowStyle:"0 0 10px 1px var(--ref-palette-neutral-600)"};

        .app-dialog-container{
          overflow-y: auto;
          max-width: calc(100vw - ${d});
          max-height: calc(100vh - ${d});
          width: 100%;
          border-top: ${a?r.borderTopStyle:"none"};
          border-bottom: ${l?r.borderBottomStyle:"none"};
          border-left: ${u?r.borderLeftStyle:"none"};
          border-right: ${c?r.borderRightStyle:"none"};
          border: ${s?r.borderStyle:null};
          outline: ${i&&!s?"1px solid var(--ref-palette-neutral-600)":"unset"};
          border-radius:  ${r.borderRadiusStyle};

          .app-dialog-content{
            width: 100%;
            height: ${p};
            border-radius:  ${r.borderRadiusStyle};
            background-color: ${o} ;
            background-image: ${r.backgroundImage};
            background-position: center center;
            background-repeat: ${r.backgroundRepeat};
            background-size: ${r.backgroundSize};
          }
        }
      }

    }
  `}var Ly,My,ky,Ny,jy,Uy,Fy;!function(e){e.ScrollIntoView="SCROLL_IN",e.Manual="MANUAL"}(Ly||(Ly={})),function(e){e.None="NONE",e.Pulse="PULSE",e.RubberBand="RUBBER_BAND",e.FadeIn="FADE_IN",e.FadeOut="FADE_OUT",e.FlyIn="FLY_IN",e.ZoomIn="ZOOM_IN",e.WipeIn="WIPE_IN",e.SpinIn="SPIN_IN",e.FloatIn="FLOAT_IN"}(My||(My={})),function(e){e.Default="DEFAULT",e.Gentle="GENTLE",e.Wobbly="WOBBLY",e.Stiff="STIFF",e.Slow="SLOW",e.Molasses="MOLASSES"}(ky||(ky={})),function(e){e.Top="TOP",e.Bottom="BOTTOM",e.Left="LEFT",e.Right="RIGHT"}(Ny||(Ny={})),function(e){e.AsOne="AS_ONE",e.OneByOne="ONE_BY_ONE"}(jy||(jy={})),function(e){e.WithPrevious="WITH_PREVIOUS",e.AfterPrevious="AFTER_PREVIOUS"}(Uy||(Uy={})),function(e){e.OneByOne="ONE_BY_ONE",e.AllAtOnce="ALL_AT_ONCE"}(Fy||(Fy={}));const By=f.createContext({delay:0,setting:null,playId:null,revert:!1,oid:""}),$y=f.createContext({monitor:!1});const Vy={opacity:1,x:0,y:0,rotateZ:0,scaleX:1,scaleY:1,clipPath:"inset(0%)"};class Gy{constructor(e,t){this.type=e,this.option=t}generateProps(e){return Object.assign({},Vy,e)}getConfigType(){var e,t;return(null!==(t=null===(e=this.option)||void 0===e?void 0:e.configType)&&void 0!==t?t:ky.Default).toLowerCase()}propsOnXY(e,t){return null}hasMoveEffect(){return!1}}class Wy extends Gy{constructor(e){super(My.FadeIn,e)}initProps(){return this.generateProps({opacity:0})}animateProps(){return{from:this.generateProps({opacity:0}),to:this.generateProps({opacity:1}),immediate:!1,config:wn[this.getConfigType()]}}}class Hy extends Gy{constructor(e){super(My.FadeOut,e)}initProps(){return this.generateProps({opacity:1})}animateProps(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:0}),immediate:!0,config:void 0}}}class qy extends Gy{constructor(e){var t;super(My.FlyIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||Ny.Top}initProps(){return this.generateProps({opacity:0,x:0,y:0})}from(){switch(this.direction){case Ny.Bottom:return{x:0,y:window.innerHeight};case Ny.Left:return{x:-window.innerWidth,y:0};case Ny.Right:return{x:window.innerWidth,y:0};default:return{x:0,y:-window.innerHeight}}}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,x:0,y:0}),immediate:!1,config:wn[this.getConfigType()]}}}class zy extends Gy{constructor(e){super(My.ZoomIn,e)}initProps(){return this.generateProps({scaleX:1,scaleY:1,opacity:0,transformOrigin:"center"})}animateProps(){return{from:this.generateProps({scaleX:0,scaleY:0,opacity:0}),to:this.generateProps({scaleX:1,scaleY:1,opacity:1}),immediate:!1,config:wn[this.getConfigType()]}}}class Ky extends Gy{constructor(e){var t;super(My.WipeIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||Ny.Top}initProps(){return this.generateProps({clipPath:"inset(0%)"})}getClipProp(){switch(this.direction){case Ny.Bottom:return"clipTop";case Ny.Left:return"clipRight";case Ny.Right:return"clipLeft";default:return"clipBottom"}}animateProps(){const e=this.getClipProp();return{from:this.generateProps({opacity:1,clipPath:`inset(${"clipTop"===e?100:0}% ${"clipRight"===e?100:0}% ${"clipBottom"===e?100:0}% ${"clipLeft"===e?100:0}%)`}),to:this.generateProps({opacity:1,clipPath:"inset(0% 0% 0% 0%)"}),immediate:!1,config:wn[this.getConfigType()]}}}class Jy extends Gy{constructor(e){super(My.SpinIn,e)}initProps(){return this.generateProps({rotateZ:0,opacity:0})}animateProps(){return{from:this.generateProps({rotateZ:720,opacity:0}),to:this.generateProps({rotateZ:0,opacity:1}),immediate:!1,config:wn[this.getConfigType()]}}}class Yy extends Gy{constructor(e){var t;super(My.FloatIn,e),this.direction=(null===(t=this.option)||void 0===t?void 0:t.direction)||Ny.Top}initProps(){return this.generateProps({opacity:0,x:0,y:0})}from(){switch(this.direction){case Ny.Bottom:return{x:0,y:100};case Ny.Left:return{x:-100,y:0};case Ny.Right:return{x:100,y:0};default:return{x:0,y:-100}}}animateProps(){return{from:this.generateProps(Object.assign({opacity:0},this.from())),to:this.generateProps({opacity:1,x:0,y:0}),immediate:!1,config:wn[this.getConfigType()]}}}function Qy(){var e,t,n,r;if(window.jimuConfig.isBuilder){if((null===(t=null===(e=window._appWindow)||void 0===e?void 0:e.runtimeInfo)||void 0===t?void 0:t.animationPlayId)>=0)return window._appWindow.runtimeInfo.animationPlayId+=1,window._appWindow.runtimeInfo.animationPlayId;null!=(null===(n=window._appWindow)||void 0===n?void 0:n.runtimeInfo)&&(window._appWindow.runtimeInfo.animationPlayId=0)}else{if((null===(r=window.runtimeInfo)||void 0===r?void 0:r.animationPlayId)>=0)return window.runtimeInfo.animationPlayId+=1,window.runtimeInfo.animationPlayId;null!=window.runtimeInfo&&(window.runtimeInfo.animationPlayId=0)}return 0}function Xy(e,t){switch(e){case My.FadeIn:return new Wy(t);case My.FadeOut:return new Hy(t);case My.FlyIn:return new qy(t);case My.ZoomIn:return new zy(t);case My.WipeIn:return new Ky(t);case My.SpinIn:return new Jy(t);case My.FloatIn:return new Yy(t);default:return null}}var Zy;!function(e){e.None="NONE",e.Skew="SKEW",e.Grow="GROW",e.Shrink="SHRINK",e.Float="FLOAT",e.Sink="SINK",e.Rotate="ROTATE",e.Spin="SPIN",e.Forward="FORWARD",e.Backward="BACKWARD",e.Opacity="OPACITY",e.Custom="CUSTOM"}(Zy||(Zy={}));const eS={translateX:"0%",translateY:"0%",scaleX:1,scaleY:1,rotate:"0deg",skewX:"0deg",skewY:"0deg",opacity:1};class tS{constructor(e,t){this.type=e,this.option=t}generateProps(e){return Object.assign({},eS,e)}}class nS extends tS{constructor(e){super(Zy.Skew),this.x=(null==e?void 0:e.skewX)||0,this.y=(null==e?void 0:e.skewY)||0,0===this.x&&0===this.y&&(this.x=-20)}animateProps(){return{from:this.generateProps({skewX:"0deg",skewY:"0deg",transform:"perspective(1px) translateZ(0)",transformOrigin:"0% 100%"}),to:this.generateProps({skewX:`${this.x}deg`,skewY:`${this.y}deg`}),loop:{skewX:"0deg",skewY:"0deg",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transform-origin: 0 100%;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) skew(${this.x}deg, ${this.y}deg);
      }
    `}}class rS extends tS{constructor(e){super(Zy.Grow),this.x=(null==e?void 0:e.scaleX)||110,this.y=(null==e?void 0:e.scaleY)||110}animateProps(){return{from:this.generateProps({scaleX:1,scaleY:1,transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({scaleX:this.x/100,scaleY:this.y/100}),loop:{scaleX:1,scaleY:1,reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) scale(${this.x/100}, ${this.y/100});
      }
    `}}class oS extends tS{constructor(e){super(Zy.Shrink),this.x=(null==e?void 0:e.scaleX)||90,this.y=(null==e?void 0:e.scaleY)||90}animateProps(){return{from:this.generateProps({scaleX:1,scaleY:1,transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({scaleX:this.x/100,scaleY:this.y/100}),loop:{scaleX:1,scaleY:1,reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) scale(${this.x/100}, ${this.y/100});
      }
    `}}class iS extends tS{constructor(e){super(Zy.Float),this.x=(null==e?void 0:e.offsetX)||0,this.y=(null==e?void 0:e.offsetY)||10}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:-this.y+"%"}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transition-timing-function: ease-out;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${-this.y}%);
      }
    `}}class sS extends tS{constructor(e){super(Zy.Sink),this.x=(null==e?void 0:e.offsetX)||0,this.y=(null==e?void 0:e.offsetY)||-10}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:-this.y+"%"}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transition-timing-function: ease-out;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${-this.y}%);
      }
    `}}class aS extends tS{constructor(e){super(Zy.Rotate),this.rotate=(null==e?void 0:e.rotate)||3}animateProps(){return{from:this.generateProps({rotate:"0deg",transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({rotate:`${this.rotate}deg`}),loop:{rotate:"0deg",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) rotate(${this.rotate}deg);
      }
    `}}class lS extends tS{constructor(e){super(Zy.Spin),this.rotate=(null==e?void 0:e.rotate)||-720}animateProps(){return{from:this.generateProps({rotate:"0deg",transform:"perspective(1px) translateZ(0)",transformOrigin:"50% 50%"}),to:this.generateProps({rotate:`${this.rotate}deg`}),loop:{rotate:"0deg",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) rotate(${this.rotate}deg);
      }
    `}}class uS extends tS{constructor(e){super(Zy.Forward),this.x=(null==e?void 0:e.offsetX)||10,this.y=(null==e?void 0:e.offsetY)||0}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:`${this.y}%`}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;
      transition-timing-function: ease-out;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${this.y}%);
      }
    `}}class cS extends tS{constructor(e){super(Zy.Backward),this.x=(null==e?void 0:e.offsetX)||-10,this.y=(null==e?void 0:e.offsetY)||0}animateProps(){return{from:this.generateProps({translateX:"0%",translateY:"0%",transform:"perspective(1px) translateZ(0)"}),to:this.generateProps({translateX:`${this.x}%`,translateY:`${this.y}%`}),loop:{translateX:"0%",translateY:"0%",reverse:!0}}}cssProps(){return xd`
      display: inline-block;
      vertical-align: middle;
      box-shadow: 0 0 1px rgba(0, 0, 0, 0);
      transition-duration: 0.3s;
      transition-property: transform;

      &:hover, &:focus, &:active {
        transform: perspective(1px) translateZ(0) translate(${this.x}%, ${this.y}%);
      }
    `}}class dS extends tS{constructor(e){super(Zy.Opacity),this.opacity=(null==e?void 0:e.opacity)||50}animateProps(){return{from:this.generateProps({opacity:1}),to:this.generateProps({opacity:this.opacity/100}),loop:{opacity:1,reverse:!0}}}cssProps(){return xd`
      transition-duration: 0.3s;
      transition-property: opacity;
      opacity: 1;

      &:hover, &:focus, &:active {
        opacity: ${this.opacity/100};
      }
    `}}function pS(e,t){switch(e){case Zy.Skew:return new nS(t);case Zy.Grow:return new rS(t);case Zy.Shrink:return new oS(t);case Zy.Float:return new iS(t);case Zy.Sink:return new sS(t);case Zy.Rotate:return new aS(t);case Zy.Spin:return new lS(t);case Zy.Forward:return new uS(t);case Zy.Backward:return new cS(t);case Zy.Opacity:return new dS(t);default:return null}}function fS(e,t){const n=pS(e,t);return null==n?void 0:n.cssProps()}function hS(){const e=[0];for(let t=1;t<=100;t++)e.push(t/100);return e}function gS(e,t,n){const[r,o]=f.useState([0,!1]),i=f.useRef(r[0]),{layoutId:s}=f.useContext($y),a=f.useMemo((()=>document.querySelector(`div.layout[data-layoutid="${s}"]`)),[s,e]),l=f.useRef(n),u=f.useRef(Number.NEGATIVE_INFINITY),c=f.useRef(0),d=f.useCallback((e=>{const t=e.boundingClientRect,n=e.intersectionRect;if(e.target.classList.contains("playing-scroll-animation"))return;const r=e=>{c.current=e.intersectionRatio,u.current=e.boundingClientRect.top};if(function(e,t){return e>t.boundingClientRect.top}(u.current,e)&&function(e,t){return e<t.intersectionRatio}(c.current,e)){if(e.intersectionRatio>=.95||n.height>300)return r(e),o([1,!1]),void(i.current=1);if(t.top+1<n.top)return r(e),o([1,!1]),void(i.current=1)}if(function(e,t){return e<t.boundingClientRect.top}(u.current,e)&&function(e,t){return e>t.intersectionRatio}(c.current,e)&&e.intersectionRatio<=.05)return r(e),o([-1,!1]),void(i.current=-1);r(e)}),[]),p=f.useMemo((()=>{if(t&&"function"==typeof IntersectionObserver){return new IntersectionObserver((e=>{d(e[0])}),{threshold:hS(),root:null!=a?a:document})}}),[d,t,a]);return f.useEffect((()=>(e&&(null==p||p.observe(e)),()=>{null==p||p.disconnect()})),[p,e]),f.useEffect((()=>{if(n!==l.current){if(n&&t){(function(e,t){const n=e.getBoundingClientRect();let r;return r=t?t.getBoundingClientRect():{left:0,top:0,width:window.innerWidth,height:window.innerHeight},i=r,!((o=n).left>=i.left+i.width||o.top>=i.top+i.height);var o,i})(e,a)?(o([1,!0]),i.current=1):(o([-1,!0]),i.current=-1)}l.current=n}}),[t,n,a,e]),t&&n?r:[0,!1]}const mS=new Hy;var vS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const yS=f.forwardRef(((e,t)=>{const{parentId:n,type:r,hoverEffect:o,revert:i,configType:s,direction:a,playId:l,hoverPlayId:u,delay:c,isLastChild:d,children:p,style:h,onAnimationStart:g,onAnimationEnd:m}=e,y=vS(e,["parentId","type","hoverEffect","revert","configType","direction","playId","hoverPlayId","delay","isLastChild","children","style","onAnimationStart","onAnimationEnd"]),S=f.useRef(),I=t||S,b=v.useSelector((e=>{var t;return(null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.appMode)===Os.$0.Design})),[w,E]=f.useState(),[A,O]=f.useState(!b),{monitor:C}=f.useContext($y),{type:T,configType:x,direction:R,playId:P,revert:D,playMode:_,onContextAnimationEnd:L}=function(e){var t,n;const{setting:r,playId:o,revert:i,oid:s,playMode:a,onContextAnimationEnd:l}=f.useContext(By);let u=null==r?void 0:r.type;return u=(e===s||Array.isArray(s)&&s.includes(e))&&u&&u!==My.None?u:null,{playId:o,type:u,configType:null===(t=null==r?void 0:r.option)||void 0===t?void 0:t.configType,direction:null===(n=null==r?void 0:r.option)||void 0===n?void 0:n.direction,revert:i,playMode:a,onContextAnimationEnd:l}}(n),M=f.useMemo((()=>{if(null!=r){let e,t;return l>0?(e=l,t=i):P>0&&_!==jy.OneByOne&&(e=P,t=D),[r,s,a,e,t,null]}return null!=T?[T,x,R,P,D,L]:[null,null,null,null,null,null]}),[r,s,a,T,x,R,l,P,i,D,_,L]);f.useEffect((()=>{E(I.current)}),[]);const k=f.useCallback((()=>{null==g||g(),!b&&C&&O(!1)}),[g,b,C]),N=f.useCallback((()=>{null==g||g(),I.current.classList.add("playing-scroll-animation")}),[g,I]),j=f.useCallback((()=>{null==m||m(),d&&L&&L(),!b&&C&&(0,Gh.A)((()=>{O(!0)}))}),[m,d,L,b,C]),U=f.useCallback((()=>{null==m||m(),I.current.classList.remove("playing-scroll-animation")}),[m,I]),F=function(e){const{type:t,revert:n,configType:r,direction:o,delay:i,playId:s,onAnimationStart:a,onAnimationEnd:l}=e,u=f.useRef(0),c=f.useMemo((()=>new Hy),[]),d=f.useMemo((()=>Xy(t,{configType:r,direction:o})),[t,r,o]),[p,h]=gr((()=>d?d.initProps():Vy),[d]),g=f.useCallback((()=>{d&&(h.stop(),h.start(Object.assign(Object.assign({},d.animateProps()),{delay:i,onStart:a,onRest:()=>{null==l||l()}})))}),[d,h,i,a,l]),m=f.useCallback((e=>{d&&(h.stop(),h.start(Object.assign(Object.assign({},c.animateProps()),{onRest:e})))}),[d,h,c]);return f.useEffect((()=>{d&&s>u.current&&(u.current=s,n?m():i>0?m(g):g())}),[d,s,n,i,m,g]),s>0&&null!=d?p:0}({type:M[0],configType:M[1],direction:M[2],playId:M[3],revert:M[4],delay:c,onAnimationStart:k,onAnimationEnd:j}),B=function(e){const{effect:t,playId:n}=e,r=f.useRef(0),o=f.useMemo((()=>pS(null==t?void 0:t.type,null==t?void 0:t.setting)),[t]),[i,s]=gr((()=>eS),[]),a=f.useCallback((()=>{o&&(s.stop(),s.start(Object.assign(Object.assign({},o.animateProps()),{config:{duration:300}})))}),[o,s]);return f.useEffect((()=>{o&&n>r.current&&(r.current=n,a())}),[o,n,a]),n>0&&null!=o?i:null}({effect:o,playId:u}),$=function(e){const{type:t,configType:n,direction:r,ref:o,canMonitor:i,enableMonitor:s,onAnimationStart:a,onAnimationEnd:l}=e,u=f.useMemo((()=>Xy(t,{configType:n,direction:r})),[t,n,r]),[c,d]=gS(o,null!=u&&i,s),p=f.useRef([c,d]),[h,g]=gr((()=>u?u.initProps():Vy),[u]),m=f.useCallback((e=>{u&&(g.stop(),g.start(Object.assign(Object.assign({},u.animateProps()),{immediate:e,onStart:e?null:a,onRest:e?null:l})))}),[u,g,a,l]),v=f.useCallback((()=>{u&&(g.stop(),g.start(mS.animateProps()))}),[u,g]);return f.useEffect((()=>{c===p.current[0]&&d===p.current[1]||(c<0?v():c>0&&m(d),p.current=[c,d])}),[m,v,c,d]),i&&s&&0!==c&&null!=u?h:0}({type:M[0],configType:M[1],direction:M[2],ref:w,canMonitor:C,enableMonitor:!b&&A,onAnimationStart:N,onAnimationEnd:U}),V=F||B||$;let G=h;return V&&(G=Object.assign({},h,V)),f.createElement(Jr.div,Object.assign({style:G,ref:I},y),p)}));var SS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function IS(e){const{children:t,style:n,oid:r,className:o=""}=e,i=SS(e,["children","style","oid","className"]),s=f.useRef();let a=f.useContext(By);((null==a?void 0:a.oid)!==r||Array.isArray(null==a?void 0:a.oid)&&!a.oid.includes(r))&&(a={});const l="string"==typeof n?JSON.parse(n):Object.assign({},n),u=f.Children.count(e.children),c=u>0?f.Children.map(e.children,(e=>{var t;const n=e,{layoutId:r,layoutItemId:o}=null!==(t=null==n?void 0:n.props)&&void 0!==t?t:{};return null==r||null==o||function(e,t){var n,r,o;const i=null===(n=(0,Bi.Vp)().getState().appConfig.layouts[e])||void 0===n?void 0:n.content[t],{effect:s}=null!==(r=null==i?void 0:i.setting)&&void 0!==r?r:{};let a=null===(o=null==s?void 0:s[Ly.ScrollIntoView])||void 0===o?void 0:o.type;return a=a&&a!==My.None?a:null,null!=a}(r,o)?null:o})).filter((e=>null!=e)):[];return f.createElement("div",Object.assign({className:`layout-animation ${o}`,style:l,ref:s},i),e.children&&f.Children.map(e.children,((e,t)=>{var n,r;if(e){const o=e,{layoutId:i,layoutItemId:s}=null!==(n=o.props)&&void 0!==n?n:{};let l=-1;null!=i&&null!=s&&(l=c.indexOf(s));const{setting:d}=a,p=(null===(r=null==d?void 0:d.option)||void 0===r?void 0:r.parentMode)===Fy.AllAtOnce?0:250;return f.cloneElement(e,{playId:null!=d?a.playId:null,delay:l>=0?l*p:0,isLastChild:t===u-1})}return null})))}const{useEffect:bS,useState:wS,useRef:ES}=f;const AS=function({dialogJson:e,isOpen:t,jimuUI:n,jimuLayout:r,loadingCallBack:o,version:i,messages:s,cbxAnimation:a,isChecked:l,setCbxState:u,closeDialog:c}){var d,p,h,g,m,y;const S=(0,v.useSelector)((e=>e.appRuntimeInfo.currentPageId)),I=(0,v.useSelector)((e=>e.appRuntimeInfo.appMode===Os.$0.Design)),w=(0,v.useSelector)((t=>e.layout[t.browserSizeMode]||e.layout[t.appConfig.mainSizeMode])),E=ES(!1),A=ES(!1),[O,C]=wS(I?null:Qy()),[T,x]=wS(I?null:Qy()),R=(0,v.useSelector)((t=>{var n;return(null===(n=t.appRuntimeInfo.animationPreview)||void 0===n?void 0:n.dialogId)===e.id?t.appRuntimeInfo.animationPreview:null}),v.shallowEqual),P=ES(),D=(0,v.useDispatch)();function _(){var t;(null===(t=e.effect)||void 0===t?void 0:t.type)!==My.None&&(A.current=!1,x(Qy()))}function L(){var t;(null===(t=e.oneByOneEffect)||void 0===t?void 0:t.type)!==My.None&&(E.current=!1,C(Qy()))}bS((()=>{!I&&i&&(_(),L())}),[I,e.id,S,i]),bS((()=>{R&&(R.playMode!==jy.AsOne&&L(),R.playMode!==jy.OneByOne&&_())}),[R]);const M=f.useCallback((()=>{A.current&&(A.current=!1,o(!1),x(-1))}),[o]);let k=null,N=null,j=null;const U=A.current?null:(A.current=!0,T);(null===(d=e.effect)||void 0===d?void 0:d.type)!==My.None&&U&&(k=null===(p=e.effect)||void 0===p?void 0:p.type,N=null===(g=null===(h=e.effect)||void 0===h?void 0:h.option)||void 0===g?void 0:g.configType,j=null===(y=null===(m=e.effect)||void 0===m?void 0:m.option)||void 0===y?void 0:y.direction);const{ModalBody:F,ModalFooter:B}=n,{LayoutEntry:$}=r;return Cd(By.Provider,{value:{setting:!t||I&&!(null==R?void 0:R.id)?null:e.oneByOneEffect,playId:E.current?null:(E.current=!0,O),oid:w}},Cd(yS,{type:k,configType:N,direction:j,playId:U,parentId:null,ref:P,onAnimationEnd:M,className:"app-dialog-animation-content",style:{visibility:e.mode===Ql.oM.Fixed||i?"visible":"hidden"}},e.mode===Ql.oM.Fixed&&Cd(F,{className:"dialog-content"},Cd($,{layouts:e.layout,className:"w-100 h-100"})),e.mode===Ql.oM.Fixed&&e.interactionType&&Cd(B,{onClick:()=>{vy(D)},className:b()("dialog-footer",{"d-block":e.interactionType===Ql.lB.ButtonBlock,"has-mask":I})},Cd("div",{className:"d-flex flex-grow-1 overflow-hidden text-nowrap"},Cd(n.Label,{centric:!0,check:!0,className:"overflow-hidden mb-1",style:{fontSize:e.interactionStyles.textSize,textOverflow:"ellipsis",cursor:I?"inherit":"pointer"}},a?Cd("div",{className:"cbx-animation"}):Cd(n.Checkbox,{className:"mr-2",style:{cursor:"pointer"},onChange:e=>{u(e.target.checked)},checked:l}),Cd("span",{className:"text-break overflow-hidden",style:{textOverflow:"ellipsis",width:"calc(100% - 16px)"}},e.interactionStyles.text||s(e.confirmBeforeClose?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")))),e.interactionType!==Ql.lB.NoButton&&Cd("div",{className:"d-flex flex-row-reverse"},Cd(n.Button,{type:"primary",style:{fontSize:e.interactionStyles.buttonTextSize,lineHeight:1},disabled:e.interactionType&&e.confirmBeforeClose&&!l,onClick:e=>{c()}},Cd("span",{className:"d-flex align-items-center",style:{minHeight:"22px"}},e.interactionStyles.buttonText||s("ok"))))),e.mode===Ql.oM.Anchored&&Cd("div",{className:"app-dialog-container"},Cd("div",{className:"app-dialog-content"},Cd($,{layouts:e.layout,className:"w-100 h-100"})))))};var OS=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))},CS=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const{useEffect:TS,useState:xS,useRef:RS}=f;let PS=null;const DS=()=>{const e=Cl();return f.useCallback(((t,n)=>e.formatMessage({id:t,defaultMessage:Gi.A[t]},n)),[e])};function _S(e){var t,n;const{currentPageId:r,dialogProps:o,runtimeMode:i,timestamp:s,dialogInfos:a,dispatch:l,urlDlgId:u}=e,{dialogJson:c,isOpenByPage:d,runtime:p}=o;let f=!1;if(u===c.id&&!c.isSplash&&!d&&!c.confirmBeforeClose)return f;if(c.isSplash||d){const e=c.isSplash?c.id:`${r}-${c.id}`;if(p&&c.interactionType&&(c.confirmBeforeClose&&!c.alwaysShowConfirmation||!c.confirmBeforeClose)){const n=MS(e,i,s);f="true"===(0,Ti.readLocalStorage)(n.newKey)||"true"===(0,Ti.readLocalStorage)(n.oldKey),f&&LS(a,e,l),c.confirmBeforeClose||f||(f=null===(t=null==a?void 0:a[e])||void 0===t?void 0:t.isClosed)}else f=null===(n=null==a?void 0:a[e])||void 0===n?void 0:n.isClosed}return f}function LS(e,t,n){var r;(null===(r=null==e?void 0:e[t])||void 0===r?void 0:r.isClosed)||(e=(e||y({})).setIn([t,"isClosed"],!0),n((0,Ci.dialogInfosChanged)(e)))}const MS=(e,t,n)=>{const r=(0,Ti.getLocalStorageAppKey)();return{oldKey:`${r}-${"draft"===t?"draft":"release"}-${e}-${n}`,newKey:`${r}-${t}-${n}-${e}`}};function kS(){return OS(this,void 0,void 0,(function*(){return yield(0,Is.loadModule)("jimu-ui")}))}const NS=function(e){var t,n,r,o,i,{dialogJson:s}=e,a=CS(e,["dialogJson"]);const[l,u]=xS(null),[c,d]=xS(null),[p,h]=xS(null),[g,m]=xS(null),[S,I]=xS(0),w=RS(null),E=(0,v.useSelector)((e=>e.queryObject.disable_window_focus));null===PS&&(PS=E||"false");const A=(0,v.useSelector)((e=>e.queryObject.draft))?"draft":"published",O=(0,v.useSelector)((e=>e.appConfig.timestamp)),C=(0,v.useSelector)((e=>e.appRuntimeInfo.currentPageId)),T=(0,v.useSelector)((e=>{var t;return null===(t=e.appConfig.pages[C])||void 0===t?void 0:t.autoOpenDialogId})),x=(0,v.useSelector)((e=>e.appRuntimeInfo.currentDialogId)),R=(0,v.useSelector)((e=>e.appRuntimeInfo.appMode!==Os.$0.Run)),P=(0,v.useSelector)((e=>e.appRuntimeInfo.appMode===Os.$0.Express)),D=(0,v.useSelector)((e=>{var t,n;return null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===n?void 0:n.lockLayout})),_=(0,v.useSelector)((e=>e.browserSizeMode)),L=(0,v.useSelector)((e=>{var t,n,r;return null===(r=null===(n=null===(t=e.appConfig)||void 0===t?void 0:t.forBuilderAttributes)||void 0===n?void 0:n.viewPortSize)||void 0===r?void 0:r[_]}))||oa.SCREEN_RESOLUTIONS[_][1],[M,k]=xS(window.innerHeight),N=window.jimuConfig.isInBuilder?L.height:M,j=(0,v.useDispatch)(),U=DS(),F=(0,v.useSelector)((e=>(0,xi.getDialogIdFromIdOrLabel)(e.queryObject.dlg,e.appConfig))),B=(0,v.useSelector)((e=>e.appRuntimeInfo.dialogInfos)),$=(0,v.useSelector)((e=>{var t;return s.isSplash?s.id:e.appConfig.dialogs&&(null===(t=e.appConfig.dialogs[Object.keys(e.appConfig.dialogs).find((t=>e.appConfig.dialogs[t].isSplash))])||void 0===t?void 0:t.id)}),v.shallowEqual),[V,G]=xS(a.isOpenByPage&&x===$||s.id===F&&x!==F||x===s.id),W=a.isOpenByPage?C+"-"+s.id:s.id,[H,q]=xS(!(!B||!B[W])&&B[W].checked),z=s.sizeMode[_]||s.sizeMode[Os.rH.Large],K=z.position===Ql.M_.MiddleCenter,J=RS(null),[Y,Q]=xS(null),[X,Z]=xS(!0),[ee,te]=xS(!1),ne=e=>{var t;return null===(t=null==B?void 0:B[e])||void 0===t?void 0:t.isClosed},re=()=>R&&(P||!D)&&window.jimuConfig.isInBuilder,oe=()=>{k(window.innerHeight)};TS((()=>{if(re()&&p&&g){const e=(0,sp.A)((()=>{if(Y&&Y.unset(),J.current){const e=s.sizeMode[_]?_:Os.rH.Large;Q(function(e,t,n,r,o){let i,s,a,l,u,c;const d=n.sizeMode[r],p=(0,Bi.Vp)().getState().appContext.isRTL,f=document.querySelector(`div[id="${n.id}"] .app-dialog-content`),h=f.querySelector("div.app-dialog-resize-handlers"),g=h.querySelector("span.dialog-resize-left"),m=h.querySelector("span.dialog-resize-right"),v=h.querySelector("span.dialog-resize-top"),y=h.querySelector("span.dialog-resize-bottom"),S={};g&&(S.left=".dialog-resize-left"),m&&(S.right=".dialog-resize-right"),v&&(S.top=".dialog-resize-top"),y&&(S.bottom=".dialog-resize-bottom");const I="CUSTOM"===d.widthMode&&parseFloat(d.width.includes("%")?d.width.split("%")[0]:d.width.split("px")[0]),b="CUSTOM"===d.heightMode&&parseFloat(d.height.includes("%")?d.height.split("%")[0]:d.height.split("px")[0]);return e(t).resizable({edges:S}).on("resizestart",(e=>{e.stopPropagation(),i=0,s=0;const n=t.getBoundingClientRect();u=n.width,c=n.height,t.style.minWidth="0px",t.style.minHeight="0px"})).on("resizemove",((e,n)=>{e.stopPropagation();const r=e.deltaRect;i+=r.width*(p?-1:1),s+=r.height,a=i,l=s;const o=I&&`${u+i}px`,h=b&&`${c+s}px`;if(t.style.width=o,t.style.height=h,"CUSTOM"===d.widthMode)f.style.width=o;else{const t=e.edges.left?"left":"right",n=d[t].includes("px");let r=parseFloat(d[t].split("px")[0]);r=n?Math.max(0,r-i)+"px":Math.max(0,r-i/document.body.clientWidth*100)+"%",f.style[t]=r}if("CUSTOM"===d.heightMode)f.style.height=h;else{const t=e.edges.top?"top":"bottom",n=d[t].includes("px");let r=parseFloat(d[t].split("px")[0]);r=n?Math.max(0,r-s)+"px":Math.max(0,r-s/document.body.clientHeight*100)+"%",f.style[t]=r}v&&(v.style.width=o),y&&(y.style.width=o),g&&(g.style.height=h),m&&(m.style.height=h)})).on("resizeend",(e=>{e.stopPropagation();let n=(0,Bi.Vp)().getState().appConfig.dialogs[(0,Bi.Vp)().getState().appRuntimeInfo.currentDialogId];if(t.style.width=null,t.style.minWidth=null,t.style.height=null,t.style.minHeight=null,"CUSTOM"===d.widthMode){f.style.width=null;const e=Sy(d.width.includes("px")?"px":"%",I*(u+a)/u);n=n.setIn(["sizeMode",r,"width"],e)}else{const t=e.edges.left?"left":"right";n=n.setIn(["sizeMode",r,t],f.style[t]),f.style[t]=null}if("CUSTOM"===d.heightMode){f.style.height=null;const e=Sy(d.height.includes("px")?"px":"%",b*(c+l)/c);n=n.setIn(["sizeMode",r,"height"],e)}else{const t=e.edges.top?"top":"bottom";n=n.setIn(["sizeMode",r,t],f.style[t]),f.style[t]=null}v&&(v.style.width=null),y&&(y.style.width=null,y.style.top=null),g&&(g.style.height=null),m&&(m.style.height=null),o().editDialog(n).exec()}))}(g,J.current,s,e,p))}}),J.current?0:1e3);e()}}),[R,D,x,s.sizeMode[_],z.position,z.width,z.height,p,g]),TS((()=>{q(!1)}),[x]);const ie=f.useCallback((e=>{if("Tab"!==e.key)return;const t=l.getFocusableElements(e.currentTarget);if(!t||0===t.length)return void e.preventDefault();const n=t[0],r=t[t.length-1];e.shiftKey&&e.target===n?(e.preventDefault(),Hp(r,!0)):e.shiftKey||e.target!==r||(e.preventDefault(),Hp(n,!0))}),[l]);TS((()=>{var e,t;if(s.isSplash||a.isOpenByPage)return;const n=null===(e=J.current)||void 0===e?void 0:e.parentNode.parentNode.parentNode.parentNode;return a.isCurrentDialog?(w.current&&j((0,Ci.openOverlay)(w.current)),"BUTTON"!==document.activeElement.tagName&&"A"!==document.activeElement.tagName||(window.openedDialogElement=document.activeElement,null==n||n.addEventListener("keydown",ie)),I(Math.ceil(1e3*Math.random()))):(null===(t=window.openedDialogElement)||void 0===t||t.focus(),j((0,Ci.closeOverlay)(w.current))),()=>{null==n||n.removeEventListener("keydown",ie)}}),[a.isCurrentDialog,s.isSplash,a.isOpenByPage,ie,j]),TS((()=>{var e;if(S&&x&&!s.isSplash&&!a.isOpenByPage){const t=null===(e=document.getElementById(x))||void 0===e?void 0:e.parentNode;t&&Hp(t)}}),[S,x,s.isSplash,a.isOpenByPage]),TS((()=>{var e;Promise.all([kS(),yy()]).then((e=>{u(e[0]),d(e[1])})),window.jimuConfig.isInBuilder?(p||(0,Is.loadModule)("jimu-for-builder").then((e=>{h((()=>e.getAppConfigAction))})),g||(0,Is.loadModule)("jimu-core/dnd").then((e=>{m((()=>e.interact))}))):window.jimuConfig.isBuilder||(null===(e=z.height)||void 0===e?void 0:e.includes("%"))&&window.addEventListener("resize",oe);const t=MS($,A,O),n="true"===(0,Ti.readLocalStorage)(t.newKey)||"true"===(0,Ti.readLocalStorage)(t.oldKey);return(s.isSplash&&!ne($)&&(window.jimuConfig.isInBuilder||!n)||a.isOpenByPage&&($&&(ne($)||window.jimuConfig.isInBuilder||n)||!$))&&!_S({currentPageId:C,dialogProps:{dialogJson:s,runtime:a.runtime,isOpenByPage:a.isOpenByPage},runtimeMode:A,timestamp:O,dialogInfos:B,dispatch:j})&&s.id!==F&&s.id!==x&&(j((0,Ci.currentDialogChanged)(s.id)),j((0,Ci.activePagePartChanged)(null))),()=>{var e;R&&Y&&Y.unset(),!window.jimuConfig.isBuilder&&(null===(e=z.height)||void 0===e?void 0:e.includes("%"))&&window.removeEventListener("resize",oe);const t=(0,Bi.Vp)().getState(),n=t.appRuntimeInfo.dialogInfos;if(n){const e=n[le()];(null==e?void 0:e.canClose)&&ae(t)}}}),[]);const se=null===(t=null==B?void 0:B[x])||void 0===t?void 0:t.alertVersion;TS((()=>{if(se>=1){te(!0);(0,sp.A)((()=>{te(!1)}),800)()}}),[se]),TS((()=>{if((0,Ti.readLocalStorage)("exb-link-dialog"))return;let e=!1;if(s.isSplash||a.isOpenByPage||x){e=!_S({currentPageId:C,dialogProps:{dialogJson:s,runtime:a.runtime,isOpenByPage:a.isOpenByPage},runtimeMode:A,timestamp:O,dialogInfos:B,dispatch:j,urlDlgId:F})}e!==V&&G(e)}));const ae=e=>{var t,n,r;if(PS="false",s.isSplash||a.isOpenByPage){!function(e){var t;const{currentPageId:n,dialogProps:r,runtimeMode:o,timestamp:i,dialogInfos:s,dispatch:a}=e,{dialogJson:l,runtime:u}=r,c=l.isSplash?l.id:`${n}-${l.id}`;u&&l.interactionType&&(l.confirmBeforeClose&&!l.alwaysShowConfirmation||!l.confirmBeforeClose&&(null===(t=null==s?void 0:s[c])||void 0===t?void 0:t.checked))&&(0,Ti.setLocalStorage)(MS(c,o,i).newKey,"true");LS(s,c,a)}({currentPageId:C,dialogProps:{dialogJson:s,runtime:a.runtime},runtimeMode:A,timestamp:O,dialogInfos:(null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.dialogInfos)||B,dispatch:j});const r=ue(e);if(j((0,Ci.currentDialogChanged)(r)),G(!1),r){Hp(null===(n=document.getElementById(r))||void 0===n?void 0:n.parentNode)}else(0,bs.changeDialog)(null),j((0,Ci.activePagePartChanged)(Os.xH.Body))}else LS((null===(r=null==e?void 0:e.appRuntimeInfo)||void 0===r?void 0:r.dialogInfos)||B,s.id,j),(0,bs.changeDialog)(null),j((0,Ci.activePagePartChanged)(Os.xH.Body))},le=()=>a.isOpenByPage?C+"-"+s.id:s.id,ue=e=>{var t,n,r,o,i,l,u;let c=F,d=x;if((s.isSplash||a.isOpenByPage)&&(c=null==e?void 0:e.queryObject.dlg,d=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.currentDialogId,window.jimuConfig.isInBuilder)){if(s.isSplash){if(T&&!(null===(o=null===(r=e?null===(n=e.appRuntimeInfo)||void 0===n?void 0:n.dialogInfos:B)||void 0===r?void 0:r[C+"-"+T])||void 0===o?void 0:o.isClosed))return T;if(s.isSplash&&c===s.id&&(null===(u=null===(l=null===(i=null==e?void 0:e.appRuntimeInfo)||void 0===i?void 0:i.dialogInfos)||void 0===l?void 0:l[s.id])||void 0===u?void 0:u.isClosed))return null}return c}let p=s.isSplash&&(T||c)||a.isOpenByPage&&d!==c&&c||null;return d===p&&(p=null),p};if(!l||!c)return null;const{Modal:ce}=l,de=(0,Ti.getJimuThemeModule)().Global,pe=s.blockPage||s.isOpenerDlg,fe=!a.isCurrentDialog&&!s.isSplash&&!a.isOpenByPage;if(fe&&!s.isSplash&&!a.isOpenByPage){const e=document.getElementsByTagName("html")[0];e.classList.contains("scrollable")&&(e.style.overflow="auto",document.body.style.paddingRight=null)}return Cd(ce,{"aria-label":s.label,autoFocus:"true"!==PS,disableActivateOverlay:!0,centered:K,css:Dy(z,N,s.interactionType),id:s.id,isOpen:!s.isSplash&&!a.isOpenByPage||V,toggle:()=>{var e,t;if(!R||P)if(s.interactionType&&s.confirmBeforeClose&&!H){const n=(B||y({})).set(le(),{canClose:!1,checked:!1,alertVersion:(null!==(t=null===(e=null==B?void 0:B[le()])||void 0===e?void 0:e.alertVersion)&&void 0!==t?t:0)+1,isClosed:!1});j((0,Ci.dialogInfosChanged)(n))}else V&&s.closeWhenClickOverlay?ae():vy(j);else vy(j)},fade:!1,wrapClassName:b()(`app-dialog-wrap app-dialog-wrap-${s.id}${!0===pe?"":" no-backdrop"}`,{"d-none":fe}),modalClassName:"app-dialog-modal",className:"app-dialog w-100 h-100",backdropClassName:"app-dialog-backdrop",backdrop:!0===pe,"aria-modal":pe||!1,contentClassName:"app-dialog-content",onOpened:()=>{Z(!1)},overlayIdRef:w},Cd(de,{styles:Py(s,V)}),Cd("div",{className:"app-dialog-resize-container",css:xd`
    .app-dialog-resize-handlers{
      .resize-handler{
        width: 100%;
        height: 100%;
        position: absolute;
        z-index: 1;
        .resize-handler-icon {
          position: absolute;
          background-color: var(--ref-palette-black);
          border: 1px solid var(--ref-palette-white);
        }
        &.dialog-resize-top, &.dialog-resize-bottom {
          height: ${"4px"};
          cursor: ns-resize;
          .resize-handler-icon{
            left: min(50%, 50vw);
            width: ${38}px;
            margin-left: ${-19}px;
          }
        }
        &.dialog-resize-top{
          top: 0;
        }
        &.dialog-resize-bottom{
          bottom: 0;
        }
        &.dialog-resize-left, &.dialog-resize-right{
          width: ${"4px"};
          top: 0;
          cursor: ew-resize;
          .resize-handler-icon{
            top: 50%;
            height: ${38}px;
            margin-top: ${-19}px;
          }
        }
        &.dialog-resize-left{
          left: 0;
        }
        &.dialog-resize-right{
          right: 0;
        }
      }
    }
  `,ref:e=>{J.current=e}},Cd("div",{className:"w-100 h-100"},!X&&Cd(AS,{dialogJson:s,isOpen:V,jimuUI:l,jimuLayout:c,cbxAnimation:ee,messages:U,isChecked:H,setCbxState:e=>{q(e);const t=!s.interactionType||!s.confirmBeforeClose||e,n=(B||y({})).set(le(),{canClose:t,checked:e,isClosed:!1});j((0,Ci.dialogInfosChanged)(n))},closeDialog:ae,loadingCallBack:e=>null,version:S})),re()&&Cd("div",{className:b()("app-dialog-resize-handlers")},R&&Cd(f.Fragment,null,(!(null===(n=null==z?void 0:z.position)||void 0===n?void 0:n.includes("TOP"))||"STRETCH"===z.heightMode)&&Cd("span",{key:"1",className:"resize-handler dialog-resize-top"},Cd("div",{className:"resize-handler-icon h-100"})),(!(null===(r=null==z?void 0:z.position)||void 0===r?void 0:r.includes("BOTTOM"))||"STRETCH"===z.heightMode)&&Cd("span",{key:"2",className:"resize-handler dialog-resize-bottom"},Cd("div",{className:"resize-handler-icon h-100"})),(!(null===(o=null==z?void 0:z.position)||void 0===o?void 0:o.includes("LEFT"))||"STRETCH"===z.widthMode)&&Cd("span",{key:"3",className:"resize-handler dialog-resize-left"},Cd("div",{className:"resize-handler-icon w-100"})),(!(null===(i=null==z?void 0:z.position)||void 0===i?void 0:i.includes("RIGHT"))||"STRETCH"===z.widthMode)&&Cd("span",{key:"4",className:"resize-handler dialog-resize-right"},Cd("div",{className:"resize-handler-icon w-100"}))))))};var jS=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const{useEffect:US,useState:FS,useRef:BS}=f,$S={crossAxis:!0,padding:6},VS={boundary:document.body,fallbackPlacements:["top","right","left"]};function GS(){return jS(this,void 0,void 0,(function*(){return yield(0,Is.loadModule)("jimu-ui")}))}const WS=function({dialogJson:e,opener:t,isCurrentDialog:n,toggle:r}){const[o,i]=FS(null),[s,a]=FS(null),l=BS(0),[u,c]=FS(!0),d=BS(!1),[p,f]=FS(e.effect&&e.effect.type!==My.None),h=(0,v.useSelector)((e=>e.appRuntimeInfo.appMode===Os.$0.Design)),g=(0,v.useSelector)((e=>e.appRuntimeInfo.currentDialogId)),m=(0,v.useSelector)((e=>e.browserSizeMode)),y=e.sizeMode[m]||e.sizeMode[Os.rH.Large];if(US((()=>{Promise.all([GS(),yy()]).then((e=>{i(e[0]),a(e[1])}))}),[]),US((()=>{h&&g===e.id&&r(null,"pageOrSizeMode")}),[h]),US((()=>{var r;n&&d.current!==n?(l.current=100,c(!0),e.effect&&e.effect.type!==My.None||f(!1)):(l.current=0,f(!0),c(!1),null===(r=document.getElementById(t))||void 0===r||r.focus()),d.current=n}),[n,e.effect,t]),!o||!s)return null;const{Popper:S}=o;return Cd(S,{open:!0,arrowOptions:!!t,toggle:r,reference:t,shiftOptions:$S,flipOptions:VS,css:_y(e,y),disableActivateOverlay:e.closeWhenClickOverlay,autoFocus:u,version:l.current,className:b()("app-dialog",{"dialog-animation-playing":p,"dialog-animation-end":!p,"d-none":!n})},Cd(AS,{jimuUI:o,jimuLayout:s,isOpen:!0,dialogJson:e,version:l.current,loadingCallBack:e=>{f(e)}}))},{useEffect:HS}=f;function qS(e){const t=(0,v.useSelector)((e=>e.queryObject.draft))?"draft":"published",n=(0,v.useSelector)((e=>e.appConfig.timestamp)),r=(0,v.useSelector)((e=>e.appRuntimeInfo.currentPageId)),o=(0,v.useSelector)((e=>e.appRuntimeInfo.appMode===Os.$0.Design)),i=(0,v.useSelector)((e=>e.browserSizeMode)),s=e.dialogJson.sizeMode[i]?i:Os.rH.Large,a=(0,v.useDispatch)();if(HS((()=>{e.runtime&&function(e,t){const n=(0,Bi.Vp)().getState().appConfig.dialogs,r=Object.keys(n).filter((e=>n[e])),o=(0,Ti.getLocalStorageAppKey)();(0,Ti.readLocalStorageKeys)().forEach((n=>{!n.includes(t)&&r.forEach((t=>{n.includes(t)&&("draft"===e?n.includes(`${o}-draft`):n.includes(`${o}-release`)||n.includes(`${o}-published`))&&(0,Ti.removeFromLocalStorage)(n)}))}))}(t,n)}),[e.runtime,t,n]),HS((()=>{a((0,Ci.selectionChanged)(null))}),[o,e.dialogJson.id,r]),e.dialogJson.mode===Ql.oM.Fixed)return Cd(NS,Object.assign({},e));if(window.jimuConfig.isInBuilder&&!e.opener){const t=e.dialogJson.set("mode",Ql.oM.Fixed).set("isOpenerDlg",!0).setIn(["sizeMode",s,"position"],Ql.M_.MiddleCenter).setIn(["sizeMode",s,"widthMode"],"CUSTOM").setIn(["sizeMode",s,"heightMode"],"CUSTOM");return Cd(NS,{dialogJson:t,opener:e.opener,isOpenByPage:e.isOpenByPage,isCurrentDialog:!0})}return Cd(WS,Object.assign({},e))}var zS,KS;!function(e){e.Horizontal="H",e.Vertical="V"}(zS||(zS={})),function(e){e.Cube="CUBE",e.Cover="COVER",e.Fade="FADE",e.Push="PUSH",e.Box="BOX",e.None="None"}(KS||(KS={}));const JS={rotateX:0,rotateY:0,x:"0",y:"0"};class YS{constructor(e=!1,t=zS.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{display:e?"block":"none",rotateX:0,rotateY:0,opacity:e?1:0,x:"0",y:"0",transformOrigin:"top"}}initRotate(){return this.direction===zS.Vertical?"rotateX(-90deg)":this.isRTL?"rotateY(90deg)":"rotateY(-90deg)"}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){const o=e===t||e===n,i=this.getDiscreteOrigin(e,t,n,r);if(!o)return{display:"none",transformOrigin:""};const s={},a=this.direction===zS.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>n||r?90:-90;s.from=Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:e*a,rotateY:this.direction===zS.Horizontal?-e*a:0,opacity:1,transformOrigin:i}),s.to=Object.assign({},JS,{display:"block",rotateX:0,rotateY:0,opacity:1,x:"0",y:"0",transformOrigin:i})}else s.from=Object.assign({},JS,{display:"block",rotateX:0,rotateY:0,opacity:1,transformOrigin:i}),s.to=Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:e>t&&!r?90:-90,rotateY:this.direction===zS.Horizontal?e>t&&!r?-90*a:90*a:0,opacity:1,x:"0",y:"0",transformOrigin:i});return s}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none",transformOrigin:""};let i,s=r-n;t===n&&(s=1),i=this.direction===zS.Vertical||this.isRTL?e===t?90*(1-s):-90*s:e===t?-90*(1-s):90*s;const a=Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:i,rotateY:this.direction===zS.Horizontal?i:0,opacity:1,x:"0",y:"0",transformOrigin:this.getOrigin(e,t,n)});if(e===t&&o){const r={};let o;return o=this.direction===zS.Vertical||this.isRTL?90:-90,r.from=Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:o,rotateY:this.direction===zS.Horizontal?o:0,opacity:1,transformOrigin:this.getOrigin(e,t,n)}),r.to=a,r}return a}getOrigin(e,t,n){return e===t?this.direction===zS.Vertical?"bottom":this.isRTL?"left":"right":e===n?this.direction===zS.Vertical?"top":this.isRTL?"right":"left":void 0}getDiscreteOrigin(e,t,n,r){if(this.direction===zS.Vertical){if(e===t)return t>n||r?"bottom":"top";if(e===n)return t>n||r?"top":"bottom"}if(this.isRTL){if(e===t)return t>n||r?"left":"right";if(e===n)return t>n||r?"right":"left"}else{if(e===t)return t>n||r?"right":"left";if(e===n)return t>n||r?"left":"right"}return""}transform(e,t,n,r,o){if(t!==n&&t!==r)return null;const{rotateX:i,rotateY:s}=e;return i&&s?"perspective(1000px)":null}}class QS{constructor(e=!1,t=zS.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{x:"0",y:"0",opacity:e?1:0,display:e?"block":"none",zIndex:0}}initOffset(e,t,n,r){if(t!==n)return 0;let o=e-r;return n===r&&(o=1),this.direction===zS.Horizontal&&this.isRTL?100*(o-1):100*(1-o)}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){if(!(e===t||e===n))return{display:"none"};const o={},i=this.direction===zS.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>n||r?100*i:-100*i;o.from=Object.assign({},JS,{x:this.direction===zS.Horizontal?`${e}%`:"0",y:this.direction===zS.Horizontal?"0":`${e}%`,opacity:1,display:"block",zIndex:1}),o.to=Object.assign({},JS,{x:"0",y:"0",opacity:1,display:"block",zIndex:1})}else e===n&&(o.from=Object.assign({},JS,{x:"0",y:"0",opacity:1,display:"block",zIndex:0}),o.to=Object.assign({},JS,{x:"0",y:"0",opacity:1,display:"block",zIndex:0}));return o}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none"};const i=this.initOffset(r,e,t,n),s=Object.assign({},JS,{display:"block",x:this.direction===zS.Horizontal?`${i}%`:"0",y:this.direction===zS.Horizontal?"0":`${i}%`,opacity:1,zIndex:1});if(e===t&&o){const e={};let t;return t=this.direction===zS.Horizontal&&this.isRTL?-100:100,e.from=Object.assign({},JS,{display:"block",x:this.direction===zS.Horizontal?`${t}%`:"0",y:this.direction===zS.Horizontal?"0":`${t}%`,opacity:1,zIndex:1}),e.to=s,e}return s}transform(e,t,n,r,o){return null}}class XS{getInitProps(e){return{opacity:e?1:0,zIndex:1,display:e?"block":"none"}}getTransitionProps(e,t,n,r,o){return o>=0?this.getContinuousTransitionProps(e,t,n,o):this.getDiscreteTransitionProps(e,t,n)}getDiscreteTransitionProps(e,t,n){if(!(e===t||e===n))return{display:"none"};const r={};return e===t?(r.from=Object.assign({},JS,{opacity:0,zIndex:0,display:"block"}),r.to=Object.assign({},JS,{opacity:1,zIndex:1,display:"block"})):e===n&&(r.from=Object.assign({},JS,{opacity:1,zIndex:1,display:"block"}),r.to=Object.assign({},JS,{opacity:0,zIndex:0,display:"block"})),r}getContinuousTransitionProps(e,t,n,r=1){if(!(e===t||e===n))return{display:"none"};let o=r-n;return t===n&&(o=1),Object.assign({},JS,{display:"block",opacity:e===t?o:1-o,zIndex:e===t?1:0})}transform(e,t,n,r,o){return""}}class ZS{constructor(e=!1,t=zS.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{x:"0",y:"0",opacity:e?1:0,display:e?"block":"none"}}initOffset(e,t,n,r){let o=e-r;return n===r&&(o=1),t===n?this.direction===zS.Horizontal&&this.isRTL?100*(o-1):100*(1-o):this.direction===zS.Horizontal&&this.isRTL?100*o:-100*o}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){if(!(e===t||e===n))return{display:"none"};const o={},i=this.direction===zS.Horizontal&&this.isRTL?-1:1;if(e===t){const e=t>n||r?100*i:-100*i;o.from=Object.assign({},JS,{x:this.direction===zS.Horizontal?`${e}%`:"0",y:this.direction===zS.Horizontal?"0":`${e}%`,opacity:1,display:"block"}),o.to=Object.assign({},JS,{x:"0",y:"0",opacity:1,display:"block"})}else if(e===n){const n=e>t&&!r?100*i:-100*i;o.from=Object.assign({},JS,{x:"0",y:"0",opacity:1,display:"block"}),o.to=Object.assign({},JS,{x:this.direction===zS.Horizontal?`${n}%`:"0",y:this.direction===zS.Horizontal?"0":`${n}%`,opacity:1,display:"block"})}return o}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none"};const i=this.initOffset(r,e,t,n),s=Object.assign({},JS,{display:"block",x:this.direction===zS.Horizontal?`${i}%`:"0",y:this.direction===zS.Horizontal?"0":`${i}%`,opacity:1});if(o&&e===t){let e;e=this.direction===zS.Horizontal&&this.isRTL?-100:100;const t={};return t.from=Object.assign({},JS,{display:"block",x:this.direction===zS.Horizontal?`${e}%`:"0",y:this.direction===zS.Horizontal?"0":`${e}%`,opacity:1}),t.to=s,t}return s}transform(e,t,n,r,o){return null}}const eI=60;class tI{constructor(e=!1,t=zS.Horizontal){this.isRTL=e,this.direction=t}getInitProps(e){return{rotateX:0,rotateY:0,x:"0",y:"0",opacity:e?1:0,display:e?"block":"none",zIndex:1,transformOrigin:"top"}}initState(e,t,n,r){let o=e-r;return n===r&&(o=1),t===n?[100*(1-o),(1-o)*eI]:[-100*o,-60*o]}getContinuousOrigin(e,t,n){return this.direction===zS.Vertical?e===t?"top":"bottom":e===t?this.isRTL?"right":"left":this.isRTL?"left":"right"}getDiscreteOrigin(e,t,n,r){return this.direction===zS.Vertical?e===t?t>n||r?"top":"bottom":e<t||r?"bottom":"top":this.isRTL?e===t?t>n||r?"right":"left":e<t||r?"left":"right":e===t?t>n||r?"left":"right":e<t||r?"right":"left"}getTransitionProps(e,t,n,r,o,i){return o>=0?this.getContinuousTransitionProps(e,t,n,o,i):this.getDiscreteTransitionProps(e,t,n,r)}getDiscreteTransitionProps(e,t,n,r){const o=e===t||e===n,i=this.getDiscreteOrigin(e,t,n,r);if(!o)return{display:"none",transformOrigin:i};const s=this.isRTL?-1:1,a={};if(e===t){const e=t>n||r?100:-100,o=t>n||r?eI:-60;a.from=Object.assign({},JS,{rotateX:this.direction===zS.Horizontal?0:-o,rotateY:this.direction===zS.Horizontal?o*s:0,x:this.direction===zS.Horizontal?e*s+"%":"0",y:this.direction===zS.Horizontal?"0":`${e}%`,opacity:0,display:"block",zIndex:1,transformOrigin:i}),a.to=Object.assign({},JS,{rotateX:0,rotateY:0,x:"0",y:"0",opacity:1,display:"block",zIndex:1,transformOrigin:i})}else{const e=t>n||r?-100:100,o=t>n||r?-60:eI;a.from=Object.assign({},JS,{rotateX:0,rotateY:0,x:"0",y:"0",opacity:1,display:"block",zIndex:0,transformOrigin:i}),a.to=Object.assign({},JS,{rotateX:this.direction===zS.Horizontal?0:-o,rotateY:this.direction===zS.Horizontal?o*s:0,x:this.direction===zS.Horizontal?e*s+"%":"0",y:this.direction===zS.Horizontal?"0":`${e}%`,opacity:0,display:"block",zIndex:0,transformOrigin:i})}return a}getContinuousTransitionProps(e,t,n,r=1,o){if(!(e===t||e===n))return{display:"none",transformOrigin:""};const[i,s]=this.initState(r,e,t,n);let a=r-n;t===n&&(a=1);const l=this.isRTL?-1:1;if(e===t){const r={},u=Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:-s,rotateY:this.direction===zS.Horizontal?s*l:0,x:this.direction===zS.Horizontal?i*l+"%":"0",y:this.direction===zS.Horizontal?"0":`${i}%`,opacity:a,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,n)});return o?(r.from=Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:-60,rotateY:this.direction===zS.Horizontal?eI*l:0,x:this.direction===zS.Horizontal?100*l+"%":"0",y:this.direction===zS.Horizontal?"0":"100%",opacity:a,zIndex:1,transformOrigin:this.getContinuousOrigin(e,t,n)}),r.to=u,r):u}return Object.assign({},JS,{display:"block",rotateX:this.direction===zS.Horizontal?0:-s,rotateY:this.direction===zS.Horizontal?s*l:0,x:this.direction===zS.Horizontal?i*l+"%":"0",y:this.direction===zS.Horizontal?"0":`${i}%`,opacity:1-a,transformOrigin:this.getContinuousOrigin(e,t,n),zIndex:0})}transform(e,t,n,r,o){if(t!==n&&t!==r)return null;const{x:i,y:s}=e;return null==i||null==s?null:"perspective(1000px)"}}class nI{getInitProps(e){return{opacity:e?1:0,display:e?"block":"none"}}getTransitionProps(e,t,n,r,o=1){return Object.assign({},JS,{display:e===t?"block":"none",opacity:1,zIndex:e===t?1:0})}transform(e,t,n,r,o){return""}}function rI(){var e,t;return null!==(t=null===(e=(0,Bi.Vp)().getState().appContext)||void 0===e?void 0:e.isRTL)&&void 0!==t&&t}function oI(e){return Math.abs(e-Math.round(e))<1e-7}function iI(e,t){let n,r;const o=sI(e,0,1)*(t-1),i=Math.floor(o);return r=i,r=oI(o)?Math.round(o)-1:i,n=r+1,n=sI(n,0,t-1),r=sI(r,0,t-1),{previousIndex:r,progress:o,currentIndex:n}}function sI(e,t,n){return Math.max(t,Math.min(e,n))}function aI(e,t=zS.Horizontal){switch(e){case KS.Cover:return new QS(rI(),t);case KS.Cube:return new tI(rI(),t);case KS.Fade:return new XS;case KS.Push:return new ZS(rI(),t);case KS.Box:return new YS(rI(),t);default:return new nI}}function lI(e){const{useProgress:t=!1,useStep:n,progress:r,currentIndex:o,previousIndex:i,direction:s,transitionType:a,children:l,playId:u,withOneByOne:c,loop:d}=e,p=f.useRef(),h=f.useRef(),g=f.useRef(0),m=f.useRef(0),v=f.useRef(),y=f.useRef(),[S,I]=f.useState(),b=f.Children.count(l),w=f.useContext(By),{setting:E,playId:A}=w||{},O=f.useMemo((()=>aI(a,s)),[a,s]),[C,T]=f.useMemo((()=>{let e=r,n=!1,s=!1;if(t){const t=iI(r,b);e=t.progress,Math.round(100*v.current)!==Math.round(100*e)&&(n=!0,v.current=t.progress);let o=!0;p.current===t.currentIndex-1?s=!0:oI(r*(b-1))&&t.currentIndex===p.current-1&&(o=!1),o&&(p.current=t.currentIndex,h.current=t.previousIndex)}else p.current===o&&h.current===i||(n=p.current>=0,p.current=o,h.current=i);return y.current=n,[e,s]}),[t,r,b,o,i]),[x,R]=hr(b,(e=>O.getInitProps(e===p.current)),[O]),P=(e,t,n,r=!1,o=!1)=>{var i;R.stop();const s=(null===(i=(0,Bi.Vp)().getState().appRuntimeInfo)||void 0===i?void 0:i.appMode)===Os.$0.Design;R.start((i=>Object.assign(Object.assign({},O.getTransitionProps(i,e,t,d,n,r)),{config:{duration:400},immediate:o,onStart:()=>{var t;E&&(null!=n||!c&&s||i!==e||((null===(t=E.option)||void 0===t?void 0:t.start)===Uy.AfterPrevious?I({playId:Qy(),revert:!0}):I({playId:Qy(),revert:!1})))},onRest:()=>{var t;E&&(null!=n||!c&&s||i!==e||(null===(t=E.option)||void 0===t?void 0:t.start)===Uy.AfterPrevious&&I({playId:Qy(),revert:!1}))}})))};return f.useEffect((()=>{var e;if(u>g.current)return g.current=u,y.current=!1,void P(p.current,h.current,void 0);if(y.current){const r=(null===(e=(0,Bi.Vp)().getState().appRuntimeInfo)||void 0===e?void 0:e.appMode)===Os.$0.Design;y.current=!1,P(p.current,h.current,C,T,t&&!n||r)}})),f.useEffect((()=>{m.current=A}),[A]),f.createElement(f.Fragment,null,f.Children.map(l,((e,n)=>{var r,o,i;let s;p.current!==h.current&&(s=O.transform(x[n],n,p.current,h.current,C));const a=n===p.current,l=null!==(o=null===(r=e.props)||void 0===r?void 0:r.oid)&&void 0!==o?o:function(e){var t;const n=(0,Bi.Vp)().getState(),r=n.appConfig.views[e];return null===(t=null==r?void 0:r.layout)||void 0===t?void 0:t[n.browserSizeMode]}(null===(i=e.props)||void 0===i?void 0:i.viewId);return f.createElement(Jr.div,{className:"w-100 h-100 view-content",key:n,style:Object.assign({position:"absolute",transform:s},x[n])},f.createElement(By.Provider,{value:A>m.current?{setting:a?E:null,playId:A,revert:!1,oid:l}:{setting:t?null:a&&!y.current?E:null,playId:a&&!y.current?null==S?void 0:S.playId:null,revert:null==S?void 0:S.revert,oid:l}},e))})))}function uI(e){switch(e){case KS.Cover:case KS.Cube:case KS.Push:case KS.Box:return!0;default:return!1}}var cI=s(3982),dI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))};const{loadModules:pI,resolveModuleFullPath:fI}=Is,{getPortalProxyUrl:hI,getStandardPortalUrl:gI,isAGOLDomain:mI,isSamePortalUrl:vI}=Pi,{normalize:yI,getFolder:SI}=xi;let II,bI,wI,EI,AI;class OI{constructor(){this.id="arcgis-dependency-define"}getDependencyKey(){return"jimu-arcgis"}getResources(){var e,t;if(!this.themeLoadObserver){const t=null===(e=Is.getModuleSync("jimu-theme"))||void 0===e?void 0:e.ThemeStore;this.themeLoadObserver=null==t?void 0:t.subscribe(this.onCurrentThemeLoad.bind(this))}let n=window.jimuConfig.arcgisJsApiUrl;/\/$/.test(n)||(n+="/"),window.jimuConfig.arcgisJsApiUrl=n;const r=[{url:`${n}init.js`}],o=null===(t=Is.getModuleSync("jimu-theme"))||void 0===t?void 0:t.getTheme;return(null==o?void 0:o())&&(o().darkTheme?(document.body.classList.add("calcite-mode-dark"),r.push({url:this.getAPIThemeUrl(n,!0)})):r.push({url:this.getAPIThemeUrl(n,!1)})),window.esriConfig={has:{"esri-deprecation-warnings":!1}},[{url:"jimu-arcgis",dependencies:r}]}postInit(){return dI(this,void 0,void 0,(function*(){var e,t,n;yield this.initModules(),this.initToRegisterOAuthForMainPortalAndAGOL();const r=(0,Bi.Vp)().getState().portalUrl;EI.setLocale((0,Bi.Vp)().getState().appContext.locale),wI.request.proxyUrl=hI(r),this.initInterceptor(),wI.portalUrl=r;const o=null===(n=null===(t=null===(e=(0,Bi.Vp)().getState().portalSelf)||void 0===e?void 0:e.helperServices)||void 0===t?void 0:t.geometry)||void 0===n?void 0:n.url;o&&(wI.geometryServiceUrl=o),this.addToTrustedServers(),this.replaceGetCredential()}))}initModules(){return dI(this,void 0,void 0,(function*(){[bI,II,wI,EI,AI]=yield pI(["esri/identity/IdentityManager","esri/identity/OAuthInfo","esri/config","esri/intl","esri/core/Error"])}))}initInterceptor(){var e;ws.registerCacheableUrl(CI),ws.registerCacheableUrl(TI),ws.registerCacheableUrl(xI),null===(e=wI.request.interceptors)||void 0===e||e.push({before:e=>{var t,n,r;if(vs.getWhetherUseProxy()){const t=e.url;if("string"==typeof t){const n=vs.getProxyUrl(t);n&&n!==t&&(e.url=n)}}if(!ws.isURLCacheable(e.url,null===(t=e.requestOptions)||void 0===t?void 0:t.query))return;const o=ws.getRequestCache(e.url,null===(n=e.requestOptions)||void 0===n?void 0:n.query);if(o)return o.promise;{const t=new cI.G;ws.setRequestCache(e.url,null===(r=e.requestOptions)||void 0===r?void 0:r.query,t)}},after:e=>{var t,n,r,o,i,s;if(!e||!e.url)return;if(e.url.indexOf("/rest/info")&&(null===(t=e.data)||void 0===t?void 0:t.owningSystemUrl)&&this.registerOAuthInfo(e.data.owningSystemUrl),!ws.isURLCacheable(e.url,null===(n=e.requestOptions)||void 0===n?void 0:n.query))return;const a=ws.getRequestCache(e.url,null===(r=e.requestOptions)||void 0===r?void 0:r.query);if(a&&(a.resolve(e.data),null===(o=e.data)||void 0===o?void 0:o.editingInfo)){const t=Cs.A.getInstance().getDataSources(),n=Object.keys(t).filter((n=>t[n].url===e.url)).map((e=>t[e]));n.length>0?n.find((e=>e.getAutoRefreshInterval&&e.getAutoRefreshInterval()>0))&&ws.deleteRequestCache(e.url,null===(i=e.requestOptions)||void 0===i?void 0:i.query):ws.deleteRequestCache(e.url,null===(s=e.requestOptions)||void 0===s?void 0:s.query)}},error:e=>{var t,n,r,o,i,s;const a=ws.getRequestCache(null===(t=null==e?void 0:e.details)||void 0===t?void 0:t.url,null===(r=null===(n=null==e?void 0:e.details)||void 0===n?void 0:n.requestOptions)||void 0===r?void 0:r.query);a&&(a.reject(e),ws.deleteRequestCache(null===(o=null==e?void 0:e.details)||void 0===o?void 0:o.url,null===(s=null===(i=null==e?void 0:e.details)||void 0===i?void 0:i.requestOptions)||void 0===s?void 0:s.query))}})}replaceGetCredential(){const e=$i.Ay.getInstance(),t=bI.getCredential.bind(bI);let n;bI.getCredential=(r,o)=>{try{const i=!!e.getServerKeyFromUrl(r),s=$i.Ay.getInstance().getClientIdByUrl(r),a=(null==r?void 0:r.indexOf("/sharing/rest/portals/self"))>0,l=e.getNoPermissionResourceInfoByUrl(r),u=e.isSignInPromptBlocked(),c=r.includes("_exbForceLogin=true");if(l){return bI.findCredential(r)?t.call(bI,r,o):Promise.reject(new AI("identity-manager:user-aborted","ABORTED"))}if(u&&!a&&!c){let n;return n=e.getServerKeyFromUrl(r)?tf.A.getInstance().fetchArcGISServerInfo(r).then((e=>e)):Promise.resolve(null),n.then((e=>{const n=e?e.owningSystemUrl:r,i=bI.findCredential(n);return i?(this.checkSessionPermissionForUrl(r,i),t.call(bI,r,o)):(this.addToNoPermissionResourceInfoList(r),Promise.reject(new AI("identity-manager:user-aborted","ABORTED")))}))}let d=null;if(!(null==o?void 0:o.prompt)||bI.findCredential(r)||e.getSessionByUrl(r)||(d=e.tryToPendingSignInDialog(r)),d)n=d.promise.then((()=>t.call(bI,r,o)));else if(i||s||!(null==o?void 0:o.prompt)||bI.findCredential(r)||bI.findOAuthInfo(r))n=t.call(bI,r,o);else{const i=gI(r);n=e.useDialogToSetClientIdToConnectionsOfAppConfig(i).then((e=>(this.registerOAuthInfo(i,e),t.call(bI,r,o)))).catch((()=>t.call(bI,r,o)))}return n.then((e=>(this.checkSessionPermissionForUrl(r,e),e))).catch((t=>(e.releasePendingSignIn(r,t),"identity-manager:user-aborted"===t.name?this.addToNoPermissionResourceInfoList(r):"identity-manager:not-authenticated"===t.name&&e.handleInvalidToken(r),Promise.reject(t))))}catch(e){return console.warn('replaced "getCredential" method error',e),t.call(bI,r,o)}}}checkSessionPermissionForUrl(e,t){const n=$i.Ay.getInstance();(null==e?void 0:e.indexOf("/sharing/rest/portals/self"))>0||(n.getServerKeyFromUrl(e)?tf.A.getInstance().fetchArcGISServerInfo(e).then((r=>{n.checkSessionPermissionForUrl(e,t.token,t.userId,null==r?void 0:r.owningSystemUrl)})):n.checkSessionPermissionForUrl(e,t.token,t.userId,""))}addToNoPermissionResourceInfoList(e){const t=$i.Ay.getInstance();t.getServerKeyFromUrl(e)?tf.A.getInstance().fetchArcGISServerInfo(e).then((n=>{t.addToNoPermissionResourceInfoList(e,"",$i.Ag.SignInCanceled,!1,null==n?void 0:n.owningSystemUrl)})):t.addToNoPermissionResourceInfoList(e,"",$i.Ag.SignInCanceled,!1)}initToRegisterOAuthForMainPortalAndAGOL(){const e=$i.Ay.getInstance(),{portalUrl:t,isWebTier:n}=(0,Bi.Vp)().getState();n||this.registerOAuthInfo(t),this.registerOAuthInfo("https://devext.arcgis.com"),this.registerOAuthInfo("https://qaext.arcgis.com"),this.registerOAuthInfo("https://www.arcgis.com"),this.syncToArcgisJSAPI(e.getSessions()),e.addSessionChangeListener(this.onSessionChangedCallback.bind(this)),this.listeningJsApiSignIn()}registerOAuthInfo(e,t){var n,r;let o=bI.findOAuthInfo(e);if(t=t||$i.Ay.getInstance().getClientIdByUrl(e),!o&&t){const i=yI(`${window.location.origin}${SI(fI("jimu-arcgis"))}/oauth-callback.html`);o=new II({appId:t,expiration:20159,portalUrl:e,authNamespace:"/",popup:!0,flowType:"auto",locale:null===(r=null===(n=(0,Bi.Vp)().getState())||void 0===n?void 0:n.appContext)||void 0===r?void 0:r.locale,popupCallbackUrl:i}),bI.registerOAuthInfos([o])}}getFlowTypeForRegisteringOAuthInfo(e){var t;let n;if(mI(e))return"authorization-code";if(vI(e,(0,Bi.Vp)().getState().portalUrl))n=null===(t=(0,Bi.Vp)().getState().portalSelf)||void 0===t?void 0:t.currentVersion;else{const t=Li.getConnectionInfoFromAppConfig(e);n=null==t?void 0:t.portalVersion}return n&&Number(n)>=8.4?"authorization-code":"auto"}removePortalAndItsServerCredentials(e,t,n){const r=bI.findCredential(e,t),o=[];let i;i="portal"===(null==r?void 0:r.scope)?r.server:n,bI.credentials.forEach((e=>{if("server"===e.scope){const t=bI.serverInfos.find((t=>t.server===e.server));i===(null==t?void 0:t.owningSystemUrl)&&o.push(e)}else i===e.server&&o.push(e)})),o.forEach((e=>(null==e?void 0:e.server)&&e.destroy()))}addCredentialToSessionManger(e){const t=$i.Ay.getInstance();if("server"===e.scope&&e.server)return tf.A.getInstance().fetchArcGISServerInfo(e.server).then((n=>t.addFromCredential(e,$i.t4.ArcGISJSAPISync,n).then((()=>e))));{const n=bI.findOAuthInfo(e.server||"");return t.addFromCredential(e,$i.t4.ArcGISJSAPISync,null,n).then((()=>e))}}listeningJsApiSignIn(){bI.on("credential-create",(({credential:e})=>{this.addCredentialToSessionManger(e).then((e=>{var t;let n;n="server"===e.scope?(null===(t=e.resources)||void 0===t?void 0:t.length)>0?e.resources[0]:`${e.server}/rest/services`:e.server,$i.Ay.getInstance().releasePendingSignIn(n)})),e.on("token-change",(()=>{this.addCredentialToSessionManger(e)}))}))}syncToArcgisJSAPI(e){var t;const n=$i.Ay.getInstance();e&&e.forEach((e=>{var t;const r=e.server?`${e.server}/rest/services`:e.portal,o=bI.findCredential(r),i=!o||e.username!==o.userId||e.token!==o.token,s=n.getSessionType(e);i&&s!==$i.dF.ServerSessionFederated&&s!==$i.dF.ServerSessionStandAloneWebTier&&bI.registerToken({server:r,token:e.token,expires:null===(t=e.tokenExpires)||void 0===t?void 0:t.getTime(),ssl:e.ssl,userId:e.username})}));const r=[];null===(t=bI.credentials)||void 0===t||t.forEach((t=>{const o="server"===t.scope?`${t.server}/rest/services`:t.server,i=n.getSessionKeyFromUrl(o);e.find((e=>{const n=$i.Ay.getInstance().getSessionKeyFromSession(e);return i===n&&t.userId===e.username}))||r.push(t)})),r.forEach((e=>e.destroy()))}onSessionChangedCallback(e,t){t!==$i.t4.ArcGISJSAPISync&&this.syncToArcgisJSAPI(e)}addToTrustedServers(){const{portalUrl:e,isWebTier:t}=(0,Bi.Vp)().getState(),n=$i.Ay.getInstance().getTrustedServers();t&&wI.request.trustedServers.push(e),n.forEach((e=>{wI.request.trustedServers.includes(e)||wI.request.trustedServers.push(e)}))}onCurrentThemeLoad(e,t){var n;if(!e||t)return;if(this.checkAPITheme(this.getAPIThemeUrl(window.jimuConfig.arcgisJsApiUrl,"dark"===e.theme.sys.color.mode)))return;this.removeApiThemeStyle(this.getAPIThemeUrl(window.jimuConfig.arcgisJsApiUrl,"dark"!==e.theme.sys.color.mode)),Is.loadModule(this.getAPIThemeUrl(window.jimuConfig.arcgisJsApiUrl,"dark"===e.theme.sys.color.mode)),"dark"!==e.theme.sys.color.mode||document.body.classList.contains("calcite-mode-dark")?document.body.classList.remove("calcite-mode-dark"):document.body.classList.add("calcite-mode-dark");const r=null===(n=Is.getModuleSync("jimu-arcgis"))||void 0===n?void 0:n.MapViewManager;null==r||r.getInstance().getAllJimuMapViewIds().forEach((t=>{var n,o;const i=null===(n=r.getInstance().getJimuMapViewById(t).view)||void 0===n?void 0:n.ui.container;i&&("dark"!==(null===(o=e.theme)||void 0===o?void 0:o.sys.color.mode)||i.classList.contains("calcite-mode-dark")?(i.classList.remove("calcite-mode-dark"),i.classList.add("calcite-theme-light")):(i.classList.remove("calcite-theme-light"),i.classList.add("calcite-mode-dark")))}))}removeApiThemeStyle(e){var t;Is.deleteModule(e),null===(t=document.querySelector(`link[href="${e}"]`))||void 0===t||t.remove()}getAPIThemeUrl(e,t){return xi.isAbsoluteUrl(e)||(e=window.location.origin+e),t?`${e}esri/themes/dark/main.css`:`${e}esri/css/main.css`}checkAPITheme(e){return!!document.querySelector(`link[href="${e}"]`)}}function CI(e,t){return/rest\/services\/(.+)\/(MapServer|FeatureServer|ImageServer)\/(\d+)\/?$/.test(e)}function TI(e,t){return/sharing\/rest\/community\/self\/?$/.test(e)}function xI(e,t){const n="sharing/rest/content/items/",r=e.indexOf(n);if(r>-1){const t=e.substring(r+27).split("/");if(t.length>0&&(1===t.length||"data"===t[t.length-1]))return!0}return!1}function RI(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var PI=e=>Array.isArray(e)?e:[e];function DI(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var _I="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function LI(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let o,i=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=r}}const a=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),i++,r){const e=o?.deref?.()??o;null!=e&&r(e,l)&&(l=e,0!==i&&i--);o="object"==typeof l&&null!==l||"function"==typeof l?new _I(l):l}return a.s=1,a.v=l,l}return s.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function MI(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,o=0,i={},s=e.pop();"object"==typeof s&&(i=s,s=e.pop()),RI(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const a={...n,...i},{memoize:l,memoizeOptions:u=[],argsMemoize:c=LI,argsMemoizeOptions:d=[],devModeChecks:p={}}=a,f=PI(u),h=PI(d),g=DI(e),m=l((function(){return r++,s.apply(null,arguments)}),...f);const v=c((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let o=0;o<r;o++)n.push(e[o].apply(null,t));return n}(g,arguments);return t=m.apply(null,e),t}),...h);return Object.assign(v,{resultFunc:s,memoizedResultFunc:m,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:c})};return Object.assign(r,{withTypes:()=>r}),r}var kI=MI(LI),NI=Object.assign(((e,t=kI)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>NI});const jI=s(147).exbVersion,UI={assign:ip,defer:Gh.A,debounce:sp.A,setValue:Wh.A,getValue:Hh.A,isDeepEqual:ih.A,throttle:qh.A,kebabCase:Rg,camelCase:Qg,cloneDeep:Xg.A,clone:em,delay:rm,merge:_m},FI={restFeatureService:t,restPortal:Xr,restRequest:Qr,Sanitizer:Oi},BI={rgba:C.B3,parseToRgb:C.kN,rem:C.D0,readableColor:C.W0,lighten:C.a,darken:C.e$,ellipsis:C.gO,mix:C.jh,stripUnit:C.BP,math:C.Dy,borderRadius:C.Vq,getValueAndUnit:C.J$,parseToHsl:C.iC,shade:C.Qw,tint:C.uq};window._jimuHistory=bs})(),a})())}}}));